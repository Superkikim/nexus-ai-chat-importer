/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/config/constants.ts
var DEFAULT_SETTINGS, GITHUB, MESSAGE_TIMESTAMP_FORMATS;
var init_constants = __esm({
  "src/config/constants.ts"() {
    "use strict";
    DEFAULT_SETTINGS = {
      // ========================================
      // üìÅ FOLDER STRUCTURE
      // ========================================
      conversationFolder: "Nexus/Conversations",
      reportFolder: "Nexus/Reports",
      attachmentFolder: "Nexus/Attachments",
      // ========================================
      // üé® DISPLAY OPTIONS
      // ========================================
      addDatePrefix: false,
      dateFormat: "YYYY-MM-DD",
      // Message timestamp format
      useCustomMessageTimestampFormat: false,
      messageTimestampFormat: "locale",
      // ========================================
      // üîß INTERNAL SETTINGS
      // ========================================
      lastConversationsPerPage: 50,
      // ========================================
      // üîÑ MIGRATION FLAGS
      // ========================================
      hasShownUpgradeNotice: false,
      hasCompletedUpgrade: false,
      currentVersion: "0.0.0",
      previousVersion: "0.0.0"
    };
    GITHUB = {
      RAW_BASE: "https://raw.githubusercontent.com/Superkikim/nexus-ai-chat-importer",
      REPO_BASE: "https://github.com/Superkikim/nexus-ai-chat-importer"
    };
    MESSAGE_TIMESTAMP_FORMATS = {
      locale: {
        label: "Auto (Obsidian Language)",
        description: "Follows Obsidian language setting",
        dateFormat: "L",
        // moment.js locale-aware
        timeFormat: "LTS",
        // moment.js locale-aware
        separator: " at "
      },
      iso: {
        label: "YYYY-MM-DD HH:mm:ss (Universal)",
        description: "YYYY-MM-DD HH:mm:ss - Sortable, unambiguous",
        dateFormat: "YYYY-MM-DD",
        timeFormat: "HH:mm:ss",
        separator: " "
      },
      us: {
        label: "MM/DD/YYYY h:mm:ss AM/PM (US)",
        description: "MM/DD/YYYY h:mm:ss AM/PM",
        dateFormat: "MM/DD/YYYY",
        timeFormat: "h:mm:ss A",
        separator: " at "
      },
      eu: {
        label: "DD/MM/YYYY HH:mm:ss (Europe)",
        description: "DD/MM/YYYY HH:mm:ss",
        dateFormat: "DD/MM/YYYY",
        timeFormat: "HH:mm:ss",
        separator: " at "
      },
      de: {
        label: "DD.MM.YYYY HH:mm:ss (German/Swiss)",
        description: "DD.MM.YYYY HH:mm:ss",
        dateFormat: "DD.MM.YYYY",
        timeFormat: "HH:mm:ss",
        separator: " "
      },
      jp: {
        label: "YYYY/MM/DD HH:mm:ss (Japanese)",
        description: "YYYY/MM/DD HH:mm:ss",
        dateFormat: "YYYY/MM/DD",
        timeFormat: "HH:mm:ss",
        separator: " "
      }
    };
  }
});

// src/ui/components/kofi-support-box.ts
function createKofiSupportBox(container, message) {
  const supportBox = container.createDiv("kofi-support-box");
  const header = supportBox.createDiv("kofi-header");
  header.innerHTML = `\u2615 <span class="kofi-header-highlight">Support This Plugin</span>`;
  const messageEl = supportBox.createDiv("kofi-message");
  if (message) {
    const paragraphs = message.split("\n\n");
    messageEl.innerHTML = paragraphs.map((p) => {
      const hasStats = /\d{1,3}[',]\d{3}|\$\d+/.test(p);
      if (hasStats) {
        return `<p><span class="kofi-message-emphasis">${p}</span></p>`;
      }
      return `<p>${p}</p>`;
    }).join("");
  } else {
    messageEl.innerHTML = `
            <p><span class="kofi-message-emphasis">I'm working on Nexus projects full-time while unemployed and dealing with health issues.</span></p>
            <p>If this plugin makes your life easier, a donation would mean the world to me and help keep them alive.</p>
        `;
  }
  const realityCheck = supportBox.createDiv("kofi-reality-check");
  realityCheck.innerHTML = `
        <strong>Reality check:</strong> Thousands of hours of work over the year, more than 4'300 downloads, but only $20 in donations over two months. If you use this plugin regularly, please consider contributing. Even $5 makes a real difference! \u{1F64F}
    `;
  const buttonContainer = supportBox.createDiv("kofi-button-container");
  const buttonImagePath = "https://raw.githubusercontent.com/Superkikim/nexus-ai-chat-importer/1.3.0/support_me_on_kofi_red.png";
  buttonContainer.innerHTML = `
        <a href="https://ko-fi.com/nexusplugins" target="_blank">
            <img src="${buttonImagePath}" alt="Support me on Ko-fi" height="50">
        </a>
    `;
}
var init_kofi_support_box = __esm({
  "src/ui/components/kofi-support-box.ts"() {
    "use strict";
    __name(createKofiSupportBox, "createKofiSupportBox");
  }
});

// src/dialogs/folder-tree-browser-modal.ts
var import_obsidian3, FolderTreeBrowserModal;
var init_folder_tree_browser_modal = __esm({
  "src/dialogs/folder-tree-browser-modal.ts"() {
    "use strict";
    import_obsidian3 = require("obsidian");
    FolderTreeBrowserModal = class extends import_obsidian3.Modal {
      // Track folders created during this session
      constructor(app, onSubmit, initialPath, validatePath) {
        super(app);
        this.selectedFolder = null;
        this.expandedFolders = /* @__PURE__ */ new Set();
        this.createdFolders = /* @__PURE__ */ new Set();
        this.onSubmit = onSubmit;
        this.validatePath = validatePath;
        if (initialPath) {
          const folder = this.app.vault.getAbstractFileByPath(initialPath);
          if (folder instanceof import_obsidian3.TFolder) {
            this.selectedFolder = folder;
            let current = folder.parent;
            while (current && current.path !== "/") {
              this.expandedFolders.add(current.path);
              current = current.parent;
            }
            this.expandedFolders.add(folder.path);
          }
        }
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h3", { text: "Select Folder" });
        this.treeContainer = contentEl.createDiv({ cls: "nexus-folder-tree-container" });
        this.treeContainer.style.maxHeight = "400px";
        this.treeContainer.style.overflowY = "auto";
        this.treeContainer.style.marginBottom = "20px";
        this.treeContainer.style.border = "1px solid var(--background-modifier-border)";
        this.treeContainer.style.borderRadius = "4px";
        this.treeContainer.style.padding = "8px";
        this.renderTree();
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        buttonContainer.style.display = "flex";
        buttonContainer.style.gap = "8px";
        buttonContainer.style.justifyContent = "flex-end";
        const createButton = buttonContainer.createEl("button", { text: "Create New Folder" });
        createButton.addEventListener("click", () => this.handleCreateFolder());
        const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
        cancelButton.addEventListener("click", () => this.handleCancel());
        const selectButton = buttonContainer.createEl("button", {
          text: "Select",
          cls: "mod-cta"
        });
        selectButton.addEventListener("click", () => this.handleSelect());
      }
      renderTree() {
        this.treeContainer.empty();
        const root = this.app.vault.getRoot();
        const rootItem = this.treeContainer.createDiv({ cls: "nexus-tree-item" });
        rootItem.style.display = "flex";
        rootItem.style.alignItems = "center";
        rootItem.style.padding = "4px 8px";
        rootItem.style.cursor = "pointer";
        rootItem.style.borderRadius = "4px";
        if (this.selectedFolder === root) {
          rootItem.style.backgroundColor = "var(--background-modifier-hover)";
        }
        const rootIcon = rootItem.createSpan({ text: "\u{1F4C1} " });
        const rootLabel = rootItem.createSpan({ text: "Vault Root (/)" });
        rootLabel.style.fontWeight = "bold";
        rootItem.addEventListener("click", (e) => {
          e.stopPropagation();
          this.handleFolderClick(root);
        });
        this.renderFolderChildren(root, 0);
      }
      renderFolderChildren(folder, depth) {
        const children = folder.children.filter((child) => child instanceof import_obsidian3.TFolder).sort((a, b) => a.name.localeCompare(b.name));
        for (const child of children) {
          this.renderFolder(child, depth + 1);
        }
      }
      renderFolder(folder, depth) {
        var _a;
        const isExpanded = this.expandedFolders.has(folder.path);
        const isSelected = ((_a = this.selectedFolder) == null ? void 0 : _a.path) === folder.path;
        const hasChildren = folder.children.some((c) => c instanceof import_obsidian3.TFolder);
        const item = this.treeContainer.createDiv({ cls: "nexus-tree-item" });
        item.style.display = "flex";
        item.style.alignItems = "center";
        item.style.padding = "4px 8px";
        item.style.paddingLeft = `${depth * 20 + 8}px`;
        item.style.cursor = "pointer";
        item.style.borderRadius = "4px";
        if (isSelected) {
          item.style.backgroundColor = "var(--background-modifier-hover)";
          item.style.fontWeight = "bold";
        }
        const expandIcon = item.createSpan();
        expandIcon.style.width = "16px";
        expandIcon.style.marginRight = "4px";
        if (hasChildren) {
          expandIcon.setText(isExpanded ? "\u25BC" : "\u25B6");
        } else {
          expandIcon.setText(" ");
        }
        item.createSpan({ text: "\u{1F4C1} " });
        item.createSpan({ text: folder.name });
        item.addEventListener("click", (e) => {
          e.stopPropagation();
          this.handleFolderClick(folder);
        });
        item.addEventListener("mouseenter", () => {
          if (!isSelected) {
            item.style.backgroundColor = "var(--background-modifier-hover-light)";
          }
        });
        item.addEventListener("mouseleave", () => {
          if (!isSelected) {
            item.style.backgroundColor = "";
          }
        });
        if (isExpanded && hasChildren) {
          this.renderFolderChildren(folder, depth);
        }
      }
      handleFolderClick(folder) {
        var _a;
        const wasExpanded = this.expandedFolders.has(folder.path);
        if (((_a = this.selectedFolder) == null ? void 0 : _a.path) === folder.path) {
          if (wasExpanded) {
            this.expandedFolders.delete(folder.path);
            this.collapseAllChildren(folder);
          } else {
            this.expandedFolders.add(folder.path);
          }
        } else {
          if (folder.parent) {
            const siblings = folder.parent.children.filter((c) => c instanceof import_obsidian3.TFolder);
            for (const sibling of siblings) {
              if (sibling.path !== folder.path) {
                this.expandedFolders.delete(sibling.path);
                this.collapseAllChildren(sibling);
              }
            }
          }
          this.selectedFolder = folder;
          this.expandedFolders.add(folder.path);
        }
        this.renderTree();
      }
      collapseAllChildren(folder) {
        for (const child of folder.children) {
          if (child instanceof import_obsidian3.TFolder) {
            this.expandedFolders.delete(child.path);
            this.collapseAllChildren(child);
          }
        }
      }
      async handleCreateFolder() {
        var _a;
        if (!this.selectedFolder) {
          new import_obsidian3.Notice("\u26A0\uFE0F Please select a parent folder first");
          return;
        }
        const folderName = await this.promptForFolderName();
        if (!folderName) {
          return;
        }
        if (folderName.includes("/") || folderName.includes("\\") || folderName.includes(":") || folderName.includes("*") || folderName.includes("?") || folderName.includes('"') || folderName.includes("<") || folderName.includes(">") || folderName.includes("|")) {
          new import_obsidian3.Notice("\u274C Invalid folder name: contains illegal characters");
          return;
        }
        const parentPath = this.selectedFolder.path === "/" ? "" : this.selectedFolder.path;
        const newFolderPath = parentPath ? `${parentPath}/${folderName}` : folderName;
        const exists = this.app.vault.getAbstractFileByPath(newFolderPath);
        if (exists) {
          new import_obsidian3.Notice("\u274C Folder already exists");
          return;
        }
        if (this.validatePath) {
          const validation = this.validatePath(newFolderPath);
          if (!validation.valid) {
            new import_obsidian3.Notice(`\u274C ${(_a = validation.error) != null ? _a : "Invalid folder location"}`);
            return;
          }
        }
        try {
          await this.app.vault.createFolder(newFolderPath);
          this.createdFolders.add(newFolderPath);
          new import_obsidian3.Notice(`\u2705 Created folder: ${folderName}`);
          this.expandedFolders.add(this.selectedFolder.path);
          const newFolder = this.app.vault.getAbstractFileByPath(newFolderPath);
          if (newFolder instanceof import_obsidian3.TFolder) {
            this.selectedFolder = newFolder;
            this.expandedFolders.add(newFolder.path);
          }
          this.renderTree();
        } catch (error) {
          new import_obsidian3.Notice(`\u274C Failed to create folder: ${error.message}`);
        }
      }
      promptForFolderName() {
        return new Promise((resolve) => {
          const modal = new import_obsidian3.Modal(this.app);
          modal.titleEl.setText("Create New Folder");
          const inputContainer = modal.contentEl.createDiv();
          inputContainer.style.marginBottom = "20px";
          inputContainer.createEl("label", { text: "Folder name:" });
          const input = inputContainer.createEl("input", { type: "text" });
          input.style.width = "100%";
          input.style.marginTop = "8px";
          const buttonContainer = modal.contentEl.createDiv({ cls: "modal-button-container" });
          const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
          cancelButton.addEventListener("click", () => {
            modal.close();
            resolve(null);
          });
          const createButton = buttonContainer.createEl("button", {
            text: "Create",
            cls: "mod-cta"
          });
          createButton.addEventListener("click", () => {
            const value = input.value.trim();
            modal.close();
            resolve(value || null);
          });
          input.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              e.preventDefault();
              const value = input.value.trim();
              modal.close();
              resolve(value || null);
            } else if (e.key === "Escape") {
              modal.close();
              resolve(null);
            }
          });
          modal.open();
          input.focus();
        });
      }
      handleSelect() {
        var _a;
        if (!this.selectedFolder) {
          new import_obsidian3.Notice("\u26A0\uFE0F Please select a folder first");
          return;
        }
        const path = this.selectedFolder.path === "/" ? "" : this.selectedFolder.path;
        if (this.validatePath) {
          const validation = this.validatePath(path);
          if (!validation.valid) {
            new import_obsidian3.Notice(`\u274C ${(_a = validation.error) != null ? _a : "Invalid folder location"}`);
            return;
          }
        }
        this.createdFolders.clear();
        this.onSubmit(path);
        this.close();
      }
      async handleCancel() {
        await this.cleanupCreatedFolders();
        this.close();
      }
      async cleanupCreatedFolders() {
        const sortedFolders = Array.from(this.createdFolders).sort((a, b) => {
          const depthA = a.split("/").length;
          const depthB = b.split("/").length;
          return depthB - depthA;
        });
        for (const folderPath of sortedFolders) {
          try {
            const folder = this.app.vault.getAbstractFileByPath(folderPath);
            if (folder instanceof import_obsidian3.TFolder && folder.children.length === 0) {
              await this.app.vault.delete(folder);
            }
          } catch (error) {
          }
        }
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    __name(FolderTreeBrowserModal, "FolderTreeBrowserModal");
  }
});

// src/utils/folder-validation.ts
function isPathInsidePath(pathToCheck, existingPath) {
  if (!pathToCheck || !existingPath) {
    return false;
  }
  const normalizedCheck = pathToCheck.replace(/\/$/, "");
  const normalizedExisting = existingPath.replace(/\/$/, "");
  if (normalizedCheck === normalizedExisting) {
    return false;
  }
  return normalizedCheck.startsWith(normalizedExisting + "/");
}
function validateFolderNesting(folderType, newPath, conversationFolder, reportFolder, attachmentFolder) {
  const normalizedNewPath = newPath.trim().replace(/\/$/, "");
  if (!normalizedNewPath) {
    return {
      valid: false,
      error: "Folder path cannot be empty"
    };
  }
  switch (folderType) {
    case "conversationFolder":
      if (isPathInsidePath(normalizedNewPath, reportFolder)) {
        return {
          valid: false,
          error: `Conversation folder cannot be inside the Report folder (${reportFolder})`
        };
      }
      if (isPathInsidePath(normalizedNewPath, attachmentFolder)) {
        return {
          valid: false,
          error: `Conversation folder cannot be inside the Attachment folder (${attachmentFolder})`
        };
      }
      break;
    case "reportFolder":
      if (isPathInsidePath(normalizedNewPath, conversationFolder)) {
        return {
          valid: false,
          error: `Report folder cannot be inside the Conversation folder (${conversationFolder})`
        };
      }
      if (isPathInsidePath(normalizedNewPath, attachmentFolder)) {
        return {
          valid: false,
          error: `Report folder cannot be inside the Attachment folder (${attachmentFolder})`
        };
      }
      break;
    case "attachmentFolder":
      if (isPathInsidePath(normalizedNewPath, conversationFolder)) {
        return {
          valid: false,
          error: `Attachment folder cannot be inside the Conversation folder (${conversationFolder})`
        };
      }
      if (isPathInsidePath(normalizedNewPath, reportFolder)) {
        return {
          valid: false,
          error: `Attachment folder cannot be inside the Report folder (${reportFolder})`
        };
      }
      break;
  }
  return { valid: true };
}
var init_folder_validation = __esm({
  "src/utils/folder-validation.ts"() {
    "use strict";
    __name(isPathInsidePath, "isPathInsidePath");
    __name(validateFolderNesting, "validateFolderNesting");
  }
});

// src/logger.ts
var LogLevel, Logger, logger2;
var init_logger = __esm({
  "src/logger.ts"() {
    "use strict";
    LogLevel = /* @__PURE__ */ ((LogLevel2) => {
      LogLevel2[LogLevel2["DEBUG"] = 0] = "DEBUG";
      LogLevel2[LogLevel2["INFO"] = 1] = "INFO";
      LogLevel2[LogLevel2["WARN"] = 2] = "WARN";
      LogLevel2[LogLevel2["ERROR"] = 3] = "ERROR";
      return LogLevel2;
    })(LogLevel || {});
    Logger = class {
      logToConsole(level, message, details) {
        console.log(`[${LogLevel[level]}] ${message}`);
      }
      debug(message, details) {
        console.debug(message, details || "");
      }
      info(message, details) {
        console.log(message);
      }
      warn(message, details) {
        console.warn(message);
      }
      error(message, details) {
        console.error(message);
      }
    };
    __name(Logger, "Logger");
    logger2 = new Logger();
  }
});

// src/utils.ts
var utils_exports = {};
__export(utils_exports, {
  addPrefix: () => addPrefix,
  checkConversationLink: () => checkConversationLink,
  compareTimestampsIgnoringSeconds: () => compareTimestampsIgnoringSeconds,
  createDatePrefix: () => createDatePrefix,
  doesFilePathExist: () => doesFilePathExist,
  ensureFolderExists: () => ensureFolderExists,
  formatMessageTimestamp: () => formatMessageTimestamp,
  formatTimestamp: () => formatTimestamp,
  formatTitle: () => formatTitle,
  generateConversationFileName: () => generateConversationFileName,
  generateFileName: () => generateFileName,
  generateSafeAlias: () => generateSafeAlias,
  generateUniqueFileName: () => generateUniqueFileName,
  generateYearMonthFolder: () => generateYearMonthFolder,
  getFileHash: () => getFileHash,
  isCustomError: () => isCustomError,
  isNexusRelated: () => isNexusRelated,
  isValidMessage: () => isValidMessage,
  moveAndMergeFolders: () => moveAndMergeFolders,
  old_getConversationId: () => old_getConversationId,
  truncateToMinute: () => truncateToMinute
});
function truncateToMinute(unixTime) {
  return Math.floor(unixTime / 60) * 60;
}
function compareTimestampsIgnoringSeconds(time1, time2) {
  return truncateToMinute(time1) - truncateToMinute(time2);
}
function formatMessageTimestamp(unixTime, customFormat) {
  const date = (0, import_obsidian4.moment)(unixTime * 1e3);
  if (!customFormat || customFormat === "locale") {
    return `${date.format("L")} at ${date.format("LTS")}`;
  }
  const format = MESSAGE_TIMESTAMP_FORMATS[customFormat];
  return `${date.format(format.dateFormat)}${format.separator}${date.format(format.timeFormat)}`;
}
function formatTimestamp(unixTime, format) {
  const date = (0, import_obsidian4.moment)(unixTime * 1e3);
  switch (format) {
    case "prefix":
      return date.format("YYYYMMDD");
    case "date":
      return date.format("L");
    case "time":
      return date.format("LTS");
  }
}
function generateYearMonthFolder(unixTime) {
  const date = new Date(unixTime * 1e3);
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, "0");
  return `${year}/${month}`;
}
function formatTitle(title) {
  return title.trim() || "Untitled";
}
function generateFileName(title) {
  let fileName = formatTitle(title).normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[<>:"\/\\|?*\n\r]+/g, "").replace(/\.{2,}/g, ".").trim();
  fileName = fileName.replace(/^[^\w\d\s]+/, "");
  fileName = fileName.replace(/\s+/g, " ").trim();
  if (!fileName || fileName.length === 0) {
    fileName = "Untitled";
  }
  if (fileName.startsWith(".")) {
    fileName = fileName.substring(1);
  }
  if (!fileName || fileName.length === 0) {
    fileName = "Untitled";
  }
  return fileName;
}
function addPrefix(filename, timeStamp, dateFormat) {
  const timeStampStr = formatTimestamp(timeStamp, dateFormat);
  if (timeStampStr) {
    filename = `${timeStampStr} - ${filename}`;
  }
  return filename;
}
function createDatePrefix(timeStamp, dateFormat) {
  const date = new Date(timeStamp * 1e3);
  let prefix = "";
  if (dateFormat === "YYYY-MM-DD") {
    prefix = date.toISOString().split("T")[0];
  } else if (dateFormat === "YYYYMMDD") {
    prefix = date.toISOString().split("T")[0].replace(/-/g, "");
  }
  return prefix;
}
async function generateUniqueFileName(filePath, vaultAdapter) {
  let uniqueFileName = filePath;
  const baseName = filePath.replace(/\.md$/, "");
  let counter = 1;
  while (await vaultAdapter.exists(uniqueFileName)) {
    uniqueFileName = `${baseName} (${counter++}).md`;
  }
  return uniqueFileName;
}
async function doesFilePathExist(filePath, vault) {
  const file = vault.getAbstractFileByPath(filePath);
  return file !== null;
}
async function getFileHash(file) {
  const buffer = await file.arrayBuffer();
  const hashBuffer = await crypto.subtle.digest("SHA-256", buffer);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  return hashArray.map((b) => b.toString(16).padStart(2, "0")).join("");
}
function generateConversationFileName(chatTitle, createTime, addDatePrefix, dateFormat) {
  const date = new Date(createTime * 1e3);
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, "0");
  let fileName = generateFileName(chatTitle);
  if (addDatePrefix) {
    const day = String(date.getDate()).padStart(2, "0");
    let prefix = "";
    if (dateFormat === "YYYY-MM-DD") {
      prefix = `${year}-${month}-${day}`;
    } else if (dateFormat === "YYYYMMDD") {
      prefix = `${year}${month}${day}`;
    }
    fileName = `${prefix} - ${fileName}`;
  }
  return fileName;
}
function generateSafeAlias(title) {
  if (!title || typeof title !== "string") {
    return "Untitled";
  }
  const startsWithYamlSpecial = title.startsWith("#") || title.startsWith("&") || title.startsWith("*") || title.startsWith("!") || title.startsWith("|") || title.startsWith(">") || title.startsWith("%") || title.startsWith("@") || title.startsWith("`");
  let cleanName = title.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[<>\/\\|?*\n\r]+/g, "").replace(/\.{2,}/g, ".").trim();
  cleanName = cleanName.replace(/^[^\w\d\s"']+/, "");
  cleanName = cleanName.replace(/\s+/g, " ").trim();
  if (!cleanName || cleanName.length === 0) {
    cleanName = "Untitled";
  }
  if (cleanName.startsWith(".")) {
    cleanName = cleanName.substring(1);
  }
  if (!cleanName || cleanName.length === 0) {
    cleanName = "Untitled";
  }
  const needsQuotes = (
    // YAML reserved words
    /^(true|false|null|yes|no|on|off|\d+|\d*\.\d+)$/i.test(cleanName) || // Contains quotes
    cleanName.includes('"') || // Contains colon (CRITICAL: prevents YAML key-value interpretation)
    cleanName.includes(":") || // Contains square brackets or curly braces (YAML flow collections)
    cleanName.includes("[") || cleanName.includes("]") || cleanName.includes("{") || cleanName.includes("}") || // Started with YAML special characters (before sanitization)
    startsWithYamlSpecial || // Contains newlines or tabs (safety check)
    cleanName.includes("\n") || cleanName.includes("\r") || cleanName.includes("	")
  );
  if (needsQuotes) {
    return `'${cleanName.replace(/'/g, "''")}'`;
  }
  return cleanName;
}
function isValidMessage(message) {
  return message && typeof message === "object" && message.content && typeof message.content === "object" && Array.isArray(message.content.parts) && message.content.parts.length > 0 && message.content.parts.some(
    (part) => {
      if (typeof part === "string" && part.trim() !== "") {
        return true;
      }
      if (typeof part === "object" && part !== null) {
        if (part.content_type === "audio_transcription" && part.text && part.text.trim() !== "") {
          return true;
        }
        if (part.content_type === "text" && part.text && part.text.trim() !== "") {
          return true;
        }
        if (part.content_type === "multimodal_text" && part.text && part.text.trim() !== "") {
          return true;
        }
      }
      return false;
    }
  );
}
function isCustomError(error) {
  return error && typeof error.message === "string";
}
async function ensureFolderExists(folderPath, vault) {
  const folders = folderPath.split("/").filter((p) => p.length);
  let currentPath = "";
  for (const folder of folders) {
    currentPath += folder + "/";
    const currentFolder = vault.getAbstractFileByPath(currentPath);
    if (!currentFolder) {
      try {
        await vault.createFolder(currentPath);
      } catch (error) {
        if (error.message !== "Folder already exists.") {
          logger3.error(
            `Failed to create folder: ${currentPath}`,
            error.message
          );
          return {
            success: false,
            error: `Failed to create folder: ${currentPath}. Reason: ${error.message}`
          };
        }
      }
    }
  }
  return { success: true };
}
async function checkConversationLink(conversationId, provider = "chatgpt") {
  let url;
  switch (provider) {
    case "chatgpt":
      url = `https://chatgpt.com/c/${conversationId}`;
      break;
    case "claude":
      url = `https://claude.ai/chat/${conversationId}`;
      break;
    default:
      logger3.error(`Unknown provider for link checking: ${provider}`);
      return false;
  }
  try {
    const response = await (0, import_obsidian5.requestUrl)({
      url,
      method: "HEAD"
    });
    return response.status >= 200 && response.status < 300;
  } catch (error) {
    logger3.error(`Error fetching ${url}:`, error);
    return false;
  }
}
function old_getConversationId(app) {
  var _a;
  const activeFile = app.workspace.getActiveFile();
  if (activeFile) {
    const frontmatter = (_a = app.metadataCache.getFileCache(activeFile)) == null ? void 0 : _a.frontmatter;
    return frontmatter == null ? void 0 : frontmatter.conversation_id;
  }
  return void 0;
}
function isNexusRelated(file, app) {
  var _a;
  const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
  return (frontmatter == null ? void 0 : frontmatter.nexus) === "nexus-ai-chat-importer";
}
async function moveAndMergeFolders(oldFolder, newPath, vault, onProgress) {
  let moved = 0;
  let skipped = 0;
  let errors = 0;
  const errorDetails = [];
  const foldersToDelete = [];
  let totalFiles = 0;
  let processedFiles = 0;
  function countFiles(folder) {
    let count = 0;
    for (const child of folder.children) {
      if (child instanceof import_obsidian4.TFolder) {
        count += countFiles(child);
      } else {
        count++;
      }
    }
    return count;
  }
  __name(countFiles, "countFiles");
  totalFiles = countFiles(oldFolder);
  async function moveRecursive(sourceFolder, destPath) {
    var _a;
    try {
      await vault.createFolder(destPath);
    } catch (error) {
      if (!((_a = error.message) == null ? void 0 : _a.includes("Folder already exists"))) {
        throw error;
      }
    }
    foldersToDelete.push(sourceFolder);
    for (const child of [...sourceFolder.children]) {
      const childNewPath = `${destPath}/${child.name}`;
      if (child instanceof import_obsidian4.TFolder) {
        await moveRecursive(child, childNewPath);
      } else {
        try {
          const exists = await vault.adapter.exists(childNewPath);
          if (exists) {
            skipped++;
            processedFiles++;
            if (onProgress) {
              onProgress(processedFiles, totalFiles);
            }
            continue;
          }
          await vault.rename(child, childNewPath);
          moved++;
          processedFiles++;
          if (onProgress) {
            onProgress(processedFiles, totalFiles);
          }
        } catch (error) {
          const errorMsg = `Failed to move ${child.path}: ${error.message || String(error)}`;
          logger3.error(`[moveAndMergeFolders] ${errorMsg}`);
          errorDetails.push(errorMsg);
          errors++;
          processedFiles++;
          if (onProgress) {
            onProgress(processedFiles, totalFiles);
          }
        }
      }
    }
  }
  __name(moveRecursive, "moveRecursive");
  try {
    await moveRecursive(oldFolder, newPath);
    for (const folder of foldersToDelete.reverse()) {
      try {
        const exists = await vault.adapter.exists(folder.path);
        if (!exists) {
          continue;
        }
        const folderContents = await vault.adapter.list(folder.path);
        const visibleFiles = folderContents.files.filter((f) => {
          const fileName = f.split("/").pop() || "";
          return !fileName.startsWith(".");
        });
        const isEmpty = visibleFiles.length === 0 && folderContents.folders.length === 0;
        if (isEmpty) {
          await vault.adapter.rmdir(folder.path, true);
        } else {
          logger3.warn(`[moveAndMergeFolders] \u26A0\uFE0F Folder not empty, skipping deletion: ${folder.path} (${visibleFiles.length} files, ${folderContents.folders.length} folders)`);
        }
      } catch (error) {
        const errorMsg = error.message || String(error);
        if (!errorMsg.includes("does not exist") && !errorMsg.includes("ENOENT")) {
          logger3.warn(`[moveAndMergeFolders] \u274C Could not delete folder ${folder.path}: ${errorMsg}`);
        }
      }
    }
    let currentFolder = oldFolder.parent;
    while (currentFolder && currentFolder.path !== "/") {
      try {
        const exists = await vault.adapter.exists(currentFolder.path);
        if (!exists) {
          break;
        }
        const folderContents = await vault.adapter.list(currentFolder.path);
        const visibleFiles = folderContents.files.filter((f) => {
          const fileName = f.split("/").pop() || "";
          return !fileName.startsWith(".");
        });
        const isEmpty = visibleFiles.length === 0 && folderContents.folders.length === 0;
        if (isEmpty) {
          await vault.adapter.rmdir(currentFolder.path, true);
          currentFolder = currentFolder.parent;
        } else {
          break;
        }
      } catch (error) {
        break;
      }
    }
    return {
      success: errors === 0,
      moved,
      skipped,
      errors,
      errorDetails: errorDetails.length > 0 ? errorDetails : void 0
    };
  } catch (error) {
    logger3.error(`Failed to merge folders:`, error);
    return {
      success: false,
      moved,
      skipped,
      errors: errors + 1,
      errorDetails: [`Critical error: ${error.message || String(error)}`]
    };
  }
}
var import_obsidian4, import_obsidian5, logger3;
var init_utils = __esm({
  "src/utils.ts"() {
    "use strict";
    import_obsidian4 = require("obsidian");
    init_logger();
    import_obsidian5 = require("obsidian");
    init_constants();
    logger3 = new Logger();
    __name(truncateToMinute, "truncateToMinute");
    __name(compareTimestampsIgnoringSeconds, "compareTimestampsIgnoringSeconds");
    __name(formatMessageTimestamp, "formatMessageTimestamp");
    __name(formatTimestamp, "formatTimestamp");
    __name(generateYearMonthFolder, "generateYearMonthFolder");
    __name(formatTitle, "formatTitle");
    __name(generateFileName, "generateFileName");
    __name(addPrefix, "addPrefix");
    __name(createDatePrefix, "createDatePrefix");
    __name(generateUniqueFileName, "generateUniqueFileName");
    __name(doesFilePathExist, "doesFilePathExist");
    __name(getFileHash, "getFileHash");
    __name(generateConversationFileName, "generateConversationFileName");
    __name(generateSafeAlias, "generateSafeAlias");
    __name(isValidMessage, "isValidMessage");
    __name(isCustomError, "isCustomError");
    __name(ensureFolderExists, "ensureFolderExists");
    __name(checkConversationLink, "checkConversationLink");
    __name(old_getConversationId, "old_getConversationId");
    __name(isNexusRelated, "isNexusRelated");
    __name(moveAndMergeFolders, "moveAndMergeFolders");
  }
});

// src/services/link-update-service.ts
var link_update_service_exports = {};
__export(link_update_service_exports, {
  LinkUpdateService: () => LinkUpdateService
});
var LinkUpdateService;
var init_link_update_service = __esm({
  "src/services/link-update-service.ts"() {
    "use strict";
    LinkUpdateService = class {
      constructor(plugin) {
        this.plugin = plugin;
      }
      /**
       * Update attachment links when attachment folder path changes
       */
      async updateAttachmentLinks(oldAttachmentPath, newAttachmentPath, progressCallback) {
        const stats = {
          conversationsScanned: 0,
          reportsScanned: 0,
          attachmentLinksUpdated: 0,
          conversationLinksUpdated: 0,
          filesModified: 0,
          errors: 0
        };
        try {
          const conversationFiles = await this.getConversationFiles();
          stats.conversationsScanned = conversationFiles.length;
          progressCallback == null ? void 0 : progressCallback({
            phase: "scanning",
            current: 0,
            total: conversationFiles.length,
            detail: `Found ${conversationFiles.length} conversations to scan`
          });
          const batchSize = 10;
          for (let i = 0; i < conversationFiles.length; i += batchSize) {
            const batch = conversationFiles.slice(i, i + batchSize);
            progressCallback == null ? void 0 : progressCallback({
              phase: "updating-attachments",
              current: i,
              total: conversationFiles.length,
              detail: `Updating attachment links: ${i}/${conversationFiles.length} files processed`
            });
            for (const file of batch) {
              try {
                const result = await this.updateAttachmentLinksInFile(file, oldAttachmentPath, newAttachmentPath);
                stats.attachmentLinksUpdated += result.linksUpdated;
                if (result.fileModified) {
                  stats.filesModified++;
                }
              } catch (error) {
                stats.errors++;
                this.plugin.logger.error(`Error updating attachment links in ${file.path}:`, error);
              }
            }
            if (i + batchSize < conversationFiles.length) {
              await new Promise((resolve) => setTimeout(resolve, 10));
            }
          }
          progressCallback == null ? void 0 : progressCallback({
            phase: "complete",
            current: conversationFiles.length,
            total: conversationFiles.length,
            detail: `Updated ${stats.attachmentLinksUpdated} attachment links in ${stats.filesModified} files`
          });
          return stats;
        } catch (error) {
          this.plugin.logger.error("Error updating attachment links:", error);
          progressCallback == null ? void 0 : progressCallback({
            phase: "error",
            current: 0,
            total: 0,
            detail: `Error: ${error.message}`
          });
          throw error;
        }
      }
      /**
       * Update conversation links when conversation folder path changes
       */
      async updateConversationLinks(oldConversationPath, newConversationPath, progressCallback) {
        const stats = {
          conversationsScanned: 0,
          reportsScanned: 0,
          attachmentLinksUpdated: 0,
          conversationLinksUpdated: 0,
          filesModified: 0,
          errors: 0
        };
        try {
          const reportFiles = await this.getReportFiles();
          const artifactFiles = await this.getClaudeArtifactFiles();
          const totalFiles = reportFiles.length + artifactFiles.length;
          stats.reportsScanned = reportFiles.length;
          progressCallback == null ? void 0 : progressCallback({
            phase: "scanning",
            current: 0,
            total: totalFiles,
            detail: `Found ${reportFiles.length} reports and ${artifactFiles.length} artifacts to scan`
          });
          const batchSize = 5;
          let processedCount = 0;
          for (let i = 0; i < reportFiles.length; i += batchSize) {
            const batch = reportFiles.slice(i, i + batchSize);
            progressCallback == null ? void 0 : progressCallback({
              phase: "updating-conversations",
              current: processedCount,
              total: totalFiles,
              detail: `Updating conversation links in reports: ${i}/${reportFiles.length} processed`
            });
            for (const file of batch) {
              try {
                const result = await this.updateConversationLinksInFile(file, oldConversationPath, newConversationPath);
                stats.conversationLinksUpdated += result.linksUpdated;
                if (result.fileModified) {
                  stats.filesModified++;
                }
              } catch (error) {
                stats.errors++;
                this.plugin.logger.error(`Error updating conversation links in ${file.path}:`, error);
              }
            }
            processedCount += batch.length;
            if (i + batchSize < reportFiles.length) {
              await new Promise((resolve) => setTimeout(resolve, 10));
            }
          }
          for (let i = 0; i < artifactFiles.length; i += batchSize) {
            const batch = artifactFiles.slice(i, i + batchSize);
            progressCallback == null ? void 0 : progressCallback({
              phase: "updating-artifacts",
              current: processedCount,
              total: totalFiles,
              detail: `Updating conversation links in artifacts: ${i}/${artifactFiles.length} processed`
            });
            for (const file of batch) {
              try {
                const result = await this.updateConversationLinkInArtifactFrontmatter(file, oldConversationPath, newConversationPath);
                if (result.linksUpdated > 0) {
                  stats.conversationLinksUpdated += result.linksUpdated;
                }
                if (result.fileModified) {
                  stats.filesModified++;
                }
              } catch (error) {
                stats.errors++;
                this.plugin.logger.error(`Error updating conversation link in artifact ${file.path}:`, error);
              }
            }
            processedCount += batch.length;
            if (i + batchSize < artifactFiles.length) {
              await new Promise((resolve) => setTimeout(resolve, 10));
            }
          }
          progressCallback == null ? void 0 : progressCallback({
            phase: "complete",
            current: totalFiles,
            total: totalFiles,
            detail: `Updated ${stats.conversationLinksUpdated} conversation links in ${stats.filesModified} files`
          });
          return stats;
        } catch (error) {
          this.plugin.logger.error("Error updating conversation links:", error);
          progressCallback == null ? void 0 : progressCallback({
            phase: "error",
            current: 0,
            total: 0,
            detail: `Error: ${error.message}`
          });
          throw error;
        }
      }
      /**
       * Estimate time for link updates based on file count
       */
      async estimateUpdateTime(folderType) {
        let fileCount = 0;
        if (folderType === "attachments") {
          const conversationFiles = await this.getConversationFiles();
          fileCount = conversationFiles.length;
        } else {
          const reportFiles = await this.getReportFiles();
          fileCount = reportFiles.length;
        }
        const estimatedSeconds = Math.max(2, Math.ceil(fileCount * 0.1));
        return { fileCount, estimatedSeconds };
      }
      /**
       * Get all conversation files from the vault
       */
      async getConversationFiles() {
        const conversationFolder = this.plugin.settings.conversationFolder;
        const allFiles = this.plugin.app.vault.getMarkdownFiles();
        return allFiles.filter((file) => {
          if (!file.path.startsWith(conversationFolder))
            return false;
          const relativePath = file.path.substring(conversationFolder.length + 1);
          if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
            return false;
          }
          return true;
        });
      }
      /**
       * Get all report files from the vault
       */
      async getReportFiles() {
        const reportFolder = this.plugin.settings.reportFolder;
        const allFiles = this.plugin.app.vault.getMarkdownFiles();
        return allFiles.filter((file) => file.path.startsWith(reportFolder));
      }
      /**
       * Get all Claude artifact files from the vault
       */
      async getClaudeArtifactFiles() {
        const attachmentFolder = this.plugin.settings.attachmentFolder;
        const claudeArtifactsPath = `${attachmentFolder}/claude/artifacts`;
        const allFiles = this.plugin.app.vault.getMarkdownFiles();
        return allFiles.filter((file) => file.path.startsWith(claudeArtifactsPath));
      }
      /**
       * Update attachment links in a single file
       */
      async updateAttachmentLinksInFile(file, oldAttachmentPath, newAttachmentPath) {
        const content = await this.plugin.app.vault.read(file);
        let updatedContent = content;
        let linksUpdated = 0;
        const normalizedOldPath = oldAttachmentPath.replace(/\/+$/, "");
        const normalizedNewPath = newAttachmentPath.replace(/\/+$/, "");
        const escapedOldPath = this.escapeRegExp(normalizedOldPath);
        const imagePattern = new RegExp(`(!\\[[^\\]]*\\]\\()${escapedOldPath}(/[^)]+\\))`, "g");
        updatedContent = updatedContent.replace(imagePattern, (match, prefix, suffix) => {
          linksUpdated++;
          return `${prefix}${normalizedNewPath}${suffix}`;
        });
        const linkPattern = new RegExp(`(\\[[^\\]]*\\]\\()${escapedOldPath}(/[^)]+\\))`, "g");
        updatedContent = updatedContent.replace(linkPattern, (match, prefix, suffix) => {
          linksUpdated++;
          return `${prefix}${normalizedNewPath}${suffix}`;
        });
        const obsidianImagePattern = new RegExp(`(!\\[\\[)${escapedOldPath}(/[^\\]]+\\]\\])`, "g");
        updatedContent = updatedContent.replace(obsidianImagePattern, (match, prefix, suffix) => {
          linksUpdated++;
          return `${prefix}${normalizedNewPath}${suffix}`;
        });
        const obsidianLinkPattern = new RegExp(`(\\[\\[)${escapedOldPath}(/[^\\]]+\\]\\])`, "g");
        updatedContent = updatedContent.replace(obsidianLinkPattern, (match, prefix, suffix) => {
          linksUpdated++;
          return `${prefix}${normalizedNewPath}${suffix}`;
        });
        const fileModified = content !== updatedContent;
        if (fileModified) {
          await this.plugin.app.vault.modify(file, updatedContent);
        }
        return { linksUpdated, fileModified };
      }
      /**
       * Update conversation links in a single report file
       */
      async updateConversationLinksInFile(file, oldConversationPath, newConversationPath) {
        const content = await this.plugin.app.vault.read(file);
        let updatedContent = content;
        let linksUpdated = 0;
        const normalizedOldPath = oldConversationPath.replace(/\/+$/, "");
        const normalizedNewPath = newConversationPath.replace(/\/+$/, "");
        const escapedOldPath = this.escapeRegExp(normalizedOldPath);
        const linkWithAliasPattern = new RegExp(`(\\[\\[)${escapedOldPath}(/[^|\\]]+)(\\|[^\\]]+\\]\\])`, "g");
        updatedContent = updatedContent.replace(linkWithAliasPattern, (match, prefix, pathSuffix, aliasSuffix) => {
          linksUpdated++;
          return `${prefix}${normalizedNewPath}${pathSuffix}${aliasSuffix}`;
        });
        const simpleLinkPattern = new RegExp(`(\\[\\[)${escapedOldPath}(/[^\\]]+\\]\\])`, "g");
        updatedContent = updatedContent.replace(simpleLinkPattern, (match, prefix, suffix) => {
          linksUpdated++;
          return `${prefix}${normalizedNewPath}${suffix}`;
        });
        const fileModified = content !== updatedContent;
        if (fileModified) {
          await this.plugin.app.vault.modify(file, updatedContent);
        }
        return { linksUpdated, fileModified };
      }
      /**
       * Update conversation links in Claude artifact (both frontmatter and body)
       */
      async updateConversationLinkInArtifactFrontmatter(file, oldConversationPath, newConversationPath) {
        const content = await this.plugin.app.vault.read(file);
        let updatedContent = content;
        let linksUpdated = 0;
        const normalizedOldPath = oldConversationPath.replace(/\/+$/, "");
        const normalizedNewPath = newConversationPath.replace(/\/+$/, "");
        const escapedOldPath = this.escapeRegExp(normalizedOldPath);
        const frontmatterLinkPattern = new RegExp(
          `(conversation_link:\\s*"\\[\\[)${escapedOldPath}(/[^\\]]+)(\\]\\]")`,
          "g"
        );
        updatedContent = updatedContent.replace(frontmatterLinkPattern, (match, prefix, pathSuffix, suffix) => {
          linksUpdated++;
          return `${prefix}${normalizedNewPath}${pathSuffix}${suffix}`;
        });
        const bodyLinkWithAliasPattern = new RegExp(
          `(\\*\\*Conversation:\\*\\*\\s*\\[\\[)${escapedOldPath}(/[^|\\]]+)(\\|[^\\]]+\\]\\])`,
          "g"
        );
        updatedContent = updatedContent.replace(bodyLinkWithAliasPattern, (match, prefix, pathSuffix, aliasSuffix) => {
          linksUpdated++;
          return `${prefix}${normalizedNewPath}${pathSuffix}${aliasSuffix}`;
        });
        const bodyLinkSimplePattern = new RegExp(
          `(\\*\\*Conversation:\\*\\*\\s*\\[\\[)${escapedOldPath}(/[^\\]]+\\]\\])`,
          "g"
        );
        updatedContent = updatedContent.replace(bodyLinkSimplePattern, (match, prefix, suffix) => {
          linksUpdated++;
          return `${prefix}${newConversationPath}${suffix}`;
        });
        const fileModified = content !== updatedContent;
        if (fileModified) {
          await this.plugin.app.vault.modify(file, updatedContent);
        }
        return { linksUpdated, fileModified };
      }
      /**
       * Escape special regex characters
       */
      escapeRegExp(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
      }
    };
    __name(LinkUpdateService, "LinkUpdateService");
  }
});

// src/upgrade/utils/progress-modal.ts
var progress_modal_exports = {};
__export(progress_modal_exports, {
  ProgressModal: () => UpgradeProgressModal,
  UpgradeProgressModal: () => UpgradeProgressModal
});
var import_obsidian6, UpgradeProgressModal;
var init_progress_modal = __esm({
  "src/upgrade/utils/progress-modal.ts"() {
    "use strict";
    import_obsidian6 = require("obsidian");
    UpgradeProgressModal = class extends import_obsidian6.Modal {
      constructor(app, title, totalSteps = 100) {
        super(app);
        this.currentStep = 0;
        this.title = title;
        this.totalSteps = totalSteps;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.addClass("nexus-ai-chat-importer-modal");
        this.modalTitleEl = contentEl.createEl("h2", {
          text: this.title,
          cls: "modal-title"
        });
        const contentContainer = contentEl.createDiv({ cls: "modal-content" });
        this.stepEl = contentContainer.createEl("div", { cls: "step-counter" });
        this.stepEl.style.cssText = `
            text-align: center;
            margin: 10px 0;
            font-weight: 500;
            color: var(--text-normal);
        `;
        const progressContainer = contentContainer.createDiv({ cls: "progress-container" });
        progressContainer.style.cssText = `
            background: var(--background-secondary);
            border-radius: 8px;
            padding: 4px;
            margin: 20px 0;
            border: 1px solid var(--background-modifier-border);
        `;
        this.progressBarEl = progressContainer.createDiv({ cls: "progress-bar" });
        this.progressBarEl.style.cssText = `
            background: var(--interactive-accent);
            height: 20px;
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
        `;
        this.statusEl = contentContainer.createEl("div", { cls: "status-text" });
        this.statusEl.style.cssText = `
            text-align: center;
            margin: 15px 0;
            font-weight: 500;
            color: var(--text-normal);
        `;
        this.detailEl = contentContainer.createEl("div", { cls: "detail-text" });
        this.detailEl.style.cssText = `
            text-align: center;
            color: var(--text-muted);
            font-size: 0.9em;
            min-height: 1.2em;
        `;
        this.updateProgress({ title: "Starting...", progress: 0 });
      }
      /**
       * Update progress with step information
       */
      updateProgress(step) {
        if (step.progress !== void 0) {
          const percentage = Math.min(100, Math.max(0, step.progress));
          this.progressBarEl.style.width = `${percentage}%`;
          this.stepEl.textContent = `Progress: ${Math.round(percentage)}%`;
        } else {
          this.currentStep++;
          const percentage = Math.round(this.currentStep / this.totalSteps * 100);
          this.progressBarEl.style.width = `${percentage}%`;
          this.stepEl.textContent = `Step ${this.currentStep}/${this.totalSteps}`;
        }
        this.statusEl.textContent = step.title;
        this.detailEl.textContent = step.detail || "";
      }
      /**
       * Update with specific step number
       */
      updateStep(stepNumber, step) {
        this.currentStep = stepNumber;
        const percentage = Math.round(stepNumber / this.totalSteps * 100);
        this.progressBarEl.style.width = `${percentage}%`;
        this.stepEl.textContent = `Step ${stepNumber}/${this.totalSteps}`;
        this.statusEl.textContent = step.title;
        this.detailEl.textContent = step.detail || "";
      }
      /**
       * Show completion state
       */
      showComplete(message = "Completed successfully") {
        this.progressBarEl.style.width = "100%";
        this.stepEl.textContent = "Complete";
        this.statusEl.textContent = message;
        this.detailEl.textContent = "";
        this.progressBarEl.style.background = "var(--text-success)";
      }
      /**
       * Show error state
       */
      showError(message = "An error occurred") {
        this.statusEl.textContent = message;
        this.detailEl.textContent = "";
        this.progressBarEl.style.background = "var(--text-error)";
      }
      /**
       * Close after delay
       */
      closeAfterDelay(delay = 2e3) {
        setTimeout(() => this.close(), delay);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    __name(UpgradeProgressModal, "UpgradeProgressModal");
  }
});

// src/dialogs/enhanced-folder-migration-dialog.ts
var enhanced_folder_migration_dialog_exports = {};
__export(enhanced_folder_migration_dialog_exports, {
  EnhancedFolderMigrationDialog: () => EnhancedFolderMigrationDialog
});
var import_obsidian7, EnhancedFolderMigrationDialog;
var init_enhanced_folder_migration_dialog = __esm({
  "src/dialogs/enhanced-folder-migration-dialog.ts"() {
    "use strict";
    import_obsidian7 = require("obsidian");
    EnhancedFolderMigrationDialog = class extends import_obsidian7.Modal {
      constructor(plugin, oldPath, newPath, folderType, onComplete) {
        super(plugin.app);
        this.estimatedTime = 0;
        this.plugin = plugin;
        this.oldPath = oldPath;
        this.newPath = newPath;
        this.folderType = folderType;
        this.onComplete = onComplete;
      }
      async onOpen() {
        const { contentEl } = this;
        contentEl.empty();
        await this.loadEstimates();
        contentEl.createEl("h2", {
          text: "Move Existing Files?",
          cls: "nexus-migration-title"
        });
        const messageContainer = contentEl.createDiv({ cls: "nexus-migration-message" });
        messageContainer.createEl("p", {
          text: `You are changing the ${this.folderType} folder location:`
        });
        const pathContainer = messageContainer.createDiv({ cls: "nexus-migration-paths" });
        pathContainer.createEl("div", {
          text: `From: ${this.oldPath}`,
          cls: "nexus-migration-path-old"
        });
        pathContainer.createEl("div", {
          text: `To: ${this.newPath}`,
          cls: "nexus-migration-path-new"
        });
        messageContainer.createEl("p", {
          text: "Do you want to move existing files to the new location?"
        });
        if (this.shouldShowLinkUpdateInfo()) {
          this.createLinkUpdateInfo(contentEl);
        }
        const warningBox = contentEl.createDiv({ cls: "nexus-migration-warning" });
        warningBox.createEl("strong", { text: "\u26A0\uFE0F Important:" });
        warningBox.createEl("p", {
          text: "If you choose 'No', existing files will remain in the old location and will not be impacted by future updates."
        });
        this.createButtons(contentEl);
        this.addStyles();
      }
      async loadEstimates() {
        try {
          const { LinkUpdateService: LinkUpdateService2 } = await Promise.resolve().then(() => (init_link_update_service(), link_update_service_exports));
          const linkUpdateService = new LinkUpdateService2(this.plugin);
          if (this.folderType === "attachments") {
            const estimate = await linkUpdateService.estimateUpdateTime("attachments");
            this.estimatedTime = estimate.estimatedSeconds;
          } else if (this.folderType === "conversations") {
            const estimate = await linkUpdateService.estimateUpdateTime("conversations");
            this.estimatedTime = estimate.estimatedSeconds;
          }
        } catch (error) {
          this.plugin.logger.warn("Failed to load link update estimates:", error);
        }
      }
      shouldShowLinkUpdateInfo() {
        return this.folderType === "attachments" || this.folderType === "conversations";
      }
      createLinkUpdateInfo(contentEl) {
        const linkUpdateBox = contentEl.createDiv({ cls: "nexus-link-update-info" });
        linkUpdateBox.createEl("strong", { text: "\u{1F517} Link Updates:" });
        const infoText = linkUpdateBox.createDiv();
        if (this.folderType === "attachments") {
          infoText.createEl("p", {
            text: "Moving attachments will also update all conversation notes that reference them."
          });
        } else if (this.folderType === "conversations") {
          infoText.createEl("p", {
            text: "Moving conversations will also update all reports and attachments that reference them."
          });
        }
        if (this.estimatedTime > 0) {
          const timeText = this.estimatedTime < 60 ? `~${this.estimatedTime} seconds` : `~${Math.ceil(this.estimatedTime / 60)} minute(s)`;
          infoText.createEl("p", {
            text: `Estimated time: ${timeText}`,
            cls: "nexus-time-estimate"
          });
        }
      }
      createButtons(contentEl) {
        const buttonContainer = contentEl.createDiv({ cls: "nexus-migration-buttons" });
        const cancelButton = buttonContainer.createEl("button", {
          text: "Cancel",
          cls: "nexus-migration-button-cancel"
        });
        cancelButton.addEventListener("click", async () => {
          this.close();
          try {
            await this.onComplete("cancel");
            new import_obsidian7.Notice(`Change cancelled. Folder setting reverted.`);
          } catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            new import_obsidian7.Notice(`Failed to revert setting: ${errorMessage}`);
          }
        });
        const keepButton = buttonContainer.createEl("button", {
          text: "No, keep files in old location",
          cls: "nexus-migration-button-keep"
        });
        keepButton.addEventListener("click", async () => {
          this.close();
          try {
            await this.onComplete("keep");
            new import_obsidian7.Notice(`Folder setting updated. Files remain in ${this.oldPath}`);
          } catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            new import_obsidian7.Notice(`Failed to update setting: ${errorMessage}`);
          }
        });
        const moveButton = buttonContainer.createEl("button", {
          text: this.shouldShowLinkUpdateInfo() ? "Yes, move files and update links" : "Yes, move files",
          cls: "mod-cta nexus-migration-button-move"
        });
        moveButton.addEventListener("click", async () => {
          this.close();
          if (this.shouldShowLinkUpdateInfo()) {
            await this.handleMoveWithLinkUpdates();
          } else {
            try {
              await this.onComplete("move");
              new import_obsidian7.Notice(`Files moved to ${this.newPath}`);
            } catch (error) {
              const errorMessage = error instanceof Error ? error.message : String(error);
              new import_obsidian7.Notice(`Failed to move files: ${errorMessage}`);
            }
          }
        });
      }
      async handleMoveWithLinkUpdates() {
        let progressModal = null;
        try {
          const [{ UpgradeProgressModal: UpgradeProgressModal2 }, { LinkUpdateService: LinkUpdateService2 }, { moveAndMergeFolders: moveAndMergeFolders2 }] = await Promise.all([
            Promise.resolve().then(() => (init_progress_modal(), progress_modal_exports)),
            Promise.resolve().then(() => (init_link_update_service(), link_update_service_exports)),
            Promise.resolve().then(() => (init_utils(), utils_exports))
          ]);
          progressModal = new UpgradeProgressModal2(
            this.app,
            `Moving ${this.folderType} and updating links`,
            100
          );
          progressModal.open();
          progressModal.updateProgress({
            title: "Moving files...",
            detail: `Moving from ${this.oldPath} to ${this.newPath}`,
            progress: 5
          });
          const oldFolder = this.app.vault.getAbstractFileByPath(this.oldPath);
          if (!oldFolder || !(oldFolder instanceof import_obsidian7.TFolder)) {
            throw new Error(`Source folder not found: ${this.oldPath}`);
          }
          const moveResult = await moveAndMergeFolders2(
            oldFolder,
            this.newPath,
            this.app.vault,
            (current, total) => {
              const percentage = 5 + Math.round(current / total * 25);
              progressModal.updateProgress({
                title: "Moving files...",
                detail: `${current} / ${total} files processed`,
                progress: percentage
              });
            }
          );
          progressModal.updateProgress({
            title: "Files moved",
            detail: `${moveResult.moved} files moved, ${moveResult.skipped} skipped. Preparing to update links...`,
            progress: 30
          });
          const linkUpdateService = new LinkUpdateService2(this.plugin);
          let stats;
          if (this.folderType === "attachments") {
            stats = await linkUpdateService.updateAttachmentLinks(
              this.oldPath,
              this.newPath,
              (progress) => {
                const percentage = 30 + Math.round(progress.current / progress.total * 70);
                progressModal.updateProgress({
                  title: "Updating attachment links...",
                  detail: progress.detail,
                  progress: percentage
                });
              }
            );
          } else if (this.folderType === "conversations") {
            stats = await linkUpdateService.updateConversationLinks(
              this.oldPath,
              this.newPath,
              (progress) => {
                const percentage = 30 + Math.round(progress.current / progress.total * 70);
                let title = "Updating conversation links...";
                if (progress.phase === "updating-conversations") {
                  title = "Updating links in reports...";
                } else if (progress.phase === "updating-artifacts") {
                  title = "Updating links in artifacts...";
                }
                progressModal.updateProgress({
                  title,
                  detail: progress.detail,
                  progress: percentage
                });
              }
            );
          }
          const linksUpdated = this.folderType === "attachments" ? (stats == null ? void 0 : stats.attachmentLinksUpdated) || 0 : (stats == null ? void 0 : stats.conversationLinksUpdated) || 0;
          progressModal.showComplete(
            `${moveResult.moved} files moved. ${linksUpdated} links updated successfully`
          );
          progressModal.closeAfterDelay(3e3);
          new import_obsidian7.Notice(`\u2705 ${moveResult.moved} files moved to ${this.newPath}. ${linksUpdated} links updated`);
          await this.onComplete("move");
        } catch (error) {
          if (progressModal) {
            progressModal.close();
          }
          const errorMessage = error instanceof Error ? error.message : String(error);
          this.showErrorDialog("Migration Failed", `Failed to move files or update links: ${errorMessage}`);
        }
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
            .nexus-migration-title {
                margin-bottom: 1em;
                color: var(--text-normal);
            }

            .nexus-migration-message {
                margin-bottom: 1.5em;
                line-height: 1.6;
            }

            .nexus-migration-paths {
                background-color: var(--background-secondary);
                padding: 1em;
                margin: 1em 0;
                border-radius: 4px;
                font-family: var(--font-monospace);
                font-size: 0.9em;
            }

            .nexus-migration-path-old {
                color: var(--text-muted);
                margin-bottom: 0.5em;
            }

            .nexus-migration-path-new {
                color: var(--interactive-accent);
                font-weight: 500;
            }

            .nexus-link-update-info {
                background-color: var(--background-modifier-success-hover);
                border-left: 4px solid var(--text-success);
                padding: 1em;
                margin-bottom: 1em;
                border-radius: 4px;
            }

            .nexus-link-update-info strong {
                display: block;
                margin-bottom: 0.5em;
                color: var(--text-success);
            }

            .nexus-link-update-info p {
                margin: 0.3em 0;
                color: var(--text-normal);
            }

            .nexus-time-estimate {
                font-style: italic;
                color: var(--text-muted) !important;
                font-size: 0.9em;
            }

            .nexus-migration-warning {
                background-color: var(--background-modifier-error-hover);
                border-left: 4px solid var(--text-error);
                padding: 1em;
                margin-bottom: 1.5em;
                border-radius: 4px;
            }

            .nexus-migration-warning strong {
                display: block;
                margin-bottom: 0.5em;
                color: var(--text-error);
            }

            .nexus-migration-warning p {
                margin: 0;
                color: var(--text-normal);
            }

            .nexus-migration-buttons {
                display: flex;
                justify-content: space-between;
                gap: 10px;
            }

            .nexus-migration-buttons button {
                padding: 8px 16px;
                flex: 1;
            }

            .nexus-migration-button-cancel {
                background-color: var(--background-modifier-border);
                color: var(--text-muted);
            }

            .nexus-migration-button-keep {
                background-color: var(--background-modifier-border);
            }

            .nexus-migration-button-move {
                /* Uses mod-cta class for primary styling */
            }
        `;
        document.head.appendChild(styleEl);
      }
      showErrorDialog(title, message) {
        const modal = new import_obsidian7.Modal(this.app);
        modal.titleEl.setText(title);
        modal.contentEl.createEl("p", {
          text: message,
          cls: "nexus-error-message"
        });
        const buttonContainer = modal.contentEl.createDiv({ cls: "modal-button-container" });
        buttonContainer.style.display = "flex";
        buttonContainer.style.justifyContent = "flex-end";
        buttonContainer.style.marginTop = "1em";
        const okButton = buttonContainer.createEl("button", {
          text: "OK",
          cls: "mod-cta"
        });
        okButton.addEventListener("click", () => modal.close());
        modal.open();
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    __name(EnhancedFolderMigrationDialog, "EnhancedFolderMigrationDialog");
  }
});

// node_modules/jszip/dist/jszip.min.js
var require_jszip_min = __commonJS({
  "node_modules/jszip/dist/jszip.min.js"(exports, module2) {
    !function(e) {
      if ("object" == typeof exports && "undefined" != typeof module2)
        module2.exports = e();
      else if ("function" == typeof define && define.amd)
        define([], e);
      else {
        ("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).JSZip = e();
      }
    }(function() {
      return (/* @__PURE__ */ __name(function s(a, o, h) {
        function u(r, e2) {
          if (!o[r]) {
            if (!a[r]) {
              var t = "function" == typeof require && require;
              if (!e2 && t)
                return t(r, true);
              if (l)
                return l(r, true);
              var n = new Error("Cannot find module '" + r + "'");
              throw n.code = "MODULE_NOT_FOUND", n;
            }
            var i = o[r] = { exports: {} };
            a[r][0].call(i.exports, function(e3) {
              var t2 = a[r][1][e3];
              return u(t2 || e3);
            }, i, i.exports, s, a, o, h);
          }
          return o[r].exports;
        }
        __name(u, "u");
        for (var l = "function" == typeof require && require, e = 0; e < h.length; e++)
          u(h[e]);
        return u;
      }, "s"))({ 1: [function(e, t, r) {
        "use strict";
        var d = e("./utils"), c = e("./support"), p = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
        r.encode = function(e2) {
          for (var t2, r2, n, i, s, a, o, h = [], u = 0, l = e2.length, f = l, c2 = "string" !== d.getTypeOf(e2); u < e2.length; )
            f = l - u, n = c2 ? (t2 = e2[u++], r2 = u < l ? e2[u++] : 0, u < l ? e2[u++] : 0) : (t2 = e2.charCodeAt(u++), r2 = u < l ? e2.charCodeAt(u++) : 0, u < l ? e2.charCodeAt(u++) : 0), i = t2 >> 2, s = (3 & t2) << 4 | r2 >> 4, a = 1 < f ? (15 & r2) << 2 | n >> 6 : 64, o = 2 < f ? 63 & n : 64, h.push(p.charAt(i) + p.charAt(s) + p.charAt(a) + p.charAt(o));
          return h.join("");
        }, r.decode = function(e2) {
          var t2, r2, n, i, s, a, o = 0, h = 0, u = "data:";
          if (e2.substr(0, u.length) === u)
            throw new Error("Invalid base64 input, it looks like a data url.");
          var l, f = 3 * (e2 = e2.replace(/[^A-Za-z0-9+/=]/g, "")).length / 4;
          if (e2.charAt(e2.length - 1) === p.charAt(64) && f--, e2.charAt(e2.length - 2) === p.charAt(64) && f--, f % 1 != 0)
            throw new Error("Invalid base64 input, bad content length.");
          for (l = c.uint8array ? new Uint8Array(0 | f) : new Array(0 | f); o < e2.length; )
            t2 = p.indexOf(e2.charAt(o++)) << 2 | (i = p.indexOf(e2.charAt(o++))) >> 4, r2 = (15 & i) << 4 | (s = p.indexOf(e2.charAt(o++))) >> 2, n = (3 & s) << 6 | (a = p.indexOf(e2.charAt(o++))), l[h++] = t2, 64 !== s && (l[h++] = r2), 64 !== a && (l[h++] = n);
          return l;
        };
      }, { "./support": 30, "./utils": 32 }], 2: [function(e, t, r) {
        "use strict";
        var n = e("./external"), i = e("./stream/DataWorker"), s = e("./stream/Crc32Probe"), a = e("./stream/DataLengthProbe");
        function o(e2, t2, r2, n2, i2) {
          this.compressedSize = e2, this.uncompressedSize = t2, this.crc32 = r2, this.compression = n2, this.compressedContent = i2;
        }
        __name(o, "o");
        o.prototype = { getContentWorker: function() {
          var e2 = new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")), t2 = this;
          return e2.on("end", function() {
            if (this.streamInfo.data_length !== t2.uncompressedSize)
              throw new Error("Bug : uncompressed data size mismatch");
          }), e2;
        }, getCompressedWorker: function() {
          return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize", this.compressedSize).withStreamInfo("uncompressedSize", this.uncompressedSize).withStreamInfo("crc32", this.crc32).withStreamInfo("compression", this.compression);
        } }, o.createWorkerFrom = function(e2, t2, r2) {
          return e2.pipe(new s()).pipe(new a("uncompressedSize")).pipe(t2.compressWorker(r2)).pipe(new a("compressedSize")).withStreamInfo("compression", t2);
        }, t.exports = o;
      }, { "./external": 6, "./stream/Crc32Probe": 25, "./stream/DataLengthProbe": 26, "./stream/DataWorker": 27 }], 3: [function(e, t, r) {
        "use strict";
        var n = e("./stream/GenericWorker");
        r.STORE = { magic: "\0\0", compressWorker: function() {
          return new n("STORE compression");
        }, uncompressWorker: function() {
          return new n("STORE decompression");
        } }, r.DEFLATE = e("./flate");
      }, { "./flate": 7, "./stream/GenericWorker": 28 }], 4: [function(e, t, r) {
        "use strict";
        var n = e("./utils");
        var o = function() {
          for (var e2, t2 = [], r2 = 0; r2 < 256; r2++) {
            e2 = r2;
            for (var n2 = 0; n2 < 8; n2++)
              e2 = 1 & e2 ? 3988292384 ^ e2 >>> 1 : e2 >>> 1;
            t2[r2] = e2;
          }
          return t2;
        }();
        t.exports = function(e2, t2) {
          return void 0 !== e2 && e2.length ? "string" !== n.getTypeOf(e2) ? function(e3, t3, r2, n2) {
            var i = o, s = n2 + r2;
            e3 ^= -1;
            for (var a = n2; a < s; a++)
              e3 = e3 >>> 8 ^ i[255 & (e3 ^ t3[a])];
            return -1 ^ e3;
          }(0 | t2, e2, e2.length, 0) : function(e3, t3, r2, n2) {
            var i = o, s = n2 + r2;
            e3 ^= -1;
            for (var a = n2; a < s; a++)
              e3 = e3 >>> 8 ^ i[255 & (e3 ^ t3.charCodeAt(a))];
            return -1 ^ e3;
          }(0 | t2, e2, e2.length, 0) : 0;
        };
      }, { "./utils": 32 }], 5: [function(e, t, r) {
        "use strict";
        r.base64 = false, r.binary = false, r.dir = false, r.createFolders = true, r.date = null, r.compression = null, r.compressionOptions = null, r.comment = null, r.unixPermissions = null, r.dosPermissions = null;
      }, {}], 6: [function(e, t, r) {
        "use strict";
        var n = null;
        n = "undefined" != typeof Promise ? Promise : e("lie"), t.exports = { Promise: n };
      }, { lie: 37 }], 7: [function(e, t, r) {
        "use strict";
        var n = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Uint32Array, i = e("pako"), s = e("./utils"), a = e("./stream/GenericWorker"), o = n ? "uint8array" : "array";
        function h(e2, t2) {
          a.call(this, "FlateWorker/" + e2), this._pako = null, this._pakoAction = e2, this._pakoOptions = t2, this.meta = {};
        }
        __name(h, "h");
        r.magic = "\b\0", s.inherits(h, a), h.prototype.processChunk = function(e2) {
          this.meta = e2.meta, null === this._pako && this._createPako(), this._pako.push(s.transformTo(o, e2.data), false);
        }, h.prototype.flush = function() {
          a.prototype.flush.call(this), null === this._pako && this._createPako(), this._pako.push([], true);
        }, h.prototype.cleanUp = function() {
          a.prototype.cleanUp.call(this), this._pako = null;
        }, h.prototype._createPako = function() {
          this._pako = new i[this._pakoAction]({ raw: true, level: this._pakoOptions.level || -1 });
          var t2 = this;
          this._pako.onData = function(e2) {
            t2.push({ data: e2, meta: t2.meta });
          };
        }, r.compressWorker = function(e2) {
          return new h("Deflate", e2);
        }, r.uncompressWorker = function() {
          return new h("Inflate", {});
        };
      }, { "./stream/GenericWorker": 28, "./utils": 32, pako: 38 }], 8: [function(e, t, r) {
        "use strict";
        function A(e2, t2) {
          var r2, n2 = "";
          for (r2 = 0; r2 < t2; r2++)
            n2 += String.fromCharCode(255 & e2), e2 >>>= 8;
          return n2;
        }
        __name(A, "A");
        function n(e2, t2, r2, n2, i2, s2) {
          var a, o, h = e2.file, u = e2.compression, l = s2 !== O.utf8encode, f = I.transformTo("string", s2(h.name)), c = I.transformTo("string", O.utf8encode(h.name)), d = h.comment, p = I.transformTo("string", s2(d)), m = I.transformTo("string", O.utf8encode(d)), _ = c.length !== h.name.length, g = m.length !== d.length, b = "", v = "", y = "", w = h.dir, k = h.date, x = { crc32: 0, compressedSize: 0, uncompressedSize: 0 };
          t2 && !r2 || (x.crc32 = e2.crc32, x.compressedSize = e2.compressedSize, x.uncompressedSize = e2.uncompressedSize);
          var S = 0;
          t2 && (S |= 8), l || !_ && !g || (S |= 2048);
          var z = 0, C = 0;
          w && (z |= 16), "UNIX" === i2 ? (C = 798, z |= function(e3, t3) {
            var r3 = e3;
            return e3 || (r3 = t3 ? 16893 : 33204), (65535 & r3) << 16;
          }(h.unixPermissions, w)) : (C = 20, z |= function(e3) {
            return 63 & (e3 || 0);
          }(h.dosPermissions)), a = k.getUTCHours(), a <<= 6, a |= k.getUTCMinutes(), a <<= 5, a |= k.getUTCSeconds() / 2, o = k.getUTCFullYear() - 1980, o <<= 4, o |= k.getUTCMonth() + 1, o <<= 5, o |= k.getUTCDate(), _ && (v = A(1, 1) + A(B(f), 4) + c, b += "up" + A(v.length, 2) + v), g && (y = A(1, 1) + A(B(p), 4) + m, b += "uc" + A(y.length, 2) + y);
          var E = "";
          return E += "\n\0", E += A(S, 2), E += u.magic, E += A(a, 2), E += A(o, 2), E += A(x.crc32, 4), E += A(x.compressedSize, 4), E += A(x.uncompressedSize, 4), E += A(f.length, 2), E += A(b.length, 2), { fileRecord: R.LOCAL_FILE_HEADER + E + f + b, dirRecord: R.CENTRAL_FILE_HEADER + A(C, 2) + E + A(p.length, 2) + "\0\0\0\0" + A(z, 4) + A(n2, 4) + f + b + p };
        }
        __name(n, "n");
        var I = e("../utils"), i = e("../stream/GenericWorker"), O = e("../utf8"), B = e("../crc32"), R = e("../signature");
        function s(e2, t2, r2, n2) {
          i.call(this, "ZipFileWorker"), this.bytesWritten = 0, this.zipComment = t2, this.zipPlatform = r2, this.encodeFileName = n2, this.streamFiles = e2, this.accumulate = false, this.contentBuffer = [], this.dirRecords = [], this.currentSourceOffset = 0, this.entriesCount = 0, this.currentFile = null, this._sources = [];
        }
        __name(s, "s");
        I.inherits(s, i), s.prototype.push = function(e2) {
          var t2 = e2.meta.percent || 0, r2 = this.entriesCount, n2 = this._sources.length;
          this.accumulate ? this.contentBuffer.push(e2) : (this.bytesWritten += e2.data.length, i.prototype.push.call(this, { data: e2.data, meta: { currentFile: this.currentFile, percent: r2 ? (t2 + 100 * (r2 - n2 - 1)) / r2 : 100 } }));
        }, s.prototype.openedSource = function(e2) {
          this.currentSourceOffset = this.bytesWritten, this.currentFile = e2.file.name;
          var t2 = this.streamFiles && !e2.file.dir;
          if (t2) {
            var r2 = n(e2, t2, false, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
            this.push({ data: r2.fileRecord, meta: { percent: 0 } });
          } else
            this.accumulate = true;
        }, s.prototype.closedSource = function(e2) {
          this.accumulate = false;
          var t2 = this.streamFiles && !e2.file.dir, r2 = n(e2, t2, true, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
          if (this.dirRecords.push(r2.dirRecord), t2)
            this.push({ data: function(e3) {
              return R.DATA_DESCRIPTOR + A(e3.crc32, 4) + A(e3.compressedSize, 4) + A(e3.uncompressedSize, 4);
            }(e2), meta: { percent: 100 } });
          else
            for (this.push({ data: r2.fileRecord, meta: { percent: 0 } }); this.contentBuffer.length; )
              this.push(this.contentBuffer.shift());
          this.currentFile = null;
        }, s.prototype.flush = function() {
          for (var e2 = this.bytesWritten, t2 = 0; t2 < this.dirRecords.length; t2++)
            this.push({ data: this.dirRecords[t2], meta: { percent: 100 } });
          var r2 = this.bytesWritten - e2, n2 = function(e3, t3, r3, n3, i2) {
            var s2 = I.transformTo("string", i2(n3));
            return R.CENTRAL_DIRECTORY_END + "\0\0\0\0" + A(e3, 2) + A(e3, 2) + A(t3, 4) + A(r3, 4) + A(s2.length, 2) + s2;
          }(this.dirRecords.length, r2, e2, this.zipComment, this.encodeFileName);
          this.push({ data: n2, meta: { percent: 100 } });
        }, s.prototype.prepareNextSource = function() {
          this.previous = this._sources.shift(), this.openedSource(this.previous.streamInfo), this.isPaused ? this.previous.pause() : this.previous.resume();
        }, s.prototype.registerPrevious = function(e2) {
          this._sources.push(e2);
          var t2 = this;
          return e2.on("data", function(e3) {
            t2.processChunk(e3);
          }), e2.on("end", function() {
            t2.closedSource(t2.previous.streamInfo), t2._sources.length ? t2.prepareNextSource() : t2.end();
          }), e2.on("error", function(e3) {
            t2.error(e3);
          }), this;
        }, s.prototype.resume = function() {
          return !!i.prototype.resume.call(this) && (!this.previous && this._sources.length ? (this.prepareNextSource(), true) : this.previous || this._sources.length || this.generatedError ? void 0 : (this.end(), true));
        }, s.prototype.error = function(e2) {
          var t2 = this._sources;
          if (!i.prototype.error.call(this, e2))
            return false;
          for (var r2 = 0; r2 < t2.length; r2++)
            try {
              t2[r2].error(e2);
            } catch (e3) {
            }
          return true;
        }, s.prototype.lock = function() {
          i.prototype.lock.call(this);
          for (var e2 = this._sources, t2 = 0; t2 < e2.length; t2++)
            e2[t2].lock();
        }, t.exports = s;
      }, { "../crc32": 4, "../signature": 23, "../stream/GenericWorker": 28, "../utf8": 31, "../utils": 32 }], 9: [function(e, t, r) {
        "use strict";
        var u = e("../compressions"), n = e("./ZipFileWorker");
        r.generateWorker = function(e2, a, t2) {
          var o = new n(a.streamFiles, t2, a.platform, a.encodeFileName), h = 0;
          try {
            e2.forEach(function(e3, t3) {
              h++;
              var r2 = function(e4, t4) {
                var r3 = e4 || t4, n3 = u[r3];
                if (!n3)
                  throw new Error(r3 + " is not a valid compression method !");
                return n3;
              }(t3.options.compression, a.compression), n2 = t3.options.compressionOptions || a.compressionOptions || {}, i = t3.dir, s = t3.date;
              t3._compressWorker(r2, n2).withStreamInfo("file", { name: e3, dir: i, date: s, comment: t3.comment || "", unixPermissions: t3.unixPermissions, dosPermissions: t3.dosPermissions }).pipe(o);
            }), o.entriesCount = h;
          } catch (e3) {
            o.error(e3);
          }
          return o;
        };
      }, { "../compressions": 3, "./ZipFileWorker": 8 }], 10: [function(e, t, r) {
        "use strict";
        function n() {
          if (!(this instanceof n))
            return new n();
          if (arguments.length)
            throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");
          this.files = /* @__PURE__ */ Object.create(null), this.comment = null, this.root = "", this.clone = function() {
            var e2 = new n();
            for (var t2 in this)
              "function" != typeof this[t2] && (e2[t2] = this[t2]);
            return e2;
          };
        }
        __name(n, "n");
        (n.prototype = e("./object")).loadAsync = e("./load"), n.support = e("./support"), n.defaults = e("./defaults"), n.version = "3.10.1", n.loadAsync = function(e2, t2) {
          return new n().loadAsync(e2, t2);
        }, n.external = e("./external"), t.exports = n;
      }, { "./defaults": 5, "./external": 6, "./load": 11, "./object": 15, "./support": 30 }], 11: [function(e, t, r) {
        "use strict";
        var u = e("./utils"), i = e("./external"), n = e("./utf8"), s = e("./zipEntries"), a = e("./stream/Crc32Probe"), l = e("./nodejsUtils");
        function f(n2) {
          return new i.Promise(function(e2, t2) {
            var r2 = n2.decompressed.getContentWorker().pipe(new a());
            r2.on("error", function(e3) {
              t2(e3);
            }).on("end", function() {
              r2.streamInfo.crc32 !== n2.decompressed.crc32 ? t2(new Error("Corrupted zip : CRC32 mismatch")) : e2();
            }).resume();
          });
        }
        __name(f, "f");
        t.exports = function(e2, o) {
          var h = this;
          return o = u.extend(o || {}, { base64: false, checkCRC32: false, optimizedBinaryString: false, createFolders: false, decodeFileName: n.utf8decode }), l.isNode && l.isStream(e2) ? i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")) : u.prepareContent("the loaded zip file", e2, true, o.optimizedBinaryString, o.base64).then(function(e3) {
            var t2 = new s(o);
            return t2.load(e3), t2;
          }).then(function(e3) {
            var t2 = [i.Promise.resolve(e3)], r2 = e3.files;
            if (o.checkCRC32)
              for (var n2 = 0; n2 < r2.length; n2++)
                t2.push(f(r2[n2]));
            return i.Promise.all(t2);
          }).then(function(e3) {
            for (var t2 = e3.shift(), r2 = t2.files, n2 = 0; n2 < r2.length; n2++) {
              var i2 = r2[n2], s2 = i2.fileNameStr, a2 = u.resolve(i2.fileNameStr);
              h.file(a2, i2.decompressed, { binary: true, optimizedBinaryString: true, date: i2.date, dir: i2.dir, comment: i2.fileCommentStr.length ? i2.fileCommentStr : null, unixPermissions: i2.unixPermissions, dosPermissions: i2.dosPermissions, createFolders: o.createFolders }), i2.dir || (h.file(a2).unsafeOriginalName = s2);
            }
            return t2.zipComment.length && (h.comment = t2.zipComment), h;
          });
        };
      }, { "./external": 6, "./nodejsUtils": 14, "./stream/Crc32Probe": 25, "./utf8": 31, "./utils": 32, "./zipEntries": 33 }], 12: [function(e, t, r) {
        "use strict";
        var n = e("../utils"), i = e("../stream/GenericWorker");
        function s(e2, t2) {
          i.call(this, "Nodejs stream input adapter for " + e2), this._upstreamEnded = false, this._bindStream(t2);
        }
        __name(s, "s");
        n.inherits(s, i), s.prototype._bindStream = function(e2) {
          var t2 = this;
          (this._stream = e2).pause(), e2.on("data", function(e3) {
            t2.push({ data: e3, meta: { percent: 0 } });
          }).on("error", function(e3) {
            t2.isPaused ? this.generatedError = e3 : t2.error(e3);
          }).on("end", function() {
            t2.isPaused ? t2._upstreamEnded = true : t2.end();
          });
        }, s.prototype.pause = function() {
          return !!i.prototype.pause.call(this) && (this._stream.pause(), true);
        }, s.prototype.resume = function() {
          return !!i.prototype.resume.call(this) && (this._upstreamEnded ? this.end() : this._stream.resume(), true);
        }, t.exports = s;
      }, { "../stream/GenericWorker": 28, "../utils": 32 }], 13: [function(e, t, r) {
        "use strict";
        var i = e("readable-stream").Readable;
        function n(e2, t2, r2) {
          i.call(this, t2), this._helper = e2;
          var n2 = this;
          e2.on("data", function(e3, t3) {
            n2.push(e3) || n2._helper.pause(), r2 && r2(t3);
          }).on("error", function(e3) {
            n2.emit("error", e3);
          }).on("end", function() {
            n2.push(null);
          });
        }
        __name(n, "n");
        e("../utils").inherits(n, i), n.prototype._read = function() {
          this._helper.resume();
        }, t.exports = n;
      }, { "../utils": 32, "readable-stream": 16 }], 14: [function(e, t, r) {
        "use strict";
        t.exports = { isNode: "undefined" != typeof Buffer, newBufferFrom: function(e2, t2) {
          if (Buffer.from && Buffer.from !== Uint8Array.from)
            return Buffer.from(e2, t2);
          if ("number" == typeof e2)
            throw new Error('The "data" argument must not be a number');
          return new Buffer(e2, t2);
        }, allocBuffer: function(e2) {
          if (Buffer.alloc)
            return Buffer.alloc(e2);
          var t2 = new Buffer(e2);
          return t2.fill(0), t2;
        }, isBuffer: function(e2) {
          return Buffer.isBuffer(e2);
        }, isStream: function(e2) {
          return e2 && "function" == typeof e2.on && "function" == typeof e2.pause && "function" == typeof e2.resume;
        } };
      }, {}], 15: [function(e, t, r) {
        "use strict";
        function s(e2, t2, r2) {
          var n2, i2 = u.getTypeOf(t2), s2 = u.extend(r2 || {}, f);
          s2.date = s2.date || new Date(), null !== s2.compression && (s2.compression = s2.compression.toUpperCase()), "string" == typeof s2.unixPermissions && (s2.unixPermissions = parseInt(s2.unixPermissions, 8)), s2.unixPermissions && 16384 & s2.unixPermissions && (s2.dir = true), s2.dosPermissions && 16 & s2.dosPermissions && (s2.dir = true), s2.dir && (e2 = g(e2)), s2.createFolders && (n2 = _(e2)) && b.call(this, n2, true);
          var a2 = "string" === i2 && false === s2.binary && false === s2.base64;
          r2 && void 0 !== r2.binary || (s2.binary = !a2), (t2 instanceof c && 0 === t2.uncompressedSize || s2.dir || !t2 || 0 === t2.length) && (s2.base64 = false, s2.binary = true, t2 = "", s2.compression = "STORE", i2 = "string");
          var o2 = null;
          o2 = t2 instanceof c || t2 instanceof l ? t2 : p.isNode && p.isStream(t2) ? new m(e2, t2) : u.prepareContent(e2, t2, s2.binary, s2.optimizedBinaryString, s2.base64);
          var h2 = new d(e2, o2, s2);
          this.files[e2] = h2;
        }
        __name(s, "s");
        var i = e("./utf8"), u = e("./utils"), l = e("./stream/GenericWorker"), a = e("./stream/StreamHelper"), f = e("./defaults"), c = e("./compressedObject"), d = e("./zipObject"), o = e("./generate"), p = e("./nodejsUtils"), m = e("./nodejs/NodejsStreamInputAdapter"), _ = /* @__PURE__ */ __name(function(e2) {
          "/" === e2.slice(-1) && (e2 = e2.substring(0, e2.length - 1));
          var t2 = e2.lastIndexOf("/");
          return 0 < t2 ? e2.substring(0, t2) : "";
        }, "_"), g = /* @__PURE__ */ __name(function(e2) {
          return "/" !== e2.slice(-1) && (e2 += "/"), e2;
        }, "g"), b = /* @__PURE__ */ __name(function(e2, t2) {
          return t2 = void 0 !== t2 ? t2 : f.createFolders, e2 = g(e2), this.files[e2] || s.call(this, e2, null, { dir: true, createFolders: t2 }), this.files[e2];
        }, "b");
        function h(e2) {
          return "[object RegExp]" === Object.prototype.toString.call(e2);
        }
        __name(h, "h");
        var n = { load: function() {
          throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
        }, forEach: function(e2) {
          var t2, r2, n2;
          for (t2 in this.files)
            n2 = this.files[t2], (r2 = t2.slice(this.root.length, t2.length)) && t2.slice(0, this.root.length) === this.root && e2(r2, n2);
        }, filter: function(r2) {
          var n2 = [];
          return this.forEach(function(e2, t2) {
            r2(e2, t2) && n2.push(t2);
          }), n2;
        }, file: function(e2, t2, r2) {
          if (1 !== arguments.length)
            return e2 = this.root + e2, s.call(this, e2, t2, r2), this;
          if (h(e2)) {
            var n2 = e2;
            return this.filter(function(e3, t3) {
              return !t3.dir && n2.test(e3);
            });
          }
          var i2 = this.files[this.root + e2];
          return i2 && !i2.dir ? i2 : null;
        }, folder: function(r2) {
          if (!r2)
            return this;
          if (h(r2))
            return this.filter(function(e3, t3) {
              return t3.dir && r2.test(e3);
            });
          var e2 = this.root + r2, t2 = b.call(this, e2), n2 = this.clone();
          return n2.root = t2.name, n2;
        }, remove: function(r2) {
          r2 = this.root + r2;
          var e2 = this.files[r2];
          if (e2 || ("/" !== r2.slice(-1) && (r2 += "/"), e2 = this.files[r2]), e2 && !e2.dir)
            delete this.files[r2];
          else
            for (var t2 = this.filter(function(e3, t3) {
              return t3.name.slice(0, r2.length) === r2;
            }), n2 = 0; n2 < t2.length; n2++)
              delete this.files[t2[n2].name];
          return this;
        }, generate: function() {
          throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
        }, generateInternalStream: function(e2) {
          var t2, r2 = {};
          try {
            if ((r2 = u.extend(e2 || {}, { streamFiles: false, compression: "STORE", compressionOptions: null, type: "", platform: "DOS", comment: null, mimeType: "application/zip", encodeFileName: i.utf8encode })).type = r2.type.toLowerCase(), r2.compression = r2.compression.toUpperCase(), "binarystring" === r2.type && (r2.type = "string"), !r2.type)
              throw new Error("No output type specified.");
            u.checkSupport(r2.type), "darwin" !== r2.platform && "freebsd" !== r2.platform && "linux" !== r2.platform && "sunos" !== r2.platform || (r2.platform = "UNIX"), "win32" === r2.platform && (r2.platform = "DOS");
            var n2 = r2.comment || this.comment || "";
            t2 = o.generateWorker(this, r2, n2);
          } catch (e3) {
            (t2 = new l("error")).error(e3);
          }
          return new a(t2, r2.type || "string", r2.mimeType);
        }, generateAsync: function(e2, t2) {
          return this.generateInternalStream(e2).accumulate(t2);
        }, generateNodeStream: function(e2, t2) {
          return (e2 = e2 || {}).type || (e2.type = "nodebuffer"), this.generateInternalStream(e2).toNodejsStream(t2);
        } };
        t.exports = n;
      }, { "./compressedObject": 2, "./defaults": 5, "./generate": 9, "./nodejs/NodejsStreamInputAdapter": 12, "./nodejsUtils": 14, "./stream/GenericWorker": 28, "./stream/StreamHelper": 29, "./utf8": 31, "./utils": 32, "./zipObject": 35 }], 16: [function(e, t, r) {
        "use strict";
        t.exports = e("stream");
      }, { stream: void 0 }], 17: [function(e, t, r) {
        "use strict";
        var n = e("./DataReader");
        function i(e2) {
          n.call(this, e2);
          for (var t2 = 0; t2 < this.data.length; t2++)
            e2[t2] = 255 & e2[t2];
        }
        __name(i, "i");
        e("../utils").inherits(i, n), i.prototype.byteAt = function(e2) {
          return this.data[this.zero + e2];
        }, i.prototype.lastIndexOfSignature = function(e2) {
          for (var t2 = e2.charCodeAt(0), r2 = e2.charCodeAt(1), n2 = e2.charCodeAt(2), i2 = e2.charCodeAt(3), s = this.length - 4; 0 <= s; --s)
            if (this.data[s] === t2 && this.data[s + 1] === r2 && this.data[s + 2] === n2 && this.data[s + 3] === i2)
              return s - this.zero;
          return -1;
        }, i.prototype.readAndCheckSignature = function(e2) {
          var t2 = e2.charCodeAt(0), r2 = e2.charCodeAt(1), n2 = e2.charCodeAt(2), i2 = e2.charCodeAt(3), s = this.readData(4);
          return t2 === s[0] && r2 === s[1] && n2 === s[2] && i2 === s[3];
        }, i.prototype.readData = function(e2) {
          if (this.checkOffset(e2), 0 === e2)
            return [];
          var t2 = this.data.slice(this.zero + this.index, this.zero + this.index + e2);
          return this.index += e2, t2;
        }, t.exports = i;
      }, { "../utils": 32, "./DataReader": 18 }], 18: [function(e, t, r) {
        "use strict";
        var n = e("../utils");
        function i(e2) {
          this.data = e2, this.length = e2.length, this.index = 0, this.zero = 0;
        }
        __name(i, "i");
        i.prototype = { checkOffset: function(e2) {
          this.checkIndex(this.index + e2);
        }, checkIndex: function(e2) {
          if (this.length < this.zero + e2 || e2 < 0)
            throw new Error("End of data reached (data length = " + this.length + ", asked index = " + e2 + "). Corrupted zip ?");
        }, setIndex: function(e2) {
          this.checkIndex(e2), this.index = e2;
        }, skip: function(e2) {
          this.setIndex(this.index + e2);
        }, byteAt: function() {
        }, readInt: function(e2) {
          var t2, r2 = 0;
          for (this.checkOffset(e2), t2 = this.index + e2 - 1; t2 >= this.index; t2--)
            r2 = (r2 << 8) + this.byteAt(t2);
          return this.index += e2, r2;
        }, readString: function(e2) {
          return n.transformTo("string", this.readData(e2));
        }, readData: function() {
        }, lastIndexOfSignature: function() {
        }, readAndCheckSignature: function() {
        }, readDate: function() {
          var e2 = this.readInt(4);
          return new Date(Date.UTC(1980 + (e2 >> 25 & 127), (e2 >> 21 & 15) - 1, e2 >> 16 & 31, e2 >> 11 & 31, e2 >> 5 & 63, (31 & e2) << 1));
        } }, t.exports = i;
      }, { "../utils": 32 }], 19: [function(e, t, r) {
        "use strict";
        var n = e("./Uint8ArrayReader");
        function i(e2) {
          n.call(this, e2);
        }
        __name(i, "i");
        e("../utils").inherits(i, n), i.prototype.readData = function(e2) {
          this.checkOffset(e2);
          var t2 = this.data.slice(this.zero + this.index, this.zero + this.index + e2);
          return this.index += e2, t2;
        }, t.exports = i;
      }, { "../utils": 32, "./Uint8ArrayReader": 21 }], 20: [function(e, t, r) {
        "use strict";
        var n = e("./DataReader");
        function i(e2) {
          n.call(this, e2);
        }
        __name(i, "i");
        e("../utils").inherits(i, n), i.prototype.byteAt = function(e2) {
          return this.data.charCodeAt(this.zero + e2);
        }, i.prototype.lastIndexOfSignature = function(e2) {
          return this.data.lastIndexOf(e2) - this.zero;
        }, i.prototype.readAndCheckSignature = function(e2) {
          return e2 === this.readData(4);
        }, i.prototype.readData = function(e2) {
          this.checkOffset(e2);
          var t2 = this.data.slice(this.zero + this.index, this.zero + this.index + e2);
          return this.index += e2, t2;
        }, t.exports = i;
      }, { "../utils": 32, "./DataReader": 18 }], 21: [function(e, t, r) {
        "use strict";
        var n = e("./ArrayReader");
        function i(e2) {
          n.call(this, e2);
        }
        __name(i, "i");
        e("../utils").inherits(i, n), i.prototype.readData = function(e2) {
          if (this.checkOffset(e2), 0 === e2)
            return new Uint8Array(0);
          var t2 = this.data.subarray(this.zero + this.index, this.zero + this.index + e2);
          return this.index += e2, t2;
        }, t.exports = i;
      }, { "../utils": 32, "./ArrayReader": 17 }], 22: [function(e, t, r) {
        "use strict";
        var n = e("../utils"), i = e("../support"), s = e("./ArrayReader"), a = e("./StringReader"), o = e("./NodeBufferReader"), h = e("./Uint8ArrayReader");
        t.exports = function(e2) {
          var t2 = n.getTypeOf(e2);
          return n.checkSupport(t2), "string" !== t2 || i.uint8array ? "nodebuffer" === t2 ? new o(e2) : i.uint8array ? new h(n.transformTo("uint8array", e2)) : new s(n.transformTo("array", e2)) : new a(e2);
        };
      }, { "../support": 30, "../utils": 32, "./ArrayReader": 17, "./NodeBufferReader": 19, "./StringReader": 20, "./Uint8ArrayReader": 21 }], 23: [function(e, t, r) {
        "use strict";
        r.LOCAL_FILE_HEADER = "PK", r.CENTRAL_FILE_HEADER = "PK", r.CENTRAL_DIRECTORY_END = "PK", r.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK\x07", r.ZIP64_CENTRAL_DIRECTORY_END = "PK", r.DATA_DESCRIPTOR = "PK\x07\b";
      }, {}], 24: [function(e, t, r) {
        "use strict";
        var n = e("./GenericWorker"), i = e("../utils");
        function s(e2) {
          n.call(this, "ConvertWorker to " + e2), this.destType = e2;
        }
        __name(s, "s");
        i.inherits(s, n), s.prototype.processChunk = function(e2) {
          this.push({ data: i.transformTo(this.destType, e2.data), meta: e2.meta });
        }, t.exports = s;
      }, { "../utils": 32, "./GenericWorker": 28 }], 25: [function(e, t, r) {
        "use strict";
        var n = e("./GenericWorker"), i = e("../crc32");
        function s() {
          n.call(this, "Crc32Probe"), this.withStreamInfo("crc32", 0);
        }
        __name(s, "s");
        e("../utils").inherits(s, n), s.prototype.processChunk = function(e2) {
          this.streamInfo.crc32 = i(e2.data, this.streamInfo.crc32 || 0), this.push(e2);
        }, t.exports = s;
      }, { "../crc32": 4, "../utils": 32, "./GenericWorker": 28 }], 26: [function(e, t, r) {
        "use strict";
        var n = e("../utils"), i = e("./GenericWorker");
        function s(e2) {
          i.call(this, "DataLengthProbe for " + e2), this.propName = e2, this.withStreamInfo(e2, 0);
        }
        __name(s, "s");
        n.inherits(s, i), s.prototype.processChunk = function(e2) {
          if (e2) {
            var t2 = this.streamInfo[this.propName] || 0;
            this.streamInfo[this.propName] = t2 + e2.data.length;
          }
          i.prototype.processChunk.call(this, e2);
        }, t.exports = s;
      }, { "../utils": 32, "./GenericWorker": 28 }], 27: [function(e, t, r) {
        "use strict";
        var n = e("../utils"), i = e("./GenericWorker");
        function s(e2) {
          i.call(this, "DataWorker");
          var t2 = this;
          this.dataIsReady = false, this.index = 0, this.max = 0, this.data = null, this.type = "", this._tickScheduled = false, e2.then(function(e3) {
            t2.dataIsReady = true, t2.data = e3, t2.max = e3 && e3.length || 0, t2.type = n.getTypeOf(e3), t2.isPaused || t2._tickAndRepeat();
          }, function(e3) {
            t2.error(e3);
          });
        }
        __name(s, "s");
        n.inherits(s, i), s.prototype.cleanUp = function() {
          i.prototype.cleanUp.call(this), this.data = null;
        }, s.prototype.resume = function() {
          return !!i.prototype.resume.call(this) && (!this._tickScheduled && this.dataIsReady && (this._tickScheduled = true, n.delay(this._tickAndRepeat, [], this)), true);
        }, s.prototype._tickAndRepeat = function() {
          this._tickScheduled = false, this.isPaused || this.isFinished || (this._tick(), this.isFinished || (n.delay(this._tickAndRepeat, [], this), this._tickScheduled = true));
        }, s.prototype._tick = function() {
          if (this.isPaused || this.isFinished)
            return false;
          var e2 = null, t2 = Math.min(this.max, this.index + 16384);
          if (this.index >= this.max)
            return this.end();
          switch (this.type) {
            case "string":
              e2 = this.data.substring(this.index, t2);
              break;
            case "uint8array":
              e2 = this.data.subarray(this.index, t2);
              break;
            case "array":
            case "nodebuffer":
              e2 = this.data.slice(this.index, t2);
          }
          return this.index = t2, this.push({ data: e2, meta: { percent: this.max ? this.index / this.max * 100 : 0 } });
        }, t.exports = s;
      }, { "../utils": 32, "./GenericWorker": 28 }], 28: [function(e, t, r) {
        "use strict";
        function n(e2) {
          this.name = e2 || "default", this.streamInfo = {}, this.generatedError = null, this.extraStreamInfo = {}, this.isPaused = true, this.isFinished = false, this.isLocked = false, this._listeners = { data: [], end: [], error: [] }, this.previous = null;
        }
        __name(n, "n");
        n.prototype = { push: function(e2) {
          this.emit("data", e2);
        }, end: function() {
          if (this.isFinished)
            return false;
          this.flush();
          try {
            this.emit("end"), this.cleanUp(), this.isFinished = true;
          } catch (e2) {
            this.emit("error", e2);
          }
          return true;
        }, error: function(e2) {
          return !this.isFinished && (this.isPaused ? this.generatedError = e2 : (this.isFinished = true, this.emit("error", e2), this.previous && this.previous.error(e2), this.cleanUp()), true);
        }, on: function(e2, t2) {
          return this._listeners[e2].push(t2), this;
        }, cleanUp: function() {
          this.streamInfo = this.generatedError = this.extraStreamInfo = null, this._listeners = [];
        }, emit: function(e2, t2) {
          if (this._listeners[e2])
            for (var r2 = 0; r2 < this._listeners[e2].length; r2++)
              this._listeners[e2][r2].call(this, t2);
        }, pipe: function(e2) {
          return e2.registerPrevious(this);
        }, registerPrevious: function(e2) {
          if (this.isLocked)
            throw new Error("The stream '" + this + "' has already been used.");
          this.streamInfo = e2.streamInfo, this.mergeStreamInfo(), this.previous = e2;
          var t2 = this;
          return e2.on("data", function(e3) {
            t2.processChunk(e3);
          }), e2.on("end", function() {
            t2.end();
          }), e2.on("error", function(e3) {
            t2.error(e3);
          }), this;
        }, pause: function() {
          return !this.isPaused && !this.isFinished && (this.isPaused = true, this.previous && this.previous.pause(), true);
        }, resume: function() {
          if (!this.isPaused || this.isFinished)
            return false;
          var e2 = this.isPaused = false;
          return this.generatedError && (this.error(this.generatedError), e2 = true), this.previous && this.previous.resume(), !e2;
        }, flush: function() {
        }, processChunk: function(e2) {
          this.push(e2);
        }, withStreamInfo: function(e2, t2) {
          return this.extraStreamInfo[e2] = t2, this.mergeStreamInfo(), this;
        }, mergeStreamInfo: function() {
          for (var e2 in this.extraStreamInfo)
            Object.prototype.hasOwnProperty.call(this.extraStreamInfo, e2) && (this.streamInfo[e2] = this.extraStreamInfo[e2]);
        }, lock: function() {
          if (this.isLocked)
            throw new Error("The stream '" + this + "' has already been used.");
          this.isLocked = true, this.previous && this.previous.lock();
        }, toString: function() {
          var e2 = "Worker " + this.name;
          return this.previous ? this.previous + " -> " + e2 : e2;
        } }, t.exports = n;
      }, {}], 29: [function(e, t, r) {
        "use strict";
        var h = e("../utils"), i = e("./ConvertWorker"), s = e("./GenericWorker"), u = e("../base64"), n = e("../support"), a = e("../external"), o = null;
        if (n.nodestream)
          try {
            o = e("../nodejs/NodejsStreamOutputAdapter");
          } catch (e2) {
          }
        function l(e2, o2) {
          return new a.Promise(function(t2, r2) {
            var n2 = [], i2 = e2._internalType, s2 = e2._outputType, a2 = e2._mimeType;
            e2.on("data", function(e3, t3) {
              n2.push(e3), o2 && o2(t3);
            }).on("error", function(e3) {
              n2 = [], r2(e3);
            }).on("end", function() {
              try {
                var e3 = function(e4, t3, r3) {
                  switch (e4) {
                    case "blob":
                      return h.newBlob(h.transformTo("arraybuffer", t3), r3);
                    case "base64":
                      return u.encode(t3);
                    default:
                      return h.transformTo(e4, t3);
                  }
                }(s2, function(e4, t3) {
                  var r3, n3 = 0, i3 = null, s3 = 0;
                  for (r3 = 0; r3 < t3.length; r3++)
                    s3 += t3[r3].length;
                  switch (e4) {
                    case "string":
                      return t3.join("");
                    case "array":
                      return Array.prototype.concat.apply([], t3);
                    case "uint8array":
                      for (i3 = new Uint8Array(s3), r3 = 0; r3 < t3.length; r3++)
                        i3.set(t3[r3], n3), n3 += t3[r3].length;
                      return i3;
                    case "nodebuffer":
                      return Buffer.concat(t3);
                    default:
                      throw new Error("concat : unsupported type '" + e4 + "'");
                  }
                }(i2, n2), a2);
                t2(e3);
              } catch (e4) {
                r2(e4);
              }
              n2 = [];
            }).resume();
          });
        }
        __name(l, "l");
        function f(e2, t2, r2) {
          var n2 = t2;
          switch (t2) {
            case "blob":
            case "arraybuffer":
              n2 = "uint8array";
              break;
            case "base64":
              n2 = "string";
          }
          try {
            this._internalType = n2, this._outputType = t2, this._mimeType = r2, h.checkSupport(n2), this._worker = e2.pipe(new i(n2)), e2.lock();
          } catch (e3) {
            this._worker = new s("error"), this._worker.error(e3);
          }
        }
        __name(f, "f");
        f.prototype = { accumulate: function(e2) {
          return l(this, e2);
        }, on: function(e2, t2) {
          var r2 = this;
          return "data" === e2 ? this._worker.on(e2, function(e3) {
            t2.call(r2, e3.data, e3.meta);
          }) : this._worker.on(e2, function() {
            h.delay(t2, arguments, r2);
          }), this;
        }, resume: function() {
          return h.delay(this._worker.resume, [], this._worker), this;
        }, pause: function() {
          return this._worker.pause(), this;
        }, toNodejsStream: function(e2) {
          if (h.checkSupport("nodestream"), "nodebuffer" !== this._outputType)
            throw new Error(this._outputType + " is not supported by this method");
          return new o(this, { objectMode: "nodebuffer" !== this._outputType }, e2);
        } }, t.exports = f;
      }, { "../base64": 1, "../external": 6, "../nodejs/NodejsStreamOutputAdapter": 13, "../support": 30, "../utils": 32, "./ConvertWorker": 24, "./GenericWorker": 28 }], 30: [function(e, t, r) {
        "use strict";
        if (r.base64 = true, r.array = true, r.string = true, r.arraybuffer = "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array, r.nodebuffer = "undefined" != typeof Buffer, r.uint8array = "undefined" != typeof Uint8Array, "undefined" == typeof ArrayBuffer)
          r.blob = false;
        else {
          var n = new ArrayBuffer(0);
          try {
            r.blob = 0 === new Blob([n], { type: "application/zip" }).size;
          } catch (e2) {
            try {
              var i = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
              i.append(n), r.blob = 0 === i.getBlob("application/zip").size;
            } catch (e3) {
              r.blob = false;
            }
          }
        }
        try {
          r.nodestream = !!e("readable-stream").Readable;
        } catch (e2) {
          r.nodestream = false;
        }
      }, { "readable-stream": 16 }], 31: [function(e, t, s) {
        "use strict";
        for (var o = e("./utils"), h = e("./support"), r = e("./nodejsUtils"), n = e("./stream/GenericWorker"), u = new Array(256), i = 0; i < 256; i++)
          u[i] = 252 <= i ? 6 : 248 <= i ? 5 : 240 <= i ? 4 : 224 <= i ? 3 : 192 <= i ? 2 : 1;
        u[254] = u[254] = 1;
        function a() {
          n.call(this, "utf-8 decode"), this.leftOver = null;
        }
        __name(a, "a");
        function l() {
          n.call(this, "utf-8 encode");
        }
        __name(l, "l");
        s.utf8encode = function(e2) {
          return h.nodebuffer ? r.newBufferFrom(e2, "utf-8") : function(e3) {
            var t2, r2, n2, i2, s2, a2 = e3.length, o2 = 0;
            for (i2 = 0; i2 < a2; i2++)
              55296 == (64512 & (r2 = e3.charCodeAt(i2))) && i2 + 1 < a2 && 56320 == (64512 & (n2 = e3.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), i2++), o2 += r2 < 128 ? 1 : r2 < 2048 ? 2 : r2 < 65536 ? 3 : 4;
            for (t2 = h.uint8array ? new Uint8Array(o2) : new Array(o2), i2 = s2 = 0; s2 < o2; i2++)
              55296 == (64512 & (r2 = e3.charCodeAt(i2))) && i2 + 1 < a2 && 56320 == (64512 & (n2 = e3.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), i2++), r2 < 128 ? t2[s2++] = r2 : (r2 < 2048 ? t2[s2++] = 192 | r2 >>> 6 : (r2 < 65536 ? t2[s2++] = 224 | r2 >>> 12 : (t2[s2++] = 240 | r2 >>> 18, t2[s2++] = 128 | r2 >>> 12 & 63), t2[s2++] = 128 | r2 >>> 6 & 63), t2[s2++] = 128 | 63 & r2);
            return t2;
          }(e2);
        }, s.utf8decode = function(e2) {
          return h.nodebuffer ? o.transformTo("nodebuffer", e2).toString("utf-8") : function(e3) {
            var t2, r2, n2, i2, s2 = e3.length, a2 = new Array(2 * s2);
            for (t2 = r2 = 0; t2 < s2; )
              if ((n2 = e3[t2++]) < 128)
                a2[r2++] = n2;
              else if (4 < (i2 = u[n2]))
                a2[r2++] = 65533, t2 += i2 - 1;
              else {
                for (n2 &= 2 === i2 ? 31 : 3 === i2 ? 15 : 7; 1 < i2 && t2 < s2; )
                  n2 = n2 << 6 | 63 & e3[t2++], i2--;
                1 < i2 ? a2[r2++] = 65533 : n2 < 65536 ? a2[r2++] = n2 : (n2 -= 65536, a2[r2++] = 55296 | n2 >> 10 & 1023, a2[r2++] = 56320 | 1023 & n2);
              }
            return a2.length !== r2 && (a2.subarray ? a2 = a2.subarray(0, r2) : a2.length = r2), o.applyFromCharCode(a2);
          }(e2 = o.transformTo(h.uint8array ? "uint8array" : "array", e2));
        }, o.inherits(a, n), a.prototype.processChunk = function(e2) {
          var t2 = o.transformTo(h.uint8array ? "uint8array" : "array", e2.data);
          if (this.leftOver && this.leftOver.length) {
            if (h.uint8array) {
              var r2 = t2;
              (t2 = new Uint8Array(r2.length + this.leftOver.length)).set(this.leftOver, 0), t2.set(r2, this.leftOver.length);
            } else
              t2 = this.leftOver.concat(t2);
            this.leftOver = null;
          }
          var n2 = function(e3, t3) {
            var r3;
            for ((t3 = t3 || e3.length) > e3.length && (t3 = e3.length), r3 = t3 - 1; 0 <= r3 && 128 == (192 & e3[r3]); )
              r3--;
            return r3 < 0 ? t3 : 0 === r3 ? t3 : r3 + u[e3[r3]] > t3 ? r3 : t3;
          }(t2), i2 = t2;
          n2 !== t2.length && (h.uint8array ? (i2 = t2.subarray(0, n2), this.leftOver = t2.subarray(n2, t2.length)) : (i2 = t2.slice(0, n2), this.leftOver = t2.slice(n2, t2.length))), this.push({ data: s.utf8decode(i2), meta: e2.meta });
        }, a.prototype.flush = function() {
          this.leftOver && this.leftOver.length && (this.push({ data: s.utf8decode(this.leftOver), meta: {} }), this.leftOver = null);
        }, s.Utf8DecodeWorker = a, o.inherits(l, n), l.prototype.processChunk = function(e2) {
          this.push({ data: s.utf8encode(e2.data), meta: e2.meta });
        }, s.Utf8EncodeWorker = l;
      }, { "./nodejsUtils": 14, "./stream/GenericWorker": 28, "./support": 30, "./utils": 32 }], 32: [function(e, t, a) {
        "use strict";
        var o = e("./support"), h = e("./base64"), r = e("./nodejsUtils"), u = e("./external");
        function n(e2) {
          return e2;
        }
        __name(n, "n");
        function l(e2, t2) {
          for (var r2 = 0; r2 < e2.length; ++r2)
            t2[r2] = 255 & e2.charCodeAt(r2);
          return t2;
        }
        __name(l, "l");
        e("setimmediate"), a.newBlob = function(t2, r2) {
          a.checkSupport("blob");
          try {
            return new Blob([t2], { type: r2 });
          } catch (e2) {
            try {
              var n2 = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
              return n2.append(t2), n2.getBlob(r2);
            } catch (e3) {
              throw new Error("Bug : can't construct the Blob.");
            }
          }
        };
        var i = { stringifyByChunk: function(e2, t2, r2) {
          var n2 = [], i2 = 0, s2 = e2.length;
          if (s2 <= r2)
            return String.fromCharCode.apply(null, e2);
          for (; i2 < s2; )
            "array" === t2 || "nodebuffer" === t2 ? n2.push(String.fromCharCode.apply(null, e2.slice(i2, Math.min(i2 + r2, s2)))) : n2.push(String.fromCharCode.apply(null, e2.subarray(i2, Math.min(i2 + r2, s2)))), i2 += r2;
          return n2.join("");
        }, stringifyByChar: function(e2) {
          for (var t2 = "", r2 = 0; r2 < e2.length; r2++)
            t2 += String.fromCharCode(e2[r2]);
          return t2;
        }, applyCanBeUsed: { uint8array: function() {
          try {
            return o.uint8array && 1 === String.fromCharCode.apply(null, new Uint8Array(1)).length;
          } catch (e2) {
            return false;
          }
        }(), nodebuffer: function() {
          try {
            return o.nodebuffer && 1 === String.fromCharCode.apply(null, r.allocBuffer(1)).length;
          } catch (e2) {
            return false;
          }
        }() } };
        function s(e2) {
          var t2 = 65536, r2 = a.getTypeOf(e2), n2 = true;
          if ("uint8array" === r2 ? n2 = i.applyCanBeUsed.uint8array : "nodebuffer" === r2 && (n2 = i.applyCanBeUsed.nodebuffer), n2)
            for (; 1 < t2; )
              try {
                return i.stringifyByChunk(e2, r2, t2);
              } catch (e3) {
                t2 = Math.floor(t2 / 2);
              }
          return i.stringifyByChar(e2);
        }
        __name(s, "s");
        function f(e2, t2) {
          for (var r2 = 0; r2 < e2.length; r2++)
            t2[r2] = e2[r2];
          return t2;
        }
        __name(f, "f");
        a.applyFromCharCode = s;
        var c = {};
        c.string = { string: n, array: function(e2) {
          return l(e2, new Array(e2.length));
        }, arraybuffer: function(e2) {
          return c.string.uint8array(e2).buffer;
        }, uint8array: function(e2) {
          return l(e2, new Uint8Array(e2.length));
        }, nodebuffer: function(e2) {
          return l(e2, r.allocBuffer(e2.length));
        } }, c.array = { string: s, array: n, arraybuffer: function(e2) {
          return new Uint8Array(e2).buffer;
        }, uint8array: function(e2) {
          return new Uint8Array(e2);
        }, nodebuffer: function(e2) {
          return r.newBufferFrom(e2);
        } }, c.arraybuffer = { string: function(e2) {
          return s(new Uint8Array(e2));
        }, array: function(e2) {
          return f(new Uint8Array(e2), new Array(e2.byteLength));
        }, arraybuffer: n, uint8array: function(e2) {
          return new Uint8Array(e2);
        }, nodebuffer: function(e2) {
          return r.newBufferFrom(new Uint8Array(e2));
        } }, c.uint8array = { string: s, array: function(e2) {
          return f(e2, new Array(e2.length));
        }, arraybuffer: function(e2) {
          return e2.buffer;
        }, uint8array: n, nodebuffer: function(e2) {
          return r.newBufferFrom(e2);
        } }, c.nodebuffer = { string: s, array: function(e2) {
          return f(e2, new Array(e2.length));
        }, arraybuffer: function(e2) {
          return c.nodebuffer.uint8array(e2).buffer;
        }, uint8array: function(e2) {
          return f(e2, new Uint8Array(e2.length));
        }, nodebuffer: n }, a.transformTo = function(e2, t2) {
          if (t2 = t2 || "", !e2)
            return t2;
          a.checkSupport(e2);
          var r2 = a.getTypeOf(t2);
          return c[r2][e2](t2);
        }, a.resolve = function(e2) {
          for (var t2 = e2.split("/"), r2 = [], n2 = 0; n2 < t2.length; n2++) {
            var i2 = t2[n2];
            "." === i2 || "" === i2 && 0 !== n2 && n2 !== t2.length - 1 || (".." === i2 ? r2.pop() : r2.push(i2));
          }
          return r2.join("/");
        }, a.getTypeOf = function(e2) {
          return "string" == typeof e2 ? "string" : "[object Array]" === Object.prototype.toString.call(e2) ? "array" : o.nodebuffer && r.isBuffer(e2) ? "nodebuffer" : o.uint8array && e2 instanceof Uint8Array ? "uint8array" : o.arraybuffer && e2 instanceof ArrayBuffer ? "arraybuffer" : void 0;
        }, a.checkSupport = function(e2) {
          if (!o[e2.toLowerCase()])
            throw new Error(e2 + " is not supported by this platform");
        }, a.MAX_VALUE_16BITS = 65535, a.MAX_VALUE_32BITS = -1, a.pretty = function(e2) {
          var t2, r2, n2 = "";
          for (r2 = 0; r2 < (e2 || "").length; r2++)
            n2 += "\\x" + ((t2 = e2.charCodeAt(r2)) < 16 ? "0" : "") + t2.toString(16).toUpperCase();
          return n2;
        }, a.delay = function(e2, t2, r2) {
          setImmediate(function() {
            e2.apply(r2 || null, t2 || []);
          });
        }, a.inherits = function(e2, t2) {
          function r2() {
          }
          __name(r2, "r");
          r2.prototype = t2.prototype, e2.prototype = new r2();
        }, a.extend = function() {
          var e2, t2, r2 = {};
          for (e2 = 0; e2 < arguments.length; e2++)
            for (t2 in arguments[e2])
              Object.prototype.hasOwnProperty.call(arguments[e2], t2) && void 0 === r2[t2] && (r2[t2] = arguments[e2][t2]);
          return r2;
        }, a.prepareContent = function(r2, e2, n2, i2, s2) {
          return u.Promise.resolve(e2).then(function(n3) {
            return o.blob && (n3 instanceof Blob || -1 !== ["[object File]", "[object Blob]"].indexOf(Object.prototype.toString.call(n3))) && "undefined" != typeof FileReader ? new u.Promise(function(t2, r3) {
              var e3 = new FileReader();
              e3.onload = function(e4) {
                t2(e4.target.result);
              }, e3.onerror = function(e4) {
                r3(e4.target.error);
              }, e3.readAsArrayBuffer(n3);
            }) : n3;
          }).then(function(e3) {
            var t2 = a.getTypeOf(e3);
            return t2 ? ("arraybuffer" === t2 ? e3 = a.transformTo("uint8array", e3) : "string" === t2 && (s2 ? e3 = h.decode(e3) : n2 && true !== i2 && (e3 = function(e4) {
              return l(e4, o.uint8array ? new Uint8Array(e4.length) : new Array(e4.length));
            }(e3))), e3) : u.Promise.reject(new Error("Can't read the data of '" + r2 + "'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));
          });
        };
      }, { "./base64": 1, "./external": 6, "./nodejsUtils": 14, "./support": 30, setimmediate: 54 }], 33: [function(e, t, r) {
        "use strict";
        var n = e("./reader/readerFor"), i = e("./utils"), s = e("./signature"), a = e("./zipEntry"), o = e("./support");
        function h(e2) {
          this.files = [], this.loadOptions = e2;
        }
        __name(h, "h");
        h.prototype = { checkSignature: function(e2) {
          if (!this.reader.readAndCheckSignature(e2)) {
            this.reader.index -= 4;
            var t2 = this.reader.readString(4);
            throw new Error("Corrupted zip or bug: unexpected signature (" + i.pretty(t2) + ", expected " + i.pretty(e2) + ")");
          }
        }, isSignature: function(e2, t2) {
          var r2 = this.reader.index;
          this.reader.setIndex(e2);
          var n2 = this.reader.readString(4) === t2;
          return this.reader.setIndex(r2), n2;
        }, readBlockEndOfCentral: function() {
          this.diskNumber = this.reader.readInt(2), this.diskWithCentralDirStart = this.reader.readInt(2), this.centralDirRecordsOnThisDisk = this.reader.readInt(2), this.centralDirRecords = this.reader.readInt(2), this.centralDirSize = this.reader.readInt(4), this.centralDirOffset = this.reader.readInt(4), this.zipCommentLength = this.reader.readInt(2);
          var e2 = this.reader.readData(this.zipCommentLength), t2 = o.uint8array ? "uint8array" : "array", r2 = i.transformTo(t2, e2);
          this.zipComment = this.loadOptions.decodeFileName(r2);
        }, readBlockZip64EndOfCentral: function() {
          this.zip64EndOfCentralSize = this.reader.readInt(8), this.reader.skip(4), this.diskNumber = this.reader.readInt(4), this.diskWithCentralDirStart = this.reader.readInt(4), this.centralDirRecordsOnThisDisk = this.reader.readInt(8), this.centralDirRecords = this.reader.readInt(8), this.centralDirSize = this.reader.readInt(8), this.centralDirOffset = this.reader.readInt(8), this.zip64ExtensibleData = {};
          for (var e2, t2, r2, n2 = this.zip64EndOfCentralSize - 44; 0 < n2; )
            e2 = this.reader.readInt(2), t2 = this.reader.readInt(4), r2 = this.reader.readData(t2), this.zip64ExtensibleData[e2] = { id: e2, length: t2, value: r2 };
        }, readBlockZip64EndOfCentralLocator: function() {
          if (this.diskWithZip64CentralDirStart = this.reader.readInt(4), this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8), this.disksCount = this.reader.readInt(4), 1 < this.disksCount)
            throw new Error("Multi-volumes zip are not supported");
        }, readLocalFiles: function() {
          var e2, t2;
          for (e2 = 0; e2 < this.files.length; e2++)
            t2 = this.files[e2], this.reader.setIndex(t2.localHeaderOffset), this.checkSignature(s.LOCAL_FILE_HEADER), t2.readLocalPart(this.reader), t2.handleUTF8(), t2.processAttributes();
        }, readCentralDir: function() {
          var e2;
          for (this.reader.setIndex(this.centralDirOffset); this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER); )
            (e2 = new a({ zip64: this.zip64 }, this.loadOptions)).readCentralPart(this.reader), this.files.push(e2);
          if (this.centralDirRecords !== this.files.length && 0 !== this.centralDirRecords && 0 === this.files.length)
            throw new Error("Corrupted zip or bug: expected " + this.centralDirRecords + " records in central dir, got " + this.files.length);
        }, readEndOfCentral: function() {
          var e2 = this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);
          if (e2 < 0)
            throw !this.isSignature(0, s.LOCAL_FILE_HEADER) ? new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html") : new Error("Corrupted zip: can't find end of central directory");
          this.reader.setIndex(e2);
          var t2 = e2;
          if (this.checkSignature(s.CENTRAL_DIRECTORY_END), this.readBlockEndOfCentral(), this.diskNumber === i.MAX_VALUE_16BITS || this.diskWithCentralDirStart === i.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === i.MAX_VALUE_16BITS || this.centralDirRecords === i.MAX_VALUE_16BITS || this.centralDirSize === i.MAX_VALUE_32BITS || this.centralDirOffset === i.MAX_VALUE_32BITS) {
            if (this.zip64 = true, (e2 = this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR)) < 0)
              throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");
            if (this.reader.setIndex(e2), this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR), this.readBlockZip64EndOfCentralLocator(), !this.isSignature(this.relativeOffsetEndOfZip64CentralDir, s.ZIP64_CENTRAL_DIRECTORY_END) && (this.relativeOffsetEndOfZip64CentralDir = this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END), this.relativeOffsetEndOfZip64CentralDir < 0))
              throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");
            this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir), this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END), this.readBlockZip64EndOfCentral();
          }
          var r2 = this.centralDirOffset + this.centralDirSize;
          this.zip64 && (r2 += 20, r2 += 12 + this.zip64EndOfCentralSize);
          var n2 = t2 - r2;
          if (0 < n2)
            this.isSignature(t2, s.CENTRAL_FILE_HEADER) || (this.reader.zero = n2);
          else if (n2 < 0)
            throw new Error("Corrupted zip: missing " + Math.abs(n2) + " bytes.");
        }, prepareReader: function(e2) {
          this.reader = n(e2);
        }, load: function(e2) {
          this.prepareReader(e2), this.readEndOfCentral(), this.readCentralDir(), this.readLocalFiles();
        } }, t.exports = h;
      }, { "./reader/readerFor": 22, "./signature": 23, "./support": 30, "./utils": 32, "./zipEntry": 34 }], 34: [function(e, t, r) {
        "use strict";
        var n = e("./reader/readerFor"), s = e("./utils"), i = e("./compressedObject"), a = e("./crc32"), o = e("./utf8"), h = e("./compressions"), u = e("./support");
        function l(e2, t2) {
          this.options = e2, this.loadOptions = t2;
        }
        __name(l, "l");
        l.prototype = { isEncrypted: function() {
          return 1 == (1 & this.bitFlag);
        }, useUTF8: function() {
          return 2048 == (2048 & this.bitFlag);
        }, readLocalPart: function(e2) {
          var t2, r2;
          if (e2.skip(22), this.fileNameLength = e2.readInt(2), r2 = e2.readInt(2), this.fileName = e2.readData(this.fileNameLength), e2.skip(r2), -1 === this.compressedSize || -1 === this.uncompressedSize)
            throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");
          if (null === (t2 = function(e3) {
            for (var t3 in h)
              if (Object.prototype.hasOwnProperty.call(h, t3) && h[t3].magic === e3)
                return h[t3];
            return null;
          }(this.compressionMethod)))
            throw new Error("Corrupted zip : compression " + s.pretty(this.compressionMethod) + " unknown (inner file : " + s.transformTo("string", this.fileName) + ")");
          this.decompressed = new i(this.compressedSize, this.uncompressedSize, this.crc32, t2, e2.readData(this.compressedSize));
        }, readCentralPart: function(e2) {
          this.versionMadeBy = e2.readInt(2), e2.skip(2), this.bitFlag = e2.readInt(2), this.compressionMethod = e2.readString(2), this.date = e2.readDate(), this.crc32 = e2.readInt(4), this.compressedSize = e2.readInt(4), this.uncompressedSize = e2.readInt(4);
          var t2 = e2.readInt(2);
          if (this.extraFieldsLength = e2.readInt(2), this.fileCommentLength = e2.readInt(2), this.diskNumberStart = e2.readInt(2), this.internalFileAttributes = e2.readInt(2), this.externalFileAttributes = e2.readInt(4), this.localHeaderOffset = e2.readInt(4), this.isEncrypted())
            throw new Error("Encrypted zip are not supported");
          e2.skip(t2), this.readExtraFields(e2), this.parseZIP64ExtraField(e2), this.fileComment = e2.readData(this.fileCommentLength);
        }, processAttributes: function() {
          this.unixPermissions = null, this.dosPermissions = null;
          var e2 = this.versionMadeBy >> 8;
          this.dir = !!(16 & this.externalFileAttributes), 0 == e2 && (this.dosPermissions = 63 & this.externalFileAttributes), 3 == e2 && (this.unixPermissions = this.externalFileAttributes >> 16 & 65535), this.dir || "/" !== this.fileNameStr.slice(-1) || (this.dir = true);
        }, parseZIP64ExtraField: function() {
          if (this.extraFields[1]) {
            var e2 = n(this.extraFields[1].value);
            this.uncompressedSize === s.MAX_VALUE_32BITS && (this.uncompressedSize = e2.readInt(8)), this.compressedSize === s.MAX_VALUE_32BITS && (this.compressedSize = e2.readInt(8)), this.localHeaderOffset === s.MAX_VALUE_32BITS && (this.localHeaderOffset = e2.readInt(8)), this.diskNumberStart === s.MAX_VALUE_32BITS && (this.diskNumberStart = e2.readInt(4));
          }
        }, readExtraFields: function(e2) {
          var t2, r2, n2, i2 = e2.index + this.extraFieldsLength;
          for (this.extraFields || (this.extraFields = {}); e2.index + 4 < i2; )
            t2 = e2.readInt(2), r2 = e2.readInt(2), n2 = e2.readData(r2), this.extraFields[t2] = { id: t2, length: r2, value: n2 };
          e2.setIndex(i2);
        }, handleUTF8: function() {
          var e2 = u.uint8array ? "uint8array" : "array";
          if (this.useUTF8())
            this.fileNameStr = o.utf8decode(this.fileName), this.fileCommentStr = o.utf8decode(this.fileComment);
          else {
            var t2 = this.findExtraFieldUnicodePath();
            if (null !== t2)
              this.fileNameStr = t2;
            else {
              var r2 = s.transformTo(e2, this.fileName);
              this.fileNameStr = this.loadOptions.decodeFileName(r2);
            }
            var n2 = this.findExtraFieldUnicodeComment();
            if (null !== n2)
              this.fileCommentStr = n2;
            else {
              var i2 = s.transformTo(e2, this.fileComment);
              this.fileCommentStr = this.loadOptions.decodeFileName(i2);
            }
          }
        }, findExtraFieldUnicodePath: function() {
          var e2 = this.extraFields[28789];
          if (e2) {
            var t2 = n(e2.value);
            return 1 !== t2.readInt(1) ? null : a(this.fileName) !== t2.readInt(4) ? null : o.utf8decode(t2.readData(e2.length - 5));
          }
          return null;
        }, findExtraFieldUnicodeComment: function() {
          var e2 = this.extraFields[25461];
          if (e2) {
            var t2 = n(e2.value);
            return 1 !== t2.readInt(1) ? null : a(this.fileComment) !== t2.readInt(4) ? null : o.utf8decode(t2.readData(e2.length - 5));
          }
          return null;
        } }, t.exports = l;
      }, { "./compressedObject": 2, "./compressions": 3, "./crc32": 4, "./reader/readerFor": 22, "./support": 30, "./utf8": 31, "./utils": 32 }], 35: [function(e, t, r) {
        "use strict";
        function n(e2, t2, r2) {
          this.name = e2, this.dir = r2.dir, this.date = r2.date, this.comment = r2.comment, this.unixPermissions = r2.unixPermissions, this.dosPermissions = r2.dosPermissions, this._data = t2, this._dataBinary = r2.binary, this.options = { compression: r2.compression, compressionOptions: r2.compressionOptions };
        }
        __name(n, "n");
        var s = e("./stream/StreamHelper"), i = e("./stream/DataWorker"), a = e("./utf8"), o = e("./compressedObject"), h = e("./stream/GenericWorker");
        n.prototype = { internalStream: function(e2) {
          var t2 = null, r2 = "string";
          try {
            if (!e2)
              throw new Error("No output type specified.");
            var n2 = "string" === (r2 = e2.toLowerCase()) || "text" === r2;
            "binarystring" !== r2 && "text" !== r2 || (r2 = "string"), t2 = this._decompressWorker();
            var i2 = !this._dataBinary;
            i2 && !n2 && (t2 = t2.pipe(new a.Utf8EncodeWorker())), !i2 && n2 && (t2 = t2.pipe(new a.Utf8DecodeWorker()));
          } catch (e3) {
            (t2 = new h("error")).error(e3);
          }
          return new s(t2, r2, "");
        }, async: function(e2, t2) {
          return this.internalStream(e2).accumulate(t2);
        }, nodeStream: function(e2, t2) {
          return this.internalStream(e2 || "nodebuffer").toNodejsStream(t2);
        }, _compressWorker: function(e2, t2) {
          if (this._data instanceof o && this._data.compression.magic === e2.magic)
            return this._data.getCompressedWorker();
          var r2 = this._decompressWorker();
          return this._dataBinary || (r2 = r2.pipe(new a.Utf8EncodeWorker())), o.createWorkerFrom(r2, e2, t2);
        }, _decompressWorker: function() {
          return this._data instanceof o ? this._data.getContentWorker() : this._data instanceof h ? this._data : new i(this._data);
        } };
        for (var u = ["asText", "asBinary", "asNodeBuffer", "asUint8Array", "asArrayBuffer"], l = function() {
          throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
        }, f = 0; f < u.length; f++)
          n.prototype[u[f]] = l;
        t.exports = n;
      }, { "./compressedObject": 2, "./stream/DataWorker": 27, "./stream/GenericWorker": 28, "./stream/StreamHelper": 29, "./utf8": 31 }], 36: [function(e, l, t) {
        (function(t2) {
          "use strict";
          var r, n, e2 = t2.MutationObserver || t2.WebKitMutationObserver;
          if (e2) {
            var i = 0, s = new e2(u), a = t2.document.createTextNode("");
            s.observe(a, { characterData: true }), r = /* @__PURE__ */ __name(function() {
              a.data = i = ++i % 2;
            }, "r");
          } else if (t2.setImmediate || void 0 === t2.MessageChannel)
            r = "document" in t2 && "onreadystatechange" in t2.document.createElement("script") ? function() {
              var e3 = t2.document.createElement("script");
              e3.onreadystatechange = function() {
                u(), e3.onreadystatechange = null, e3.parentNode.removeChild(e3), e3 = null;
              }, t2.document.documentElement.appendChild(e3);
            } : function() {
              setTimeout(u, 0);
            };
          else {
            var o = new t2.MessageChannel();
            o.port1.onmessage = u, r = /* @__PURE__ */ __name(function() {
              o.port2.postMessage(0);
            }, "r");
          }
          var h = [];
          function u() {
            var e3, t3;
            n = true;
            for (var r2 = h.length; r2; ) {
              for (t3 = h, h = [], e3 = -1; ++e3 < r2; )
                t3[e3]();
              r2 = h.length;
            }
            n = false;
          }
          __name(u, "u");
          l.exports = function(e3) {
            1 !== h.push(e3) || n || r();
          };
        }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
      }, {}], 37: [function(e, t, r) {
        "use strict";
        var i = e("immediate");
        function u() {
        }
        __name(u, "u");
        var l = {}, s = ["REJECTED"], a = ["FULFILLED"], n = ["PENDING"];
        function o(e2) {
          if ("function" != typeof e2)
            throw new TypeError("resolver must be a function");
          this.state = n, this.queue = [], this.outcome = void 0, e2 !== u && d(this, e2);
        }
        __name(o, "o");
        function h(e2, t2, r2) {
          this.promise = e2, "function" == typeof t2 && (this.onFulfilled = t2, this.callFulfilled = this.otherCallFulfilled), "function" == typeof r2 && (this.onRejected = r2, this.callRejected = this.otherCallRejected);
        }
        __name(h, "h");
        function f(t2, r2, n2) {
          i(function() {
            var e2;
            try {
              e2 = r2(n2);
            } catch (e3) {
              return l.reject(t2, e3);
            }
            e2 === t2 ? l.reject(t2, new TypeError("Cannot resolve promise with itself")) : l.resolve(t2, e2);
          });
        }
        __name(f, "f");
        function c(e2) {
          var t2 = e2 && e2.then;
          if (e2 && ("object" == typeof e2 || "function" == typeof e2) && "function" == typeof t2)
            return function() {
              t2.apply(e2, arguments);
            };
        }
        __name(c, "c");
        function d(t2, e2) {
          var r2 = false;
          function n2(e3) {
            r2 || (r2 = true, l.reject(t2, e3));
          }
          __name(n2, "n");
          function i2(e3) {
            r2 || (r2 = true, l.resolve(t2, e3));
          }
          __name(i2, "i");
          var s2 = p(function() {
            e2(i2, n2);
          });
          "error" === s2.status && n2(s2.value);
        }
        __name(d, "d");
        function p(e2, t2) {
          var r2 = {};
          try {
            r2.value = e2(t2), r2.status = "success";
          } catch (e3) {
            r2.status = "error", r2.value = e3;
          }
          return r2;
        }
        __name(p, "p");
        (t.exports = o).prototype.finally = function(t2) {
          if ("function" != typeof t2)
            return this;
          var r2 = this.constructor;
          return this.then(function(e2) {
            return r2.resolve(t2()).then(function() {
              return e2;
            });
          }, function(e2) {
            return r2.resolve(t2()).then(function() {
              throw e2;
            });
          });
        }, o.prototype.catch = function(e2) {
          return this.then(null, e2);
        }, o.prototype.then = function(e2, t2) {
          if ("function" != typeof e2 && this.state === a || "function" != typeof t2 && this.state === s)
            return this;
          var r2 = new this.constructor(u);
          this.state !== n ? f(r2, this.state === a ? e2 : t2, this.outcome) : this.queue.push(new h(r2, e2, t2));
          return r2;
        }, h.prototype.callFulfilled = function(e2) {
          l.resolve(this.promise, e2);
        }, h.prototype.otherCallFulfilled = function(e2) {
          f(this.promise, this.onFulfilled, e2);
        }, h.prototype.callRejected = function(e2) {
          l.reject(this.promise, e2);
        }, h.prototype.otherCallRejected = function(e2) {
          f(this.promise, this.onRejected, e2);
        }, l.resolve = function(e2, t2) {
          var r2 = p(c, t2);
          if ("error" === r2.status)
            return l.reject(e2, r2.value);
          var n2 = r2.value;
          if (n2)
            d(e2, n2);
          else {
            e2.state = a, e2.outcome = t2;
            for (var i2 = -1, s2 = e2.queue.length; ++i2 < s2; )
              e2.queue[i2].callFulfilled(t2);
          }
          return e2;
        }, l.reject = function(e2, t2) {
          e2.state = s, e2.outcome = t2;
          for (var r2 = -1, n2 = e2.queue.length; ++r2 < n2; )
            e2.queue[r2].callRejected(t2);
          return e2;
        }, o.resolve = function(e2) {
          if (e2 instanceof this)
            return e2;
          return l.resolve(new this(u), e2);
        }, o.reject = function(e2) {
          var t2 = new this(u);
          return l.reject(t2, e2);
        }, o.all = function(e2) {
          var r2 = this;
          if ("[object Array]" !== Object.prototype.toString.call(e2))
            return this.reject(new TypeError("must be an array"));
          var n2 = e2.length, i2 = false;
          if (!n2)
            return this.resolve([]);
          var s2 = new Array(n2), a2 = 0, t2 = -1, o2 = new this(u);
          for (; ++t2 < n2; )
            h2(e2[t2], t2);
          return o2;
          function h2(e3, t3) {
            r2.resolve(e3).then(function(e4) {
              s2[t3] = e4, ++a2 !== n2 || i2 || (i2 = true, l.resolve(o2, s2));
            }, function(e4) {
              i2 || (i2 = true, l.reject(o2, e4));
            });
          }
          __name(h2, "h");
        }, o.race = function(e2) {
          var t2 = this;
          if ("[object Array]" !== Object.prototype.toString.call(e2))
            return this.reject(new TypeError("must be an array"));
          var r2 = e2.length, n2 = false;
          if (!r2)
            return this.resolve([]);
          var i2 = -1, s2 = new this(u);
          for (; ++i2 < r2; )
            a2 = e2[i2], t2.resolve(a2).then(function(e3) {
              n2 || (n2 = true, l.resolve(s2, e3));
            }, function(e3) {
              n2 || (n2 = true, l.reject(s2, e3));
            });
          var a2;
          return s2;
        };
      }, { immediate: 36 }], 38: [function(e, t, r) {
        "use strict";
        var n = {};
        (0, e("./lib/utils/common").assign)(n, e("./lib/deflate"), e("./lib/inflate"), e("./lib/zlib/constants")), t.exports = n;
      }, { "./lib/deflate": 39, "./lib/inflate": 40, "./lib/utils/common": 41, "./lib/zlib/constants": 44 }], 39: [function(e, t, r) {
        "use strict";
        var a = e("./zlib/deflate"), o = e("./utils/common"), h = e("./utils/strings"), i = e("./zlib/messages"), s = e("./zlib/zstream"), u = Object.prototype.toString, l = 0, f = -1, c = 0, d = 8;
        function p(e2) {
          if (!(this instanceof p))
            return new p(e2);
          this.options = o.assign({ level: f, method: d, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: c, to: "" }, e2 || {});
          var t2 = this.options;
          t2.raw && 0 < t2.windowBits ? t2.windowBits = -t2.windowBits : t2.gzip && 0 < t2.windowBits && t2.windowBits < 16 && (t2.windowBits += 16), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new s(), this.strm.avail_out = 0;
          var r2 = a.deflateInit2(this.strm, t2.level, t2.method, t2.windowBits, t2.memLevel, t2.strategy);
          if (r2 !== l)
            throw new Error(i[r2]);
          if (t2.header && a.deflateSetHeader(this.strm, t2.header), t2.dictionary) {
            var n2;
            if (n2 = "string" == typeof t2.dictionary ? h.string2buf(t2.dictionary) : "[object ArrayBuffer]" === u.call(t2.dictionary) ? new Uint8Array(t2.dictionary) : t2.dictionary, (r2 = a.deflateSetDictionary(this.strm, n2)) !== l)
              throw new Error(i[r2]);
            this._dict_set = true;
          }
        }
        __name(p, "p");
        function n(e2, t2) {
          var r2 = new p(t2);
          if (r2.push(e2, true), r2.err)
            throw r2.msg || i[r2.err];
          return r2.result;
        }
        __name(n, "n");
        p.prototype.push = function(e2, t2) {
          var r2, n2, i2 = this.strm, s2 = this.options.chunkSize;
          if (this.ended)
            return false;
          n2 = t2 === ~~t2 ? t2 : true === t2 ? 4 : 0, "string" == typeof e2 ? i2.input = h.string2buf(e2) : "[object ArrayBuffer]" === u.call(e2) ? i2.input = new Uint8Array(e2) : i2.input = e2, i2.next_in = 0, i2.avail_in = i2.input.length;
          do {
            if (0 === i2.avail_out && (i2.output = new o.Buf8(s2), i2.next_out = 0, i2.avail_out = s2), 1 !== (r2 = a.deflate(i2, n2)) && r2 !== l)
              return this.onEnd(r2), !(this.ended = true);
            0 !== i2.avail_out && (0 !== i2.avail_in || 4 !== n2 && 2 !== n2) || ("string" === this.options.to ? this.onData(h.buf2binstring(o.shrinkBuf(i2.output, i2.next_out))) : this.onData(o.shrinkBuf(i2.output, i2.next_out)));
          } while ((0 < i2.avail_in || 0 === i2.avail_out) && 1 !== r2);
          return 4 === n2 ? (r2 = a.deflateEnd(this.strm), this.onEnd(r2), this.ended = true, r2 === l) : 2 !== n2 || (this.onEnd(l), !(i2.avail_out = 0));
        }, p.prototype.onData = function(e2) {
          this.chunks.push(e2);
        }, p.prototype.onEnd = function(e2) {
          e2 === l && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = o.flattenChunks(this.chunks)), this.chunks = [], this.err = e2, this.msg = this.strm.msg;
        }, r.Deflate = p, r.deflate = n, r.deflateRaw = function(e2, t2) {
          return (t2 = t2 || {}).raw = true, n(e2, t2);
        }, r.gzip = function(e2, t2) {
          return (t2 = t2 || {}).gzip = true, n(e2, t2);
        };
      }, { "./utils/common": 41, "./utils/strings": 42, "./zlib/deflate": 46, "./zlib/messages": 51, "./zlib/zstream": 53 }], 40: [function(e, t, r) {
        "use strict";
        var c = e("./zlib/inflate"), d = e("./utils/common"), p = e("./utils/strings"), m = e("./zlib/constants"), n = e("./zlib/messages"), i = e("./zlib/zstream"), s = e("./zlib/gzheader"), _ = Object.prototype.toString;
        function a(e2) {
          if (!(this instanceof a))
            return new a(e2);
          this.options = d.assign({ chunkSize: 16384, windowBits: 0, to: "" }, e2 || {});
          var t2 = this.options;
          t2.raw && 0 <= t2.windowBits && t2.windowBits < 16 && (t2.windowBits = -t2.windowBits, 0 === t2.windowBits && (t2.windowBits = -15)), !(0 <= t2.windowBits && t2.windowBits < 16) || e2 && e2.windowBits || (t2.windowBits += 32), 15 < t2.windowBits && t2.windowBits < 48 && 0 == (15 & t2.windowBits) && (t2.windowBits |= 15), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new i(), this.strm.avail_out = 0;
          var r2 = c.inflateInit2(this.strm, t2.windowBits);
          if (r2 !== m.Z_OK)
            throw new Error(n[r2]);
          this.header = new s(), c.inflateGetHeader(this.strm, this.header);
        }
        __name(a, "a");
        function o(e2, t2) {
          var r2 = new a(t2);
          if (r2.push(e2, true), r2.err)
            throw r2.msg || n[r2.err];
          return r2.result;
        }
        __name(o, "o");
        a.prototype.push = function(e2, t2) {
          var r2, n2, i2, s2, a2, o2, h = this.strm, u = this.options.chunkSize, l = this.options.dictionary, f = false;
          if (this.ended)
            return false;
          n2 = t2 === ~~t2 ? t2 : true === t2 ? m.Z_FINISH : m.Z_NO_FLUSH, "string" == typeof e2 ? h.input = p.binstring2buf(e2) : "[object ArrayBuffer]" === _.call(e2) ? h.input = new Uint8Array(e2) : h.input = e2, h.next_in = 0, h.avail_in = h.input.length;
          do {
            if (0 === h.avail_out && (h.output = new d.Buf8(u), h.next_out = 0, h.avail_out = u), (r2 = c.inflate(h, m.Z_NO_FLUSH)) === m.Z_NEED_DICT && l && (o2 = "string" == typeof l ? p.string2buf(l) : "[object ArrayBuffer]" === _.call(l) ? new Uint8Array(l) : l, r2 = c.inflateSetDictionary(this.strm, o2)), r2 === m.Z_BUF_ERROR && true === f && (r2 = m.Z_OK, f = false), r2 !== m.Z_STREAM_END && r2 !== m.Z_OK)
              return this.onEnd(r2), !(this.ended = true);
            h.next_out && (0 !== h.avail_out && r2 !== m.Z_STREAM_END && (0 !== h.avail_in || n2 !== m.Z_FINISH && n2 !== m.Z_SYNC_FLUSH) || ("string" === this.options.to ? (i2 = p.utf8border(h.output, h.next_out), s2 = h.next_out - i2, a2 = p.buf2string(h.output, i2), h.next_out = s2, h.avail_out = u - s2, s2 && d.arraySet(h.output, h.output, i2, s2, 0), this.onData(a2)) : this.onData(d.shrinkBuf(h.output, h.next_out)))), 0 === h.avail_in && 0 === h.avail_out && (f = true);
          } while ((0 < h.avail_in || 0 === h.avail_out) && r2 !== m.Z_STREAM_END);
          return r2 === m.Z_STREAM_END && (n2 = m.Z_FINISH), n2 === m.Z_FINISH ? (r2 = c.inflateEnd(this.strm), this.onEnd(r2), this.ended = true, r2 === m.Z_OK) : n2 !== m.Z_SYNC_FLUSH || (this.onEnd(m.Z_OK), !(h.avail_out = 0));
        }, a.prototype.onData = function(e2) {
          this.chunks.push(e2);
        }, a.prototype.onEnd = function(e2) {
          e2 === m.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = d.flattenChunks(this.chunks)), this.chunks = [], this.err = e2, this.msg = this.strm.msg;
        }, r.Inflate = a, r.inflate = o, r.inflateRaw = function(e2, t2) {
          return (t2 = t2 || {}).raw = true, o(e2, t2);
        }, r.ungzip = o;
      }, { "./utils/common": 41, "./utils/strings": 42, "./zlib/constants": 44, "./zlib/gzheader": 47, "./zlib/inflate": 49, "./zlib/messages": 51, "./zlib/zstream": 53 }], 41: [function(e, t, r) {
        "use strict";
        var n = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array;
        r.assign = function(e2) {
          for (var t2 = Array.prototype.slice.call(arguments, 1); t2.length; ) {
            var r2 = t2.shift();
            if (r2) {
              if ("object" != typeof r2)
                throw new TypeError(r2 + "must be non-object");
              for (var n2 in r2)
                r2.hasOwnProperty(n2) && (e2[n2] = r2[n2]);
            }
          }
          return e2;
        }, r.shrinkBuf = function(e2, t2) {
          return e2.length === t2 ? e2 : e2.subarray ? e2.subarray(0, t2) : (e2.length = t2, e2);
        };
        var i = { arraySet: function(e2, t2, r2, n2, i2) {
          if (t2.subarray && e2.subarray)
            e2.set(t2.subarray(r2, r2 + n2), i2);
          else
            for (var s2 = 0; s2 < n2; s2++)
              e2[i2 + s2] = t2[r2 + s2];
        }, flattenChunks: function(e2) {
          var t2, r2, n2, i2, s2, a;
          for (t2 = n2 = 0, r2 = e2.length; t2 < r2; t2++)
            n2 += e2[t2].length;
          for (a = new Uint8Array(n2), t2 = i2 = 0, r2 = e2.length; t2 < r2; t2++)
            s2 = e2[t2], a.set(s2, i2), i2 += s2.length;
          return a;
        } }, s = { arraySet: function(e2, t2, r2, n2, i2) {
          for (var s2 = 0; s2 < n2; s2++)
            e2[i2 + s2] = t2[r2 + s2];
        }, flattenChunks: function(e2) {
          return [].concat.apply([], e2);
        } };
        r.setTyped = function(e2) {
          e2 ? (r.Buf8 = Uint8Array, r.Buf16 = Uint16Array, r.Buf32 = Int32Array, r.assign(r, i)) : (r.Buf8 = Array, r.Buf16 = Array, r.Buf32 = Array, r.assign(r, s));
        }, r.setTyped(n);
      }, {}], 42: [function(e, t, r) {
        "use strict";
        var h = e("./common"), i = true, s = true;
        try {
          String.fromCharCode.apply(null, [0]);
        } catch (e2) {
          i = false;
        }
        try {
          String.fromCharCode.apply(null, new Uint8Array(1));
        } catch (e2) {
          s = false;
        }
        for (var u = new h.Buf8(256), n = 0; n < 256; n++)
          u[n] = 252 <= n ? 6 : 248 <= n ? 5 : 240 <= n ? 4 : 224 <= n ? 3 : 192 <= n ? 2 : 1;
        function l(e2, t2) {
          if (t2 < 65537 && (e2.subarray && s || !e2.subarray && i))
            return String.fromCharCode.apply(null, h.shrinkBuf(e2, t2));
          for (var r2 = "", n2 = 0; n2 < t2; n2++)
            r2 += String.fromCharCode(e2[n2]);
          return r2;
        }
        __name(l, "l");
        u[254] = u[254] = 1, r.string2buf = function(e2) {
          var t2, r2, n2, i2, s2, a = e2.length, o = 0;
          for (i2 = 0; i2 < a; i2++)
            55296 == (64512 & (r2 = e2.charCodeAt(i2))) && i2 + 1 < a && 56320 == (64512 & (n2 = e2.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), i2++), o += r2 < 128 ? 1 : r2 < 2048 ? 2 : r2 < 65536 ? 3 : 4;
          for (t2 = new h.Buf8(o), i2 = s2 = 0; s2 < o; i2++)
            55296 == (64512 & (r2 = e2.charCodeAt(i2))) && i2 + 1 < a && 56320 == (64512 & (n2 = e2.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), i2++), r2 < 128 ? t2[s2++] = r2 : (r2 < 2048 ? t2[s2++] = 192 | r2 >>> 6 : (r2 < 65536 ? t2[s2++] = 224 | r2 >>> 12 : (t2[s2++] = 240 | r2 >>> 18, t2[s2++] = 128 | r2 >>> 12 & 63), t2[s2++] = 128 | r2 >>> 6 & 63), t2[s2++] = 128 | 63 & r2);
          return t2;
        }, r.buf2binstring = function(e2) {
          return l(e2, e2.length);
        }, r.binstring2buf = function(e2) {
          for (var t2 = new h.Buf8(e2.length), r2 = 0, n2 = t2.length; r2 < n2; r2++)
            t2[r2] = e2.charCodeAt(r2);
          return t2;
        }, r.buf2string = function(e2, t2) {
          var r2, n2, i2, s2, a = t2 || e2.length, o = new Array(2 * a);
          for (r2 = n2 = 0; r2 < a; )
            if ((i2 = e2[r2++]) < 128)
              o[n2++] = i2;
            else if (4 < (s2 = u[i2]))
              o[n2++] = 65533, r2 += s2 - 1;
            else {
              for (i2 &= 2 === s2 ? 31 : 3 === s2 ? 15 : 7; 1 < s2 && r2 < a; )
                i2 = i2 << 6 | 63 & e2[r2++], s2--;
              1 < s2 ? o[n2++] = 65533 : i2 < 65536 ? o[n2++] = i2 : (i2 -= 65536, o[n2++] = 55296 | i2 >> 10 & 1023, o[n2++] = 56320 | 1023 & i2);
            }
          return l(o, n2);
        }, r.utf8border = function(e2, t2) {
          var r2;
          for ((t2 = t2 || e2.length) > e2.length && (t2 = e2.length), r2 = t2 - 1; 0 <= r2 && 128 == (192 & e2[r2]); )
            r2--;
          return r2 < 0 ? t2 : 0 === r2 ? t2 : r2 + u[e2[r2]] > t2 ? r2 : t2;
        };
      }, { "./common": 41 }], 43: [function(e, t, r) {
        "use strict";
        t.exports = function(e2, t2, r2, n) {
          for (var i = 65535 & e2 | 0, s = e2 >>> 16 & 65535 | 0, a = 0; 0 !== r2; ) {
            for (r2 -= a = 2e3 < r2 ? 2e3 : r2; s = s + (i = i + t2[n++] | 0) | 0, --a; )
              ;
            i %= 65521, s %= 65521;
          }
          return i | s << 16 | 0;
        };
      }, {}], 44: [function(e, t, r) {
        "use strict";
        t.exports = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 };
      }, {}], 45: [function(e, t, r) {
        "use strict";
        var o = function() {
          for (var e2, t2 = [], r2 = 0; r2 < 256; r2++) {
            e2 = r2;
            for (var n = 0; n < 8; n++)
              e2 = 1 & e2 ? 3988292384 ^ e2 >>> 1 : e2 >>> 1;
            t2[r2] = e2;
          }
          return t2;
        }();
        t.exports = function(e2, t2, r2, n) {
          var i = o, s = n + r2;
          e2 ^= -1;
          for (var a = n; a < s; a++)
            e2 = e2 >>> 8 ^ i[255 & (e2 ^ t2[a])];
          return -1 ^ e2;
        };
      }, {}], 46: [function(e, t, r) {
        "use strict";
        var h, c = e("../utils/common"), u = e("./trees"), d = e("./adler32"), p = e("./crc32"), n = e("./messages"), l = 0, f = 4, m = 0, _ = -2, g = -1, b = 4, i = 2, v = 8, y = 9, s = 286, a = 30, o = 19, w = 2 * s + 1, k = 15, x = 3, S = 258, z = S + x + 1, C = 42, E = 113, A = 1, I = 2, O = 3, B = 4;
        function R(e2, t2) {
          return e2.msg = n[t2], t2;
        }
        __name(R, "R");
        function T(e2) {
          return (e2 << 1) - (4 < e2 ? 9 : 0);
        }
        __name(T, "T");
        function D(e2) {
          for (var t2 = e2.length; 0 <= --t2; )
            e2[t2] = 0;
        }
        __name(D, "D");
        function F(e2) {
          var t2 = e2.state, r2 = t2.pending;
          r2 > e2.avail_out && (r2 = e2.avail_out), 0 !== r2 && (c.arraySet(e2.output, t2.pending_buf, t2.pending_out, r2, e2.next_out), e2.next_out += r2, t2.pending_out += r2, e2.total_out += r2, e2.avail_out -= r2, t2.pending -= r2, 0 === t2.pending && (t2.pending_out = 0));
        }
        __name(F, "F");
        function N(e2, t2) {
          u._tr_flush_block(e2, 0 <= e2.block_start ? e2.block_start : -1, e2.strstart - e2.block_start, t2), e2.block_start = e2.strstart, F(e2.strm);
        }
        __name(N, "N");
        function U(e2, t2) {
          e2.pending_buf[e2.pending++] = t2;
        }
        __name(U, "U");
        function P(e2, t2) {
          e2.pending_buf[e2.pending++] = t2 >>> 8 & 255, e2.pending_buf[e2.pending++] = 255 & t2;
        }
        __name(P, "P");
        function L(e2, t2) {
          var r2, n2, i2 = e2.max_chain_length, s2 = e2.strstart, a2 = e2.prev_length, o2 = e2.nice_match, h2 = e2.strstart > e2.w_size - z ? e2.strstart - (e2.w_size - z) : 0, u2 = e2.window, l2 = e2.w_mask, f2 = e2.prev, c2 = e2.strstart + S, d2 = u2[s2 + a2 - 1], p2 = u2[s2 + a2];
          e2.prev_length >= e2.good_match && (i2 >>= 2), o2 > e2.lookahead && (o2 = e2.lookahead);
          do {
            if (u2[(r2 = t2) + a2] === p2 && u2[r2 + a2 - 1] === d2 && u2[r2] === u2[s2] && u2[++r2] === u2[s2 + 1]) {
              s2 += 2, r2++;
              do {
              } while (u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && u2[++s2] === u2[++r2] && s2 < c2);
              if (n2 = S - (c2 - s2), s2 = c2 - S, a2 < n2) {
                if (e2.match_start = t2, o2 <= (a2 = n2))
                  break;
                d2 = u2[s2 + a2 - 1], p2 = u2[s2 + a2];
              }
            }
          } while ((t2 = f2[t2 & l2]) > h2 && 0 != --i2);
          return a2 <= e2.lookahead ? a2 : e2.lookahead;
        }
        __name(L, "L");
        function j(e2) {
          var t2, r2, n2, i2, s2, a2, o2, h2, u2, l2, f2 = e2.w_size;
          do {
            if (i2 = e2.window_size - e2.lookahead - e2.strstart, e2.strstart >= f2 + (f2 - z)) {
              for (c.arraySet(e2.window, e2.window, f2, f2, 0), e2.match_start -= f2, e2.strstart -= f2, e2.block_start -= f2, t2 = r2 = e2.hash_size; n2 = e2.head[--t2], e2.head[t2] = f2 <= n2 ? n2 - f2 : 0, --r2; )
                ;
              for (t2 = r2 = f2; n2 = e2.prev[--t2], e2.prev[t2] = f2 <= n2 ? n2 - f2 : 0, --r2; )
                ;
              i2 += f2;
            }
            if (0 === e2.strm.avail_in)
              break;
            if (a2 = e2.strm, o2 = e2.window, h2 = e2.strstart + e2.lookahead, u2 = i2, l2 = void 0, l2 = a2.avail_in, u2 < l2 && (l2 = u2), r2 = 0 === l2 ? 0 : (a2.avail_in -= l2, c.arraySet(o2, a2.input, a2.next_in, l2, h2), 1 === a2.state.wrap ? a2.adler = d(a2.adler, o2, l2, h2) : 2 === a2.state.wrap && (a2.adler = p(a2.adler, o2, l2, h2)), a2.next_in += l2, a2.total_in += l2, l2), e2.lookahead += r2, e2.lookahead + e2.insert >= x)
              for (s2 = e2.strstart - e2.insert, e2.ins_h = e2.window[s2], e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[s2 + 1]) & e2.hash_mask; e2.insert && (e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[s2 + x - 1]) & e2.hash_mask, e2.prev[s2 & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = s2, s2++, e2.insert--, !(e2.lookahead + e2.insert < x)); )
                ;
          } while (e2.lookahead < z && 0 !== e2.strm.avail_in);
        }
        __name(j, "j");
        function Z(e2, t2) {
          for (var r2, n2; ; ) {
            if (e2.lookahead < z) {
              if (j(e2), e2.lookahead < z && t2 === l)
                return A;
              if (0 === e2.lookahead)
                break;
            }
            if (r2 = 0, e2.lookahead >= x && (e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[e2.strstart + x - 1]) & e2.hash_mask, r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), 0 !== r2 && e2.strstart - r2 <= e2.w_size - z && (e2.match_length = L(e2, r2)), e2.match_length >= x)
              if (n2 = u._tr_tally(e2, e2.strstart - e2.match_start, e2.match_length - x), e2.lookahead -= e2.match_length, e2.match_length <= e2.max_lazy_match && e2.lookahead >= x) {
                for (e2.match_length--; e2.strstart++, e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[e2.strstart + x - 1]) & e2.hash_mask, r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart, 0 != --e2.match_length; )
                  ;
                e2.strstart++;
              } else
                e2.strstart += e2.match_length, e2.match_length = 0, e2.ins_h = e2.window[e2.strstart], e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[e2.strstart + 1]) & e2.hash_mask;
            else
              n2 = u._tr_tally(e2, 0, e2.window[e2.strstart]), e2.lookahead--, e2.strstart++;
            if (n2 && (N(e2, false), 0 === e2.strm.avail_out))
              return A;
          }
          return e2.insert = e2.strstart < x - 1 ? e2.strstart : x - 1, t2 === f ? (N(e2, true), 0 === e2.strm.avail_out ? O : B) : e2.last_lit && (N(e2, false), 0 === e2.strm.avail_out) ? A : I;
        }
        __name(Z, "Z");
        function W(e2, t2) {
          for (var r2, n2, i2; ; ) {
            if (e2.lookahead < z) {
              if (j(e2), e2.lookahead < z && t2 === l)
                return A;
              if (0 === e2.lookahead)
                break;
            }
            if (r2 = 0, e2.lookahead >= x && (e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[e2.strstart + x - 1]) & e2.hash_mask, r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), e2.prev_length = e2.match_length, e2.prev_match = e2.match_start, e2.match_length = x - 1, 0 !== r2 && e2.prev_length < e2.max_lazy_match && e2.strstart - r2 <= e2.w_size - z && (e2.match_length = L(e2, r2), e2.match_length <= 5 && (1 === e2.strategy || e2.match_length === x && 4096 < e2.strstart - e2.match_start) && (e2.match_length = x - 1)), e2.prev_length >= x && e2.match_length <= e2.prev_length) {
              for (i2 = e2.strstart + e2.lookahead - x, n2 = u._tr_tally(e2, e2.strstart - 1 - e2.prev_match, e2.prev_length - x), e2.lookahead -= e2.prev_length - 1, e2.prev_length -= 2; ++e2.strstart <= i2 && (e2.ins_h = (e2.ins_h << e2.hash_shift ^ e2.window[e2.strstart + x - 1]) & e2.hash_mask, r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), 0 != --e2.prev_length; )
                ;
              if (e2.match_available = 0, e2.match_length = x - 1, e2.strstart++, n2 && (N(e2, false), 0 === e2.strm.avail_out))
                return A;
            } else if (e2.match_available) {
              if ((n2 = u._tr_tally(e2, 0, e2.window[e2.strstart - 1])) && N(e2, false), e2.strstart++, e2.lookahead--, 0 === e2.strm.avail_out)
                return A;
            } else
              e2.match_available = 1, e2.strstart++, e2.lookahead--;
          }
          return e2.match_available && (n2 = u._tr_tally(e2, 0, e2.window[e2.strstart - 1]), e2.match_available = 0), e2.insert = e2.strstart < x - 1 ? e2.strstart : x - 1, t2 === f ? (N(e2, true), 0 === e2.strm.avail_out ? O : B) : e2.last_lit && (N(e2, false), 0 === e2.strm.avail_out) ? A : I;
        }
        __name(W, "W");
        function M(e2, t2, r2, n2, i2) {
          this.good_length = e2, this.max_lazy = t2, this.nice_length = r2, this.max_chain = n2, this.func = i2;
        }
        __name(M, "M");
        function H() {
          this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = v, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new c.Buf16(2 * w), this.dyn_dtree = new c.Buf16(2 * (2 * a + 1)), this.bl_tree = new c.Buf16(2 * (2 * o + 1)), D(this.dyn_ltree), D(this.dyn_dtree), D(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new c.Buf16(k + 1), this.heap = new c.Buf16(2 * s + 1), D(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new c.Buf16(2 * s + 1), D(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
        }
        __name(H, "H");
        function G(e2) {
          var t2;
          return e2 && e2.state ? (e2.total_in = e2.total_out = 0, e2.data_type = i, (t2 = e2.state).pending = 0, t2.pending_out = 0, t2.wrap < 0 && (t2.wrap = -t2.wrap), t2.status = t2.wrap ? C : E, e2.adler = 2 === t2.wrap ? 0 : 1, t2.last_flush = l, u._tr_init(t2), m) : R(e2, _);
        }
        __name(G, "G");
        function K(e2) {
          var t2 = G(e2);
          return t2 === m && function(e3) {
            e3.window_size = 2 * e3.w_size, D(e3.head), e3.max_lazy_match = h[e3.level].max_lazy, e3.good_match = h[e3.level].good_length, e3.nice_match = h[e3.level].nice_length, e3.max_chain_length = h[e3.level].max_chain, e3.strstart = 0, e3.block_start = 0, e3.lookahead = 0, e3.insert = 0, e3.match_length = e3.prev_length = x - 1, e3.match_available = 0, e3.ins_h = 0;
          }(e2.state), t2;
        }
        __name(K, "K");
        function Y(e2, t2, r2, n2, i2, s2) {
          if (!e2)
            return _;
          var a2 = 1;
          if (t2 === g && (t2 = 6), n2 < 0 ? (a2 = 0, n2 = -n2) : 15 < n2 && (a2 = 2, n2 -= 16), i2 < 1 || y < i2 || r2 !== v || n2 < 8 || 15 < n2 || t2 < 0 || 9 < t2 || s2 < 0 || b < s2)
            return R(e2, _);
          8 === n2 && (n2 = 9);
          var o2 = new H();
          return (e2.state = o2).strm = e2, o2.wrap = a2, o2.gzhead = null, o2.w_bits = n2, o2.w_size = 1 << o2.w_bits, o2.w_mask = o2.w_size - 1, o2.hash_bits = i2 + 7, o2.hash_size = 1 << o2.hash_bits, o2.hash_mask = o2.hash_size - 1, o2.hash_shift = ~~((o2.hash_bits + x - 1) / x), o2.window = new c.Buf8(2 * o2.w_size), o2.head = new c.Buf16(o2.hash_size), o2.prev = new c.Buf16(o2.w_size), o2.lit_bufsize = 1 << i2 + 6, o2.pending_buf_size = 4 * o2.lit_bufsize, o2.pending_buf = new c.Buf8(o2.pending_buf_size), o2.d_buf = 1 * o2.lit_bufsize, o2.l_buf = 3 * o2.lit_bufsize, o2.level = t2, o2.strategy = s2, o2.method = r2, K(e2);
        }
        __name(Y, "Y");
        h = [new M(0, 0, 0, 0, function(e2, t2) {
          var r2 = 65535;
          for (r2 > e2.pending_buf_size - 5 && (r2 = e2.pending_buf_size - 5); ; ) {
            if (e2.lookahead <= 1) {
              if (j(e2), 0 === e2.lookahead && t2 === l)
                return A;
              if (0 === e2.lookahead)
                break;
            }
            e2.strstart += e2.lookahead, e2.lookahead = 0;
            var n2 = e2.block_start + r2;
            if ((0 === e2.strstart || e2.strstart >= n2) && (e2.lookahead = e2.strstart - n2, e2.strstart = n2, N(e2, false), 0 === e2.strm.avail_out))
              return A;
            if (e2.strstart - e2.block_start >= e2.w_size - z && (N(e2, false), 0 === e2.strm.avail_out))
              return A;
          }
          return e2.insert = 0, t2 === f ? (N(e2, true), 0 === e2.strm.avail_out ? O : B) : (e2.strstart > e2.block_start && (N(e2, false), e2.strm.avail_out), A);
        }), new M(4, 4, 8, 4, Z), new M(4, 5, 16, 8, Z), new M(4, 6, 32, 32, Z), new M(4, 4, 16, 16, W), new M(8, 16, 32, 32, W), new M(8, 16, 128, 128, W), new M(8, 32, 128, 256, W), new M(32, 128, 258, 1024, W), new M(32, 258, 258, 4096, W)], r.deflateInit = function(e2, t2) {
          return Y(e2, t2, v, 15, 8, 0);
        }, r.deflateInit2 = Y, r.deflateReset = K, r.deflateResetKeep = G, r.deflateSetHeader = function(e2, t2) {
          return e2 && e2.state ? 2 !== e2.state.wrap ? _ : (e2.state.gzhead = t2, m) : _;
        }, r.deflate = function(e2, t2) {
          var r2, n2, i2, s2;
          if (!e2 || !e2.state || 5 < t2 || t2 < 0)
            return e2 ? R(e2, _) : _;
          if (n2 = e2.state, !e2.output || !e2.input && 0 !== e2.avail_in || 666 === n2.status && t2 !== f)
            return R(e2, 0 === e2.avail_out ? -5 : _);
          if (n2.strm = e2, r2 = n2.last_flush, n2.last_flush = t2, n2.status === C)
            if (2 === n2.wrap)
              e2.adler = 0, U(n2, 31), U(n2, 139), U(n2, 8), n2.gzhead ? (U(n2, (n2.gzhead.text ? 1 : 0) + (n2.gzhead.hcrc ? 2 : 0) + (n2.gzhead.extra ? 4 : 0) + (n2.gzhead.name ? 8 : 0) + (n2.gzhead.comment ? 16 : 0)), U(n2, 255 & n2.gzhead.time), U(n2, n2.gzhead.time >> 8 & 255), U(n2, n2.gzhead.time >> 16 & 255), U(n2, n2.gzhead.time >> 24 & 255), U(n2, 9 === n2.level ? 2 : 2 <= n2.strategy || n2.level < 2 ? 4 : 0), U(n2, 255 & n2.gzhead.os), n2.gzhead.extra && n2.gzhead.extra.length && (U(n2, 255 & n2.gzhead.extra.length), U(n2, n2.gzhead.extra.length >> 8 & 255)), n2.gzhead.hcrc && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending, 0)), n2.gzindex = 0, n2.status = 69) : (U(n2, 0), U(n2, 0), U(n2, 0), U(n2, 0), U(n2, 0), U(n2, 9 === n2.level ? 2 : 2 <= n2.strategy || n2.level < 2 ? 4 : 0), U(n2, 3), n2.status = E);
            else {
              var a2 = v + (n2.w_bits - 8 << 4) << 8;
              a2 |= (2 <= n2.strategy || n2.level < 2 ? 0 : n2.level < 6 ? 1 : 6 === n2.level ? 2 : 3) << 6, 0 !== n2.strstart && (a2 |= 32), a2 += 31 - a2 % 31, n2.status = E, P(n2, a2), 0 !== n2.strstart && (P(n2, e2.adler >>> 16), P(n2, 65535 & e2.adler)), e2.adler = 1;
            }
          if (69 === n2.status)
            if (n2.gzhead.extra) {
              for (i2 = n2.pending; n2.gzindex < (65535 & n2.gzhead.extra.length) && (n2.pending !== n2.pending_buf_size || (n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), F(e2), i2 = n2.pending, n2.pending !== n2.pending_buf_size)); )
                U(n2, 255 & n2.gzhead.extra[n2.gzindex]), n2.gzindex++;
              n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), n2.gzindex === n2.gzhead.extra.length && (n2.gzindex = 0, n2.status = 73);
            } else
              n2.status = 73;
          if (73 === n2.status)
            if (n2.gzhead.name) {
              i2 = n2.pending;
              do {
                if (n2.pending === n2.pending_buf_size && (n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), F(e2), i2 = n2.pending, n2.pending === n2.pending_buf_size)) {
                  s2 = 1;
                  break;
                }
                s2 = n2.gzindex < n2.gzhead.name.length ? 255 & n2.gzhead.name.charCodeAt(n2.gzindex++) : 0, U(n2, s2);
              } while (0 !== s2);
              n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), 0 === s2 && (n2.gzindex = 0, n2.status = 91);
            } else
              n2.status = 91;
          if (91 === n2.status)
            if (n2.gzhead.comment) {
              i2 = n2.pending;
              do {
                if (n2.pending === n2.pending_buf_size && (n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), F(e2), i2 = n2.pending, n2.pending === n2.pending_buf_size)) {
                  s2 = 1;
                  break;
                }
                s2 = n2.gzindex < n2.gzhead.comment.length ? 255 & n2.gzhead.comment.charCodeAt(n2.gzindex++) : 0, U(n2, s2);
              } while (0 !== s2);
              n2.gzhead.hcrc && n2.pending > i2 && (e2.adler = p(e2.adler, n2.pending_buf, n2.pending - i2, i2)), 0 === s2 && (n2.status = 103);
            } else
              n2.status = 103;
          if (103 === n2.status && (n2.gzhead.hcrc ? (n2.pending + 2 > n2.pending_buf_size && F(e2), n2.pending + 2 <= n2.pending_buf_size && (U(n2, 255 & e2.adler), U(n2, e2.adler >> 8 & 255), e2.adler = 0, n2.status = E)) : n2.status = E), 0 !== n2.pending) {
            if (F(e2), 0 === e2.avail_out)
              return n2.last_flush = -1, m;
          } else if (0 === e2.avail_in && T(t2) <= T(r2) && t2 !== f)
            return R(e2, -5);
          if (666 === n2.status && 0 !== e2.avail_in)
            return R(e2, -5);
          if (0 !== e2.avail_in || 0 !== n2.lookahead || t2 !== l && 666 !== n2.status) {
            var o2 = 2 === n2.strategy ? function(e3, t3) {
              for (var r3; ; ) {
                if (0 === e3.lookahead && (j(e3), 0 === e3.lookahead)) {
                  if (t3 === l)
                    return A;
                  break;
                }
                if (e3.match_length = 0, r3 = u._tr_tally(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++, r3 && (N(e3, false), 0 === e3.strm.avail_out))
                  return A;
              }
              return e3.insert = 0, t3 === f ? (N(e3, true), 0 === e3.strm.avail_out ? O : B) : e3.last_lit && (N(e3, false), 0 === e3.strm.avail_out) ? A : I;
            }(n2, t2) : 3 === n2.strategy ? function(e3, t3) {
              for (var r3, n3, i3, s3, a3 = e3.window; ; ) {
                if (e3.lookahead <= S) {
                  if (j(e3), e3.lookahead <= S && t3 === l)
                    return A;
                  if (0 === e3.lookahead)
                    break;
                }
                if (e3.match_length = 0, e3.lookahead >= x && 0 < e3.strstart && (n3 = a3[i3 = e3.strstart - 1]) === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3]) {
                  s3 = e3.strstart + S;
                  do {
                  } while (n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && n3 === a3[++i3] && i3 < s3);
                  e3.match_length = S - (s3 - i3), e3.match_length > e3.lookahead && (e3.match_length = e3.lookahead);
                }
                if (e3.match_length >= x ? (r3 = u._tr_tally(e3, 1, e3.match_length - x), e3.lookahead -= e3.match_length, e3.strstart += e3.match_length, e3.match_length = 0) : (r3 = u._tr_tally(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++), r3 && (N(e3, false), 0 === e3.strm.avail_out))
                  return A;
              }
              return e3.insert = 0, t3 === f ? (N(e3, true), 0 === e3.strm.avail_out ? O : B) : e3.last_lit && (N(e3, false), 0 === e3.strm.avail_out) ? A : I;
            }(n2, t2) : h[n2.level].func(n2, t2);
            if (o2 !== O && o2 !== B || (n2.status = 666), o2 === A || o2 === O)
              return 0 === e2.avail_out && (n2.last_flush = -1), m;
            if (o2 === I && (1 === t2 ? u._tr_align(n2) : 5 !== t2 && (u._tr_stored_block(n2, 0, 0, false), 3 === t2 && (D(n2.head), 0 === n2.lookahead && (n2.strstart = 0, n2.block_start = 0, n2.insert = 0))), F(e2), 0 === e2.avail_out))
              return n2.last_flush = -1, m;
          }
          return t2 !== f ? m : n2.wrap <= 0 ? 1 : (2 === n2.wrap ? (U(n2, 255 & e2.adler), U(n2, e2.adler >> 8 & 255), U(n2, e2.adler >> 16 & 255), U(n2, e2.adler >> 24 & 255), U(n2, 255 & e2.total_in), U(n2, e2.total_in >> 8 & 255), U(n2, e2.total_in >> 16 & 255), U(n2, e2.total_in >> 24 & 255)) : (P(n2, e2.adler >>> 16), P(n2, 65535 & e2.adler)), F(e2), 0 < n2.wrap && (n2.wrap = -n2.wrap), 0 !== n2.pending ? m : 1);
        }, r.deflateEnd = function(e2) {
          var t2;
          return e2 && e2.state ? (t2 = e2.state.status) !== C && 69 !== t2 && 73 !== t2 && 91 !== t2 && 103 !== t2 && t2 !== E && 666 !== t2 ? R(e2, _) : (e2.state = null, t2 === E ? R(e2, -3) : m) : _;
        }, r.deflateSetDictionary = function(e2, t2) {
          var r2, n2, i2, s2, a2, o2, h2, u2, l2 = t2.length;
          if (!e2 || !e2.state)
            return _;
          if (2 === (s2 = (r2 = e2.state).wrap) || 1 === s2 && r2.status !== C || r2.lookahead)
            return _;
          for (1 === s2 && (e2.adler = d(e2.adler, t2, l2, 0)), r2.wrap = 0, l2 >= r2.w_size && (0 === s2 && (D(r2.head), r2.strstart = 0, r2.block_start = 0, r2.insert = 0), u2 = new c.Buf8(r2.w_size), c.arraySet(u2, t2, l2 - r2.w_size, r2.w_size, 0), t2 = u2, l2 = r2.w_size), a2 = e2.avail_in, o2 = e2.next_in, h2 = e2.input, e2.avail_in = l2, e2.next_in = 0, e2.input = t2, j(r2); r2.lookahead >= x; ) {
            for (n2 = r2.strstart, i2 = r2.lookahead - (x - 1); r2.ins_h = (r2.ins_h << r2.hash_shift ^ r2.window[n2 + x - 1]) & r2.hash_mask, r2.prev[n2 & r2.w_mask] = r2.head[r2.ins_h], r2.head[r2.ins_h] = n2, n2++, --i2; )
              ;
            r2.strstart = n2, r2.lookahead = x - 1, j(r2);
          }
          return r2.strstart += r2.lookahead, r2.block_start = r2.strstart, r2.insert = r2.lookahead, r2.lookahead = 0, r2.match_length = r2.prev_length = x - 1, r2.match_available = 0, e2.next_in = o2, e2.input = h2, e2.avail_in = a2, r2.wrap = s2, m;
        }, r.deflateInfo = "pako deflate (from Nodeca project)";
      }, { "../utils/common": 41, "./adler32": 43, "./crc32": 45, "./messages": 51, "./trees": 52 }], 47: [function(e, t, r) {
        "use strict";
        t.exports = function() {
          this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = false;
        };
      }, {}], 48: [function(e, t, r) {
        "use strict";
        t.exports = function(e2, t2) {
          var r2, n, i, s, a, o, h, u, l, f, c, d, p, m, _, g, b, v, y, w, k, x, S, z, C;
          r2 = e2.state, n = e2.next_in, z = e2.input, i = n + (e2.avail_in - 5), s = e2.next_out, C = e2.output, a = s - (t2 - e2.avail_out), o = s + (e2.avail_out - 257), h = r2.dmax, u = r2.wsize, l = r2.whave, f = r2.wnext, c = r2.window, d = r2.hold, p = r2.bits, m = r2.lencode, _ = r2.distcode, g = (1 << r2.lenbits) - 1, b = (1 << r2.distbits) - 1;
          e:
            do {
              p < 15 && (d += z[n++] << p, p += 8, d += z[n++] << p, p += 8), v = m[d & g];
              t:
                for (; ; ) {
                  if (d >>>= y = v >>> 24, p -= y, 0 === (y = v >>> 16 & 255))
                    C[s++] = 65535 & v;
                  else {
                    if (!(16 & y)) {
                      if (0 == (64 & y)) {
                        v = m[(65535 & v) + (d & (1 << y) - 1)];
                        continue t;
                      }
                      if (32 & y) {
                        r2.mode = 12;
                        break e;
                      }
                      e2.msg = "invalid literal/length code", r2.mode = 30;
                      break e;
                    }
                    w = 65535 & v, (y &= 15) && (p < y && (d += z[n++] << p, p += 8), w += d & (1 << y) - 1, d >>>= y, p -= y), p < 15 && (d += z[n++] << p, p += 8, d += z[n++] << p, p += 8), v = _[d & b];
                    r:
                      for (; ; ) {
                        if (d >>>= y = v >>> 24, p -= y, !(16 & (y = v >>> 16 & 255))) {
                          if (0 == (64 & y)) {
                            v = _[(65535 & v) + (d & (1 << y) - 1)];
                            continue r;
                          }
                          e2.msg = "invalid distance code", r2.mode = 30;
                          break e;
                        }
                        if (k = 65535 & v, p < (y &= 15) && (d += z[n++] << p, (p += 8) < y && (d += z[n++] << p, p += 8)), h < (k += d & (1 << y) - 1)) {
                          e2.msg = "invalid distance too far back", r2.mode = 30;
                          break e;
                        }
                        if (d >>>= y, p -= y, (y = s - a) < k) {
                          if (l < (y = k - y) && r2.sane) {
                            e2.msg = "invalid distance too far back", r2.mode = 30;
                            break e;
                          }
                          if (S = c, (x = 0) === f) {
                            if (x += u - y, y < w) {
                              for (w -= y; C[s++] = c[x++], --y; )
                                ;
                              x = s - k, S = C;
                            }
                          } else if (f < y) {
                            if (x += u + f - y, (y -= f) < w) {
                              for (w -= y; C[s++] = c[x++], --y; )
                                ;
                              if (x = 0, f < w) {
                                for (w -= y = f; C[s++] = c[x++], --y; )
                                  ;
                                x = s - k, S = C;
                              }
                            }
                          } else if (x += f - y, y < w) {
                            for (w -= y; C[s++] = c[x++], --y; )
                              ;
                            x = s - k, S = C;
                          }
                          for (; 2 < w; )
                            C[s++] = S[x++], C[s++] = S[x++], C[s++] = S[x++], w -= 3;
                          w && (C[s++] = S[x++], 1 < w && (C[s++] = S[x++]));
                        } else {
                          for (x = s - k; C[s++] = C[x++], C[s++] = C[x++], C[s++] = C[x++], 2 < (w -= 3); )
                            ;
                          w && (C[s++] = C[x++], 1 < w && (C[s++] = C[x++]));
                        }
                        break;
                      }
                  }
                  break;
                }
            } while (n < i && s < o);
          n -= w = p >> 3, d &= (1 << (p -= w << 3)) - 1, e2.next_in = n, e2.next_out = s, e2.avail_in = n < i ? i - n + 5 : 5 - (n - i), e2.avail_out = s < o ? o - s + 257 : 257 - (s - o), r2.hold = d, r2.bits = p;
        };
      }, {}], 49: [function(e, t, r) {
        "use strict";
        var I = e("../utils/common"), O = e("./adler32"), B = e("./crc32"), R = e("./inffast"), T = e("./inftrees"), D = 1, F = 2, N = 0, U = -2, P = 1, n = 852, i = 592;
        function L(e2) {
          return (e2 >>> 24 & 255) + (e2 >>> 8 & 65280) + ((65280 & e2) << 8) + ((255 & e2) << 24);
        }
        __name(L, "L");
        function s() {
          this.mode = 0, this.last = false, this.wrap = 0, this.havedict = false, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new I.Buf16(320), this.work = new I.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;
        }
        __name(s, "s");
        function a(e2) {
          var t2;
          return e2 && e2.state ? (t2 = e2.state, e2.total_in = e2.total_out = t2.total = 0, e2.msg = "", t2.wrap && (e2.adler = 1 & t2.wrap), t2.mode = P, t2.last = 0, t2.havedict = 0, t2.dmax = 32768, t2.head = null, t2.hold = 0, t2.bits = 0, t2.lencode = t2.lendyn = new I.Buf32(n), t2.distcode = t2.distdyn = new I.Buf32(i), t2.sane = 1, t2.back = -1, N) : U;
        }
        __name(a, "a");
        function o(e2) {
          var t2;
          return e2 && e2.state ? ((t2 = e2.state).wsize = 0, t2.whave = 0, t2.wnext = 0, a(e2)) : U;
        }
        __name(o, "o");
        function h(e2, t2) {
          var r2, n2;
          return e2 && e2.state ? (n2 = e2.state, t2 < 0 ? (r2 = 0, t2 = -t2) : (r2 = 1 + (t2 >> 4), t2 < 48 && (t2 &= 15)), t2 && (t2 < 8 || 15 < t2) ? U : (null !== n2.window && n2.wbits !== t2 && (n2.window = null), n2.wrap = r2, n2.wbits = t2, o(e2))) : U;
        }
        __name(h, "h");
        function u(e2, t2) {
          var r2, n2;
          return e2 ? (n2 = new s(), (e2.state = n2).window = null, (r2 = h(e2, t2)) !== N && (e2.state = null), r2) : U;
        }
        __name(u, "u");
        var l, f, c = true;
        function j(e2) {
          if (c) {
            var t2;
            for (l = new I.Buf32(512), f = new I.Buf32(32), t2 = 0; t2 < 144; )
              e2.lens[t2++] = 8;
            for (; t2 < 256; )
              e2.lens[t2++] = 9;
            for (; t2 < 280; )
              e2.lens[t2++] = 7;
            for (; t2 < 288; )
              e2.lens[t2++] = 8;
            for (T(D, e2.lens, 0, 288, l, 0, e2.work, { bits: 9 }), t2 = 0; t2 < 32; )
              e2.lens[t2++] = 5;
            T(F, e2.lens, 0, 32, f, 0, e2.work, { bits: 5 }), c = false;
          }
          e2.lencode = l, e2.lenbits = 9, e2.distcode = f, e2.distbits = 5;
        }
        __name(j, "j");
        function Z(e2, t2, r2, n2) {
          var i2, s2 = e2.state;
          return null === s2.window && (s2.wsize = 1 << s2.wbits, s2.wnext = 0, s2.whave = 0, s2.window = new I.Buf8(s2.wsize)), n2 >= s2.wsize ? (I.arraySet(s2.window, t2, r2 - s2.wsize, s2.wsize, 0), s2.wnext = 0, s2.whave = s2.wsize) : (n2 < (i2 = s2.wsize - s2.wnext) && (i2 = n2), I.arraySet(s2.window, t2, r2 - n2, i2, s2.wnext), (n2 -= i2) ? (I.arraySet(s2.window, t2, r2 - n2, n2, 0), s2.wnext = n2, s2.whave = s2.wsize) : (s2.wnext += i2, s2.wnext === s2.wsize && (s2.wnext = 0), s2.whave < s2.wsize && (s2.whave += i2))), 0;
        }
        __name(Z, "Z");
        r.inflateReset = o, r.inflateReset2 = h, r.inflateResetKeep = a, r.inflateInit = function(e2) {
          return u(e2, 15);
        }, r.inflateInit2 = u, r.inflate = function(e2, t2) {
          var r2, n2, i2, s2, a2, o2, h2, u2, l2, f2, c2, d, p, m, _, g, b, v, y, w, k, x, S, z, C = 0, E = new I.Buf8(4), A = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
          if (!e2 || !e2.state || !e2.output || !e2.input && 0 !== e2.avail_in)
            return U;
          12 === (r2 = e2.state).mode && (r2.mode = 13), a2 = e2.next_out, i2 = e2.output, h2 = e2.avail_out, s2 = e2.next_in, n2 = e2.input, o2 = e2.avail_in, u2 = r2.hold, l2 = r2.bits, f2 = o2, c2 = h2, x = N;
          e:
            for (; ; )
              switch (r2.mode) {
                case P:
                  if (0 === r2.wrap) {
                    r2.mode = 13;
                    break;
                  }
                  for (; l2 < 16; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n2[s2++] << l2, l2 += 8;
                  }
                  if (2 & r2.wrap && 35615 === u2) {
                    E[r2.check = 0] = 255 & u2, E[1] = u2 >>> 8 & 255, r2.check = B(r2.check, E, 2, 0), l2 = u2 = 0, r2.mode = 2;
                    break;
                  }
                  if (r2.flags = 0, r2.head && (r2.head.done = false), !(1 & r2.wrap) || (((255 & u2) << 8) + (u2 >> 8)) % 31) {
                    e2.msg = "incorrect header check", r2.mode = 30;
                    break;
                  }
                  if (8 != (15 & u2)) {
                    e2.msg = "unknown compression method", r2.mode = 30;
                    break;
                  }
                  if (l2 -= 4, k = 8 + (15 & (u2 >>>= 4)), 0 === r2.wbits)
                    r2.wbits = k;
                  else if (k > r2.wbits) {
                    e2.msg = "invalid window size", r2.mode = 30;
                    break;
                  }
                  r2.dmax = 1 << k, e2.adler = r2.check = 1, r2.mode = 512 & u2 ? 10 : 12, l2 = u2 = 0;
                  break;
                case 2:
                  for (; l2 < 16; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n2[s2++] << l2, l2 += 8;
                  }
                  if (r2.flags = u2, 8 != (255 & r2.flags)) {
                    e2.msg = "unknown compression method", r2.mode = 30;
                    break;
                  }
                  if (57344 & r2.flags) {
                    e2.msg = "unknown header flags set", r2.mode = 30;
                    break;
                  }
                  r2.head && (r2.head.text = u2 >> 8 & 1), 512 & r2.flags && (E[0] = 255 & u2, E[1] = u2 >>> 8 & 255, r2.check = B(r2.check, E, 2, 0)), l2 = u2 = 0, r2.mode = 3;
                case 3:
                  for (; l2 < 32; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n2[s2++] << l2, l2 += 8;
                  }
                  r2.head && (r2.head.time = u2), 512 & r2.flags && (E[0] = 255 & u2, E[1] = u2 >>> 8 & 255, E[2] = u2 >>> 16 & 255, E[3] = u2 >>> 24 & 255, r2.check = B(r2.check, E, 4, 0)), l2 = u2 = 0, r2.mode = 4;
                case 4:
                  for (; l2 < 16; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n2[s2++] << l2, l2 += 8;
                  }
                  r2.head && (r2.head.xflags = 255 & u2, r2.head.os = u2 >> 8), 512 & r2.flags && (E[0] = 255 & u2, E[1] = u2 >>> 8 & 255, r2.check = B(r2.check, E, 2, 0)), l2 = u2 = 0, r2.mode = 5;
                case 5:
                  if (1024 & r2.flags) {
                    for (; l2 < 16; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n2[s2++] << l2, l2 += 8;
                    }
                    r2.length = u2, r2.head && (r2.head.extra_len = u2), 512 & r2.flags && (E[0] = 255 & u2, E[1] = u2 >>> 8 & 255, r2.check = B(r2.check, E, 2, 0)), l2 = u2 = 0;
                  } else
                    r2.head && (r2.head.extra = null);
                  r2.mode = 6;
                case 6:
                  if (1024 & r2.flags && (o2 < (d = r2.length) && (d = o2), d && (r2.head && (k = r2.head.extra_len - r2.length, r2.head.extra || (r2.head.extra = new Array(r2.head.extra_len)), I.arraySet(r2.head.extra, n2, s2, d, k)), 512 & r2.flags && (r2.check = B(r2.check, n2, d, s2)), o2 -= d, s2 += d, r2.length -= d), r2.length))
                    break e;
                  r2.length = 0, r2.mode = 7;
                case 7:
                  if (2048 & r2.flags) {
                    if (0 === o2)
                      break e;
                    for (d = 0; k = n2[s2 + d++], r2.head && k && r2.length < 65536 && (r2.head.name += String.fromCharCode(k)), k && d < o2; )
                      ;
                    if (512 & r2.flags && (r2.check = B(r2.check, n2, d, s2)), o2 -= d, s2 += d, k)
                      break e;
                  } else
                    r2.head && (r2.head.name = null);
                  r2.length = 0, r2.mode = 8;
                case 8:
                  if (4096 & r2.flags) {
                    if (0 === o2)
                      break e;
                    for (d = 0; k = n2[s2 + d++], r2.head && k && r2.length < 65536 && (r2.head.comment += String.fromCharCode(k)), k && d < o2; )
                      ;
                    if (512 & r2.flags && (r2.check = B(r2.check, n2, d, s2)), o2 -= d, s2 += d, k)
                      break e;
                  } else
                    r2.head && (r2.head.comment = null);
                  r2.mode = 9;
                case 9:
                  if (512 & r2.flags) {
                    for (; l2 < 16; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n2[s2++] << l2, l2 += 8;
                    }
                    if (u2 !== (65535 & r2.check)) {
                      e2.msg = "header crc mismatch", r2.mode = 30;
                      break;
                    }
                    l2 = u2 = 0;
                  }
                  r2.head && (r2.head.hcrc = r2.flags >> 9 & 1, r2.head.done = true), e2.adler = r2.check = 0, r2.mode = 12;
                  break;
                case 10:
                  for (; l2 < 32; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n2[s2++] << l2, l2 += 8;
                  }
                  e2.adler = r2.check = L(u2), l2 = u2 = 0, r2.mode = 11;
                case 11:
                  if (0 === r2.havedict)
                    return e2.next_out = a2, e2.avail_out = h2, e2.next_in = s2, e2.avail_in = o2, r2.hold = u2, r2.bits = l2, 2;
                  e2.adler = r2.check = 1, r2.mode = 12;
                case 12:
                  if (5 === t2 || 6 === t2)
                    break e;
                case 13:
                  if (r2.last) {
                    u2 >>>= 7 & l2, l2 -= 7 & l2, r2.mode = 27;
                    break;
                  }
                  for (; l2 < 3; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n2[s2++] << l2, l2 += 8;
                  }
                  switch (r2.last = 1 & u2, l2 -= 1, 3 & (u2 >>>= 1)) {
                    case 0:
                      r2.mode = 14;
                      break;
                    case 1:
                      if (j(r2), r2.mode = 20, 6 !== t2)
                        break;
                      u2 >>>= 2, l2 -= 2;
                      break e;
                    case 2:
                      r2.mode = 17;
                      break;
                    case 3:
                      e2.msg = "invalid block type", r2.mode = 30;
                  }
                  u2 >>>= 2, l2 -= 2;
                  break;
                case 14:
                  for (u2 >>>= 7 & l2, l2 -= 7 & l2; l2 < 32; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n2[s2++] << l2, l2 += 8;
                  }
                  if ((65535 & u2) != (u2 >>> 16 ^ 65535)) {
                    e2.msg = "invalid stored block lengths", r2.mode = 30;
                    break;
                  }
                  if (r2.length = 65535 & u2, l2 = u2 = 0, r2.mode = 15, 6 === t2)
                    break e;
                case 15:
                  r2.mode = 16;
                case 16:
                  if (d = r2.length) {
                    if (o2 < d && (d = o2), h2 < d && (d = h2), 0 === d)
                      break e;
                    I.arraySet(i2, n2, s2, d, a2), o2 -= d, s2 += d, h2 -= d, a2 += d, r2.length -= d;
                    break;
                  }
                  r2.mode = 12;
                  break;
                case 17:
                  for (; l2 < 14; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n2[s2++] << l2, l2 += 8;
                  }
                  if (r2.nlen = 257 + (31 & u2), u2 >>>= 5, l2 -= 5, r2.ndist = 1 + (31 & u2), u2 >>>= 5, l2 -= 5, r2.ncode = 4 + (15 & u2), u2 >>>= 4, l2 -= 4, 286 < r2.nlen || 30 < r2.ndist) {
                    e2.msg = "too many length or distance symbols", r2.mode = 30;
                    break;
                  }
                  r2.have = 0, r2.mode = 18;
                case 18:
                  for (; r2.have < r2.ncode; ) {
                    for (; l2 < 3; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n2[s2++] << l2, l2 += 8;
                    }
                    r2.lens[A[r2.have++]] = 7 & u2, u2 >>>= 3, l2 -= 3;
                  }
                  for (; r2.have < 19; )
                    r2.lens[A[r2.have++]] = 0;
                  if (r2.lencode = r2.lendyn, r2.lenbits = 7, S = { bits: r2.lenbits }, x = T(0, r2.lens, 0, 19, r2.lencode, 0, r2.work, S), r2.lenbits = S.bits, x) {
                    e2.msg = "invalid code lengths set", r2.mode = 30;
                    break;
                  }
                  r2.have = 0, r2.mode = 19;
                case 19:
                  for (; r2.have < r2.nlen + r2.ndist; ) {
                    for (; g = (C = r2.lencode[u2 & (1 << r2.lenbits) - 1]) >>> 16 & 255, b = 65535 & C, !((_ = C >>> 24) <= l2); ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n2[s2++] << l2, l2 += 8;
                    }
                    if (b < 16)
                      u2 >>>= _, l2 -= _, r2.lens[r2.have++] = b;
                    else {
                      if (16 === b) {
                        for (z = _ + 2; l2 < z; ) {
                          if (0 === o2)
                            break e;
                          o2--, u2 += n2[s2++] << l2, l2 += 8;
                        }
                        if (u2 >>>= _, l2 -= _, 0 === r2.have) {
                          e2.msg = "invalid bit length repeat", r2.mode = 30;
                          break;
                        }
                        k = r2.lens[r2.have - 1], d = 3 + (3 & u2), u2 >>>= 2, l2 -= 2;
                      } else if (17 === b) {
                        for (z = _ + 3; l2 < z; ) {
                          if (0 === o2)
                            break e;
                          o2--, u2 += n2[s2++] << l2, l2 += 8;
                        }
                        l2 -= _, k = 0, d = 3 + (7 & (u2 >>>= _)), u2 >>>= 3, l2 -= 3;
                      } else {
                        for (z = _ + 7; l2 < z; ) {
                          if (0 === o2)
                            break e;
                          o2--, u2 += n2[s2++] << l2, l2 += 8;
                        }
                        l2 -= _, k = 0, d = 11 + (127 & (u2 >>>= _)), u2 >>>= 7, l2 -= 7;
                      }
                      if (r2.have + d > r2.nlen + r2.ndist) {
                        e2.msg = "invalid bit length repeat", r2.mode = 30;
                        break;
                      }
                      for (; d--; )
                        r2.lens[r2.have++] = k;
                    }
                  }
                  if (30 === r2.mode)
                    break;
                  if (0 === r2.lens[256]) {
                    e2.msg = "invalid code -- missing end-of-block", r2.mode = 30;
                    break;
                  }
                  if (r2.lenbits = 9, S = { bits: r2.lenbits }, x = T(D, r2.lens, 0, r2.nlen, r2.lencode, 0, r2.work, S), r2.lenbits = S.bits, x) {
                    e2.msg = "invalid literal/lengths set", r2.mode = 30;
                    break;
                  }
                  if (r2.distbits = 6, r2.distcode = r2.distdyn, S = { bits: r2.distbits }, x = T(F, r2.lens, r2.nlen, r2.ndist, r2.distcode, 0, r2.work, S), r2.distbits = S.bits, x) {
                    e2.msg = "invalid distances set", r2.mode = 30;
                    break;
                  }
                  if (r2.mode = 20, 6 === t2)
                    break e;
                case 20:
                  r2.mode = 21;
                case 21:
                  if (6 <= o2 && 258 <= h2) {
                    e2.next_out = a2, e2.avail_out = h2, e2.next_in = s2, e2.avail_in = o2, r2.hold = u2, r2.bits = l2, R(e2, c2), a2 = e2.next_out, i2 = e2.output, h2 = e2.avail_out, s2 = e2.next_in, n2 = e2.input, o2 = e2.avail_in, u2 = r2.hold, l2 = r2.bits, 12 === r2.mode && (r2.back = -1);
                    break;
                  }
                  for (r2.back = 0; g = (C = r2.lencode[u2 & (1 << r2.lenbits) - 1]) >>> 16 & 255, b = 65535 & C, !((_ = C >>> 24) <= l2); ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n2[s2++] << l2, l2 += 8;
                  }
                  if (g && 0 == (240 & g)) {
                    for (v = _, y = g, w = b; g = (C = r2.lencode[w + ((u2 & (1 << v + y) - 1) >> v)]) >>> 16 & 255, b = 65535 & C, !(v + (_ = C >>> 24) <= l2); ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n2[s2++] << l2, l2 += 8;
                    }
                    u2 >>>= v, l2 -= v, r2.back += v;
                  }
                  if (u2 >>>= _, l2 -= _, r2.back += _, r2.length = b, 0 === g) {
                    r2.mode = 26;
                    break;
                  }
                  if (32 & g) {
                    r2.back = -1, r2.mode = 12;
                    break;
                  }
                  if (64 & g) {
                    e2.msg = "invalid literal/length code", r2.mode = 30;
                    break;
                  }
                  r2.extra = 15 & g, r2.mode = 22;
                case 22:
                  if (r2.extra) {
                    for (z = r2.extra; l2 < z; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n2[s2++] << l2, l2 += 8;
                    }
                    r2.length += u2 & (1 << r2.extra) - 1, u2 >>>= r2.extra, l2 -= r2.extra, r2.back += r2.extra;
                  }
                  r2.was = r2.length, r2.mode = 23;
                case 23:
                  for (; g = (C = r2.distcode[u2 & (1 << r2.distbits) - 1]) >>> 16 & 255, b = 65535 & C, !((_ = C >>> 24) <= l2); ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n2[s2++] << l2, l2 += 8;
                  }
                  if (0 == (240 & g)) {
                    for (v = _, y = g, w = b; g = (C = r2.distcode[w + ((u2 & (1 << v + y) - 1) >> v)]) >>> 16 & 255, b = 65535 & C, !(v + (_ = C >>> 24) <= l2); ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n2[s2++] << l2, l2 += 8;
                    }
                    u2 >>>= v, l2 -= v, r2.back += v;
                  }
                  if (u2 >>>= _, l2 -= _, r2.back += _, 64 & g) {
                    e2.msg = "invalid distance code", r2.mode = 30;
                    break;
                  }
                  r2.offset = b, r2.extra = 15 & g, r2.mode = 24;
                case 24:
                  if (r2.extra) {
                    for (z = r2.extra; l2 < z; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n2[s2++] << l2, l2 += 8;
                    }
                    r2.offset += u2 & (1 << r2.extra) - 1, u2 >>>= r2.extra, l2 -= r2.extra, r2.back += r2.extra;
                  }
                  if (r2.offset > r2.dmax) {
                    e2.msg = "invalid distance too far back", r2.mode = 30;
                    break;
                  }
                  r2.mode = 25;
                case 25:
                  if (0 === h2)
                    break e;
                  if (d = c2 - h2, r2.offset > d) {
                    if ((d = r2.offset - d) > r2.whave && r2.sane) {
                      e2.msg = "invalid distance too far back", r2.mode = 30;
                      break;
                    }
                    p = d > r2.wnext ? (d -= r2.wnext, r2.wsize - d) : r2.wnext - d, d > r2.length && (d = r2.length), m = r2.window;
                  } else
                    m = i2, p = a2 - r2.offset, d = r2.length;
                  for (h2 < d && (d = h2), h2 -= d, r2.length -= d; i2[a2++] = m[p++], --d; )
                    ;
                  0 === r2.length && (r2.mode = 21);
                  break;
                case 26:
                  if (0 === h2)
                    break e;
                  i2[a2++] = r2.length, h2--, r2.mode = 21;
                  break;
                case 27:
                  if (r2.wrap) {
                    for (; l2 < 32; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 |= n2[s2++] << l2, l2 += 8;
                    }
                    if (c2 -= h2, e2.total_out += c2, r2.total += c2, c2 && (e2.adler = r2.check = r2.flags ? B(r2.check, i2, c2, a2 - c2) : O(r2.check, i2, c2, a2 - c2)), c2 = h2, (r2.flags ? u2 : L(u2)) !== r2.check) {
                      e2.msg = "incorrect data check", r2.mode = 30;
                      break;
                    }
                    l2 = u2 = 0;
                  }
                  r2.mode = 28;
                case 28:
                  if (r2.wrap && r2.flags) {
                    for (; l2 < 32; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n2[s2++] << l2, l2 += 8;
                    }
                    if (u2 !== (4294967295 & r2.total)) {
                      e2.msg = "incorrect length check", r2.mode = 30;
                      break;
                    }
                    l2 = u2 = 0;
                  }
                  r2.mode = 29;
                case 29:
                  x = 1;
                  break e;
                case 30:
                  x = -3;
                  break e;
                case 31:
                  return -4;
                case 32:
                default:
                  return U;
              }
          return e2.next_out = a2, e2.avail_out = h2, e2.next_in = s2, e2.avail_in = o2, r2.hold = u2, r2.bits = l2, (r2.wsize || c2 !== e2.avail_out && r2.mode < 30 && (r2.mode < 27 || 4 !== t2)) && Z(e2, e2.output, e2.next_out, c2 - e2.avail_out) ? (r2.mode = 31, -4) : (f2 -= e2.avail_in, c2 -= e2.avail_out, e2.total_in += f2, e2.total_out += c2, r2.total += c2, r2.wrap && c2 && (e2.adler = r2.check = r2.flags ? B(r2.check, i2, c2, e2.next_out - c2) : O(r2.check, i2, c2, e2.next_out - c2)), e2.data_type = r2.bits + (r2.last ? 64 : 0) + (12 === r2.mode ? 128 : 0) + (20 === r2.mode || 15 === r2.mode ? 256 : 0), (0 == f2 && 0 === c2 || 4 === t2) && x === N && (x = -5), x);
        }, r.inflateEnd = function(e2) {
          if (!e2 || !e2.state)
            return U;
          var t2 = e2.state;
          return t2.window && (t2.window = null), e2.state = null, N;
        }, r.inflateGetHeader = function(e2, t2) {
          var r2;
          return e2 && e2.state ? 0 == (2 & (r2 = e2.state).wrap) ? U : ((r2.head = t2).done = false, N) : U;
        }, r.inflateSetDictionary = function(e2, t2) {
          var r2, n2 = t2.length;
          return e2 && e2.state ? 0 !== (r2 = e2.state).wrap && 11 !== r2.mode ? U : 11 === r2.mode && O(1, t2, n2, 0) !== r2.check ? -3 : Z(e2, t2, n2, n2) ? (r2.mode = 31, -4) : (r2.havedict = 1, N) : U;
        }, r.inflateInfo = "pako inflate (from Nodeca project)";
      }, { "../utils/common": 41, "./adler32": 43, "./crc32": 45, "./inffast": 48, "./inftrees": 50 }], 50: [function(e, t, r) {
        "use strict";
        var D = e("../utils/common"), F = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0], N = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78], U = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0], P = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
        t.exports = function(e2, t2, r2, n, i, s, a, o) {
          var h, u, l, f, c, d, p, m, _, g = o.bits, b = 0, v = 0, y = 0, w = 0, k = 0, x = 0, S = 0, z = 0, C = 0, E = 0, A = null, I = 0, O = new D.Buf16(16), B = new D.Buf16(16), R = null, T = 0;
          for (b = 0; b <= 15; b++)
            O[b] = 0;
          for (v = 0; v < n; v++)
            O[t2[r2 + v]]++;
          for (k = g, w = 15; 1 <= w && 0 === O[w]; w--)
            ;
          if (w < k && (k = w), 0 === w)
            return i[s++] = 20971520, i[s++] = 20971520, o.bits = 1, 0;
          for (y = 1; y < w && 0 === O[y]; y++)
            ;
          for (k < y && (k = y), b = z = 1; b <= 15; b++)
            if (z <<= 1, (z -= O[b]) < 0)
              return -1;
          if (0 < z && (0 === e2 || 1 !== w))
            return -1;
          for (B[1] = 0, b = 1; b < 15; b++)
            B[b + 1] = B[b] + O[b];
          for (v = 0; v < n; v++)
            0 !== t2[r2 + v] && (a[B[t2[r2 + v]]++] = v);
          if (d = 0 === e2 ? (A = R = a, 19) : 1 === e2 ? (A = F, I -= 257, R = N, T -= 257, 256) : (A = U, R = P, -1), b = y, c = s, S = v = E = 0, l = -1, f = (C = 1 << (x = k)) - 1, 1 === e2 && 852 < C || 2 === e2 && 592 < C)
            return 1;
          for (; ; ) {
            for (p = b - S, _ = a[v] < d ? (m = 0, a[v]) : a[v] > d ? (m = R[T + a[v]], A[I + a[v]]) : (m = 96, 0), h = 1 << b - S, y = u = 1 << x; i[c + (E >> S) + (u -= h)] = p << 24 | m << 16 | _ | 0, 0 !== u; )
              ;
            for (h = 1 << b - 1; E & h; )
              h >>= 1;
            if (0 !== h ? (E &= h - 1, E += h) : E = 0, v++, 0 == --O[b]) {
              if (b === w)
                break;
              b = t2[r2 + a[v]];
            }
            if (k < b && (E & f) !== l) {
              for (0 === S && (S = k), c += y, z = 1 << (x = b - S); x + S < w && !((z -= O[x + S]) <= 0); )
                x++, z <<= 1;
              if (C += 1 << x, 1 === e2 && 852 < C || 2 === e2 && 592 < C)
                return 1;
              i[l = E & f] = k << 24 | x << 16 | c - s | 0;
            }
          }
          return 0 !== E && (i[c + E] = b - S << 24 | 64 << 16 | 0), o.bits = k, 0;
        };
      }, { "../utils/common": 41 }], 51: [function(e, t, r) {
        "use strict";
        t.exports = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" };
      }, {}], 52: [function(e, t, r) {
        "use strict";
        var i = e("../utils/common"), o = 0, h = 1;
        function n(e2) {
          for (var t2 = e2.length; 0 <= --t2; )
            e2[t2] = 0;
        }
        __name(n, "n");
        var s = 0, a = 29, u = 256, l = u + 1 + a, f = 30, c = 19, _ = 2 * l + 1, g = 15, d = 16, p = 7, m = 256, b = 16, v = 17, y = 18, w = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0], k = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13], x = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7], S = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], z = new Array(2 * (l + 2));
        n(z);
        var C = new Array(2 * f);
        n(C);
        var E = new Array(512);
        n(E);
        var A = new Array(256);
        n(A);
        var I = new Array(a);
        n(I);
        var O, B, R, T = new Array(f);
        function D(e2, t2, r2, n2, i2) {
          this.static_tree = e2, this.extra_bits = t2, this.extra_base = r2, this.elems = n2, this.max_length = i2, this.has_stree = e2 && e2.length;
        }
        __name(D, "D");
        function F(e2, t2) {
          this.dyn_tree = e2, this.max_code = 0, this.stat_desc = t2;
        }
        __name(F, "F");
        function N(e2) {
          return e2 < 256 ? E[e2] : E[256 + (e2 >>> 7)];
        }
        __name(N, "N");
        function U(e2, t2) {
          e2.pending_buf[e2.pending++] = 255 & t2, e2.pending_buf[e2.pending++] = t2 >>> 8 & 255;
        }
        __name(U, "U");
        function P(e2, t2, r2) {
          e2.bi_valid > d - r2 ? (e2.bi_buf |= t2 << e2.bi_valid & 65535, U(e2, e2.bi_buf), e2.bi_buf = t2 >> d - e2.bi_valid, e2.bi_valid += r2 - d) : (e2.bi_buf |= t2 << e2.bi_valid & 65535, e2.bi_valid += r2);
        }
        __name(P, "P");
        function L(e2, t2, r2) {
          P(e2, r2[2 * t2], r2[2 * t2 + 1]);
        }
        __name(L, "L");
        function j(e2, t2) {
          for (var r2 = 0; r2 |= 1 & e2, e2 >>>= 1, r2 <<= 1, 0 < --t2; )
            ;
          return r2 >>> 1;
        }
        __name(j, "j");
        function Z(e2, t2, r2) {
          var n2, i2, s2 = new Array(g + 1), a2 = 0;
          for (n2 = 1; n2 <= g; n2++)
            s2[n2] = a2 = a2 + r2[n2 - 1] << 1;
          for (i2 = 0; i2 <= t2; i2++) {
            var o2 = e2[2 * i2 + 1];
            0 !== o2 && (e2[2 * i2] = j(s2[o2]++, o2));
          }
        }
        __name(Z, "Z");
        function W(e2) {
          var t2;
          for (t2 = 0; t2 < l; t2++)
            e2.dyn_ltree[2 * t2] = 0;
          for (t2 = 0; t2 < f; t2++)
            e2.dyn_dtree[2 * t2] = 0;
          for (t2 = 0; t2 < c; t2++)
            e2.bl_tree[2 * t2] = 0;
          e2.dyn_ltree[2 * m] = 1, e2.opt_len = e2.static_len = 0, e2.last_lit = e2.matches = 0;
        }
        __name(W, "W");
        function M(e2) {
          8 < e2.bi_valid ? U(e2, e2.bi_buf) : 0 < e2.bi_valid && (e2.pending_buf[e2.pending++] = e2.bi_buf), e2.bi_buf = 0, e2.bi_valid = 0;
        }
        __name(M, "M");
        function H(e2, t2, r2, n2) {
          var i2 = 2 * t2, s2 = 2 * r2;
          return e2[i2] < e2[s2] || e2[i2] === e2[s2] && n2[t2] <= n2[r2];
        }
        __name(H, "H");
        function G(e2, t2, r2) {
          for (var n2 = e2.heap[r2], i2 = r2 << 1; i2 <= e2.heap_len && (i2 < e2.heap_len && H(t2, e2.heap[i2 + 1], e2.heap[i2], e2.depth) && i2++, !H(t2, n2, e2.heap[i2], e2.depth)); )
            e2.heap[r2] = e2.heap[i2], r2 = i2, i2 <<= 1;
          e2.heap[r2] = n2;
        }
        __name(G, "G");
        function K(e2, t2, r2) {
          var n2, i2, s2, a2, o2 = 0;
          if (0 !== e2.last_lit)
            for (; n2 = e2.pending_buf[e2.d_buf + 2 * o2] << 8 | e2.pending_buf[e2.d_buf + 2 * o2 + 1], i2 = e2.pending_buf[e2.l_buf + o2], o2++, 0 === n2 ? L(e2, i2, t2) : (L(e2, (s2 = A[i2]) + u + 1, t2), 0 !== (a2 = w[s2]) && P(e2, i2 -= I[s2], a2), L(e2, s2 = N(--n2), r2), 0 !== (a2 = k[s2]) && P(e2, n2 -= T[s2], a2)), o2 < e2.last_lit; )
              ;
          L(e2, m, t2);
        }
        __name(K, "K");
        function Y(e2, t2) {
          var r2, n2, i2, s2 = t2.dyn_tree, a2 = t2.stat_desc.static_tree, o2 = t2.stat_desc.has_stree, h2 = t2.stat_desc.elems, u2 = -1;
          for (e2.heap_len = 0, e2.heap_max = _, r2 = 0; r2 < h2; r2++)
            0 !== s2[2 * r2] ? (e2.heap[++e2.heap_len] = u2 = r2, e2.depth[r2] = 0) : s2[2 * r2 + 1] = 0;
          for (; e2.heap_len < 2; )
            s2[2 * (i2 = e2.heap[++e2.heap_len] = u2 < 2 ? ++u2 : 0)] = 1, e2.depth[i2] = 0, e2.opt_len--, o2 && (e2.static_len -= a2[2 * i2 + 1]);
          for (t2.max_code = u2, r2 = e2.heap_len >> 1; 1 <= r2; r2--)
            G(e2, s2, r2);
          for (i2 = h2; r2 = e2.heap[1], e2.heap[1] = e2.heap[e2.heap_len--], G(e2, s2, 1), n2 = e2.heap[1], e2.heap[--e2.heap_max] = r2, e2.heap[--e2.heap_max] = n2, s2[2 * i2] = s2[2 * r2] + s2[2 * n2], e2.depth[i2] = (e2.depth[r2] >= e2.depth[n2] ? e2.depth[r2] : e2.depth[n2]) + 1, s2[2 * r2 + 1] = s2[2 * n2 + 1] = i2, e2.heap[1] = i2++, G(e2, s2, 1), 2 <= e2.heap_len; )
            ;
          e2.heap[--e2.heap_max] = e2.heap[1], function(e3, t3) {
            var r3, n3, i3, s3, a3, o3, h3 = t3.dyn_tree, u3 = t3.max_code, l2 = t3.stat_desc.static_tree, f2 = t3.stat_desc.has_stree, c2 = t3.stat_desc.extra_bits, d2 = t3.stat_desc.extra_base, p2 = t3.stat_desc.max_length, m2 = 0;
            for (s3 = 0; s3 <= g; s3++)
              e3.bl_count[s3] = 0;
            for (h3[2 * e3.heap[e3.heap_max] + 1] = 0, r3 = e3.heap_max + 1; r3 < _; r3++)
              p2 < (s3 = h3[2 * h3[2 * (n3 = e3.heap[r3]) + 1] + 1] + 1) && (s3 = p2, m2++), h3[2 * n3 + 1] = s3, u3 < n3 || (e3.bl_count[s3]++, a3 = 0, d2 <= n3 && (a3 = c2[n3 - d2]), o3 = h3[2 * n3], e3.opt_len += o3 * (s3 + a3), f2 && (e3.static_len += o3 * (l2[2 * n3 + 1] + a3)));
            if (0 !== m2) {
              do {
                for (s3 = p2 - 1; 0 === e3.bl_count[s3]; )
                  s3--;
                e3.bl_count[s3]--, e3.bl_count[s3 + 1] += 2, e3.bl_count[p2]--, m2 -= 2;
              } while (0 < m2);
              for (s3 = p2; 0 !== s3; s3--)
                for (n3 = e3.bl_count[s3]; 0 !== n3; )
                  u3 < (i3 = e3.heap[--r3]) || (h3[2 * i3 + 1] !== s3 && (e3.opt_len += (s3 - h3[2 * i3 + 1]) * h3[2 * i3], h3[2 * i3 + 1] = s3), n3--);
            }
          }(e2, t2), Z(s2, u2, e2.bl_count);
        }
        __name(Y, "Y");
        function X(e2, t2, r2) {
          var n2, i2, s2 = -1, a2 = t2[1], o2 = 0, h2 = 7, u2 = 4;
          for (0 === a2 && (h2 = 138, u2 = 3), t2[2 * (r2 + 1) + 1] = 65535, n2 = 0; n2 <= r2; n2++)
            i2 = a2, a2 = t2[2 * (n2 + 1) + 1], ++o2 < h2 && i2 === a2 || (o2 < u2 ? e2.bl_tree[2 * i2] += o2 : 0 !== i2 ? (i2 !== s2 && e2.bl_tree[2 * i2]++, e2.bl_tree[2 * b]++) : o2 <= 10 ? e2.bl_tree[2 * v]++ : e2.bl_tree[2 * y]++, s2 = i2, u2 = (o2 = 0) === a2 ? (h2 = 138, 3) : i2 === a2 ? (h2 = 6, 3) : (h2 = 7, 4));
        }
        __name(X, "X");
        function V(e2, t2, r2) {
          var n2, i2, s2 = -1, a2 = t2[1], o2 = 0, h2 = 7, u2 = 4;
          for (0 === a2 && (h2 = 138, u2 = 3), n2 = 0; n2 <= r2; n2++)
            if (i2 = a2, a2 = t2[2 * (n2 + 1) + 1], !(++o2 < h2 && i2 === a2)) {
              if (o2 < u2)
                for (; L(e2, i2, e2.bl_tree), 0 != --o2; )
                  ;
              else
                0 !== i2 ? (i2 !== s2 && (L(e2, i2, e2.bl_tree), o2--), L(e2, b, e2.bl_tree), P(e2, o2 - 3, 2)) : o2 <= 10 ? (L(e2, v, e2.bl_tree), P(e2, o2 - 3, 3)) : (L(e2, y, e2.bl_tree), P(e2, o2 - 11, 7));
              s2 = i2, u2 = (o2 = 0) === a2 ? (h2 = 138, 3) : i2 === a2 ? (h2 = 6, 3) : (h2 = 7, 4);
            }
        }
        __name(V, "V");
        n(T);
        var q = false;
        function J(e2, t2, r2, n2) {
          P(e2, (s << 1) + (n2 ? 1 : 0), 3), function(e3, t3, r3, n3) {
            M(e3), n3 && (U(e3, r3), U(e3, ~r3)), i.arraySet(e3.pending_buf, e3.window, t3, r3, e3.pending), e3.pending += r3;
          }(e2, t2, r2, true);
        }
        __name(J, "J");
        r._tr_init = function(e2) {
          q || (function() {
            var e3, t2, r2, n2, i2, s2 = new Array(g + 1);
            for (n2 = r2 = 0; n2 < a - 1; n2++)
              for (I[n2] = r2, e3 = 0; e3 < 1 << w[n2]; e3++)
                A[r2++] = n2;
            for (A[r2 - 1] = n2, n2 = i2 = 0; n2 < 16; n2++)
              for (T[n2] = i2, e3 = 0; e3 < 1 << k[n2]; e3++)
                E[i2++] = n2;
            for (i2 >>= 7; n2 < f; n2++)
              for (T[n2] = i2 << 7, e3 = 0; e3 < 1 << k[n2] - 7; e3++)
                E[256 + i2++] = n2;
            for (t2 = 0; t2 <= g; t2++)
              s2[t2] = 0;
            for (e3 = 0; e3 <= 143; )
              z[2 * e3 + 1] = 8, e3++, s2[8]++;
            for (; e3 <= 255; )
              z[2 * e3 + 1] = 9, e3++, s2[9]++;
            for (; e3 <= 279; )
              z[2 * e3 + 1] = 7, e3++, s2[7]++;
            for (; e3 <= 287; )
              z[2 * e3 + 1] = 8, e3++, s2[8]++;
            for (Z(z, l + 1, s2), e3 = 0; e3 < f; e3++)
              C[2 * e3 + 1] = 5, C[2 * e3] = j(e3, 5);
            O = new D(z, w, u + 1, l, g), B = new D(C, k, 0, f, g), R = new D(new Array(0), x, 0, c, p);
          }(), q = true), e2.l_desc = new F(e2.dyn_ltree, O), e2.d_desc = new F(e2.dyn_dtree, B), e2.bl_desc = new F(e2.bl_tree, R), e2.bi_buf = 0, e2.bi_valid = 0, W(e2);
        }, r._tr_stored_block = J, r._tr_flush_block = function(e2, t2, r2, n2) {
          var i2, s2, a2 = 0;
          0 < e2.level ? (2 === e2.strm.data_type && (e2.strm.data_type = function(e3) {
            var t3, r3 = 4093624447;
            for (t3 = 0; t3 <= 31; t3++, r3 >>>= 1)
              if (1 & r3 && 0 !== e3.dyn_ltree[2 * t3])
                return o;
            if (0 !== e3.dyn_ltree[18] || 0 !== e3.dyn_ltree[20] || 0 !== e3.dyn_ltree[26])
              return h;
            for (t3 = 32; t3 < u; t3++)
              if (0 !== e3.dyn_ltree[2 * t3])
                return h;
            return o;
          }(e2)), Y(e2, e2.l_desc), Y(e2, e2.d_desc), a2 = function(e3) {
            var t3;
            for (X(e3, e3.dyn_ltree, e3.l_desc.max_code), X(e3, e3.dyn_dtree, e3.d_desc.max_code), Y(e3, e3.bl_desc), t3 = c - 1; 3 <= t3 && 0 === e3.bl_tree[2 * S[t3] + 1]; t3--)
              ;
            return e3.opt_len += 3 * (t3 + 1) + 5 + 5 + 4, t3;
          }(e2), i2 = e2.opt_len + 3 + 7 >>> 3, (s2 = e2.static_len + 3 + 7 >>> 3) <= i2 && (i2 = s2)) : i2 = s2 = r2 + 5, r2 + 4 <= i2 && -1 !== t2 ? J(e2, t2, r2, n2) : 4 === e2.strategy || s2 === i2 ? (P(e2, 2 + (n2 ? 1 : 0), 3), K(e2, z, C)) : (P(e2, 4 + (n2 ? 1 : 0), 3), function(e3, t3, r3, n3) {
            var i3;
            for (P(e3, t3 - 257, 5), P(e3, r3 - 1, 5), P(e3, n3 - 4, 4), i3 = 0; i3 < n3; i3++)
              P(e3, e3.bl_tree[2 * S[i3] + 1], 3);
            V(e3, e3.dyn_ltree, t3 - 1), V(e3, e3.dyn_dtree, r3 - 1);
          }(e2, e2.l_desc.max_code + 1, e2.d_desc.max_code + 1, a2 + 1), K(e2, e2.dyn_ltree, e2.dyn_dtree)), W(e2), n2 && M(e2);
        }, r._tr_tally = function(e2, t2, r2) {
          return e2.pending_buf[e2.d_buf + 2 * e2.last_lit] = t2 >>> 8 & 255, e2.pending_buf[e2.d_buf + 2 * e2.last_lit + 1] = 255 & t2, e2.pending_buf[e2.l_buf + e2.last_lit] = 255 & r2, e2.last_lit++, 0 === t2 ? e2.dyn_ltree[2 * r2]++ : (e2.matches++, t2--, e2.dyn_ltree[2 * (A[r2] + u + 1)]++, e2.dyn_dtree[2 * N(t2)]++), e2.last_lit === e2.lit_bufsize - 1;
        }, r._tr_align = function(e2) {
          P(e2, 2, 3), L(e2, m, z), function(e3) {
            16 === e3.bi_valid ? (U(e3, e3.bi_buf), e3.bi_buf = 0, e3.bi_valid = 0) : 8 <= e3.bi_valid && (e3.pending_buf[e3.pending++] = 255 & e3.bi_buf, e3.bi_buf >>= 8, e3.bi_valid -= 8);
          }(e2);
        };
      }, { "../utils/common": 41 }], 53: [function(e, t, r) {
        "use strict";
        t.exports = function() {
          this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
        };
      }, {}], 54: [function(e, t, r) {
        (function(e2) {
          !function(r2, n) {
            "use strict";
            if (!r2.setImmediate) {
              var i, s, t2, a, o = 1, h = {}, u = false, l = r2.document, e3 = Object.getPrototypeOf && Object.getPrototypeOf(r2);
              e3 = e3 && e3.setTimeout ? e3 : r2, i = "[object process]" === {}.toString.call(r2.process) ? function(e4) {
                process.nextTick(function() {
                  c(e4);
                });
              } : function() {
                if (r2.postMessage && !r2.importScripts) {
                  var e4 = true, t3 = r2.onmessage;
                  return r2.onmessage = function() {
                    e4 = false;
                  }, r2.postMessage("", "*"), r2.onmessage = t3, e4;
                }
              }() ? (a = "setImmediate$" + Math.random() + "$", r2.addEventListener ? r2.addEventListener("message", d, false) : r2.attachEvent("onmessage", d), function(e4) {
                r2.postMessage(a + e4, "*");
              }) : r2.MessageChannel ? ((t2 = new MessageChannel()).port1.onmessage = function(e4) {
                c(e4.data);
              }, function(e4) {
                t2.port2.postMessage(e4);
              }) : l && "onreadystatechange" in l.createElement("script") ? (s = l.documentElement, function(e4) {
                var t3 = l.createElement("script");
                t3.onreadystatechange = function() {
                  c(e4), t3.onreadystatechange = null, s.removeChild(t3), t3 = null;
                }, s.appendChild(t3);
              }) : function(e4) {
                setTimeout(c, 0, e4);
              }, e3.setImmediate = function(e4) {
                "function" != typeof e4 && (e4 = new Function("" + e4));
                for (var t3 = new Array(arguments.length - 1), r3 = 0; r3 < t3.length; r3++)
                  t3[r3] = arguments[r3 + 1];
                var n2 = { callback: e4, args: t3 };
                return h[o] = n2, i(o), o++;
              }, e3.clearImmediate = f;
            }
            function f(e4) {
              delete h[e4];
            }
            __name(f, "f");
            function c(e4) {
              if (u)
                setTimeout(c, 0, e4);
              else {
                var t3 = h[e4];
                if (t3) {
                  u = true;
                  try {
                    !function(e5) {
                      var t4 = e5.callback, r3 = e5.args;
                      switch (r3.length) {
                        case 0:
                          t4();
                          break;
                        case 1:
                          t4(r3[0]);
                          break;
                        case 2:
                          t4(r3[0], r3[1]);
                          break;
                        case 3:
                          t4(r3[0], r3[1], r3[2]);
                          break;
                        default:
                          t4.apply(n, r3);
                      }
                    }(t3);
                  } finally {
                    f(e4), u = false;
                  }
                }
              }
            }
            __name(c, "c");
            function d(e4) {
              e4.source === r2 && "string" == typeof e4.data && 0 === e4.data.indexOf(a) && c(+e4.data.slice(a.length));
            }
            __name(d, "d");
          }("undefined" == typeof self ? void 0 === e2 ? this : e2 : self);
        }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
      }, {}] }, {}, [10])(10);
    });
  }
});

// src/dialogs.ts
function displayModal(app, title, paragraphs, note) {
  const modal = new import_obsidian14.Modal(app);
  modal.contentEl.addClass("nexus-ai-chat-importer-modal");
  const titleEl = modal.contentEl.createEl("h2", {
    text: title,
    cls: "modal-title"
  });
  const contentContainer = modal.contentEl.createDiv({ cls: "modal-content" });
  paragraphs.forEach((paragraph, paragraphIndex) => {
    const paragraphWithSpacing = paragraph + "\n\n";
    const paragraphDiv = contentContainer.createDiv({ cls: "modal-paragraph" });
    const sections = paragraphWithSpacing.split("\n\n").filter((section) => section.trim() !== "");
    sections.forEach((section, sectionIndex) => {
      const sectionDiv = paragraphDiv.createDiv({ cls: "modal-section" });
      const lines = section.split("\n").filter((line) => line.trim() !== "");
      lines.forEach((line) => {
        const lineDiv = sectionDiv.createDiv({ cls: "modal-line" });
        let htmlContent = line.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" class="external-link" target="_blank">$1</a>').replace(/\*\*([^*]+)\*\*/g, "<strong>$1</strong>").replace(/\*([^*]+)\*/g, "<em>$1</em>");
        if (line.trim().endsWith(":") && line.trim().length < 30) {
          lineDiv.innerHTML = `<strong class="section-header">${htmlContent}</strong>`;
        } else if (line.trim().startsWith("\u2022") || line.trim().startsWith("-")) {
          lineDiv.innerHTML = htmlContent;
          lineDiv.addClass("modal-list-item");
        } else {
          lineDiv.innerHTML = htmlContent;
        }
      });
      if (sectionIndex < sections.length - 1) {
        paragraphDiv.createDiv({ cls: "modal-section-break" });
      }
    });
  });
  if (note) {
    contentContainer.createDiv({ cls: "modal-major-break" });
    const noteDiv = contentContainer.createDiv({ cls: "modal-note" });
    let noteContent = note.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" class="external-link" target="_blank">$1</a>').replace(/\*\*([^*]+)\*\*/g, "<strong>$1</strong>").replace(/\*([^*]+)\*/g, "<em>$1</em>");
    noteDiv.innerHTML = noteContent;
  }
  return modal;
}
function addButtons(modal, type, resolve, customLabels) {
  const buttonContainer = modal.contentEl.createDiv({ cls: "modal-button-container" });
  if (type === "information") {
    const buttonLabel = (customLabels == null ? void 0 : customLabels.button1) || "Understood";
    const button = buttonContainer.createEl("button", {
      text: buttonLabel,
      cls: "mod-cta"
      // Obsidian's primary button class
    });
    button.addEventListener("click", () => {
      modal.close();
      resolve(true);
    });
  } else {
    const noLabel = (customLabels == null ? void 0 : customLabels.button2) || "No";
    const yesLabel = (customLabels == null ? void 0 : customLabels.button1) || "Yes";
    const noButton = buttonContainer.createEl("button", {
      text: noLabel,
      cls: "mod-muted"
      // Obsidian's secondary button class
    });
    noButton.addEventListener("click", () => {
      modal.close();
      resolve(false);
    });
    const yesButton = buttonContainer.createEl("button", {
      text: yesLabel,
      cls: "mod-cta"
      // Obsidian's primary button class
    });
    yesButton.addEventListener("click", () => {
      modal.close();
      resolve(true);
    });
  }
}
async function showDialog(app, type, title, paragraphs, note, customLabels) {
  return new Promise((resolve) => {
    const modal = displayModal(app, title, paragraphs, note);
    addButtons(modal, type, resolve, customLabels);
    modal.open();
  });
}
var import_obsidian14;
var init_dialogs = __esm({
  "src/dialogs.ts"() {
    "use strict";
    import_obsidian14 = require("obsidian");
    __name(displayModal, "displayModal");
    __name(addButtons, "addButtons");
    __name(showDialog, "showDialog");
  }
});

// src/utils/date-parser.ts
var import_obsidian19, DateParser;
var init_date_parser = __esm({
  "src/utils/date-parser.ts"() {
    "use strict";
    import_obsidian19 = require("obsidian");
    DateParser = class {
      /**
       * Parse a date string with automatic format detection
       * Returns Unix timestamp (seconds) or 0 if parsing fails
       * @param dateStr - Date string to parse
       * @param contextId - Optional context identifier for logging (e.g., "Artifact abc123_v1", "Conversation xyz")
       */
      static parseDate(dateStr, contextId) {
        const ctx = contextId ? `[${contextId}] ` : "";
        if (!dateStr || typeof dateStr !== "string") {
          return 0;
        }
        try {
          const isoDate = (0, import_obsidian19.moment)(dateStr, import_obsidian19.moment.ISO_8601, true);
          if (isoDate.isValid()) {
            return isoDate.unix();
          }
          const format = this.detectFormat(dateStr);
          if (!format) {
            logger.warn(`${ctx}parseDate - FAILED: could not detect format`);
            return 0;
          }
          const parsed = this.parseWithFormat(dateStr, format);
          if (parsed === 0) {
            logger.warn(`${ctx}parseDate - FAILED: parsing returned 0`);
          }
          return parsed;
        } catch (error) {
          logger.warn(`${ctx}parseDate - FAILED: exception:`, error);
          return 0;
        }
      }
      /**
       * Parse a date string with a forced component order (YMD/DMY/MDY)
       * Keeps other parts auto-detected from the string (separator, time format, seconds)
       */
      static parseDateWithOrder(dateStr, order) {
        if (!dateStr || typeof dateStr !== "string")
          return 0;
        const isoDate = (0, import_obsidian19.moment)(dateStr, import_obsidian19.moment.ISO_8601, true);
        if (isoDate.isValid())
          return isoDate.unix();
        const detected = this.detectFormat(dateStr);
        if (!detected)
          return 0;
        const forced = { ...detected, order };
        return this.parseWithFormat(dateStr, forced);
      }
      /**
       * Convert a date string to ISO 8601 with a forced component order
       */
      static convertToISO8601WithOrder(dateStr, order) {
        const unixTime = this.parseDateWithOrder(dateStr, order);
        if (unixTime === 0)
          return null;
        return new Date(unixTime * 1e3).toISOString();
      }
      /**
       * Detect date format from a single date string
       */
      static detectFormat(dateStr) {
        if (dateStr.match(/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}(:\d{2})?(\.\d{3})?Z?$/)) {
          return {
            separator: "-",
            order: "YMD",
            timeFormat: "24h",
            hasSeconds: dateStr.includes(":") && dateStr.split(":").length >= 3
          };
        }
        let separator = "/";
        if (dateStr.includes("-") && !dateStr.match(/^\d{4}-\d{2}-\d{2}/)) {
          separator = "-";
        } else if (dateStr.includes(".")) {
          separator = ".";
        } else if (dateStr.includes("/")) {
          separator = "/";
        } else {
          return null;
        }
        const hasAMPM = /\s(AM|PM)$/i.test(dateStr);
        const timeFormat = hasAMPM ? "12h" : "24h";
        const timeMatch = dateStr.match(/\s(\d{1,2}:\d{2}(?::\d{2})?(?:\s?[AP]M)?)/i);
        const timePart = timeMatch ? timeMatch[1] : "";
        const hasSeconds = timePart.split(":").length >= 3;
        const datePart = dateStr.split(/\s/)[0];
        const parts = datePart.split(separator).map((p) => parseInt(p, 10));
        if (parts.length !== 3 || parts.some(isNaN)) {
          return null;
        }
        const order = this.detectOrder(parts, separator, hasAMPM);
        return {
          separator,
          order,
          timeFormat,
          hasSeconds
        };
      }
      /**
       * Detect date component order (YMD, DMY, MDY)
       * @param parts - Date parts [first, second, third]
       * @param separator - Date separator ('/', '-', '.')
       * @param hasAMPM - Whether the time uses AM/PM format (hint for US format)
       */
      static detectOrder(parts, separator, hasAMPM) {
        const [first, second, third] = parts;
        if (first > 31) {
          return "YMD";
        }
        if (third > 31) {
          if (first > 12) {
            return "DMY";
          }
          if (second > 12) {
            return "MDY";
          }
          if (separator === ".") {
            return "DMY";
          }
          if (hasAMPM) {
            return "MDY";
          }
          return "DMY";
        }
        if (first > 12) {
          return "DMY";
        }
        if (second > 12) {
          return "MDY";
        }
        if (separator === "-") {
          return "YMD";
        } else if (separator === ".") {
          return "DMY";
        } else if (hasAMPM) {
          return "MDY";
        }
        return "DMY";
      }
      /**
       * Parse date string with detected format
       */
      static parseWithFormat(dateStr, format) {
        let datePattern;
        switch (format.order) {
          case "YMD":
            datePattern = format.separator === "-" ? "YYYY-MM-DD" : "YYYY/MM/DD";
            break;
          case "DMY":
            datePattern = format.separator === "." ? "DD.MM.YYYY" : "DD/MM/YYYY";
            break;
          case "MDY":
            datePattern = "MM/DD/YYYY";
            break;
        }
        const timePattern = format.timeFormat === "12h" ? format.hasSeconds ? "h:mm:ss A" : "h:mm A" : format.hasSeconds ? "HH:mm:ss" : "HH:mm";
        const patterns = [
          `${datePattern} ${timePattern}`,
          // Standard space
          `${datePattern}[T]${timePattern}`,
          // ISO 8601 T
          `${datePattern}[ at ]${timePattern}`
          // English "at"
        ];
        for (const pattern of patterns) {
          const date = (0, import_obsidian19.moment)(dateStr, pattern, true);
          if (date.isValid()) {
            return date.unix();
          }
        }
        if (format.hasSeconds) {
          const timePatternNoSec = format.timeFormat === "12h" ? "h:mm A" : "HH:mm";
          const fallbackPatterns = [
            `${datePattern} ${timePatternNoSec}`,
            `${datePattern}[T]${timePatternNoSec}`,
            `${datePattern}[ at ]${timePatternNoSec}`
          ];
          for (const pattern of fallbackPatterns) {
            const date = (0, import_obsidian19.moment)(dateStr, pattern, true);
            if (date.isValid()) {
              return date.unix();
            }
          }
        }
        return 0;
      }
      /**
       * Convert any date format to ISO 8601
       * Returns ISO 8601 string or null if parsing fails
       */
      static convertToISO8601(dateStr) {
        const unixTime = this.parseDate(dateStr);
        if (unixTime === 0) {
          logger.warn(`convertToISO8601 - parsing returned 0`);
          return null;
        }
        return new Date(unixTime * 1e3).toISOString();
      }
      /**
       * Detect format from multiple date samples (more reliable)
       * Used for batch processing (e.g., upgrade operations)
       */
      static detectFormatFromSamples(dates) {
        if (!dates || dates.length === 0) {
          return null;
        }
        for (const dateStr of dates.slice(0, 20)) {
          const format = this.detectFormat(dateStr);
          if (format) {
            const datePart = dateStr.split(/\s/)[0];
            const parts = datePart.split(format.separator).map((p) => parseInt(p, 10));
            if (parts.some((p) => p > 12)) {
              return format;
            }
          }
        }
        return this.detectFormat(dates[0]);
      }
    };
    __name(DateParser, "DateParser");
  }
});

// src/upgrade/utils/version-utils.ts
var VersionUtils;
var init_version_utils = __esm({
  "src/upgrade/utils/version-utils.ts"() {
    "use strict";
    VersionUtils = class {
      /**
       * Parse version string into components
       */
      static parseVersion(version) {
        const parts = version.split(".").map(Number);
        return {
          major: parts[0] || 0,
          minor: parts[1] || 0,
          patch: parts[2] || 0,
          original: version
        };
      }
      /**
       * Compare two versions
       * Returns: -1 (v1 < v2), 0 (v1 = v2), 1 (v1 > v2)
       */
      static compareVersions(version1, version2) {
        const v1 = this.parseVersion(version1);
        const v2 = this.parseVersion(version2);
        if (v1.major !== v2.major)
          return v1.major - v2.major;
        if (v1.minor !== v2.minor)
          return v1.minor - v2.minor;
        return v1.patch - v2.patch;
      }
      /**
       * Check if version is in range [min, max]
       */
      static isInRange(version, minVersion, maxVersion) {
        const isAboveMin = this.compareVersions(version, minVersion) >= 0;
        if (!maxVersion)
          return isAboveMin;
        const isBelowMax = this.compareVersions(version, maxVersion) <= 0;
        return isAboveMin && isBelowMax;
      }
      /**
       * Check if migration should run based on version range
       */
      static shouldRunMigration(fromVersion, toVersion, migrationFromVersion, migrationToVersion) {
        const userFrom = this.parseVersion(fromVersion);
        const userTo = this.parseVersion(toVersion);
        const migrationFrom = this.parseVersion(migrationFromVersion);
        const migrationTo = migrationToVersion ? this.parseVersion(migrationToVersion) : userTo;
        const wasInRange = this.compareVersions(fromVersion, migrationFromVersion) >= 0;
        const isUpgradingTo = this.compareVersions(toVersion, migrationTo.original) >= 0;
        return wasInRange && isUpgradingTo;
      }
      /**
       * Get all versions between two versions (for sequential migrations)
       */
      static getVersionsInRange(fromVersion, toVersion, availableVersions) {
        return availableVersions.filter(
          (v) => this.compareVersions(v, fromVersion) > 0 && this.compareVersions(v, toVersion) <= 0
        ).sort((a, b) => this.compareVersions(a, b));
      }
      /**
       * Format version for display
       */
      static formatVersion(version) {
        const parsed = this.parseVersion(version);
        return `v${parsed.major}.${parsed.minor}.${parsed.patch}`;
      }
    };
    __name(VersionUtils, "VersionUtils");
  }
});

// src/upgrade/upgrade-interface.ts
var logger4, UpgradeOperation, VersionUpgrade;
var init_upgrade_interface = __esm({
  "src/upgrade/upgrade-interface.ts"() {
    "use strict";
    init_version_utils();
    init_dialogs();
    init_logger();
    logger4 = new Logger();
    UpgradeOperation = class {
      /**
       * Check if operation can run (prerequisites)
       */
      async canRun(context) {
        return true;
      }
      /**
       * Verify operation completed successfully
       */
      async verify(context) {
        return true;
      }
    };
    __name(UpgradeOperation, "UpgradeOperation");
    VersionUpgrade = class {
      /**
       * Check if this upgrade should run for the version range
       */
      shouldRun(fromVersion, toVersion) {
        return VersionUtils.compareVersions(toVersion, this.version) >= 0 && VersionUtils.compareVersions(fromVersion, this.version) < 0;
      }
      /**
       * Execute all automatic operations
       */
      async executeAutomaticOperations(context) {
        const results = [];
        let allSuccess = true;
        for (const operation of this.automaticOperations) {
          try {
            if (await this.isOperationCompleted(operation.id, context)) {
              results.push({
                operationId: operation.id,
                result: { success: true, message: "Already completed" }
              });
              continue;
            }
            if (!await operation.canRun(context)) {
              results.push({
                operationId: operation.id,
                result: { success: false, message: "Prerequisites not met" }
              });
              allSuccess = false;
              continue;
            }
            const result = await operation.execute(context);
            results.push({ operationId: operation.id, result });
            if (result.success) {
              await this.markOperationCompleted(operation.id, context);
            } else {
              allSuccess = false;
            }
          } catch (error) {
            const errorResult = {
              success: false,
              message: `Operation failed: ${error}`,
              details: { error: String(error) }
            };
            results.push({ operationId: operation.id, result: errorResult });
            allSuccess = false;
          }
        }
        return { success: allSuccess, results };
      }
      /**
       * Show manual operations dialog and execute selected ones
       */
      async showManualOperationsDialog(context) {
        const availableOperations = [];
        for (const operation of this.manualOperations) {
          if (!await this.isOperationCompleted(operation.id, context) && await operation.canRun(context)) {
            availableOperations.push(operation);
          }
        }
        if (availableOperations.length === 0) {
          return { success: true, results: [] };
        }
        const paragraphs = [
          `**Version ${this.version} Manual Operations**`,
          "The following optional operations are available:",
          "",
          ...availableOperations.map((op) => `\u2022 **${op.name}**: ${op.description}`)
        ];
        const shouldExecute = await showDialog(
          context.plugin.app,
          "confirmation",
          `Optional Operations - v${this.version}`,
          paragraphs,
          "These operations are optional and can be run later from Settings \u2192 Migrations",
          { button1: "Run All Now", button2: "Skip (Run Later)" }
        );
        const results = [];
        if (shouldExecute) {
          for (const operation of availableOperations) {
            try {
              const result = await operation.execute(context);
              results.push({ operationId: operation.id, result });
              if (result.success) {
                await this.markOperationCompleted(operation.id, context);
              }
            } catch (error) {
              const errorResult = {
                success: false,
                message: `Operation failed: ${error}`,
                details: { error: String(error) }
              };
              results.push({ operationId: operation.id, result: errorResult });
            }
          }
        }
        return {
          success: results.every((r) => r.result.success),
          results
        };
      }
      /**
       * Get manual operations status for settings UI
       */
      async getManualOperationsStatus(context) {
        const status = [];
        for (const operation of this.manualOperations) {
          const completed = await this.isOperationCompleted(operation.id, context);
          const canRun = !completed && await operation.canRun(context);
          status.push({
            operation,
            completed,
            canRun
          });
        }
        return status;
      }
      /**
       * Execute single manual operation (from settings)
       */
      async executeManualOperation(operationId, context) {
        const operation = this.manualOperations.find((op) => op.id === operationId);
        if (!operation) {
          return { success: false, message: "Operation not found" };
        }
        if (await this.isOperationCompleted(operation.id, context)) {
          return { success: true, message: "Already completed" };
        }
        if (!await operation.canRun(context)) {
          return { success: false, message: "Prerequisites not met" };
        }
        try {
          const result = await operation.execute(context);
          if (result.success) {
            await this.markOperationCompleted(operation.id, context);
          }
          return result;
        } catch (error) {
          return {
            success: false,
            message: `Operation failed: ${error}`,
            details: { error: String(error) }
          };
        }
      }
      /**
       * Check if operation was completed using structured upgrade history
       */
      async isOperationCompleted(operationId, context) {
        var _a, _b, _c;
        const data = await context.plugin.loadData();
        const operationKey = `operation_${this.version.replace(/\./g, "_")}_${operationId}`;
        return ((_c = (_b = (_a = data == null ? void 0 : data.upgradeHistory) == null ? void 0 : _a.completedOperations) == null ? void 0 : _b[operationKey]) == null ? void 0 : _c.completed) || false;
      }
      /**
       * Mark operation as completed using structured upgrade history
       */
      async markOperationCompleted(operationId, context) {
        const data = await context.plugin.loadData() || {};
        if (!data.upgradeHistory) {
          data.upgradeHistory = {
            completedUpgrades: {},
            completedOperations: {}
          };
        }
        const operationKey = `operation_${this.version.replace(/\./g, "_")}_${operationId}`;
        data.upgradeHistory.completedOperations[operationKey] = {
          operationId,
          version: this.version,
          date: new Date().toISOString(),
          completed: true
        };
        await context.plugin.saveData(data);
      }
    };
    __name(VersionUpgrade, "VersionUpgrade");
  }
});

// src/upgrade/versions/upgrade-1.1.0.ts
var upgrade_1_1_0_exports = {};
__export(upgrade_1_1_0_exports, {
  Upgrade110: () => Upgrade110
});
var DeleteCatalogOperation, CleanMetadataOperation, Upgrade110;
var init_upgrade_1_1_0 = __esm({
  "src/upgrade/versions/upgrade-1.1.0.ts"() {
    "use strict";
    init_upgrade_interface();
    init_logger();
    DeleteCatalogOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "delete-catalog";
        this.name = "Delete Old Catalog";
        this.description = "Remove legacy conversation catalog data";
        this.type = "automatic";
      }
      async canRun(context) {
        try {
          const data = await context.plugin.loadData();
          const catalog = data == null ? void 0 : data.conversationCatalog;
          const hasData = catalog && typeof catalog === "object" && Object.keys(catalog).length > 0;
          if (catalog) {
          }
          return hasData;
        } catch (error) {
          logger2.error(`DeleteCatalog.canRun failed:`, error);
          return false;
        }
      }
      async execute(context) {
        try {
          const data = await context.plugin.loadData();
          const catalog = (data == null ? void 0 : data.conversationCatalog) || {};
          const catalogSize = Object.keys(catalog).length;
          if (catalogSize === 0) {
            return {
              success: true,
              message: "No legacy catalog found to delete"
            };
          }
          const existingImportedArchives = data == null ? void 0 : data.importedArchives;
          const cleanedData = {
            settings: data.settings || context.plugin.settings,
            // CRITICAL FIX: Force preservation of importedArchives
            importedArchives: existingImportedArchives || {},
            upgradeHistory: data.upgradeHistory || {
              completedUpgrades: {},
              completedOperations: {}
            },
            // Remove conversationCatalog - key change
            catalogDeletionDate: new Date().toISOString(),
            catalogDeletionStats: { entriesDeleted: catalogSize }
          };
          await context.plugin.saveData(cleanedData);
          const verifyData = await context.plugin.loadData();
          const verifyArchives = (verifyData == null ? void 0 : verifyData.importedArchives) || {};
          if (Object.keys(verifyArchives).length === 0 && Object.keys(existingImportedArchives || {}).length > 0) {
            logger2.error(`DeleteCatalog: CRITICAL - importedArchives were lost during save!`);
            return {
              success: false,
              message: `Critical error: importedArchives were lost during migration`,
              details: {
                beforeCount: Object.keys(existingImportedArchives || {}).length,
                afterCount: Object.keys(verifyArchives).length
              }
            };
          }
          return {
            success: true,
            message: `Legacy catalog deleted: ${catalogSize} entries removed, ${Object.keys(verifyArchives).length} imported archives preserved`,
            details: { entriesDeleted: catalogSize, archivesPreserved: Object.keys(verifyArchives).length }
          };
        } catch (error) {
          logger2.error(`DeleteCatalog.execute failed:`, error);
          return {
            success: false,
            message: `Failed to delete legacy catalog: ${error}`,
            details: { error: String(error) }
          };
        }
      }
      async verify(context) {
        try {
          const data = await context.plugin.loadData();
          const hasNoCatalog = !(data == null ? void 0 : data.conversationCatalog);
          const hasImportedArchives = (data == null ? void 0 : data.importedArchives) && Object.keys(data.importedArchives).length > 0;
          return hasNoCatalog;
        } catch (error) {
          logger2.error(`DeleteCatalog.verify failed:`, error);
          return false;
        }
      }
    };
    __name(DeleteCatalogOperation, "DeleteCatalogOperation");
    CleanMetadataOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "clean-metadata";
        this.name = "Clean & Version Metadata";
        this.description = "Remove unnecessary metadata and add plugin version to conversation notes";
        this.type = "automatic";
      }
      async canRun(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder;
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          });
          const canRun = conversationFiles.length > 0;
          return canRun;
        } catch (error) {
          logger2.error(`CleanMetadata.canRun failed:`, error);
          return false;
        }
      }
      async execute(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder;
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          });
          if (conversationFiles.length === 0) {
            return {
              success: true,
              message: "No conversation files found to clean",
              details: { processed: 0, cleaned: 0, errors: 0 }
            };
          }
          let processed = 0;
          let cleaned = 0;
          let errors = 0;
          const batchSize = 10;
          for (let i = 0; i < conversationFiles.length; i += batchSize) {
            const batch = conversationFiles.slice(i, i + batchSize);
            for (const file of batch) {
              processed++;
              try {
                const content = await context.plugin.app.vault.read(file);
                const cleanedContent = this.cleanFrontmatterRobust(content, context.toVersion, file.basename);
                if (content !== cleanedContent) {
                  await context.plugin.app.vault.modify(file, cleanedContent);
                  cleaned++;
                }
              } catch (error) {
                errors++;
                logger2.error(`Error cleaning metadata for ${file.path}:`, error);
              }
            }
            if (i + batchSize < conversationFiles.length) {
              await new Promise((resolve) => setTimeout(resolve, 10));
            }
          }
          return {
            success: errors === 0,
            message: `Metadata cleanup completed: ${cleaned} files cleaned, ${errors} errors`,
            details: { processed, cleaned, errors }
          };
        } catch (error) {
          logger2.error(`CleanMetadata.execute failed:`, error);
          return {
            success: false,
            message: `Metadata cleanup failed: ${error}`,
            details: { error: String(error) }
          };
        }
      }
      /**
       * Clean frontmatter with robust parsing and safe alias generation
       */
      cleanFrontmatterRobust(content, pluginVersion, fileName) {
        const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
        if (!frontmatterMatch) {
          if (content.includes("nexus:") || content.includes("conversation_id:")) {
            logger2.warn(`File ${fileName} appears to be Nexus but has malformed frontmatter`);
          }
          return content;
        }
        const frontmatterContent = frontmatterMatch[1];
        const restOfContent = content.substring(frontmatterMatch[0].length);
        const frontmatterData = {};
        const lines = frontmatterContent.split("\n");
        for (const line of lines) {
          const colonIndex = line.indexOf(":");
          if (colonIndex > 0) {
            const key = line.substring(0, colonIndex).trim();
            let value = line.substring(colonIndex + 1).trim();
            if (value.startsWith('"') && value.endsWith('"') || value.startsWith("'") && value.endsWith("'")) {
              value = value.slice(1, -1);
            }
            frontmatterData[key] = value;
          }
        }
        const nexusId = "nexus-ai-chat-importer";
        if (frontmatterData.nexus !== nexusId) {
          return content;
        }
        const safeAlias = this.generateSafeAlias(fileName);
        const newFrontmatter = [];
        newFrontmatter.push(`nexus: ${nexusId}`);
        newFrontmatter.push(`plugin_version: "1.0.x"`);
        if (frontmatterData.provider) {
          newFrontmatter.push(`provider: ${frontmatterData.provider}`);
        }
        newFrontmatter.push(`aliases: ${safeAlias}`);
        if (frontmatterData.conversation_id) {
          newFrontmatter.push(`conversation_id: ${frontmatterData.conversation_id}`);
        }
        if (frontmatterData.create_time) {
          newFrontmatter.push(`create_time: ${frontmatterData.create_time}`);
        }
        if (frontmatterData.update_time) {
          newFrontmatter.push(`update_time: ${frontmatterData.update_time}`);
        }
        const cleanedFrontmatter = newFrontmatter.join("\n");
        return `---
${cleanedFrontmatter}
---${restOfContent}`;
      }
      /**
       * Generate safe alias from filename (reuse the robust filename logic)
       */
      generateSafeAlias(fileName) {
        let cleanName = fileName.replace(/^\d{8}\s*-\s*/, "").replace(/^\d{4}-\d{2}-\d{2}\s*-\s*/, "");
        cleanName = cleanName.replace(/\.md$/, "");
        cleanName = cleanName.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[<>:"\/\\|?*\n\r]+/g, "").replace(/\.{2,}/g, ".").trim();
        cleanName = cleanName.replace(/^[^\w\d\s]+/, "");
        cleanName = cleanName.replace(/\s+/g, " ").trim();
        if (!cleanName || cleanName.length === 0) {
          cleanName = "Untitled";
        }
        if (cleanName.startsWith(".")) {
          cleanName = cleanName.substring(1);
        }
        if (!cleanName || cleanName.length === 0) {
          cleanName = "Untitled";
        }
        return cleanName;
      }
      async verify(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder;
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          }).slice(0, 5);
          for (const file of conversationFiles) {
            try {
              const content = await context.plugin.app.vault.read(file);
              const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
              if (!frontmatterMatch)
                continue;
              const frontmatterContent = frontmatterMatch[1];
              if (!frontmatterContent.includes("plugin_version:")) {
                return false;
              }
              const forbiddenFields = [
                "conversation_template_id:",
                "gizmo_id:",
                "gizmo_type:",
                "default_model_slug:",
                "is_archived:",
                "is_starred:",
                "current_node:",
                "memory_scope:"
              ];
              const hasUnwantedFields = forbiddenFields.some(
                (field) => frontmatterContent.includes(field)
              );
              if (hasUnwantedFields) {
                return false;
              }
            } catch (error) {
              logger2.error(`CleanMetadata.verify error for ${file.path}:`, error);
              return false;
            }
          }
          return true;
        } catch (error) {
          logger2.error(`CleanMetadata.verify failed:`, error);
          return false;
        }
      }
    };
    __name(CleanMetadataOperation, "CleanMetadataOperation");
    Upgrade110 = class extends VersionUpgrade {
      constructor() {
        super(...arguments);
        this.version = "1.1.0";
        this.automaticOperations = [
          new DeleteCatalogOperation(),
          new CleanMetadataOperation()
        ];
        this.manualOperations = [
          // No manual operations for 1.1.0 - all operations are automatic
          // Future versions can add manual operations here for truly optional tasks
        ];
      }
    };
    __name(Upgrade110, "Upgrade110");
  }
});

// src/upgrade/versions/upgrade-1.2.0.ts
var upgrade_1_2_0_exports = {};
__export(upgrade_1_2_0_exports, {
  NexusUpgradeModal: () => NexusUpgradeModal,
  Upgrade120: () => Upgrade120
});
var import_obsidian21, ConvertToCalloutsOperation, MoveReportsToProviderOperation, UpdateReportLinksOperation, MoveYearFoldersOperation, NexusUpgradeModal, OfferReimportOperation, Upgrade120;
var init_upgrade_1_2_0 = __esm({
  "src/upgrade/versions/upgrade-1.2.0.ts"() {
    "use strict";
    init_upgrade_interface();
    import_obsidian21 = require("obsidian");
    init_logger();
    ConvertToCalloutsOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "convert-to-callouts";
        this.name = "Convert to Modern Callouts";
        this.description = "Transform old indentations (>, >>) to beautiful Nexus callouts";
        this.type = "automatic";
      }
      async canRun(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder;
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          });
          for (const file of conversationFiles.slice(0, 10)) {
            try {
              const content = await context.plugin.app.vault.read(file);
              if (this.hasOldIndentationFormat(content)) {
                return true;
              }
            } catch (error) {
              logger2.error(`Error checking file ${file.path}:`, error);
            }
          }
          return false;
        } catch (error) {
          logger2.error(`ConvertToCallouts.canRun failed:`, error);
          return false;
        }
      }
      async execute(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder;
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          });
          let processed = 0;
          let converted = 0;
          let errors = 0;
          const batchSize = 10;
          for (let i = 0; i < conversationFiles.length; i += batchSize) {
            const batch = conversationFiles.slice(i, i + batchSize);
            for (const file of batch) {
              processed++;
              try {
                const content = await context.plugin.app.vault.read(file);
                if (!this.hasOldIndentationFormat(content)) {
                  continue;
                }
                const convertedContent = this.convertIndentationsToCallouts(content);
                if (content !== convertedContent) {
                  const finalContent = this.updatePluginVersion(convertedContent, "1.2.0");
                  await context.plugin.app.vault.modify(file, finalContent);
                  converted++;
                }
              } catch (error) {
                errors++;
                logger2.error(`Error converting ${file.path}:`, error);
              }
            }
            if (i + batchSize < conversationFiles.length) {
              await new Promise((resolve) => setTimeout(resolve, 10));
            }
          }
          return {
            success: errors === 0,
            message: `Callout conversion completed: ${converted} files converted, ${errors} errors`,
            details: { processed, converted, errors }
          };
        } catch (error) {
          logger2.error(`ConvertToCallouts.execute failed:`, error);
          return {
            success: false,
            message: `Callout conversion failed: ${error}`,
            details: { error: String(error) }
          };
        }
      }
      /**
       * Check if content has old indentation format (v1.1.0)
       */
      hasOldIndentationFormat(content) {
        const oldPatterns = [
          /^### User, on .* at .*;\n>/m,
          // User messages with indentation
          /^#### Assistant, on .* at .*;\n>>/m,
          // Assistant messages with indentation
          /<div class="nexus-attachment-box">/,
          // Old attachment divs
          /<div class="nexus-artifact-box">/,
          // Old artifact divs
          />\[!note\] üìé \*\*Attachment:\*\*/
          // Old note callouts for attachments
        ];
        return oldPatterns.some((pattern) => pattern.test(content));
      }
      /**
       * Convert old indentations to modern callouts
       */
      convertIndentationsToCallouts(content) {
        let converted = content;
        converted = converted.replace(
          /^### User, on (.*?) at (.*?);\n((?:> .*(?:\n|$))*)/gm,
          (match, date, time, quotedContent) => {
            const cleanContent = quotedContent.replace(/^> /gm, "> ");
            return `>[!nexus_user] **User** - ${date} at ${time}
${cleanContent}`;
          }
        );
        converted = converted.replace(
          /^#### Assistant, on (.*?) at (.*?);\n((?:>> .*(?:\n|$))*)/gm,
          (match, date, time, quotedContent) => {
            const cleanContent = quotedContent.replace(/^>> /gm, "> ");
            return `>[!nexus_agent] **Assistant** - ${date} at ${time}
${cleanContent}`;
          }
        );
        converted = converted.replace(
          /<div class="nexus-attachment-box">\s*\n\s*\*\*üìé Attachment:\*\* ([^(]+)\(([^)]+)\)([\s\S]*?)<\/div>/g,
          (match, fileName, fileType, content2) => {
            const cleanFileName = fileName.trim();
            let cleanContent = content2.trim();
            if (cleanContent.includes("**Content:**")) {
              cleanContent = cleanContent.replace(/\*\*Content:\*\*/g, "").trim();
            }
            if (cleanContent.includes("**Status:**")) {
              cleanContent = cleanContent.replace(/\*\*Status:\*\*/g, "").trim();
            }
            cleanContent = cleanContent.replace(/\n/g, "\n> ").trim();
            if (cleanContent && !cleanContent.startsWith(">")) {
              cleanContent = "> " + cleanContent;
            }
            return `>[!nexus_attachment] **${cleanFileName}** (${fileType})
${cleanContent}`;
          }
        );
        converted = converted.replace(
          /<div class="nexus-artifact-box">\s*([\s\S]*?)\s*<\/div>/g,
          (match, content2) => {
            let cleanContent = content2.trim();
            const titleMatch = cleanContent.match(/\*\*([^*]+)\*\*/);
            const title = titleMatch ? titleMatch[1] : "Artifact";
            cleanContent = cleanContent.replace(/\*\*[^*]+\*\*/g, "").trim();
            cleanContent = cleanContent.replace(/\n/g, "\n> ").trim();
            if (cleanContent && !cleanContent.startsWith(">")) {
              cleanContent = "> " + cleanContent;
            }
            return `>[!nexus_artifact] **${title}**
${cleanContent}`;
          }
        );
        converted = converted.replace(
          />\[!note\] üìé \*\*Attachment:\*\* ([^(]+)\(([^)]+)\)(.*?)(?=\n\n|\n>|\n<!--|\n---|$)/gs,
          (match, fileName, fileType, content2) => {
            const cleanFileName = fileName.trim();
            let cleanContent = content2.trim();
            cleanContent = cleanContent.replace(/\n/g, "\n> ").trim();
            if (cleanContent && !cleanContent.startsWith(">")) {
              cleanContent = "> " + cleanContent;
            }
            return `>[!nexus_attachment] **${cleanFileName}** (${fileType})
${cleanContent}`;
          }
        );
        return converted;
      }
      /**
       * Update plugin_version in frontmatter
       */
      updatePluginVersion(content, version) {
        return content.replace(
          /^plugin_version: ".*?"$/m,
          `plugin_version: "${version}"`
        );
      }
      async verify(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder;
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          }).slice(0, 5);
          for (const file of conversationFiles) {
            try {
              const content = await context.plugin.app.vault.read(file);
              if (this.hasOldIndentationFormat(content)) {
                return false;
              }
              if (!content.includes('plugin_version: "1.2.0"')) {
                return false;
              }
            } catch (error) {
              logger2.error(`Error verifying file ${file.path}:`, error);
              return false;
            }
          }
          return true;
        } catch (error) {
          logger2.error(`ConvertToCallouts.verify failed:`, error);
          return false;
        }
      }
    };
    __name(ConvertToCalloutsOperation, "ConvertToCalloutsOperation");
    MoveReportsToProviderOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "move-reports-to-provider";
        this.name = "Organize Reports by Provider";
        this.description = "Move reports from root Reports/ folder to Reports/chatgpt/";
        this.type = "automatic";
      }
      async canRun(context) {
        try {
          const reportFolder = context.plugin.settings.reportFolder;
          const reportFiles = context.plugin.app.vault.getMarkdownFiles().filter((f) => {
            if (!f.path.startsWith(reportFolder + "/"))
              return false;
            const relativePath = f.path.substring(reportFolder.length + 1);
            if (relativePath.includes("/"))
              return false;
            return f.name.includes("import report") || f.name.includes("import_");
          });
          return reportFiles.length > 0;
        } catch (error) {
          logger2.error(`MoveReportsToProviderOperation.canRun failed:`, error);
          return false;
        }
      }
      async execute(context) {
        try {
          const reportFolder = context.plugin.settings.reportFolder;
          let processed = 0;
          let moved = 0;
          let errors = 0;
          const reportFiles = context.plugin.app.vault.getMarkdownFiles().filter((f) => {
            if (!f.path.startsWith(reportFolder + "/"))
              return false;
            const relativePath = f.path.substring(reportFolder.length + 1);
            if (relativePath.includes("/"))
              return false;
            return f.name.includes("import report") || f.name.includes("import_");
          });
          const chatgptReportFolder = `${reportFolder}/chatgpt`;
          try {
            await context.plugin.app.vault.adapter.mkdir(chatgptReportFolder);
          } catch (e) {
          }
          for (const file of reportFiles) {
            try {
              processed++;
              const newPath = `${chatgptReportFolder}/${file.name}`;
              if (await context.plugin.app.vault.adapter.exists(newPath)) {
                continue;
              }
              await context.plugin.app.vault.adapter.rename(file.path, newPath);
              moved++;
            } catch (error) {
              errors++;
              logger2.error(`Error moving report ${file.path}:`, error);
            }
          }
          return {
            success: errors === 0,
            message: `Reports organized: ${moved} files moved to provider structure, ${errors} errors`,
            details: { processed, moved, errors }
          };
        } catch (error) {
          logger2.error(`MoveReportsToProviderOperation.execute failed:`, error);
          return {
            success: false,
            message: `Report organization failed: ${error}`,
            details: { error: String(error) }
          };
        }
      }
      async verify(_context) {
        return true;
      }
    };
    __name(MoveReportsToProviderOperation, "MoveReportsToProviderOperation");
    UpdateReportLinksOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "update-report-links";
        this.name = "Update Report Links";
        this.description = "Insert 'chatgpt/' before year in report links inside reports";
        this.type = "automatic";
      }
      async canRun(_context) {
        return true;
      }
      escapeRegExp(str) {
        return str.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
      }
      async execute(context) {
        try {
          const reportFolder = context.plugin.settings.reportFolder;
          const conversationFolder = context.plugin.settings.conversationFolder;
          const escapedArchive = this.escapeRegExp(conversationFolder);
          let processed = 0;
          let updated = 0;
          let errors = 0;
          const reportPrefixChatgpt = `${reportFolder}/chatgpt/`;
          const reportPrefixRoot = `${reportFolder}/`;
          const reportFiles = context.plugin.app.vault.getMarkdownFiles().filter((f) => {
            if (f.path.startsWith(reportPrefixChatgpt))
              return true;
            if (f.path.startsWith(reportPrefixRoot)) {
              const relativePath = f.path.substring(reportPrefixRoot.length);
              if (!relativePath.includes("/") && (f.name.includes("import report") || f.name.includes("import_"))) {
                return true;
              }
            }
            return false;
          });
          const linkPattern = new RegExp(`(\\[\\[${escapedArchive}/)(\\d{4}/\\d{2}/)`, "g");
          for (const file of reportFiles) {
            try {
              processed++;
              const content = await context.plugin.app.vault.read(file);
              const replaced = content.replace(linkPattern, "$1chatgpt/$2");
              if (replaced !== content) {
                await context.plugin.app.vault.modify(file, replaced);
                updated++;
              }
            } catch (e) {
              errors++;
              logger2.error(`UpdateReportLinksOperation error in ${file.path}:`, e);
            }
          }
          return {
            success: errors === 0,
            message: `Report links updated: ${updated} files changed, ${errors} errors`,
            details: { processed, updated, errors }
          };
        } catch (error) {
          logger2.error(`UpdateReportLinksOperation.execute failed:`, error);
          return {
            success: false,
            message: `Report link update failed: ${error}`,
            details: { error: String(error) }
          };
        }
      }
      async verify(_context) {
        return true;
      }
    };
    __name(UpdateReportLinksOperation, "UpdateReportLinksOperation");
    MoveYearFoldersOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "move-year-folders";
        this.name = "Organize Conversations by Provider";
        this.description = "Move year folders to chatgpt provider structure";
        this.type = "automatic";
      }
      async canRun(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder;
          const yearFolders = await this.findYearFolders(context, conversationFolder);
          return yearFolders.length > 0;
        } catch (error) {
          logger2.error(`MoveYearFolders.canRun failed:`, error);
          return false;
        }
      }
      async execute(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder;
          let movedFolders = 0;
          let errors = 0;
          const yearFolders = await this.findYearFolders(context, conversationFolder);
          for (const yearFolder of yearFolders) {
            try {
              const chatgptFolder = `${conversationFolder}/chatgpt`;
              await context.plugin.app.vault.adapter.mkdir(chatgptFolder);
              const newPath = `${chatgptFolder}/${yearFolder}`;
              const oldPath = `${conversationFolder}/${yearFolder}`;
              await context.plugin.app.vault.adapter.rename(oldPath, newPath);
              movedFolders++;
            } catch (error) {
              errors++;
              logger2.error(`Error moving year folder ${yearFolder}:`, error);
            }
          }
          return {
            success: errors === 0,
            message: `Conversation organization completed: ${movedFolders} year folders moved to chatgpt structure, ${errors} errors`,
            details: { movedFolders, errors }
          };
        } catch (error) {
          logger2.error(`MoveYearFolders.execute failed:`, error);
          return {
            success: false,
            message: `Conversation organization failed: ${error}`,
            details: { error: String(error) }
          };
        }
      }
      async verify(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder;
          const remainingYearFolders = await this.findYearFolders(context, conversationFolder);
          if (remainingYearFolders.length > 0) {
            return false;
          }
          return true;
        } catch (error) {
          logger2.error(`MoveYearFolders.verify failed:`, error);
          return false;
        }
      }
      /**
       * Find year folders (YYYY) directly in conversation folder
       */
      async findYearFolders(context, conversationFolder) {
        try {
          const folders = await context.plugin.app.vault.adapter.list(conversationFolder);
          return folders.folders.filter((folder) => {
            const folderName = folder.split("/").pop() || "";
            return /^\d{4}$/.test(folderName) && folderName !== "chatgpt";
          }).map((folder) => folder.split("/").pop() || "");
        } catch (error) {
          return [];
        }
      }
    };
    __name(MoveYearFoldersOperation, "MoveYearFoldersOperation");
    NexusUpgradeModal = class extends import_obsidian21.Modal {
      constructor(app, plugin, version, resolve) {
        super(app);
        this.plugin = plugin;
        this.version = version;
        this.resolve = resolve;
      }
      onOpen() {
        var _a;
        const { containerEl, titleEl } = this;
        containerEl.classList.add("nexus-upgrade-modal");
        titleEl.setText(`\u{1F680} Nexus AI Chat Importer ${this.version}`);
        (_a = this.modalEl.querySelector(".modal-close-button")) == null ? void 0 : _a.remove();
        this.createForm();
      }
      async onClose() {
        this.contentEl.empty();
      }
      async createForm() {
        let message = `\u{1F389} **Upgrade to v1.2.0**

Your conversations will be reorganized with provider structure and modern callouts. All links in your reports will be updated. 

**\u{1F4A1} To get ALL v1.2.0 features:** Reimport your original ChatGPT ZIP files.

---

## \u2615 Support My Work

[![Support me on Ko-fi](https://ko-fi.com/img/githubbutton_sm.svg)](https://ko-fi.com/nexusplugins)`;
        try {
          const response = await fetch("https://api.github.com/repos/Superkikim/nexus-ai-chat-importer/releases/tags/v1.2.0");
          if (response.ok) {
            const release = await response.json();
            if (release.body) {
              message = release.body;
            }
          }
        } catch (error) {
        }
        await import_obsidian21.MarkdownRenderer.render(
          this.app,
          message,
          this.contentEl,
          "",
          this.plugin
        );
        this.contentEl.createEl("div", { cls: "nexus-upgrade-buttons" }, (el) => {
          el.style.textAlign = "right";
          el.style.marginTop = "20px";
          el.style.paddingTop = "15px";
          el.style.borderTop = "1px solid var(--background-modifier-border)";
          const btnOk = el.createEl("button", {
            text: "Proceed",
            cls: "nexus-btn-primary"
          });
          btnOk.onclick = () => {
            this.close();
            this.resolve("ok");
          };
        });
      }
    };
    __name(NexusUpgradeModal, "NexusUpgradeModal");
    OfferReimportOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "offer-reimport";
        this.name = "Full Feature Reimport";
        this.description = "Optionally reimport conversations to get all v1.2.0 features (attachments, chronological order, etc.)";
        this.type = "manual";
      }
      async canRun(_context) {
        return true;
      }
      async execute(_context) {
        try {
          return {
            success: true,
            message: "Upgrade information provided to user",
            details: { action: "info_displayed" }
          };
        } catch (error) {
          logger2.error(`OfferReimport.execute failed:`, error);
          return {
            success: false,
            message: `Failed to complete reimport operation: ${error}`,
            details: { error: String(error) }
          };
        }
      }
      async verify(_context) {
        return true;
      }
    };
    __name(OfferReimportOperation, "OfferReimportOperation");
    Upgrade120 = class extends VersionUpgrade {
      constructor() {
        super(...arguments);
        this.version = "1.2.0";
        this.automaticOperations = [
          new MoveYearFoldersOperation(),
          new MoveReportsToProviderOperation(),
          new UpdateReportLinksOperation(),
          new ConvertToCalloutsOperation()
        ];
        this.manualOperations = [
          new OfferReimportOperation()
        ];
      }
    };
    __name(Upgrade120, "Upgrade120");
  }
});

// src/dialogs/configure-folder-locations-dialog.ts
var import_obsidian22, ConfigureFolderLocationsDialog;
var init_configure_folder_locations_dialog = __esm({
  "src/dialogs/configure-folder-locations-dialog.ts"() {
    "use strict";
    import_obsidian22 = require("obsidian");
    init_enhanced_folder_migration_dialog();
    init_folder_tree_browser_modal();
    init_folder_validation();
    init_utils();
    ConfigureFolderLocationsDialog = class extends import_obsidian22.Modal {
      // Track if onComplete was already called
      constructor(plugin, onComplete) {
        super(plugin.app);
        this.plugin = plugin;
        this.reportFolderInput = null;
        this.completed = false;
        this.onComplete = onComplete;
        this.originalReportFolder = plugin.settings.reportFolder || "Nexus Reports";
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.empty();
        contentEl.createEl("h2", {
          text: "\u{1F389} Nexus AI Chat Importer v1.3.0",
          cls: "nexus-upgrade-title"
        });
        const messageContainer = contentEl.createDiv({ cls: "nexus-upgrade-message" });
        const descriptionEl = messageContainer.createDiv({ cls: "nexus-upgrade-description" });
        descriptionEl.createEl("p", {
          text: `In version 1.3.0, you can specify a folder for Reports. We will move existing reports to ${this.originalReportFolder}, or you can select your preferred folder below.`
        });
        descriptionEl.createEl("p", {
          text: "Note: The folder cannot be inside Conversations or Attachments.",
          cls: "nexus-upgrade-note"
        });
        const folderSection = contentEl.createDiv({ cls: "nexus-upgrade-folder-section" });
        folderSection.createEl("div", {
          text: "\u{1F4CA} Report Folder",
          cls: "nexus-upgrade-folder-label"
        });
        const inputContainer = folderSection.createDiv({ cls: "nexus-upgrade-input-container" });
        this.reportFolderInput = inputContainer.createEl("input", {
          type: "text",
          placeholder: "Nexus Reports",
          value: this.originalReportFolder,
          cls: "nexus-upgrade-folder-input"
        });
        this.reportFolderInput.readOnly = true;
        this.reportFolderInput.style.cursor = "default";
        const browseButton = inputContainer.createEl("button", {
          text: "Browse",
          cls: "mod-cta nexus-upgrade-browse-button"
        });
        browseButton.addEventListener("click", () => {
          const modal = new FolderTreeBrowserModal(
            this.plugin.app,
            (path) => {
              if (this.reportFolderInput) {
                this.reportFolderInput.value = path;
              }
            },
            this.originalReportFolder
          );
          modal.open();
        });
        const buttonContainer = contentEl.createDiv({ cls: "nexus-upgrade-button-container-centered" });
        const proceedButton = buttonContainer.createEl("button", {
          text: "Proceed",
          cls: "mod-cta nexus-upgrade-proceed-button"
        });
        proceedButton.addEventListener("click", async () => {
          await this.handleSave();
        });
        this.addStyles();
      }
      async handleSave() {
        var _a;
        if (this.completed)
          return;
        if (!this.reportFolderInput) {
          this.completed = true;
          this.close();
          this.onComplete({
            conversationFolder: {
              changed: false,
              oldPath: this.plugin.settings.conversationFolder,
              newPath: this.plugin.settings.conversationFolder
            },
            reportFolder: {
              changed: false,
              oldPath: this.originalReportFolder,
              newPath: this.originalReportFolder
            },
            attachmentFolder: {
              changed: false,
              oldPath: this.plugin.settings.attachmentFolder,
              newPath: this.plugin.settings.attachmentFolder
            }
          });
          return;
        }
        const newReportFolder = this.reportFolderInput.value.trim();
        const validation = validateFolderNesting(
          "reportFolder",
          newReportFolder,
          this.plugin.settings.conversationFolder,
          this.originalReportFolder,
          // Use original to avoid self-check
          this.plugin.settings.attachmentFolder
        );
        if (!validation.valid) {
          this.showErrorDialog("Invalid Folder Location", (_a = validation.error) != null ? _a : "Invalid folder configuration");
          return;
        }
        const result = {
          conversationFolder: {
            changed: false,
            oldPath: this.plugin.settings.conversationFolder,
            newPath: this.plugin.settings.conversationFolder
          },
          reportFolder: {
            changed: newReportFolder !== this.originalReportFolder,
            oldPath: this.originalReportFolder,
            newPath: newReportFolder
          },
          attachmentFolder: {
            changed: false,
            oldPath: this.plugin.settings.attachmentFolder,
            newPath: this.plugin.settings.attachmentFolder
          }
        };
        this.completed = true;
        this.close();
        await this.handleFolderChange("reportFolder", result.reportFolder);
        this.onComplete(result);
      }
      async handleFolderChange(folderType, folderInfo) {
        if (!folderInfo.changed) {
          return;
        }
        const oldPath = folderInfo.oldPath;
        const newPath = folderInfo.newPath;
        const newFolder = this.plugin.app.vault.getAbstractFileByPath(newPath);
        if (newFolder && newFolder instanceof import_obsidian22.TFolder && newFolder.children.length > 0) {
          this.showErrorDialog(
            "Target Folder Not Empty",
            `The folder "${newPath}" already contains files.

To change the folder location:
\u2022 Move existing files manually in Obsidian, OR
\u2022 Choose an empty folder or create a new one`
          );
          return;
        }
        this.plugin.settings[folderType] = newPath;
        await this.plugin.saveSettings();
        const oldFolder = this.plugin.app.vault.getAbstractFileByPath(oldPath);
        if (!oldFolder || !(oldFolder instanceof import_obsidian22.TFolder) || oldFolder.children.length === 0) {
          return;
        }
        const folderTypeLabel = folderType === "conversationFolder" ? "conversations" : folderType === "reportFolder" ? "reports" : "attachments";
        await new Promise((resolve) => {
          const handleMigrationAction = /* @__PURE__ */ __name(async (action) => {
            if (action === "move") {
              try {
                const result = await moveAndMergeFolders(oldFolder, newPath, this.plugin.app.vault);
                folderInfo.filesMoved = result.moved;
                if (result.success && result.skipped === 0) {
                  new import_obsidian22.Notice(`\u2705 Files moved to ${newPath}`);
                } else {
                  this.showMergeResultDialog(result, oldPath, newPath);
                }
              } catch (error) {
                this.plugin.logger.error(`Failed to move ${folderTypeLabel} folder:`, error);
                const errorMessage = error instanceof Error ? error.message : String(error);
                this.showErrorDialog("Migration Failed", `Failed to move files: ${errorMessage}`);
              }
            } else if (action === "cancel") {
              this.plugin.settings[folderType] = oldPath;
              await this.plugin.saveSettings();
            }
            resolve();
          }, "handleMigrationAction");
          const dialog = new EnhancedFolderMigrationDialog(
            this.plugin,
            oldPath,
            newPath,
            folderTypeLabel,
            handleMigrationAction
          );
          dialog.open();
        });
      }
      /**
       * Show dialog with merge result details when files were skipped or errors occurred
       */
      showMergeResultDialog(result, oldPath, newPath) {
        const modal = new import_obsidian22.Modal(this.plugin.app);
        modal.titleEl.setText("Folder Migration Result");
        const { contentEl } = modal;
        const summary = contentEl.createDiv({ cls: "nexus-merge-summary" });
        summary.createEl("h3", { text: "Migration Summary" });
        const stats = summary.createDiv({ cls: "nexus-merge-stats" });
        stats.createEl("p", { text: `\u2705 Successfully moved: ${result.moved} file(s)` });
        if (result.skipped > 0) {
          stats.createEl("p", {
            text: `\u26A0\uFE0F Skipped (already exist): ${result.skipped} file(s)`,
            cls: "nexus-merge-warning"
          });
        }
        if (result.errors > 0) {
          stats.createEl("p", {
            text: `\u274C Errors: ${result.errors} file(s)`,
            cls: "nexus-merge-error"
          });
        }
        const explanation = contentEl.createDiv({ cls: "nexus-merge-explanation" });
        explanation.createEl("p", {
          text: "Files that already existed in the destination were not overwritten to preserve your data."
        });
        if (result.errorDetails && result.errorDetails.length > 0) {
          const errorSection = contentEl.createDiv({ cls: "nexus-merge-errors" });
          errorSection.createEl("h4", { text: "Error Details:" });
          const errorList = errorSection.createEl("ul");
          for (const error of result.errorDetails) {
            errorList.createEl("li", { text: error });
          }
        }
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const closeButton = buttonContainer.createEl("button", { text: "OK", cls: "mod-cta" });
        closeButton.addEventListener("click", () => modal.close());
        const styleEl = document.createElement("style");
        styleEl.textContent = `
            .nexus-merge-summary {
                margin-bottom: 20px;
            }
            .nexus-merge-stats p {
                margin: 8px 0;
                font-size: 14px;
            }
            .nexus-merge-warning {
                color: var(--text-warning);
            }
            .nexus-merge-error {
                color: var(--text-error);
            }
            .nexus-merge-explanation {
                padding: 12px;
                background: var(--background-secondary);
                border-radius: 4px;
                margin: 16px 0;
            }
            .nexus-merge-errors {
                margin-top: 16px;
                padding: 12px;
                background: var(--background-modifier-error);
                border-radius: 4px;
            }
            .nexus-merge-errors ul {
                margin: 8px 0;
                padding-left: 20px;
            }
            .nexus-merge-errors li {
                margin: 4px 0;
                font-size: 12px;
                font-family: var(--font-monospace);
            }
        `;
        document.head.appendChild(styleEl);
        modal.open();
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
            .nexus-upgrade-title {
                margin-bottom: 1em;
                color: var(--text-normal);
                text-align: center;
            }

            .nexus-upgrade-message {
                margin-bottom: 1.5em;
                line-height: 1.6;
            }

            .nexus-upgrade-description {
                font-size: 1.05em;
                line-height: 1.6;
                margin-bottom: 1.5em;
            }

            .nexus-upgrade-description p {
                margin: 0.8em 0;
            }

            .nexus-upgrade-note {
                font-size: 0.95em;
                color: var(--text-muted);
                font-style: italic;
            }

            .nexus-upgrade-folder-section {
                background-color: var(--background-secondary);
                padding: 1.5em;
                margin: 1em 0;
                border-radius: 8px;
            }

            .nexus-upgrade-folder-label {
                font-size: 1.1em;
                font-weight: 600;
                margin-bottom: 0.8em;
                color: var(--text-normal);
            }

            .nexus-upgrade-input-container {
                display: flex;
                gap: 0.8em;
                align-items: stretch;
                width: 100%;
            }

            .nexus-upgrade-folder-input {
                flex: 1;
                padding: 0.6em 0.8em;
                font-size: 1em;
                border: 1px solid var(--background-modifier-border);
                border-radius: 4px;
                background-color: var(--background-primary);
                color: var(--text-normal);
                min-width: 0;
            }

            .nexus-upgrade-browse-button {
                padding: 0.6em 1.2em !important;
                font-size: 1em !important;
                white-space: nowrap;
                flex-shrink: 0;
            }

            .nexus-upgrade-button-container-centered {
                display: flex;
                justify-content: center;
                margin-top: 2em;
            }

            .nexus-upgrade-proceed-button {
                padding: 12px 48px !important;
                font-size: 16px !important;
                font-weight: 600 !important;
                min-width: 200px;
            }
        `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
        if (!this.completed && this.onComplete) {
          this.completed = true;
          this.onComplete({
            conversationFolder: {
              changed: false,
              oldPath: this.plugin.settings.conversationFolder,
              newPath: this.plugin.settings.conversationFolder
            },
            reportFolder: {
              changed: false,
              oldPath: this.originalReportFolder,
              newPath: this.originalReportFolder
            },
            attachmentFolder: {
              changed: false,
              oldPath: this.plugin.settings.attachmentFolder,
              newPath: this.plugin.settings.attachmentFolder
            }
          });
        }
      }
      showErrorDialog(title, message) {
        const modal = new import_obsidian22.Modal(this.plugin.app);
        modal.titleEl.setText(title);
        modal.contentEl.createEl("p", {
          text: message,
          cls: "nexus-error-message"
        });
        const buttonContainer = modal.contentEl.createDiv({ cls: "modal-button-container" });
        buttonContainer.style.display = "flex";
        buttonContainer.style.justifyContent = "flex-end";
        buttonContainer.style.marginTop = "1em";
        const okButton = buttonContainer.createEl("button", {
          text: "OK",
          cls: "mod-cta"
        });
        okButton.addEventListener("click", () => modal.close());
        modal.open();
      }
    };
    __name(ConfigureFolderLocationsDialog, "ConfigureFolderLocationsDialog");
  }
});

// src/upgrade/versions/upgrade-1.3.0.ts
var upgrade_1_3_0_exports = {};
__export(upgrade_1_3_0_exports, {
  Upgrade130: () => Upgrade130
});
var import_obsidian23, ConvertToISO8601TimestampsOperation, FixFrontmatterAliasesOperation, MigrateToSeparateFoldersOperation, MigrateClaudeArtifactsOperation, ConfigureFolderLocationsOperation, Upgrade130;
var init_upgrade_1_3_0 = __esm({
  "src/upgrade/versions/upgrade-1.3.0.ts"() {
    "use strict";
    init_upgrade_interface();
    init_utils();
    init_date_parser();
    import_obsidian23 = require("obsidian");
    init_configure_folder_locations_dialog();
    ConvertToISO8601TimestampsOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "convert-to-iso8601-timestamps";
        this.name = "Convert Timestamps to ISO 8601";
        this.description = "Converts conversation timestamps to universal ISO 8601 format (YYYY-MM-DDTHH:mm:ssZ). This fixes parsing issues with locale-specific date formats and ensures consistent timestamps across all regions.";
        this.type = "automatic";
      }
      async canRun(context) {
        var _a;
        try {
          const conversationFolder = context.plugin.settings.conversationFolder || context.plugin.settings.archiveFolder || "Nexus/Conversations";
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          });
          const samples = [];
          let foundNonISO = false;
          for (const file of conversationFiles) {
            const fm = (_a = context.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
            if (!fm || fm.nexus !== context.plugin.manifest.id)
              continue;
            const vals = [fm.create_time, fm.update_time].filter((v) => typeof v === "string");
            for (const v of vals) {
              if (!/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}(:\d{2})?(\.\d{3})?Z?$/.test(v)) {
                samples.push(v);
                foundNonISO = true;
              }
            }
          }
          if (samples.length) {
            const format = DateParser.detectFormatFromSamples(samples);
            this.globalOrder = format == null ? void 0 : format.order;
          }
          if (foundNonISO) {
            return true;
          }
          return false;
        } catch (error) {
          console.error(`ConvertToISO8601Timestamps.canRun failed:`, error);
          return false;
        }
      }
      async execute(context) {
        var _a;
        try {
          const conversationFolder = context.plugin.settings.conversationFolder || context.plugin.settings.archiveFolder || "Nexus/Conversations";
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          });
          if (!this.globalOrder) {
            const samples = [];
            for (const file of conversationFiles) {
              const fm = (_a = context.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if (!fm || fm.nexus !== context.plugin.manifest.id)
                continue;
              const vals = [fm.create_time, fm.update_time].filter((v) => typeof v === "string");
              for (const v of vals) {
                if (!/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}(:\d{2})?(\.\d{3})?Z?$/.test(v)) {
                  samples.push(v);
                }
              }
            }
            if (samples.length) {
              const format = DateParser.detectFormatFromSamples(samples);
              this.globalOrder = format == null ? void 0 : format.order;
            }
          }
          let processed = 0;
          let converted = 0;
          let skipped = 0;
          let alreadyISO = 0;
          let failed = 0;
          let errors = 0;
          const batchSize = 10;
          for (let i = 0; i < conversationFiles.length; i += batchSize) {
            const batch = conversationFiles.slice(i, i + batchSize);
            for (const file of batch) {
              processed++;
              try {
                const content = await context.plugin.app.vault.read(file);
                if (!this.isNexusFile(content)) {
                  skipped++;
                  continue;
                }
                const hadNonISO = this.hasNonISOTimestamps(content);
                if (!hadNonISO) {
                  alreadyISO++;
                  continue;
                }
                const convertedContent = this.convertTimestampsToISO8601(content);
                if (content !== convertedContent) {
                  const finalContent = this.updatePluginVersion(convertedContent, "1.3.0");
                  await context.plugin.app.vault.modify(file, finalContent);
                  converted++;
                } else {
                  failed++;
                }
              } catch (error) {
                errors++;
                console.error(`Error converting timestamps in ${file.path}:`, error);
              }
            }
            if (i + batchSize < conversationFiles.length) {
              await new Promise((resolve) => setTimeout(resolve, 10));
            }
          }
          const results = [];
          results.push(`**What this does:**`);
          results.push(`Converts conversation timestamps to universal ISO 8601 format (YYYY-MM-DDTHH:mm:ssZ).`);
          results.push(`This fixes parsing issues with locale-specific date formats.`);
          results.push(``);
          results.push(`**Summary:**`);
          results.push(``);
          results.push(`- Total files scanned: ${processed}`);
          results.push(`- Already in ISO format: ${alreadyISO}`);
          results.push(`- Converted to ISO: ${converted}`);
          results.push(`- Skipped (non-Nexus): ${skipped}`);
          if (failed > 0) {
            results.push(`- Failed to convert: ${failed}`);
          }
          if (errors > 0) {
            results.push(`- Errors: ${errors}`);
          }
          return {
            success: errors === 0,
            message: `Converted ${converted} conversation(s) to ISO 8601 format.`,
            details: results
          };
        } catch (error) {
          console.error(`ConvertToISO8601Timestamps.execute failed:`, error);
          return {
            success: false,
            message: `Timestamp conversion failed: ${error}`,
            details: { error: String(error) }
          };
        }
      }
      /**
       * Check if file belongs to Nexus plugin
       */
      isNexusFile(content) {
        return content.includes("nexus: nexus-ai-chat-importer");
      }
      /**
       * Check if content has non-ISO timestamps (need conversion to ISO 8601)
       * Detects any format that is not already ISO 8601
       */
      hasNonISOTimestamps(content) {
        const frontmatterMatch = content.match(/^---\r?\n([\s\S]*?)\r?\n---/);
        if (!frontmatterMatch) {
          return false;
        }
        const frontmatter = frontmatterMatch[1];
        const hasISO = /^(create|update)_time: \d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/m.test(frontmatter);
        if (hasISO) {
          return false;
        }
        const hasNonISO = /^(create|update)_time: \d{1,4}[\/\.\-]\d{1,2}[\/\.\-]\d{2,4}/m.test(frontmatter);
        return hasNonISO;
      }
      /**
       * Convert any date format to ISO 8601 in frontmatter only
       * Supports: US, EU, DE, JP, and all locale-based formats
       * Uses intelligent DateParser for automatic format detection
       */
      convertTimestampsToISO8601(content) {
        const frontmatterMatch = content.match(/^---\r?\n([\s\S]*?)\r?\n---/);
        if (!frontmatterMatch) {
          return content;
        }
        let frontmatter = frontmatterMatch[1];
        const restOfContent = content.substring(frontmatterMatch[0].length);
        let conversionCount = 0;
        frontmatter = frontmatter.replace(
          /^(create|update)_time: (.+)$/gm,
          (match, field, dateStr) => {
            if (/^\d{4}-\d{2}-\d{2}[T ]\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/.test(dateStr)) {
              return match;
            }
            let isoDate = DateParser.convertToISO8601(dateStr);
            if (!isoDate && this.globalOrder) {
              isoDate = DateParser.convertToISO8601WithOrder(dateStr, this.globalOrder);
            }
            if (!isoDate) {
              console.warn(`convertTimestampsToISO8601 - FAILED to convert: ${dateStr}`);
              return match;
            }
            conversionCount++;
            return `${field}_time: ${isoDate}`;
          }
        );
        return `---
${frontmatter}
---${restOfContent}`;
      }
      /**
       * Update plugin_version in frontmatter
       */
      updatePluginVersion(content, version) {
        return content.replace(
          /^plugin_version: ".*?"$/m,
          `plugin_version: "${version}"`
        );
      }
      async verify(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder || context.plugin.settings.archiveFolder || "Nexus/Conversations";
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          }).slice(0, 5);
          for (const file of conversationFiles) {
            try {
              const content = await context.plugin.app.vault.read(file);
              if (!this.isNexusFile(content)) {
                continue;
              }
              if (this.hasNonISOTimestamps(content)) {
                return false;
              }
              if (!content.includes('plugin_version: "1.3.0"')) {
                return false;
              }
            } catch (error) {
              console.error(`Error verifying file ${file.path}:`, error);
              return false;
            }
          }
          return true;
        } catch (error) {
          console.error(`ConvertToISO8601Timestamps.verify failed:`, error);
          return false;
        }
      }
    };
    __name(ConvertToISO8601TimestampsOperation, "ConvertToISO8601TimestampsOperation");
    FixFrontmatterAliasesOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "fix-frontmatter-aliases";
        this.name = "Fix Frontmatter Aliases";
        this.description = "Fixes YAML syntax errors in conversation aliases. Properly quotes titles containing special characters (colons, brackets, etc.) to prevent frontmatter parsing errors.";
        this.type = "automatic";
      }
      async canRun(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder || context.plugin.settings.archiveFolder || "Nexus/Conversations";
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          });
          for (const file of conversationFiles.slice(0, 10)) {
            try {
              const content = await context.plugin.app.vault.read(file);
              if (!this.isNexusFile(content)) {
                continue;
              }
              if (this.hasProblematicAlias(content)) {
                return true;
              }
            } catch (error) {
              console.error(`Error checking file ${file.path}:`, error);
            }
          }
          return false;
        } catch (error) {
          console.error(`FixFrontmatterAliases.canRun failed:`, error);
          return false;
        }
      }
      async execute(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder || context.plugin.settings.archiveFolder || "Nexus/Conversations";
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          });
          let processed = 0;
          let fixed = 0;
          let skipped = 0;
          let errors = 0;
          const batchSize = 10;
          for (let i = 0; i < conversationFiles.length; i += batchSize) {
            const batch = conversationFiles.slice(i, i + batchSize);
            for (const file of batch) {
              processed++;
              try {
                const content = await context.plugin.app.vault.read(file);
                if (!this.isNexusFile(content)) {
                  skipped++;
                  continue;
                }
                if (!this.hasProblematicAlias(content)) {
                  continue;
                }
                const fixedContent = this.fixAliases(content);
                if (content !== fixedContent) {
                  await context.plugin.app.vault.modify(file, fixedContent);
                  fixed++;
                }
              } catch (error) {
                errors++;
                console.error(`Error fixing aliases in ${file.path}:`, error);
              }
            }
            if (i + batchSize < conversationFiles.length) {
              await new Promise((resolve) => setTimeout(resolve, 10));
            }
          }
          const results = [];
          results.push(`**What this does:**`);
          results.push(`Fixes YAML syntax errors in conversation aliases caused by special characters.`);
          results.push(`Properly quotes titles containing colons, brackets, etc. to prevent parsing errors.`);
          results.push(``);
          results.push(`**Summary:**`);
          results.push(``);
          results.push(`- Total files scanned: ${processed}`);
          results.push(`- Fixed: ${fixed}`);
          results.push(`- Skipped (non-Nexus): ${skipped}`);
          if (errors > 0) {
            results.push(`- Errors: ${errors}`);
          }
          return {
            success: errors === 0,
            message: `Fixed ${fixed} conversation(s) with problematic aliases.`,
            details: results
          };
        } catch (error) {
          console.error(`FixFrontmatterAliases.execute failed:`, error);
          return {
            success: false,
            message: `Alias fix failed: ${error}`,
            details: { error: String(error) }
          };
        }
      }
      /**
       * Check if file belongs to Nexus plugin
       */
      isNexusFile(content) {
        return content.includes("nexus: nexus-ai-chat-importer");
      }
      /**
       * Check if content has problematic aliases (YAML special characters without proper quoting)
       */
      hasProblematicAlias(content) {
        const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
        if (!frontmatterMatch)
          return false;
        const frontmatter = frontmatterMatch[1];
        const aliasMatch = frontmatter.match(/^aliases: (.+)$/m);
        if (!aliasMatch)
          return false;
        const aliasValue = aliasMatch[1];
        if (aliasValue.startsWith("'") && aliasValue.endsWith("'")) {
          return false;
        }
        if (aliasValue.startsWith('"') && aliasValue.endsWith('"')) {
          return true;
        }
        const needsQuoting = aliasValue.includes(":") || aliasValue.includes("[") || aliasValue.includes("]") || aliasValue.includes("{") || aliasValue.includes("}") || aliasValue.includes('"') || /^(true|false|null|yes|no|on|off|\d+|\d*\.\d+)$/i.test(aliasValue) || aliasValue.startsWith("#") || aliasValue.startsWith("&") || aliasValue.startsWith("*") || aliasValue.startsWith("!") || aliasValue.startsWith("|") || aliasValue.startsWith(">") || aliasValue.startsWith("%") || aliasValue.startsWith("@") || aliasValue.startsWith("`");
        return needsQuoting;
      }
      /**
       * Fix aliases in frontmatter using generateSafeAlias
       */
      fixAliases(content) {
        const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
        if (!frontmatterMatch)
          return content;
        let frontmatter = frontmatterMatch[1];
        const restOfContent = content.substring(frontmatterMatch[0].length);
        frontmatter = frontmatter.replace(
          /^aliases: (.+)$/m,
          (_m, aliasValue) => {
            let cleanAlias = aliasValue.trim();
            if (cleanAlias.startsWith('"') && cleanAlias.endsWith('"') || cleanAlias.startsWith("'") && cleanAlias.endsWith("'")) {
              cleanAlias = cleanAlias.slice(1, -1);
            }
            cleanAlias = cleanAlias.replace(/''/g, "'");
            const safeAlias = generateSafeAlias(cleanAlias);
            return `aliases: ${safeAlias}`;
          }
        );
        return `---
${frontmatter}
---${restOfContent}`;
      }
      async verify(context) {
        try {
          const conversationFolder = context.plugin.settings.conversationFolder || context.plugin.settings.archiveFolder || "Nexus/Conversations";
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const conversationFiles = allFiles.filter((file) => {
            if (!file.path.startsWith(conversationFolder))
              return false;
            const relativePath = file.path.substring(conversationFolder.length + 1);
            if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
              return false;
            }
            return true;
          }).slice(0, 5);
          for (const file of conversationFiles) {
            try {
              const content = await context.plugin.app.vault.read(file);
              if (!this.isNexusFile(content)) {
                continue;
              }
              if (this.hasProblematicAlias(content)) {
                return false;
              }
            } catch (error) {
              console.error(`Error verifying file ${file.path}:`, error);
              return false;
            }
          }
          return true;
        } catch (error) {
          console.error(`FixFrontmatterAliases.verify failed:`, error);
          return false;
        }
      }
    };
    __name(FixFrontmatterAliasesOperation, "FixFrontmatterAliasesOperation");
    MigrateToSeparateFoldersOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "migrate-to-separate-folders";
        this.name = "Implement Separate Folder Settings";
        this.description = "Creates dedicated settings for Reports folder location and moves Reports from inside Conversations to the vault root for better organization.";
        this.type = "automatic";
      }
      async canRun(context) {
        const reportFolder = context.plugin.settings.reportFolder;
        const archiveFolder = context.plugin.settings.archiveFolder || "Nexus/Conversations";
        const oldReportPath = `${archiveFolder}/Reports`;
        return !reportFolder || reportFolder === "" || reportFolder === oldReportPath;
      }
      async execute(context) {
        const results = [];
        try {
          results.push(`**What this does:**`);
          results.push(`Version 1.3.0 adds a dedicated setting for the Reports folder location.`);
          results.push(`To prevent reports from moving when you reorganize conversations, we're moving the Reports folder to the vault root.`);
          results.push(``);
          const oldArchiveFolder = context.plugin.settings.archiveFolder || "Nexus/Conversations";
          const oldReportPath = `${oldArchiveFolder}/Reports`;
          const newReportPath = "Nexus Reports";
          const oldReportFolder = context.plugin.app.vault.getAbstractFileByPath(oldReportPath);
          let reportsMoved = false;
          if (oldReportFolder && oldReportFolder instanceof import_obsidian23.TFolder) {
            try {
              const result = await moveAndMergeFolders(oldReportFolder, newReportPath, context.plugin.app.vault);
              reportsMoved = result.moved > 0;
              try {
                const stillExists = await context.plugin.app.vault.adapter.exists(oldReportPath);
                if (stillExists) {
                  const folderToDelete = context.plugin.app.vault.getAbstractFileByPath(oldReportPath);
                  if (folderToDelete && folderToDelete instanceof import_obsidian23.TFolder) {
                    await context.plugin.app.vault.delete(folderToDelete);
                  }
                }
              } catch (deleteError) {
              }
              if (result.success && result.skipped === 0) {
                results.push(`\u2705 Reports folder moved: \`${oldReportPath}\` \u2192 \`${newReportPath}\` (${result.moved} file(s))`);
              } else {
                results.push(`\u26A0\uFE0F Reports folder migration completed with warnings:`);
                results.push(`   - Successfully moved: ${result.moved} file(s)`);
                if (result.skipped > 0) {
                  results.push(`   - Skipped (already exist): ${result.skipped} file(s)`);
                }
                if (result.errors > 0) {
                  results.push(`   - Errors: ${result.errors} file(s)`);
                }
              }
            } catch (error) {
              console.error(`[MigrateReportsFolder] Failed to move Reports folder:`, error);
              context.plugin.settings.reportFolder = oldReportPath;
              results.push(`\u26A0\uFE0F Reports folder could not be moved automatically.`);
              results.push(`   Current location: \`${oldReportPath}\``);
              results.push(`   You can move it manually later in settings.`);
            }
          } else {
            results.push(`\u2139\uFE0F No existing Reports folder found. New reports will be created in \`${newReportPath}\``);
          }
          if (reportsMoved || !oldReportFolder) {
            context.plugin.settings.reportFolder = newReportPath;
          }
          await context.plugin.saveSettings();
          return {
            success: true,
            message: "Reports folder migrated successfully",
            details: results
          };
        } catch (error) {
          const errorMsg = error instanceof Error ? error.message : String(error);
          console.error(`[MigrateReportsFolder] Failed:`, error);
          results.push(`\u274C Error: ${errorMsg}`);
          return {
            success: false,
            message: `Failed to migrate Reports folder: ${errorMsg}`,
            details: results
          };
        }
      }
      async verify(context) {
        try {
          return !!context.plugin.settings.reportFolder;
        } catch (error) {
          console.error(`MigrateReportsFolder.verify failed:`, error);
          return false;
        }
      }
    };
    __name(MigrateToSeparateFoldersOperation, "MigrateToSeparateFoldersOperation");
    MigrateClaudeArtifactsOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "migrate-claude-artifacts";
        this.name = "Migrate Claude Artifacts";
        this.description = "Updates existing Claude artifacts: removes redundant header information (already in frontmatter), adds missing conversation links, and adds creation timestamps for better organization.";
        this.type = "automatic";
      }
      async canRun(context) {
        var _a;
        try {
          const attachmentFolder = context.plugin.settings.attachmentFolder || "Nexus AI Chat Imports/Attachments";
          const claudeArtifactsPath = `${attachmentFolder}/claude/artifacts`;
          const folder = context.plugin.app.vault.getAbstractFileByPath(claudeArtifactsPath);
          if (!folder || !(folder instanceof import_obsidian23.TFolder)) {
            return false;
          }
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const artifactFiles = allFiles.filter((file) => file.path.startsWith(claudeArtifactsPath));
          if (artifactFiles.length === 0) {
            return false;
          }
          for (const file of artifactFiles) {
            const fm = (_a = context.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
            if (!fm || fm.provider !== "claude")
              continue;
            if (!fm.create_time) {
              return true;
            }
            const content = await context.plugin.app.vault.read(file);
            if (content.includes("**Type:** Claude Artifact") || content.includes("**Command:**") || content.includes("**UUID:**")) {
              return true;
            }
          }
          return false;
        } catch (error) {
          console.error(`MigrateClaudeArtifacts.canRun failed:`, error);
          return false;
        }
      }
      async execute(context) {
        var _a;
        const results = [];
        let totalFiles = 0;
        let processedCount = 0;
        let skippedCount = 0;
        let updatedCount = 0;
        let errorCount = 0;
        let warningCount = 0;
        try {
          const attachmentFolder = context.plugin.settings.attachmentFolder || "Nexus AI Chat Imports/Attachments";
          const conversationFolder = context.plugin.settings.conversationFolder || "Nexus/Conversations";
          const claudeArtifactsPath = `${attachmentFolder}/claude/artifacts`;
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const artifactFiles = allFiles.filter((file) => file.path.startsWith(claudeArtifactsPath));
          totalFiles = artifactFiles.length;
          results.push(`**What this does:**`);
          results.push(`Updates your existing Claude artifacts to the new format:`);
          results.push(`- Removes redundant header information (Type, Language, Command, etc.)`);
          results.push(`- Adds missing conversation links`);
          results.push(`- Adds creation timestamps for better organization`);
          results.push(``);
          results.push(`**Processing ${totalFiles} artifact file(s)...**`);
          results.push(``);
          for (const file of artifactFiles) {
            try {
              const fm = (_a = context.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if (!fm || fm.provider !== "claude") {
                skippedCount++;
                continue;
              }
              processedCount++;
              let content = await context.plugin.app.vault.read(file);
              let modified = false;
              let warnings = [];
              const fmMatch = content.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);
              if (!fmMatch) {
                errorCount++;
                results.push(`\u274C ${file.basename}: Invalid frontmatter format`);
                continue;
              }
              let frontmatter = fmMatch[1];
              let body = fmMatch[2];
              if (!fm.create_time) {
                const createTime = await this.extractArtifactCreateTime(
                  fm,
                  conversationFolder,
                  context.plugin,
                  file
                );
                if (createTime.source === "message") {
                  frontmatter += `
create_time: ${createTime.value}`;
                  modified = true;
                } else if (createTime.source === "conversation") {
                  frontmatter += `
create_time: ${createTime.value}`;
                  warnings.push(`Used conversation create_time (message not found)`);
                  warningCount++;
                  modified = true;
                } else {
                  warnings.push(`Could not determine create_time`);
                  warningCount++;
                  console.warn(`${file.basename}: TASK 1 - FAILED to determine create_time`);
                }
              } else {
              }
              const headerRegex = /\n\n\*\*Type:\*\* Claude Artifact\n\*\*Language:\*\*[^\n]*(?:\n\*\*Command:\*\*[^\n]*)?(?:\n\*\*Version:\*\*[^\n]*)?(?:\n\*\*ID:\*\*[^\n]*)?(?:\n\*\*UUID:\*\*[^\n]*)?/;
              if (headerRegex.test(body)) {
                body = body.replace(headerRegex, "");
                modified = true;
              } else {
              }
              if (!body.includes("**Conversation:**") && fm.conversation_id) {
                const conversationLink = await this.findConversationLink(
                  fm.conversation_id,
                  conversationFolder,
                  context.plugin
                );
                if (conversationLink) {
                  const titleMatch = body.match(/^# [^\n]+\n/);
                  if (titleMatch) {
                    const insertPos = titleMatch[0].length;
                    body = body.substring(0, insertPos) + `
**Conversation:** ${conversationLink}
` + body.substring(insertPos);
                    modified = true;
                  } else {
                    console.warn(`${file.basename}: TASK 3 - Could not find title to insert link after`);
                  }
                } else {
                  warnings.push(`Conversation note not found (ID: ${fm.conversation_id})`);
                  warningCount++;
                  console.warn(`${file.basename}: TASK 3 - Conversation note not found for ID ${fm.conversation_id}`);
                }
              } else if (body.includes("**Conversation:**")) {
              } else {
              }
              const needsVersionUpdate = !frontmatter.includes('plugin_version: "1.3.0"');
              if (modified || needsVersionUpdate) {
                if (frontmatter.includes("plugin_version:")) {
                  frontmatter = frontmatter.replace(
                    /^plugin_version: .*$/m,
                    `plugin_version: "1.3.0"`
                  );
                } else {
                  frontmatter += `
plugin_version: "1.3.0"`;
                }
                const newContent = `---
${frontmatter}
---
${body}`;
                await context.plugin.app.vault.modify(file, newContent);
                updatedCount++;
                if (modified) {
                } else {
                }
                if (warnings.length > 0) {
                  results.push(`\u26A0\uFE0F  ${file.basename}: ${warnings.join(", ")}`);
                }
              } else {
              }
            } catch (error) {
              errorCount++;
              console.error(`${file.basename}: \u274C ERROR:`, error);
              results.push(`\u274C ${file.basename}: ${error.message}`);
            }
          }
          results.push(``);
          results.push(`**Summary:**`);
          results.push(``);
          results.push(`- Total files found: ${totalFiles}`);
          results.push(`- Claude artifacts: ${processedCount}`);
          results.push(`- Skipped (non-Claude): ${skippedCount}`);
          results.push(`- Updated: ${updatedCount}`);
          results.push(`- Warnings: ${warningCount}`);
          results.push(`- Errors: ${errorCount}`);
          results.push(``);
          if (skippedCount > 0) {
            results.push(`*Note: ${skippedCount} file(s) were skipped because they are not Claude artifacts.*`);
          }
          return {
            success: errorCount === 0,
            message: `Migrated ${updatedCount} artifact(s) with ${warningCount} warning(s) and ${errorCount} error(s)`,
            details: results
          };
        } catch (error) {
          return {
            success: false,
            message: `Migration failed: ${error.message}`,
            details: results
          };
        }
      }
      /**
       * Extract artifact create_time from conversation note
       */
      async extractArtifactCreateTime(artifactFm, conversationFolder, plugin, artifactFile) {
        var _a, _b, _c;
        const artifactId = artifactFm.artifact_id;
        const versionNumber = artifactFm.version_number;
        const conversationId = artifactFm.conversation_id;
        const artifactRef = `${artifactId}_v${versionNumber}`;
        try {
          if (!conversationId) {
            console.warn(`Artifact ${artifactRef}: No conversation_id in frontmatter`);
            return { value: "", source: "none" };
          }
          const conversationFile = await this.findConversationFile(conversationId, conversationFolder, plugin);
          if (!conversationFile) {
            console.warn(`Artifact ${artifactRef}: Conversation file not found for ID ${conversationId}`);
            return { value: "", source: "none" };
          }
          const content = await plugin.app.vault.read(conversationFile);
          if (!artifactId || !versionNumber) {
            console.warn(`Artifact ${artifactRef}: Missing artifact_id or version_number, using conversation fallback`);
            const fm2 = (_a = plugin.app.metadataCache.getFileCache(conversationFile)) == null ? void 0 : _a.frontmatter;
            if (fm2 == null ? void 0 : fm2.create_time) {
              return { value: fm2.create_time, source: "conversation" };
            }
            return { value: "", source: "none" };
          }
          const artifactLinkPath = artifactFile.path.replace(/\.md$/, "");
          const escapedPath = artifactLinkPath.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
          const linkPattern = new RegExp(`\\[\\[${escapedPath}\\|View Artifact\\]\\]`, "m");
          const linkMatch = content.match(linkPattern);
          if (!linkMatch || linkMatch.index === void 0) {
            console.warn(`Artifact ${artifactRef}: Artifact link not found in conversation, using conversation fallback`);
            const fm2 = (_b = plugin.app.metadataCache.getFileCache(conversationFile)) == null ? void 0 : _b.frontmatter;
            if (fm2 == null ? void 0 : fm2.create_time) {
              return { value: fm2.create_time, source: "conversation" };
            }
            return { value: "", source: "none" };
          }
          const linkIndex = linkMatch.index;
          const textBeforeLink = content.substring(0, linkIndex);
          const contextStart = Math.max(0, linkIndex - 300);
          const contextText = content.substring(contextStart, linkIndex);
          const agentPattern = />\[!nexus_agent\] \*\*Assistant\*\* - ([^\n]+)/gm;
          let lastMatch = null;
          let match;
          let matchCount = 0;
          while ((match = agentPattern.exec(textBeforeLink)) !== null) {
            matchCount++;
            lastMatch = match;
          }
          if (lastMatch && lastMatch[1]) {
            const timestampStr = lastMatch[1];
            const timestamp = DateParser.parseDate(timestampStr, artifactRef);
            if (timestamp > 0) {
              const isoDate = new Date(timestamp * 1e3).toISOString();
              return {
                value: isoDate,
                source: "message"
              };
            } else {
              console.warn(`Artifact ${artifactRef}: \u274C Timestamp parsing FAILED (returned 0), using conversation fallback`);
              console.warn(`Artifact ${artifactRef}: Failed timestamp string was: "${timestampStr}"`);
            }
          } else {
            console.warn(`Artifact ${artifactRef}: \u274C No agent callout found before artifact link, using conversation fallback`);
            const sampleText = textBeforeLink.substring(Math.max(0, textBeforeLink.length - 500));
            console.warn(`Artifact ${artifactRef}: Last 500 chars of search text:
${sampleText}`);
          }
          const fm = (_c = plugin.app.metadataCache.getFileCache(conversationFile)) == null ? void 0 : _c.frontmatter;
          if (fm == null ? void 0 : fm.create_time) {
            return { value: fm.create_time, source: "conversation" };
          }
          console.warn(`Artifact ${artifactRef}: No create_time available`);
          return { value: "", source: "none" };
        } catch (error) {
          console.error(`Artifact ${artifactRef}: Exception during create_time extraction:`, error);
          return { value: "", source: "none" };
        }
      }
      /**
       * Find conversation file by ID
       */
      async findConversationFile(conversationId, conversationFolder, plugin) {
        var _a;
        const allFiles = plugin.app.vault.getMarkdownFiles();
        const claudePath = `${conversationFolder}/claude`;
        for (const file of allFiles) {
          if (!file.path.startsWith(claudePath))
            continue;
          const fm = (_a = plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if ((fm == null ? void 0 : fm.conversation_id) === conversationId) {
            return file;
          }
        }
        return null;
      }
      /**
       * Find and generate conversation link
       */
      async findConversationLink(conversationId, conversationFolder, plugin) {
        var _a;
        const conversationFile = await this.findConversationFile(conversationId, conversationFolder, plugin);
        if (!conversationFile) {
          return null;
        }
        const fm = (_a = plugin.app.metadataCache.getFileCache(conversationFile)) == null ? void 0 : _a.frontmatter;
        const title = (fm == null ? void 0 : fm.aliases) || conversationFile.basename;
        const linkPath = conversationFile.path.replace(/\.md$/, "");
        return `[[${linkPath}|${title}]]`;
      }
      async verify(context) {
        var _a;
        try {
          const attachmentFolder = context.plugin.settings.attachmentFolder || "Nexus AI Chat Imports/Attachments";
          const claudeArtifactsPath = `${attachmentFolder}/claude/artifacts`;
          const allFiles = context.plugin.app.vault.getMarkdownFiles();
          const artifactFiles = allFiles.filter((file) => file.path.startsWith(claudeArtifactsPath));
          for (const file of artifactFiles) {
            const fm = (_a = context.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
            if ((fm == null ? void 0 : fm.provider) === "claude" && !fm.create_time) {
              return false;
            }
          }
          return true;
        } catch (error) {
          console.error(`MigrateClaudeArtifacts.verify failed:`, error);
          return false;
        }
      }
    };
    __name(MigrateClaudeArtifactsOperation, "MigrateClaudeArtifactsOperation");
    ConfigureFolderLocationsOperation = class extends UpgradeOperation {
      constructor() {
        super(...arguments);
        this.id = "configure-folder-locations";
        this.name = "Configure Folder Locations";
        this.description = "Configure separate folder locations for conversations, reports, and attachments. Optionally migrate existing files to new locations.";
        this.type = "automatic";
      }
      async canRun(_context) {
        return true;
      }
      async execute(context) {
        return new Promise((resolve) => {
          const dialog = new ConfigureFolderLocationsDialog(
            context.plugin,
            async (result) => {
              const details = [];
              if (result.reportFolder.changed) {
                details.push(`\u2705 Report folder: ${result.reportFolder.oldPath} \u2192 ${result.reportFolder.newPath}`);
              } else {
                details.push(`\u2139\uFE0F  Report folder: ${result.reportFolder.newPath} (unchanged)`);
              }
              resolve({
                success: true,
                message: "Report folder location configured successfully",
                details
              });
            }
          );
          dialog.open();
        });
      }
    };
    __name(ConfigureFolderLocationsOperation, "ConfigureFolderLocationsOperation");
    Upgrade130 = class extends VersionUpgrade {
      constructor() {
        super(...arguments);
        this.version = "1.3.0";
        this.automaticOperations = [
          new MigrateToSeparateFoldersOperation(),
          new ConvertToISO8601TimestampsOperation(),
          new FixFrontmatterAliasesOperation(),
          new MigrateClaudeArtifactsOperation(),
          new ConfigureFolderLocationsOperation()
        ];
        this.manualOperations = [
          // No manual operations for this version
        ];
      }
    };
    __name(Upgrade130, "Upgrade130");
  }
});

// src/dialogs/upgrade-complete-modal.ts
var upgrade_complete_modal_exports = {};
__export(upgrade_complete_modal_exports, {
  UpgradeCompleteModal: () => UpgradeCompleteModal
});
var import_obsidian24, UpgradeCompleteModal;
var init_upgrade_complete_modal = __esm({
  "src/dialogs/upgrade-complete-modal.ts"() {
    "use strict";
    import_obsidian24 = require("obsidian");
    init_kofi_support_box();
    UpgradeCompleteModal = class extends import_obsidian24.Modal {
      constructor(app, plugin, version) {
        super(app);
        this.plugin = plugin;
        this.version = version;
      }
      onOpen() {
        const { containerEl, titleEl, modalEl } = this;
        modalEl.classList.add("nexus-upgrade-complete-modal");
        modalEl.style.width = "800px";
        modalEl.style.maxWidth = "90vw";
        titleEl.setText(`\u2705 Upgrade Complete - v${this.version}`);
        this.createContent();
      }
      onClose() {
        this.contentEl.empty();
      }
      async createContent() {
        const { contentEl } = this;
        this.addKofiSection();
        await this.addReleaseNotes();
        this.addCloseButton();
        this.addStyles();
      }
      addKofiSection() {
        createKofiSupportBox(this.contentEl);
      }
      async addReleaseNotes() {
        let content = `## \u2728 What's New

- **\u{1F5C2}\uFE0F Separate Reports Folder** - Better organization, easier to exclude from sync
- **\u{1F30D} International Date Support** - Works in all languages, no more MM/DD confusion
- **\u{1F333} Visual Folder Browser** - Tree-based navigation, create folders on the fly
- **\u{1F3AF} Enhanced Selective Import** - Better preview, duplicate detection across ZIPs
- **\u{1F4CE} Improved Attachments** - DALL-E images with prompts, better formatting

## \u{1F3A8} Improvements

- Redesigned Settings page - easier to find what you need
- Faster imports - especially for large collections
- Better progress messages - know exactly what's happening
- More detailed reports - see exactly what was imported
- Clearer dialogs - less confusing text

## \u{1F41B} Bug Fixes

- Fixed timestamp parsing for non-US locales
- Fixed folder deletion after migration
- Fixed link updates in Claude artifacts
- Fixed duplicate conversations in multi-ZIP imports
- Fixed special characters in conversation titles
- Fixed DALL-E images display
- Fixed progress modal accuracy
- Fixed UI elements overflow
- And many more...`;
        try {
          const response = await fetch(`https://api.github.com/repos/Superkikim/nexus-ai-chat-importer/releases/tags/v${this.version}`);
          if (response.ok) {
            const release = await response.json();
            if (release.body) {
              content = release.body;
            }
          }
        } catch (error) {
        }
        const contentDiv = this.contentEl.createDiv({ cls: "nexus-upgrade-notes" });
        await import_obsidian24.MarkdownRenderer.render(
          this.app,
          content,
          contentDiv,
          "",
          this.plugin
        );
      }
      addCloseButton() {
        const buttonContainer = this.contentEl.createDiv({ cls: "nexus-upgrade-button-container" });
        const button = buttonContainer.createEl("button", {
          text: "Got it!",
          cls: "mod-cta nexus-upgrade-button"
        });
        button.addEventListener("click", () => {
          this.close();
        });
      }
      addStyles() {
        const style = document.createElement("style");
        style.textContent = `
            /* Modal sizing - LARGE by default */
            .nexus-upgrade-complete-modal .modal {
                width: 800px !important;
                max-width: 90vw !important;
                max-height: 85vh;
            }

            .nexus-upgrade-complete-modal .modal-content {
                padding: 0;
                overflow-y: auto;
                max-height: calc(85vh - 100px);
            }

            /* Ko-fi section */
            .nexus-kofi-section {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 2em;
                border-radius: 8px;
                margin-bottom: 2em;
                text-align: center;
            }

            .nexus-kofi-header {
                margin-bottom: 1em;
            }

            .nexus-kofi-title {
                font-size: 1.5em;
                font-weight: bold;
            }

            .nexus-kofi-message {
                margin-bottom: 1.5em;
                line-height: 1.6;
            }

            .nexus-kofi-message p {
                margin: 0.5em 0;
            }

            .nexus-kofi-button-container {
                margin: 1.5em 0;
            }

            .nexus-kofi-link {
                display: inline-block;
                transition: transform 0.2s;
            }

            .nexus-kofi-link:hover {
                transform: scale(1.05);
            }

            .nexus-kofi-amounts {
                margin-top: 1em;
                font-size: 0.95em;
            }

            .nexus-kofi-amounts-title {
                margin-bottom: 0.5em;
                opacity: 0.9;
            }

            .nexus-kofi-amounts-list {
                display: flex;
                justify-content: center;
                gap: 1.5em;
                flex-wrap: wrap;
            }

            .nexus-kofi-amount {
                background: rgba(255, 255, 255, 0.2);
                padding: 0.5em 1em;
                border-radius: 20px;
                font-weight: 500;
            }

            /* Release notes content */
            .nexus-upgrade-notes {
                padding: 0 1em;
                margin-bottom: 2em;
            }

            .nexus-upgrade-notes h2 {
                color: var(--text-accent);
                margin-top: 1.5em;
                margin-bottom: 0.8em;
                border-bottom: 2px solid var(--background-modifier-border);
                padding-bottom: 0.3em;
            }

            .nexus-upgrade-notes h2:first-child {
                margin-top: 0;
            }

            .nexus-upgrade-notes ul {
                margin-left: 1.5em;
                line-height: 1.8;
            }

            .nexus-upgrade-notes li {
                margin: 0.5em 0;
            }

            /* Close button */
            .nexus-upgrade-button-container {
                text-align: center;
                padding: 1.5em 0;
                border-top: 1px solid var(--background-modifier-border);
                margin-top: 1em;
            }

            .nexus-upgrade-button {
                padding: 0.8em 3em;
                font-size: 1.1em;
                font-weight: 600;
                border-radius: 8px;
            }
        `;
        document.head.appendChild(style);
      }
    };
    __name(UpgradeCompleteModal, "UpgradeCompleteModal");
  }
});

// src/dialogs/upgrade-modal-1.3.0.ts
var upgrade_modal_1_3_0_exports = {};
__export(upgrade_modal_1_3_0_exports, {
  NexusUpgradeModal130: () => NexusUpgradeModal130
});
var import_obsidian25, NexusUpgradeModal130;
var init_upgrade_modal_1_3_0 = __esm({
  "src/dialogs/upgrade-modal-1.3.0.ts"() {
    "use strict";
    import_obsidian25 = require("obsidian");
    init_kofi_support_box();
    NexusUpgradeModal130 = class extends import_obsidian25.Modal {
      constructor(app, plugin, version, resolve) {
        super(app);
        this.hasResolved = false;
        this.plugin = plugin;
        this.version = version;
        this.resolve = resolve;
      }
      onOpen() {
        var _a;
        const { containerEl, titleEl, modalEl } = this;
        modalEl.classList.add("nexus-upgrade-modal-130");
        titleEl.setText(`\u{1F389} Nexus AI Chat Importer ${this.version}`);
        (_a = this.modalEl.querySelector(".modal-close-button")) == null ? void 0 : _a.remove();
        this.createForm();
      }
      onClose() {
        if (!this.hasResolved) {
          this.resolve("cancel");
        }
      }
      async onClose() {
        this.contentEl.empty();
      }
      async createForm() {
        createKofiSupportBox(this.contentEl);
        this.addMigrationSection();
        this.addMigrationButton();
        let message = `## \u2728 What's New in v1.3.0

- **\u{1F3AF} Selective Conversation Import**: Interactive dialog to choose which conversations to import
- **\u{1F4CA} Enhanced Reports**: Per-file statistics with detailed breakdown
- **\u{1F5C2}\uFE0F Flexible Folders**: Separate settings for conversations, attachments, and reports
- **\u{1F30D} International Support**: ISO 8601 timestamps work with all locales
- **\u{1F41B} 26 Bug Fixes**: Improved stability and reliability

---

### \u{1F4A1} Tip

Try the new **selective import** feature on your next import - you'll love the control it gives you!`;
        try {
          const response = await fetch("https://api.github.com/repos/Superkikim/nexus-ai-chat-importer/releases/tags/v1.3.0");
          if (response.ok) {
            const release = await response.json();
            if (release.body) {
              message = release.body;
            }
          }
        } catch (error) {
        }
        const contentDiv = this.contentEl.createDiv({ cls: "nexus-upgrade-content" });
        await import_obsidian25.MarkdownRenderer.render(
          this.app,
          message,
          contentDiv,
          "",
          this.plugin
        );
        this.addStyles();
      }
      addMigrationSection() {
        const migrationSection = this.contentEl.createDiv({ cls: "nexus-migration-section" });
        const header = migrationSection.createDiv({ cls: "nexus-migration-header" });
        header.innerHTML = `
            <div class="nexus-migration-title">
                \u{1F504} <strong>Migration Required</strong>
            </div>
        `;
        const message = migrationSection.createDiv({ cls: "nexus-migration-message" });
        message.innerHTML = `
            <p>The following tasks will run automatically to upgrade your data to v1.3.0:</p>
        `;
        const taskList = migrationSection.createDiv({ cls: "nexus-migration-tasks" });
        taskList.innerHTML = `
            <ul>
                <li>\u2713 Migrate folder settings to new structure</li>
                <li>\u2713 Update timestamps to ISO 8601 format</li>
                <li>\u2713 Fix frontmatter aliases</li>
                <li>\u2713 Move Reports folder to proper location</li>
                <li>\u2713 Update artifact metadata</li>
            </ul>
        `;
        const estimate = migrationSection.createDiv({ cls: "nexus-migration-estimate" });
        estimate.innerHTML = `
            <p><em>This will take a few seconds.</em></p>
        `;
      }
      addMigrationButton() {
        const buttonContainer = this.contentEl.createDiv({ cls: "nexus-migration-button-container" });
        const migrationButton = buttonContainer.createEl("button", {
          text: "\u{1F680} Run Migration Tasks",
          cls: "mod-cta nexus-migration-button"
        });
        migrationButton.onclick = () => {
          this.hasResolved = true;
          this.resolve("ok");
          this.close();
        };
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
            .modal.nexus-upgrade-modal-130 {
                max-width: 1050px !important;
                width: 1050px !important;
            }

            .nexus-upgrade-content {
                margin-bottom: 20px;
                line-height: 1.6;
            }

            /* Migration Section Styles */
            .nexus-migration-section {
                background: var(--background-secondary);
                border: 2px solid var(--interactive-accent);
                border-radius: 12px;
                padding: 24px;
                margin: 24px 0;
            }

            .nexus-migration-header {
                margin-bottom: 16px;
            }

            .nexus-migration-title {
                font-size: 1.3em;
                text-align: center;
                color: var(--text-normal);
            }

            .nexus-migration-title strong {
                color: var(--interactive-accent);
            }

            .nexus-migration-message {
                text-align: center;
                margin-bottom: 16px;
                color: var(--text-muted);
            }

            .nexus-migration-tasks {
                margin: 16px 0;
            }

            .nexus-migration-tasks ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            .nexus-migration-tasks li {
                padding: 8px 0;
                font-size: 0.95em;
                color: var(--text-normal);
            }

            .nexus-migration-estimate {
                text-align: center;
                margin-top: 16px;
                color: var(--text-muted);
                font-size: 0.9em;
            }

            /* Migration Button Styles */
            .nexus-migration-button-container {
                text-align: center;
                margin: 32px 0;
            }

            .nexus-migration-button {
                padding: 16px 48px !important;
                font-size: 1.2em !important;
                font-weight: 700 !important;
                border-radius: 8px !important;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
                transition: all 0.2s ease !important;
            }

            .nexus-migration-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2) !important;
            }
        `;
        document.head.appendChild(styleEl);
      }
    };
    __name(NexusUpgradeModal130, "NexusUpgradeModal130");
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => NexusAiChatImporterPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian32 = require("obsidian");
init_constants();

// src/ui/settings-tab.ts
var import_obsidian11 = require("obsidian");

// src/ui/settings/support-section.ts
var import_obsidian = require("obsidian");

// src/ui/settings/base-settings-section.ts
var BaseSettingsSection = class {
  constructor(plugin) {
    this.plugin = plugin;
    /**
     * Section order (lower = higher up)
     */
    this.order = 100;
  }
  /**
   * Set redraw callback from main settings tab
   */
  setRedrawCallback(callback) {
    this.redrawCallback = callback;
  }
  /**
   * Trigger redraw of entire settings tab
   */
  redraw() {
    if (this.redrawCallback) {
      this.redrawCallback();
    }
  }
};
__name(BaseSettingsSection, "BaseSettingsSection");

// src/ui/settings/support-section.ts
init_kofi_support_box();
var SupportSection = class extends BaseSettingsSection {
  constructor() {
    super(...arguments);
    this.title = "\u{1F49D} Support & Help";
    this.order = 5;
  }
  render(containerEl) {
    const supportContainer = containerEl.createDiv({ cls: "nexus-support-section" });
    createKofiSupportBox(supportContainer);
    new import_obsidian.Setting(supportContainer).setName("\u{1F4DA} Resources").setDesc("Documentation, release notes, and community links").addButton(
      (button) => button.setButtonText("\u{1F4D6} README").onClick(() => {
        window.open("https://github.com/superkikim/nexus-ai-chat-importer/blob/1.3.0/README.md", "_blank");
      })
    ).addButton(
      (button) => button.setButtonText("\u{1F4DD} Changelog").onClick(() => {
        window.open("https://github.com/superkikim/nexus-ai-chat-importer/blob/1.3.0/RELEASE_NOTES.md", "_blank");
      })
    ).addButton(
      (button) => button.setButtonText("\u{1F41B} Issues").onClick(() => {
        window.open("https://github.com/superkikim/nexus-ai-chat-importer/issues", "_blank");
      })
    ).addButton(
      (button) => button.setButtonText("\u{1F4AC} Forum").onClick(() => {
        window.open("https://forum.obsidian.md/t/plugin-nexus-ai-chat-importer-import-chatgpt-and-claude-conversations-to-your-vault/71664", "_blank");
      })
    );
  }
};
__name(SupportSection, "SupportSection");

// src/ui/settings/folder-settings-section.ts
var import_obsidian8 = require("obsidian");

// src/dialogs/folder-migration-dialog.ts
var import_obsidian2 = require("obsidian");
var FolderMigrationDialog = class extends import_obsidian2.Modal {
  constructor(plugin, oldPath, newPath, folderType, onComplete) {
    super(plugin.app);
    this.oldPath = oldPath;
    this.newPath = newPath;
    this.folderType = folderType;
    this.onComplete = onComplete;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: "Move Existing Files?",
      cls: "nexus-migration-title"
    });
    const messageContainer = contentEl.createDiv({ cls: "nexus-migration-message" });
    messageContainer.createEl("p", {
      text: `You are changing the ${this.folderType} folder location:`
    });
    const pathContainer = messageContainer.createDiv({ cls: "nexus-migration-paths" });
    pathContainer.createEl("div", {
      text: `From: ${this.oldPath}`,
      cls: "nexus-migration-path-old"
    });
    pathContainer.createEl("div", {
      text: `To: ${this.newPath}`,
      cls: "nexus-migration-path-new"
    });
    messageContainer.createEl("p", {
      text: "Do you want to move existing files to the new location?"
    });
    const warningBox = contentEl.createDiv({ cls: "nexus-migration-warning" });
    warningBox.createEl("strong", { text: "\u26A0\uFE0F Important:" });
    warningBox.createEl("p", {
      text: "If you choose 'No', existing files will remain in the old location and will not be impacted by future updates."
    });
    const buttonContainer = contentEl.createDiv({ cls: "nexus-migration-buttons" });
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel",
      cls: "nexus-migration-button-cancel"
    });
    cancelButton.addEventListener("click", async () => {
      this.close();
      try {
        await this.onComplete("cancel");
        new import_obsidian2.Notice(`Change cancelled. Folder setting reverted.`);
      } catch (error) {
        new import_obsidian2.Notice(`Failed to revert setting: ${error.message}`);
      }
    });
    const keepButton = buttonContainer.createEl("button", {
      text: "No, keep files in old location",
      cls: "nexus-migration-button-keep"
    });
    keepButton.addEventListener("click", async () => {
      this.close();
      try {
        await this.onComplete("keep");
        new import_obsidian2.Notice(`Folder setting updated. Files remain in ${this.oldPath}`);
      } catch (error) {
        new import_obsidian2.Notice(`Failed to update setting: ${error.message}`);
      }
    });
    const moveButton = buttonContainer.createEl("button", {
      text: "Yes, move files",
      cls: "mod-cta nexus-migration-button-move"
    });
    moveButton.addEventListener("click", async () => {
      this.close();
      try {
        await this.onComplete("move");
        new import_obsidian2.Notice(`Files moved to ${this.newPath}`);
      } catch (error) {
        new import_obsidian2.Notice(`Failed to move files: ${error.message}`);
      }
    });
    this.addStyles();
  }
  addStyles() {
    const styleEl = document.createElement("style");
    styleEl.textContent = `
            .nexus-migration-title {
                margin-bottom: 1em;
                color: var(--text-normal);
            }

            .nexus-migration-message {
                margin-bottom: 1.5em;
                line-height: 1.6;
            }

            .nexus-migration-paths {
                background-color: var(--background-secondary);
                padding: 1em;
                margin: 1em 0;
                border-radius: 4px;
                font-family: var(--font-monospace);
                font-size: 0.9em;
            }

            .nexus-migration-path-old {
                color: var(--text-muted);
                margin-bottom: 0.5em;
            }

            .nexus-migration-path-new {
                color: var(--interactive-accent);
                font-weight: 500;
            }

            .nexus-migration-warning {
                background-color: var(--background-modifier-error-hover);
                border-left: 4px solid var(--text-error);
                padding: 1em;
                margin-bottom: 1.5em;
                border-radius: 4px;
            }

            .nexus-migration-warning strong {
                display: block;
                margin-bottom: 0.5em;
                color: var(--text-error);
            }

            .nexus-migration-warning p {
                margin: 0;
                color: var(--text-normal);
            }

            .nexus-migration-buttons {
                display: flex;
                justify-content: space-between;
                gap: 10px;
            }

            .nexus-migration-buttons button {
                padding: 8px 16px;
                flex: 1;
            }

            .nexus-migration-button-cancel {
                background-color: var(--background-modifier-border);
                color: var(--text-muted);
            }

            .nexus-migration-button-keep {
                background-color: var(--background-modifier-border);
            }

            .nexus-migration-button-move {
                /* Uses mod-cta class for primary styling */
            }
        `;
    document.head.appendChild(styleEl);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
__name(FolderMigrationDialog, "FolderMigrationDialog");

// src/ui/settings/folder-settings-section.ts
init_folder_tree_browser_modal();
init_folder_validation();
init_utils();
var FolderSettingsSection = class extends BaseSettingsSection {
  constructor() {
    super(...arguments);
    this.title = "\u{1F4C1} Folder Structure";
    this.order = 10;
  }
  render(containerEl) {
    let conversationFolderTextComponent;
    new import_obsidian8.Setting(containerEl).setName("Conversation folder").setDesc("Where imported conversations are stored").addText((text) => {
      conversationFolderTextComponent = text;
      text.setPlaceholder("Nexus/Conversations").setValue(this.plugin.settings.conversationFolder);
      text.inputEl.addClass("nexus-folder-path-input");
      text.inputEl.addClass("nexus-conversation-folder-input");
      text.inputEl.readOnly = true;
      text.inputEl.style.cursor = "default";
    }).addButton((button) => {
      button.setButtonText("Browse").setTooltip("Browse folders or create a new one").onClick(async () => {
        const modal = new FolderTreeBrowserModal(
          this.plugin.app,
          async (path) => {
            if (conversationFolderTextComponent) {
              conversationFolderTextComponent.setValue(path);
              await this.handleFolderChange("conversationFolder", path, "conversations", conversationFolderTextComponent);
            }
          },
          this.plugin.settings.conversationFolder,
          (path) => validateFolderNesting(
            "conversationFolder",
            path,
            this.plugin.settings.conversationFolder,
            this.plugin.settings.reportFolder,
            this.plugin.settings.attachmentFolder
          )
        );
        modal.open();
      });
    });
    let reportFolderTextComponent;
    new import_obsidian8.Setting(containerEl).setName("Reports folder").setDesc("Where import reports are stored").addText((text) => {
      reportFolderTextComponent = text;
      text.setPlaceholder("Nexus Reports").setValue(this.plugin.settings.reportFolder);
      text.inputEl.addClass("nexus-folder-path-input");
      text.inputEl.addClass("nexus-report-folder-input");
      text.inputEl.readOnly = true;
      text.inputEl.style.cursor = "default";
    }).addButton((button) => {
      button.setButtonText("Browse").setTooltip("Browse folders or create a new one").onClick(async () => {
        const modal = new FolderTreeBrowserModal(
          this.plugin.app,
          async (path) => {
            if (reportFolderTextComponent) {
              reportFolderTextComponent.setValue(path);
              await this.handleFolderChange("reportFolder", path, "reports", reportFolderTextComponent);
            }
          },
          this.plugin.settings.reportFolder,
          (path) => validateFolderNesting(
            "reportFolder",
            path,
            this.plugin.settings.conversationFolder,
            this.plugin.settings.reportFolder,
            this.plugin.settings.attachmentFolder
          )
        );
        modal.open();
      });
    });
    let attachmentFolderTextComponent;
    new import_obsidian8.Setting(containerEl).setName("Attachment folder").setDesc("Where attachments are stored (\u26A0\uFE0F Exclude from sync to save space)").addText((text) => {
      attachmentFolderTextComponent = text;
      text.setPlaceholder("Nexus/Attachments").setValue(this.plugin.settings.attachmentFolder);
      text.inputEl.addClass("nexus-folder-path-input");
      text.inputEl.addClass("nexus-attachment-folder-input");
      text.inputEl.readOnly = true;
      text.inputEl.style.cursor = "default";
    }).addButton((button) => {
      button.setButtonText("Browse").setTooltip("Browse folders or create a new one").onClick(async () => {
        const modal = new FolderTreeBrowserModal(
          this.plugin.app,
          async (path) => {
            if (attachmentFolderTextComponent) {
              attachmentFolderTextComponent.setValue(path);
              await this.handleFolderChange("attachmentFolder", path, "attachments", attachmentFolderTextComponent);
            }
          },
          this.plugin.settings.attachmentFolder,
          (path) => validateFolderNesting(
            "attachmentFolder",
            path,
            this.plugin.settings.conversationFolder,
            this.plugin.settings.reportFolder,
            this.plugin.settings.attachmentFolder
          )
        );
        modal.open();
      });
    });
  }
  async handleFolderChange(settingKey, newPath, folderType, textComponent) {
    var _a;
    const oldPath = this.plugin.settings[settingKey];
    if (oldPath === newPath) {
      return;
    }
    const validation = validateFolderNesting(
      settingKey,
      newPath,
      this.plugin.settings.conversationFolder,
      this.plugin.settings.reportFolder,
      this.plugin.settings.attachmentFolder
    );
    if (!validation.valid) {
      this.showErrorDialog("Invalid Folder Location", (_a = validation.error) != null ? _a : "Invalid folder configuration");
      textComponent.setValue(oldPath);
      return;
    }
    const oldFolder = this.plugin.app.vault.getAbstractFileByPath(oldPath);
    if (!oldFolder || !(oldFolder instanceof import_obsidian8.TFolder)) {
      this.plugin.settings[settingKey] = newPath;
      await this.plugin.saveSettings();
      return;
    }
    const hasContent = oldFolder.children.length > 0;
    if (!hasContent) {
      this.plugin.settings[settingKey] = newPath;
      await this.plugin.saveSettings();
      return;
    }
    const newFolder = this.plugin.app.vault.getAbstractFileByPath(newPath);
    if (newFolder && newFolder instanceof import_obsidian8.TFolder && newFolder.children.length > 0) {
      this.showErrorDialog(
        "Target Folder Not Empty",
        `The folder "${newPath}" already contains files.

To change the folder location:
\u2022 Move existing files manually in Obsidian, OR
\u2022 Choose an empty folder or create a new one`
      );
      textComponent.setValue(oldPath);
      return;
    }
    const useEnhancedDialog = settingKey === "attachmentFolder" || settingKey === "conversationFolder";
    if (useEnhancedDialog) {
      Promise.resolve().then(() => (init_enhanced_folder_migration_dialog(), enhanced_folder_migration_dialog_exports)).then(({ EnhancedFolderMigrationDialog: EnhancedFolderMigrationDialog2 }) => {
        const dialog = new EnhancedFolderMigrationDialog2(
          this.plugin,
          oldPath,
          newPath,
          folderType,
          async (action) => {
            await this.handleMigrationAction(action, oldPath, newPath, oldFolder, settingKey, textComponent);
          }
        );
        dialog.open();
      }).catch((error) => {
        this.plugin.logger.error("Failed to load enhanced dialog:", error);
        const dialog = new FolderMigrationDialog(
          this.plugin,
          oldPath,
          newPath,
          folderType,
          async (action) => {
            await this.handleMigrationAction(action, oldPath, newPath, oldFolder, settingKey, textComponent);
          }
        );
        dialog.open();
      });
    } else {
      const dialog = new FolderMigrationDialog(
        this.plugin,
        oldPath,
        newPath,
        folderType,
        async (action) => {
          await this.handleMigrationAction(action, oldPath, newPath, oldFolder, settingKey, textComponent);
        }
      );
      dialog.open();
    }
  }
  /**
   * Handle migration action (extracted for reuse between dialog types)
   */
  async handleMigrationAction(action, oldPath, newPath, oldFolder, settingKey, textComponent) {
    if (action === "cancel") {
      textComponent.setValue(oldPath);
      return;
    }
    if (action === "move") {
      try {
        const result = await moveAndMergeFolders(oldFolder, newPath, this.plugin.app.vault);
        if (settingKey === "conversationFolder" || settingKey === "attachmentFolder") {
          await this.updateLinksAfterMove(settingKey, oldPath, newPath);
        }
        if (result.success && result.skipped === 0) {
          new import_obsidian8.Notice(`\u2705 Files moved to ${newPath}`);
        } else {
          this.showMergeResultDialog(result, oldPath, newPath);
        }
      } catch (error) {
        this.plugin.logger.error(`[FolderSettings] Migration failed:`, error);
        this.showErrorDialog("Migration Failed", `Failed to move files: ${error.message}`);
        throw error;
      }
    }
    this.plugin.settings[settingKey] = newPath;
    await this.plugin.saveSettings();
  }
  /**
   * Update links after moving conversations or attachments
   */
  async updateLinksAfterMove(settingKey, oldPath, newPath) {
    try {
      const { LinkUpdateService: LinkUpdateService2 } = await Promise.resolve().then(() => (init_link_update_service(), link_update_service_exports));
      const linkUpdateService = new LinkUpdateService2(this.plugin);
      if (settingKey === "conversationFolder") {
        await linkUpdateService.updateConversationLinks(oldPath, newPath);
      } else if (settingKey === "attachmentFolder") {
        await linkUpdateService.updateAttachmentLinks(oldPath, newPath);
      }
    } catch (error) {
      this.plugin.logger.error(`[FolderSettings] Failed to update links:`, error);
      new import_obsidian8.Notice(`\u26A0\uFE0F Files moved but some links may not have been updated`);
    }
  }
  /**
   * Show dialog with merge result details when files were skipped or errors occurred
   */
  showMergeResultDialog(result, _oldPath, _newPath) {
    const modal = new import_obsidian8.Modal(this.plugin.app);
    modal.titleEl.setText("Folder Migration Result");
    const { contentEl } = modal;
    const summary = contentEl.createDiv({ cls: "nexus-merge-summary" });
    summary.createEl("h3", { text: "Migration Summary" });
    const stats = summary.createDiv({ cls: "nexus-merge-stats" });
    stats.createEl("p", { text: `\u2705 Successfully moved: ${result.moved} file(s)` });
    if (result.skipped > 0) {
      stats.createEl("p", {
        text: `\u26A0\uFE0F Skipped (already exist): ${result.skipped} file(s)`,
        cls: "nexus-merge-warning"
      });
    }
    if (result.errors > 0) {
      stats.createEl("p", {
        text: `\u274C Errors: ${result.errors} file(s)`,
        cls: "nexus-merge-error"
      });
    }
    const explanation = contentEl.createDiv({ cls: "nexus-merge-explanation" });
    explanation.createEl("p", {
      text: "Files that already existed in the destination were not overwritten to preserve your data."
    });
    if (result.errorDetails && result.errorDetails.length > 0) {
      const errorSection = contentEl.createDiv({ cls: "nexus-merge-errors" });
      errorSection.createEl("h4", { text: "Error Details:" });
      const errorList = errorSection.createEl("ul");
      for (const error of result.errorDetails) {
        errorList.createEl("li", { text: error });
      }
    }
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const closeButton = buttonContainer.createEl("button", { text: "OK", cls: "mod-cta" });
    closeButton.addEventListener("click", () => modal.close());
    const styleEl = document.createElement("style");
    styleEl.textContent = `
            .nexus-merge-summary {
                margin-bottom: 20px;
            }
            .nexus-merge-stats p {
                margin: 8px 0;
                font-size: 14px;
            }
            .nexus-merge-warning {
                color: var(--text-warning);
            }
            .nexus-merge-error {
                color: var(--text-error);
            }
            .nexus-merge-explanation {
                padding: 12px;
                background: var(--background-secondary);
                border-radius: 4px;
                margin: 16px 0;
            }
            .nexus-merge-errors {
                margin-top: 16px;
                padding: 12px;
                background: var(--background-modifier-error);
                border-radius: 4px;
            }
            .nexus-merge-errors ul {
                margin: 8px 0;
                padding-left: 20px;
            }
            .nexus-merge-errors li {
                margin: 4px 0;
                font-size: 12px;
                font-family: var(--font-monospace);
            }
        `;
    document.head.appendChild(styleEl);
    modal.open();
  }
  showErrorDialog(title, message) {
    const modal = new import_obsidian8.Modal(this.plugin.app);
    modal.titleEl.setText(title);
    modal.contentEl.createEl("p", {
      text: message,
      cls: "nexus-error-message"
    });
    const buttonContainer = modal.contentEl.createDiv({ cls: "modal-button-container" });
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "1em";
    const okButton = buttonContainer.createEl("button", {
      text: "OK",
      cls: "mod-cta"
    });
    okButton.addEventListener("click", () => modal.close());
    modal.open();
  }
};
__name(FolderSettingsSection, "FolderSettingsSection");

// src/ui/settings/display-settings-section.ts
var import_obsidian9 = require("obsidian");
var DisplaySettingsSection = class extends BaseSettingsSection {
  constructor() {
    super(...arguments);
    this.title = "\u{1F4C5} Date Prefix";
    this.order = 20;
  }
  render(containerEl) {
    const sectionContainer = containerEl.createDiv({ cls: "nexus-date-prefix-section" });
    const setting = new import_obsidian9.Setting(sectionContainer).setName("Add date prefix to filenames").setDesc("Add creation date as a prefix to conversation filenames");
    if (this.plugin.settings.addDatePrefix) {
      setting.controlEl.createSpan({
        text: "Select date format: ",
        cls: "date-format-label"
      });
      setting.addDropdown(
        (dropdown) => dropdown.addOption("YYYY-MM-DD", "YYYY-MM-DD").addOption("YYYYMMDD", "YYYYMMDD").setValue(this.plugin.settings.dateFormat).onChange(async (value) => {
          if (value === "YYYY-MM-DD" || value === "YYYYMMDD") {
            this.plugin.settings.dateFormat = value;
            await this.plugin.saveSettings();
          }
        })
      );
    }
    setting.addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.addDatePrefix).onChange(async (value) => {
        this.plugin.settings.addDatePrefix = value;
        await this.plugin.saveSettings();
        this.redraw();
      })
    );
  }
};
__name(DisplaySettingsSection, "DisplaySettingsSection");

// src/ui/settings/message-date-format-section.ts
var import_obsidian10 = require("obsidian");
init_constants();
init_utils();
var MessageDateFormatSection = class extends BaseSettingsSection {
  constructor() {
    super(...arguments);
    this.title = "\u{1F4C5} Message Date Format";
    this.order = 21;
  }
  render(containerEl) {
    const sectionContainer = containerEl.createDiv({ cls: "nexus-message-date-section" });
    new import_obsidian10.Setting(sectionContainer).setName("Custom message timestamp format").setDesc("Override the default locale-based timestamp format in message headers. When disabled, timestamps follow Obsidian's language setting. If Obsidian is set to english, the US format (YYYY/DD/MM) is enforced.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.useCustomMessageTimestampFormat).onChange(async (value) => {
        this.plugin.settings.useCustomMessageTimestampFormat = value;
        await this.plugin.saveSettings();
        this.redraw();
      })
    );
    if (this.plugin.settings.useCustomMessageTimestampFormat) {
      new import_obsidian10.Setting(sectionContainer).setName("Timestamp format").setDesc("Choose the format for message timestamps in conversation notes").addDropdown((dropdown) => {
        Object.entries(MESSAGE_TIMESTAMP_FORMATS).forEach(([key, config]) => {
          dropdown.addOption(key, config.label);
        });
        dropdown.setValue(this.plugin.settings.messageTimestampFormat).onChange(async (value) => {
          this.plugin.settings.messageTimestampFormat = value;
          await this.plugin.saveSettings();
          this.updateTimestampPreview(previewContainer, value);
        });
      });
      const previewContainer = sectionContainer.createDiv({ cls: "nexus-timestamp-preview" });
      this.updateTimestampPreview(previewContainer, this.plugin.settings.messageTimestampFormat);
    }
  }
  /**
   * Update timestamp format preview
   */
  updateTimestampPreview(container, format) {
    const now = Date.now() / 1e3;
    const preview = formatMessageTimestamp(now, format);
    container.empty();
    const previewLine = container.createDiv({ cls: "nexus-preview-line" });
    previewLine.createEl("strong", { text: "Preview: " });
    previewLine.createEl("code", { text: preview, cls: "nexus-preview-code" });
    const config = MESSAGE_TIMESTAMP_FORMATS[format];
    if (config) {
      container.createEl("div", {
        text: config.description,
        cls: "nexus-format-description"
      });
    }
  }
};
__name(MessageDateFormatSection, "MessageDateFormatSection");

// src/ui/settings-tab.ts
var NexusAiChatImporterPluginSettingTab = class extends import_obsidian11.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
    this.sections = [];
    this.initializeSections();
  }
  initializeSections() {
    this.sections = [
      new SupportSection(this.plugin),
      new FolderSettingsSection(this.plugin),
      new DisplaySettingsSection(this.plugin),
      new MessageDateFormatSection(this.plugin)
    ].sort((a, b) => a.order - b.order);
    this.sections.forEach((section) => {
      section.setRedrawCallback(() => this.display());
    });
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    this.renderSections(containerEl);
  }
  async renderSections(containerEl) {
    for (const section of this.sections) {
      if (section.title) {
        containerEl.createEl("h2", { text: section.title });
      }
      await section.render(containerEl);
    }
  }
};
__name(NexusAiChatImporterPluginSettingTab, "NexusAiChatImporterPluginSettingTab");

// src/commands/command-registry.ts
var import_obsidian12 = require("obsidian");
var CommandRegistry = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  registerCommands() {
    this.plugin.addCommand({
      id: "nexus-ai-chat-importer-select-zip",
      name: "Import AI conversations",
      callback: () => {
        this.plugin.showProviderSelectionDialog();
      }
    });
  }
  showResetConfirmation() {
    const modal = new import_obsidian12.Modal(this.plugin.app);
    modal.contentEl.createEl("p", {
      text: "This will reset all import catalogs. This action cannot be undone."
    });
    const buttonDiv = modal.contentEl.createEl("div", {
      cls: "modal-button-container"
    });
    buttonDiv.createEl("button", { text: "Cancel" }).addEventListener("click", () => modal.close());
    buttonDiv.createEl("button", { text: "Reset", cls: "mod-warning" }).addEventListener("click", () => {
      this.plugin.resetCatalogs();
      modal.close();
    });
    modal.open();
  }
};
__name(CommandRegistry, "CommandRegistry");

// src/events/event-handlers.ts
var import_obsidian13 = require("obsidian");
var EventHandlers = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  registerEvents() {
    this.plugin.registerEvent(
      this.plugin.app.vault.on("delete", async (file) => {
        if (file instanceof import_obsidian13.TFile) {
          await this.plugin.getFileService().handleConversationFileDeletion(file);
        }
      })
    );
  }
  cleanup() {
  }
};
__name(EventHandlers, "EventHandlers");

// src/services/import-service.ts
var import_obsidian18 = require("obsidian");
var import_jszip = __toESM(require_jszip_min());
init_utils();
init_dialogs();

// src/models/import-report.ts
init_utils();
var ImportReport = class {
  constructor() {
    this.fileSections = /* @__PURE__ */ new Map();
    this.currentFileName = "";
    this.globalErrors = [];
    this.providerSpecificColumnHeader = "Attachments";
    this.operationStartTime = Date.now();
  }
  // Custom format for report dates
  /**
   * Start a new file section for multi-file imports
   */
  startFileSection(fileName) {
    this.currentFileName = fileName;
    if (!this.fileSections.has(fileName)) {
      this.fileSections.set(fileName, {
        fileName,
        created: [],
        updated: [],
        skipped: [],
        failed: [],
        counters: {
          totalConversationsProcessed: 0,
          totalNewConversationsSuccessfullyImported: 0,
          totalConversationsActuallyUpdated: 0,
          totalNonEmptyMessagesAdded: 0
        }
      });
    }
  }
  /**
   * Set counters for the current file section
   */
  setFileCounters(counters) {
    const section = this.getCurrentSection();
    if (section) {
      section.counters = counters;
    }
  }
  getCurrentSection() {
    return this.fileSections.get(this.currentFileName);
  }
  setProviderSpecificColumnHeader(header) {
    this.providerSpecificColumnHeader = header;
  }
  setCustomTimestampFormat(format) {
    this.customTimestampFormat = format;
  }
  /**
   * Legacy method for backward compatibility (single file imports)
   */
  addSummary(zipFileName, counters) {
    this.startFileSection(zipFileName);
    this.setFileCounters(counters);
  }
  getTotalAttachmentStats() {
    const total = { total: 0, found: 0, missing: 0, failed: 0 };
    this.fileSections.forEach((section) => {
      [...section.created, ...section.updated].forEach((entry) => {
        if (entry.attachmentStats) {
          total.total += entry.attachmentStats.total;
          total.found += entry.attachmentStats.found;
          total.missing += entry.attachmentStats.missing;
          total.failed += entry.attachmentStats.failed;
        }
        if (entry.providerSpecificCount) {
          total.total += entry.providerSpecificCount;
          total.found += entry.providerSpecificCount;
        }
      });
    });
    return total;
  }
  getFileSectionAttachmentStats(section) {
    const total = { total: 0, found: 0, missing: 0, failed: 0 };
    [...section.created, ...section.updated].forEach((entry) => {
      if (entry.attachmentStats) {
        total.total += entry.attachmentStats.total;
        total.found += entry.attachmentStats.found;
        total.missing += entry.attachmentStats.missing;
        total.failed += entry.attachmentStats.failed;
      }
      if (entry.providerSpecificCount) {
        total.total += entry.providerSpecificCount;
        total.found += entry.providerSpecificCount;
      }
    });
    return total;
  }
  getGlobalStats() {
    let created = 0;
    let updated = 0;
    let skipped = 0;
    let failed = 0;
    let totalProcessed = 0;
    let newMessages = 0;
    this.fileSections.forEach((section) => {
      created += section.created.length;
      updated += section.updated.length;
      skipped += section.skipped.length;
      failed += section.failed.length;
      totalProcessed += section.counters.totalConversationsProcessed;
      newMessages += section.counters.totalNonEmptyMessagesAdded;
    });
    return { created, updated, skipped, failed, totalProcessed, newMessages };
  }
  addCreated(title, filePath, createTime, updateTime, messageCount, attachmentStats, providerSpecificCount) {
    const section = this.getCurrentSection();
    if (section) {
      section.created.push({ title, filePath, createTime, updateTime, messageCount, attachmentStats, providerSpecificCount, sourceFile: this.currentFileName });
    }
  }
  addUpdated(title, filePath, createTime, updateTime, newMessageCount, attachmentStats, providerSpecificCount) {
    const section = this.getCurrentSection();
    if (section) {
      section.updated.push({ title, filePath, createTime, updateTime, newMessageCount, attachmentStats, providerSpecificCount, sourceFile: this.currentFileName });
    }
  }
  addSkipped(title, filePath, createTime, updateTime, messageCount, reason, attachmentStats, providerSpecificCount) {
    const section = this.getCurrentSection();
    if (section) {
      section.skipped.push({ title, filePath, createTime, updateTime, messageCount, reason, attachmentStats, providerSpecificCount, sourceFile: this.currentFileName });
    }
  }
  addFailed(title, filePath, createTime, updateTime, errorMessage) {
    const section = this.getCurrentSection();
    if (section) {
      section.failed.push({ title, filePath, createTime, updateTime, errorMessage, sourceFile: this.currentFileName });
    }
  }
  addError(message, details) {
    this.globalErrors.push({ message, details });
  }
  generateReportContent(allFiles, processedFiles, skippedFiles, analysisInfo, fileStats, isSelectiveImport) {
    let content = "# Nexus AI Chat Importer Report\n\n";
    content += this.generateGlobalSummary(allFiles, processedFiles, skippedFiles, analysisInfo, fileStats, isSelectiveImport) + "\n\n";
    if (skippedFiles && skippedFiles.length > 0) {
      content += this.generateSkippedFilesSection(skippedFiles, isSelectiveImport) + "\n\n";
    }
    const fileNames = Array.from(this.fileSections.keys());
    if (fileNames.length === 0) {
      content += "## Result\n\n";
      content += "No conversations were imported. All conversations are already up to date.\n\n";
    } else if (fileNames.length === 1) {
      const section = this.fileSections.get(fileNames[0]);
      content += this.generateFileContent(section, false);
    } else {
      content += "---\n\n";
      content += "## Processed Files\n\n";
      fileNames.forEach((fileName, index) => {
        const section = this.fileSections.get(fileName);
        content += `### File ${index + 1}: ${fileName}

`;
        content += this.generateFileSummary(section) + "\n\n";
        content += this.generateFileContent(section, true);
        if (index < fileNames.length - 1) {
          content += "\n";
        }
      });
    }
    if (this.globalErrors.length > 0) {
      content += `---

`;
      content += this.generateErrorTable();
    }
    return content;
  }
  generateSkippedFilesSection(skippedFiles, isSelectiveImport) {
    const title = isSelectiveImport ? "\u23ED\uFE0F Skipped Files (No Selected Conversations)" : "\u23ED\uFE0F Skipped Files (Already Up to Date)";
    const explanation = isSelectiveImport ? "Files not processed because they contain no selected conversations" : "Files analyzed but not processed because all conversations are already up to date";
    let section = `> [!note]- ${title}
`;
    section += `> ${explanation}
`;
    section += `> 
`;
    section += `> **Total:** ${skippedFiles.length} files
`;
    section += `> 
`;
    section += `> <details>
`;
    section += `> <summary>View file list</summary>
`;
    section += `> 
`;
    skippedFiles.forEach((fileName) => {
      section += `> - \`${fileName}\`
`;
    });
    section += `> 
`;
    section += `> </details>
`;
    return section;
  }
  generateGlobalSummary(allFiles, processedFiles, skippedFiles, analysisInfo, fileStats, isSelectiveImport) {
    const stats = this.getGlobalStats();
    const totalAttachments = this.getTotalAttachmentStats();
    const fileCount = this.fileSections.size;
    const totalFilesAnalyzed = allFiles ? allFiles.length : fileCount;
    const filesSkipped = skippedFiles ? skippedFiles.length : 0;
    let summary = `## \u{1F4CA} Import Summary

`;
    if (allFiles && allFiles.length > 0) {
      summary += `### \u{1F4E6} Files Analyzed

`;
      summary += `| File | Conversations | Duplicates | Skipped | Selected | Created | Updated |
`;
      summary += `|:---|---:|---:|---:|---:|---:|---:|
`;
      const fileInfos = [];
      allFiles.forEach((file) => {
        fileInfos.push({
          name: file.name,
          file
        });
      });
      fileInfos.sort((a, b) => {
        var _a, _b;
        const timeA = ((_a = a.file) == null ? void 0 : _a.lastModified) || 0;
        const timeB = ((_b = b.file) == null ? void 0 : _b.lastModified) || 0;
        return timeA - timeB;
      });
      fileInfos.forEach((info) => {
        const stats2 = fileStats == null ? void 0 : fileStats.get(info.name);
        const section = this.fileSections.get(info.name);
        if (stats2) {
          const created = (section == null ? void 0 : section.created.length) || 0;
          const updated = (section == null ? void 0 : section.updated.length) || 0;
          const skipped = stats2.skippedConversations || 0;
          summary += `| \`${info.name}\` | ${stats2.totalConversations} | ${stats2.duplicates} | ${skipped} | ${stats2.selectedForImport} | ${created} | ${updated} |
`;
        } else {
          summary += `| \`${info.name}\` | - | - | - | - | 0 | 0 |
`;
        }
      });
      summary += `
`;
    }
    if (analysisInfo && !isSelectiveImport) {
      summary += `> [!info]- \u{1F50D} Global Statistics
`;
      summary += `> 
`;
      summary += `> | Metric | Count |
`;
      summary += `> |:---|---:|
`;
      summary += `> | Total Conversations Found | ${analysisInfo.totalConversationsFound || 0} |
`;
      summary += `> | Unique Conversations | ${analysisInfo.uniqueConversationsKept || 0} |
`;
      if (analysisInfo.duplicatesRemoved > 0) {
        summary += `> | Duplicates Removed | ${analysisInfo.duplicatesRemoved} |
`;
      }
      summary += `> | New | ${analysisInfo.conversationsNew || 0} |
`;
      summary += `> | Updated | ${analysisInfo.conversationsUpdated || 0} |
`;
      summary += `> | Skipped | ${analysisInfo.conversationsIgnored || 0} |
`;
      summary += `
`;
    }
    summary += `### \u{1F4E5} Import Summary

`;
    summary += `| Category | Count |
`;
    summary += `|:---|---:|
`;
    summary += `| **Total Imported** | **${stats.created + stats.updated}** |
`;
    summary += `| \u2728 Created | ${stats.created} |
`;
    summary += `| \u{1F504} Updated | ${stats.updated}`;
    if (stats.newMessages > 0) {
      summary += ` (${stats.newMessages} new messages)`;
    }
    summary += ` |
`;
    if (stats.skipped > 0) {
      summary += `| \u23ED\uFE0F Skipped (unchanged) | ${stats.skipped} |
`;
    }
    if (stats.failed > 0) {
      summary += `| \u274C Failed | ${stats.failed} |
`;
    }
    if (this.globalErrors.length > 0) {
      summary += `| \u26A0\uFE0F Errors | ${this.globalErrors.length} |
`;
    }
    if (totalAttachments.total > 0) {
      const attachmentIcon = totalAttachments.found === totalAttachments.total ? "\u2705" : totalAttachments.found === 0 ? "\u274C" : "\u26A0\uFE0F";
      summary += `| ${attachmentIcon} Attachments | ${totalAttachments.found}/${totalAttachments.total} |
`;
      if (totalAttachments.missing > 0 || totalAttachments.failed > 0) {
        summary += `| \u2514\u2500 Missing | ${totalAttachments.missing} |
`;
        summary += `| \u2514\u2500 Failed | ${totalAttachments.failed} |
`;
      }
    }
    return summary;
  }
  generateFileSummary(section) {
    const attachmentStats = this.getFileSectionAttachmentStats(section);
    const attachmentSummary = attachmentStats.total > 0 ? `
- **Attachments**: ${attachmentStats.found}/${attachmentStats.total} extracted` : "";
    return `### Statistics
- **Created**: ${section.created.length}
- **Updated**: ${section.updated.length} (${section.counters.totalNonEmptyMessagesAdded} new messages)
- **Skipped**: ${section.skipped.length}
- **Failed**: ${section.failed.length}${attachmentSummary}`;
  }
  generateFileContent(section, isMultiFile) {
    let content = "";
    if (section.created.length > 0) {
      content += this.generateCreatedTable(section.created, isMultiFile);
    }
    if (section.updated.length > 0) {
      content += this.generateUpdatedTable(section.updated, isMultiFile);
    }
    if (section.failed.length > 0) {
      content += this.generateFailedTable(section.failed, isMultiFile);
    }
    return content;
  }
  generateCreatedTable(entries, isMultiFile) {
    const header = isMultiFile ? "### \u2728 Created Notes" : "## \u2728 Created Notes";
    let table = `${header}

`;
    table += `| | Title | Created | Messages | ${this.providerSpecificColumnHeader} |
`;
    table += "|:---:|:---|:---:|:---:|:---:|\n";
    const sortedEntries = [...entries].sort((a, b) => {
      return a.createTime - b.createTime;
    });
    sortedEntries.forEach((entry) => {
      const sanitizedTitle = entry.title.replace(/\n/g, " ").trim();
      const titleLink = `[[${entry.filePath}\\|${sanitizedTitle}]]`;
      const providerSpecificValue = entry.providerSpecificCount || 0;
      const createDate = formatMessageTimestamp(entry.createTime, this.customTimestampFormat);
      const providerSpecificDisplay = providerSpecificValue > 0 ? `\u2705 ${providerSpecificValue}` : providerSpecificValue;
      table += `| \u2728 | ${titleLink} | ${createDate} | ${entry.messageCount || 0} | ${providerSpecificDisplay} |
`;
    });
    return table + "\n\n";
  }
  generateUpdatedTable(entries, isMultiFile) {
    const header = isMultiFile ? "### \u{1F504} Updated Notes" : "## \u{1F504} Updated Notes";
    let table = `${header}

`;
    table += `| | Title | Updated | New Messages | New ${this.providerSpecificColumnHeader} |
`;
    table += "|:---:|:---|:---:|:---:|:---:|\n";
    const sortedEntries = [...entries].sort((a, b) => {
      return a.updateTime - b.updateTime;
    });
    sortedEntries.forEach((entry) => {
      const sanitizedTitle = entry.title.replace(/\n/g, " ").trim();
      const titleLink = `[[${entry.filePath}\\|${sanitizedTitle}]]`;
      const providerSpecificValue = entry.providerSpecificCount || 0;
      const updateDate = formatMessageTimestamp(entry.updateTime, this.customTimestampFormat);
      const providerSpecificDisplay = providerSpecificValue > 0 ? `\u2705 ${providerSpecificValue}` : providerSpecificValue;
      table += `| \u{1F504} | ${titleLink} | ${updateDate} | ${entry.newMessageCount || 0} | ${providerSpecificDisplay} |
`;
    });
    return table + "\n\n";
  }
  generateFailedTable(entries, isMultiFile) {
    const header = isMultiFile ? "### \u{1F6AB} Failed Imports" : "## \u{1F6AB} Failed Imports";
    let table = `${header}

`;
    table += "| | Title | Date | Error |\n";
    table += "|:---:|:---|:---:|:---|\n";
    const sortedEntries = [...entries].sort((a, b) => {
      return a.createTime - b.createTime;
    });
    sortedEntries.forEach((entry) => {
      const sanitizedTitle = entry.title.replace(/\n/g, " ").trim();
      const createDate = formatMessageTimestamp(entry.createTime, this.customTimestampFormat);
      table += `| \u{1F6AB} | ${sanitizedTitle} | ${createDate} | ${entry.errorMessage || "Unknown error"} |
`;
    });
    return table + "\n\n";
  }
  generateErrorTable() {
    let table = `## \u26A0\uFE0F Global Errors

`;
    table += "| | Error | Details |\n";
    table += "|:---:|:---|:---|\n";
    this.globalErrors.forEach((entry) => {
      table += `| \u26A0\uFE0F | ${entry.message} | ${entry.details} |
`;
    });
    return table + "\n\n";
  }
  formatAttachmentStatus(stats) {
    if (!stats || stats.total === 0) {
      return "0";
    }
    const { total, found, missing, failed } = stats;
    if (found === total) {
      return `\u2705 ${found}`;
    } else if (found === 0) {
      return `\u274C 0/${total}`;
    } else {
      return `\u26A0\uFE0F ${found}/${total}`;
    }
  }
  hasErrors() {
    let hasFailed = false;
    this.fileSections.forEach((section) => {
      if (section.failed.length > 0) {
        hasFailed = true;
      }
    });
    return hasFailed || this.globalErrors.length > 0;
  }
  getCreatedCount() {
    let count = 0;
    this.fileSections.forEach((section) => {
      count += section.created.length;
    });
    return count;
  }
  getUpdatedCount() {
    let count = 0;
    this.fileSections.forEach((section) => {
      count += section.updated.length;
    });
    return count;
  }
  getSkippedCount() {
    let count = 0;
    this.fileSections.forEach((section) => {
      count += section.skipped.length;
    });
    return count;
  }
  getFailedCount() {
    let count = 0;
    this.fileSections.forEach((section) => {
      count += section.failed.length;
    });
    return count;
  }
  /**
   * Store file analysis stats for duplicate counting
   */
  setFileStats(fileStats) {
    this.fileStats = fileStats;
  }
  /**
   * Store analysis info for completion stats
   */
  setAnalysisInfo(analysisInfo) {
    this.analysisInfo = analysisInfo;
  }
  /**
   * Calculate total duplicates from file stats
   */
  getTotalDuplicates() {
    if (!this.fileStats)
      return 0;
    let totalDuplicates = 0;
    this.fileStats.forEach((stats) => {
      totalDuplicates += stats.duplicates || 0;
    });
    return totalDuplicates;
  }
  /**
   * Get statistics for the completion dialog
   */
  getCompletionStats() {
    var _a, _b, _c, _d, _e, _f;
    const globalStats = this.getGlobalStats();
    const attachmentStats = this.getTotalAttachmentStats();
    const totalConversations = (_b = (_a = this.analysisInfo) == null ? void 0 : _a.uniqueConversationsKept) != null ? _b : globalStats.totalProcessed;
    const duplicates = (_d = (_c = this.analysisInfo) == null ? void 0 : _c.duplicatesRemoved) != null ? _d : this.getTotalDuplicates();
    const skipped = (_f = (_e = this.analysisInfo) == null ? void 0 : _e.conversationsIgnored) != null ? _f : globalStats.skipped;
    return {
      totalFiles: this.fileSections.size,
      totalConversations,
      duplicates,
      created: globalStats.created,
      updated: globalStats.updated,
      skipped,
      failed: globalStats.failed,
      attachmentsFound: attachmentStats.found,
      attachmentsTotal: attachmentStats.total,
      attachmentsMissing: attachmentStats.missing,
      attachmentsFailed: attachmentStats.failed
    };
  }
  /**
   * Get list of processed file names
   */
  getProcessedFileNames() {
    return Array.from(this.fileSections.keys());
  }
};
__name(ImportReport, "ImportReport");

// src/services/conversation-processor.ts
var import_obsidian16 = require("obsidian");

// src/formatters/message-formatter.ts
init_utils();
var _MessageFormatter = class {
  constructor(logger6, plugin) {
    this.logger = logger6;
    this.plugin = plugin;
  }
  formatMessages(messages) {
    return messages.filter((message) => message !== void 0).map((message) => this.formatMessage(message)).filter((formattedMessage) => formattedMessage !== "").join("\n");
  }
  formatMessage(message) {
    if (!message) {
      this.logger.error("Message is null or undefined:", message);
      return "";
    }
    const customFormat = this.plugin.settings.useCustomMessageTimestampFormat ? this.plugin.settings.messageTimestampFormat : void 0;
    const messageTime = formatMessageTimestamp(message.timestamp, customFormat);
    const authorName = message.role === "user" ? "User" : "Assistant";
    const calloutType = message.role === "user" ? _MessageFormatter.CALLOUTS.USER : _MessageFormatter.CALLOUTS.AGENT;
    let messageContent = `>[!${calloutType}] **${authorName}** - ${messageTime}
`;
    if (message.content) {
      messageContent += `> ${message.content.split("\n").join("\n> ")}`;
    } else {
      messageContent += `> [No content found]`;
    }
    if (message.attachments && message.attachments.length > 0) {
      messageContent += "\n" + this.formatAttachments(message.attachments);
    }
    messageContent += `
<!-- UID: ${message.id} -->`;
    if (message.role === "assistant") {
      messageContent += "\n\n---";
    }
    return messageContent;
  }
  formatAttachments(attachments) {
    return attachments.map((attachment) => {
      return this.formatSingleAttachment(attachment);
    }).join("\n\n");
  }
  /**
   * Format single attachment with Nexus callout styling
   *
   * Provider-formatted attachments (with extractedContent) are displayed as-is.
   * Generic attachments get basic formatting.
   */
  formatSingleAttachment(attachment) {
    var _a, _b;
    if (attachment.extractedContent) {
      return attachment.extractedContent;
    }
    let content = `>>[!${_MessageFormatter.CALLOUTS.ATTACHMENT}] `;
    if ((_a = attachment.status) == null ? void 0 : _a.found) {
      content += `**${attachment.fileName}**`;
    } else {
      content += `**${attachment.fileName}** *(missing)*`;
    }
    if (attachment.fileType) {
      content += ` (${attachment.fileType})`;
    }
    if (attachment.fileSize) {
      content += ` - ${this.formatFileSize(attachment.fileSize)}`;
    }
    content += "\n";
    if (((_b = attachment.status) == null ? void 0 : _b.found) && attachment.url) {
      if (!attachment.url.startsWith("sandbox://")) {
        if (this.isImageFile(attachment)) {
          content += `>> ![[${attachment.url}]]`;
        } else {
          content += `>> [[${attachment.url}]]`;
        }
      } else {
        content += `>> \u26A0\uFE0F File not available in archive. Visit the original conversation to access it`;
      }
    } else if (attachment.status && !attachment.status.found) {
      content += `>> \u26A0\uFE0F ${this.getStatusMessage(attachment.status.reason)}`;
      if (attachment.status.note) {
        content += `
>> **Note:** ${attachment.status.note}`;
      }
      if (attachment.status.reason === "missing_from_export") {
        if (attachment.url) {
          content += `
>> [Open original conversation](${attachment.url})`;
        } else {
          content += `
>> Original conversation link not available`;
        }
      }
    } else if (attachment.content) {
      content += `>> ${attachment.content}`;
    }
    return content;
  }
  /**
   * Get user-friendly status message
   */
  getStatusMessage(reason) {
    switch (reason) {
      case "missing_from_export":
        return "Not included in export";
      case "extraction_failed":
        return "Extraction failed";
      case "corrupted":
        return "File appears corrupted";
      case "unsupported_format":
        return "Unsupported file format";
      default:
        return "Processing issue";
    }
  }
  /**
   * Check if attachment is an image file for embedding
   */
  isImageFile(attachment) {
    var _a;
    if ((_a = attachment.fileType) == null ? void 0 : _a.startsWith("image/")) {
      return true;
    }
    const fileName = attachment.fileName.toLowerCase();
    const imageExtensions = [".png", ".jpg", ".jpeg", ".gif", ".webp", ".svg", ".bmp", ".tiff"];
    return imageExtensions.some((ext) => fileName.endsWith(ext));
  }
  formatFileSize(bytes) {
    const sizes = ["Bytes", "KB", "MB", "GB"];
    if (bytes === 0)
      return "0 Bytes";
    const i = Math.floor(Math.log(bytes) / Math.log(1024));
    return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + " " + sizes[i];
  }
};
var MessageFormatter = _MessageFormatter;
__name(MessageFormatter, "MessageFormatter");
// Nexus custom callouts with icons
MessageFormatter.CALLOUTS = {
  USER: "nexus_user",
  // üë§ User messages
  AGENT: "nexus_agent",
  // ü§ñ Assistant/Agent messages
  ATTACHMENT: "nexus_attachment",
  // üìé Attachments
  ARTIFACT: "nexus_artifact",
  // üõ†Ô∏è Claude artifacts
  PROMPT: "nexus_prompt"
  // üí≠ System prompts
};

// src/formatters/note-formatter.ts
init_utils();

// src/types/standard.ts
var URL_GENERATORS = {
  chatgpt: {
    generateChatUrl: (id) => `https://chatgpt.com/c/${id}`
  },
  claude: {
    generateChatUrl: (id) => `https://claude.ai/chat/${id}`
  }
};

// src/formatters/note-formatter.ts
var NoteFormatter = class {
  constructor(logger6, pluginId, pluginVersion, plugin) {
    this.logger = logger6;
    this.pluginId = pluginId;
    this.pluginVersion = pluginVersion;
    this.plugin = plugin;
    this.messageFormatter = new MessageFormatter(logger6, plugin);
  }
  generateMarkdownContent(conversation) {
    const safeTitle = generateSafeAlias(conversation.title);
    const createTimeStr = new Date(conversation.createTime * 1e3).toISOString();
    const updateTimeStr = new Date(conversation.updateTime * 1e3).toISOString();
    const createTimeDisplay = `${formatTimestamp(conversation.createTime, "date")} at ${formatTimestamp(conversation.createTime, "time")}`;
    const updateTimeDisplay = `${formatTimestamp(conversation.updateTime, "date")} at ${formatTimestamp(conversation.updateTime, "time")}`;
    let content = this.generateHeader(safeTitle, conversation.id, createTimeStr, updateTimeStr, createTimeDisplay, updateTimeDisplay, conversation);
    content += this.generateMessagesContent(conversation);
    return content;
  }
  generateHeader(title, conversationId, createTimeStr, updateTimeStr, createTimeDisplay, updateTimeDisplay, conversation) {
    let chatUrl = conversation.chatUrl;
    if (!chatUrl && URL_GENERATORS[conversation.provider]) {
      chatUrl = URL_GENERATORS[conversation.provider].generateChatUrl(conversationId);
    }
    let frontmatter = `---
nexus: ${this.pluginId}
plugin_version: "${this.pluginVersion}"
provider: ${conversation.provider}
aliases: ${title}
conversation_id: ${conversationId}
create_time: ${createTimeStr}
update_time: ${updateTimeStr}
---

`;
    let header = `# Title: ${conversation.title}

`;
    header += `Created: ${createTimeDisplay}
`;
    header += `Last Updated: ${updateTimeDisplay}
`;
    if (chatUrl) {
      header += `Chat URL: ${chatUrl}
`;
    }
    header += "\n\n";
    return frontmatter + header;
  }
  generateMessagesContent(conversation) {
    return this.messageFormatter.formatMessages(conversation.messages);
  }
};
__name(NoteFormatter, "NoteFormatter");

// src/services/file-service.ts
var import_obsidian15 = require("obsidian");
var FileService = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async writeToFile(filePath, content) {
    try {
      const file = this.plugin.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian15.TFile) {
        await this.plugin.app.vault.modify(file, content);
      } else if (file instanceof import_obsidian15.TFolder) {
        throw new Error(`Cannot write to '${filePath}'; it is a folder.`);
      } else {
        await this.plugin.app.vault.create(filePath, content);
      }
    } catch (error) {
      this.plugin.logger.error(`Error creating or modifying file '${filePath}'`, error.message);
      throw error;
    }
  }
  async handleConversationFileDeletion(file) {
    var _a;
    try {
      const frontmatter = (_a = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (!(frontmatter == null ? void 0 : frontmatter.conversation_id) || (frontmatter == null ? void 0 : frontmatter.nexus) !== this.plugin.manifest.id) {
        return;
      }
    } catch (error) {
      this.plugin.logger.error("Error handling conversation file deletion:", error);
    }
  }
  /**
   * Get file extension from filename (provider-agnostic utility)
   */
  getFileExtension(fileName) {
    const lastDot = fileName.lastIndexOf(".");
    return lastDot === -1 ? "" : fileName.substring(lastDot + 1).toLowerCase();
  }
  // TODO: Future enhancement - delete conversation attachments
  // async deleteConversationAttachments(conversationId: string): Promise<void> {
  //     // Implementation for deleting attachments when conversation is deleted
  // }
};
__name(FileService, "FileService");

// src/services/conversation-processor.ts
init_utils();
var ConversationProcessor = class {
  constructor(plugin, providerRegistry) {
    this.plugin = plugin;
    this.counters = {
      totalExistingConversations: 0,
      totalNewConversationsToImport: 0,
      totalExistingConversationsToUpdate: 0,
      totalNewConversationsSuccessfullyImported: 0,
      totalConversationsActuallyUpdated: 0,
      totalConversationsProcessed: 0,
      totalNonEmptyMessagesToImport: 0,
      totalNonEmptyMessagesToAdd: 0,
      totalNonEmptyMessagesAdded: 0
    };
    this.currentProvider = "unknown";
    this.messageFormatter = new MessageFormatter(plugin.logger, plugin);
    this.fileService = new FileService(plugin);
    this.noteFormatter = new NoteFormatter(plugin.logger, plugin.manifest.id, plugin.manifest.version, plugin);
    this.providerRegistry = providerRegistry;
  }
  /**
   * Process raw conversations (provider agnostic entry point)
   */
  async processRawConversations(rawConversations, importReport, zip, isReprocess = false, forcedProvider, progressCallback) {
    const provider = forcedProvider || this.providerRegistry.detectProvider(rawConversations);
    if (provider === "unknown") {
      const errorMsg = forcedProvider ? `Forced provider '${forcedProvider}' is not available or registered` : `Could not detect conversation provider from data structure`;
      importReport.addError("Unknown provider", errorMsg);
      return importReport;
    }
    return this.processConversationsWithProvider(provider, rawConversations, importReport, zip, isReprocess, progressCallback);
  }
  /**
   * Get provider name for current processing session
   */
  getCurrentProvider() {
    return this.currentProvider || "unknown";
  }
  /**
   * Process conversations using the detected provider
   */
  async processConversationsWithProvider(provider, rawConversations, importReport, zip, isReprocess = false, progressCallback) {
    this.currentProvider = provider;
    const adapter = this.providerRegistry.getAdapter(provider);
    if (!adapter) {
      importReport.addError("Provider adapter not found", `No adapter found for provider: ${provider}`);
      return importReport;
    }
    const storage = this.plugin.getStorageService();
    const existingConversationsMap = await storage.scanExistingConversations();
    this.counters.totalExistingConversations = existingConversationsMap.size;
    let processedCount = 0;
    for (const chat of rawConversations) {
      await this.processSingleChat(adapter, chat, existingConversationsMap, importReport, zip, isReprocess);
      processedCount++;
      progressCallback == null ? void 0 : progressCallback({
        phase: "processing",
        title: "Processing conversations...",
        detail: `Processing conversation ${processedCount} of ${rawConversations.length}`,
        current: processedCount,
        total: rawConversations.length
      });
    }
    return importReport;
  }
  async processSingleChat(adapter, chat, existingConversations, importReport, zip, isReprocess = false) {
    try {
      const chatId = adapter.getId(chat);
      const chatTitle = adapter.getTitle(chat) || "Untitled";
      if (!chatId || chatId.trim() === "") {
        this.plugin.logger.warn(`Skipping conversation with missing ID: ${chatTitle}`);
        importReport.addFailed(chatTitle, "N/A", 0, 0, "Missing conversation ID");
        return;
      }
      const existingEntry = existingConversations.get(chatId);
      if (existingEntry) {
        await this.handleExistingChat(adapter, chat, existingEntry, importReport, zip, isReprocess);
      } else {
        const filePath = await this.generateFilePathForChat(adapter, chat);
        await this.handleNewChat(adapter, chat, filePath, importReport, zip);
      }
      this.counters.totalConversationsProcessed++;
    } catch (error) {
      const errorMessage = error.message || "Unknown error occurred";
      const chatTitle = adapter.getTitle(chat) || "Untitled";
      importReport.addError(`Error processing chat: ${chatTitle}`, errorMessage);
    }
  }
  async handleExistingChat(adapter, chat, existingRecord, importReport, zip, isReprocess = false) {
    const chatTitle = adapter.getTitle(chat);
    const createTime = adapter.getCreateTime(chat);
    const updateTime = adapter.getUpdateTime(chat);
    const totalMessageCount = await this.countMessages(adapter, chat);
    const fileExists = await this.plugin.app.vault.adapter.exists(existingRecord.path);
    if (!fileExists) {
      await this.handleNewChat(adapter, chat, existingRecord.path, importReport, zip);
      return;
    }
    if (isReprocess) {
      this.counters.totalExistingConversationsToUpdate++;
      await this.updateExistingNote(adapter, chat, existingRecord.path, totalMessageCount, importReport, zip, true);
      return;
    }
    const comparison = compareTimestampsIgnoringSeconds(updateTime, existingRecord.updateTime);
    if (comparison <= 0) {
      importReport.addSkipped(
        chatTitle,
        existingRecord.path,
        createTime,
        updateTime,
        totalMessageCount,
        "No Updates"
      );
    } else {
      this.counters.totalExistingConversationsToUpdate++;
      await this.updateExistingNote(adapter, chat, existingRecord.path, totalMessageCount, importReport, zip);
    }
  }
  async handleNewChat(adapter, chat, filePath, importReport, zip) {
    this.counters.totalNewConversationsToImport++;
    await this.createNewNote(adapter, chat, filePath, importReport, zip);
  }
  /**
   * Count messages in a chat using provider-specific logic
   */
  async countMessages(adapter, chat) {
    var _a;
    try {
      const standardConversation = await adapter.convertChat(chat);
      return ((_a = standardConversation.messages) == null ? void 0 : _a.length) || 0;
    } catch (error) {
      if (chat.mapping) {
        return Object.values(chat.mapping).filter((msg) => isValidMessage(msg.message)).length;
      } else if (chat.messages) {
        return Array.isArray(chat.messages) ? chat.messages.length : 0;
      }
      return 0;
    }
  }
  /**
   * Get provider-specific count (artifacts for Claude, attachments for ChatGPT)
   */
  getProviderSpecificCount(adapter, chat) {
    try {
      const strategy = adapter.getReportNamingStrategy();
      if (strategy && strategy.getProviderSpecificColumn) {
        const columnInfo = strategy.getProviderSpecificColumn();
        return columnInfo.getValue(adapter, chat);
      }
    } catch (error) {
    }
    return 0;
  }
  async updateExistingNote(adapter, chat, filePath, totalMessageCount, importReport, zip, forceUpdate = false) {
    try {
      const file = this.plugin.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian16.TFile) {
        let content = await this.plugin.app.vault.read(file);
        const originalContent = content;
        const chatUpdateTime = adapter.getUpdateTime(chat);
        const chatCreateTime = adapter.getCreateTime(chat);
        const chatTitle = adapter.getTitle(chat);
        const existingMessageIds = this.extractMessageUIDsFromNote(content);
        const newMessages = adapter.getNewMessages(chat, existingMessageIds);
        let attachmentStats = void 0;
        if (forceUpdate) {
          let standardConversation = await adapter.convertChat(chat);
          if (zip && adapter.processMessageAttachments) {
            standardConversation.messages = await adapter.processMessageAttachments(
              standardConversation.messages,
              adapter.getId(chat),
              zip
            );
            attachmentStats = this.calculateAttachmentStats(standardConversation.messages);
          }
          const newContent = this.noteFormatter.generateMarkdownContent(standardConversation);
          await this.fileService.writeToFile(filePath, newContent);
          importReport.addUpdated(
            chatTitle,
            filePath,
            chatCreateTime,
            chatUpdateTime,
            totalMessageCount,
            attachmentStats
          );
          this.counters.totalConversationsActuallyUpdated++;
          return;
        }
        if (newMessages.length > 0) {
          content = this.updateMetadata(content, chatUpdateTime);
          let standardConversation = await adapter.convertChat(chat);
          const newStandardMessages = standardConversation.messages.filter(
            (msg) => newMessages.some((newMsg) => newMsg.id === msg.id)
          );
          let processedNewMessages = newStandardMessages;
          if (zip && adapter.processMessageAttachments) {
            processedNewMessages = await adapter.processMessageAttachments(
              newStandardMessages,
              adapter.getId(chat),
              zip
            );
          }
          attachmentStats = this.calculateAttachmentStats(processedNewMessages);
          content += "\n\n" + this.messageFormatter.formatMessages(processedNewMessages);
          this.counters.totalConversationsActuallyUpdated++;
          this.counters.totalNonEmptyMessagesAdded += newMessages.length;
        }
        if (content !== originalContent) {
          await this.fileService.writeToFile(filePath, content);
          importReport.addUpdated(
            chatTitle,
            filePath,
            chatCreateTime,
            chatUpdateTime,
            newMessages.length,
            attachmentStats
          );
        } else {
          importReport.addSkipped(
            chatTitle,
            filePath,
            chatCreateTime,
            chatUpdateTime,
            totalMessageCount,
            "No changes needed"
          );
        }
      }
    } catch (error) {
      this.plugin.logger.error("Error updating note", error.message);
    }
  }
  async createNewNote(adapter, chat, filePath, importReport, zip) {
    try {
      const folderPath = filePath.substring(0, filePath.lastIndexOf("/"));
      const folderResult = await ensureFolderExists(folderPath, this.plugin.app.vault);
      if (!folderResult.success) {
        throw new Error(folderResult.error || "Failed to ensure folder exists.");
      }
      let standardConversation = await adapter.convertChat(chat);
      let attachmentStats = { total: 0, found: 0, missing: 0, failed: 0 };
      if (zip && adapter.processMessageAttachments) {
        standardConversation.messages = await adapter.processMessageAttachments(
          standardConversation.messages,
          adapter.getId(chat),
          zip
        );
        attachmentStats = this.calculateAttachmentStats(standardConversation.messages);
      }
      const content = this.noteFormatter.generateMarkdownContent(standardConversation);
      await this.fileService.writeToFile(filePath, content);
      const messageCount = await this.countMessages(adapter, chat);
      const createTime = adapter.getCreateTime(chat);
      const updateTime = adapter.getUpdateTime(chat);
      const chatTitle = adapter.getTitle(chat);
      const providerSpecificCount = this.getProviderSpecificCount(adapter, chat);
      importReport.addCreated(
        chatTitle,
        filePath,
        createTime,
        updateTime,
        messageCount,
        attachmentStats,
        providerSpecificCount
      );
      this.counters.totalNewConversationsSuccessfullyImported++;
      this.counters.totalNonEmptyMessagesToImport += messageCount;
    } catch (error) {
      this.plugin.logger.error("Error creating new note", error.message);
      const createTime = adapter.getCreateTime(chat);
      const updateTime = adapter.getUpdateTime(chat);
      const chatTitle = adapter.getTitle(chat);
      importReport.addFailed(
        chatTitle,
        filePath,
        createTime,
        updateTime,
        error.message
      );
      throw error;
    }
  }
  updateMetadata(content, updateTime) {
    const updateTimeStr = new Date(updateTime * 1e3).toISOString();
    content = content.replace(/^update_time: .*$/m, `update_time: ${updateTimeStr}`);
    content = content.replace(/^Last Updated: .*$/m, `Last Updated: ${updateTimeStr}`);
    return content;
  }
  extractMessageUIDsFromNote(content) {
    const uidRegex = /<!-- UID: (.*?) -->/g;
    const uids = [];
    let match;
    while ((match = uidRegex.exec(content)) !== null) {
      uids.push(match[1]);
    }
    return uids;
  }
  async generateFilePathForChat(adapter, chat) {
    const createTime = adapter.getCreateTime(chat);
    const chatTitle = adapter.getTitle(chat);
    const providerName = adapter.getProviderName();
    const date = new Date(createTime * 1e3);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const folderPath = `${this.plugin.settings.conversationFolder}/${providerName}/${year}/${month}`;
    const folderResult = await ensureFolderExists(folderPath, this.plugin.app.vault);
    if (!folderResult.success) {
      throw new Error(folderResult.error || "Failed to ensure folder exists.");
    }
    let fileName = generateConversationFileName(
      chatTitle,
      createTime,
      this.plugin.settings.addDatePrefix,
      this.plugin.settings.dateFormat
    ) + ".md";
    let filePath = `${folderPath}/${fileName}`;
    if (await doesFilePathExist(filePath, this.plugin.app.vault)) {
      filePath = await generateUniqueFileName(filePath, this.plugin.app.vault.adapter);
    }
    return filePath;
  }
  getCounters() {
    return this.counters;
  }
  /**
   * Reset counters for processing a new file
   */
  resetCounters() {
    this.counters = {
      totalExistingConversations: 0,
      totalNewConversationsToImport: 0,
      totalExistingConversationsToUpdate: 0,
      totalNewConversationsSuccessfullyImported: 0,
      totalConversationsActuallyUpdated: 0,
      totalConversationsProcessed: 0,
      totalNonEmptyMessagesToImport: 0,
      totalNonEmptyMessagesToAdd: 0,
      totalNonEmptyMessagesAdded: 0
    };
  }
  /**
   * Calculate attachment statistics from processed messages
   */
  calculateAttachmentStats(messages) {
    var _a, _b, _c;
    const stats = { total: 0, found: 0, missing: 0, failed: 0 };
    for (const message of messages) {
      if (message.attachments) {
        for (const attachment of message.attachments) {
          stats.total++;
          if ((_a = attachment.status) == null ? void 0 : _a.found) {
            stats.found++;
          } else if (((_b = attachment.status) == null ? void 0 : _b.reason) === "missing_from_export") {
            stats.missing++;
          } else if (((_c = attachment.status) == null ? void 0 : _c.reason) === "extraction_failed") {
            stats.failed++;
          }
        }
      }
    }
    return stats;
  }
};
__name(ConversationProcessor, "ConversationProcessor");

// src/models/errors.ts
var NexusAiChatImporterError = class extends Error {
  constructor(message, details) {
    super(message);
    this.details = details;
    this.name = "NexusAiChatImporterError";
  }
};
__name(NexusAiChatImporterError, "NexusAiChatImporterError");

// src/providers/provider-adapter.ts
var DefaultProviderRegistry = class {
  constructor() {
    this.adapters = {};
  }
  register(providerName, adapter) {
    this.adapters[providerName] = adapter;
  }
  getAdapter(provider) {
    return this.adapters[provider];
  }
  detectProvider(rawConversations) {
    for (const [name, adapter] of Object.entries(this.adapters)) {
      try {
        if (adapter.detect(rawConversations))
          return name;
      } catch (_) {
      }
    }
    return "unknown";
  }
};
__name(DefaultProviderRegistry, "DefaultProviderRegistry");

// src/providers/chatgpt/chatgpt-dalle-processor.ts
var ChatGPTDalleProcessor = class {
  /**
   * Extract DALL-E prompts from chat mapping using recursive descendant search
   * Returns both matched prompts (image found) and orphaned prompts (no image found)
   */
  static extractDallePromptsFromMapping(chat) {
    var _a;
    const imagePrompts = /* @__PURE__ */ new Map();
    const orphanedPrompts = /* @__PURE__ */ new Map();
    let promptMessagesFound = 0;
    let promptsWithImages = 0;
    let orphanedPromptsCount = 0;
    for (const messageObj of Object.values(chat.mapping)) {
      const message = messageObj == null ? void 0 : messageObj.message;
      if (!message || ((_a = message.author) == null ? void 0 : _a.role) !== "assistant")
        continue;
      if (this.isDallePromptMessage(message)) {
        promptMessagesFound++;
        const prompt = this.extractPromptFromJson(message);
        if (prompt) {
          const imageMessageId = this.findDalleImageInDescendants(
            chat.mapping,
            messageObj.id || ""
          );
          if (imageMessageId) {
            promptsWithImages++;
            imagePrompts.set(imageMessageId, {
              prompt,
              timestamp: message.create_time || 0
            });
          } else {
            orphanedPromptsCount++;
            orphanedPrompts.set(messageObj.id || "", prompt);
          }
        } else {
        }
      }
    }
    return { imagePrompts, orphanedPrompts };
  }
  /**
   * Recursively search for DALL-E image in descendants
   * Stops at first user message encountered (limit to prevent going too far)
   */
  static findDalleImageInDescendants(mapping, startId) {
    var _a, _b;
    const queue = [startId];
    const visited = /* @__PURE__ */ new Set();
    while (queue.length > 0) {
      const currentId = queue.shift();
      if (visited.has(currentId))
        continue;
      visited.add(currentId);
      const currentObj = mapping[currentId];
      if (!currentObj)
        continue;
      const message = currentObj.message;
      if (((_a = message == null ? void 0 : message.author) == null ? void 0 : _a.role) === "user") {
        return null;
      }
      if (((_b = message == null ? void 0 : message.author) == null ? void 0 : _b.role) === "tool" && this.hasRealDalleImage(message)) {
        return currentId;
      }
      const children = currentObj.children || [];
      queue.push(...children);
    }
    return null;
  }
  /**
   * Check if message is a DALL-E JSON prompt message
   * Handles both formats:
   * - content_type: "text" with parts[0] containing JSON
   * - content_type: "code" with text containing JSON
   */
  static isDallePromptMessage(message) {
    var _a, _b, _c, _d;
    if (((_a = message.author) == null ? void 0 : _a.role) !== "assistant")
      return false;
    if (((_b = message.content) == null ? void 0 : _b.parts) && Array.isArray(message.content.parts) && message.content.parts.length === 1 && typeof message.content.parts[0] === "string") {
      const content = message.content.parts[0].trim();
      if (content.startsWith("{") && content.includes('"prompt"')) {
        return true;
      }
    }
    if (((_c = message.content) == null ? void 0 : _c.content_type) === "code" && ((_d = message.content) == null ? void 0 : _d.text) && typeof message.content.text === "string") {
      const content = message.content.text.trim();
      if (content.startsWith("{") && content.includes('"prompt"')) {
        return true;
      }
    }
    return false;
  }
  /**
   * Extract prompt from DALL-E JSON message
   * Handles both formats:
   * - content_type: "text" with parts[0] containing JSON
   * - content_type: "code" with text containing JSON
   */
  static extractPromptFromJson(message) {
    var _a, _b, _c;
    try {
      let jsonStr = null;
      if (((_a = message.content) == null ? void 0 : _a.parts) && message.content.parts[0]) {
        jsonStr = message.content.parts[0];
      } else if (((_b = message.content) == null ? void 0 : _b.content_type) === "code" && ((_c = message.content) == null ? void 0 : _c.text)) {
        jsonStr = message.content.text;
      }
      if (jsonStr) {
        const parsed = JSON.parse(jsonStr);
        const extractedPrompt = parsed.prompt || null;
        return extractedPrompt;
      }
    } catch (error) {
    }
    return null;
  }
  /**
   * Check if message contains REAL DALL-E image (not user upload)
   */
  static hasRealDalleImage(message) {
    var _a;
    if (!((_a = message.content) == null ? void 0 : _a.parts) || !Array.isArray(message.content.parts)) {
      return false;
    }
    return message.content.parts.some((part) => {
      var _a2;
      if (typeof part !== "object" || part === null)
        return false;
      const contentPart = part;
      return contentPart.content_type === "image_asset_pointer" && contentPart.asset_pointer && ((_a2 = contentPart.metadata) == null ? void 0 : _a2.dalle) && contentPart.metadata.dalle !== null;
    });
  }
  /**
   * Create StandardAttachment for DALL-E image with provider-agnostic metadata
   * The prompt will be embedded in extractedContent for display
   */
  static createDalleAttachment(contentPart, associatedPrompt, hasImage = true) {
    const fileId = contentPart.asset_pointer.includes("://") ? contentPart.asset_pointer.split("://")[1] : contentPart.asset_pointer;
    const genId = contentPart.metadata.dalle.gen_id || "unknown";
    const width = contentPart.width || 1024;
    const height = contentPart.height || 1024;
    const fileName = `dalle_${genId}_${width}x${height}.png`;
    const prompt = associatedPrompt || contentPart.metadata.dalle.prompt;
    let extractedContent = "";
    if (prompt) {
      const formattedPrompt = prompt.split("\n").join("\n>> ");
      extractedContent = `>>[!nexus_prompt] **DALL-E Prompt**
>> \`\`\`
>> ${formattedPrompt}
>> \`\`\`
>
>>[!nexus_attachment] **{{FILENAME}}** ({{FILETYPE}}) - {{FILESIZE}}
>> ![[{{URL}}]]`;
      if (!hasImage) {
        extractedContent = `>>[!nexus_prompt] **DALL-E Prompt**
>> \`\`\`
>> ${formattedPrompt}
>> \`\`\`
>
>>[!nexus_attachment] **Image Not Found**
>> \u26A0\uFE0F Image could not be found. Perhaps it was not generated or is missing from the archive.`;
      }
    } else {
    }
    return {
      fileName,
      fileSize: contentPart.size_bytes,
      fileType: "image/png",
      // Will be corrected dynamically by extractor
      fileId,
      extractedContent,
      // Provider-agnostic metadata
      attachmentType: "generated_image",
      generationPrompt: prompt,
      // Provider-specific metadata
      providerMetadata: {
        dalle: {
          gen_id: contentPart.metadata.dalle.gen_id,
          seed: contentPart.metadata.dalle.seed,
          parent_gen_id: contentPart.metadata.dalle.parent_gen_id,
          edit_op: contentPart.metadata.dalle.edit_op
        }
      }
    };
  }
  /**
   * Create Assistant (DALL-E) message from tool message with associated prompt
   */
  static createDalleAssistantMessage(toolMessage, associatedPrompt, promptTimestamp) {
    var _a, _b;
    if (!((_a = toolMessage.content) == null ? void 0 : _a.parts) || !Array.isArray(toolMessage.content.parts)) {
      return null;
    }
    const attachments = [];
    for (const part of toolMessage.content.parts) {
      if (typeof part === "object" && part !== null) {
        const contentPart = part;
        if (contentPart.content_type === "image_asset_pointer" && contentPart.asset_pointer && ((_b = contentPart.metadata) == null ? void 0 : _b.dalle) && contentPart.metadata.dalle !== null) {
          const dalleAttachment = this.createDalleAttachment(contentPart, associatedPrompt, true);
          attachments.push(dalleAttachment);
        }
      }
    }
    if (attachments.length === 0) {
      return null;
    }
    return {
      id: toolMessage.id || "",
      role: "assistant",
      content: "DALL-E Generated Image",
      // Use prompt timestamp if available, otherwise fall back to tool message timestamp
      timestamp: promptTimestamp || toolMessage.create_time || 0,
      attachments
    };
  }
  /**
   * Create informational message for orphaned DALL-E prompt (no image found)
   * Creates a "phantom" attachment with the prompt and warning
   */
  static createOrphanedPromptMessage(promptMessage, prompt) {
    const formattedPrompt = prompt.split("\n").join("\n>> ");
    const phantomAttachment = {
      fileName: "dalle_image_not_found.png",
      fileType: "image/png",
      attachmentType: "generated_image",
      generationPrompt: prompt,
      extractedContent: `>>[!nexus_prompt] **DALL-E Prompt** (Image Generation Failed or Interrupted)
>> \`\`\`
>> ${formattedPrompt}
>> \`\`\`
>
>>[!nexus_attachment] **Image Not Found**
>> \u26A0\uFE0F Image generation may have failed or been interrupted. The prompt was saved but no image was found in the export.`,
      status: {
        processed: true,
        found: false,
        reason: "missing_from_export",
        note: "DALL-E generation was requested but the image was not found in the archive"
      }
    };
    return {
      id: promptMessage.id || "",
      role: "assistant",
      content: "DALL-E Image Generation (Failed/Interrupted)",
      timestamp: promptMessage.create_time || 0,
      attachments: [phantomAttachment]
    };
  }
};
__name(ChatGPTDalleProcessor, "ChatGPTDalleProcessor");

// src/providers/chatgpt/chatgpt-message-filter.ts
init_utils();
var ChatGPTMessageFilter = class {
  /**
   * Determine if a message should be included in the conversation
   */
  static shouldIncludeMessage(message) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    if (!message || !message.author) {
      return false;
    }
    if (message.author.role === "system") {
      return false;
    }
    if (message.author.role === "tool") {
      return false;
    }
    if (((_a = message.metadata) == null ? void 0 : _a.is_visually_hidden_from_conversation) === true) {
      return false;
    }
    if (((_b = message.metadata) == null ? void 0 : _b.is_user_system_message) === true) {
      return false;
    }
    if (((_c = message.content) == null ? void 0 : _c.content_type) === "user_editable_context") {
      return false;
    }
    if (message.author.role === "assistant") {
      if (((_d = message.content) == null ? void 0 : _d.parts) && Array.isArray(message.content.parts) && message.content.parts.every(
        (part) => typeof part === "string" && part.trim() === ""
      )) {
        return false;
      }
      if (ChatGPTDalleProcessor.isDallePromptMessage(message)) {
        return false;
      }
      const excludedContentTypes = ["code", "system_error", "execution_output"];
      if (((_e = message.content) == null ? void 0 : _e.content_type) && excludedContentTypes.includes(message.content.content_type)) {
        return false;
      }
      if (((_f = message.content) == null ? void 0 : _f.content_type) === "multimodal_text") {
        if (((_g = message.content) == null ? void 0 : _g.parts) && Array.isArray(message.content.parts)) {
          const hasTextContent = message.content.parts.some((part) => {
            if (typeof part === "string" && part.trim() !== "") {
              return true;
            }
            if (typeof part === "object" && part !== null && "text" in part) {
              return typeof part.text === "string" && part.text.trim() !== "";
            }
            return false;
          });
          if (!hasTextContent) {
            return false;
          }
        }
      }
    }
    if (message.author.role === "user") {
      const excludedContentTypes = ["user_editable_context"];
      if (((_h = message.content) == null ? void 0 : _h.content_type) && excludedContentTypes.includes(message.content.content_type)) {
        return false;
      }
    }
    return isValidMessage(message);
  }
};
__name(ChatGPTMessageFilter, "ChatGPTMessageFilter");

// src/providers/chatgpt/chatgpt-converter.ts
var ChatGPTConverter = class {
  /**
   * Convert ChatGPT Chat to StandardConversation
   */
  static convertChat(chat) {
    const messages = this.extractMessagesFromMapping(chat);
    return {
      id: chat.id || "",
      title: chat.title || "Untitled",
      provider: "chatgpt",
      createTime: chat.create_time || 0,
      updateTime: chat.update_time || 0,
      messages,
      metadata: {
        conversation_template_id: chat.conversation_template_id,
        gizmo_id: chat.gizmo_id,
        gizmo_type: chat.gizmo_type,
        default_model_slug: chat.default_model_slug,
        is_archived: chat.is_archived,
        is_starred: chat.is_starred,
        current_node: chat.current_node,
        memory_scope: chat.memory_scope
      }
    };
  }
  /**
   * Convert single ChatGPT ChatMessage to StandardMessage
   */
  static convertMessage(chatMessage, conversationId) {
    var _a;
    const contentResult = this.extractContent(chatMessage, conversationId);
    return {
      id: chatMessage.id || "",
      role: ((_a = chatMessage.author) == null ? void 0 : _a.role) === "user" ? "user" : "assistant",
      content: contentResult.content,
      timestamp: chatMessage.create_time || 0,
      attachments: contentResult.attachments || []
    };
  }
  /**
   * Extract messages from ChatGPT mapping structure with DALL-E prompt association
   */
  static extractMessagesFromMapping(chat) {
    var _a;
    const messages = [];
    const conversationId = chat.id;
    const { imagePrompts, orphanedPrompts } = ChatGPTDalleProcessor.extractDallePromptsFromMapping(chat);
    for (const messageObj of Object.values(chat.mapping)) {
      const message = messageObj == null ? void 0 : messageObj.message;
      if (!message)
        continue;
      if (((_a = message.author) == null ? void 0 : _a.role) === "tool" && ChatGPTDalleProcessor.hasRealDalleImage(message)) {
        const promptData = imagePrompts.get(messageObj.id || "");
        const dalleMessage = ChatGPTDalleProcessor.createDalleAssistantMessage(
          message,
          promptData == null ? void 0 : promptData.prompt,
          promptData == null ? void 0 : promptData.timestamp
        );
        if (dalleMessage) {
          messages.push(dalleMessage);
        }
      } else if (orphanedPrompts.has(messageObj.id || "")) {
        const prompt = orphanedPrompts.get(messageObj.id || "");
        if (prompt) {
          const orphanedMessage = ChatGPTDalleProcessor.createOrphanedPromptMessage(message, prompt);
          messages.push(orphanedMessage);
        }
      } else if (ChatGPTMessageFilter.shouldIncludeMessage(message)) {
        messages.push(this.convertMessage(message, conversationId));
      }
    }
    if (messages.length <= 1)
      return messages;
    return messages.sort((a, b) => {
      if (a.timestamp !== b.timestamp) {
        return a.timestamp - b.timestamp;
      }
      return a.id.localeCompare(b.id);
    });
  }
  /**
   * Extract content and attachments from ChatGPT message parts
   */
  static extractContent(chatMessage, conversationId) {
    var _a;
    if (!((_a = chatMessage.content) == null ? void 0 : _a.parts) || !Array.isArray(chatMessage.content.parts)) {
      return { content: "" };
    }
    const contentParts = [];
    const attachments = [];
    for (const part of chatMessage.content.parts) {
      let textContent = "";
      if (typeof part === "string" && part.trim() !== "") {
        if (part.trim().startsWith("{") && part.trim().endsWith("}")) {
          try {
            const parsed = JSON.parse(part);
            if (parsed.type && parsed.content && typeof parsed.content === "string") {
              const codeType = parsed.type;
              const codeContent = parsed.content;
              if (codeContent.trim() !== "") {
                const language = codeType.includes("/") ? codeType.split("/")[1] : codeType;
                textContent = `\`\`\`${language}
${codeContent}
\`\`\``;
              }
            } else {
              textContent = part;
            }
          } catch (e) {
            textContent = part;
          }
        } else {
          textContent = part;
        }
      } else if (typeof part === "object" && part !== null) {
        if ("type" in part && "content" in part && typeof part.content === "string") {
          const codeType = part.type;
          const codeContent = part.content;
          if (codeContent.trim() !== "") {
            const language = codeType.includes("/") ? codeType.split("/")[1] : codeType;
            textContent = `\`\`\`${language}
${codeContent}
\`\`\``;
          }
        } else if ("content_type" in part && "text" in part && typeof part.text === "string") {
          if (part.content_type === "audio_transcription" && part.text.trim() !== "") {
            textContent = part.text;
          } else if (part.content_type === "text" && part.text.trim() !== "") {
            textContent = part.text;
          } else if (part.content_type === "multimodal_text" && part.text.trim() !== "") {
            textContent = part.text;
          }
        } else if ("content_type" in part && part.content_type === "image_asset_pointer" && "asset_pointer" in part) {
          const attachment = this.extractImageAttachment(part, conversationId);
          if (attachment) {
            attachments.push(attachment);
          }
        }
      }
      if (textContent) {
        textContent = this.cleanChatGPTArtifacts(textContent, conversationId);
        if (textContent.trim() !== "") {
          contentParts.push(textContent);
        }
      }
    }
    const finalContent = contentParts.join("\n");
    if (chatMessage.attachments) {
      for (const att of chatMessage.attachments) {
        attachments.push({
          fileName: att.file_name,
          fileType: att.file_type || "application/octet-stream",
          fileSize: att.file_size,
          extractedContent: att.extracted_content
        });
      }
    }
    return {
      content: finalContent,
      attachments: attachments.length > 0 ? attachments : void 0
    };
  }
  /**
   * Extract image attachment from content part
   */
  static extractImageAttachment(part, conversationId) {
    var _a;
    if (!part.asset_pointer)
      return null;
    let fileId = part.asset_pointer;
    if (fileId.includes("://")) {
      fileId = fileId.split("://")[1];
    }
    let fileName = `image_${fileId}`;
    if (part.width && part.height) {
      fileName = `image_${fileId}_${part.width}x${part.height}`;
    }
    const fileType = ((_a = part.metadata) == null ? void 0 : _a.mime_type) || "image/png";
    const extension = fileType.split("/")[1] || "png";
    fileName += `.${extension}`;
    return {
      fileName,
      fileType,
      fileSize: part.size_bytes,
      fileId
    };
  }
  /**
   * Clean ChatGPT artifacts, citations, and control characters - SMART LINKING
   */
  static cleanChatGPTArtifacts(text, conversationId) {
    if (!text || typeof text !== "string")
      return "";
    const chatUrl = conversationId ? `https://chatgpt.com/c/${conversationId}` : "https://chatgpt.com";
    let cleanText = text;
    for (const { pattern, replacement } of this.CLEANUP_PATTERNS) {
      cleanText = cleanText.replace(pattern, replacement(chatUrl));
    }
    return cleanText.trim();
  }
};
__name(ChatGPTConverter, "ChatGPTConverter");
// Pre-compiled regex patterns for performance
ChatGPTConverter.CLEANUP_PATTERNS = [
  // SMART: Replace sandbox links with actual links to original conversation
  { pattern: /üìÑ \[([^\]]+)\]\(sandbox:\/[^)]+\)/g, replacement: (chatUrl) => `\u{1F4C4} [$1](${chatUrl}) *(visit original conversation to download)*` },
  { pattern: /üìÑ ([^-\n]+) - File not available in archive/g, replacement: (chatUrl) => `\u{1F4C4} [$1](${chatUrl}) *(visit original conversation to download)*` },
  { pattern: /\[([^\]]+)\]\(sandbox:\/[^)]+\)/g, replacement: (chatUrl) => `[$1](${chatUrl}) *(visit original conversation to download)*` },
  { pattern: /([^-\n]+) - File not available in archive\. Visit the original conversation to access it/g, replacement: (chatUrl) => `[$1](${chatUrl}) *(visit original conversation to download)*` },
  // Remove patterns (static replacements)
  { pattern: /cite[a-zA-Z0-9_\-]+/g, replacement: () => "" },
  { pattern: /link[a-zA-Z0-9_\-]+/g, replacement: () => "" },
  { pattern: /turn\d+search\d+/g, replacement: () => "" },
  { pattern: /[\uE000-\uF8FF]/g, replacement: () => "" },
  // Unicode control characters
  { pattern: / {2,}/g, replacement: () => " " },
  // Multiple spaces
  { pattern: /\n{3,}/g, replacement: () => "\n\n" }
  // Multiple newlines
];

// src/providers/chatgpt/chatgpt-attachment-extractor.ts
init_utils();
var ChatGPTAttachmentExtractor = class {
  // All opened ZIPs for multi-ZIP fallback
  constructor(plugin, logger6) {
    this.plugin = plugin;
    this.logger = logger6;
    this.zipFileCache = /* @__PURE__ */ new Map();
    // Cache for ZIP file lookups
    this.attachmentMap = null;
    // Multi-ZIP attachment map
    this.allZips = [];
  }
  /**
   * Set attachment map for multi-ZIP support
   * This enables fallback to older ZIPs when files are missing in recent exports
   */
  setAttachmentMap(attachmentMap, allZips) {
    this.attachmentMap = attachmentMap;
    this.allZips = allZips;
  }
  /**
   * Clear attachment map and ZIPs (call after import completes)
   */
  clearAttachmentMap() {
    this.attachmentMap = null;
    this.allZips = [];
    this.zipFileCache.clear();
  }
  /**
   * Extract and save ChatGPT attachments using "best effort" strategy
   * - If file exists in ZIP: extract and link
   * - If file missing: create informative note
   */
  async extractAttachments(zip, conversationId, attachments, messageId) {
    if (attachments.length === 0) {
      return attachments.map((att) => ({ ...att, status: { processed: false, found: false } }));
    }
    const processedAttachments = [];
    for (const attachment of attachments) {
      try {
        const result = await this.processAttachmentBestEffort(zip, conversationId, attachment, messageId);
        processedAttachments.push(result);
      } catch (error) {
        const errorMessage = error instanceof Error ? error.message : String(error);
        const context = messageId ? `conversation: ${conversationId}, message: ${messageId}` : `conversation: ${conversationId}`;
        this.logger.error(`Failed to process ChatGPT attachment: ${attachment.fileName} (${context})`, errorMessage);
        processedAttachments.push({
          ...attachment,
          status: {
            processed: false,
            found: false,
            reason: "extraction_failed",
            note: `Processing failed: ${errorMessage}`
          }
        });
      }
    }
    return processedAttachments;
  }
  /**
   * Process single attachment with best effort strategy
   */
  async processAttachmentBestEffort(zip, conversationId, attachment, messageId) {
    const zipFile = await this.findChatGPTFileById(zip, attachment, conversationId, messageId);
    if (!zipFile) {
      let finalExtractedContent = attachment.extractedContent;
      if (attachment.attachmentType === "generated_image" && attachment.extractedContent) {
        finalExtractedContent = attachment.extractedContent.replace(
          />>\[!nexus_attachment\] \*\*\{\{FILENAME\}\}\*\* \(\{\{FILETYPE\}\}\) - \{\{FILESIZE\}\}\n>> !\[\[\{\{URL\}\}\]\]/,
          ">>[!nexus_attachment] **Image Not Found**\n>> \u26A0\uFE0F Image could not be found. Perhaps it was not generated or is missing from the archive."
        );
      }
      return {
        ...attachment,
        extractedContent: finalExtractedContent,
        status: {
          processed: true,
          found: false,
          reason: "missing_from_export",
          note: "This file was referenced in the conversation but not included in the ChatGPT export. This can happen with older conversations or certain file types."
        }
      };
    }
    try {
      const extractResult = await this.extractSingleAttachment(zip, conversationId, attachment, zipFile);
      if (extractResult) {
        let finalExtractedContent = attachment.extractedContent;
        if (attachment.attachmentType === "generated_image" && attachment.extractedContent) {
          finalExtractedContent = attachment.extractedContent.replace("{{FILENAME}}", extractResult.finalFileName).replace("{{FILETYPE}}", extractResult.actualFileType).replace("{{FILESIZE}}", this.formatFileSize(attachment.fileSize || 0)).replace("{{URL}}", extractResult.localPath);
        }
        return {
          ...attachment,
          fileName: extractResult.finalFileName,
          // Update with actual extracted filename
          fileType: extractResult.actualFileType,
          // Update with detected file type
          url: extractResult.localPath,
          extractedContent: finalExtractedContent,
          // Update with replaced placeholders
          status: {
            processed: true,
            found: true,
            localPath: extractResult.localPath
          }
        };
      } else {
        let finalExtractedContent = attachment.extractedContent;
        if (attachment.attachmentType === "generated_image" && attachment.extractedContent) {
          finalExtractedContent = attachment.extractedContent.replace(
            />>\[!nexus_attachment\] \*\*\{\{FILENAME\}\}\*\* \(\{\{FILETYPE\}\}\) - \{\{FILESIZE\}\}\n>> !\[\[\{\{URL\}\}\]\]/,
            ">>[!nexus_attachment] **Image Not Found**\n>> \u26A0\uFE0F File was found in export but could not be extracted to disk."
          );
        }
        return {
          ...attachment,
          extractedContent: finalExtractedContent,
          status: {
            processed: true,
            found: false,
            reason: "extraction_failed",
            note: "File was found in export but could not be extracted to disk."
          }
        };
      }
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : String(error);
      const context = messageId ? `conversation: ${conversationId}, message: ${messageId}` : `conversation: ${conversationId}`;
      this.logger.error(`Error extracting ChatGPT attachment: ${attachment.fileName} (${context})`, errorMessage);
      let finalExtractedContent = attachment.extractedContent;
      if (attachment.attachmentType === "generated_image" && attachment.extractedContent) {
        finalExtractedContent = attachment.extractedContent.replace(
          />>\[!nexus_attachment\] \*\*\{\{FILENAME\}\}\*\* \(\{\{FILETYPE\}\}\) - \{\{FILESIZE\}\}\n>> !\[\[\{\{URL\}\}\]\]/,
          `>>[!nexus_attachment] **Extraction Failed**
>> \u26A0\uFE0F ${errorMessage}`
        );
      }
      return {
        ...attachment,
        extractedContent: finalExtractedContent,
        status: {
          processed: true,
          found: true,
          // File exists but extraction failed
          reason: "extraction_failed",
          note: `Extraction failed: ${errorMessage}`
        }
      };
    }
  }
  /**
   * Extract single attachment to disk with conflict resolution and format detection
   */
  async extractSingleAttachment(zip, conversationId, attachment, zipFile) {
    const fileContent = await zipFile.async("uint8array");
    const formatInfo = this.detectFileFormat(fileContent);
    let finalFileName = attachment.fileName;
    let finalFileType = attachment.fileType;
    if (attachment.attachmentType === "generated_image" && formatInfo.extension) {
      const baseName = attachment.fileName.replace(/\.(dat|png|jpg|jpeg|gif|webp)$/i, "");
      finalFileName = `${baseName}.${formatInfo.extension}`;
      finalFileType = formatInfo.mimeType || attachment.fileType;
    }
    let targetPath = this.generateLocalPath(conversationId, {
      ...attachment,
      fileName: finalFileName,
      fileType: finalFileType
    });
    const folderPath = targetPath.substring(0, targetPath.lastIndexOf("/"));
    const folderResult = await ensureFolderExists(folderPath, this.plugin.app.vault);
    if (!folderResult.success) {
      throw new Error(`Failed to create ChatGPT attachment folder: ${folderResult.error}`);
    }
    targetPath = await this.resolveFileConflict(targetPath);
    await this.plugin.app.vault.adapter.writeBinary(targetPath, fileContent.buffer);
    return {
      localPath: targetPath,
      finalFileName,
      actualFileType: finalFileType || "application/octet-stream"
    };
  }
  /**
   * Detect file format from magic bytes (especially for .dat files)
   */
  detectFileFormat(fileContent) {
    if (fileContent.length < 4) {
      this.logger.warn("File too small for format detection");
      return { extension: null, mimeType: null };
    }
    const header = Array.from(fileContent.slice(0, 12)).map((b) => b.toString(16).padStart(2, "0")).join("");
    if (header.startsWith("89504e47")) {
      return { extension: "png", mimeType: "image/png" };
    }
    if (header.startsWith("ffd8ff")) {
      return { extension: "jpg", mimeType: "image/jpeg" };
    }
    if (header.startsWith("47494638")) {
      return { extension: "gif", mimeType: "image/gif" };
    }
    if (header.startsWith("52494646") && header.substring(16, 24) === "57454250") {
      return { extension: "webp", mimeType: "image/webp" };
    }
    if (header.startsWith("52494646")) {
      return { extension: "webp", mimeType: "image/webp" };
    }
    return { extension: null, mimeType: null };
  }
  /**
   * Resolve file conflicts by adding numeric suffix
   */
  async resolveFileConflict(originalPath) {
    let finalPath = originalPath;
    let counter = 1;
    while (await this.plugin.app.vault.adapter.exists(finalPath)) {
      const lastDot = originalPath.lastIndexOf(".");
      if (lastDot === -1) {
        finalPath = `${originalPath}_${counter}`;
      } else {
        const nameWithoutExt = originalPath.substring(0, lastDot);
        const extension = originalPath.substring(lastDot);
        finalPath = `${nameWithoutExt}_${counter}${extension}`;
      }
      counter++;
    }
    return finalPath;
  }
  /**
   * Find file in ZIP - ENHANCED WITH MULTI-ZIP FALLBACK + COMPREHENSIVE SEARCH + CACHING
   */
  async findChatGPTFileById(zip, attachment, conversationId, messageId) {
    if (!attachment.fileId) {
      const context = conversationId && messageId ? `conversation: ${conversationId}, message: ${messageId}` : conversationId ? `conversation: ${conversationId}` : "unknown context";
      this.logger.warn(`No fileId provided for attachment: ${attachment.fileName} (${context})`);
      const zipFile2 = zip.file(attachment.fileName);
      if (zipFile2) {
        return zipFile2;
      }
      return null;
    }
    const cacheKey = `${attachment.fileId}_${attachment.fileName}`;
    if (this.zipFileCache.has(cacheKey)) {
      return this.zipFileCache.get(cacheKey);
    }
    if (this.attachmentMap && this.allZips.length > 0) {
      const result = await this.findFileUsingAttachmentMap(attachment, conversationId, messageId);
      if (result) {
        this.zipFileCache.set(cacheKey, result);
        return result;
      }
    }
    let zipFile = zip.file(attachment.fileName);
    if (zipFile) {
      this.zipFileCache.set(cacheKey, zipFile);
      return zipFile;
    }
    if (attachment.fileName.startsWith("dalle_")) {
      const dalleFiles = await this.searchDalleGenerations(zip, attachment.fileId);
      if (dalleFiles.length > 0) {
        this.zipFileCache.set(cacheKey, dalleFiles[0]);
        return dalleFiles[0];
      }
    }
    const fileIdPattern = `${attachment.fileId}-${attachment.fileName}`;
    zipFile = zip.file(fileIdPattern);
    if (zipFile) {
      this.zipFileCache.set(cacheKey, zipFile);
      return zipFile;
    }
    const extension = this.getFileExtension(attachment.fileName);
    if (extension) {
      const fileIdExtPattern = `${attachment.fileId}.${extension}`;
      zipFile = zip.file(fileIdExtPattern);
      if (zipFile) {
        this.zipFileCache.set(cacheKey, zipFile);
        return zipFile;
      }
    }
    const foundFile = await this.searchZipByFileId(zip, attachment.fileId);
    this.zipFileCache.set(cacheKey, foundFile);
    return foundFile;
  }
  /**
   * Search entire ZIP for file by exact ID with enhanced DALL-E support
   */
  async searchZipByFileId(zip, fileId) {
    for (const [path, file] of Object.entries(zip.files)) {
      if (file.dir)
        continue;
      if (path.includes(fileId)) {
        return file;
      }
      const fileName = path.split("/").pop() || "";
      if (fileName.includes(fileId) || fileName.startsWith(`file-${fileId}`) || fileName.startsWith(fileId)) {
        return file;
      }
    }
    return null;
  }
  /**
   * Find file using attachment map (multi-ZIP fallback)
   * Tries to find the file in any of the available ZIPs, preferring newer exports
   */
  async findFileUsingAttachmentMap(attachment, conversationId, messageId) {
    if (!this.attachmentMap || this.allZips.length === 0) {
      return null;
    }
    const context = conversationId && messageId ? `conversation: ${conversationId}, message: ${messageId}` : conversationId ? `conversation: ${conversationId}` : "unknown context";
    const fileId = attachment.fileId || "";
    if (!fileId) {
      return null;
    }
    const locations = this.attachmentMap.get(fileId);
    if (!locations || locations.length === 0) {
      const alternativeIds = this.getAlternativeFileIds(fileId);
      for (const altId of alternativeIds) {
        const altLocations = this.attachmentMap.get(altId);
        if (altLocations && altLocations.length > 0) {
          return this.getFileFromLocation(altLocations[altLocations.length - 1]);
        }
      }
      return null;
    }
    const bestLocation = locations[locations.length - 1];
    return this.getFileFromLocation(bestLocation);
  }
  /**
   * Get alternative file ID formats for fallback matching
   */
  getAlternativeFileIds(fileId) {
    const alternatives = [];
    if (fileId.startsWith("file_")) {
      alternatives.push(fileId.substring(5));
    } else if (!fileId.startsWith("file-")) {
      alternatives.push(`file_${fileId}`);
    }
    if (fileId.includes("_")) {
      alternatives.push(fileId.replace(/_/g, "-"));
    }
    if (fileId.includes("-")) {
      alternatives.push(fileId.replace(/-/g, "_"));
    }
    return alternatives;
  }
  /**
   * Get JSZip file object from attachment location
   */
  getFileFromLocation(location) {
    if (location.zipIndex >= this.allZips.length) {
      this.logger.error(`Invalid ZIP index ${location.zipIndex} (only ${this.allZips.length} ZIPs available)`);
      return null;
    }
    const zip = this.allZips[location.zipIndex];
    const zipFile = zip.file(location.path);
    if (!zipFile) {
      this.logger.error(`File not found in ZIP ${location.zipIndex}: ${location.path}`);
      return null;
    }
    return zipFile;
  }
  /**
   * Search specifically in dalle-generations/ folder (restored from v1.2.0)
   */
  async searchDalleGenerations(zip, fileId) {
    const matches = [];
    for (const [path, file] of Object.entries(zip.files)) {
      if (!file.dir && path.toLowerCase().includes("dalle")) {
        if (path.includes(fileId) || path.includes(fileId.replace("file_", "")) || path.includes(fileId.replace("file-", ""))) {
          matches.push(file);
        }
      }
    }
    return matches;
  }
  /**
   * Get file extension from filename (restored from v1.2.0)
   */
  getFileExtension(fileName) {
    const lastDot = fileName.lastIndexOf(".");
    return lastDot === -1 ? "" : fileName.substring(lastDot + 1).toLowerCase();
  }
  /**
   * Generate local path for ChatGPT attachment using attachmentFolder setting
   */
  generateLocalPath(conversationId, attachment) {
    const category = this.categorizeFile(attachment);
    const safeFileName = this.sanitizeFileName(attachment.fileName);
    return `${this.plugin.settings.attachmentFolder}/chatgpt/${category}/${safeFileName}`;
  }
  /**
   * Categorize file based on MIME type or extension
   */
  categorizeFile(attachment) {
    if (attachment.fileType) {
      if (attachment.fileType.startsWith("image/"))
        return "images";
      if (attachment.fileType.startsWith("audio/"))
        return "audio";
      if (attachment.fileType.startsWith("video/"))
        return "video";
      if (attachment.fileType === "application/pdf")
        return "documents";
      if (attachment.fileType.includes("text/") || attachment.fileType.includes("markdown"))
        return "documents";
    }
    const ext = this.plugin.getFileService().getFileExtension(attachment.fileName);
    const audioExts = ["wav", "mp3", "ogg", "m4a", "flac"];
    const imageExts = ["png", "jpg", "jpeg", "gif", "webp", "svg"];
    const docExts = ["pdf", "doc", "docx", "txt", "md", "rtf"];
    const videoExts = ["mp4", "avi", "mov", "mkv"];
    if (audioExts.includes(ext))
      return "audio";
    if (imageExts.includes(ext))
      return "images";
    if (docExts.includes(ext))
      return "documents";
    if (videoExts.includes(ext))
      return "video";
    return "files";
  }
  /**
   * Sanitize filename and handle potential conflicts
   */
  sanitizeFileName(fileName) {
    let cleanName = fileName.replace(/[<>:"\/\\|?*]/g, "_").replace(/\s+/g, "_").trim();
    return cleanName;
  }
  /**
   * Format file size in human-readable format
   */
  formatFileSize(bytes) {
    const sizes = ["Bytes", "KB", "MB", "GB"];
    if (bytes === 0)
      return "0 Bytes";
    const i = Math.floor(Math.log(bytes) / Math.log(1024));
    return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + " " + sizes[i];
  }
  /**
   * Clear ZIP file cache (call between different ZIP files)
   */
  clearCache() {
    this.zipFileCache.clear();
  }
  /**
   * Get attachment processing statistics
   */
  getStatistics(attachments) {
    return {
      total: attachments.length,
      found: attachments.filter((a) => {
        var _a, _b;
        return ((_a = a.status) == null ? void 0 : _a.found) && ((_b = a.status) == null ? void 0 : _b.processed);
      }).length,
      missing: attachments.filter((a) => {
        var _a, _b;
        return !((_a = a.status) == null ? void 0 : _a.found) && ((_b = a.status) == null ? void 0 : _b.reason) === "missing_from_export";
      }).length,
      failed: attachments.filter((a) => {
        var _a;
        return ((_a = a.status) == null ? void 0 : _a.reason) === "extraction_failed";
      }).length
    };
  }
};
__name(ChatGPTAttachmentExtractor, "ChatGPTAttachmentExtractor");

// src/providers/chatgpt/chatgpt-report-naming.ts
var ChatGPTReportNamingStrategy = class {
  /**
   * Extract date prefix from ChatGPT ZIP filename
   * Examples:
   * - "3b00abafb9222a9580aa7cbb198166ed0c61634222cce9571bb079a2886aeed5-2025-04-25-14-40-42-ff19c2fd898d44d9bc5945ee80c199ca.zip"
   * - "chatgpt-export-2025-04-25.zip"
   * - "conversations-2025-04-25-14-40-42.zip"
   */
  extractReportPrefix(zipFileName) {
    const now = new Date();
    const importYear = now.getFullYear();
    const importMonth = String(now.getMonth() + 1).padStart(2, "0");
    const importDay = String(now.getDate()).padStart(2, "0");
    const importDate = `${importYear}.${importMonth}.${importDay}`;
    const dateRegex = /(\d{4})-(\d{2})-(\d{2})/;
    const match = zipFileName.match(dateRegex);
    let archiveDate;
    if (match) {
      const [, year, month, day] = match;
      archiveDate = `${year}.${month}.${day}`;
    } else {
      archiveDate = importDate;
    }
    return `imported-${importDate}-archive-${archiveDate}`;
  }
  /**
   * Get ChatGPT provider name
   */
  getProviderName() {
    return "chatgpt";
  }
  getProviderSpecificColumn() {
    return {
      header: "Attachments",
      getValue: (adapter, chat) => {
        let attachmentCount = 0;
        if (chat.mapping) {
          Object.values(chat.mapping).forEach((node) => {
            var _a, _b, _c, _d;
            if ((_b = (_a = node.message) == null ? void 0 : _a.metadata) == null ? void 0 : _b.attachments) {
              attachmentCount += node.message.metadata.attachments.length;
            }
            if ((_d = (_c = node.message) == null ? void 0 : _c.content) == null ? void 0 : _d.parts) {
              node.message.content.parts.forEach((part) => {
                var _a2;
                if (part.content_type === "image_asset_pointer" && part.asset_pointer && ((_a2 = part.metadata) == null ? void 0 : _a2.dalle) && part.metadata.dalle !== null) {
                  attachmentCount++;
                }
              });
            }
          });
        }
        return attachmentCount;
      }
    };
  }
};
__name(ChatGPTReportNamingStrategy, "ChatGPTReportNamingStrategy");

// src/providers/chatgpt/chatgpt-adapter.ts
var ChatGPTAdapter = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.attachmentExtractor = new ChatGPTAttachmentExtractor(plugin, plugin.logger);
    this.reportNamingStrategy = new ChatGPTReportNamingStrategy();
  }
  detect(rawConversations) {
    if (rawConversations.length === 0)
      return false;
    const sample = rawConversations[0];
    return !!(sample.mapping && sample.create_time && sample.update_time && sample.title);
  }
  getId(chat) {
    return chat.id || "";
  }
  getTitle(chat) {
    return chat.title || "Untitled";
  }
  getCreateTime(chat) {
    return chat.create_time || 0;
  }
  getUpdateTime(chat) {
    return chat.update_time || 0;
  }
  convertChat(chat) {
    return ChatGPTConverter.convertChat(chat);
  }
  getProviderName() {
    return "chatgpt";
  }
  getNewMessages(chat, existingMessageIds) {
    var _a, _b;
    const newMessages = [];
    const { imagePrompts, orphanedPrompts } = ChatGPTDalleProcessor.extractDallePromptsFromMapping(chat);
    for (const messageObj of Object.values(chat.mapping)) {
      if ((messageObj == null ? void 0 : messageObj.id) && !existingMessageIds.includes(messageObj.id)) {
        const message = messageObj.message;
        if (!message)
          continue;
        if (((_a = message.author) == null ? void 0 : _a.role) === "tool" && ChatGPTDalleProcessor.hasRealDalleImage(message)) {
          const promptData = imagePrompts.get(messageObj.id || "");
          const dalleMessage = ChatGPTDalleProcessor.createDalleAssistantMessage(
            message,
            promptData == null ? void 0 : promptData.prompt,
            promptData == null ? void 0 : promptData.timestamp
          );
          if (dalleMessage) {
            const chatMessage = {
              id: dalleMessage.id,
              author: { role: dalleMessage.role },
              content: { parts: [dalleMessage.content] },
              create_time: dalleMessage.timestamp,
              attachments: (_b = dalleMessage.attachments) == null ? void 0 : _b.map((att) => ({
                file_name: att.fileName,
                file_size: att.fileSize,
                file_type: att.fileType,
                extracted_content: att.extractedContent
              }))
            };
            newMessages.push(chatMessage);
          }
        } else if (orphanedPrompts.has(messageObj.id || "")) {
          const prompt = orphanedPrompts.get(messageObj.id || "");
          if (prompt) {
            const orphanedMessage = ChatGPTDalleProcessor.createOrphanedPromptMessage(message, prompt);
            const chatMessage = {
              id: orphanedMessage.id,
              author: { role: orphanedMessage.role },
              content: { parts: [orphanedMessage.content] },
              create_time: orphanedMessage.timestamp
            };
            newMessages.push(chatMessage);
          }
        } else if (ChatGPTMessageFilter.shouldIncludeMessage(message)) {
          newMessages.push(message);
        }
      }
    }
    return newMessages;
  }
  async processMessageAttachments(messages, conversationId, zip) {
    const processedMessages = [];
    for (const message of messages) {
      if (message.attachments && message.attachments.length > 0) {
        const processedAttachments = await this.attachmentExtractor.extractAttachments(
          zip,
          conversationId,
          message.attachments,
          message.id
          // Pass message ID for better logging
        );
        processedMessages.push({
          ...message,
          attachments: processedAttachments
        });
      } else {
        processedMessages.push(message);
      }
    }
    return processedMessages;
  }
  getReportNamingStrategy() {
    return this.reportNamingStrategy;
  }
  /**
   * Set attachment map for multi-ZIP support
   */
  setAttachmentMap(attachmentMap, allZips) {
    this.attachmentExtractor.setAttachmentMap(attachmentMap, allZips);
  }
  /**
   * Clear attachment map after import completes
   */
  clearAttachmentMap() {
    this.attachmentExtractor.clearAttachmentMap();
  }
};
__name(ChatGPTAdapter, "ChatGPTAdapter");

// src/providers/claude/claude-converter.ts
init_utils();
var ClaudeConverter = class {
  static setPlugin(plugin) {
    this.plugin = plugin;
  }
  static async convertChat(chat) {
    const createTime = chat.created_at ? Math.floor(new Date(chat.created_at).getTime() / 1e3) : 0;
    const conversationTitle = chat.name || "Untitled";
    const messages = await this.convertMessages(chat.chat_messages, chat.uuid, conversationTitle, createTime);
    return {
      id: chat.uuid,
      title: conversationTitle,
      createTime: chat.created_at ? Math.floor(new Date(chat.created_at).getTime() / 1e3) : 0,
      updateTime: chat.updated_at ? Math.floor(new Date(chat.updated_at).getTime() / 1e3) : 0,
      messages,
      provider: "claude",
      chatUrl: `https://claude.ai/chat/${chat.uuid}`,
      metadata: {
        model: chat.model || "claude-3",
        summary: chat.summary || "",
        is_starred: chat.is_starred,
        current_leaf_message_uuid: chat.current_leaf_message_uuid,
        project_uuid: chat.project_uuid
      }
    };
  }
  static async convertMessages(messages, conversationId, conversationTitle, conversationCreateTime) {
    const standardMessages = [];
    if (!messages || messages.length === 0) {
      return standardMessages;
    }
    const allArtifacts = [];
    for (let msgIndex = 0; msgIndex < messages.length; msgIndex++) {
      const message = messages[msgIndex];
      if (message.content) {
        for (let blockIndex = 0; blockIndex < message.content.length; blockIndex++) {
          const block = message.content[blockIndex];
          if (block.type === "tool_use" && block.name === "artifacts" && block.input) {
            const command = block.input.command || "create";
            const versionUuid = block.input.version_uuid;
            if (command !== "view" && versionUuid) {
              const messageTimestamp = message.created_at ? Math.floor(new Date(message.created_at).getTime() / 1e3) : 0;
              allArtifacts.push({
                artifact: block.input,
                messageIndex: msgIndex,
                blockIndex,
                messageTimestamp
              });
            }
          }
        }
      }
    }
    const artifactVersionMap = await this.processAllArtifacts(allArtifacts, conversationId, conversationTitle, conversationCreateTime);
    for (const message of messages) {
      if (!this.shouldIncludeMessage(message)) {
        continue;
      }
      const { text, attachments } = await this.processContentBlocksForDisplay(
        message.content,
        artifactVersionMap,
        conversationId,
        conversationTitle,
        conversationCreateTime
      );
      const fileAttachments = this.processFileAttachments(message.files);
      const standardMessage = {
        id: message.uuid,
        role: message.sender === "human" ? "user" : "assistant",
        content: text || message.text || "",
        timestamp: Math.floor(new Date(message.created_at).getTime() / 1e3),
        attachments: [...attachments, ...fileAttachments]
      };
      standardMessages.push(standardMessage);
    }
    return this.sortMessagesByTimestamp(standardMessages);
  }
  static shouldIncludeMessage(message) {
    if (message.sender === "human" || message.sender === "assistant") {
      if (!message.text && (!message.content || message.content.length === 0)) {
        return false;
      }
      return true;
    }
    return false;
  }
  /**
   * Sort messages by timestamp with UUID as secondary sort for chronological order
   */
  static sortMessagesByTimestamp(messages) {
    if (messages.length <= 1)
      return messages;
    return messages.sort((a, b) => {
      if (a.timestamp !== b.timestamp) {
        return a.timestamp - b.timestamp;
      }
      return a.id.localeCompare(b.id);
    });
  }
  /**
   * Process ALL artifacts from entire conversation and create files
   */
  static async processAllArtifacts(allArtifacts, conversationId, conversationTitle, conversationCreateTime) {
    const artifactVersionMap = /* @__PURE__ */ new Map();
    const versionCounters = /* @__PURE__ */ new Map();
    const artifactContents = /* @__PURE__ */ new Map();
    const artifactLanguages = /* @__PURE__ */ new Map();
    for (const { artifact, messageTimestamp } of allArtifacts) {
      const artifactId = artifact.id || "unknown";
      const command = artifact.command || "create";
      const currentVersion = (versionCounters.get(artifactId) || 0) + 1;
      versionCounters.set(artifactId, currentVersion);
      let finalContent = "";
      if (command === "create" || command === "rewrite") {
        finalContent = artifact.content || "";
        artifactContents.set(artifactId, finalContent);
        const detectedLanguage = this.detectLanguageFromContent(finalContent, artifact.type);
        artifactLanguages.set(artifactId, detectedLanguage);
      } else if (command === "update") {
        const previousContent = artifactContents.get(artifactId) || "";
        if (artifact.old_str && artifact.new_str) {
          finalContent = previousContent.replace(artifact.old_str, artifact.new_str);
        } else if (artifact.content && artifact.content.length > 0) {
          finalContent = artifact.content;
        } else {
          finalContent = previousContent;
        }
        artifactContents.set(artifactId, finalContent);
      }
      try {
        const storedLanguage = artifactLanguages.get(artifactId);
        const languageToUse = storedLanguage || this.detectLanguageFromContent(finalContent, artifact.type);
        await this.saveSingleArtifactVersionWithContent(
          artifactId,
          artifact,
          currentVersion,
          finalContent,
          conversationId,
          conversationTitle,
          conversationCreateTime,
          languageToUse,
          messageTimestamp
        );
        artifactVersionMap.set(artifact.version_uuid, {
          versionNumber: currentVersion,
          title: artifact.title || artifactId
        });
      } catch (error) {
        logger.error(`Failed to save ${artifactId} v${currentVersion}:`, error);
      }
    }
    return artifactVersionMap;
  }
  /**
   * Process content blocks for display (with artifact links)
   */
  static async processContentBlocksForDisplay(contentBlocks, artifactVersionMap, conversationId, conversationTitle, conversationCreateTime) {
    const textParts = [];
    const attachments = [];
    if (!contentBlocks || contentBlocks.length === 0) {
      return { text: "", attachments: [] };
    }
    for (const block of contentBlocks) {
      switch (block.type) {
        case "text":
          if (block.text) {
            textParts.push(block.text);
          }
          break;
        case "thinking":
          break;
        case "tool_use":
          if (block.name === "artifacts" && block.input) {
            const command = block.input.command || "create";
            const versionUuid = block.input.version_uuid;
            if (command === "view") {
              break;
            }
            if (versionUuid && artifactVersionMap.has(versionUuid)) {
              const versionInfo = artifactVersionMap.get(versionUuid);
              const artifactId = block.input.id || "unknown";
              const conversationFolder = `${this.plugin.settings.attachmentFolder}/claude/artifacts/${conversationId}`;
              const versionFile = `${conversationFolder}/${artifactId}_v${versionInfo.versionNumber}`;
              const specificLink = `>[!${this.CALLOUTS.ARTIFACT}] **${versionInfo.title}** v${versionInfo.versionNumber}
> \u{1F3A8} [[${versionFile}|View Artifact]]`;
              textParts.push(specificLink);
            }
          } else if (block.name === "web_search") {
            break;
          } else if (block.name && block.input) {
            const code = block.input.code || JSON.stringify(block.input, null, 2);
            textParts.push(`**[Tool: ${block.name}]**
\`\`\`
${code}
\`\`\``);
          }
          break;
        case "tool_result":
          break;
      }
    }
    return {
      text: textParts.join("\n\n"),
      attachments
    };
  }
  static async processContentBlocks(contentBlocks, conversationId, conversationTitle, conversationCreateTime, versionCounters, artifactSummaries) {
    const textParts = [];
    const attachments = [];
    const artifactVersionsMap = /* @__PURE__ */ new Map();
    if (!contentBlocks || contentBlocks.length === 0) {
      return { text: "", attachments: [] };
    }
    for (const block of contentBlocks) {
      if (block.type === "tool_use" && block.name === "artifacts" && block.input) {
        const artifactId = block.input.id || "unknown";
        const content = block.input.content || "";
        const command = block.input.command || "create";
        const versionUuid = block.input.version_uuid;
        if (command === "update" && content.length === 0 || command === "view") {
          continue;
        }
        const isSignificant = command === "create" || command === "rewrite" || command === "update" && content.length > 100;
        if (isSignificant && versionUuid) {
          if (!artifactVersionsMap.has(artifactId)) {
            artifactVersionsMap.set(artifactId, []);
          }
          artifactVersionsMap.get(artifactId).push(block.input);
        }
      }
    }
    if (!versionCounters)
      versionCounters = /* @__PURE__ */ new Map();
    if (!artifactSummaries)
      artifactSummaries = /* @__PURE__ */ new Map();
    const artifactContents = /* @__PURE__ */ new Map();
    for (const block of contentBlocks) {
      switch (block.type) {
        case "text":
          if (block.text) {
            textParts.push(block.text);
          }
          break;
        case "thinking":
          break;
        case "tool_use":
          if (block.name === "repl" || block.name === "str_replace_editor" || block.name === "bash") {
            break;
          }
          if (block.name === "artifacts" && block.input) {
            const artifactId = block.input.id || "unknown";
            const command = block.input.command || "create";
            const versionUuid = block.input.version_uuid;
            if (command === "view") {
              break;
            }
            if (versionUuid) {
              const currentVersion = (versionCounters.get(artifactId) || 0) + 1;
              versionCounters.set(artifactId, currentVersion);
              let finalContent = "";
              if (command === "create" || command === "rewrite") {
                finalContent = block.input.content || "";
                artifactContents.set(artifactId, finalContent);
              } else if (command === "update") {
                const previousContent = artifactContents.get(artifactId) || "";
                if (block.input.old_str && block.input.new_str) {
                  finalContent = previousContent.replace(block.input.old_str, block.input.new_str);
                } else if (block.input.content && block.input.content.length > 0) {
                  finalContent = block.input.content;
                } else {
                  finalContent = previousContent;
                }
                artifactContents.set(artifactId, finalContent);
              }
              try {
                await this.saveSingleArtifactVersionWithContent(
                  artifactId,
                  block.input,
                  currentVersion,
                  finalContent,
                  conversationId,
                  conversationTitle,
                  conversationCreateTime
                );
                const title = block.input.title || artifactId;
                const conversationFolder = `${this.plugin.settings.attachmentFolder}/claude/artifacts/${conversationId}`;
                const versionFile = `${conversationFolder}/${artifactId}_v${currentVersion}`;
                const specificLink = `>[!${this.CALLOUTS.ARTIFACT}] **${title}** v${currentVersion}
> \u{1F3A8} [[${versionFile}|View Artifact]]`;
                textParts.push(specificLink);
              } catch (error) {
                logger.error(`Failed to save ${artifactId} v${currentVersion}:`, error);
                textParts.push(`>[!${this.CALLOUTS.ARTIFACT}] **${block.input.title || artifactId}** v${currentVersion}
> \u274C Error saving artifact`);
              }
            }
          } else if (block.name === "web_search") {
            break;
          } else if (block.name && block.input) {
            const code = block.input.code || JSON.stringify(block.input, null, 2);
            textParts.push(`**[Tool: ${block.name}]**
\`\`\`
${code}
\`\`\``);
          }
          break;
        case "tool_result":
          break;
      }
    }
    return {
      text: textParts.join("\n\n"),
      attachments
    };
  }
  static processFileAttachments(files) {
    const attachments = [];
    if (!files || files.length === 0) {
      return attachments;
    }
    for (const file of files) {
      if (file && file.file_name) {
        attachments.push({
          fileName: file.file_name,
          fileSize: 0,
          // Size not provided in Claude export
          fileType: this.getFileTypeFromName(file.file_name),
          fileId: file.file_name,
          // Use filename as ID
          extractedContent: ""
        });
      }
    }
    return attachments;
  }
  static getFileTypeFromName(fileName) {
    var _a;
    const extension = (_a = fileName.split(".").pop()) == null ? void 0 : _a.toLowerCase();
    switch (extension) {
      case "png":
      case "jpg":
      case "jpeg":
      case "gif":
      case "webp":
        return `image/${extension}`;
      case "pdf":
        return "application/pdf";
      case "txt":
        return "text/plain";
      case "md":
        return "text/markdown";
      case "json":
        return "application/json";
      default:
        return "application/octet-stream";
    }
  }
  /**
   * Save a single artifact version with computed content
   */
  static async saveSingleArtifactVersionWithContent(artifactId, artifactData, versionNumber, finalContent, conversationId, conversationTitle, conversationCreateTime, forcedLanguage, messageTimestamp) {
    if (!this.plugin) {
      throw new Error("Plugin not available");
    }
    const { ensureFolderExists: ensureFolderExists2 } = await Promise.resolve().then(() => (init_utils(), utils_exports));
    const conversationFolder = `${this.plugin.settings.attachmentFolder}/claude/artifacts/${conversationId}`;
    const folderResult = await ensureFolderExists2(conversationFolder, this.plugin.app.vault);
    if (!folderResult.success) {
      throw new Error(`Failed to create artifacts folder: ${folderResult.error}`);
    }
    const safeArtifactId = artifactId.replace(/[\/\\:*?"<>|]/g, "_");
    const fileName = `${safeArtifactId}_v${versionNumber}.md`;
    const filePath = `${conversationFolder}/${fileName}`;
    const shouldSkip = await this.shouldSkipArtifactVersion(filePath, artifactData.version_uuid);
    if (shouldSkip) {
      return;
    }
    await this.saveIndividualArtifactVersion(
      artifactData,
      filePath,
      versionNumber,
      finalContent,
      conversationId,
      conversationTitle,
      conversationCreateTime,
      forcedLanguage,
      messageTimestamp
    );
  }
  /**
   * Create artifact summary for conversation
   */
  static createArtifactSummary(artifactId, info, conversationId) {
    const title = info.title || artifactId;
    const totalVersions = info.totalVersions || 1;
    const latestVersion = info.latestVersion || 1;
    const conversationFolder = `${this.plugin.settings.attachmentFolder}/claude/artifacts/${conversationId}`;
    const latestFile = `${conversationFolder}/${artifactId}_v${latestVersion}`;
    let summary = `<div class="nexus-artifact-box">**\u{1F3A8} Artifact: ${title}**`;
    if (totalVersions > 1) {
      summary += ` (${totalVersions} versions)`;
    }
    summary += `

\u{1F4CE} **[[${latestFile}|View Latest Version]]**`;
    if (totalVersions > 1) {
      summary += ` | **[[${conversationFolder}/|All Versions]]**`;
    }
    summary += `</div>`;
    return summary;
  }
  /**
   * Format artifact summary for conversation display
   */
  static formatArtifactSummary(firstVersion, savedVersions, latestVersion, conversationFolder) {
    const title = (firstVersion == null ? void 0 : firstVersion.title) || "Untitled Artifact";
    const versionCount = savedVersions.length;
    if (!latestVersion) {
      logger.error("Claude converter: No latest version available for artifact summary");
      return `<div class="nexus-artifact-box">**\u{1F3A8} Artifact: ${title}** (Error: No accessible version)</div>`;
    }
    let formattedContent = `<div class="nexus-artifact-box">**\u{1F3A8} Artifact: ${title}**`;
    if (versionCount > 1) {
      formattedContent += ` (${versionCount} versions)`;
    }
    const latestVersionLink = latestVersion.replace(/\.md$/, "");
    formattedContent += `

\u{1F4CE} **[[${latestVersionLink}|View Latest Version]]**`;
    if (versionCount > 1) {
      formattedContent += ` | **[[${conversationFolder}/|All Versions]]**`;
    }
    formattedContent += `</div>`;
    return formattedContent;
  }
  /**
   * Save a single artifact version with specific content
   */
  static async saveIndividualArtifactVersion(artifactInput, filePath, versionNumber, versionContent, conversationId, conversationTitle, conversationCreateTime, forcedLanguage, messageTimestamp) {
    const title = artifactInput.title || "Untitled Artifact";
    let language = artifactInput.language || "text";
    const command = artifactInput.command || "create";
    const artifactId = artifactInput.id || "unknown";
    const versionUuid = artifactInput.version_uuid;
    if (forcedLanguage) {
      language = forcedLanguage;
    } else if ((language.toLowerCase() === "text" || !language || language === "undefined") && versionContent) {
      const detectedLanguage = this.detectLanguageFromContent(versionContent, artifactInput.type);
      if (detectedLanguage !== "text") {
        language = detectedLanguage;
      }
    }
    let conversationLink = "";
    if (conversationId && conversationTitle && conversationCreateTime) {
      const createDate = new Date(conversationCreateTime * 1e3);
      const year = createDate.getFullYear();
      const month = String(createDate.getMonth() + 1).padStart(2, "0");
      const { generateConversationFileName: generateConversationFileName2 } = await Promise.resolve().then(() => (init_utils(), utils_exports));
      const fileName = generateConversationFileName2(
        conversationTitle,
        conversationCreateTime,
        this.plugin.settings.addDatePrefix,
        this.plugin.settings.dateFormat
      );
      const conversationPath = `${this.plugin.settings.conversationFolder}/claude/${year}/${month}/${fileName}`;
      conversationLink = `[[${conversationPath}|${conversationTitle}]]`;
    }
    const safeArtifactTitle = generateSafeAlias(title);
    const safeArtifactAlias = generateSafeAlias(`${artifactId}_v${versionNumber}`);
    const artifactCreateTime = messageTimestamp || conversationCreateTime || 0;
    const createTimeStr = artifactCreateTime > 0 ? new Date(artifactCreateTime * 1e3).toISOString() : "unknown";
    let markdownContent = `---
nexus: nexus-ai-chat-importer
plugin_version: "${this.plugin.manifest.version}"
provider: claude
artifact_id: ${artifactId}
version_uuid: ${versionUuid}
version_number: ${versionNumber}
command: ${command}
conversation_id: ${conversationId || "unknown"}
create_time: ${createTimeStr}
format: ${language}
aliases: [${safeArtifactTitle}, ${safeArtifactAlias}]
---

# ${title} (Version ${versionNumber})
`;
    if (conversationLink) {
      markdownContent += `
**Conversation:** ${conversationLink}

`;
    }
    markdownContent += `## Content

`;
    if (language.toLowerCase() === "markdown") {
      markdownContent += versionContent;
    } else {
      markdownContent += `\`\`\`${language}
${versionContent}
\`\`\``;
    }
    try {
      await this.plugin.app.vault.create(filePath, markdownContent);
    } catch (error) {
      logger.error(`Failed to create artifact file ${filePath}:`, error);
      throw error;
    }
  }
  /**
   * Check if we should skip saving this artifact version (already exists)
   */
  static async shouldSkipArtifactVersion(filePath, versionUuid) {
    try {
      const existingFile = this.plugin.app.vault.getAbstractFileByPath(filePath);
      if (!existingFile) {
        return false;
      }
      const existingContent = await this.plugin.app.vault.read(existingFile);
      if (existingContent.includes(`version_uuid: ${versionUuid}`)) {
        return true;
      }
      return false;
    } catch (error) {
      return false;
    }
  }
  /**
   * Determine if we should replace the current artifact with a new one
   * Priority: create > rewrite > update (with content) > view
   */
  static shouldReplaceArtifact(current, candidate) {
    const currentCommand = current.command || "create";
    const candidateCommand = candidate.command || "create";
    const currentContent = (current.content || "").length;
    const candidateContent = (candidate.content || "").length;
    const commandPriority = {
      "create": 4,
      "rewrite": 3,
      "update": 2,
      "view": 1
    };
    const currentPriority = commandPriority[currentCommand] || 1;
    const candidatePriority = commandPriority[candidateCommand] || 1;
    if (candidatePriority > currentPriority) {
      return true;
    }
    if (candidatePriority === currentPriority) {
      return candidateContent > currentContent;
    }
    return false;
  }
  /**
   * Auto-detect language from content and artifact type
   */
  static detectLanguageFromContent(content, artifactType) {
    if (!content || content.trim().length === 0)
      return "text";
    if (artifactType) {
      if (artifactType.includes("react") || artifactType.includes("jsx"))
        return "jsx";
      if (artifactType.includes("vue"))
        return "vue";
      if (artifactType.includes("svelte"))
        return "svelte";
      if (artifactType.includes("html"))
        return "html";
      if (artifactType.includes("css"))
        return "css";
      if (artifactType.includes("json"))
        return "json";
      if (artifactType.includes("xml"))
        return "xml";
      if (artifactType.includes("svg"))
        return "xml";
    }
    const trimmedContent = content.trim();
    if (trimmedContent.startsWith("<?php"))
      return "php";
    if (trimmedContent.startsWith("#!/bin/bash") || trimmedContent.startsWith("#!/bin/sh"))
      return "bash";
    if (trimmedContent.startsWith("<!DOCTYPE html") || trimmedContent.includes("<html"))
      return "html";
    if (trimmedContent.includes("import React") || trimmedContent.includes('from "react"') || trimmedContent.includes("useState") || trimmedContent.includes("useEffect") || trimmedContent.includes("className=") || trimmedContent.includes("jsx")) {
      return "jsx";
    }
    if (trimmedContent.startsWith("{") && trimmedContent.endsWith("}")) {
      try {
        JSON.parse(trimmedContent);
        return "json";
      } catch (e) {
      }
    }
    if (trimmedContent.startsWith("<svg") || trimmedContent.includes("xmlns")) {
      return "xml";
    }
    if (trimmedContent.includes("# ") || trimmedContent.includes("## ") || trimmedContent.includes("**") || trimmedContent.includes("```")) {
      return "markdown";
    }
    if (trimmedContent.includes("def ") || trimmedContent.includes("import ") || trimmedContent.includes("from ") || trimmedContent.includes("class ")) {
      return "python";
    }
    if (trimmedContent.includes("function ") || trimmedContent.includes("const ") || trimmedContent.includes("let ") || trimmedContent.includes("var ") || trimmedContent.includes("=>")) {
      return "javascript";
    }
    if (trimmedContent.includes("{") && trimmedContent.includes(":") && trimmedContent.includes(";") && trimmedContent.includes("}")) {
      return "css";
    }
    if (trimmedContent.toUpperCase().includes("SELECT ") || trimmedContent.toUpperCase().includes("INSERT ") || trimmedContent.toUpperCase().includes("UPDATE ") || trimmedContent.toUpperCase().includes("CREATE TABLE")) {
      return "sql";
    }
    return "text";
  }
  /**
   * Get file extension from language
   */
  static getExtensionFromLanguage(language) {
    switch (language.toLowerCase()) {
      case "python":
        return "py";
      case "javascript":
        return "js";
      case "typescript":
        return "ts";
      case "html":
        return "html";
      case "css":
        return "css";
      case "markdown":
        return "md";
      case "json":
        return "json";
      case "yaml":
        return "yml";
      case "xml":
        return "xml";
      case "sql":
        return "sql";
      case "bash":
        return "sh";
      case "shell":
        return "sh";
      case "php":
        return "php";
      default:
        return "txt";
    }
  }
  /**
   * Count unique artifacts in a conversation (by artifact ID, not versions)
   */
  static countArtifacts(chat) {
    var _a;
    const uniqueArtifacts = /* @__PURE__ */ new Set();
    for (const message of chat.chat_messages) {
      if (message.content) {
        for (const block of message.content) {
          if (block.type === "tool_use" && block.name === "artifacts" && ((_a = block.input) == null ? void 0 : _a.id)) {
            uniqueArtifacts.add(block.input.id);
          }
        }
      }
    }
    return uniqueArtifacts.size;
  }
};
__name(ClaudeConverter, "ClaudeConverter");
// Nexus custom callouts with icons
ClaudeConverter.CALLOUTS = {
  USER: "nexus_user",
  // üë§ User messages
  AGENT: "nexus_agent",
  // ü§ñ Assistant/Agent messages
  ATTACHMENT: "nexus_attachment",
  // üìé Attachments
  ARTIFACT: "nexus_artifact",
  // üõ†Ô∏è Claude artifacts
  PROMPT: "nexus_prompt"
  // üí≠ System prompts
};

// src/providers/claude/claude-attachment-extractor.ts
var ClaudeAttachmentExtractor = class {
  constructor(plugin, logger6) {
    this.plugin = plugin;
    this.logger = logger6;
  }
  /**
   * Extract attachments from Claude ZIP archive
   * NOTE: Claude exports typically do NOT include the actual files, only references
   * This method handles the "files not found" case gracefully
   */
  async extractAttachments(zip, conversationId, attachments) {
    if (attachments.length === 0) {
      return attachments.map((att) => ({
        ...att,
        extractedContent: `File: ${att.fileName} (no attachments to process)`
      }));
    }
    const processedAttachments = [];
    for (const attachment of attachments) {
      try {
        const processedAttachment = await this.processAttachment(zip, conversationId, attachment);
        processedAttachments.push(processedAttachment);
      } catch (error) {
        this.logger.error(`Failed to process Claude attachment ${attachment.fileName}:`, error);
        processedAttachments.push({
          ...attachment,
          extractedContent: `\u274C **File: ${attachment.fileName}**

Error processing attachment: ${error instanceof Error ? error.message : "Unknown error"}`
        });
      }
    }
    return processedAttachments;
  }
  /**
   * Process a single Claude attachment
   * Claude exports typically don't include files, so we create informative placeholders
   */
  async processAttachment(zip, conversationId, attachment) {
    const fileName = attachment.fileName;
    const zipFile = this.findFileInZip(zip, fileName);
    if (!zipFile) {
      return this.createFileNotFoundPlaceholder(attachment, conversationId);
    }
    if (this.isImageFile(fileName)) {
      return await this.processImageAttachment(zipFile, attachment, conversationId);
    } else if (this.isTextFile(fileName)) {
      return await this.processTextAttachment(zipFile, attachment);
    } else {
      return await this.processBinaryAttachment(zipFile, attachment, conversationId);
    }
  }
  /**
   * Create simple placeholder for missing files (normal for Claude)
   */
  createFileNotFoundPlaceholder(attachment, conversationId) {
    const fileName = attachment.fileName;
    const conversationUrl = `https://claude.ai/chat/${conversationId}`;
    const fileType = this.getFileTypeFromExtension(fileName);
    const placeholder = `>>[!nexus_attachment] **${fileName}** (${fileType})
>> \u26A0\uFE0F Not included in archive. [Open original conversation](${conversationUrl})`;
    return {
      ...attachment,
      extractedContent: placeholder
    };
  }
  /**
   * Get file type from extension
   */
  getFileTypeFromExtension(fileName) {
    var _a;
    const extension = (_a = fileName.split(".").pop()) == null ? void 0 : _a.toLowerCase();
    switch (extension) {
      case "png":
      case "jpg":
      case "jpeg":
      case "gif":
      case "webp":
        return `image/${extension}`;
      case "pdf":
        return "application/pdf";
      case "txt":
        return "text/plain";
      case "md":
        return "text/markdown";
      case "json":
        return "application/json";
      default:
        return "application/octet-stream";
    }
  }
  /**
   * Find a file in the ZIP archive
   * Claude files might be in root or in subdirectories
   */
  findFileInZip(zip, fileName) {
    let file = zip.file(fileName);
    if (file)
      return file;
    const commonPaths = ["attachments/", "files/", "uploads/"];
    for (const path of commonPaths) {
      file = zip.file(path + fileName);
      if (file)
        return file;
    }
    const allFiles = Object.keys(zip.files);
    for (const filePath of allFiles) {
      if (filePath.endsWith(fileName) || filePath.includes(fileName)) {
        return zip.file(filePath);
      }
    }
    return null;
  }
  /**
   * Process image attachment
   */
  async processImageAttachment(zipFile, attachment, conversationId) {
    try {
      const imageData = await zipFile.async("base64");
      const fileName = this.generateUniqueFileName(attachment.fileName, conversationId);
      const filePath = await this.saveAttachmentToVault(fileName, imageData, true, "images");
      return {
        ...attachment,
        fileName,
        extractedContent: `![${attachment.fileName}](${filePath})`
      };
    } catch (error) {
      this.logger.error(`Error processing Claude image ${attachment.fileName}:`, error);
      return {
        ...attachment,
        extractedContent: `Error processing image: ${error instanceof Error ? error.message : "Unknown error"}`
      };
    }
  }
  /**
   * Process text attachment
   */
  async processTextAttachment(zipFile, attachment) {
    try {
      const textContent = await zipFile.async("string");
      return {
        ...attachment,
        extractedContent: `\`\`\`
${textContent}
\`\`\``
      };
    } catch (error) {
      this.logger.error(`Error processing Claude text file ${attachment.fileName}:`, error);
      return {
        ...attachment,
        extractedContent: `Error reading text file: ${error instanceof Error ? error.message : "Unknown error"}`
      };
    }
  }
  /**
   * Process binary attachment
   */
  async processBinaryAttachment(zipFile, attachment, conversationId) {
    try {
      const binaryData = await zipFile.async("base64");
      const fileName = this.generateUniqueFileName(attachment.fileName, conversationId);
      const filePath = await this.saveAttachmentToVault(fileName, binaryData, true, "documents");
      return {
        ...attachment,
        fileName,
        extractedContent: `[${attachment.fileName}](${filePath})`
      };
    } catch (error) {
      this.logger.error(`Error processing Claude binary file ${attachment.fileName}:`, error);
      return {
        ...attachment,
        extractedContent: `Error processing file: ${error instanceof Error ? error.message : "Unknown error"}`
      };
    }
  }
  /**
   * Check if file is an image
   */
  isImageFile(fileName) {
    const imageExtensions = [".png", ".jpg", ".jpeg", ".gif", ".webp", ".svg", ".bmp"];
    return imageExtensions.some((ext) => fileName.toLowerCase().endsWith(ext));
  }
  /**
   * Check if file is a text file
   */
  isTextFile(fileName) {
    const textExtensions = [".txt", ".md", ".json", ".csv", ".xml", ".html", ".css", ".js", ".ts", ".py", ".java", ".cpp", ".c", ".h"];
    return textExtensions.some((ext) => fileName.toLowerCase().endsWith(ext));
  }
  /**
   * Generate unique filename to avoid conflicts
   */
  generateUniqueFileName(originalFileName, conversationId) {
    const timestamp = Date.now();
    const shortConversationId = conversationId.substring(0, 8);
    const extension = originalFileName.includes(".") ? originalFileName.split(".").pop() : "";
    const baseName = originalFileName.replace(/\.[^/.]+$/, "");
    return extension ? `claude_${shortConversationId}_${timestamp}_${baseName}.${extension}` : `claude_${shortConversationId}_${timestamp}_${baseName}`;
  }
  /**
   * Save attachment to vault using attachmentFolder setting
   */
  async saveAttachmentToVault(fileName, data, isBase64, category = "files") {
    const attachmentFolder = `${this.plugin.settings.attachmentFolder}/claude/${category}`;
    const { ensureFolderExists: ensureFolderExists2 } = await Promise.resolve().then(() => (init_utils(), utils_exports));
    const folderResult = await ensureFolderExists2(attachmentFolder, this.plugin.app.vault);
    if (!folderResult.success) {
      throw new Error(`Failed to create Claude attachment folder: ${folderResult.error}`);
    }
    const filePath = `${attachmentFolder}/${fileName}`;
    if (isBase64) {
      const binaryString = atob(data);
      const bytes = new Uint8Array(binaryString.length);
      for (let i = 0; i < binaryString.length; i++) {
        bytes[i] = binaryString.charCodeAt(i);
      }
      await this.plugin.app.vault.createBinary(filePath, bytes.buffer);
    } else {
      await this.plugin.app.vault.create(filePath, data);
    }
    return filePath;
  }
};
__name(ClaudeAttachmentExtractor, "ClaudeAttachmentExtractor");

// src/providers/claude/claude-report-naming.ts
var ClaudeReportNamingStrategy = class {
  getProviderName() {
    return "claude";
  }
  extractReportPrefix(zipFileName) {
    const now = new Date();
    const importYear = now.getFullYear();
    const importMonth = String(now.getMonth() + 1).padStart(2, "0");
    const importDay = String(now.getDate()).padStart(2, "0");
    const importDate = `${importYear}.${importMonth}.${importDay}`;
    const claudeBatchPattern = /data-(\d{4})-(\d{2})-(\d{2})-\d{2}-\d{2}-\d{2}-batch-\d{4}/;
    const batchMatch = zipFileName.match(claudeBatchPattern);
    if (batchMatch) {
      const [, year, month, day] = batchMatch;
      const archiveDate = `${year}.${month}.${day}`;
      return `imported-${importDate}-archive-${archiveDate}`;
    }
    const legacyPattern = /(\d{4})-(\d{2})-(\d{2})/;
    const legacyMatch = zipFileName.match(legacyPattern);
    if (legacyMatch) {
      const [, year, month, day] = legacyMatch;
      const archiveDate = `${year}.${month}.${day}`;
      return `imported-${importDate}-archive-${archiveDate}`;
    }
    return `imported-${importDate}-archive-${importDate}`;
  }
  getProviderSpecificColumn() {
    return {
      header: "Artifacts",
      getValue: (adapter, chat) => adapter.countArtifacts ? adapter.countArtifacts(chat) : 0
    };
  }
};
__name(ClaudeReportNamingStrategy, "ClaudeReportNamingStrategy");

// src/providers/claude/claude-adapter.ts
var ClaudeAdapter = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.attachmentExtractor = new ClaudeAttachmentExtractor(plugin, plugin.logger);
    this.reportNamingStrategy = new ClaudeReportNamingStrategy();
  }
  detect(rawConversations) {
    if (rawConversations.length === 0)
      return false;
    const sample = rawConversations[0];
    return !!(sample.uuid && "name" in sample && sample.chat_messages && Array.isArray(sample.chat_messages) && sample.created_at && sample.updated_at);
  }
  getId(chat) {
    return chat.uuid || "";
  }
  getTitle(chat) {
    return chat.name || "Untitled";
  }
  getCreateTime(chat) {
    return chat.created_at ? Math.floor(new Date(chat.created_at).getTime() / 1e3) : 0;
  }
  getUpdateTime(chat) {
    return chat.updated_at ? Math.floor(new Date(chat.updated_at).getTime() / 1e3) : 0;
  }
  async convertChat(chat) {
    ClaudeConverter.setPlugin(this.plugin);
    return await ClaudeConverter.convertChat(chat);
  }
  async convertMessages(messages, conversationId, conversationTitle, conversationCreateTime) {
    ClaudeConverter.setPlugin(this.plugin);
    return await ClaudeConverter.convertMessages(messages, conversationId, conversationTitle, conversationCreateTime);
  }
  getProviderName() {
    return "claude";
  }
  getNewMessages(chat, existingMessageIds) {
    const newMessages = [];
    for (const message of chat.chat_messages) {
      if (message.uuid && !existingMessageIds.includes(message.uuid)) {
        if (this.shouldIncludeMessage(message)) {
          newMessages.push(message);
        }
      }
    }
    return newMessages;
  }
  async processMessageAttachments(messages, conversationId, zip) {
    const processedMessages = [];
    for (const message of messages) {
      if (message.attachments && message.attachments.length > 0) {
        const processedAttachments = await this.attachmentExtractor.extractAttachments(
          zip,
          conversationId,
          message.attachments
        );
        processedMessages.push({
          ...message,
          attachments: processedAttachments
        });
      } else {
        processedMessages.push(message);
      }
    }
    return processedMessages;
  }
  getReportNamingStrategy() {
    return this.reportNamingStrategy;
  }
  getProviderName() {
    return "claude";
  }
  countArtifacts(chat) {
    return ClaudeConverter.countArtifacts(chat);
  }
  shouldIncludeMessage(message) {
    if (message.sender === "human" || message.sender === "assistant") {
      if (!message.text && (!message.content || message.content.length === 0)) {
        return false;
      }
      return true;
    }
    return false;
  }
};
__name(ClaudeAdapter, "ClaudeAdapter");

// src/providers/provider-registry.ts
function createProviderRegistry(plugin) {
  const registry = new DefaultProviderRegistry();
  registry.register("chatgpt", new ChatGPTAdapter(plugin));
  registry.register("claude", new ClaudeAdapter(plugin));
  return registry;
}
__name(createProviderRegistry, "createProviderRegistry");

// src/ui/import-progress-modal.ts
var import_obsidian17 = require("obsidian");
var ImportProgressModal = class extends import_obsidian17.Modal {
  constructor(app, fileName) {
    super(app);
    this.totalConversations = 0;
    this.currentConversation = 0;
    this.isSelectiveImport = false;
    this.selectedCount = 0;
    this.totalAvailable = 0;
    this.isComplete = false;
    this.fileName = fileName;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.addClass("nexus-import-progress-modal");
    this.modalTitleEl = contentEl.createEl("h2", {
      text: `Importing ${this.fileName}`,
      cls: "modal-title"
    });
    const contentContainer = contentEl.createDiv({ cls: "modal-content" });
    this.phaseEl = contentContainer.createEl("div", { cls: "import-phase" });
    this.phaseEl.style.cssText = `
            text-align: center;
            margin: 10px 0;
            font-weight: 600;
            color: var(--text-accent);
            font-size: 1.1em;
        `;
    this.importModeEl = contentContainer.createEl("div", { cls: "import-mode" });
    this.importModeEl.style.cssText = `
            text-align: center;
            margin: 5px 0 10px 0;
            font-weight: 500;
            color: var(--text-accent);
            font-size: 0.85em;
            padding: 4px 8px;
            background: var(--background-secondary);
            border-radius: 4px;
            display: none;
        `;
    this.conversationCountEl = contentContainer.createEl("div", { cls: "conversation-counter" });
    this.conversationCountEl.style.cssText = `
            text-align: center;
            margin: 5px 0 15px 0;
            font-weight: 500;
            color: var(--text-normal);
            font-size: 0.9em;
        `;
    const progressContainer = contentContainer.createDiv({ cls: "progress-container" });
    progressContainer.style.cssText = `
            background: var(--background-secondary);
            border-radius: 8px;
            padding: 4px;
            margin: 20px 0;
            border: 1px solid var(--background-modifier-border);
        `;
    this.progressBarEl = progressContainer.createDiv({ cls: "progress-bar" });
    this.progressBarEl.style.cssText = `
            height: 20px;
            background: linear-gradient(90deg, var(--interactive-accent), var(--interactive-accent-hover));
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
        `;
    this.statusEl = contentContainer.createEl("div", { cls: "status-text" });
    this.statusEl.style.cssText = `
            text-align: center;
            margin: 10px 0;
            font-weight: 500;
            color: var(--text-normal);
        `;
    this.detailEl = contentContainer.createEl("div", { cls: "detail-text" });
    this.detailEl.style.cssText = `
            text-align: center;
            margin: 5px 0;
            font-size: 0.85em;
            color: var(--text-muted);
            min-height: 1.2em;
        `;
    this.updateProgress({
      phase: "validation",
      title: "Preparing import...",
      detail: "Validating ZIP file structure"
    });
  }
  /**
   * Update progress with step information
   */
  updateProgress(step) {
    const phaseLabels = {
      "validation": "\u{1F50D} Validation",
      "scanning": "\u{1F4CB} Scanning",
      "processing": "\u2699\uFE0F Processing",
      "writing": "\u{1F4BE} Writing",
      "complete": "\u2705 Complete",
      "error": "\u274C Error"
    };
    this.phaseEl.textContent = phaseLabels[step.phase] || step.phase;
    if (step.total !== void 0) {
      this.totalConversations = step.total;
    }
    if (step.current !== void 0) {
      this.currentConversation = step.current;
    }
    if (this.totalConversations > 0) {
      if (this.isSelectiveImport) {
        this.conversationCountEl.textContent = `${this.currentConversation}/${this.totalConversations} selected conversations`;
      } else {
        this.conversationCountEl.textContent = `${this.currentConversation}/${this.totalConversations} conversations`;
      }
    } else {
      this.conversationCountEl.textContent = "";
    }
    let percentage = 0;
    if (step.percentage !== void 0) {
      percentage = step.percentage;
    } else if (this.totalConversations > 0 && step.phase === "processing") {
      percentage = Math.round(this.currentConversation / this.totalConversations * 100);
    } else {
      const phaseProgress = {
        "validation": 10,
        "scanning": 20,
        "processing": 80,
        "writing": 95,
        "complete": 100,
        "error": 0
      };
      percentage = phaseProgress[step.phase] || 0;
    }
    percentage = Math.min(100, Math.max(0, percentage));
    this.progressBarEl.style.width = `${percentage}%`;
    this.statusEl.textContent = step.title;
    this.detailEl.textContent = step.detail || "";
    if (step.phase === "complete") {
      this.showComplete(step.title);
    } else if (step.phase === "error") {
      this.showError(step.title);
    }
  }
  /**
   * Show completion state
   */
  showComplete(message = "Import completed successfully") {
    this.isComplete = true;
    this.progressBarEl.style.width = "100%";
    this.progressBarEl.style.background = "var(--text-success)";
    this.statusEl.textContent = message;
    this.detailEl.textContent = "You can close this dialog";
    this.closeAfterDelay(3e3);
  }
  /**
   * Show error state
   */
  showError(message = "An error occurred during import") {
    this.progressBarEl.style.background = "var(--text-error)";
    this.statusEl.textContent = message;
    this.detailEl.textContent = "Check the console for more details";
  }
  /**
   * Close after delay
   */
  closeAfterDelay(delay = 2e3) {
    setTimeout(() => {
      if (this.isComplete) {
        this.close();
      }
    }, delay);
  }
  /**
   * Set selective import mode
   */
  setSelectiveImportMode(selectedCount, totalAvailable) {
    this.isSelectiveImport = true;
    this.selectedCount = selectedCount;
    this.totalAvailable = totalAvailable;
    this.importModeEl.style.display = "block";
    this.importModeEl.textContent = `\u{1F4CB} Selective Import: ${selectedCount} of ${totalAvailable} conversations`;
  }
  /**
   * Get progress callback function
   */
  getProgressCallback() {
    return (step) => {
      this.updateProgress(step);
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
__name(ImportProgressModal, "ImportProgressModal");

// src/services/attachment-map-builder.ts
var AttachmentMapBuilder = class {
  constructor(logger6) {
    this.logger = logger6;
  }
  /**
   * Scan all ZIP files and build a map of available attachments
   * Processes ZIPs in order (oldest to newest) so newer versions are at the end
   */
  async buildAttachmentMap(files) {
    var _a;
    const attachmentMap = /* @__PURE__ */ new Map();
    const JSZipModule = (await Promise.resolve().then(() => __toESM(require_jszip_min()))).default;
    for (let i = 0; i < files.length; i++) {
      const file = files[i];
      try {
        const zip = new JSZipModule();
        const zipContent = await zip.loadAsync(file);
        for (const [path, zipFile] of Object.entries(zipContent.files)) {
          if (zipFile.dir)
            continue;
          const fileIds = this.extractFileIds(path);
          for (const fileId of fileIds) {
            if (!attachmentMap.has(fileId)) {
              attachmentMap.set(fileId, []);
            }
            const locations = attachmentMap.get(fileId);
            locations.push({
              zipIndex: i,
              path,
              size: ((_a = zipFile._data) == null ? void 0 : _a.uncompressedSize) || 0,
              zipFileName: file.name
            });
          }
        }
      } catch (error) {
        this.logger.error(`Failed to scan attachments in ${file.name}:`, error);
      }
    }
    return attachmentMap;
  }
  /**
   * Extract all possible file IDs from a file path
   * Handles various ChatGPT export formats:
   * - file_XXXXX.dat ‚Üí ["file_XXXXX", "XXXXX"]
   * - user-xxx/file_XXXXX-uuid.png ‚Üí ["file_XXXXX", "XXXXX"]
   * - dalle-generations/xxx.png ‚Üí ["xxx"]
   */
  extractFileIds(path) {
    const fileIds = [];
    const fileName = path.split("/").pop() || "";
    const filePattern = /file_([a-f0-9]+)/i;
    const fileMatch = fileName.match(filePattern);
    if (fileMatch) {
      fileIds.push(`file_${fileMatch[1]}`);
      fileIds.push(fileMatch[1]);
    }
    const hashPattern = /^([a-f0-9]{32,})(?:[-.]|$)/i;
    const hashMatch = fileName.match(hashPattern);
    if (hashMatch && !fileMatch) {
      fileIds.push(hashMatch[1]);
    }
    const baseFileName = fileName.replace(/\.(dat|png|jpg|jpeg|gif|webp)$/i, "");
    if (baseFileName && !fileIds.includes(baseFileName)) {
      fileIds.push(baseFileName);
    }
    return fileIds;
  }
  /**
   * Find the best location for a file ID
   * Returns the NEWEST available location (last in array)
   * Falls back to older locations if needed
   */
  findBestLocation(attachmentMap, fileId) {
    const locations = attachmentMap.get(fileId);
    if (!locations || locations.length === 0) {
      return null;
    }
    return locations[locations.length - 1];
  }
  /**
   * Find all locations for a file ID (for debugging/logging)
   */
  findAllLocations(attachmentMap, fileId) {
    return attachmentMap.get(fileId) || [];
  }
};
__name(AttachmentMapBuilder, "AttachmentMapBuilder");

// src/services/import-service.ts
var ImportService = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.importReport = new ImportReport();
    this.currentAttachmentMap = null;
    this.currentZips = [];
    this.providerRegistry = createProviderRegistry(plugin);
    this.attachmentMapBuilder = new AttachmentMapBuilder(plugin.logger);
    this.conversationProcessor = new ConversationProcessor(plugin, this.providerRegistry);
  }
  async selectZipFile() {
    const input = document.createElement("input");
    input.type = "file";
    input.accept = ".zip";
    input.multiple = true;
    input.onchange = async (e) => {
      const files = Array.from(e.target.files || []);
      if (files.length > 0) {
        const sortedFiles = this.sortFilesByTimestamp(files);
        for (const file of sortedFiles) {
          await this.handleZipFile(file);
        }
      }
    };
    input.click();
  }
  sortFilesByTimestamp(files) {
    return files.sort((a, b) => {
      const timestampRegex = /(\d{4}-\d{2}-\d{2}-\d{2}-\d{2}-\d{2})/;
      const getTimestamp = /* @__PURE__ */ __name((filename) => {
        const match = filename.match(timestampRegex);
        if (!match) {
          this.plugin.logger.warn(`No timestamp found in filename: ${filename}`);
          return "0";
        }
        return match[1];
      }, "getTimestamp");
      return getTimestamp(a.name).localeCompare(getTimestamp(b.name));
    });
  }
  async handleZipFile(file, forcedProvider, selectedConversationIds, sharedReport) {
    const isSharedReport = !!sharedReport;
    this.importReport = sharedReport || new ImportReport();
    if (!isSharedReport && this.plugin.settings.useCustomMessageTimestampFormat) {
      this.importReport.setCustomTimestampFormat(this.plugin.settings.messageTimestampFormat);
    }
    this.importReport.startFileSection(file.name);
    this.conversationProcessor.resetCounters();
    const storage = this.plugin.getStorageService();
    let processingStarted = false;
    const progressModal = new ImportProgressModal(this.plugin.app, file.name);
    const progressCallback = progressModal.getProgressCallback();
    progressModal.open();
    if (selectedConversationIds && selectedConversationIds.length > 0) {
    }
    try {
      progressCallback({
        phase: "validation",
        title: "Validating ZIP structure...",
        detail: "Checking file format and contents"
      });
      const zip = await this.validateZipFile(file, forcedProvider);
      let isReprocess = false;
      let fileHash = "";
      if (!isSharedReport) {
        progressCallback({
          phase: "validation",
          title: "Validating file...",
          detail: "Checking file hash and import history"
        });
        fileHash = await getFileHash(file);
        const foundByHash = storage.isArchiveImported(fileHash);
        const foundByName = storage.isArchiveImported(file.name);
        isReprocess = foundByHash || foundByName;
        if (isReprocess) {
          progressModal.close();
          const shouldReimport = await showDialog(
            this.plugin.app,
            "confirmation",
            "Already processed",
            [
              `File ${file.name} has already been imported.`,
              `Do you want to reprocess it?`,
              `**Note:** This will recreate notes from before v1.1.0 to add attachment support.`
            ],
            void 0,
            { button1: "Let's do this", button2: "Skip this file" }
          );
          if (!shouldReimport) {
            new import_obsidian18.Notice(`Skipping ${file.name} (already imported).`);
            progressModal.close();
            return;
          }
          progressModal.open();
        }
      } else {
        fileHash = await getFileHash(file);
      }
      processingStarted = true;
      await this.processConversations(zip, file, isReprocess, forcedProvider, progressCallback, selectedConversationIds, progressModal);
      storage.addImportedArchive(fileHash, file.name);
      await this.plugin.saveSettings();
      progressCallback({
        phase: "complete",
        title: "Import completed successfully!",
        detail: `Processed ${this.conversationProcessor.getCounters().totalNewConversationsToImport + this.conversationProcessor.getCounters().totalExistingConversationsToUpdate} conversations`
      });
    } catch (error) {
      const message = error instanceof NexusAiChatImporterError ? error.message : error instanceof Error ? error.message : "An unknown error occurred";
      this.plugin.logger.error("Error handling zip file", { message });
      progressCallback({
        phase: "error",
        title: "Import failed",
        detail: message
      });
      setTimeout(() => progressModal.close(), 5e3);
    } finally {
      if (processingStarted && !isSharedReport) {
        await this.writeImportReport(file.name);
        if (!progressModal.isComplete) {
          new import_obsidian18.Notice(
            this.importReport.hasErrors() ? "An error occurred during import. Please check the log file for details." : "Import completed. Log file created in the archive folder."
          );
        }
      }
    }
  }
  async validateZipFile(file, forcedProvider) {
    try {
      const zip = new import_jszip.default();
      const content = await zip.loadAsync(file);
      const fileNames = Object.keys(content.files);
      if (forcedProvider) {
        if (!fileNames.includes("conversations.json")) {
          throw new NexusAiChatImporterError(
            "Invalid ZIP structure",
            `Missing required file: conversations.json for ${forcedProvider} provider.`
          );
        }
      } else {
        const hasConversationsJson = fileNames.includes("conversations.json");
        const hasUsersJson = fileNames.includes("users.json");
        const hasProjectsJson = fileNames.includes("projects.json");
        const isChatGPTFormat = hasConversationsJson && !hasUsersJson && !hasProjectsJson;
        const isClaudeFormat = hasConversationsJson && hasUsersJson;
        if (!isChatGPTFormat && !isClaudeFormat) {
          throw new NexusAiChatImporterError(
            "Invalid ZIP structure",
            "This ZIP file doesn't match any supported chat export format. Expected either ChatGPT format (conversations.json) or Claude format (conversations.json + users.json)."
          );
        }
      }
      return zip;
    } catch (error) {
      if (error instanceof NexusAiChatImporterError) {
        throw error;
      } else {
        throw new NexusAiChatImporterError(
          "Error validating zip file",
          error.message
        );
      }
    }
  }
  async processConversations(zip, file, isReprocess, forcedProvider, progressCallback, selectedConversationIds, progressModal) {
    try {
      progressCallback == null ? void 0 : progressCallback({
        phase: "scanning",
        title: "Extracting conversations...",
        detail: "Reading conversation data from ZIP file"
      });
      let rawConversations = await this.extractRawConversationsFromZip(zip);
      if (selectedConversationIds && selectedConversationIds.length > 0) {
        const originalCount = rawConversations.length;
        rawConversations = this.filterConversationsByIds(rawConversations, selectedConversationIds, forcedProvider);
        if (progressModal) {
          progressModal.setSelectiveImportMode(rawConversations.length, originalCount);
        }
        progressCallback == null ? void 0 : progressCallback({
          phase: "scanning",
          title: "Filtering conversations...",
          detail: `Selected ${rawConversations.length} of ${originalCount} conversations for import`,
          total: rawConversations.length
        });
      }
      progressCallback == null ? void 0 : progressCallback({
        phase: "scanning",
        title: "Scanning existing conversations...",
        detail: "Checking vault for existing conversations",
        total: rawConversations.length
      });
      if (forcedProvider) {
        this.validateProviderMatch(rawConversations, forcedProvider);
      }
      progressCallback == null ? void 0 : progressCallback({
        phase: "processing",
        title: "Processing conversations...",
        detail: "Converting and importing conversations",
        current: 0,
        total: rawConversations.length
      });
      const report = await this.conversationProcessor.processRawConversations(
        rawConversations,
        this.importReport,
        zip,
        isReprocess,
        forcedProvider,
        progressCallback
      );
      this.importReport = report;
      this.importReport.setFileCounters(
        this.conversationProcessor.getCounters()
      );
      progressCallback == null ? void 0 : progressCallback({
        phase: "writing",
        title: "Finalizing import...",
        detail: "Saving settings and generating report"
      });
    } catch (error) {
      if (error instanceof NexusAiChatImporterError) {
        this.plugin.logger.error("Error processing conversations", error.message);
        this.plugin.logger.error("Full NexusAiChatImporterError:", error);
      } else if (typeof error === "object" && error instanceof Error) {
        this.plugin.logger.error("General error processing conversations", error.message);
        this.plugin.logger.error("Full Error:", error);
        this.plugin.logger.error("Stack trace:", error.stack);
      } else {
        this.plugin.logger.error("Unknown error processing conversations", "An unknown error occurred");
        this.plugin.logger.error("Unknown error:", error);
      }
      throw error;
    }
  }
  /**
   * Extract raw conversation data without knowing provider specifics
   */
  async extractRawConversationsFromZip(zip) {
    const conversationsFile = zip.file("conversations.json");
    if (!conversationsFile) {
      throw new NexusAiChatImporterError(
        "Missing conversations.json",
        "The ZIP file does not contain a conversations.json file"
      );
    }
    const conversationsJson = await conversationsFile.async("string");
    const parsedData = JSON.parse(conversationsJson);
    if (Array.isArray(parsedData)) {
      return parsedData;
    } else if (parsedData.conversations && Array.isArray(parsedData.conversations)) {
      return parsedData.conversations;
    } else {
      throw new NexusAiChatImporterError(
        "Invalid conversations.json structure",
        "The conversations.json file does not contain a valid conversation array"
      );
    }
  }
  /**
   * Filter conversations by selected IDs
   */
  filterConversationsByIds(rawConversations, selectedIds, forcedProvider) {
    const selectedIdsSet = new Set(selectedIds);
    return rawConversations.filter((conversation) => {
      let conversationId;
      if (forcedProvider === "claude" || conversation.uuid && conversation.name) {
        conversationId = conversation.uuid || "";
      } else {
        conversationId = conversation.id || "";
      }
      return selectedIdsSet.has(conversationId);
    });
  }
  /**
   * Validate that the forced provider matches the actual content structure
   */
  validateProviderMatch(rawConversations, forcedProvider) {
    if (rawConversations.length === 0)
      return;
    const firstConversation = rawConversations[0];
    const isChatGPT = firstConversation.mapping !== void 0;
    const isClaude = firstConversation.chat_messages !== void 0 || firstConversation.name !== void 0 || firstConversation.summary !== void 0;
    if (forcedProvider === "chatgpt" && !isChatGPT) {
      throw new NexusAiChatImporterError(
        "Provider Mismatch",
        "You selected ChatGPT but this archive appears to be from Claude. The structure doesn't match ChatGPT exports."
      );
    }
    if (forcedProvider === "claude" && !isClaude) {
      throw new NexusAiChatImporterError(
        "Provider Mismatch",
        "You selected Claude but this archive appears to be from ChatGPT. The structure doesn't match Claude exports."
      );
    }
  }
  async writeImportReport(zipFileName) {
    const reportWriter = new ReportWriter(this.plugin, this.providerRegistry);
    const currentProvider = this.conversationProcessor.getCurrentProvider();
    await reportWriter.writeReport(this.importReport, zipFileName, currentProvider);
  }
  /**
   * Build attachment map for multi-ZIP import
   * Opens all ZIPs and scans for available attachments
   */
  async buildAttachmentMapForMultiZip(files) {
    try {
      this.currentAttachmentMap = await this.attachmentMapBuilder.buildAttachmentMap(files);
      const JSZipModule = (await Promise.resolve().then(() => __toESM(require_jszip_min()))).default;
      this.currentZips = [];
      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        try {
          const zip = new JSZipModule();
          const zipContent = await zip.loadAsync(file);
          this.currentZips.push(zipContent);
        } catch (error) {
          this.plugin.logger.error(`Failed to open ZIP for attachment map: ${file.name}`, error);
        }
      }
      const chatgptAdapter = this.providerRegistry.getAdapter("chatgpt");
      if (chatgptAdapter && this.currentAttachmentMap) {
        chatgptAdapter.setAttachmentMap(this.currentAttachmentMap, this.currentZips);
      }
    } catch (error) {
      this.plugin.logger.error("Error building attachment map:", error);
      throw error;
    }
  }
  /**
   * Clear attachment map and close ZIPs after import completes
   */
  clearAttachmentMap() {
    this.currentAttachmentMap = null;
    this.currentZips = [];
    const chatgptAdapter = this.providerRegistry.getAdapter("chatgpt");
    if (chatgptAdapter) {
      chatgptAdapter.clearAttachmentMap();
    }
  }
};
__name(ImportService, "ImportService");
var ReportWriter = class {
  constructor(plugin, providerRegistry) {
    this.plugin = plugin;
    this.providerRegistry = providerRegistry;
  }
  async writeReport(report, zipFileName, provider) {
    const reportInfo = this.getReportGenerationInfo(zipFileName, provider);
    const adapter = this.providerRegistry.getAdapter(provider);
    if (adapter) {
      const strategy = adapter.getReportNamingStrategy();
      const columnInfo = strategy.getProviderSpecificColumn();
      report.setProviderSpecificColumnHeader(columnInfo.header);
    }
    const folderResult = await ensureFolderExists(reportInfo.folderPath, this.plugin.app.vault);
    if (!folderResult.success) {
      this.plugin.logger.error(`Failed to create or access log folder: ${reportInfo.folderPath}`, folderResult.error);
      new import_obsidian18.Notice("Failed to create log file. Check console for details.");
      return;
    }
    let logFilePath = `${reportInfo.folderPath}/${reportInfo.baseFileName}`;
    let counter = 2;
    while (await this.plugin.app.vault.adapter.exists(logFilePath)) {
      const baseName = reportInfo.baseFileName.replace(" - import report.md", "");
      logFilePath = `${reportInfo.folderPath}/${baseName}-${counter} - import report.md`;
      counter++;
    }
    const currentDate = new Date().toISOString();
    const archiveDate = this.extractArchiveDateFromFilename(zipFileName);
    const logContent = `---
importdate: ${currentDate}
archivedate: ${archiveDate}
zipFile: ${zipFileName}
provider: ${provider}
totalSuccessfulImports: ${report.getCreatedCount()}
totalUpdatedImports: ${report.getUpdatedCount()}
totalSkippedImports: ${report.getSkippedCount()}
---

${report.generateReportContent()}
`;
    try {
      await this.plugin.app.vault.create(logFilePath, logContent);
    } catch (error) {
      this.plugin.logger.error(`Failed to write import log`, error.message);
      new import_obsidian18.Notice("Failed to create log file. Check console for details.");
    }
  }
  getReportGenerationInfo(zipFileName, provider) {
    const reportFolder = this.plugin.settings.reportFolder;
    const adapter = this.providerRegistry.getAdapter(provider);
    if (adapter) {
      const strategy = adapter.getReportNamingStrategy();
      const reportPrefix = strategy.extractReportPrefix(zipFileName);
      return {
        folderPath: `${reportFolder}/${strategy.getProviderName()}`,
        baseFileName: `${reportPrefix} - import report.md`
      };
    }
    const now = new Date();
    const importDate = `${now.getFullYear()}.${String(now.getMonth() + 1).padStart(2, "0")}.${String(now.getDate()).padStart(2, "0")}`;
    const archiveDate = this.extractArchiveDateFromFilename(zipFileName);
    const fallbackPrefix = `imported-${importDate}-archive-${archiveDate}`;
    return {
      folderPath: `${reportFolder}`,
      baseFileName: `${fallbackPrefix} - import report.md`
    };
  }
  extractArchiveDateFromFilename(zipFileName) {
    const dateRegex = /(\d{4})-(\d{2})-(\d{2})/;
    const match = zipFileName.match(dateRegex);
    if (match) {
      const [, year, month, day] = match;
      return `${year}.${month}.${day}`;
    }
    const now = new Date();
    return `${now.getFullYear()}.${String(now.getMonth() + 1).padStart(2, "0")}.${String(now.getDate()).padStart(2, "0")}`;
  }
};
__name(ReportWriter, "ReportWriter");

// src/services/storage-service.ts
init_date_parser();
var StorageService = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.importedArchives = {};
    this.isDirty = false;
    this.saveTimeout = null;
  }
  async loadData() {
    try {
      const data = await this.plugin.loadData();
      this.importedArchives = (data == null ? void 0 : data.importedArchives) || {};
      this.isDirty = false;
    } catch (error) {
      this.plugin.logger.error("loadData failed:", error);
      throw error;
    }
  }
  async saveData(data) {
    try {
      await this.plugin.saveData(data);
      this.isDirty = false;
    } catch (error) {
      this.plugin.logger.error("saveData failed:", error);
    }
  }
  debouncedSave() {
    if (this.saveTimeout) {
      clearTimeout(this.saveTimeout);
    }
    this.saveTimeout = window.setTimeout(async () => {
      if (this.isDirty) {
        await this.plugin.saveSettings();
      }
    }, 1e3);
  }
  // ========================================
  // ARCHIVE TRACKING - HYBRID DETECTION (1.0.x + 1.1.0)
  // ========================================
  getImportedArchives() {
    return this.importedArchives;
  }
  /**
   * HYBRID detection: Works with both 1.0.x (filename as key) and 1.1.0 (hash as key)
   * FIXED: Handle both old format (string values) and new format (object values)
   */
  isArchiveImported(key) {
    if (this.importedArchives[key]) {
      return true;
    }
    return Object.values(this.importedArchives).some((archive) => {
      if (typeof archive === "object" && archive !== null && archive.fileName) {
        return archive.fileName === key;
      }
      return false;
    });
  }
  addImportedArchive(fileHash, fileName) {
    this.importedArchives[fileHash] = {
      fileName,
      date: new Date().toISOString()
    };
    this.isDirty = true;
    this.debouncedSave();
  }
  // ========================================
  // NEW: VAULT-BASED CONVERSATION DISCOVERY (HYBRID)
  // ========================================
  /**
   * Scan vault for existing Nexus conversations using HYBRID approach:
   * 1. Wait for cache to be clean (fast)
   * 2. Use metadataCache (optimal performance)  
   * 3. Fallback to manual parsing for problematic files
   */
  async scanExistingConversations() {
    await this.waitForCacheClean(1e3);
    const conversations = /* @__PURE__ */ new Map();
    const conversationFolder = this.plugin.settings.conversationFolder || this.plugin.settings.archiveFolder || "Nexus/Conversations";
    const allFiles = this.plugin.app.vault.getMarkdownFiles();
    const conversationFiles = allFiles.filter((file) => {
      if (!file.path.startsWith(conversationFolder))
        return false;
      const relativePath = file.path.substring(conversationFolder.length + 1);
      if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
        return false;
      }
      return true;
    });
    let processed = 0;
    let foundViaCache = 0;
    let foundViaManual = 0;
    let errors = 0;
    const batchSize = 100;
    for (let i = 0; i < conversationFiles.length; i += batchSize) {
      const batch = conversationFiles.slice(i, i + batchSize);
      for (const file of batch) {
        processed++;
        try {
          let entry = await this.parseWithCache(file);
          if (entry) {
            conversations.set(entry.conversationId, entry);
            foundViaCache++;
            continue;
          }
          entry = await this.parseConversationFileManually(file);
          if (entry) {
            conversations.set(entry.conversationId, entry);
            foundViaManual++;
          }
        } catch (error) {
          errors++;
          this.plugin.logger.warn(`Error parsing conversation file ${file.path}:`, error);
        }
      }
      if (i + batchSize < conversationFiles.length) {
        await new Promise((resolve) => setTimeout(resolve, 1));
      }
    }
    return conversations;
  }
  /**
   * Wait for metadata cache to be clean with timeout
   */
  async waitForCacheClean(maxWaitMs = 1e3) {
    const startTime = Date.now();
    const metadataCache = this.plugin.app.metadataCache;
    while (!metadataCache.isCacheClean()) {
      if (Date.now() - startTime > maxWaitMs) {
        break;
      }
      await new Promise((resolve) => setTimeout(resolve, 10));
    }
  }
  /**
   * Parse conversation using metadataCache (fast but potentially unreliable)
   */
  async parseWithCache(file) {
    var _a;
    try {
      const frontmatter = (_a = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (!frontmatter) {
        this.plugin.logger.warn(`[parseWithCache] No frontmatter found for ${file.path}`);
        return null;
      }
      if (!frontmatter.nexus || frontmatter.nexus !== this.plugin.manifest.id) {
        this.plugin.logger.warn(`[parseWithCache] Wrong nexus ID for ${file.path}: ${frontmatter.nexus} vs ${this.plugin.manifest.id}`);
        return null;
      }
      if (!frontmatter.conversation_id) {
        this.plugin.logger.warn(`[parseWithCache] No conversation_id for ${file.path}`);
        return null;
      }
      const createTime = this.parseTimeString(frontmatter.create_time);
      const updateTime = this.parseTimeString(frontmatter.update_time);
      if (createTime === 0 || updateTime === 0) {
        this.plugin.logger.warn(`[parseWithCache] Failed to parse timestamps for ${file.path}: create=${frontmatter.create_time} (${createTime}), update=${frontmatter.update_time} (${updateTime})`);
        return null;
      }
      return {
        conversationId: frontmatter.conversation_id,
        provider: frontmatter.provider || "unknown",
        path: file.path,
        updateTime,
        create_time: createTime,
        update_time: updateTime
      };
    } catch (error) {
      this.plugin.logger.warn(`[parseWithCache] Exception parsing ${file.path}:`, error);
      return null;
    }
  }
  /**
   * Parse single conversation file manually (robust fallback)
   */
  async parseConversationFileManually(file) {
    try {
      const content = await this.plugin.app.vault.read(file);
      const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
      if (!frontmatterMatch) {
        return null;
      }
      const frontmatterContent = frontmatterMatch[1];
      const frontmatterData = {};
      const lines = frontmatterContent.split("\n");
      for (const line of lines) {
        const colonIndex = line.indexOf(":");
        if (colonIndex > 0) {
          const key = line.substring(0, colonIndex).trim();
          let value = line.substring(colonIndex + 1).trim();
          if (value.startsWith('"') && value.endsWith('"') || value.startsWith("'") && value.endsWith("'")) {
            value = value.slice(1, -1);
          }
          frontmatterData[key] = value;
        }
      }
      const nexusId = this.plugin.manifest.id;
      if (frontmatterData.nexus !== nexusId) {
        return null;
      }
      if (!frontmatterData.conversation_id) {
        return null;
      }
      const createTime = this.parseTimeString(frontmatterData.create_time);
      const updateTime = this.parseTimeString(frontmatterData.update_time);
      return {
        conversationId: frontmatterData.conversation_id,
        provider: frontmatterData.provider || "unknown",
        path: file.path,
        updateTime,
        create_time: createTime,
        update_time: updateTime
      };
    } catch (error) {
      this.plugin.logger.error(`Error manually parsing ${file.path}:`, error);
      return null;
    }
  }
  /**
   * Parse time string from frontmatter (handle multiple formats)
   * Supports all formats: ISO 8601, US, EU, DE, JP, and locale-based
   * Uses intelligent format detection from DateParser utility
   */
  parseTimeString(timeStr) {
    const result = DateParser.parseDate(timeStr);
    if (result === 0) {
      this.plugin.logger.warn(`[parseTimeString] Failed to parse: "${timeStr}"`);
    }
    return result;
  }
  /**
   * Fast check if a specific conversation exists
   */
  async conversationExists(conversationId) {
    const conversations = await this.scanExistingConversations();
    return conversations.has(conversationId);
  }
  /**
   * Get conversation entry by ID (single lookup)
   */
  async getConversationById(conversationId) {
    const conversations = await this.scanExistingConversations();
    return conversations.get(conversationId) || null;
  }
  /**
   * Get conversations by provider (for reporting/stats)
   */
  async getConversationsByProvider(provider) {
    const allConversations = await this.scanExistingConversations();
    return Array.from(allConversations.values()).filter((entry) => entry.provider === provider);
  }
  // ========================================
  // LEGACY SUPPORT & CLEANUP
  // ========================================
  async resetCatalogs() {
    try {
      this.importedArchives = {};
      this.isDirty = false;
      if (this.saveTimeout) {
        clearTimeout(this.saveTimeout);
        this.saveTimeout = null;
      }
      await this.plugin.saveData({
        settings: this.plugin.settings
        // Note: No conversation catalog to reset - it's now vault-based
      });
    } catch (error) {
      this.plugin.logger.error("resetCatalogs failed:", error);
    }
  }
  // Statistics for debugging
  getStats() {
    return {
      totalArchives: Object.keys(this.importedArchives).length,
      isDirty: this.isDirty,
      hasPendingSave: this.saveTimeout !== null,
      catalogMethod: "vault-based-hybrid",
      trackingMethod: "hybrid-hash-filename"
    };
  }
  async forceSave() {
    if (this.saveTimeout) {
      clearTimeout(this.saveTimeout);
      this.saveTimeout = null;
    }
    if (this.isDirty) {
      await this.plugin.saveSettings();
    }
  }
  // ========================================
  // DEPRECATED METHODS (For Compatibility)
  // ========================================
  /**
   * @deprecated Use scanExistingConversations() instead
   */
  getConversationCatalog() {
    this.plugin.logger.warn("getConversationCatalog() is deprecated - use scanExistingConversations()");
    return {};
  }
  /**
   * @deprecated Conversations are now tracked via vault frontmatter
   */
  updateConversationCatalog(_id, _entry) {
    this.plugin.logger.warn("updateConversationCatalog() is deprecated - conversations tracked via frontmatter");
  }
  /**
   * @deprecated Conversations are now tracked via vault frontmatter
   */
  deleteFromConversationCatalog(_id) {
    this.plugin.logger.warn("deleteFromConversationCatalog() is deprecated - files tracked via vault");
  }
};
__name(StorageService, "StorageService");

// src/upgrade/incremental-upgrade-manager.ts
var import_obsidian26 = require("obsidian");
init_version_utils();
init_dialogs();
init_logger();
init_constants();

// src/upgrade/utils/multi-operation-progress-modal.ts
var import_obsidian20 = require("obsidian");
var MultiOperationProgressModal = class extends import_obsidian20.Modal {
  constructor(app, title, operations) {
    super(app);
    this.canClose = false;
    this.title = title;
    this.operations = [...operations];
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.addClass("nexus-ai-chat-importer-modal");
    contentEl.addClass("multi-operation-progress-modal");
    this.modalTitleEl = contentEl.createEl("h2", {
      text: this.title,
      cls: "modal-title"
    });
    const contentContainer = contentEl.createDiv({ cls: "modal-content" });
    this.operationsContainer = contentContainer.createDiv({ cls: "operations-container" });
    this.operationsContainer.style.cssText = `
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
        `;
    this.overallProgressEl = contentContainer.createDiv({ cls: "overall-progress" });
    this.overallProgressEl.style.cssText = `
            margin-top: 20px;
            padding: 15px;
            background: var(--background-secondary);
            border-radius: 8px;
            border: 1px solid var(--background-modifier-border);
            text-align: center;
            font-weight: 500;
        `;
    this.renderOperations();
    this.updateOverallProgress();
    this.modalEl.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && !this.canClose) {
        e.preventDefault();
        e.stopPropagation();
      }
    });
  }
  /**
   * Update operation status
   */
  updateOperation(operationId, updates) {
    const operation = this.operations.find((op) => op.id === operationId);
    if (operation) {
      Object.assign(operation, updates);
      this.renderOperations();
      this.updateOverallProgress();
    }
  }
  /**
   * Mark all operations as complete and allow closing
   */
  markComplete(message = "All operations completed successfully") {
    this.canClose = true;
    this.overallProgressEl.textContent = message;
    this.overallProgressEl.style.color = "var(--text-success)";
    if (!this.closeButtonEl) {
      const buttonContainer = this.contentEl.createDiv({ cls: "modal-button-container" });
      this.closeButtonEl = buttonContainer.createEl("button", {
        text: "Complete",
        cls: "mod-cta"
      });
      this.closeButtonEl.addEventListener("click", () => this.close());
    }
  }
  /**
   * Show error state
   */
  showError(message) {
    this.canClose = true;
    this.overallProgressEl.textContent = message;
    this.overallProgressEl.style.color = "var(--text-error)";
    if (!this.closeButtonEl) {
      const buttonContainer = this.contentEl.createDiv({ cls: "modal-button-container" });
      this.closeButtonEl = buttonContainer.createEl("button", {
        text: "Close",
        cls: "mod-warning"
      });
      this.closeButtonEl.addEventListener("click", () => this.close());
    }
  }
  /**
   * Render all operations
   */
  renderOperations() {
    this.operationsContainer.empty();
    for (const operation of this.operations) {
      const operationEl = this.operationsContainer.createDiv({ cls: "operation-item" });
      operationEl.style.cssText = `
                display: flex;
                align-items: center;
                margin: 10px 0;
                padding: 10px;
                background: var(--background-primary);
                border-radius: 6px;
                border: 1px solid var(--background-modifier-border);
            `;
      const iconEl = operationEl.createDiv({ cls: "operation-icon" });
      iconEl.style.cssText = `
                width: 20px;
                height: 20px;
                margin-right: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 14px;
            `;
      switch (operation.status) {
        case "pending":
          iconEl.textContent = "\u25CB";
          iconEl.style.color = "var(--text-muted)";
          break;
        case "running":
          iconEl.textContent = "\u26A0";
          iconEl.style.color = "var(--text-accent)";
          break;
        case "completed":
          iconEl.textContent = "\u2713";
          iconEl.style.color = "var(--text-success)";
          break;
        case "failed":
          iconEl.textContent = "\u2717";
          iconEl.style.color = "var(--text-error)";
          break;
      }
      const contentEl = operationEl.createDiv({ cls: "operation-content" });
      contentEl.style.cssText = `flex: 1; min-width: 0;`;
      const nameEl = contentEl.createDiv({ cls: "operation-name" });
      nameEl.textContent = operation.name;
      nameEl.style.cssText = `
                font-weight: 500;
                margin-bottom: 5px;
                color: var(--text-normal);
            `;
      if (operation.status === "running" || operation.progress !== void 0 && operation.progress > 0) {
        const progressContainer = contentEl.createDiv({ cls: "progress-container" });
        progressContainer.style.cssText = `
                    background: var(--background-secondary);
                    border-radius: 4px;
                    height: 8px;
                    margin: 5px 0;
                    overflow: hidden;
                `;
        const progressBar = progressContainer.createDiv({ cls: "progress-bar" });
        const progress = operation.progress || 0;
        progressBar.style.cssText = `
                    background: var(--interactive-accent);
                    height: 100%;
                    width: ${progress}%;
                    transition: width 0.3s ease;
                `;
      }
      if (operation.currentDetail) {
        const detailEl = contentEl.createDiv({ cls: "operation-detail" });
        detailEl.textContent = this.truncateDetail(operation.currentDetail);
        detailEl.style.cssText = `
                    font-size: 0.9em;
                    color: var(--text-muted);
                    font-style: italic;
                    margin-top: 3px;
                `;
      }
      if (operation.status === "failed" && operation.error) {
        const errorEl = contentEl.createDiv({ cls: "operation-error" });
        errorEl.textContent = operation.error;
        errorEl.style.cssText = `
                    font-size: 0.9em;
                    color: var(--text-error);
                    margin-top: 3px;
                `;
      }
    }
  }
  /**
   * Update overall progress display
   */
  updateOverallProgress() {
    const completed = this.operations.filter((op) => op.status === "completed").length;
    const failed = this.operations.filter((op) => op.status === "failed").length;
    const total = this.operations.length;
    if (failed > 0) {
      this.overallProgressEl.textContent = `Progress: ${completed}/${total} operations (${failed} failed)`;
      this.overallProgressEl.style.color = "var(--text-error)";
    } else if (completed === total) {
      this.overallProgressEl.textContent = `All ${total} operations completed successfully`;
      this.overallProgressEl.style.color = "var(--text-success)";
    } else {
      this.overallProgressEl.textContent = `Progress: ${completed}/${total} operations`;
      this.overallProgressEl.style.color = "var(--text-normal)";
    }
  }
  /**
   * Truncate detail text to fit in modal
   */
  truncateDetail(detail) {
    const maxLength = 50;
    if (detail.length <= maxLength)
      return detail;
    return "..." + detail.slice(-maxLength + 3);
  }
  /**
   * Override close to respect canClose flag
   */
  close() {
    if (this.canClose) {
      super.close();
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
__name(MultiOperationProgressModal, "MultiOperationProgressModal");

// src/upgrade/incremental-upgrade-manager.ts
init_utils();
var logger5 = new Logger();
var IncrementalUpgradeManager = class {
  constructor(plugin) {
    this.availableUpgrades = [];
    this.plugin = plugin;
    this.registerUpgrades();
  }
  /**
   * Register all available version upgrades
   */
  registerUpgrades() {
    const { Upgrade110: Upgrade1102 } = (init_upgrade_1_1_0(), __toCommonJS(upgrade_1_1_0_exports));
    const { Upgrade120: Upgrade1202 } = (init_upgrade_1_2_0(), __toCommonJS(upgrade_1_2_0_exports));
    const { Upgrade130: Upgrade1302 } = (init_upgrade_1_3_0(), __toCommonJS(upgrade_1_3_0_exports));
    this.availableUpgrades = [
      new Upgrade1102(),
      new Upgrade1202(),
      new Upgrade1302()
      // Future: new Upgrade131(), new Upgrade140(), etc.
    ];
    this.availableUpgrades.sort((a, b) => {
      return VersionUtils.compareVersions(a.version, b.version);
    });
  }
  /**
   * Main incremental upgrade check and execution
   */
  async checkAndPerformUpgrade() {
    var _a, _b, _c;
    try {
      const currentVersion = this.plugin.manifest.version;
      const previousVersion = this.plugin.settings.previousVersion;
      const data = await this.plugin.loadData();
      const versionKey = currentVersion.replace(/\./g, "_");
      const hasCompletedThisUpgrade = (_c = (_b = (_a = data == null ? void 0 : data.upgradeHistory) == null ? void 0 : _a.completedUpgrades) == null ? void 0 : _b[versionKey]) == null ? void 0 : _c.completed;
      if (hasCompletedThisUpgrade) {
        return null;
      }
      const isFreshInstall = await this.detectFreshInstall();
      if (isFreshInstall) {
        await this.markUpgradeComplete(currentVersion);
        return {
          success: true,
          upgradesExecuted: 0,
          upgradesSkipped: 0,
          upgradesFailed: 0,
          isFreshInstall: true,
          // Flag for showing installation welcome dialog
          results: []
        };
      }
      if (previousVersion === currentVersion) {
        return null;
      }
      const upgradeChain = this.getUpgradeChain(previousVersion, currentVersion);
      if (upgradeChain.length === 0) {
        await this.markUpgradeComplete(currentVersion);
        await this.showUpgradeDialog(currentVersion, previousVersion, []);
        return {
          success: true,
          upgradesExecuted: 0,
          upgradesSkipped: 0,
          upgradesFailed: 0,
          results: []
        };
      }
      const result = await this.executeUpgradeChainWithModal(upgradeChain, previousVersion, currentVersion);
      await this.markUpgradeComplete(currentVersion);
      try {
        await this.writeUpgradeReport(previousVersion, currentVersion, upgradeChain, result);
      } catch (e) {
        logger5.error("Failed to write upgrade report:", e);
      }
      await this.showUpgradeCompleteDialog(currentVersion);
      return result;
    } catch (error) {
      logger5.error("Incremental upgrade failed:", error);
      if (error instanceof Error && error.message === "User cancelled upgrade") {
        new import_obsidian26.Notice("Migration cancelled. Please complete the migration before importing.");
        return {
          success: false,
          upgradesExecuted: 0,
          upgradesSkipped: 0,
          upgradesFailed: 0,
          results: []
        };
      }
      logger5.error("Error during incremental upgrade:", error);
      new import_obsidian26.Notice("Upgrade failed - see console for details");
      return {
        success: false,
        upgradesExecuted: 0,
        upgradesSkipped: 0,
        upgradesFailed: 1,
        results: []
      };
    }
  }
  /**
   * Detect if this is a fresh installation with no existing data
   */
  async detectFreshInstall() {
    try {
      const data = await this.plugin.loadData();
      const hasLegacyData = !!((data == null ? void 0 : data.conversationCatalog) && Object.keys(data.conversationCatalog).length > 0);
      const hasImportedArchives = !!((data == null ? void 0 : data.importedArchives) && Object.keys(data.importedArchives).length > 0);
      const conversationFolder = this.plugin.settings.conversationFolder;
      const allFiles = this.plugin.app.vault.getMarkdownFiles();
      const existingConversations = allFiles.filter((file) => {
        var _a;
        if (!file.path.startsWith(conversationFolder))
          return false;
        const relativePath = file.path.substring(conversationFolder.length + 1);
        if (relativePath.startsWith("Reports/") || relativePath.startsWith("Attachments/") || relativePath.startsWith("reports/") || relativePath.startsWith("attachments/")) {
          return false;
        }
        const frontmatter = (_a = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
        return (frontmatter == null ? void 0 : frontmatter.nexus) === this.plugin.manifest.id;
      });
      const hasExistingConversations = existingConversations.length > 0;
      const isFreshInstall = !hasLegacyData && !hasImportedArchives && !hasExistingConversations;
      return isFreshInstall;
    } catch (error) {
      logger5.error("Error detecting fresh install:", error);
      return false;
    }
  }
  /**
   * Get chain of upgrades to execute incrementally
   */
  getUpgradeChain(fromVersion, toVersion) {
    return this.availableUpgrades.filter(
      (upgrade) => upgrade.shouldRun(fromVersion, toVersion)
    );
  }
  /**
   * Execute upgrade chain with modal progress tracking
   */
  async executeUpgradeChainWithModal(upgradeChain, fromVersion, toVersion) {
    const allOperations = [];
    for (const upgrade of upgradeChain) {
      for (const operation of upgrade.automaticOperations) {
        allOperations.push({
          id: `${upgrade.version}_${operation.id}`,
          name: operation.name,
          status: "pending"
        });
      }
    }
    const progressModal = new MultiOperationProgressModal(
      this.plugin.app,
      `Upgrading to v${toVersion}`,
      allOperations
    );
    progressModal.open();
    const results = [];
    let upgradesExecuted = 0;
    let upgradesSkipped = 0;
    let upgradesFailed = 0;
    try {
      for (const upgrade of upgradeChain) {
        const context = await this.createUpgradeContext(upgrade, fromVersion, toVersion);
        const automaticResults = await this.executeOperationsWithProgress(
          upgrade.automaticOperations,
          context,
          upgrade.version,
          progressModal
        );
        const manualResults = { success: true, results: [] };
        results.push({
          version: upgrade.version,
          automaticResults,
          manualResults
        });
        upgradesExecuted++;
      }
      const overallSuccess = true;
      progressModal.markComplete(`All operations completed successfully!`);
      return {
        success: overallSuccess,
        upgradesExecuted,
        upgradesSkipped,
        upgradesFailed,
        results
      };
    } catch (error) {
      logger5.error("Modal upgrade execution failed:", error);
      progressModal.showError(`Upgrade failed: ${error}`);
      throw error;
    }
  }
  /**
   * Execute operations with progress updates to modal
   */
  async executeOperationsWithProgress(operations, context, version, progressModal) {
    const results = [];
    let criticalFailures = 0;
    for (const operation of operations) {
      const modalOperationId = `${version}_${operation.id}`;
      try {
        if (await this.isOperationCompleted(operation.id, version)) {
          progressModal.updateOperation(modalOperationId, {
            status: "completed",
            progress: 100
          });
          results.push({
            operationId: operation.id,
            result: { success: true, message: "Already completed" }
          });
          continue;
        }
        progressModal.updateOperation(modalOperationId, {
          status: "running",
          progress: 0
        });
        if (!await operation.canRun(context)) {
          progressModal.updateOperation(modalOperationId, {
            status: "completed",
            progress: 100,
            currentDetail: "Nothing to process"
          });
          results.push({
            operationId: operation.id,
            result: { success: true, message: "Prerequisites not met - nothing to process" }
          });
          continue;
        }
        const result = await this.executeOperationWithProgress(
          operation,
          context,
          modalOperationId,
          progressModal
        );
        results.push({ operationId: operation.id, result });
        if (result.success) {
          await this.markOperationCompleted(operation.id, version);
          progressModal.updateOperation(modalOperationId, {
            status: "completed",
            progress: 100
          });
        } else {
          const isCritical = this.isCriticalFailure(result);
          if (isCritical) {
            criticalFailures++;
            progressModal.updateOperation(modalOperationId, {
              status: "failed",
              error: result.message
            });
          } else {
            progressModal.updateOperation(modalOperationId, {
              status: "completed",
              progress: 100,
              currentDetail: "Completed with warnings"
            });
          }
        }
      } catch (error) {
        const errorResult = {
          success: false,
          message: `Operation failed: ${error}`,
          details: { error: String(error) }
        };
        results.push({ operationId: operation.id, result: errorResult });
        progressModal.updateOperation(modalOperationId, {
          status: "failed",
          error: String(error)
        });
        criticalFailures++;
      }
    }
    return { success: criticalFailures === 0, results };
  }
  /**
   * Determine if an operation failure is critical
   */
  isCriticalFailure(result) {
    return false;
  }
  /**
   * Execute single operation with progress callbacks
   */
  async executeOperationWithProgress(operation, context, modalOperationId, progressModal) {
    const result = await operation.execute(context);
    progressModal.updateOperation(modalOperationId, {
      status: "running",
      progress: 100
    });
    return result;
  }
  /**
   * Create upgrade context
   */
  async createUpgradeContext(upgrade, fromVersion, toVersion) {
    const pluginData = await this.plugin.loadData();
    return {
      plugin: this.plugin,
      fromVersion,
      toVersion,
      pluginData
    };
  }
  /**
   * Mark overall upgrade as complete
   */
  async markUpgradeComplete(version) {
    const data = await this.plugin.loadData() || {};
    if (!data.upgradeHistory) {
      data.upgradeHistory = {
        completedUpgrades: {},
        completedOperations: {}
      };
    }
    const versionKey = version.replace(/\./g, "_");
    data.upgradeHistory.completedUpgrades[versionKey] = {
      version,
      date: new Date().toISOString(),
      completed: true
    };
    data.lastVersion = version;
    data.hasCompletedUpgrade = true;
    data.upgradeDate = new Date().toISOString();
    if (VersionUtils.compareVersions(version, "1.1.0") >= 0) {
      data.versionTrackingEnabled = true;
    }
    await this.plugin.saveData(data);
  }
  /**
   * Write a consolidated upgrade report per run
   */
  async writeUpgradeReport(fromVersion, toVersion, upgradeChain, result) {
    var _a, _b, _c, _d, _e;
    const reportRoot = this.plugin.settings.reportFolder || "Nexus/Reports";
    const upgradesFolder = `${reportRoot}/Upgrades`;
    const folderResult = await ensureFolderExists(upgradesFolder, this.plugin.app.vault);
    if (!folderResult.success) {
      logger5.error(`\u274C Failed to create folder: ${folderResult.error}`);
      throw new Error(`Failed to create upgrades folder: ${folderResult.error}`);
    }
    const now = new Date();
    const pad = /* @__PURE__ */ __name((n) => n.toString().padStart(2, "0"), "pad");
    const ts = `${now.getFullYear()}${pad(now.getMonth() + 1)}${pad(now.getDate())}-${pad(now.getHours())}${pad(now.getMinutes())}${pad(now.getSeconds())}`;
    const fileName = `${ts} - Upgrade to ${toVersion}.md`;
    const filePath = `${upgradesFolder}/${fileName}`;
    const opsByVersion = {};
    for (const up of upgradeChain) {
      opsByVersion[up.version] = {};
      for (const op of up.automaticOperations) {
        opsByVersion[up.version][op.id] = op.name;
      }
    }
    const readmeUrl = `${GITHUB.REPO_BASE}#readme`;
    const issuesUrl = `${GITHUB.REPO_BASE}/issues`;
    const totalVersions = result.results.length;
    const totalOps = result.results.reduce((acc, v) => {
      var _a2, _b2;
      return acc + (((_b2 = (_a2 = v.automaticResults) == null ? void 0 : _a2.results) == null ? void 0 : _b2.length) || 0);
    }, 0);
    let md = `# Upgrade to v${toVersion}

`;
    md += `From v${fromVersion} \u2192 v${toVersion}

`;
    md += `- Versions processed: ${totalVersions}
`;
    md += `- Operations executed: ${totalOps}

`;
    md += `See the latest README and release notes: ${readmeUrl}

`;
    md += `Report or review issues: ${issuesUrl}

`;
    for (const entry of result.results) {
      md += `## ${entry.version}

`;
      const ops = ((_a = entry.automaticResults) == null ? void 0 : _a.results) || [];
      if (!ops.length) {
        md += `- No automatic operations

`;
        continue;
      }
      for (const opRes of ops) {
        const opId = opRes.operationId;
        const opName = ((_b = opsByVersion[entry.version]) == null ? void 0 : _b[opId]) || opId;
        const ok = ((_c = opRes.result) == null ? void 0 : _c.success) === true;
        const status = ok ? "\u2705" : "\u26A0\uFE0F";
        const msg = ((_d = opRes.result) == null ? void 0 : _d.message) || "";
        md += `### ${opName} ${status}

`;
        if (msg)
          md += `${msg}

`;
        const details = (_e = opRes.result) == null ? void 0 : _e.details;
        if (details) {
          if (Array.isArray(details)) {
            if (details.length > 0) {
              for (const item of details) {
                if (typeof item === "string") {
                  md += `${item}
`;
                }
              }
              md += `
`;
            }
          } else if (typeof details === "object") {
            const keys = Object.keys(details);
            if (keys.length > 0 && !keys.every((k) => /^\d+$/.test(k))) {
              md += `**Statistics:**

`;
              for (const key of keys) {
                const value = details[key];
                md += `- ${key}: ${String(value)}
`;
              }
              md += `
`;
            }
          }
        }
      }
    }
    try {
      await this.plugin.app.vault.create(filePath, md);
    } catch (error) {
      logger5.error(`\u274C Failed to write report file:`, error);
      logger5.error(`Error details:`, {
        message: error instanceof Error ? error.message : String(error),
        filePath,
        contentLength: md.length
      });
      throw error;
    }
  }
  /**
   * Show upgrade complete dialog AFTER migrations
   * Displays Ko-fi + What's New + Improvements + Bug Fixes
   */
  async showUpgradeCompleteDialog(version) {
    try {
      const isV130OrLater = this.compareVersions(version, "1.3.0") >= 0;
      if (isV130OrLater) {
        const { UpgradeCompleteModal: UpgradeCompleteModal2 } = await Promise.resolve().then(() => (init_upgrade_complete_modal(), upgrade_complete_modal_exports));
        await new Promise((resolve) => {
          const modal = new UpgradeCompleteModal2(this.plugin.app, this.plugin, version);
          modal.onClose = () => {
            resolve();
          };
          modal.open();
        });
      } else {
        new import_obsidian26.Notice(`Upgraded to Nexus AI Chat Importer v${version}`);
      }
    } catch (error) {
      logger5.error("Error showing upgrade complete dialog:", error);
      new import_obsidian26.Notice(`Upgraded to Nexus AI Chat Importer v${version}`);
    }
  }
  /**
   * Show upgrade dialog - INFORMATION ONLY (no cancel)
   * @deprecated - No longer used in v1.3.0+, kept for compatibility
   */
  async showUpgradeDialog(currentVersion, lastVersion, upgradeChain) {
    try {
      const overview = await this.fetchReleaseOverview(currentVersion);
      const baseMessage = overview || `Nexus AI Chat Importer has been upgraded to version ${currentVersion}.`;
      const paragraphs = [];
      paragraphs.push(baseMessage);
      paragraphs.push(this.getDocLinks(currentVersion));
      if (upgradeChain.length > 0) {
        paragraphs.push("");
        paragraphs.push("**Upgrade Operations Required**");
        paragraphs.push("The following operations will be performed automatically:");
        paragraphs.push("");
        const operationsList = [];
        for (const upgrade of upgradeChain) {
          for (const operation of upgrade.automaticOperations) {
            operationsList.push(`\u2022 **${operation.name}**: ${operation.description}`);
          }
        }
        paragraphs.push(operationsList.join("\n"));
      } else {
        paragraphs.push("");
        paragraphs.push("All systems are up to date. No operations required.");
      }
      if (upgradeChain.length > 0) {
        const isV120Upgrade = upgradeChain.some((upgrade) => upgrade.version === "1.2.0");
        const isV130Upgrade = upgradeChain.some((upgrade) => upgrade.version === "1.3.0");
        if (isV130Upgrade) {
          const { NexusUpgradeModal130: NexusUpgradeModal1302 } = await Promise.resolve().then(() => (init_upgrade_modal_1_3_0(), upgrade_modal_1_3_0_exports));
          const userChoice = await new Promise((resolve) => {
            new NexusUpgradeModal1302(this.plugin.app, this.plugin, "1.3.0", resolve).open();
          });
          if (userChoice !== "ok") {
            throw new Error("User cancelled upgrade");
          }
        } else if (isV120Upgrade) {
          const { NexusUpgradeModal: NexusUpgradeModal2 } = (init_upgrade_1_2_0(), __toCommonJS(upgrade_1_2_0_exports));
          await new Promise((resolve) => {
            new NexusUpgradeModal2(this.plugin.app, this.plugin, "1.2.0", resolve).open();
          });
        } else {
          await showDialog(
            this.plugin.app,
            "information",
            `Upgrade to ${VersionUtils.formatVersion(currentVersion)}`,
            paragraphs,
            this.shouldShowUpgradeWarning(lastVersion) ? this.getUpgradeWarning() : void 0,
            { button1: "Proceed with Upgrade" }
          );
        }
      } else {
        await showDialog(
          this.plugin.app,
          "information",
          `Upgrade to ${VersionUtils.formatVersion(currentVersion)}`,
          paragraphs,
          this.shouldShowUpgradeWarning(lastVersion) ? this.getUpgradeWarning() : void 0,
          { button1: "Got it!" }
          // ‚Üê Juste informatif
        );
      }
    } catch (error) {
      logger5.error("Error showing upgrade dialog:", error);
      new import_obsidian26.Notice(`Upgraded to Nexus AI Chat Importer v${currentVersion}`);
    }
  }
  /**
   * Check if operation was completed using new upgrade history structure
   */
  async isOperationCompleted(operationId, version) {
    var _a, _b, _c;
    const data = await this.plugin.loadData();
    const operationKey = `operation_${version.replace(/\./g, "_")}_${operationId}`;
    return ((_c = (_b = (_a = data == null ? void 0 : data.upgradeHistory) == null ? void 0 : _a.completedOperations) == null ? void 0 : _b[operationKey]) == null ? void 0 : _c.completed) || false;
  }
  /**
   * Mark operation as completed using structured upgrade history
   */
  async markOperationCompleted(operationId, version) {
    const data = await this.plugin.loadData() || {};
    if (!data.upgradeHistory) {
      data.upgradeHistory = {
        completedUpgrades: {},
        completedOperations: {}
      };
    }
    const operationKey = `operation_${version.replace(/\./g, "_")}_${operationId}`;
    data.upgradeHistory.completedOperations[operationKey] = {
      operationId,
      version,
      date: new Date().toISOString(),
      completed: true
    };
    await this.plugin.saveData(data);
  }
  /**
   * Get documentation links
   */
  getDocLinks(version) {
    return `**Resources:**
\u2022 [Full Release Notes](${GITHUB.REPO_BASE}/blob/${version}/RELEASE_NOTES.md)
\u2022 [Documentation](${GITHUB.REPO_BASE}/blob/${version}/README.md)`;
  }
  /**
   * Check if should show upgrade warning for very old versions
   */
  shouldShowUpgradeWarning(lastVersion) {
    return VersionUtils.compareVersions(lastVersion, "1.0.2") < 0;
  }
  /**
   * Get upgrade warning for very old versions
   */
  getUpgradeWarning() {
    return `\u26A0\uFE0F **Important for users upgrading from versions prior to v1.0.2:**

Version 1.0.2 introduced new metadata parameters required for certain features. For optimal performance and feature compatibility, it's recommended to delete old data and re-import conversations with this new version.`;
  }
  /**
   * Fetch release overview from GitHub
   */
  async fetchReleaseOverview(version) {
    try {
      const { requestUrl: requestUrl2 } = require("obsidian");
      const response = await requestUrl2({
        url: `${GITHUB.RAW_BASE}/${version}/RELEASE_NOTES.md`,
        method: "GET"
      });
      const overviewRegex = /## Overview\s+(.*?)(?=##|$)/s;
      const match = response.text.match(overviewRegex);
      return match ? match[1].trim() : null;
    } catch (error) {
      logger5.warn("Could not fetch release overview:", error);
      return null;
    }
  }
  /**
   * Compare two version strings
   * Returns: -1 if v1 < v2, 0 if equal, 1 if v1 > v2
   */
  compareVersions(v1, v2) {
    const parts1 = v1.split(".").map(Number);
    const parts2 = v2.split(".").map(Number);
    for (let i = 0; i < Math.max(parts1.length, parts2.length); i++) {
      const num1 = parts1[i] || 0;
      const num2 = parts2[i] || 0;
      if (num1 < num2)
        return -1;
      if (num1 > num2)
        return 1;
    }
    return 0;
  }
  /**
   * Get manual operations status for settings UI
   */
  async getManualOperationsForSettings() {
    const results = [];
    for (const upgrade of this.availableUpgrades) {
      const context = await this.createUpgradeContext(upgrade, "0.0.0", this.plugin.manifest.version);
      const operationsStatus = await upgrade.getManualOperationsStatus(context);
      if (operationsStatus.length > 0) {
        results.push({
          version: upgrade.version,
          operations: operationsStatus.map((status) => ({
            id: status.operation.id,
            name: status.operation.name,
            description: status.operation.description,
            completed: status.completed,
            canRun: status.canRun
          }))
        });
      }
    }
    return results;
  }
  /**
   * Execute single manual operation from settings
   */
  async executeManualOperation(version, operationId) {
    const upgrade = this.availableUpgrades.find((u) => u.version === version);
    if (!upgrade) {
      return { success: false, message: "Upgrade version not found" };
    }
    const context = await this.createUpgradeContext(upgrade, "0.0.0", this.plugin.manifest.version);
    const result = await upgrade.executeManualOperation(operationId, context);
    return {
      success: result.success,
      message: result.message
    };
  }
};
__name(IncrementalUpgradeManager, "IncrementalUpgradeManager");

// src/main.ts
init_logger();

// src/dialogs/provider-selection-dialog.ts
var import_obsidian27 = require("obsidian");
var ProviderSelectionDialog = class extends import_obsidian27.Modal {
  constructor(app, providerRegistry, onProviderSelected) {
    super(app);
    this.selectedProvider = null;
    this.onProviderSelected = onProviderSelected;
    this.providers = this.getAvailableProviders(providerRegistry);
  }
  getAvailableProviders(registry) {
    const providers = [];
    if (registry.getAdapter("chatgpt")) {
      providers.push({
        id: "chatgpt",
        name: "ChatGPT",
        description: "OpenAI ChatGPT conversation exports",
        fileFormats: ["conversations.json only"]
      });
    }
    if (registry.getAdapter("claude")) {
      providers.push({
        id: "claude",
        name: "Claude",
        description: "Anthropic Claude conversation exports",
        fileFormats: ["conversations.json + users.json", "projects.json (optional)"]
      });
    }
    return providers;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Select Archive Provider" });
    this.providers.forEach((provider) => {
      new import_obsidian27.Setting(contentEl).setName(provider.name).setDesc(this.createProviderDescription(provider)).addButton((button) => {
        button.setButtonText("Select").setCta().onClick(() => {
          this.selectedProvider = provider.id;
          this.close();
          this.onProviderSelected(provider.id);
        });
      });
    });
    const buttonContainer = contentEl.createDiv();
    buttonContainer.style.textAlign = "center";
    buttonContainer.style.marginTop = "20px";
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.style.marginRight = "10px";
    cancelButton.onclick = () => this.close();
  }
  createProviderDescription(provider) {
    return provider.description;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
__name(ProviderSelectionDialog, "ProviderSelectionDialog");

// src/dialogs/enhanced-file-selection-dialog.ts
var import_obsidian28 = require("obsidian");
var EnhancedFileSelectionDialog = class extends import_obsidian28.Modal {
  constructor(app, provider, onFileSelectionComplete, plugin) {
    super(app);
    this.plugin = plugin;
    this.selectedFiles = [];
    this.importMode = "all";
    this.dragCounter = 0;
    this.lastImportMode = null;
    this.provider = provider;
    this.onFileSelectionComplete = onFileSelectionComplete;
    this.setInitialImportMode();
  }
  onOpen() {
    const { contentEl, modalEl, titleEl } = this;
    contentEl.empty();
    modalEl.addClass("nexus-file-selection-dialog");
    contentEl.addClass("nexus-file-selection-dialog");
    titleEl.setText(`Import ${this.provider.charAt(0).toUpperCase() + this.provider.slice(1)} Conversations`);
    this.createImportModeSection(contentEl);
    this.createFileSelectionArea(contentEl);
    this.createFilePreviewArea(contentEl);
    this.createActionButtons(contentEl);
    this.addCustomStyles();
  }
  createImportModeSection(container) {
    const section = container.createDiv("import-mode-section");
    section.style.marginBottom = "20px";
    const sectionTitle = section.createEl("h3", { text: "Import Mode" });
    sectionTitle.style.marginTop = "0";
    sectionTitle.style.marginBottom = "12px";
    sectionTitle.style.fontSize = "1em";
    const optionsContainer = section.createDiv("import-options-container");
    optionsContainer.style.display = "grid";
    optionsContainer.style.gridTemplateColumns = "1fr 1fr";
    optionsContainer.style.gap = "12px";
    const allOption = optionsContainer.createDiv("import-option-box");
    allOption.style.padding = "14px 16px";
    allOption.style.border = "1px solid var(--background-modifier-border)";
    allOption.style.borderRadius = "6px";
    allOption.style.cursor = "pointer";
    allOption.style.transition = "all 0.2s";
    allOption.style.display = "flex";
    allOption.style.alignItems = "center";
    allOption.style.gap = "10px";
    allOption.style.backgroundColor = "var(--background-primary)";
    if (this.importMode === "all") {
      allOption.style.borderColor = "var(--interactive-accent)";
      allOption.style.borderWidth = "2px";
    }
    const allRadio = allOption.createEl("input", { type: "radio" });
    allRadio.name = "importMode";
    allRadio.value = "all";
    allRadio.checked = this.importMode === "all";
    allRadio.id = "import-all";
    allRadio.addEventListener("change", () => {
      this.importMode = "all";
      this.updateImportModeDescription();
      this.updateImportModeBoxes();
    });
    const allContent = allOption.createDiv();
    allContent.style.flex = "1";
    const allLabel = allContent.createEl("label");
    allLabel.htmlFor = "import-all";
    allLabel.style.display = "block";
    allLabel.style.fontWeight = "500";
    allLabel.style.marginBottom = "4px";
    allLabel.style.cursor = "pointer";
    allLabel.style.color = "var(--text-normal)";
    allLabel.textContent = "Import All";
    const allDesc = allContent.createDiv();
    allDesc.style.fontSize = "0.85em";
    allDesc.style.color = "var(--text-muted)";
    allDesc.textContent = "Import all conversations (faster)";
    allOption.addEventListener("click", () => {
      allRadio.checked = true;
      this.importMode = "all";
      this.updateImportModeDescription();
      this.updateImportModeBoxes();
    });
    const selectOption = optionsContainer.createDiv("import-option-box");
    selectOption.style.padding = "14px 16px";
    selectOption.style.border = "1px solid var(--background-modifier-border)";
    selectOption.style.borderRadius = "6px";
    selectOption.style.cursor = "pointer";
    selectOption.style.transition = "all 0.2s";
    selectOption.style.display = "flex";
    selectOption.style.alignItems = "center";
    selectOption.style.gap = "10px";
    selectOption.style.backgroundColor = "var(--background-primary)";
    if (this.importMode === "selective") {
      selectOption.style.borderColor = "var(--interactive-accent)";
      selectOption.style.borderWidth = "2px";
    }
    const selectRadio = selectOption.createEl("input", { type: "radio" });
    selectRadio.name = "importMode";
    selectRadio.value = "selective";
    selectRadio.checked = this.importMode === "selective";
    selectRadio.id = "import-selective";
    selectRadio.addEventListener("change", () => {
      this.importMode = "selective";
      this.updateImportModeDescription();
      this.updateImportModeBoxes();
    });
    const selectContent = selectOption.createDiv();
    selectContent.style.flex = "1";
    const selectLabel = selectContent.createEl("label");
    selectLabel.htmlFor = "import-selective";
    selectLabel.style.display = "block";
    selectLabel.style.fontWeight = "500";
    selectLabel.style.marginBottom = "4px";
    selectLabel.style.cursor = "pointer";
    selectLabel.style.color = "var(--text-normal)";
    selectLabel.textContent = "Select Specific";
    const selectDesc = selectContent.createDiv();
    selectDesc.style.fontSize = "0.85em";
    selectDesc.style.color = "var(--text-muted)";
    selectDesc.textContent = "Preview and choose conversations";
    selectOption.addEventListener("click", () => {
      selectRadio.checked = true;
      this.importMode = "selective";
      this.updateImportModeDescription();
      this.updateImportModeBoxes();
    });
  }
  updateImportModeBoxes() {
    const boxes = this.contentEl.querySelectorAll(".import-option-box");
    boxes.forEach((box, index) => {
      const isSelected = index === 0 && this.importMode === "all" || index === 1 && this.importMode === "selective";
      if (isSelected) {
        box.style.borderColor = "var(--interactive-accent)";
        box.style.borderWidth = "2px";
      } else {
        box.style.borderColor = "var(--background-modifier-border)";
        box.style.borderWidth = "1px";
      }
    });
  }
  createFileSelectionArea(container) {
    const section = container.createDiv("file-selection-section");
    section.style.marginBottom = "20px";
    const sectionTitle = section.createEl("h3", { text: "Select Files" });
    sectionTitle.style.marginBottom = "10px";
    sectionTitle.style.fontSize = "1em";
    const dropZone = section.createDiv("drop-zone");
    dropZone.style.border = "2px dashed var(--background-modifier-border)";
    dropZone.style.borderRadius = "8px";
    dropZone.style.padding = "24px 20px";
    dropZone.style.textAlign = "center";
    dropZone.style.cursor = "pointer";
    dropZone.style.transition = "all 0.2s ease";
    const dropIcon = dropZone.createEl("div");
    dropIcon.style.fontSize = "48px";
    dropIcon.style.marginBottom = "15px";
    dropIcon.textContent = "\u{1F4C1}";
    const dropText = dropZone.createEl("div");
    dropText.style.fontSize = "16px";
    dropText.style.marginBottom = "10px";
    dropText.textContent = "Drop ZIP files here or click to browse";
    const dropSubtext = dropZone.createEl("div");
    dropSubtext.style.fontSize = "14px";
    dropSubtext.style.color = "var(--text-muted)";
    dropSubtext.textContent = "Supports multiple file selection";
    const fileInput = section.createEl("input", { type: "file" });
    fileInput.accept = ".zip";
    fileInput.multiple = true;
    fileInput.style.display = "none";
    dropZone.addEventListener("click", () => fileInput.click());
    fileInput.addEventListener("change", (e) => this.handleFileSelection(e));
    dropZone.addEventListener("dragover", (e) => this.handleDragOver(e, dropZone));
    dropZone.addEventListener("dragenter", (e) => this.handleDragEnter(e, dropZone));
    dropZone.addEventListener("dragleave", (e) => this.handleDragLeave(e, dropZone));
    dropZone.addEventListener("drop", (e) => this.handleDrop(e, dropZone));
  }
  createFilePreviewArea(container) {
    const section = container.createDiv("file-preview-section");
    section.id = "file-preview-section";
    section.style.marginBottom = "20px";
    section.style.display = "none";
    const sectionTitle = section.createEl("h3", { text: "Selected Files" });
    sectionTitle.style.marginBottom = "15px";
    const fileListContainer = section.createDiv("file-list-container");
    fileListContainer.style.maxHeight = "300px";
    fileListContainer.style.overflowY = "auto";
    fileListContainer.style.border = "1px solid var(--background-modifier-border)";
    fileListContainer.style.borderRadius = "6px";
    fileListContainer.style.padding = "8px";
    const fileList = fileListContainer.createDiv("file-list");
    fileList.id = "file-list";
  }
  createActionButtons(container) {
    const buttonContainer = container.createDiv("action-buttons");
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "10px";
    buttonContainer.style.marginTop = "20px";
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.style.padding = "8px 16px";
    cancelButton.addEventListener("click", () => this.close());
    const importButton = buttonContainer.createEl("button", { text: "Continue" });
    importButton.id = "import-button";
    importButton.style.padding = "8px 16px";
    importButton.classList.add("mod-cta");
    importButton.disabled = true;
    importButton.addEventListener("click", () => this.handleImport());
  }
  handleFileSelection(event) {
    const input = event.target;
    if (input.files) {
      this.selectedFiles = Array.from(input.files);
      this.updateFilePreview();
      this.updateImportButton();
    }
  }
  handleDragOver(event, dropZone) {
    event.preventDefault();
    dropZone.style.borderColor = "var(--interactive-accent)";
    dropZone.style.backgroundColor = "var(--background-modifier-hover)";
  }
  handleDragEnter(event, dropZone) {
    event.preventDefault();
    this.dragCounter++;
  }
  handleDragLeave(event, dropZone) {
    event.preventDefault();
    this.dragCounter--;
    if (this.dragCounter === 0) {
      dropZone.style.borderColor = "var(--background-modifier-border)";
      dropZone.style.backgroundColor = "transparent";
    }
  }
  handleDrop(event, dropZone) {
    var _a;
    event.preventDefault();
    this.dragCounter = 0;
    dropZone.style.borderColor = "var(--background-modifier-border)";
    dropZone.style.backgroundColor = "transparent";
    if ((_a = event.dataTransfer) == null ? void 0 : _a.files) {
      const files = Array.from(event.dataTransfer.files).filter(
        (file) => file.name.toLowerCase().endsWith(".zip")
      );
      if (files.length > 0) {
        this.selectedFiles = files;
        this.updateFilePreview();
        this.updateImportButton();
      }
    }
  }
  updateFilePreview() {
    const previewSection = this.contentEl.querySelector("#file-preview-section");
    const fileList = this.contentEl.querySelector("#file-list");
    if (this.selectedFiles.length > 0) {
      previewSection.style.display = "block";
      fileList.empty();
      this.selectedFiles.forEach((file, index) => {
        const fileItem = fileList.createDiv("file-item");
        fileItem.style.display = "flex";
        fileItem.style.justifyContent = "space-between";
        fileItem.style.alignItems = "center";
        fileItem.style.padding = "8px 12px";
        fileItem.style.border = "1px solid var(--background-modifier-border)";
        fileItem.style.borderRadius = "4px";
        fileItem.style.marginBottom = "8px";
        const fileInfo = fileItem.createDiv();
        fileInfo.style.display = "flex";
        fileInfo.style.flexDirection = "column";
        const fileName = fileInfo.createEl("span");
        fileName.textContent = file.name;
        fileName.style.fontWeight = "500";
        const fileSize = fileInfo.createEl("span");
        fileSize.textContent = this.formatFileSize(file.size);
        fileSize.style.fontSize = "0.9em";
        fileSize.style.color = "var(--text-muted)";
        const removeButton = fileItem.createEl("button", { text: "Remove" });
        removeButton.style.padding = "4px 8px";
        removeButton.style.fontSize = "0.9em";
        removeButton.addEventListener("click", () => this.removeFile(index));
      });
    } else {
      previewSection.style.display = "none";
    }
  }
  removeFile(index) {
    this.selectedFiles.splice(index, 1);
    this.updateFilePreview();
    this.updateImportButton();
  }
  updateImportButton() {
    const importButton = this.contentEl.querySelector("#import-button");
    importButton.disabled = this.selectedFiles.length === 0;
  }
  updateImportModeDescription() {
  }
  async handleImport() {
    var _a, _b;
    if (this.selectedFiles.length > 0) {
      if ((_b = (_a = this.plugin) == null ? void 0 : _a.settings) == null ? void 0 : _b.rememberLastImportMode) {
        this.plugin.settings.defaultImportMode = this.importMode;
        await this.plugin.saveSettings();
      }
      const result = {
        files: this.selectedFiles,
        mode: this.importMode,
        provider: this.provider
      };
      this.close();
      this.onFileSelectionComplete(result);
    }
  }
  setInitialImportMode() {
    var _a;
    if (!((_a = this.plugin) == null ? void 0 : _a.settings)) {
      this.importMode = "all";
      return;
    }
    if (this.plugin.settings.rememberLastImportMode && this.lastImportMode) {
      this.importMode = this.lastImportMode;
    } else {
      this.importMode = this.plugin.settings.defaultImportMode || "all";
    }
  }
  formatFileSize(bytes) {
    if (bytes === 0)
      return "0 Bytes";
    const k = 1024;
    const sizes = ["Bytes", "KB", "MB", "GB"];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
  }
  addCustomStyles() {
    const style = document.createElement("style");
    style.textContent = `
            /* Modal sizing - wider and responsive */
            .modal.nexus-file-selection-dialog {
                max-width: min(800px, 90vw) !important;
                width: min(800px, 90vw) !important;
                height: auto !important;
                padding: 0 !important;
            }

            /* Modal title spacing */
            .modal.nexus-file-selection-dialog .modal-title {
                padding: 16px 24px !important;
                margin: 0 !important;
            }

            .modal.nexus-file-selection-dialog .modal-content {
                max-width: 100% !important;
                width: 100% !important;
                max-height: 85vh;
                overflow-y: auto;
                display: flex;
                flex-direction: column;
                padding: 20px 24px 24px 24px;
            }

            /* Import mode boxes hover effect */
            .nexus-file-selection-dialog .import-option-box:hover {
                background-color: var(--background-modifier-hover);
            }

            /* Drop zone hover effect */
            .nexus-file-selection-dialog .drop-zone:hover {
                border-color: var(--interactive-accent);
                background-color: var(--background-modifier-hover);
            }

            /* File list container with custom scrollbar */
            .nexus-file-selection-dialog .file-list-container {
                scrollbar-width: thin;
                scrollbar-color: var(--background-modifier-border) transparent;
            }

            .nexus-file-selection-dialog .file-list-container::-webkit-scrollbar {
                width: 10px;
            }

            .nexus-file-selection-dialog .file-list-container::-webkit-scrollbar-track {
                background: transparent;
            }

            .nexus-file-selection-dialog .file-list-container::-webkit-scrollbar-thumb {
                background-color: var(--background-modifier-border);
                border-radius: 5px;
            }

            .nexus-file-selection-dialog .file-list-container::-webkit-scrollbar-thumb:hover {
                background-color: var(--text-muted);
            }
        `;
    document.head.appendChild(style);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
__name(EnhancedFileSelectionDialog, "EnhancedFileSelectionDialog");

// src/dialogs/conversation-selection-dialog.ts
var import_obsidian29 = require("obsidian");
var ConversationSelectionDialog = class extends import_obsidian29.Modal {
  // Information about analysis and filtering
  constructor(app, conversations, onSelectionComplete, plugin, analysisInfo) {
    var _a, _b;
    super(app);
    this.onSelectionComplete = onSelectionComplete;
    this.plugin = plugin;
    this.analysisInfo = analysisInfo;
    const pageSize = ((_a = plugin == null ? void 0 : plugin.settings) == null ? void 0 : _a.lastConversationsPerPage) || 50;
    this.state = {
      allConversations: conversations,
      filteredConversations: conversations,
      selectedIds: /* @__PURE__ */ new Set(),
      pagination: {
        pageSize,
        currentPage: 1,
        totalPages: Math.ceil(conversations.length / pageSize),
        totalItems: conversations.length
      },
      sort: {
        field: "updateTime",
        direction: "desc"
      },
      filter: {
        existenceStatus: "all"
        // Default to show all conversations
      },
      isLoading: false
    };
    if ((_b = plugin == null ? void 0 : plugin.settings) == null ? void 0 : _b.autoSelectAllOnOpen) {
      conversations.forEach((conv) => {
        this.state.selectedIds.add(conv.id);
      });
    }
    this.applyFiltersAndSort();
  }
  onOpen() {
    const { contentEl, modalEl, titleEl } = this;
    contentEl.empty();
    modalEl.addClass("nexus-conversation-selection-dialog");
    contentEl.addClass("nexus-conversation-selection-dialog");
    titleEl.setText("Select Conversations to Import");
    this.createSummarySection(contentEl);
    this.createControlsSection(contentEl);
    this.createConversationListSection(contentEl);
    this.createPaginationSection(contentEl);
    this.createActionButtons(contentEl);
    this.addCustomStyles();
    this.renderConversationList();
    this.updateSummary();
    this.updatePagination();
  }
  createSummarySection(container) {
    const section = container.createDiv("summary-section");
    section.id = "conversation-summary";
    section.style.marginBottom = "20px";
    section.style.display = "grid";
    section.style.gridTemplateColumns = "repeat(4, 1fr)";
    section.style.gap = "12px";
  }
  createControlsSection(container) {
    const section = container.createDiv("controls-section");
    section.style.marginBottom = "20px";
    section.style.display = "flex";
    section.style.gap = "12px";
    section.style.alignItems = "center";
    const selectAllBtn = section.createEl("button", { text: "Select All" });
    selectAllBtn.style.padding = "8px 16px";
    selectAllBtn.style.whiteSpace = "nowrap";
    selectAllBtn.addEventListener("click", () => {
      this.state.filteredConversations.forEach((conv) => {
        this.state.selectedIds.add(conv.id);
      });
      this.renderConversationList();
      this.updateSummary();
    });
    const selectNoneBtn = section.createEl("button", { text: "Select None" });
    selectNoneBtn.style.padding = "8px 16px";
    selectNoneBtn.style.whiteSpace = "nowrap";
    selectNoneBtn.addEventListener("click", () => {
      this.state.selectedIds.clear();
      this.renderConversationList();
      this.updateSummary();
    });
    const searchInput = section.createEl("input", { type: "text" });
    searchInput.placeholder = "Search conversations...";
    searchInput.style.flex = "1";
    searchInput.style.minWidth = "200px";
    searchInput.style.padding = "8px 12px";
    searchInput.style.border = "1px solid var(--background-modifier-border)";
    searchInput.style.borderRadius = "4px";
    searchInput.addEventListener("input", (e) => {
      const target = e.target;
      this.state.filter.searchTerm = target.value;
      this.applyFiltersAndSort();
      this.renderConversationList();
      this.updateSummary();
      this.updatePagination();
    });
    const statusLabel = section.createEl("label");
    statusLabel.textContent = "Status:";
    statusLabel.style.marginRight = "4px";
    statusLabel.style.fontSize = "14px";
    statusLabel.style.whiteSpace = "nowrap";
    const statusSelect = section.createEl("select");
    statusSelect.style.padding = "8px 12px";
    statusSelect.style.paddingRight = "28px";
    statusSelect.style.border = "1px solid var(--background-modifier-border)";
    statusSelect.style.borderRadius = "4px";
    statusSelect.style.fontSize = "14px";
    statusSelect.style.backgroundColor = "var(--background-primary)";
    statusSelect.style.color = "var(--text-normal)";
    statusSelect.classList.add("nexus-custom-select");
    const statusOptions = [
      { value: "all", text: "All" },
      { value: "new", text: "New" },
      { value: "updated", text: "Updated" },
      { value: "unchanged", text: "Unchanged" }
    ];
    statusOptions.forEach((option) => {
      const optionEl = statusSelect.createEl("option");
      optionEl.value = option.value;
      optionEl.textContent = option.text;
    });
    statusSelect.value = this.state.filter.existenceStatus || "all";
    statusSelect.addEventListener("change", (e) => {
      const target = e.target;
      this.state.filter.existenceStatus = target.value;
      this.applyFiltersAndSort();
      this.renderConversationList();
      this.updateSummary();
      this.updatePagination();
    });
    const pageSizeLabel = section.createEl("label");
    pageSizeLabel.textContent = "Show:";
    pageSizeLabel.style.marginRight = "4px";
    pageSizeLabel.style.fontSize = "14px";
    pageSizeLabel.style.whiteSpace = "nowrap";
    const pageSizeSelect = section.createEl("select");
    pageSizeSelect.style.padding = "8px 12px";
    pageSizeSelect.style.paddingRight = "28px";
    pageSizeSelect.style.border = "1px solid var(--background-modifier-border)";
    pageSizeSelect.style.borderRadius = "4px";
    pageSizeSelect.style.fontSize = "14px";
    pageSizeSelect.style.backgroundColor = "var(--background-primary)";
    pageSizeSelect.style.color = "var(--text-normal)";
    pageSizeSelect.classList.add("nexus-custom-select");
    const pageSizeOptions = [10, 20, 50, 100];
    pageSizeOptions.forEach((size) => {
      const optionEl = pageSizeSelect.createEl("option");
      optionEl.value = size.toString();
      optionEl.textContent = size.toString();
    });
    pageSizeSelect.value = this.state.pagination.pageSize.toString();
    pageSizeSelect.addEventListener("change", async (e) => {
      const target = e.target;
      const newPageSize = parseInt(target.value);
      this.state.pagination.pageSize = newPageSize;
      this.state.pagination.currentPage = 1;
      if (this.plugin) {
        this.plugin.settings.lastConversationsPerPage = newPageSize;
        await this.plugin.saveSettings();
      }
      this.updatePagination();
      this.renderConversationList();
    });
  }
  createConversationListSection(container) {
    const section = container.createDiv("conversation-list-section");
    section.style.marginBottom = "20px";
    const tableContainer = section.createDiv("table-container");
    tableContainer.classList.add("nexus-table-container");
    const table = tableContainer.createEl("table");
    table.id = "conversation-table";
    table.style.width = "100%";
    table.style.borderCollapse = "collapse";
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    headerRow.style.backgroundColor = "var(--background-secondary)";
    headerRow.style.position = "sticky";
    headerRow.style.top = "0";
    headerRow.style.zIndex = "10";
    const headers = [
      { text: "", width: "40px", sortField: null },
      // Checkbox - plus compact
      { text: "Title", width: "45%", sortField: "title" },
      // Plus d'espace
      { text: "Created", width: "110px", sortField: "createTime" },
      // R√©duit
      { text: "Updated", width: "110px", sortField: "updateTime" },
      // R√©duit
      { text: "Messages", width: "80px", sortField: "messageCount" },
      // R√©duit
      { text: "Status", width: "100px", sortField: null }
      // R√©duit
    ];
    headers.forEach((header) => {
      const th = headerRow.createEl("th");
      th.style.padding = "12px 8px";
      th.style.textAlign = "left";
      th.style.borderBottom = "2px solid var(--background-modifier-border)";
      th.style.fontWeight = "600";
      th.style.backgroundColor = "var(--background-secondary)";
      th.style.userSelect = "none";
      if (header.width !== "auto") {
        th.style.width = header.width;
      }
      if (header.sortField) {
        th.style.cursor = "pointer";
        th.classList.add("sortable-header");
        const headerContent = th.createSpan();
        headerContent.textContent = header.text;
        const sortIndicator = th.createSpan();
        sortIndicator.classList.add("sort-indicator");
        sortIndicator.style.marginLeft = "6px";
        sortIndicator.style.fontSize = "0.8em";
        sortIndicator.style.opacity = "0.5";
        if (this.state.sort.field === header.sortField) {
          sortIndicator.textContent = this.state.sort.direction === "asc" ? "\u25B2" : "\u25BC";
          sortIndicator.style.opacity = "1";
        } else {
          sortIndicator.textContent = "\u25BC";
        }
        th.addEventListener("click", () => {
          if (this.state.sort.field === header.sortField) {
            this.state.sort.direction = this.state.sort.direction === "asc" ? "desc" : "asc";
          } else {
            this.state.sort.field = header.sortField;
            this.state.sort.direction = "desc";
          }
          this.applyFiltersAndSort();
          this.renderConversationList();
        });
      } else {
        th.textContent = header.text;
      }
    });
    const tbody = table.createEl("tbody");
    tbody.id = "conversation-table-body";
  }
  createPaginationSection(container) {
    const section = container.createDiv("pagination-section");
    section.id = "pagination-section";
    section.style.marginBottom = "20px";
    section.style.display = "flex";
    section.style.justifyContent = "space-between";
    section.style.alignItems = "center";
    const pageInfo = section.createDiv();
    pageInfo.id = "page-info";
    pageInfo.style.fontSize = "0.9em";
    pageInfo.style.color = "var(--text-muted)";
    const pageControls = section.createDiv();
    pageControls.id = "page-controls";
    pageControls.style.display = "flex";
    pageControls.style.gap = "8px";
  }
  createActionButtons(container) {
    const buttonContainer = container.createDiv("action-buttons");
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "10px";
    buttonContainer.style.marginTop = "20px";
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.style.padding = "8px 16px";
    cancelButton.addEventListener("click", () => this.close());
    const importButton = buttonContainer.createEl("button", { text: "Import Selected" });
    importButton.id = "import-selected-button";
    importButton.style.padding = "8px 16px";
    importButton.classList.add("mod-cta");
    importButton.addEventListener("click", () => this.handleImportSelected());
  }
  applyFiltersAndSort() {
    let filtered = [...this.state.allConversations];
    if (this.state.filter.searchTerm) {
      const searchTerm = this.state.filter.searchTerm.toLowerCase();
      filtered = filtered.filter(
        (conv) => conv.title.toLowerCase().includes(searchTerm)
      );
    }
    if (this.state.filter.existenceStatus && this.state.filter.existenceStatus !== "all") {
      filtered = filtered.filter(
        (conv) => conv.existenceStatus === this.state.filter.existenceStatus
      );
    }
    filtered.sort((a, b) => {
      const { field, direction } = this.state.sort;
      let aVal = a[field];
      let bVal = b[field];
      if (field === "title") {
        aVal = aVal.toLowerCase();
        bVal = bVal.toLowerCase();
      }
      if (aVal < bVal)
        return direction === "asc" ? -1 : 1;
      if (aVal > bVal)
        return direction === "asc" ? 1 : -1;
      return 0;
    });
    this.state.filteredConversations = filtered;
    this.updatePagination();
  }
  updatePagination() {
    const totalItems = this.state.filteredConversations.length;
    const totalPages = Math.ceil(totalItems / this.state.pagination.pageSize);
    this.state.pagination = {
      ...this.state.pagination,
      totalItems,
      totalPages,
      currentPage: Math.min(this.state.pagination.currentPage, totalPages || 1)
    };
  }
  renderConversationList() {
    const tbody = this.contentEl.querySelector("#conversation-table-body");
    if (!tbody)
      return;
    tbody.empty();
    const { currentPage, pageSize } = this.state.pagination;
    const startIndex = (currentPage - 1) * pageSize;
    const endIndex = startIndex + pageSize;
    const pageConversations = this.state.filteredConversations.slice(startIndex, endIndex);
    pageConversations.forEach((conversation) => {
      const row = tbody.createEl("tr");
      const checkboxCell = row.createEl("td");
      const checkbox = checkboxCell.createEl("input", { type: "checkbox" });
      checkbox.checked = this.state.selectedIds.has(conversation.id);
      checkbox.addEventListener("change", () => {
        if (checkbox.checked) {
          this.state.selectedIds.add(conversation.id);
        } else {
          this.state.selectedIds.delete(conversation.id);
        }
        this.updateSummary();
      });
      const titleCell = row.createEl("td");
      titleCell.style.fontWeight = "500";
      titleCell.textContent = conversation.title;
      if (conversation.sourceFile) {
        const sourceInfo = titleCell.createEl("div");
        sourceInfo.style.fontSize = "0.8em";
        sourceInfo.style.color = "var(--text-muted)";
        sourceInfo.style.marginTop = "4px";
        sourceInfo.textContent = `\u{1F4C1} ${conversation.sourceFile}`;
      }
      const createdCell = row.createEl("td");
      createdCell.style.fontSize = "0.9em";
      createdCell.textContent = this.formatDate(conversation.createTime);
      const updatedCell = row.createEl("td");
      updatedCell.style.fontSize = "0.9em";
      updatedCell.textContent = this.formatDate(conversation.updateTime);
      const messagesCell = row.createEl("td");
      messagesCell.style.textAlign = "center";
      messagesCell.textContent = conversation.messageCount.toString();
      const statusCell = row.createEl("td");
      statusCell.style.textAlign = "center";
      const statusBadge = this.createStatusBadge(conversation);
      statusCell.appendChild(statusBadge);
    });
    this.renderPaginationControls();
  }
  createStatusBadge(conversation) {
    const badge = document.createElement("span");
    badge.classList.add("status-badge");
    switch (conversation.existenceStatus) {
      case "new":
        badge.textContent = "New";
        badge.classList.add("status-new");
        badge.title = "This conversation is not in your vault";
        break;
      case "updated":
        badge.textContent = "Updated";
        badge.classList.add("status-updated");
        badge.title = `This conversation has newer content than your vault (${this.formatDate(conversation.existingUpdateTime || 0)} \u2192 ${this.formatDate(conversation.updateTime)})`;
        break;
      case "unchanged":
        badge.textContent = "Unchanged";
        badge.classList.add("status-unchanged");
        badge.title = "This conversation is the same as in your vault";
        break;
      default:
        badge.textContent = "Unknown";
        badge.classList.add("status-unchanged");
        break;
    }
    return badge;
  }
  renderPaginationControls() {
    const pageInfo = this.contentEl.querySelector("#page-info");
    const pageControls = this.contentEl.querySelector("#page-controls");
    if (!pageInfo || !pageControls)
      return;
    const { currentPage, totalPages, totalItems, pageSize } = this.state.pagination;
    const startItem = (currentPage - 1) * pageSize + 1;
    const endItem = Math.min(currentPage * pageSize, totalItems);
    pageInfo.textContent = `Showing ${startItem}-${endItem} of ${totalItems} conversations`;
    pageControls.empty();
    const prevBtn = pageControls.createEl("button", { text: "Previous" });
    prevBtn.disabled = currentPage <= 1;
    prevBtn.style.padding = "6px 12px";
    prevBtn.addEventListener("click", () => {
      if (currentPage > 1) {
        this.state.pagination.currentPage--;
        this.renderConversationList();
      }
    });
    const pageSpan = pageControls.createEl("span");
    pageSpan.textContent = `Page ${currentPage} of ${totalPages}`;
    pageSpan.style.padding = "6px 12px";
    const nextBtn = pageControls.createEl("button", { text: "Next" });
    nextBtn.disabled = currentPage >= totalPages;
    nextBtn.style.padding = "6px 12px";
    nextBtn.addEventListener("click", () => {
      if (currentPage < totalPages) {
        this.state.pagination.currentPage++;
        this.renderConversationList();
      }
    });
  }
  updateSummary() {
    const summary = this.contentEl.querySelector("#conversation-summary");
    if (!summary)
      return;
    const selectedCount = this.state.selectedIds.size;
    const totalCount = this.state.filteredConversations.length;
    const statusCounts = {
      new: 0,
      updated: 0,
      unchanged: 0,
      unknown: 0
    };
    this.state.filteredConversations.forEach((conv) => {
      const status = conv.existenceStatus || "unknown";
      statusCounts[status]++;
    });
    summary.innerHTML = this.buildComprehensiveSummary(selectedCount, totalCount, statusCounts);
    const importButton = this.contentEl.querySelector("#import-selected-button");
    if (importButton) {
      importButton.disabled = selectedCount === 0;
      importButton.textContent = selectedCount > 0 ? `Import ${selectedCount} Selected` : "Import Selected";
    }
  }
  buildComprehensiveSummary(selectedCount, totalCount, statusCounts) {
    if (this.analysisInfo) {
      const info = this.analysisInfo;
      const uniqueCount = info.uniqueConversationsKept;
      return `
                <div style="text-align: center; padding: 12px; background-color: var(--background-primary); border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
                    <div style="font-weight: 600; font-size: 1.4em; color: var(--text-accent);">${uniqueCount}</div>
                    <div style="color: var(--text-muted); font-size: 0.85em; margin-top: 4px;">Unique Conversations</div>
                </div>
                <div style="text-align: center; padding: 12px; background-color: var(--background-primary); border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
                    <div style="font-weight: 600; font-size: 1.4em; color: var(--color-green);">${info.conversationsNew}</div>
                    <div style="color: var(--text-muted); font-size: 0.85em; margin-top: 4px;">New</div>
                </div>
                <div style="text-align: center; padding: 12px; background-color: var(--background-primary); border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
                    <div style="font-weight: 600; font-size: 1.4em; color: var(--color-orange);">${info.conversationsUpdated}</div>
                    <div style="color: var(--text-muted); font-size: 0.85em; margin-top: 4px;">Updated</div>
                </div>
                <div style="text-align: center; padding: 12px; background-color: var(--background-primary); border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
                    <div style="font-weight: 600; font-size: 1.4em; color: var(--text-muted);">${info.conversationsIgnored}</div>
                    <div style="color: var(--text-muted); font-size: 0.85em; margin-top: 4px;">Unchanged</div>
                </div>
            `;
    }
    return `
            <div style="text-align: center; padding: 12px;">
                <strong>${selectedCount}</strong> of <strong>${totalCount}</strong> selected
            </div>
        `;
  }
  handleImportSelected() {
    const selectedIds = Array.from(this.state.selectedIds);
    if (selectedIds.length === 0) {
      return;
    }
    const result = {
      selectedIds,
      totalAvailable: this.state.allConversations.length,
      mode: "selective"
    };
    this.close();
    this.onSelectionComplete(result);
  }
  formatDate(timestamp) {
    if (!timestamp)
      return "Unknown";
    const date = new Date(timestamp * 1e3);
    return date.toLocaleDateString();
  }
  addCustomStyles() {
    const style = document.createElement("style");
    style.textContent = `
            /* Modal sizing - CRITICAL: Override Obsidian's default constraints */
            .modal.nexus-conversation-selection-dialog {
                max-width: min(1000px, 90vw) !important;
                width: min(1000px, 90vw) !important;
                height: auto !important;
                padding: 0 !important;
            }

            /* Modal title spacing */
            .modal.nexus-conversation-selection-dialog .modal-title {
                padding: 16px 24px !important;
                margin: 0 !important;
            }

            .modal.nexus-conversation-selection-dialog .modal-content {
                max-width: 100% !important;
                width: 100% !important;
                max-height: 85vh;
                overflow-y: visible;
                overflow-x: visible;
                display: flex;
                flex-direction: column;
                padding: 20px 24px 24px 24px;
            }

            /* Table container with independent scroll */
            .nexus-conversation-selection-dialog .nexus-table-container {
                max-height: 450px;
                overflow-y: auto;
                overflow-x: auto;
                border: 1px solid var(--background-modifier-border);
                border-radius: 8px;
                margin-bottom: 20px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }

            /* Table styling */
            .nexus-conversation-selection-dialog table {
                font-size: 0.9em;
                width: 100%;
                min-width: 900px;
                border-collapse: collapse;
            }

            /* Table header - sticky */
            .nexus-conversation-selection-dialog thead {
                position: sticky;
                top: 0;
                z-index: 10;
            }

            .nexus-conversation-selection-dialog th {
                background-color: var(--background-secondary);
                font-weight: 600;
                white-space: nowrap;
                position: sticky;
                top: 0;
            }

            /* Sortable headers */
            .nexus-conversation-selection-dialog th.sortable-header {
                cursor: pointer;
                user-select: none;
                transition: background-color 0.2s;
            }

            .nexus-conversation-selection-dialog th.sortable-header:hover {
                background-color: var(--background-modifier-hover);
            }

            .nexus-conversation-selection-dialog .sort-indicator {
                display: inline-block;
                margin-left: 6px;
                font-size: 0.8em;
                transition: opacity 0.2s;
            }

            /* Table cells */
            .nexus-conversation-selection-dialog td {
                padding: 10px 8px;
                border-bottom: 1px solid var(--background-modifier-border);
                vertical-align: middle;
            }

            /* Title column - allow wrapping */
            .nexus-conversation-selection-dialog th:nth-child(2),
            .nexus-conversation-selection-dialog td:nth-child(2) {
                max-width: 500px;
                white-space: normal;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }

            /* Other columns - no wrapping */
            .nexus-conversation-selection-dialog th:not(:nth-child(2)),
            .nexus-conversation-selection-dialog td:not(:nth-child(2)) {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            /* Row hover effect */
            .nexus-conversation-selection-dialog tbody tr:hover {
                background-color: var(--background-modifier-hover);
                cursor: pointer;
            }

            /* Checkbox column */
            .nexus-conversation-selection-dialog td:first-child {
                text-align: center;
            }

            /* Status badges */
            .nexus-conversation-selection-dialog .status-badge {
                display: inline-block;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 0.85em;
                font-weight: 500;
                text-align: center;
            }

            .nexus-conversation-selection-dialog .status-new {
                background-color: var(--interactive-accent);
                color: var(--text-on-accent);
            }

            .nexus-conversation-selection-dialog .status-updated {
                background-color: var(--text-warning);
                color: var(--text-on-accent);
            }

            .nexus-conversation-selection-dialog .status-unchanged {
                background-color: var(--background-modifier-border);
                color: var(--text-muted);
            }

            /* Select dropdowns */
            .nexus-conversation-selection-dialog select {
                font-size: 14px;
                line-height: 1.4;
                height: auto;
                min-height: 36px;
                background-color: var(--background-primary);
                color: var(--text-normal);
                font-family: var(--font-interface);
                border: 1px solid var(--background-modifier-border);
                border-radius: 4px;
                padding: 8px 12px;
                cursor: pointer;
            }

            .nexus-conversation-selection-dialog select option {
                padding: 4px 8px;
                line-height: 1.4;
            }

            /* Custom select dropdowns with theme-aware arrows */
            .nexus-conversation-selection-dialog .nexus-custom-select {
                appearance: none;
                -webkit-appearance: none;
                -moz-appearance: none;
                padding-right: 32px;
                background-image: linear-gradient(45deg, transparent 50%, var(--text-muted) 50%),
                                  linear-gradient(135deg, var(--text-muted) 50%, transparent 50%);
                background-position: calc(100% - 14px) calc(50% - 2px),
                                     calc(100% - 10px) calc(50% - 2px);
                background-size: 4px 4px,
                                 4px 4px;
                background-repeat: no-repeat;
            }

            /* Buttons */
            .nexus-conversation-selection-dialog button {
                cursor: pointer;
                transition: all 0.2s ease;
            }

            .nexus-conversation-selection-dialog button:hover {
                transform: translateY(-1px);
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            /* Summary section */
            .nexus-conversation-selection-dialog .summary-section {
                background-color: var(--background-secondary);
                padding: 12px 16px;
                border-radius: 8px;
                margin-bottom: 20px;
            }

            /* Controls section */
            .nexus-conversation-selection-dialog .controls-section {
                background-color: var(--background-primary);
                padding: 12px;
                border-radius: 8px;
                border: 1px solid var(--background-modifier-border);
            }

            /* Scrollbar styling for table container */
            .nexus-conversation-selection-dialog .nexus-table-container::-webkit-scrollbar {
                width: 10px;
                height: 10px;
            }

            .nexus-conversation-selection-dialog .nexus-table-container::-webkit-scrollbar-track {
                background: var(--background-secondary);
                border-radius: 5px;
            }

            .nexus-conversation-selection-dialog .nexus-table-container::-webkit-scrollbar-thumb {
                background: var(--background-modifier-border);
                border-radius: 5px;
            }

            .nexus-conversation-selection-dialog .nexus-table-container::-webkit-scrollbar-thumb:hover {
                background: var(--text-muted);
            }
        `;
    document.head.appendChild(style);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
__name(ConversationSelectionDialog, "ConversationSelectionDialog");

// src/dialogs/installation-welcome-dialog.ts
var import_obsidian30 = require("obsidian");
init_kofi_support_box();
var InstallationWelcomeDialog = class extends import_obsidian30.Modal {
  constructor(app, version) {
    super(app);
    this.version = version;
  }
  onOpen() {
    const { contentEl, modalEl, titleEl } = this;
    contentEl.empty();
    modalEl.addClass("nexus-installation-welcome-dialog");
    contentEl.addClass("nexus-installation-welcome-dialog");
    modalEl.style.width = "600px";
    modalEl.style.maxWidth = "90vw";
    titleEl.setText(`Nexus AI Chat Importer ${this.version}`);
    const welcomeSection = contentEl.createDiv("welcome-section");
    welcomeSection.style.cssText = `
            text-align: center;
            margin-bottom: 24px;
        `;
    const welcomeIcon = welcomeSection.createDiv();
    welcomeIcon.innerHTML = "\u{1F389}";
    welcomeIcon.style.cssText = `
            font-size: 48px;
            margin-bottom: 12px;
        `;
    const welcomeTitle = welcomeSection.createEl("h2");
    welcomeTitle.textContent = "Thank you for installing Nexus AI Chat Importer!";
    welcomeTitle.style.cssText = `
            margin: 0 0 12px 0;
            color: var(--text-normal);
        `;
    const welcomeText = welcomeSection.createDiv();
    welcomeText.textContent = "Import and manage your ChatGPT and Claude conversations directly in your Obsidian vault.";
    welcomeText.style.cssText = `
            color: var(--text-muted);
            line-height: 1.6;
            font-size: 1.05em;
        `;
    createKofiSupportBox(contentEl);
    const resourcesSection = contentEl.createDiv("resources-section");
    resourcesSection.style.cssText = `
            margin-top: 24px;
        `;
    const resourcesTitle = resourcesSection.createEl("h3");
    resourcesTitle.textContent = "Resources";
    resourcesTitle.style.cssText = `
            margin: 0 0 16px 0;
            color: var(--text-normal);
            font-size: 1.1em;
        `;
    const resourcesGrid = resourcesSection.createDiv("resources-grid");
    resourcesGrid.style.cssText = `
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        `;
    const resources = [
      {
        icon: "\u{1F4D6}",
        title: "Documentation",
        description: "Learn how to use the plugin",
        url: "https://github.com/superkikim/nexus-ai-chat-importer/blob/1.3.0/README.md"
      },
      {
        icon: "\u{1F4DD}",
        title: "Release Notes",
        description: "What's new in this version",
        url: "https://github.com/superkikim/nexus-ai-chat-importer/blob/1.3.0/RELEASE_NOTES.md"
      },
      {
        icon: "\u{1F41B}",
        title: "Report Issues",
        description: "Found a bug? Let us know",
        url: "https://github.com/superkikim/nexus-ai-chat-importer/issues"
      },
      {
        icon: "\u{1F4AC}",
        title: "Community Forum",
        description: "Join the discussion",
        url: "https://forum.obsidian.md/t/plugin-nexus-ai-chat-importer-import-chatgpt-and-claude-conversations-to-your-vault/71664"
      }
    ];
    resources.forEach((resource) => {
      const card = this.createResourceCard(resourcesGrid, resource);
      resourcesGrid.appendChild(card);
    });
    const buttonContainer = contentEl.createDiv("button-container");
    buttonContainer.style.cssText = `
            display: flex;
            justify-content: center;
            margin-top: 24px;
        `;
    const closeButton = buttonContainer.createEl("button", {
      text: "Get Started"
    });
    closeButton.addClass("mod-cta");
    closeButton.style.cssText = `
            padding: 10px 32px;
            font-size: 1.05em;
        `;
    closeButton.addEventListener("click", () => {
      this.close();
    });
  }
  /**
   * Create a resource card
   */
  createResourceCard(container, resource) {
    const card = container.createEl("a", {
      href: resource.url
    });
    card.style.cssText = `
            display: block;
            padding: 16px;
            border: 1px solid var(--background-modifier-border);
            border-radius: 8px;
            text-decoration: none;
            color: var(--text-normal);
            transition: all 0.2s;
            background: var(--background-secondary);
        `;
    card.addEventListener("mouseenter", () => {
      card.style.borderColor = "var(--interactive-accent)";
      card.style.transform = "translateY(-2px)";
      card.style.boxShadow = "0 4px 12px rgba(0, 0, 0, 0.1)";
    });
    card.addEventListener("mouseleave", () => {
      card.style.borderColor = "var(--background-modifier-border)";
      card.style.transform = "translateY(0)";
      card.style.boxShadow = "none";
    });
    const icon = card.createDiv();
    icon.innerHTML = resource.icon;
    icon.style.cssText = `
            font-size: 32px;
            margin-bottom: 8px;
        `;
    const title = card.createDiv();
    title.textContent = resource.title;
    title.style.cssText = `
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-normal);
        `;
    const description = card.createDiv();
    description.textContent = resource.description;
    description.style.cssText = `
            font-size: 0.9em;
            color: var(--text-muted);
            line-height: 1.4;
        `;
    card.addEventListener("click", (e) => {
      e.preventDefault();
      window.open(resource.url, "_blank");
    });
    return card;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
__name(InstallationWelcomeDialog, "InstallationWelcomeDialog");

// src/services/conversation-metadata-extractor.ts
init_utils();
var ConversationMetadataExtractor = class {
  constructor(providerRegistry, plugin) {
    this.providerRegistry = providerRegistry;
    this.plugin = plugin;
  }
  /**
   * Extract conversation metadata from ZIP file
   */
  async extractMetadataFromZip(zip, forcedProvider, sourceFileName, sourceFileIndex, existingConversations) {
    try {
      const rawConversations = await this.extractRawConversationsFromZip(zip);
      if (rawConversations.length === 0) {
        return [];
      }
      const provider = forcedProvider || this.providerRegistry.detectProvider(rawConversations);
      if (provider === "unknown") {
        throw new Error("Could not detect conversation provider from data structure");
      }
      const metadata = this.extractMetadataByProvider(rawConversations, provider);
      return metadata.map((conv) => {
        const enhanced = {
          ...conv,
          sourceFile: sourceFileName,
          sourceFileIndex
        };
        if (existingConversations) {
          const existing = existingConversations.get(conv.id);
          if (existing) {
            enhanced.existingUpdateTime = existing.updateTime;
            const comparison = compareTimestampsIgnoringSeconds(conv.updateTime, existing.updateTime);
            if (comparison > 0) {
              enhanced.existenceStatus = "updated";
              enhanced.hasNewerContent = true;
            } else {
              enhanced.existenceStatus = "unchanged";
              enhanced.hasNewerContent = false;
            }
          } else {
            enhanced.existenceStatus = "new";
            enhanced.hasNewerContent = true;
          }
        } else {
          enhanced.existenceStatus = "unknown";
        }
        return enhanced;
      });
    } catch (error) {
      throw new Error(`Failed to extract conversation metadata: ${error instanceof Error ? error.message : String(error)}`);
    }
  }
  /**
   * Extract raw conversation data from ZIP (provider-agnostic)
   */
  async extractRawConversationsFromZip(zip) {
    const conversationsFile = zip.file("conversations.json");
    if (!conversationsFile) {
      throw new Error("Missing conversations.json file in ZIP archive");
    }
    const conversationsJson = await conversationsFile.async("string");
    const parsedData = JSON.parse(conversationsJson);
    if (Array.isArray(parsedData)) {
      return parsedData;
    } else if (parsedData.conversations && Array.isArray(parsedData.conversations)) {
      return parsedData.conversations;
    } else {
      throw new Error("Invalid conversations.json structure");
    }
  }
  /**
   * Extract metadata based on detected provider
   */
  extractMetadataByProvider(rawConversations, provider) {
    switch (provider) {
      case "chatgpt":
        return this.extractChatGPTMetadata(rawConversations);
      case "claude":
        return this.extractClaudeMetadata(rawConversations);
      default:
        throw new Error(`Unsupported provider: ${provider}`);
    }
  }
  /**
   * Extract metadata from ChatGPT conversations
   */
  extractChatGPTMetadata(conversations) {
    return conversations.filter((chat) => {
      if (!chat.id || chat.id.trim() === "") {
        logger.warn("Skipping ChatGPT conversation with missing ID:", chat.title || "Untitled");
        return false;
      }
      if (!chat.create_time || !chat.update_time) {
        logger.warn("Skipping ChatGPT conversation with missing timestamps:", chat.id, chat.title || "Untitled");
        return false;
      }
      return true;
    }).map((chat) => ({
      id: chat.id,
      title: chat.title || "Untitled",
      createTime: chat.create_time,
      updateTime: chat.update_time,
      messageCount: this.countChatGPTMessages(chat),
      provider: "chatgpt",
      isStarred: chat.is_starred || false,
      isArchived: chat.is_archived || false
    })).filter((metadata) => {
      if (metadata.messageCount === 0) {
        return false;
      }
      return true;
    });
  }
  /**
   * Extract metadata from Claude conversations
   */
  extractClaudeMetadata(conversations) {
    return conversations.filter((chat) => {
      if (!chat.uuid || chat.uuid.trim() === "") {
        logger.warn("Skipping Claude conversation with missing UUID:", chat.name || "Untitled");
        return false;
      }
      if (!chat.created_at || !chat.updated_at) {
        logger.warn("Skipping Claude conversation with missing timestamps:", chat.uuid, chat.name || "Untitled");
        return false;
      }
      return true;
    }).map((chat) => ({
      id: chat.uuid,
      title: chat.name || "Untitled",
      createTime: Math.floor(new Date(chat.created_at).getTime() / 1e3),
      updateTime: Math.floor(new Date(chat.updated_at).getTime() / 1e3),
      messageCount: this.countClaudeMessages(chat),
      provider: "claude",
      isStarred: chat.is_starred || false,
      isArchived: false
      // Claude doesn't have archived status
    })).filter((metadata) => {
      if (metadata.messageCount === 0) {
        return false;
      }
      return true;
    });
  }
  /**
   * Count messages in ChatGPT conversation (lightweight version)
   */
  countChatGPTMessages(chat) {
    if (!chat.mapping) {
      return 0;
    }
    let count = 0;
    for (const messageObj of Object.values(chat.mapping)) {
      const message = messageObj == null ? void 0 : messageObj.message;
      if (!message)
        continue;
      if (this.shouldIncludeChatGPTMessage(message)) {
        count++;
      }
    }
    return count;
  }
  /**
   * Count messages in Claude conversation (lightweight version)
   */
  countClaudeMessages(chat) {
    if (!chat.chat_messages || !Array.isArray(chat.chat_messages)) {
      return 0;
    }
    let count = 0;
    for (const message of chat.chat_messages) {
      if (this.shouldIncludeClaudeMessage(message)) {
        count++;
      }
    }
    return count;
  }
  /**
   * Lightweight version of ChatGPT message filtering
   */
  shouldIncludeChatGPTMessage(message) {
    var _a;
    if (!message || !message.author) {
      return false;
    }
    if (message.author.role === "system" || message.author.role === "tool") {
      return false;
    }
    if (((_a = message.metadata) == null ? void 0 : _a.is_visually_hidden_from_conversation) === true) {
      return false;
    }
    return isValidMessage(message);
  }
  /**
   * Lightweight version of Claude message filtering
   */
  shouldIncludeClaudeMessage(message) {
    if (!message || !message.uuid || !message.sender) {
      return false;
    }
    return message.sender === "human" || message.sender === "assistant";
  }
  /**
   * Extract metadata from multiple ZIP files (for multi-file selective import)
   * Follows the same logic as the working import process:
   * 1. Process files chronologically
   * 2. Build map of best versions per conversation ID
   * 3. Compare with vault and filter out unchanged conversations
   * 4. Only return NEW and UPDATED conversations for selection
   */
  async extractMetadataFromMultipleZips(files, forcedProvider, existingConversations) {
    const conversationMap = /* @__PURE__ */ new Map();
    const allConversationsFound = [];
    const fileStatsMap = /* @__PURE__ */ new Map();
    const conversationToFileMap = /* @__PURE__ */ new Map();
    for (let i = 0; i < files.length; i++) {
      const file = files[i];
      try {
        const JSZip2 = (await Promise.resolve().then(() => __toESM(require_jszip_min()))).default;
        const zip = new JSZip2();
        const zipContent = await zip.loadAsync(file);
        const metadata = await this.extractMetadataFromZip(
          zipContent,
          forcedProvider,
          file.name,
          i,
          void 0
          // Don't compare with vault yet
        );
        allConversationsFound.push(...metadata);
        const totalInFile = metadata.length;
        let duplicatesInFile = 0;
        let uniqueFromFile = 0;
        for (const conversation of metadata) {
          const existing = conversationMap.get(conversation.id);
          if (!existing) {
            uniqueFromFile++;
            conversationMap.set(conversation.id, conversation);
            conversationToFileMap.set(conversation.id, file.name);
          } else {
            let shouldReplace = false;
            const comparison = compareTimestampsIgnoringSeconds(conversation.updateTime, existing.updateTime);
            if (comparison > 0) {
              shouldReplace = true;
            } else if (comparison === 0) {
              const currentFileIndex = conversation.sourceFileIndex || 0;
              const existingFileIndex = existing.sourceFileIndex || 0;
              if (currentFileIndex > existingFileIndex) {
                shouldReplace = true;
              }
            }
            if (shouldReplace) {
              const oldFileName = conversationToFileMap.get(conversation.id);
              const oldFileStats = fileStatsMap.get(oldFileName);
              if (oldFileStats) {
                oldFileStats.uniqueContributed--;
                oldFileStats.duplicates++;
              }
              uniqueFromFile++;
              conversationMap.set(conversation.id, conversation);
              conversationToFileMap.set(conversation.id, file.name);
            } else {
              duplicatesInFile++;
            }
          }
        }
        fileStatsMap.set(file.name, {
          fileName: file.name,
          totalConversations: totalInFile,
          duplicates: duplicatesInFile,
          uniqueContributed: uniqueFromFile,
          selectedForImport: 0,
          newConversations: 0,
          updatedConversations: 0,
          skippedConversations: 0
        });
      } catch (error) {
        logger.error(`Error extracting metadata from ${file.name}:`, error);
      }
    }
    const filterResult = this.filterConversationsForSelection(
      Array.from(conversationMap.values()),
      existingConversations
    );
    for (const conversation of filterResult.conversations) {
      const fileName = conversation.sourceFile;
      if (fileName && fileStatsMap.has(fileName)) {
        const stats = fileStatsMap.get(fileName);
        stats.selectedForImport++;
        if (conversation.existenceStatus === "new") {
          stats.newConversations++;
        } else if (conversation.existenceStatus === "updated") {
          stats.updatedConversations++;
        }
      }
    }
    for (const conversation of filterResult.ignoredConversations) {
      const fileName = conversation.sourceFile;
      if (fileName && fileStatsMap.has(fileName)) {
        const stats = fileStatsMap.get(fileName);
        stats.skippedConversations++;
      }
    }
    const analysisInfo = {
      totalConversationsFound: allConversationsFound.length,
      uniqueConversationsKept: conversationMap.size,
      duplicatesRemoved: allConversationsFound.length - conversationMap.size,
      hasMultipleFiles: files.length > 1,
      conversationsNew: filterResult.newCount,
      conversationsUpdated: filterResult.updatedCount,
      conversationsIgnored: filterResult.ignoredCount
    };
    return {
      conversations: filterResult.conversations,
      analysisInfo,
      fileStats: fileStatsMap
    };
  }
  /**
   * @deprecated - Old deduplication methods, replaced by new chronological approach
   * Kept for compatibility but no longer used in the main flow
   */
  deduplicateConversations(conversations) {
    return conversations;
  }
  /**
   * Filter conversations for selection dialog (same logic as working import process)
   * Only returns NEW and UPDATED conversations - filters out UNCHANGED completely
   */
  filterConversationsForSelection(bestVersions, existingConversations) {
    const conversationsForSelection = [];
    const ignoredConversations = [];
    let newCount = 0;
    let updatedCount = 0;
    let ignoredCount = 0;
    for (const conversation of bestVersions) {
      if (!existingConversations) {
        conversation.existenceStatus = "new";
        conversation.hasNewerContent = true;
        conversationsForSelection.push(conversation);
        newCount++;
        continue;
      }
      const vaultConversation = existingConversations.get(conversation.id);
      if (!vaultConversation) {
        conversation.existenceStatus = "new";
        conversation.hasNewerContent = true;
        conversationsForSelection.push(conversation);
        newCount++;
      } else {
        conversation.existingUpdateTime = vaultConversation.updateTime;
        const { moment: moment3 } = require("obsidian");
        const zipUpdateTimeISO = new Date(conversation.updateTime * 1e3).toISOString();
        const normalizedZipUpdateTime = moment3(zipUpdateTimeISO, moment3.ISO_8601, true).unix();
        const comparison = compareTimestampsIgnoringSeconds(normalizedZipUpdateTime, vaultConversation.updateTime);
        if (comparison > 0) {
          conversation.existenceStatus = "updated";
          conversation.hasNewerContent = true;
          conversationsForSelection.push(conversation);
          updatedCount++;
        } else {
          conversation.existenceStatus = "unchanged";
          ignoredConversations.push(conversation);
          ignoredCount++;
        }
      }
    }
    return {
      conversations: conversationsForSelection,
      ignoredConversations,
      newCount,
      updatedCount,
      ignoredCount
    };
  }
  /**
   * @deprecated - Old deduplication logic, replaced by new chronological approach
   */
  ensureCorrectExistenceStatus(keptConversation, currentConversation, existingConversation) {
    return keptConversation;
  }
  /**
   * Get total conversation count from ZIP without extracting all metadata
   */
  async getConversationCount(zip) {
    try {
      const rawConversations = await this.extractRawConversationsFromZip(zip);
      return rawConversations.length;
    } catch (error) {
      return 0;
    }
  }
};
__name(ConversationMetadataExtractor, "ConversationMetadataExtractor");

// src/dialogs/import-completion-dialog.ts
var import_obsidian31 = require("obsidian");
init_kofi_support_box();
var ImportCompletionDialog = class extends import_obsidian31.Modal {
  constructor(app, stats, reportFilePath) {
    super(app);
    this.stats = stats;
    this.reportFilePath = reportFilePath;
  }
  onOpen() {
    const { contentEl, modalEl, titleEl } = this;
    contentEl.empty();
    modalEl.addClass("nexus-import-completion-dialog");
    contentEl.addClass("nexus-import-completion-dialog");
    titleEl.setText("Import Completed");
    const successMsg = contentEl.createDiv("success-message");
    successMsg.style.textAlign = "center";
    successMsg.style.marginBottom = "20px";
    successMsg.style.fontSize = "1.1em";
    successMsg.style.color = "var(--color-green)";
    successMsg.innerHTML = "\u2705 Successfully imported conversations";
    this.createStatsSection(contentEl);
    if (this.stats.attachmentsTotal > 0) {
      this.createAttachmentsSection(contentEl);
    }
    this.createReportSection(contentEl);
    createKofiSupportBox(contentEl);
    this.createActionButtons(contentEl);
    this.addCustomStyles();
  }
  createStatsSection(container) {
    const section = container.createDiv("stats-section");
    section.style.marginBottom = "20px";
    section.style.display = "grid";
    section.style.gridTemplateColumns = "repeat(3, 1fr)";
    section.style.gap = "12px";
    this.createStatCartouche(section, "\u{1F4C1}", this.stats.totalFiles.toString(), "ZIP Files Processed");
    this.createStatCartouche(section, "\u{1F4AC}", this.stats.totalConversations.toString(), "Unique Conversations");
    this.createStatCartouche(section, "\u{1F501}", this.stats.duplicates.toString(), "Duplicates", "var(--text-muted)");
    this.createStatCartouche(section, "\u2728", this.stats.created.toString(), "New", "var(--color-green)");
    this.createStatCartouche(section, "\u{1F504}", this.stats.updated.toString(), "Updated", "var(--color-orange)");
    this.createStatCartouche(section, "\u23ED\uFE0F", this.stats.skipped.toString(), "Skipped", "var(--text-muted)");
    if (this.stats.failed > 0) {
      this.createStatCartouche(section, "\u274C", this.stats.failed.toString(), "Failed", "var(--color-red)");
    }
  }
  createStatCartouche(container, icon, value, label, color) {
    const cartouche = container.createDiv("stat-cartouche");
    cartouche.style.textAlign = "center";
    cartouche.style.padding = "12px";
    cartouche.style.backgroundColor = "var(--background-primary)";
    cartouche.style.borderRadius = "8px";
    cartouche.style.boxShadow = "0 2px 4px rgba(0, 0, 0, 0.1)";
    const iconEl = cartouche.createDiv();
    iconEl.textContent = icon;
    iconEl.style.fontSize = "1.5em";
    iconEl.style.marginBottom = "4px";
    const valueEl = cartouche.createDiv();
    valueEl.textContent = value;
    valueEl.style.fontWeight = "600";
    valueEl.style.fontSize = "1.4em";
    valueEl.style.color = color || "var(--text-accent)";
    valueEl.style.marginBottom = "4px";
    const labelEl = cartouche.createDiv();
    labelEl.textContent = label;
    labelEl.style.fontSize = "0.85em";
    labelEl.style.color = "var(--text-muted)";
  }
  createAttachmentsSection(container) {
    const section = container.createDiv("attachments-section");
    section.style.marginBottom = "20px";
    section.style.padding = "12px";
    section.style.backgroundColor = "var(--background-secondary)";
    section.style.borderRadius = "6px";
    section.style.textAlign = "center";
    const percentage = Math.round(this.stats.attachmentsFound / this.stats.attachmentsTotal * 100);
    const icon = percentage === 100 ? "\u2705" : percentage > 50 ? "\u26A0\uFE0F" : "\u274C";
    const color = percentage === 100 ? "var(--color-green)" : percentage > 50 ? "var(--color-orange)" : "var(--color-red)";
    const attachmentText = section.createDiv();
    attachmentText.innerHTML = `${icon} <strong>Attachments:</strong> ${this.stats.attachmentsFound}/${this.stats.attachmentsTotal} extracted (${percentage}%)`;
    attachmentText.style.color = color;
    if (this.stats.attachmentsMissing > 0 || this.stats.attachmentsFailed > 0) {
      const details = section.createDiv();
      details.style.fontSize = "0.85em";
      details.style.color = "var(--text-muted)";
      details.style.marginTop = "4px";
      details.textContent = `${this.stats.attachmentsMissing} missing, ${this.stats.attachmentsFailed} failed`;
    }
  }
  createReportSection(container) {
    const section = container.createDiv("report-section");
    section.style.marginBottom = "20px";
    section.style.padding = "12px";
    section.style.backgroundColor = "var(--background-secondary)";
    section.style.borderRadius = "6px";
    const label = section.createDiv();
    label.textContent = "\u{1F4C4} Detailed report:";
    label.style.fontSize = "0.9em";
    label.style.color = "var(--text-muted)";
    label.style.marginBottom = "6px";
    const link = section.createEl("a");
    link.textContent = this.reportFilePath;
    link.style.color = "var(--text-accent)";
    link.style.textDecoration = "none";
    link.style.cursor = "pointer";
    link.addEventListener("click", (e) => {
      e.preventDefault();
      this.openReport();
    });
    link.addEventListener("mouseenter", () => {
      link.style.textDecoration = "underline";
    });
    link.addEventListener("mouseleave", () => {
      link.style.textDecoration = "none";
    });
  }
  createActionButtons(container) {
    const buttonContainer = container.createDiv("action-buttons");
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "10px";
    buttonContainer.style.marginTop = "20px";
    const viewReportBtn = buttonContainer.createEl("button", { text: "View Report" });
    viewReportBtn.style.padding = "8px 16px";
    viewReportBtn.addEventListener("click", () => {
      this.openReport();
      this.close();
    });
    const okBtn = buttonContainer.createEl("button", { text: "OK" });
    okBtn.classList.add("mod-cta");
    okBtn.style.padding = "8px 16px";
    okBtn.addEventListener("click", () => this.close());
  }
  async openReport() {
    try {
      const file = this.app.vault.getAbstractFileByPath(this.reportFilePath);
      if (file) {
        await this.app.workspace.getLeaf(false).openFile(file);
      }
    } catch (error) {
      logger.error("Failed to open report:", error);
    }
  }
  addCustomStyles() {
    const style = document.createElement("style");
    style.textContent = `
            /* Modal sizing */
            .modal.nexus-import-completion-dialog {
                max-width: min(700px, 90vw) !important;
                width: min(700px, 90vw) !important;
            }

            /* Modal title spacing */
            .modal.nexus-import-completion-dialog .modal-title {
                padding: 16px 24px !important;
                margin: 0 !important;
            }

            .modal.nexus-import-completion-dialog .modal-content {
                padding: 20px 24px 24px 24px;
            }

            /* Stat cartouches hover effect */
            .nexus-import-completion-dialog .stat-cartouche {
                transition: transform 0.2s, box-shadow 0.2s;
            }

            .nexus-import-completion-dialog .stat-cartouche:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            }

            /* Button hover effects */
            .nexus-import-completion-dialog button {
                cursor: pointer;
                transition: all 0.2s ease;
            }

            .nexus-import-completion-dialog button:hover {
                transform: translateY(-1px);
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
        `;
    document.head.appendChild(style);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
__name(ImportCompletionDialog, "ImportCompletionDialog");

// src/main.ts
init_utils();
var NexusAiChatImporterPlugin = class extends import_obsidian32.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    this.logger = new Logger();
    this.storageService = new StorageService(this);
    this.importService = new ImportService(this);
    this.fileService = new FileService(this);
    this.commandRegistry = new CommandRegistry(this);
    this.eventHandlers = new EventHandlers(this);
    this.upgradeManager = new IncrementalUpgradeManager(this);
  }
  async onload() {
    try {
      await this.loadSettings();
      this.addSettingTab(new NexusAiChatImporterPluginSettingTab(this.app, this));
      this.commandRegistry.registerCommands();
      this.eventHandlers.registerEvents();
      const ribbonIconEl = this.addRibbonIcon(
        "message-square-plus",
        "Nexus AI Chat Importer - Import new file",
        () => this.showProviderSelectionDialog()
      );
      ribbonIconEl.addClass("nexus-ai-chat-ribbon");
      const upgradeResult = await this.upgradeManager.checkAndPerformUpgrade();
      if (upgradeResult == null ? void 0 : upgradeResult.isFreshInstall) {
        new InstallationWelcomeDialog(this.app, this.manifest.version).open();
      }
    } catch (error) {
      this.logger.error("Plugin loading failed:", error);
      throw error;
    }
  }
  async onunload() {
    try {
      this.eventHandlers.cleanup();
      await this.saveSettings();
    } catch (error) {
      this.logger.error("Plugin unloading failed:", error);
    }
  }
  async loadSettings() {
    try {
      const data = await this.loadData();
      this.settings = Object.assign({}, DEFAULT_SETTINGS, (data == null ? void 0 : data.settings) || {});
      const currentVersion = this.manifest.version;
      const storedCurrentVersion = this.settings.currentVersion;
      if (!storedCurrentVersion || storedCurrentVersion === "0.0.0") {
        const hasExistingConversations = await this.hasExistingNexusConversations();
        if (hasExistingConversations) {
          this.settings.previousVersion = "1.0.x";
          this.settings.currentVersion = currentVersion;
        } else {
          this.settings.previousVersion = currentVersion;
          this.settings.currentVersion = currentVersion;
        }
        await this.saveSettings();
      } else if (storedCurrentVersion !== currentVersion) {
        this.settings.previousVersion = storedCurrentVersion;
        this.settings.currentVersion = currentVersion;
        await this.saveSettings();
      }
      await this.storageService.loadData();
    } catch (error) {
      this.logger.error("loadSettings failed:", error);
      throw error;
    }
  }
  /**
   * Check if vault contains existing Nexus conversations
   */
  async hasExistingNexusConversations() {
    try {
      const files = this.app.vault.getMarkdownFiles();
      return files.some((file) => {
        var _a;
        const frontmatter = (_a = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
        return (frontmatter == null ? void 0 : frontmatter.nexus) === this.manifest.id;
      });
    } catch (error) {
      this.logger.warn("Error checking for existing conversations:", error);
      return false;
    }
  }
  async saveSettings() {
    try {
      const existingData = await this.loadData() || {};
      let finalImportedArchives = this.storageService.getImportedArchives();
      if (existingData.importedArchives && Object.keys(existingData.importedArchives).length > 0) {
        const existingArchives = existingData.importedArchives;
        const storageArchives = this.storageService.getImportedArchives();
        finalImportedArchives = {
          ...existingArchives,
          ...storageArchives
        };
      }
      const mergedData = {
        ...existingData,
        settings: this.settings,
        importedArchives: finalImportedArchives,
        upgradeHistory: existingData.upgradeHistory || {
          completedUpgrades: {},
          completedOperations: {}
        }
      };
      await this.storageService.saveData(mergedData);
    } catch (error) {
      this.logger.error("saveSettings failed:", error);
    }
  }
  async resetCatalogs() {
    try {
      await this.storageService.resetCatalogs();
      await this.loadSettings();
    } catch (error) {
      this.logger.error("resetCatalogs failed:", error);
    }
  }
  getStorageService() {
    return this.storageService;
  }
  getImportService() {
    return this.importService;
  }
  getFileService() {
    return this.fileService;
  }
  getUpgradeManager() {
    return this.upgradeManager;
  }
  /**
   * Show provider selection dialog and then file selection
   * Ensures migration is complete before allowing import
   */
  async showProviderSelectionDialog() {
    const upgradeResult = await this.upgradeManager.checkAndPerformUpgrade();
    if (upgradeResult !== null && !upgradeResult.success) {
      return;
    }
    const providerRegistry = createProviderRegistry(this);
    new ProviderSelectionDialog(
      this.app,
      providerRegistry,
      (selectedProvider) => {
        this.showEnhancedFileSelectionDialog(selectedProvider);
      }
    ).open();
  }
  /**
   * Show enhanced file selection dialog with import mode choice
   */
  showEnhancedFileSelectionDialog(provider) {
    new EnhancedFileSelectionDialog(
      this.app,
      provider,
      (result) => {
        this.handleFileSelectionResult(result);
      },
      this
    ).open();
  }
  /**
   * Handle the result from enhanced file selection dialog
   */
  async handleFileSelectionResult(result) {
    const { files, mode, provider } = result;
    if (files.length === 0) {
      return;
    }
    const sortedFiles = this.sortFilesByTimestamp(files);
    if (mode === "all") {
      await this.handleImportAll(sortedFiles, provider);
    } else {
      await this.handleSelectiveImport(sortedFiles, provider);
    }
  }
  /**
   * Handle "Import All" mode with analysis and auto-selection
   */
  async handleImportAll(files, provider) {
    var _a, _b, _c, _d;
    try {
      new import_obsidian32.Notice(`Analyzing conversations from ${files.length} file(s)...`);
      const providerRegistry = createProviderRegistry(this);
      const metadataExtractor = new ConversationMetadataExtractor(providerRegistry, this);
      const storage = this.getStorageService();
      const existingConversations = await storage.scanExistingConversations();
      const extractionResult = await metadataExtractor.extractMetadataFromMultipleZips(
        files,
        provider,
        existingConversations
      );
      const operationReport = new ImportReport();
      if (this.settings.useCustomMessageTimestampFormat) {
        operationReport.setCustomTimestampFormat(this.settings.messageTimestampFormat);
      }
      if (extractionResult.conversations.length === 0) {
        new import_obsidian32.Notice("No new or updated conversations found. All conversations are already up to date.");
        const reportPath2 = await this.writeConsolidatedReport(operationReport, provider, files, extractionResult.analysisInfo, extractionResult.fileStats, false);
        if (reportPath2) {
          this.showImportCompletionDialog(operationReport, reportPath2);
        }
        return;
      }
      const allIds = extractionResult.conversations.map((c) => c.id);
      const newCount = (_b = (_a = extractionResult.analysisInfo) == null ? void 0 : _a.conversationsNew) != null ? _b : 0;
      const updatedCount = (_d = (_c = extractionResult.analysisInfo) == null ? void 0 : _c.conversationsUpdated) != null ? _d : 0;
      new import_obsidian32.Notice(`Importing ${allIds.length} conversations (${newCount} new, ${updatedCount} updated)...`);
      const conversationsByFile = /* @__PURE__ */ new Map();
      extractionResult.conversations.forEach((conv) => {
        if (conv.sourceFile) {
          if (!conversationsByFile.has(conv.sourceFile)) {
            conversationsByFile.set(conv.sourceFile, []);
          }
          conversationsByFile.get(conv.sourceFile).push(conv.id);
        }
      });
      if (provider === "chatgpt" && files.length > 1) {
        await this.importService.buildAttachmentMapForMultiZip(files);
      }
      for (const file of files) {
        const conversationsForFile = conversationsByFile.get(file.name);
        if (conversationsForFile && conversationsForFile.length > 0) {
          try {
            await this.importService.handleZipFile(file, provider, conversationsForFile, operationReport);
          } catch (error) {
            this.logger.error(`Error processing file ${file.name}:`, error);
          }
        }
      }
      if (provider === "chatgpt" && files.length > 1) {
        this.importService.clearAttachmentMap();
      }
      const reportPath = await this.writeConsolidatedReport(operationReport, provider, files, extractionResult.analysisInfo, extractionResult.fileStats, false);
      if (reportPath) {
        this.showImportCompletionDialog(operationReport, reportPath);
      } else {
        new import_obsidian32.Notice(`Import completed. ${operationReport.getCreatedCount()} created, ${operationReport.getUpdatedCount()} updated.`);
      }
    } catch (error) {
      this.logger.error("[IMPORT-ALL] Error in import all:", error);
      if (error instanceof Error) {
        this.logger.error("[IMPORT-ALL] Error message:", error.message);
        this.logger.error("[IMPORT-ALL] Error name:", error.name);
        this.logger.error("[IMPORT-ALL] Error stack:", error.stack);
      } else {
        this.logger.error("[IMPORT-ALL] Error (not Error instance):", String(error));
      }
      new import_obsidian32.Notice(`Error during import: ${error instanceof Error ? error.message : String(error)}`);
    }
  }
  /**
   * Handle selective import workflow
   */
  async handleSelectiveImport(files, provider) {
    try {
      new import_obsidian32.Notice(`Analyzing conversations from ${files.length} file(s)...`);
      const providerRegistry = createProviderRegistry(this);
      const metadataExtractor = new ConversationMetadataExtractor(providerRegistry, this);
      const storage = this.getStorageService();
      const existingConversations = await storage.scanExistingConversations();
      const extractionResult = await metadataExtractor.extractMetadataFromMultipleZips(
        files,
        provider,
        existingConversations
      );
      if (extractionResult.conversations.length === 0) {
        new import_obsidian32.Notice("No conversations found in the selected files.");
        return;
      }
      new ConversationSelectionDialog(
        this.app,
        extractionResult.conversations,
        (result) => {
          this.handleConversationSelectionResult(result, files, provider, extractionResult.analysisInfo, extractionResult.fileStats);
        },
        this,
        extractionResult.analysisInfo
      ).open();
    } catch (error) {
      this.logger.error("[SELECTIVE-IMPORT] Error in selective import:", error);
      this.logger.error("[SELECTIVE-IMPORT] Full error details:", error);
      if (error instanceof Error) {
        this.logger.error("[SELECTIVE-IMPORT] Error stack:", error.stack);
      }
      new import_obsidian32.Notice(`Error analyzing conversations: ${error instanceof Error ? error.message : String(error)}`);
    }
  }
  /**
   * Handle the result from conversation selection dialog
   */
  async handleConversationSelectionResult(result, files, provider, analysisInfo, fileStats) {
    const operationReport = new ImportReport();
    if (this.settings.useCustomMessageTimestampFormat) {
      operationReport.setCustomTimestampFormat(this.settings.messageTimestampFormat);
    }
    if (result.selectedIds.length === 0) {
      new import_obsidian32.Notice("No conversations selected for import.");
      const reportPath2 = await this.writeConsolidatedReport(operationReport, provider, files, analysisInfo, fileStats, true);
      if (reportPath2) {
        this.showImportCompletionDialog(operationReport, reportPath2);
      }
      return;
    }
    new import_obsidian32.Notice(`Importing ${result.selectedIds.length} selected conversations from ${files.length} file(s)...`);
    const conversationsByFile = await this.groupConversationsByFile(result, files);
    if (provider === "chatgpt" && files.length > 1) {
      try {
        await this.importService.buildAttachmentMapForMultiZip(files);
      } catch (error) {
        this.logger.error("Failed to build attachment map:", error);
        new import_obsidian32.Notice("Failed to build attachment map. Check console for details.");
      }
    }
    for (const file of files) {
      const conversationsForFile = conversationsByFile.get(file.name);
      if (conversationsForFile && conversationsForFile.length > 0) {
        try {
          await this.importService.handleZipFile(file, provider, conversationsForFile, operationReport);
        } catch (error) {
          this.logger.error(`Error processing file ${file.name}:`, error);
          new import_obsidian32.Notice(`Error processing ${file.name}. Check console for details.`);
        }
      }
    }
    if (provider === "chatgpt" && files.length > 1) {
      this.importService.clearAttachmentMap();
    }
    const reportPath = await this.writeConsolidatedReport(operationReport, provider, files, analysisInfo, fileStats, true);
    if (reportPath) {
      this.showImportCompletionDialog(operationReport, reportPath);
    } else {
      new import_obsidian32.Notice(`Import completed. ${operationReport.getCreatedCount()} created, ${operationReport.getUpdatedCount()} updated.`);
    }
  }
  /**
   * Write consolidated report for multi-file import
   */
  async writeConsolidatedReport(report, provider, files, analysisInfo, fileStats, isSelectiveImport) {
    const reportFolder = this.settings.reportFolder;
    const providerRegistry = createProviderRegistry(this);
    const adapter = providerRegistry.getAdapter(provider);
    let providerName = provider;
    if (adapter) {
      const strategy = adapter.getReportNamingStrategy();
      providerName = strategy.getProviderName();
      const columnInfo = strategy.getProviderSpecificColumn();
      report.setProviderSpecificColumnHeader(columnInfo.header);
    }
    const folderPath = `${reportFolder}/${providerName}`;
    const folderResult = await ensureFolderExists(folderPath, this.app.vault);
    if (!folderResult.success) {
      this.logger.error(`Failed to create or access log folder: ${folderPath}`, folderResult.error);
      new import_obsidian32.Notice("Failed to create log file. Check console for details.");
      return "";
    }
    const now = Date.now() / 1e3;
    const datePrefix = formatTimestamp(now, "prefix");
    const timeStr = formatTimestamp(now, "time").replace(/:/g, "").replace(/ /g, "");
    let logFilePath = `${folderPath}/${datePrefix}-${timeStr} - import report.md`;
    let counter = 2;
    while (await this.app.vault.adapter.exists(logFilePath)) {
      logFilePath = `${folderPath}/${datePrefix}-${timeStr}-${counter} - import report.md`;
      counter++;
    }
    const currentDate = new Date().toISOString();
    if (fileStats) {
      report.setFileStats(fileStats);
    }
    if (analysisInfo) {
      report.setAnalysisInfo(analysisInfo);
    }
    const stats = report.getCompletionStats();
    const processedFiles = [];
    const skippedFiles = [];
    if (stats.totalFiles > 0) {
      report.getProcessedFileNames().forEach((name) => processedFiles.push(name));
    }
    files.forEach((file) => {
      if (!processedFiles.includes(file.name)) {
        skippedFiles.push(file.name);
      }
    });
    const logContent = `---
importdate: ${currentDate}
provider: ${provider}
totalFilesAnalyzed: ${files.length}
totalFilesProcessed: ${processedFiles.length}
totalFilesSkipped: ${skippedFiles.length}
totalConversations: ${stats.totalConversations}
totalCreated: ${stats.created}
totalUpdated: ${stats.updated}
totalSkipped: ${stats.skipped}
totalFailed: ${stats.failed}
---

${report.generateReportContent(files, processedFiles, skippedFiles, analysisInfo, fileStats, isSelectiveImport)}
`;
    try {
      await this.app.vault.create(logFilePath, logContent);
      return logFilePath;
    } catch (error) {
      this.logger.error(`Failed to write import log to ${logFilePath}:`, error);
      this.logger.error("Full error:", error);
      this.logger.error("Log content length:", logContent.length);
      new import_obsidian32.Notice("Failed to create log file. Check console for details.");
      return "";
    }
  }
  /**
   * Show import completion dialog
   */
  showImportCompletionDialog(report, reportPath) {
    const stats = report.getCompletionStats();
    new ImportCompletionDialog(
      this.app,
      stats,
      reportPath
    ).open();
  }
  /**
   * Group selected conversations by their source file for multi-file import
   */
  async groupConversationsByFile(result, files) {
    const conversationsByFile = /* @__PURE__ */ new Map();
    try {
      const providerRegistry = createProviderRegistry(this);
      const metadataExtractor = new ConversationMetadataExtractor(providerRegistry, this);
      const storage = this.getStorageService();
      const existingConversations = await storage.scanExistingConversations();
      const extractionResult = await metadataExtractor.extractMetadataFromMultipleZips(
        files,
        void 0,
        // Let it auto-detect provider
        existingConversations
      );
      const selectedIdsSet = new Set(result.selectedIds);
      for (const conversation of extractionResult.conversations) {
        if (selectedIdsSet.has(conversation.id) && conversation.sourceFile) {
          const fileConversations = conversationsByFile.get(conversation.sourceFile) || [];
          fileConversations.push(conversation.id);
          conversationsByFile.set(conversation.sourceFile, fileConversations);
        }
      }
    } catch (error) {
      this.logger.error("Error grouping conversations by file:", error);
      conversationsByFile.set(files[0].name, result.selectedIds);
    }
    return conversationsByFile;
  }
  /**
   * Sort files by timestamp (same logic as ImportService)
   */
  sortFilesByTimestamp(files) {
    return files.sort((a, b) => {
      const timestampRegex = /(\d{4}-\d{2}-\d{2}-\d{2}-\d{2}-\d{2})/;
      const getTimestamp = /* @__PURE__ */ __name((filename) => {
        const match = filename.match(timestampRegex);
        if (!match) {
          this.logger.warn(`No timestamp found in filename: ${filename}`);
          return "0";
        }
        return match[1];
      }, "getTimestamp");
      return getTimestamp(a.name).localeCompare(getTimestamp(b.name));
    });
  }
};
__name(NexusAiChatImporterPlugin, "NexusAiChatImporterPlugin");
/*! Bundled license information:

jszip/dist/jszip.min.js:
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2NvbmZpZy9jb25zdGFudHMudHMiLCAiLi4vc3JjL3VpL2NvbXBvbmVudHMva29maS1zdXBwb3J0LWJveC50cyIsICIuLi9zcmMvZGlhbG9ncy9mb2xkZXItdHJlZS1icm93c2VyLW1vZGFsLnRzIiwgIi4uL3NyYy91dGlscy9mb2xkZXItdmFsaWRhdGlvbi50cyIsICIuLi9zcmMvbG9nZ2VyLnRzIiwgIi4uL3NyYy91dGlscy50cyIsICIuLi9zcmMvc2VydmljZXMvbGluay11cGRhdGUtc2VydmljZS50cyIsICIuLi9zcmMvdXBncmFkZS91dGlscy9wcm9ncmVzcy1tb2RhbC50cyIsICIuLi9zcmMvZGlhbG9ncy9lbmhhbmNlZC1mb2xkZXItbWlncmF0aW9uLWRpYWxvZy50cyIsICIuLi9ub2RlX21vZHVsZXMvanN6aXAvZGlzdC9qc3ppcC5taW4uanMiLCAiLi4vc3JjL2RpYWxvZ3MudHMiLCAiLi4vc3JjL3V0aWxzL2RhdGUtcGFyc2VyLnRzIiwgIi4uL3NyYy91cGdyYWRlL3V0aWxzL3ZlcnNpb24tdXRpbHMudHMiLCAiLi4vc3JjL3VwZ3JhZGUvdXBncmFkZS1pbnRlcmZhY2UudHMiLCAiLi4vc3JjL3VwZ3JhZGUvdmVyc2lvbnMvdXBncmFkZS0xLjEuMC50cyIsICIuLi9zcmMvdXBncmFkZS92ZXJzaW9ucy91cGdyYWRlLTEuMi4wLnRzIiwgIi4uL3NyYy9kaWFsb2dzL2NvbmZpZ3VyZS1mb2xkZXItbG9jYXRpb25zLWRpYWxvZy50cyIsICIuLi9zcmMvdXBncmFkZS92ZXJzaW9ucy91cGdyYWRlLTEuMy4wLnRzIiwgIi4uL3NyYy9kaWFsb2dzL3VwZ3JhZGUtY29tcGxldGUtbW9kYWwudHMiLCAiLi4vc3JjL2RpYWxvZ3MvdXBncmFkZS1tb2RhbC0xLjMuMC50cyIsICIuLi9zcmMvbWFpbi50cyIsICIuLi9zcmMvdWkvc2V0dGluZ3MtdGFiLnRzIiwgIi4uL3NyYy91aS9zZXR0aW5ncy9zdXBwb3J0LXNlY3Rpb24udHMiLCAiLi4vc3JjL3VpL3NldHRpbmdzL2Jhc2Utc2V0dGluZ3Mtc2VjdGlvbi50cyIsICIuLi9zcmMvdWkvc2V0dGluZ3MvZm9sZGVyLXNldHRpbmdzLXNlY3Rpb24udHMiLCAiLi4vc3JjL2RpYWxvZ3MvZm9sZGVyLW1pZ3JhdGlvbi1kaWFsb2cudHMiLCAiLi4vc3JjL3VpL3NldHRpbmdzL2Rpc3BsYXktc2V0dGluZ3Mtc2VjdGlvbi50cyIsICIuLi9zcmMvdWkvc2V0dGluZ3MvbWVzc2FnZS1kYXRlLWZvcm1hdC1zZWN0aW9uLnRzIiwgIi4uL3NyYy9jb21tYW5kcy9jb21tYW5kLXJlZ2lzdHJ5LnRzIiwgIi4uL3NyYy9ldmVudHMvZXZlbnQtaGFuZGxlcnMudHMiLCAiLi4vc3JjL3NlcnZpY2VzL2ltcG9ydC1zZXJ2aWNlLnRzIiwgIi4uL3NyYy9tb2RlbHMvaW1wb3J0LXJlcG9ydC50cyIsICIuLi9zcmMvc2VydmljZXMvY29udmVyc2F0aW9uLXByb2Nlc3Nvci50cyIsICIuLi9zcmMvZm9ybWF0dGVycy9tZXNzYWdlLWZvcm1hdHRlci50cyIsICIuLi9zcmMvZm9ybWF0dGVycy9ub3RlLWZvcm1hdHRlci50cyIsICIuLi9zcmMvdHlwZXMvc3RhbmRhcmQudHMiLCAiLi4vc3JjL3NlcnZpY2VzL2ZpbGUtc2VydmljZS50cyIsICIuLi9zcmMvbW9kZWxzL2Vycm9ycy50cyIsICIuLi9zcmMvcHJvdmlkZXJzL3Byb3ZpZGVyLWFkYXB0ZXIudHMiLCAiLi4vc3JjL3Byb3ZpZGVycy9jaGF0Z3B0L2NoYXRncHQtZGFsbGUtcHJvY2Vzc29yLnRzIiwgIi4uL3NyYy9wcm92aWRlcnMvY2hhdGdwdC9jaGF0Z3B0LW1lc3NhZ2UtZmlsdGVyLnRzIiwgIi4uL3NyYy9wcm92aWRlcnMvY2hhdGdwdC9jaGF0Z3B0LWNvbnZlcnRlci50cyIsICIuLi9zcmMvcHJvdmlkZXJzL2NoYXRncHQvY2hhdGdwdC1hdHRhY2htZW50LWV4dHJhY3Rvci50cyIsICIuLi9zcmMvcHJvdmlkZXJzL2NoYXRncHQvY2hhdGdwdC1yZXBvcnQtbmFtaW5nLnRzIiwgIi4uL3NyYy9wcm92aWRlcnMvY2hhdGdwdC9jaGF0Z3B0LWFkYXB0ZXIudHMiLCAiLi4vc3JjL3Byb3ZpZGVycy9jbGF1ZGUvY2xhdWRlLWNvbnZlcnRlci50cyIsICIuLi9zcmMvcHJvdmlkZXJzL2NsYXVkZS9jbGF1ZGUtYXR0YWNobWVudC1leHRyYWN0b3IudHMiLCAiLi4vc3JjL3Byb3ZpZGVycy9jbGF1ZGUvY2xhdWRlLXJlcG9ydC1uYW1pbmcudHMiLCAiLi4vc3JjL3Byb3ZpZGVycy9jbGF1ZGUvY2xhdWRlLWFkYXB0ZXIudHMiLCAiLi4vc3JjL3Byb3ZpZGVycy9wcm92aWRlci1yZWdpc3RyeS50cyIsICIuLi9zcmMvdWkvaW1wb3J0LXByb2dyZXNzLW1vZGFsLnRzIiwgIi4uL3NyYy9zZXJ2aWNlcy9hdHRhY2htZW50LW1hcC1idWlsZGVyLnRzIiwgIi4uL3NyYy9zZXJ2aWNlcy9zdG9yYWdlLXNlcnZpY2UudHMiLCAiLi4vc3JjL3VwZ3JhZGUvaW5jcmVtZW50YWwtdXBncmFkZS1tYW5hZ2VyLnRzIiwgIi4uL3NyYy91cGdyYWRlL3V0aWxzL211bHRpLW9wZXJhdGlvbi1wcm9ncmVzcy1tb2RhbC50cyIsICIuLi9zcmMvZGlhbG9ncy9wcm92aWRlci1zZWxlY3Rpb24tZGlhbG9nLnRzIiwgIi4uL3NyYy9kaWFsb2dzL2VuaGFuY2VkLWZpbGUtc2VsZWN0aW9uLWRpYWxvZy50cyIsICIuLi9zcmMvZGlhbG9ncy9jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZy50cyIsICIuLi9zcmMvZGlhbG9ncy9pbnN0YWxsYXRpb24td2VsY29tZS1kaWFsb2cudHMiLCAiLi4vc3JjL3NlcnZpY2VzL2NvbnZlcnNhdGlvbi1tZXRhZGF0YS1leHRyYWN0b3IudHMiLCAiLi4vc3JjL2RpYWxvZ3MvaW1wb3J0LWNvbXBsZXRpb24tZGlhbG9nLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuXG4vLyBzcmMvY29uZmlnL2NvbnN0YW50cy50c1xuaW1wb3J0IHsgUGx1Z2luU2V0dGluZ3MsIE1lc3NhZ2VUaW1lc3RhbXBGb3JtYXQgfSBmcm9tIFwiLi4vdHlwZXMvcGx1Z2luXCI7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQbHVnaW5TZXR0aW5ncyA9IHtcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gXHVEODNEXHVEQ0MxIEZPTERFUiBTVFJVQ1RVUkVcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgY29udmVyc2F0aW9uRm9sZGVyOiBcIk5leHVzL0NvbnZlcnNhdGlvbnNcIixcbiAgICByZXBvcnRGb2xkZXI6IFwiTmV4dXMvUmVwb3J0c1wiLFxuICAgIGF0dGFjaG1lbnRGb2xkZXI6IFwiTmV4dXMvQXR0YWNobWVudHNcIixcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBcdUQ4M0NcdURGQTggRElTUExBWSBPUFRJT05TXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGFkZERhdGVQcmVmaXg6IGZhbHNlLFxuICAgIGRhdGVGb3JtYXQ6IFwiWVlZWS1NTS1ERFwiLFxuXG4gICAgLy8gTWVzc2FnZSB0aW1lc3RhbXAgZm9ybWF0XG4gICAgdXNlQ3VzdG9tTWVzc2FnZVRpbWVzdGFtcEZvcm1hdDogZmFsc2UsXG4gICAgbWVzc2FnZVRpbWVzdGFtcEZvcm1hdDogXCJsb2NhbGVcIixcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBcdUQ4M0RcdUREMjcgSU5URVJOQUwgU0VUVElOR1NcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgbGFzdENvbnZlcnNhdGlvbnNQZXJQYWdlOiA1MCxcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBcdUQ4M0RcdUREMDQgTUlHUkFUSU9OIEZMQUdTXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGhhc1Nob3duVXBncmFkZU5vdGljZTogZmFsc2UsXG4gICAgaGFzQ29tcGxldGVkVXBncmFkZTogZmFsc2UsXG4gICAgY3VycmVudFZlcnNpb246IFwiMC4wLjBcIixcbiAgICBwcmV2aW91c1ZlcnNpb246IFwiMC4wLjBcIixcbn07XG5cbmV4cG9ydCBjb25zdCBHSVRIVUIgPSB7XG4gICAgUkFXX0JBU0U6IFwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1N1cGVya2lraW0vbmV4dXMtYWktY2hhdC1pbXBvcnRlclwiLFxuICAgIFJFUE9fQkFTRTogXCJodHRwczovL2dpdGh1Yi5jb20vU3VwZXJraWtpbS9uZXh1cy1haS1jaGF0LWltcG9ydGVyXCJcbn0gYXMgY29uc3Q7XG5cbi8qKlxuICogTWVzc2FnZSB0aW1lc3RhbXAgZm9ybWF0IGRlZmluaXRpb25zXG4gKi9cbmV4cG9ydCBjb25zdCBNRVNTQUdFX1RJTUVTVEFNUF9GT1JNQVRTOiBSZWNvcmQ8TWVzc2FnZVRpbWVzdGFtcEZvcm1hdCwge1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBkYXRlRm9ybWF0OiBzdHJpbmc7XG4gICAgdGltZUZvcm1hdDogc3RyaW5nO1xuICAgIHNlcGFyYXRvcjogc3RyaW5nO1xufT4gPSB7XG4gICAgbG9jYWxlOiB7XG4gICAgICAgIGxhYmVsOiAnQXV0byAoT2JzaWRpYW4gTGFuZ3VhZ2UpJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGb2xsb3dzIE9ic2lkaWFuIGxhbmd1YWdlIHNldHRpbmcnLFxuICAgICAgICBkYXRlRm9ybWF0OiAnTCcsICAgICAgLy8gbW9tZW50LmpzIGxvY2FsZS1hd2FyZVxuICAgICAgICB0aW1lRm9ybWF0OiAnTFRTJywgICAgLy8gbW9tZW50LmpzIGxvY2FsZS1hd2FyZVxuICAgICAgICBzZXBhcmF0b3I6ICcgYXQgJ1xuICAgIH0sXG4gICAgaXNvOiB7XG4gICAgICAgIGxhYmVsOiAnWVlZWS1NTS1ERCBISDptbTpzcyAoVW5pdmVyc2FsKScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnWVlZWS1NTS1ERCBISDptbTpzcyAtIFNvcnRhYmxlLCB1bmFtYmlndW91cycsXG4gICAgICAgIGRhdGVGb3JtYXQ6ICdZWVlZLU1NLUREJyxcbiAgICAgICAgdGltZUZvcm1hdDogJ0hIOm1tOnNzJyxcbiAgICAgICAgc2VwYXJhdG9yOiAnICdcbiAgICB9LFxuICAgIHVzOiB7XG4gICAgICAgIGxhYmVsOiAnTU0vREQvWVlZWSBoOm1tOnNzIEFNL1BNIChVUyknLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ01NL0REL1lZWVkgaDptbTpzcyBBTS9QTScsXG4gICAgICAgIGRhdGVGb3JtYXQ6ICdNTS9ERC9ZWVlZJyxcbiAgICAgICAgdGltZUZvcm1hdDogJ2g6bW06c3MgQScsXG4gICAgICAgIHNlcGFyYXRvcjogJyBhdCAnXG4gICAgfSxcbiAgICBldToge1xuICAgICAgICBsYWJlbDogJ0REL01NL1lZWVkgSEg6bW06c3MgKEV1cm9wZSknLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0REL01NL1lZWVkgSEg6bW06c3MnLFxuICAgICAgICBkYXRlRm9ybWF0OiAnREQvTU0vWVlZWScsXG4gICAgICAgIHRpbWVGb3JtYXQ6ICdISDptbTpzcycsXG4gICAgICAgIHNlcGFyYXRvcjogJyBhdCAnXG4gICAgfSxcbiAgICBkZToge1xuICAgICAgICBsYWJlbDogJ0RELk1NLllZWVkgSEg6bW06c3MgKEdlcm1hbi9Td2lzcyknLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0RELk1NLllZWVkgSEg6bW06c3MnLFxuICAgICAgICBkYXRlRm9ybWF0OiAnREQuTU0uWVlZWScsXG4gICAgICAgIHRpbWVGb3JtYXQ6ICdISDptbTpzcycsXG4gICAgICAgIHNlcGFyYXRvcjogJyAnXG4gICAgfSxcbiAgICBqcDoge1xuICAgICAgICBsYWJlbDogJ1lZWVkvTU0vREQgSEg6bW06c3MgKEphcGFuZXNlKScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnWVlZWS9NTS9ERCBISDptbTpzcycsXG4gICAgICAgIGRhdGVGb3JtYXQ6ICdZWVlZL01NL0REJyxcbiAgICAgICAgdGltZUZvcm1hdDogJ0hIOm1tOnNzJyxcbiAgICAgICAgc2VwYXJhdG9yOiAnICdcbiAgICB9XG59OyIsICIvKipcbiAqIFJldXNhYmxlIEtvLWZpIHN1cHBvcnQgYm94IGNvbXBvbmVudFxuICogVXNlZCBpbiB1cGdyYWRlIGRpYWxvZ3MsIGluc3RhbGxhdGlvbiBkaWFsb2csIGV0Yy5cbiAqIEFsbCBzdHlsZXMgYXJlIGRlZmluZWQgaW4gc3R5bGVzLmNzcyB1bmRlciBcIktPLUZJIFNVUFBPUlQgQk9YXCIgc2VjdGlvblxuICovXG5cbi8qKlxuICogQ3JlYXRlIGEgS28tZmkgc3VwcG9ydCBjYWxsb3V0IGJveFxuICogQHBhcmFtIGNvbnRhaW5lciAtIFRoZSBIVE1MIGVsZW1lbnQgdG8gYXBwZW5kIHRoZSBib3ggdG9cbiAqIEBwYXJhbSBtZXNzYWdlIC0gT3B0aW9uYWwgY3VzdG9tIG1lc3NhZ2UgKGRlZmF1bHQ6IHN0YW5kYXJkIHN1cHBvcnQgbWVzc2FnZSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUtvZmlTdXBwb3J0Qm94KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG1lc3NhZ2U/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBzdXBwb3J0Qm94ID0gY29udGFpbmVyLmNyZWF0ZURpdigna29maS1zdXBwb3J0LWJveCcpO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyID0gc3VwcG9ydEJveC5jcmVhdGVEaXYoJ2tvZmktaGVhZGVyJyk7XG4gICAgaGVhZGVyLmlubmVySFRNTCA9IGBcdTI2MTUgPHNwYW4gY2xhc3M9XCJrb2ZpLWhlYWRlci1oaWdobGlnaHRcIj5TdXBwb3J0IFRoaXMgUGx1Z2luPC9zcGFuPmA7XG5cbiAgICAvLyBNZXNzYWdlIHdpdGggZW1waGFzaXMgb24gdW5lbXBsb3ltZW50ICsgaGVhbHRoIGlzc3Vlc1xuICAgIGNvbnN0IG1lc3NhZ2VFbCA9IHN1cHBvcnRCb3guY3JlYXRlRGl2KCdrb2ZpLW1lc3NhZ2UnKTtcblxuICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICAgIC8vIEN1c3RvbSBtZXNzYWdlIC0gc3BsaXQgYnkgXFxuXFxuIGZvciBwYXJhZ3JhcGhzXG4gICAgICAgIGNvbnN0IHBhcmFncmFwaHMgPSBtZXNzYWdlLnNwbGl0KCdcXG5cXG4nKTtcbiAgICAgICAgbWVzc2FnZUVsLmlubmVySFRNTCA9IHBhcmFncmFwaHMubWFwKHAgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcGFyYWdyYXBoIGNvbnRhaW5zIHN0YXRzIChudW1iZXJzKSB0byBtYWtlIGl0IGJvbGRcbiAgICAgICAgICAgIGNvbnN0IGhhc1N0YXRzID0gL1xcZHsxLDN9WycsXVxcZHszfXxcXCRcXGQrLy50ZXN0KHApO1xuICAgICAgICAgICAgaWYgKGhhc1N0YXRzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGA8cD48c3BhbiBjbGFzcz1cImtvZmktbWVzc2FnZS1lbXBoYXNpc1wiPiR7cH08L3NwYW4+PC9wPmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYDxwPiR7cH08L3A+YDtcbiAgICAgICAgfSkuam9pbignJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRGVmYXVsdCBtZXNzYWdlIC0gZW1waGFzaXplIHVuZW1wbG95bWVudCArIGhlYWx0aCBpc3N1ZXNcbiAgICAgICAgbWVzc2FnZUVsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxwPjxzcGFuIGNsYXNzPVwia29maS1tZXNzYWdlLWVtcGhhc2lzXCI+SSdtIHdvcmtpbmcgb24gTmV4dXMgcHJvamVjdHMgZnVsbC10aW1lIHdoaWxlIHVuZW1wbG95ZWQgYW5kIGRlYWxpbmcgd2l0aCBoZWFsdGggaXNzdWVzLjwvc3Bhbj48L3A+XG4gICAgICAgICAgICA8cD5JZiB0aGlzIHBsdWdpbiBtYWtlcyB5b3VyIGxpZmUgZWFzaWVyLCBhIGRvbmF0aW9uIHdvdWxkIG1lYW4gdGhlIHdvcmxkIHRvIG1lIGFuZCBoZWxwIGtlZXAgdGhlbSBhbGl2ZS48L3A+XG4gICAgICAgIGA7XG4gICAgfVxuXG4gICAgLy8gUmVhbGl0eSBjaGVjayAobW9yZSB2aXNpYmxlLCB3aXRoIHRob3VzYW5kcyBvZiBob3VycylcbiAgICBjb25zdCByZWFsaXR5Q2hlY2sgPSBzdXBwb3J0Qm94LmNyZWF0ZURpdigna29maS1yZWFsaXR5LWNoZWNrJyk7XG4gICAgcmVhbGl0eUNoZWNrLmlubmVySFRNTCA9IGBcbiAgICAgICAgPHN0cm9uZz5SZWFsaXR5IGNoZWNrOjwvc3Ryb25nPiBUaG91c2FuZHMgb2YgaG91cnMgb2Ygd29yayBvdmVyIHRoZSB5ZWFyLCBtb3JlIHRoYW4gNCczMDAgZG93bmxvYWRzLCBidXQgb25seSAkMjAgaW4gZG9uYXRpb25zIG92ZXIgdHdvIG1vbnRocy4gSWYgeW91IHVzZSB0aGlzIHBsdWdpbiByZWd1bGFybHksIHBsZWFzZSBjb25zaWRlciBjb250cmlidXRpbmcuIEV2ZW4gJDUgbWFrZXMgYSByZWFsIGRpZmZlcmVuY2UhIFx1RDgzRFx1REU0RlxuICAgIGA7XG5cbiAgICAvLyBLby1maSBidXR0b24gKHVzaW5nIEdpdEh1YiByYXcgbGluayBmcm9tIHRhZyAxLjMuMClcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBzdXBwb3J0Qm94LmNyZWF0ZURpdigna29maS1idXR0b24tY29udGFpbmVyJyk7XG4gICAgY29uc3QgYnV0dG9uSW1hZ2VQYXRoID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9TdXBlcmtpa2ltL25leHVzLWFpLWNoYXQtaW1wb3J0ZXIvMS4zLjAvc3VwcG9ydF9tZV9vbl9rb2ZpX3JlZC5wbmcnO1xuXG4gICAgYnV0dG9uQ29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8va28tZmkuY29tL25leHVzcGx1Z2luc1wiIHRhcmdldD1cIl9ibGFua1wiPlxuICAgICAgICAgICAgPGltZyBzcmM9XCIke2J1dHRvbkltYWdlUGF0aH1cIiBhbHQ9XCJTdXBwb3J0IG1lIG9uIEtvLWZpXCIgaGVpZ2h0PVwiNTBcIj5cbiAgICAgICAgPC9hPlxuICAgIGA7XG59XG5cbiIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbi8qKlxuICogVHJlZS1iYXNlZCBmb2xkZXIgYnJvd3NlciB3aXRoIGZvbGQvdW5mb2xkIG5hdmlnYXRpb25cbiAqIEFsbG93cyBicm93c2luZyBleGlzdGluZyBmb2xkZXJzLCBjcmVhdGluZyBuZXcgZm9sZGVycywgYW5kIHNlbGVjdGluZyBhIHRhcmdldCBmb2xkZXJcbiAqL1xuZXhwb3J0IGNsYXNzIEZvbGRlclRyZWVCcm93c2VyTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBvblN1Ym1pdDogKHBhdGg6IHN0cmluZykgPT4gdm9pZDtcbiAgICBwcml2YXRlIHZhbGlkYXRlUGF0aD86IChwYXRoOiBzdHJpbmcpID0+IHsgdmFsaWQ6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH07XG4gICAgcHJpdmF0ZSBzZWxlY3RlZEZvbGRlcjogVEZvbGRlciB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgZXhwYW5kZWRGb2xkZXJzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgICBwcml2YXRlIHRyZWVDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgY3JlYXRlZEZvbGRlcnM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpOyAvLyBUcmFjayBmb2xkZXJzIGNyZWF0ZWQgZHVyaW5nIHRoaXMgc2Vzc2lvblxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGFwcDogQXBwLFxuICAgICAgICBvblN1Ym1pdDogKHBhdGg6IHN0cmluZykgPT4gdm9pZCxcbiAgICAgICAgaW5pdGlhbFBhdGg/OiBzdHJpbmcsXG4gICAgICAgIHZhbGlkYXRlUGF0aD86IChwYXRoOiBzdHJpbmcpID0+IHsgdmFsaWQ6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH1cbiAgICApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICAgICAgICB0aGlzLnZhbGlkYXRlUGF0aCA9IHZhbGlkYXRlUGF0aDtcblxuICAgICAgICAvLyBQcmUtZXhwYW5kIGFuZCBzZWxlY3QgdGhlIGluaXRpYWwgcGF0aCBpZiBwcm92aWRlZFxuICAgICAgICBpZiAoaW5pdGlhbFBhdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChpbml0aWFsUGF0aCk7XG4gICAgICAgICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGb2xkZXIgPSBmb2xkZXI7XG4gICAgICAgICAgICAgICAgLy8gRXhwYW5kIGFsbCBwYXJlbnQgZm9sZGVyc1xuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50ID0gZm9sZGVyLnBhcmVudDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoY3VycmVudCAmJiBjdXJyZW50LnBhdGggIT09IFwiL1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRGb2xkZXJzLmFkZChjdXJyZW50LnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRGb2xkZXJzLmFkZChmb2xkZXIucGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk9wZW4oKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlNlbGVjdCBGb2xkZXJcIiB9KTtcblxuICAgICAgICAvLyBUcmVlIGNvbnRhaW5lciB3aXRoIHNjcm9sbFxuICAgICAgICB0aGlzLnRyZWVDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLWZvbGRlci10cmVlLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICB0aGlzLnRyZWVDb250YWluZXIuc3R5bGUubWF4SGVpZ2h0ID0gXCI0MDBweFwiO1xuICAgICAgICB0aGlzLnRyZWVDb250YWluZXIuc3R5bGUub3ZlcmZsb3dZID0gXCJhdXRvXCI7XG4gICAgICAgIHRoaXMudHJlZUNvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjIwcHhcIjtcbiAgICAgICAgdGhpcy50cmVlQ29udGFpbmVyLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKVwiO1xuICAgICAgICB0aGlzLnRyZWVDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI0cHhcIjtcbiAgICAgICAgdGhpcy50cmVlQ29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSBcIjhweFwiO1xuXG4gICAgICAgIC8vIFJlbmRlciB0aGUgdHJlZVxuICAgICAgICB0aGlzLnJlbmRlclRyZWUoKTtcblxuICAgICAgICAvLyBCdXR0b25zXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gXCI4cHhcIjtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LWVuZFwiO1xuXG4gICAgICAgIGNvbnN0IGNyZWF0ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlIE5ldyBGb2xkZXJcIiB9KTtcbiAgICAgICAgY3JlYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmhhbmRsZUNyZWF0ZUZvbGRlcigpKTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuaGFuZGxlQ2FuY2VsKCkpO1xuXG4gICAgICAgIGNvbnN0IHNlbGVjdEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIlNlbGVjdFwiLFxuICAgICAgICAgICAgY2xzOiBcIm1vZC1jdGFcIlxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmhhbmRsZVNlbGVjdCgpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclRyZWUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMudHJlZUNvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgICAgIC8vIEdldCB2YXVsdCByb290XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLmFwcC52YXVsdC5nZXRSb290KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW5kZXIgdmF1bHQgcm9vdCBhcyBzcGVjaWFsIGNhc2VcbiAgICAgICAgY29uc3Qgcm9vdEl0ZW0gPSB0aGlzLnRyZWVDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLXRyZWUtaXRlbVwiIH0pO1xuICAgICAgICByb290SXRlbS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIHJvb3RJdGVtLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuICAgICAgICByb290SXRlbS5zdHlsZS5wYWRkaW5nID0gXCI0cHggOHB4XCI7XG4gICAgICAgIHJvb3RJdGVtLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICByb290SXRlbS5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjRweFwiO1xuXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRm9sZGVyID09PSByb290KSB7XG4gICAgICAgICAgICByb290SXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpXCI7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByb290SWNvbiA9IHJvb3RJdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIlx1RDgzRFx1RENDMSBcIiB9KTtcbiAgICAgICAgY29uc3Qgcm9vdExhYmVsID0gcm9vdEl0ZW0uY3JlYXRlU3Bhbih7IHRleHQ6IFwiVmF1bHQgUm9vdCAoLylcIiB9KTtcbiAgICAgICAgcm9vdExhYmVsLnN0eWxlLmZvbnRXZWlnaHQgPSBcImJvbGRcIjtcblxuICAgICAgICByb290SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUZvbGRlckNsaWNrKHJvb3QpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZW5kZXIgY2hpbGRyZW4gb2Ygcm9vdFxuICAgICAgICB0aGlzLnJlbmRlckZvbGRlckNoaWxkcmVuKHJvb3QsIDApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyRm9sZGVyQ2hpbGRyZW4oZm9sZGVyOiBURm9sZGVyLCBkZXB0aDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gZm9sZGVyLmNoaWxkcmVuXG4gICAgICAgICAgICAuZmlsdGVyKGNoaWxkID0+IGNoaWxkIGluc3RhbmNlb2YgVEZvbGRlcilcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSBhcyBURm9sZGVyW107XG5cbiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGb2xkZXIoY2hpbGQsIGRlcHRoICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckZvbGRlcihmb2xkZXI6IFRGb2xkZXIsIGRlcHRoOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaXNFeHBhbmRlZCA9IHRoaXMuZXhwYW5kZWRGb2xkZXJzLmhhcyhmb2xkZXIucGF0aCk7XG4gICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkRm9sZGVyPy5wYXRoID09PSBmb2xkZXIucGF0aDtcbiAgICAgICAgY29uc3QgaGFzQ2hpbGRyZW4gPSBmb2xkZXIuY2hpbGRyZW4uc29tZShjID0+IGMgaW5zdGFuY2VvZiBURm9sZGVyKTtcblxuICAgICAgICAvLyBGb2xkZXIgaXRlbVxuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy50cmVlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy10cmVlLWl0ZW1cIiB9KTtcbiAgICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIGl0ZW0uc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG4gICAgICAgIGl0ZW0uc3R5bGUucGFkZGluZyA9IFwiNHB4IDhweFwiO1xuICAgICAgICBpdGVtLnN0eWxlLnBhZGRpbmdMZWZ0ID0gYCR7ZGVwdGggKiAyMCArIDh9cHhgO1xuICAgICAgICBpdGVtLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICBpdGVtLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG5cbiAgICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKVwiO1xuICAgICAgICAgICAgaXRlbS5zdHlsZS5mb250V2VpZ2h0ID0gXCJib2xkXCI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFeHBhbmQvY29sbGFwc2UgaWNvblxuICAgICAgICBjb25zdCBleHBhbmRJY29uID0gaXRlbS5jcmVhdGVTcGFuKCk7XG4gICAgICAgIGV4cGFuZEljb24uc3R5bGUud2lkdGggPSBcIjE2cHhcIjtcbiAgICAgICAgZXhwYW5kSWNvbi5zdHlsZS5tYXJnaW5SaWdodCA9IFwiNHB4XCI7XG4gICAgICAgIFxuICAgICAgICBpZiAoaGFzQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGV4cGFuZEljb24uc2V0VGV4dChpc0V4cGFuZGVkID8gXCJcdTI1QkNcIiA6IFwiXHUyNUI2XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXhwYW5kSWNvbi5zZXRUZXh0KFwiIFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvbGRlciBpY29uIGFuZCBuYW1lXG4gICAgICAgIGl0ZW0uY3JlYXRlU3Bhbih7IHRleHQ6IFwiXHVEODNEXHVEQ0MxIFwiIH0pO1xuICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBmb2xkZXIubmFtZSB9KTtcblxuICAgICAgICAvLyBDbGljayBoYW5kbGVyXG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVGb2xkZXJDbGljayhmb2xkZXIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBIb3ZlciBlZmZlY3RcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlci1saWdodClcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZW5kZXIgY2hpbGRyZW4gaWYgZXhwYW5kZWRcbiAgICAgICAgaWYgKGlzRXhwYW5kZWQgJiYgaGFzQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRm9sZGVyQ2hpbGRyZW4oZm9sZGVyLCBkZXB0aCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUZvbGRlckNsaWNrKGZvbGRlcjogVEZvbGRlcik6IHZvaWQge1xuICAgICAgICBjb25zdCB3YXNFeHBhbmRlZCA9IHRoaXMuZXhwYW5kZWRGb2xkZXJzLmhhcyhmb2xkZXIucGF0aCk7XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBjbGlja2luZyB0aGUgc2FtZSBmb2xkZXIsIGp1c3QgdG9nZ2xlIGV4cGFuZC9jb2xsYXBzZVxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEZvbGRlcj8ucGF0aCA9PT0gZm9sZGVyLnBhdGgpIHtcbiAgICAgICAgICAgIGlmICh3YXNFeHBhbmRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRGb2xkZXJzLmRlbGV0ZShmb2xkZXIucGF0aCk7XG4gICAgICAgICAgICAgICAgLy8gQ29sbGFwc2UgYWxsIGNoaWxkcmVuIHJlY3Vyc2l2ZWx5XG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbENoaWxkcmVuKGZvbGRlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRGb2xkZXJzLmFkZChmb2xkZXIucGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBDbGlja2luZyBhIGRpZmZlcmVudCBmb2xkZXJcbiAgICAgICAgICAgIC8vIENvbGxhcHNlIHNpYmxpbmdzIG9mIHRoZSBuZXcgc2VsZWN0aW9uIGF0IHRoZSBzYW1lIGxldmVsXG4gICAgICAgICAgICBpZiAoZm9sZGVyLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpYmxpbmdzID0gZm9sZGVyLnBhcmVudC5jaGlsZHJlbi5maWx0ZXIoYyA9PiBjIGluc3RhbmNlb2YgVEZvbGRlcikgYXMgVEZvbGRlcltdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2libGluZyBvZiBzaWJsaW5ncykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2libGluZy5wYXRoICE9PSBmb2xkZXIucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRlZEZvbGRlcnMuZGVsZXRlKHNpYmxpbmcucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlQWxsQ2hpbGRyZW4oc2libGluZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNlbGVjdCBhbmQgZXhwYW5kIHRoZSBuZXcgZm9sZGVyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRm9sZGVyID0gZm9sZGVyO1xuICAgICAgICAgICAgdGhpcy5leHBhbmRlZEZvbGRlcnMuYWRkKGZvbGRlci5wYXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlLXJlbmRlciB0aGUgdHJlZVxuICAgICAgICB0aGlzLnJlbmRlclRyZWUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbGxhcHNlQWxsQ2hpbGRyZW4oZm9sZGVyOiBURm9sZGVyKTogdm9pZCB7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRlZEZvbGRlcnMuZGVsZXRlKGNoaWxkLnBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VBbGxDaGlsZHJlbihjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNyZWF0ZUZvbGRlcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiXHUyNkEwXHVGRTBGIFBsZWFzZSBzZWxlY3QgYSBwYXJlbnQgZm9sZGVyIGZpcnN0XCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJvbXB0IGZvciBmb2xkZXIgbmFtZVxuICAgICAgICBjb25zdCBmb2xkZXJOYW1lID0gYXdhaXQgdGhpcy5wcm9tcHRGb3JGb2xkZXJOYW1lKCk7XG4gICAgICAgIGlmICghZm9sZGVyTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgZm9sZGVyIG5hbWVcbiAgICAgICAgaWYgKGZvbGRlck5hbWUuaW5jbHVkZXMoJy8nKSB8fCBmb2xkZXJOYW1lLmluY2x1ZGVzKCdcXFxcJykgfHwgXG4gICAgICAgICAgICBmb2xkZXJOYW1lLmluY2x1ZGVzKCc6JykgfHwgZm9sZGVyTmFtZS5pbmNsdWRlcygnKicpIHx8XG4gICAgICAgICAgICBmb2xkZXJOYW1lLmluY2x1ZGVzKCc/JykgfHwgZm9sZGVyTmFtZS5pbmNsdWRlcygnXCInKSB8fCBcbiAgICAgICAgICAgIGZvbGRlck5hbWUuaW5jbHVkZXMoJzwnKSB8fCBmb2xkZXJOYW1lLmluY2x1ZGVzKCc+JykgfHwgXG4gICAgICAgICAgICBmb2xkZXJOYW1lLmluY2x1ZGVzKCd8JykpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJcdTI3NEMgSW52YWxpZCBmb2xkZXIgbmFtZTogY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQnVpbGQgZnVsbCBwYXRoXG4gICAgICAgIGNvbnN0IHBhcmVudFBhdGggPSB0aGlzLnNlbGVjdGVkRm9sZGVyLnBhdGggPT09IFwiL1wiID8gXCJcIiA6IHRoaXMuc2VsZWN0ZWRGb2xkZXIucGF0aDtcbiAgICAgICAgY29uc3QgbmV3Rm9sZGVyUGF0aCA9IHBhcmVudFBhdGggPyBgJHtwYXJlbnRQYXRofS8ke2ZvbGRlck5hbWV9YCA6IGZvbGRlck5hbWU7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZm9sZGVyIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdGb2xkZXJQYXRoKTtcbiAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlx1Mjc0QyBGb2xkZXIgYWxyZWFkeSBleGlzdHNcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWYWxpZGF0ZSB0aGUgcGF0aCBCRUZPUkUgY3JlYXRpbmcgdGhlIGZvbGRlclxuICAgICAgICBpZiAodGhpcy52YWxpZGF0ZVBhdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLnZhbGlkYXRlUGF0aChuZXdGb2xkZXJQYXRoKTtcbiAgICAgICAgICAgIGlmICghdmFsaWRhdGlvbi52YWxpZCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyAke3ZhbGlkYXRpb24uZXJyb3IgPz8gXCJJbnZhbGlkIGZvbGRlciBsb2NhdGlvblwifWApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZm9sZGVyXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIobmV3Rm9sZGVyUGF0aCk7XG5cbiAgICAgICAgICAgIC8vIFRyYWNrIHRoaXMgZm9sZGVyIGFzIGNyZWF0ZWQgZHVyaW5nIHRoaXMgc2Vzc2lvblxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkRm9sZGVycy5hZGQobmV3Rm9sZGVyUGF0aCk7XG5cbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBDcmVhdGVkIGZvbGRlcjogJHtmb2xkZXJOYW1lfWApO1xuXG4gICAgICAgICAgICAvLyBFeHBhbmQgcGFyZW50IGFuZCBzZWxlY3QgdGhlIG5ldyBmb2xkZXJcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRGb2xkZXJzLmFkZCh0aGlzLnNlbGVjdGVkRm9sZGVyLnBhdGgpO1xuICAgICAgICAgICAgY29uc3QgbmV3Rm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld0ZvbGRlclBhdGgpO1xuICAgICAgICAgICAgaWYgKG5ld0ZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRm9sZGVyID0gbmV3Rm9sZGVyO1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRGb2xkZXJzLmFkZChuZXdGb2xkZXIucGF0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlLXJlbmRlciB0aGUgdHJlZVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJUcmVlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyBGYWlsZWQgdG8gY3JlYXRlIGZvbGRlcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9tcHRGb3JGb2xkZXJOYW1lKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcbiAgICAgICAgICAgIG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkNyZWF0ZSBOZXcgRm9sZGVyXCIpO1xuXG4gICAgICAgICAgICBjb25zdCBpbnB1dENvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIGlucHV0Q29udGFpbmVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMjBweFwiO1xuXG4gICAgICAgICAgICBpbnB1dENvbnRhaW5lci5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJGb2xkZXIgbmFtZTpcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRDb250YWluZXIuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiIH0pO1xuICAgICAgICAgICAgaW5wdXQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgICAgIGlucHV0LnN0eWxlLm1hcmdpblRvcCA9IFwiOHB4XCI7XG5cbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogXCJDcmVhdGVcIixcbiAgICAgICAgICAgICAgICBjbHM6IFwibW9kLWN0YVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNyZWF0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSB8fCBudWxsKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBpbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWUgfHwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZVNlbGVjdCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiXHUyNkEwXHVGRTBGIFBsZWFzZSBzZWxlY3QgYSBmb2xkZXIgZmlyc3RcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5zZWxlY3RlZEZvbGRlci5wYXRoID09PSBcIi9cIiA/IFwiXCIgOiB0aGlzLnNlbGVjdGVkRm9sZGVyLnBhdGg7XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgdGhlIHBhdGggYmVmb3JlIHN1Ym1pdHRpbmdcbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVQYXRoKSB7XG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy52YWxpZGF0ZVBhdGgocGF0aCk7XG4gICAgICAgICAgICBpZiAoIXZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3NEMgJHt2YWxpZGF0aW9uLmVycm9yID8/IFwiSW52YWxpZCBmb2xkZXIgbG9jYXRpb25cIn1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDbGVhciBjcmVhdGVkIGZvbGRlcnMgbGlzdCBzaW5jZSB1c2VyIGlzIHNlbGVjdGluZyBhIGZvbGRlclxuICAgICAgICB0aGlzLmNyZWF0ZWRGb2xkZXJzLmNsZWFyKCk7XG5cbiAgICAgICAgdGhpcy5vblN1Ym1pdChwYXRoKTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2FuY2VsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBEZWxldGUgYWxsIGVtcHR5IGZvbGRlcnMgY3JlYXRlZCBkdXJpbmcgdGhpcyBzZXNzaW9uXG4gICAgICAgIGF3YWl0IHRoaXMuY2xlYW51cENyZWF0ZWRGb2xkZXJzKCk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNsZWFudXBDcmVhdGVkRm9sZGVycygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gU29ydCBmb2xkZXJzIGJ5IGRlcHRoIChkZWVwZXN0IGZpcnN0KSB0byBkZWxldGUgY2hpbGRyZW4gYmVmb3JlIHBhcmVudHNcbiAgICAgICAgY29uc3Qgc29ydGVkRm9sZGVycyA9IEFycmF5LmZyb20odGhpcy5jcmVhdGVkRm9sZGVycykuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVwdGhBID0gYS5zcGxpdCgnLycpLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGRlcHRoQiA9IGIuc3BsaXQoJy8nKS5sZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gZGVwdGhCIC0gZGVwdGhBOyAvLyBEZXNjZW5kaW5nIG9yZGVyXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAoY29uc3QgZm9sZGVyUGF0aCBvZiBzb3J0ZWRGb2xkZXJzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlciAmJiBmb2xkZXIuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmRlbGV0ZShmb2xkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gU2lsZW50bHkgaWdub3JlIGVycm9ycyAoZm9sZGVyIG1pZ2h0IGhhdmUgYmVlbiBkZWxldGVkIGFscmVhZHkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNsb3NlKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG4iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cbi8vIHNyYy91dGlscy9mb2xkZXItdmFsaWRhdGlvbi50c1xuXG5leHBvcnQgaW50ZXJmYWNlIEZvbGRlclZhbGlkYXRpb25SZXN1bHQge1xuICAgIHZhbGlkOiBib29sZWFuO1xuICAgIGVycm9yPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGEgZm9sZGVyIHBhdGggaXMgbm90IG5lc3RlZCBpbnNpZGUgYW5vdGhlciBmb2xkZXIgcGF0aFxuICogQHBhcmFtIHBhdGhUb0NoZWNrIFRoZSBwYXRoIHRvIHZhbGlkYXRlXG4gKiBAcGFyYW0gZXhpc3RpbmdQYXRoIFRoZSBleGlzdGluZyBwYXRoIHRvIGNoZWNrIGFnYWluc3RcbiAqIEByZXR1cm5zIHRydWUgaWYgcGF0aFRvQ2hlY2sgaXMgaW5zaWRlIGV4aXN0aW5nUGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQYXRoSW5zaWRlUGF0aChwYXRoVG9DaGVjazogc3RyaW5nLCBleGlzdGluZ1BhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICghcGF0aFRvQ2hlY2sgfHwgIWV4aXN0aW5nUGF0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gTm9ybWFsaXplIHBhdGhzIChyZW1vdmUgdHJhaWxpbmcgc2xhc2hlcylcbiAgICBjb25zdCBub3JtYWxpemVkQ2hlY2sgPSBwYXRoVG9DaGVjay5yZXBsYWNlKC9cXC8kLywgJycpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRFeGlzdGluZyA9IGV4aXN0aW5nUGF0aC5yZXBsYWNlKC9cXC8kLywgJycpO1xuXG4gICAgLy8gU2FtZSBwYXRoIGlzIG5vdCBjb25zaWRlcmVkIFwiaW5zaWRlXCJcbiAgICBpZiAobm9ybWFsaXplZENoZWNrID09PSBub3JtYWxpemVkRXhpc3RpbmcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHBhdGhUb0NoZWNrIHN0YXJ0cyB3aXRoIGV4aXN0aW5nUGF0aCBmb2xsb3dlZCBieSBhIHNsYXNoXG4gICAgcmV0dXJuIG5vcm1hbGl6ZWRDaGVjay5zdGFydHNXaXRoKG5vcm1hbGl6ZWRFeGlzdGluZyArICcvJyk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHRocmVlIG1haW4gZm9sZGVycyAoY29udmVyc2F0aW9ucywgcmVwb3J0cywgYXR0YWNobWVudHMpIGFyZSBub3QgbmVzdGVkIGluc2lkZSBlYWNoIG90aGVyXG4gKiBAcGFyYW0gZm9sZGVyVHlwZSBUaGUgdHlwZSBvZiBmb2xkZXIgYmVpbmcgY2hhbmdlZCAoJ2NvbnZlcnNhdGlvbkZvbGRlcicgfCAncmVwb3J0Rm9sZGVyJyB8ICdhdHRhY2htZW50Rm9sZGVyJylcbiAqIEBwYXJhbSBuZXdQYXRoIFRoZSBuZXcgcGF0aCBmb3IgdGhlIGZvbGRlclxuICogQHBhcmFtIGNvbnZlcnNhdGlvbkZvbGRlciBDdXJyZW50IGNvbnZlcnNhdGlvbiBmb2xkZXIgcGF0aFxuICogQHBhcmFtIHJlcG9ydEZvbGRlciBDdXJyZW50IHJlcG9ydCBmb2xkZXIgcGF0aFxuICogQHBhcmFtIGF0dGFjaG1lbnRGb2xkZXIgQ3VycmVudCBhdHRhY2htZW50IGZvbGRlciBwYXRoXG4gKiBAcmV0dXJucyBWYWxpZGF0aW9uIHJlc3VsdCB3aXRoIGVycm9yIG1lc3NhZ2UgaWYgaW52YWxpZFxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVGb2xkZXJOZXN0aW5nKFxuICAgIGZvbGRlclR5cGU6ICdjb252ZXJzYXRpb25Gb2xkZXInIHwgJ3JlcG9ydEZvbGRlcicgfCAnYXR0YWNobWVudEZvbGRlcicsXG4gICAgbmV3UGF0aDogc3RyaW5nLFxuICAgIGNvbnZlcnNhdGlvbkZvbGRlcjogc3RyaW5nLFxuICAgIHJlcG9ydEZvbGRlcjogc3RyaW5nLFxuICAgIGF0dGFjaG1lbnRGb2xkZXI6IHN0cmluZ1xuKTogRm9sZGVyVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgLy8gTm9ybWFsaXplIHRoZSBuZXcgcGF0aFxuICAgIGNvbnN0IG5vcm1hbGl6ZWROZXdQYXRoID0gbmV3UGF0aC50cmltKCkucmVwbGFjZSgvXFwvJC8sICcnKTtcblxuICAgIGlmICghbm9ybWFsaXplZE5ld1BhdGgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBcIkZvbGRlciBwYXRoIGNhbm5vdCBiZSBlbXB0eVwiXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgYmFzZWQgb24gd2hpY2ggZm9sZGVyIGlzIGJlaW5nIGNoYW5nZWRcbiAgICBzd2l0Y2ggKGZvbGRlclR5cGUpIHtcbiAgICAgICAgY2FzZSAnY29udmVyc2F0aW9uRm9sZGVyJzpcbiAgICAgICAgICAgIC8vIENvbnZlcnNhdGlvbiBmb2xkZXIgY2Fubm90IGJlIGluc2lkZSBSZXBvcnRzIG9yIEF0dGFjaG1lbnRzXG4gICAgICAgICAgICBpZiAoaXNQYXRoSW5zaWRlUGF0aChub3JtYWxpemVkTmV3UGF0aCwgcmVwb3J0Rm9sZGVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBDb252ZXJzYXRpb24gZm9sZGVyIGNhbm5vdCBiZSBpbnNpZGUgdGhlIFJlcG9ydCBmb2xkZXIgKCR7cmVwb3J0Rm9sZGVyfSlgXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1BhdGhJbnNpZGVQYXRoKG5vcm1hbGl6ZWROZXdQYXRoLCBhdHRhY2htZW50Rm9sZGVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBDb252ZXJzYXRpb24gZm9sZGVyIGNhbm5vdCBiZSBpbnNpZGUgdGhlIEF0dGFjaG1lbnQgZm9sZGVyICgke2F0dGFjaG1lbnRGb2xkZXJ9KWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAncmVwb3J0Rm9sZGVyJzpcbiAgICAgICAgICAgIC8vIFJlcG9ydCBmb2xkZXIgY2Fubm90IGJlIGluc2lkZSBDb252ZXJzYXRpb25zIG9yIEF0dGFjaG1lbnRzXG4gICAgICAgICAgICBpZiAoaXNQYXRoSW5zaWRlUGF0aChub3JtYWxpemVkTmV3UGF0aCwgY29udmVyc2F0aW9uRm9sZGVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBSZXBvcnQgZm9sZGVyIGNhbm5vdCBiZSBpbnNpZGUgdGhlIENvbnZlcnNhdGlvbiBmb2xkZXIgKCR7Y29udmVyc2F0aW9uRm9sZGVyfSlgXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1BhdGhJbnNpZGVQYXRoKG5vcm1hbGl6ZWROZXdQYXRoLCBhdHRhY2htZW50Rm9sZGVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBSZXBvcnQgZm9sZGVyIGNhbm5vdCBiZSBpbnNpZGUgdGhlIEF0dGFjaG1lbnQgZm9sZGVyICgke2F0dGFjaG1lbnRGb2xkZXJ9KWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnYXR0YWNobWVudEZvbGRlcic6XG4gICAgICAgICAgICAvLyBBdHRhY2htZW50IGZvbGRlciBjYW5ub3QgYmUgaW5zaWRlIENvbnZlcnNhdGlvbnMgb3IgUmVwb3J0c1xuICAgICAgICAgICAgaWYgKGlzUGF0aEluc2lkZVBhdGgobm9ybWFsaXplZE5ld1BhdGgsIGNvbnZlcnNhdGlvbkZvbGRlcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBgQXR0YWNobWVudCBmb2xkZXIgY2Fubm90IGJlIGluc2lkZSB0aGUgQ29udmVyc2F0aW9uIGZvbGRlciAoJHtjb252ZXJzYXRpb25Gb2xkZXJ9KWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUGF0aEluc2lkZVBhdGgobm9ybWFsaXplZE5ld1BhdGgsIHJlcG9ydEZvbGRlcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBgQXR0YWNobWVudCBmb2xkZXIgY2Fubm90IGJlIGluc2lkZSB0aGUgUmVwb3J0IGZvbGRlciAoJHtyZXBvcnRGb2xkZXJ9KWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUgfTtcbn1cblxuIiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIGxvZ2dlci50c1xuZW51bSBMb2dMZXZlbCB7XG4gICAgREVCVUcsXG4gICAgSU5GTyxcbiAgICBXQVJOLFxuICAgIEVSUk9SLFxufVxuXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcbiAgICBwcml2YXRlIGxvZ1RvQ29uc29sZShsZXZlbDogTG9nTGV2ZWwsIG1lc3NhZ2U6IHN0cmluZywgZGV0YWlscz86IGFueSkge1xuICAgICAgICBjb25zb2xlLmxvZyhgWyR7TG9nTGV2ZWxbbGV2ZWxdfV0gJHttZXNzYWdlfWApO1xuICAgIH1cblxuICAgIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgZGV0YWlscz86IGFueSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKG1lc3NhZ2UsIGRldGFpbHMgfHwgJycpO1xuICAgIH1cblxuICAgIGluZm8obWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogYW55KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHdhcm4obWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogYW55KSB7XG4gICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcbiAgICB9XG5cbiAgICBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGRldGFpbHM/OiBhbnkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCk7IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy91dGlscy50c1xuaW1wb3J0IHsgbW9tZW50LCBBcHAsIFRGaWxlLCBURm9sZGVyLCBWYXVsdCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyXCI7XG5pbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBNRVNTQUdFX1RJTUVTVEFNUF9GT1JNQVRTIH0gZnJvbSBcIi4vY29uZmlnL2NvbnN0YW50c1wiO1xuaW1wb3J0IHR5cGUgeyBNZXNzYWdlVGltZXN0YW1wRm9ybWF0IH0gZnJvbSBcIi4vdHlwZXMvcGx1Z2luXCI7XG5cbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoKTtcblxuLyoqXG4gKiBUcnVuY2F0ZSBVbml4IHRpbWVzdGFtcCB0byBtaW51dGUgcHJlY2lzaW9uIChyZW1vdmUgc2Vjb25kcylcbiAqIFVzZWQgZm9yIGNvbXBhcmluZyBjb252ZXJzYXRpb24gdGltZXN0YW1wcyBiZXR3ZWVuIHYxLjIuMCAobm8gc2Vjb25kcykgYW5kIHYxLjMuMCAod2l0aCBzZWNvbmRzKVxuICpcbiAqIEBwYXJhbSB1bml4VGltZSAtIFVuaXggdGltZXN0YW1wIGluIHNlY29uZHNcbiAqIEByZXR1cm5zIFVuaXggdGltZXN0YW1wIHRydW5jYXRlZCB0byBtaW51dGUgcHJlY2lzaW9uXG4gKlxuICogQGV4YW1wbGVcbiAqIHRydW5jYXRlVG9NaW51dGUoMTcxOTU4MjY0NykgLy8gMTQ6MzA6NDcgXHUyMTkyIHJldHVybnMgMTcxOTU4MjYwMCAoMTQ6MzA6MDApXG4gKiB0cnVuY2F0ZVRvTWludXRlKDE3MTk1ODI2MDApIC8vIDE0OjMwOjAwIFx1MjE5MiByZXR1cm5zIDE3MTk1ODI2MDAgKDE0OjMwOjAwKVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ1bmNhdGVUb01pbnV0ZSh1bml4VGltZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcih1bml4VGltZSAvIDYwKSAqIDYwO1xufVxuXG4vKipcbiAqIENvbXBhcmUgdHdvIFVuaXggdGltZXN0YW1wcyB3aXRoIG1pbnV0ZSBwcmVjaXNpb24gKGlnbm9yaW5nIHNlY29uZHMpXG4gKiBSZXR1cm5zIG5lZ2F0aXZlIGlmIHRpbWUxIDwgdGltZTIsIHBvc2l0aXZlIGlmIHRpbWUxID4gdGltZTIsIHplcm8gaWYgZXF1YWxcbiAqXG4gKiBAcGFyYW0gdGltZTEgLSBGaXJzdCBVbml4IHRpbWVzdGFtcCBpbiBzZWNvbmRzXG4gKiBAcGFyYW0gdGltZTIgLSBTZWNvbmQgVW5peCB0aW1lc3RhbXAgaW4gc2Vjb25kc1xuICogQHJldHVybnMgQ29tcGFyaXNvbiByZXN1bHQgKG5lZ2F0aXZlL3plcm8vcG9zaXRpdmUpXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbXBhcmVUaW1lc3RhbXBzSWdub3JpbmdTZWNvbmRzKDE3MTk1ODI2NDcsIDE3MTk1ODI2MDApIC8vIEJvdGggMTQ6MzA6eHggXHUyMTkyIHJldHVybnMgMCAoZXF1YWwpXG4gKiBjb21wYXJlVGltZXN0YW1wc0lnbm9yaW5nU2Vjb25kcygxNzE5NTgyNzAwLCAxNzE5NTgyNjAwKSAvLyAxNDozMSB2cyAxNDozMCBcdTIxOTIgcmV0dXJucyA2MCAocG9zaXRpdmUpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlVGltZXN0YW1wc0lnbm9yaW5nU2Vjb25kcyh0aW1lMTogbnVtYmVyLCB0aW1lMjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdHJ1bmNhdGVUb01pbnV0ZSh0aW1lMSkgLSB0cnVuY2F0ZVRvTWludXRlKHRpbWUyKTtcbn1cblxuLyoqXG4gKiBGb3JtYXQgbWVzc2FnZSB0aW1lc3RhbXAgd2l0aCBjdXN0b20gb3IgbG9jYWxlLWJhc2VkIGZvcm1hdFxuICogVXNlZCBmb3IgbWVzc2FnZSBjYWxsb3V0cyBhbmQgbm90ZSBoZWFkZXJzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRNZXNzYWdlVGltZXN0YW1wKFxuICAgIHVuaXhUaW1lOiBudW1iZXIsXG4gICAgY3VzdG9tRm9ybWF0PzogTWVzc2FnZVRpbWVzdGFtcEZvcm1hdFxuKTogc3RyaW5nIHtcbiAgICBjb25zdCBkYXRlID0gbW9tZW50KHVuaXhUaW1lICogMTAwMCk7XG5cbiAgICAvLyBJZiBubyBjdXN0b20gZm9ybWF0LCB1c2UgbG9jYWxlIChkZWZhdWx0IGJlaGF2aW9yKVxuICAgIGlmICghY3VzdG9tRm9ybWF0IHx8IGN1c3RvbUZvcm1hdCA9PT0gJ2xvY2FsZScpIHtcbiAgICAgICAgcmV0dXJuIGAke2RhdGUuZm9ybWF0KCdMJyl9IGF0ICR7ZGF0ZS5mb3JtYXQoJ0xUUycpfWA7XG4gICAgfVxuXG4gICAgLy8gVXNlIGN1c3RvbSBmb3JtYXRcbiAgICBjb25zdCBmb3JtYXQgPSBNRVNTQUdFX1RJTUVTVEFNUF9GT1JNQVRTW2N1c3RvbUZvcm1hdF07XG4gICAgcmV0dXJuIGAke2RhdGUuZm9ybWF0KGZvcm1hdC5kYXRlRm9ybWF0KX0ke2Zvcm1hdC5zZXBhcmF0b3J9JHtkYXRlLmZvcm1hdChmb3JtYXQudGltZUZvcm1hdCl9YDtcbn1cblxuLyoqXG4gKiBGb3JtYXQgdGltZXN0YW1wIGZvciBsZWdhY3kgdXNlcyAocHJlZml4LCByZXBvcnRzKVxuICogS0VQVCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZXN0YW1wKFxuICAgIHVuaXhUaW1lOiBudW1iZXIsXG4gICAgZm9ybWF0OiBcInByZWZpeFwiIHwgXCJkYXRlXCIgfCBcInRpbWVcIlxuKTogc3RyaW5nIHtcbiAgICBjb25zdCBkYXRlID0gbW9tZW50KHVuaXhUaW1lICogMTAwMCk7XG4gICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgY2FzZSBcInByZWZpeFwiOlxuICAgICAgICAgICAgcmV0dXJuIGRhdGUuZm9ybWF0KFwiWVlZWU1NRERcIik7XG4gICAgICAgIGNhc2UgXCJkYXRlXCI6XG4gICAgICAgICAgICByZXR1cm4gZGF0ZS5mb3JtYXQoXCJMXCIpO1xuICAgICAgICBjYXNlIFwidGltZVwiOlxuICAgICAgICAgICAgcmV0dXJuIGRhdGUuZm9ybWF0KFwiTFRTXCIpO1xuICAgIH1cbn1cblxuLy8gR2VuZXJhdGUgc3ViZm9sZGVyIGZvciBZWVlZIE1NIHRyZWUgc3RydWN0dXJlXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVZZWFyTW9udGhGb2xkZXIodW5peFRpbWU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHVuaXhUaW1lICogMTAwMCk7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgcmV0dXJuIGAke3llYXJ9LyR7bW9udGh9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpdGxlKHRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aXRsZS50cmltKCkgfHwgXCJVbnRpdGxlZFwiOyAvLyBKdXN0IHRyaW0gd2hpdGVzcGFjZTsgcmV0YWluIHNwYWNlcyBhbmQgY2hhcmFjdGVycyBmb3IgcmVhZGFiaWxpdHlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRmlsZU5hbWUodGl0bGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IGZpbGVOYW1lID0gZm9ybWF0VGl0bGUodGl0bGUpXG4gICAgICAgIC5ub3JtYWxpemUoXCJORkRcIilcbiAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csIFwiXCIpIC8vIFJlbW92ZSBkaWFjcml0aWNzXG4gICAgICAgIC5yZXBsYWNlKC9bPD46XCJcXC9cXFxcfD8qXFxuXFxyXSsvZywgXCJcIikgLy8gUmVtb3ZlIGludmFsaWQgZmlsZXN5c3RlbSBjaGFyYWN0ZXJzXG4gICAgICAgIC5yZXBsYWNlKC9cXC57Mix9L2csIFwiLlwiKSAvLyBSZXBsYWNlIG11bHRpcGxlIGRvdHMgd2l0aCBzaW5nbGUgZG90XG4gICAgICAgIC50cmltKCk7XG5cbiAgICAvLyBDUklUSUNBTDogUmVtb3ZlIHNwZWNpYWwgY2hhcmFjdGVycyBmcm9tIHRoZSBiZWdpbm5pbmdcbiAgICAvLyBUaGlzIGZpeGVzIGlzc3VlcyBsaWtlIFwiLmh0YWNjZXNzXCIgYmVjb21pbmcgYW4gaW52aXNpYmxlIGZpbGVcbiAgICBmaWxlTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL15bXlxcd1xcZFxcc10rLywgXCJcIik7IC8vIFJlbW92ZSBub24tYWxwaGFudW1lcmljIGF0IHN0YXJ0XG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgYW55IHJlbWFpbmluZyBwcm9ibGVtYXRpYyBwYXR0ZXJuc1xuICAgIGZpbGVOYW1lID0gZmlsZU5hbWVcbiAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpIC8vIE5vcm1hbGl6ZSBzcGFjZXNcbiAgICAgICAgLnRyaW0oKTtcblxuICAgIC8vIEVuc3VyZSB3ZSBoYXZlIGEgdmFsaWQgZmlsZW5hbWVcbiAgICBpZiAoIWZpbGVOYW1lIHx8IGZpbGVOYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBmaWxlTmFtZSA9IFwiVW50aXRsZWRcIjtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgZmlsZW5hbWUgZG9lc24ndCBzdGFydCB3aXRoIGEgZG90IChoaWRkZW4gZmlsZXMpXG4gICAgaWYgKGZpbGVOYW1lLnN0YXJ0c1dpdGgoXCIuXCIpKSB7XG4gICAgICAgIGZpbGVOYW1lID0gZmlsZU5hbWUuc3Vic3RyaW5nKDEpO1xuICAgIH1cblxuICAgIC8vIEZpbmFsIHNhZmV0eSBjaGVjayAtIGlmIHN0aWxsIGVtcHR5IGFmdGVyIGNsZWFuaW5nXG4gICAgaWYgKCFmaWxlTmFtZSB8fCBmaWxlTmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZmlsZU5hbWUgPSBcIlVudGl0bGVkXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbGVOYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJlZml4KFxuICAgIGZpbGVuYW1lOiBzdHJpbmcsXG4gICAgdGltZVN0YW1wOiBudW1iZXIsXG4gICAgZGF0ZUZvcm1hdDogc3RyaW5nXG4pOiBzdHJpbmcge1xuICAgIGNvbnN0IHRpbWVTdGFtcFN0ciA9IGZvcm1hdFRpbWVzdGFtcCh0aW1lU3RhbXAsIGRhdGVGb3JtYXQpOyAvLyBVc2UgdGhlIHNwZWNpZmllZCBmb3JtYXRcbiAgICBpZiAodGltZVN0YW1wU3RyKSB7XG4gICAgICAgIGZpbGVuYW1lID0gYCR7dGltZVN0YW1wU3RyfSAtICR7ZmlsZW5hbWV9YDtcbiAgICB9XG4gICAgcmV0dXJuIGZpbGVuYW1lOyAvLyBSZXR1cm4gdGhlIGZpbGVuYW1lIHdpdGggcHJlZml4IGlmIGFwcGxpY2FibGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURhdGVQcmVmaXgoXG4gICAgdGltZVN0YW1wOiBudW1iZXIsXG4gICAgZGF0ZUZvcm1hdDogc3RyaW5nXG4pOiBzdHJpbmcge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lU3RhbXAgKiAxMDAwKTsgLy8gQ29udmVydCBVbml4IHRpbWVzdGFtcCB0byBEYXRlXG4gICAgbGV0IHByZWZpeCA9IFwiXCI7XG5cbiAgICAvLyBGb3JtYXQgdGhlIGRhdGUgYmFzZWQgb24gdGhlIHNwZWNpZmllZCBmb3JtYXRcbiAgICBpZiAoZGF0ZUZvcm1hdCA9PT0gXCJZWVlZLU1NLUREXCIpIHtcbiAgICAgICAgcHJlZml4ID0gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTsgLy8gRm9ybWF0IGFzIFlZWVktTU0tRERcbiAgICB9IGVsc2UgaWYgKGRhdGVGb3JtYXQgPT09IFwiWVlZWU1NRERcIikge1xuICAgICAgICBwcmVmaXggPSBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdLnJlcGxhY2UoLy0vZywgXCJcIik7IC8vIFJlbW92ZSBkYXNoZXMgZm9yIFlZWVlNTUREXG4gICAgfVxuXG4gICAgcmV0dXJuIHByZWZpeDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlVW5pcXVlRmlsZU5hbWUoXG4gICAgZmlsZVBhdGg6IHN0cmluZyxcbiAgICB2YXVsdEFkYXB0ZXI6IGFueVxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBsZXQgdW5pcXVlRmlsZU5hbWUgPSBmaWxlUGF0aDtcblxuICAgIC8vIEV4dHJhY3QgdGhlIGJhc2UgbmFtZSBhbmQgZXh0ZW5zaW9uXG4gICAgY29uc3QgYmFzZU5hbWUgPSBmaWxlUGF0aC5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTsgLy8gUmVtb3ZlIHRoZSAubWQgZXh0ZW5zaW9uIGZvciB1bmlxdWUgbmFtZSBnZW5lcmF0aW9uXG4gICAgbGV0IGNvdW50ZXIgPSAxO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGV4aXN0ZW5jZSBhbmQgZ2VuZXJhdGUgdW5pcXVlIG5hbWVzXG4gICAgd2hpbGUgKGF3YWl0IHZhdWx0QWRhcHRlci5leGlzdHModW5pcXVlRmlsZU5hbWUpKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBuYW1lIHdpdGggY291bnRlciBhcHBlbmRlZFxuICAgICAgICB1bmlxdWVGaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSAoJHtjb3VudGVyKyt9KS5tZGA7IC8vIEFwcGVuZCB0aGUgY291bnRlciBhbmQga2VlcCAubWRcbiAgICB9XG5cbiAgICByZXR1cm4gdW5pcXVlRmlsZU5hbWU7IC8vIFJldHVybiB0aGUgdW5pcXVlIGZpbGUgbmFtZVxufVxuXG4vLyBGdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgZnVsbCBmaWxlIHBhdGggZXhpc3RzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZG9lc0ZpbGVQYXRoRXhpc3QoXG4gICAgZmlsZVBhdGg6IHN0cmluZyxcbiAgICB2YXVsdDogYW55XG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBmaWxlID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICByZXR1cm4gZmlsZSAhPT0gbnVsbDsgLy8gUmV0dXJuIHRydWUgaWYgdGhlIGZpbGUgZXhpc3RzLCBmYWxzZSBvdGhlcndpc2Vcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZpbGVIYXNoKGZpbGU6IEZpbGUpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcbiAgICBjb25zdCBoYXNoQnVmZmVyID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoXCJTSEEtMjU2XCIsIGJ1ZmZlcik7XG4gICAgY29uc3QgaGFzaEFycmF5ID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShoYXNoQnVmZmVyKSk7XG4gICAgcmV0dXJuIGhhc2hBcnJheS5tYXAoKGIpID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKSkuam9pbihcIlwiKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSB0aGUgZXhhY3QgZmlsZW5hbWUgdGhhdCB3b3VsZCBiZSB1c2VkIGZvciBhIGNvbnZlcnNhdGlvblxuICogVGhpcyBtYXRjaGVzIHRoZSBsb2dpYyBpbiBDb252ZXJzYXRpb25Qcm9jZXNzb3IuZ2VuZXJhdGVGaWxlUGF0aEZvckNoYXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQ29udmVyc2F0aW9uRmlsZU5hbWUoXG4gICAgY2hhdFRpdGxlOiBzdHJpbmcsXG4gICAgY3JlYXRlVGltZTogbnVtYmVyLFxuICAgIGFkZERhdGVQcmVmaXg6IGJvb2xlYW4sXG4gICAgZGF0ZUZvcm1hdDogc3RyaW5nXG4pOiBzdHJpbmcge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjcmVhdGVUaW1lICogMTAwMCk7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cbiAgICBsZXQgZmlsZU5hbWUgPSBnZW5lcmF0ZUZpbGVOYW1lKGNoYXRUaXRsZSk7XG5cbiAgICBpZiAoYWRkRGF0ZVByZWZpeCkge1xuICAgICAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICAgICAgbGV0IHByZWZpeCA9IFwiXCI7XG4gICAgICAgIGlmIChkYXRlRm9ybWF0ID09PSBcIllZWVktTU0tRERcIikge1xuICAgICAgICAgICAgcHJlZml4ID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRlRm9ybWF0ID09PSBcIllZWVlNTUREXCIpIHtcbiAgICAgICAgICAgIHByZWZpeCA9IGAke3llYXJ9JHttb250aH0ke2RheX1gO1xuICAgICAgICB9XG4gICAgICAgIGZpbGVOYW1lID0gYCR7cHJlZml4fSAtICR7ZmlsZU5hbWV9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gZmlsZU5hbWU7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgc2FmZSBhbGlhcyBmb3IgZnJvbnRtYXR0ZXIgdXNlXG4gKiBTYW5pdGl6ZXMgdGl0bGVzIHRvIGJlIHNhZmUgZm9yIFlBTUwgZnJvbnRtYXR0ZXIgd2hpbGUgcHJlc2VydmluZyByZWFkYWJpbGl0eVxuICogUmV0dXJucyBlaXRoZXIgYSBzYWZlIHVucXVvdGVkIHN0cmluZyBvciBhIHByb3Blcmx5IHF1b3RlZCBzdHJpbmcgd2hlbiBuZWNlc3NhcnlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU2FmZUFsaWFzKHRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghdGl0bGUgfHwgdHlwZW9mIHRpdGxlICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gXCJVbnRpdGxlZFwiO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHN0YXJ0cyB3aXRoIFlBTUwgc3BlY2lhbCBjaGFyYWN0ZXJzIEJFRk9SRSBhbnkgc2FuaXRpemF0aW9uXG4gICAgY29uc3Qgc3RhcnRzV2l0aFlhbWxTcGVjaWFsID1cbiAgICAgICAgdGl0bGUuc3RhcnRzV2l0aCgnIycpIHx8XG4gICAgICAgIHRpdGxlLnN0YXJ0c1dpdGgoJyYnKSB8fFxuICAgICAgICB0aXRsZS5zdGFydHNXaXRoKCcqJykgfHxcbiAgICAgICAgdGl0bGUuc3RhcnRzV2l0aCgnIScpIHx8XG4gICAgICAgIHRpdGxlLnN0YXJ0c1dpdGgoJ3wnKSB8fFxuICAgICAgICB0aXRsZS5zdGFydHNXaXRoKCc+JykgfHxcbiAgICAgICAgdGl0bGUuc3RhcnRzV2l0aCgnJScpIHx8XG4gICAgICAgIHRpdGxlLnN0YXJ0c1dpdGgoJ0AnKSB8fFxuICAgICAgICB0aXRsZS5zdGFydHNXaXRoKCdgJyk7XG5cbiAgICAvLyBTdGFydCB3aXRoIHRoZSB0aXRsZSBhbmQgYXBwbHkgbWluaW1hbCBzYW5pdGl6YXRpb25cbiAgICBsZXQgY2xlYW5OYW1lID0gdGl0bGVcbiAgICAgICAgLm5vcm1hbGl6ZShcIk5GRFwiKVxuICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgXCJcIikgLy8gUmVtb3ZlIGRpYWNyaXRpY3NcbiAgICAgICAgLnJlcGxhY2UoL1s8PlxcL1xcXFx8PypcXG5cXHJdKy9nLCBcIlwiKSAvLyBSZW1vdmUgaW52YWxpZCBmaWxlc3lzdGVtIGNoYXJhY3RlcnMgKGtlZXAgcXVvdGVzIGFuZCBjb2xvbnMpXG4gICAgICAgIC5yZXBsYWNlKC9cXC57Mix9L2csIFwiLlwiKSAvLyBSZXBsYWNlIG11bHRpcGxlIGRvdHMgd2l0aCBzaW5nbGUgZG90XG4gICAgICAgIC50cmltKCk7XG5cbiAgICAvLyBSZW1vdmUgc3BlY2lhbCBjaGFyYWN0ZXJzIGZyb20gdGhlIGJlZ2lubmluZyAoZm9yIGZpbGVzeXN0ZW0gc2FmZXR5KVxuICAgIC8vIEJ1dCB3ZSdsbCByZW1lbWJlciBpZiB3ZSBoYWQgWUFNTCBzcGVjaWFsIGNoYXJzIGZvciBxdW90aW5nIGRlY2lzaW9uXG4gICAgY2xlYW5OYW1lID0gY2xlYW5OYW1lLnJlcGxhY2UoL15bXlxcd1xcZFxcc1wiJ10rLywgXCJcIik7XG5cbiAgICAvLyBDbGVhbiB1cCBhbnkgcmVtYWluaW5nIHByb2JsZW1hdGljIHBhdHRlcm5zXG4gICAgY2xlYW5OYW1lID0gY2xlYW5OYW1lXG4gICAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKSAvLyBOb3JtYWxpemUgc3BhY2VzXG4gICAgICAgIC50cmltKCk7XG5cbiAgICAvLyBFbnN1cmUgd2UgaGF2ZSBhIHZhbGlkIGFsaWFzXG4gICAgaWYgKCFjbGVhbk5hbWUgfHwgY2xlYW5OYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjbGVhbk5hbWUgPSBcIlVudGl0bGVkXCI7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIGFsaWFzIGRvZXNuJ3Qgc3RhcnQgd2l0aCBhIGRvdCAoY2FuIGNhdXNlIGlzc3VlcyBpbiBmcm9udG1hdHRlcilcbiAgICBpZiAoY2xlYW5OYW1lLnN0YXJ0c1dpdGgoXCIuXCIpKSB7XG4gICAgICAgIGNsZWFuTmFtZSA9IGNsZWFuTmFtZS5zdWJzdHJpbmcoMSk7XG4gICAgfVxuXG4gICAgLy8gRmluYWwgc2FmZXR5IGNoZWNrXG4gICAgaWYgKCFjbGVhbk5hbWUgfHwgY2xlYW5OYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjbGVhbk5hbWUgPSBcIlVudGl0bGVkXCI7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCBxdW90ZXMgKFlBTUwgcmVzZXJ2ZWQgd29yZHMgb3IgdmFsdWVzIHRoYXQgY291bGQgYmUgbWlzaW50ZXJwcmV0ZWQpXG4gICAgY29uc3QgbmVlZHNRdW90ZXMgPVxuICAgICAgICAvLyBZQU1MIHJlc2VydmVkIHdvcmRzXG4gICAgICAgIC9eKHRydWV8ZmFsc2V8bnVsbHx5ZXN8bm98b258b2ZmfFxcZCt8XFxkKlxcLlxcZCspJC9pLnRlc3QoY2xlYW5OYW1lKSB8fFxuXG4gICAgICAgIC8vIENvbnRhaW5zIHF1b3Rlc1xuICAgICAgICBjbGVhbk5hbWUuaW5jbHVkZXMoJ1wiJykgfHxcblxuICAgICAgICAvLyBDb250YWlucyBjb2xvbiAoQ1JJVElDQUw6IHByZXZlbnRzIFlBTUwga2V5LXZhbHVlIGludGVycHJldGF0aW9uKVxuICAgICAgICBjbGVhbk5hbWUuaW5jbHVkZXMoJzonKSB8fFxuXG4gICAgICAgIC8vIENvbnRhaW5zIHNxdWFyZSBicmFja2V0cyBvciBjdXJseSBicmFjZXMgKFlBTUwgZmxvdyBjb2xsZWN0aW9ucylcbiAgICAgICAgY2xlYW5OYW1lLmluY2x1ZGVzKCdbJykgfHxcbiAgICAgICAgY2xlYW5OYW1lLmluY2x1ZGVzKCddJykgfHxcbiAgICAgICAgY2xlYW5OYW1lLmluY2x1ZGVzKCd7JykgfHxcbiAgICAgICAgY2xlYW5OYW1lLmluY2x1ZGVzKCd9JykgfHxcblxuICAgICAgICAvLyBTdGFydGVkIHdpdGggWUFNTCBzcGVjaWFsIGNoYXJhY3RlcnMgKGJlZm9yZSBzYW5pdGl6YXRpb24pXG4gICAgICAgIHN0YXJ0c1dpdGhZYW1sU3BlY2lhbCB8fFxuXG4gICAgICAgIC8vIENvbnRhaW5zIG5ld2xpbmVzIG9yIHRhYnMgKHNhZmV0eSBjaGVjaylcbiAgICAgICAgY2xlYW5OYW1lLmluY2x1ZGVzKCdcXG4nKSB8fFxuICAgICAgICBjbGVhbk5hbWUuaW5jbHVkZXMoJ1xccicpIHx8XG4gICAgICAgIGNsZWFuTmFtZS5pbmNsdWRlcygnXFx0Jyk7XG5cbiAgICBpZiAobmVlZHNRdW90ZXMpIHtcbiAgICAgICAgLy8gVXNlIHNpbmdsZSBxdW90ZXMgYW5kIGVzY2FwZSBhbnkgc2luZ2xlIHF1b3RlcyBpbiB0aGUgY29udGVudFxuICAgICAgICByZXR1cm4gYCcke2NsZWFuTmFtZS5yZXBsYWNlKC8nL2csIFwiJydcIil9J2A7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsZWFuTmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRNZXNzYWdlKG1lc3NhZ2U6IGFueSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIG1lc3NhZ2UgJiZcbiAgICAgICAgdHlwZW9mIG1lc3NhZ2UgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgbWVzc2FnZS5jb250ZW50ICYmXG4gICAgICAgIHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheShtZXNzYWdlLmNvbnRlbnQucGFydHMpICYmXG4gICAgICAgIG1lc3NhZ2UuY29udGVudC5wYXJ0cy5sZW5ndGggPiAwICYmXG4gICAgICAgIG1lc3NhZ2UuY29udGVudC5wYXJ0cy5zb21lKFxuICAgICAgICAgICAgKHBhcnQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBzaW1wbGUgc3RyaW5nIHBhcnRzXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJ0ID09PSBcInN0cmluZ1wiICYmIHBhcnQudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgb2JqZWN0IHBhcnRzIHdpdGggY29udGVudF90eXBlXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJ0ID09PSBcIm9iamVjdFwiICYmIHBhcnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXVkaW8gdHJhbnNjcmlwdGlvbiBwYXJ0c1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFydC5jb250ZW50X3R5cGUgPT09IFwiYXVkaW9fdHJhbnNjcmlwdGlvblwiICYmIHBhcnQudGV4dCAmJiBwYXJ0LnRleHQudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBUZXh0IHBhcnRzIHdpdGggY29udGVudF90eXBlXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LmNvbnRlbnRfdHlwZSA9PT0gXCJ0ZXh0XCIgJiYgcGFydC50ZXh0ICYmIHBhcnQudGV4dC50cmltKCkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIE11bHRpbW9kYWwgdGV4dCBwYXJ0c1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFydC5jb250ZW50X3R5cGUgPT09IFwibXVsdGltb2RhbF90ZXh0XCIgJiYgcGFydC50ZXh0ICYmIHBhcnQudGV4dC50cmltKCkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0N1c3RvbUVycm9yKGVycm9yOiBhbnkpOiBlcnJvciBpcyBDdXN0b21FcnJvciB7XG4gICAgcmV0dXJuIGVycm9yICYmIHR5cGVvZiBlcnJvci5tZXNzYWdlID09PSBcInN0cmluZ1wiOyAvLyBDaGVjayBpZiBlcnJvciBoYXMgYSAnbWVzc2FnZScgcHJvcGVydHlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlckV4aXN0cyhcbiAgICBmb2xkZXJQYXRoOiBzdHJpbmcsXG4gICAgdmF1bHQ6IGFueVxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBmb2xkZXJzID0gZm9sZGVyUGF0aC5zcGxpdChcIi9cIikuZmlsdGVyKChwKSA9PiBwLmxlbmd0aCk7XG4gICAgbGV0IGN1cnJlbnRQYXRoID0gXCJcIjtcblxuICAgIGZvciAoY29uc3QgZm9sZGVyIG9mIGZvbGRlcnMpIHtcbiAgICAgICAgY3VycmVudFBhdGggKz0gZm9sZGVyICsgXCIvXCI7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY3VycmVudFBhdGgpO1xuXG4gICAgICAgIGlmICghY3VycmVudEZvbGRlcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB2YXVsdC5jcmVhdGVGb2xkZXIoY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlICE9PSBcIkZvbGRlciBhbHJlYWR5IGV4aXN0cy5cIikge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGNyZWF0ZSBmb2xkZXI6ICR7Y3VycmVudFBhdGh9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBGYWlsZWQgdG8gY3JlYXRlIGZvbGRlcjogJHtjdXJyZW50UGF0aH0uIFJlYXNvbjogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIGZvbGRlciBhbHJlYWR5IGV4aXN0cywgY29udGludWUgc2lsZW50bHlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0NvbnZlcnNhdGlvbkxpbmsoXG4gICAgY29udmVyc2F0aW9uSWQ6IHN0cmluZyxcbiAgICBwcm92aWRlcjogc3RyaW5nID0gJ2NoYXRncHQnXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBHZW5lcmF0ZSBwcm92aWRlci1zcGVjaWZpYyBVUkxcbiAgICBsZXQgdXJsOiBzdHJpbmc7XG4gICAgc3dpdGNoIChwcm92aWRlcikge1xuICAgICAgICBjYXNlICdjaGF0Z3B0JzpcbiAgICAgICAgICAgIHVybCA9IGBodHRwczovL2NoYXRncHQuY29tL2MvJHtjb252ZXJzYXRpb25JZH1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2NsYXVkZSc6XG4gICAgICAgICAgICB1cmwgPSBgaHR0cHM6Ly9jbGF1ZGUuYWkvY2hhdC8ke2NvbnZlcnNhdGlvbklkfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgVW5rbm93biBwcm92aWRlciBmb3IgbGluayBjaGVja2luZzogJHtwcm92aWRlcn1gKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICBtZXRob2Q6IFwiSEVBRFwiLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDA7IC8vIFJldHVybnMgdHJ1ZSBmb3Igc3RhdHVzIGNvZGVzIDIwMC0yOTlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGZldGNoaW5nICR7dXJsfTpgLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gUmV0dXJuIGZhbHNlIGluIGNhc2Ugb2YgZXJyb3IgKGUuZy4sIG5ldHdvcmsgaXNzdWVzKVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9sZF9nZXRDb252ZXJzYXRpb25JZChhcHA6IEFwcCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIGlmIChhY3RpdmVGaWxlKSB7XG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyID1cbiAgICAgICAgICAgIGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3RpdmVGaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIHJldHVybiBmcm9udG1hdHRlcj8uY29udmVyc2F0aW9uX2lkO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkOyAvLyBSZXR1cm4gdW5kZWZpbmVkIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBmaWxlXG59XG5cbi8vIFJFTU9WRUQ6IGdldENvbnZlcnNhdGlvbklkKCkgLSBubyBsb25nZXIgbmVlZGVkIChjbGljayBoYW5kbGVyIHJlbW92ZWQpXG4vLyBSRU1PVkVEOiBnZXRQcm92aWRlcigpIC0gbm8gbG9uZ2VyIG5lZWRlZCAoY2xpY2sgaGFuZGxlciByZW1vdmVkKVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOZXh1c1JlbGF0ZWQoZmlsZTogVEZpbGUsIGFwcDogQXBwKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgIHJldHVybiBmcm9udG1hdHRlcj8ubmV4dXMgPT09IFwibmV4dXMtYWktY2hhdC1pbXBvcnRlclwiOyAvLyBSZXR1cm4gdHJ1ZSBpZiB0aGUgbmV4dXMgbWF0Y2hlc1xufVxuXG5pbnRlcmZhY2UgQ3VzdG9tRXJyb3Ige1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICBuYW1lPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQ2hhdE1lc3NhZ2Uge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgY29udGVudD86IHtcbiAgICAgICAgcGFydHM6IGFueVtdO1xuICAgICAgICBjb250ZW50X3R5cGU/OiBzdHJpbmc7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXN1bHQgb2YgYSBmb2xkZXIgbWVyZ2Ugb3BlcmF0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRm9sZGVyTWVyZ2VSZXN1bHQge1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgbW92ZWQ6IG51bWJlcjtcbiAgICBza2lwcGVkOiBudW1iZXI7XG4gICAgZXJyb3JzOiBudW1iZXI7XG4gICAgZXJyb3JEZXRhaWxzPzogc3RyaW5nW107XG59XG5cbi8qKlxuICogTW92ZSBhbmQgbWVyZ2UgZm9sZGVycyAtIG1vdmVzIGFsbCBmaWxlcyBmcm9tIG9sZEZvbGRlciB0byBuZXdQYXRoIFJFQ1VSU0lWRUxZXG4gKiBJZiBmaWxlcyBhbHJlYWR5IGV4aXN0IGluIGRlc3RpbmF0aW9uLCB0aGV5IGFyZSBza2lwcGVkIChub3Qgb3ZlcndyaXR0ZW4pXG4gKlxuICogQHBhcmFtIG9sZEZvbGRlciAtIFRoZSBzb3VyY2UgZm9sZGVyIHRvIG1vdmUgZnJvbVxuICogQHBhcmFtIG5ld1BhdGggLSBUaGUgZGVzdGluYXRpb24gcGF0aFxuICogQHBhcmFtIHZhdWx0IC0gVGhlIE9ic2lkaWFuIHZhdWx0IGluc3RhbmNlXG4gKiBAcGFyYW0gb25Qcm9ncmVzcyAtIE9wdGlvbmFsIGNhbGxiYWNrIGZvciBwcm9ncmVzcyB1cGRhdGVzXG4gKiBAcmV0dXJucyBSZXN1bHQgd2l0aCBjb3VudHMgb2YgbW92ZWQsIHNraXBwZWQsIGFuZCBlcnJvciBmaWxlc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbW92ZUFuZE1lcmdlRm9sZGVycyhcbiAgICBvbGRGb2xkZXI6IFRGb2xkZXIsXG4gICAgbmV3UGF0aDogc3RyaW5nLFxuICAgIHZhdWx0OiBWYXVsdCxcbiAgICBvblByb2dyZXNzPzogKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlcikgPT4gdm9pZFxuKTogUHJvbWlzZTxGb2xkZXJNZXJnZVJlc3VsdD4ge1xuICAgIGxldCBtb3ZlZCA9IDA7XG4gICAgbGV0IHNraXBwZWQgPSAwO1xuICAgIGxldCBlcnJvcnMgPSAwO1xuICAgIGNvbnN0IGVycm9yRGV0YWlsczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBmb2xkZXJzVG9EZWxldGU6IFRGb2xkZXJbXSA9IFtdOyAvLyBUcmFjayBmb2xkZXJzIHRvIGRlbGV0ZSBhZnRlciBtb3ZpbmcgZmlsZXNcblxuICAgIC8vIENvdW50IHRvdGFsIGZpbGVzIHRvIG1vdmUgZm9yIHByb2dyZXNzIHRyYWNraW5nXG4gICAgbGV0IHRvdGFsRmlsZXMgPSAwO1xuICAgIGxldCBwcm9jZXNzZWRGaWxlcyA9IDA7XG5cbiAgICBmdW5jdGlvbiBjb3VudEZpbGVzKGZvbGRlcjogVEZvbGRlcik6IG51bWJlciB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgY291bnQgKz0gY291bnRGaWxlcyhjaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cblxuICAgIHRvdGFsRmlsZXMgPSBjb3VudEZpbGVzKG9sZEZvbGRlcik7XG5cbiAgICAvKipcbiAgICAgKiBSZWN1cnNpdmVseSBtb3ZlIGFsbCBmaWxlcyBmcm9tIGEgZm9sZGVyXG4gICAgICovXG4gICAgYXN5bmMgZnVuY3Rpb24gbW92ZVJlY3Vyc2l2ZShzb3VyY2VGb2xkZXI6IFRGb2xkZXIsIGRlc3RQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gRW5zdXJlIGRlc3RpbmF0aW9uIGZvbGRlciBleGlzdHNcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHZhdWx0LmNyZWF0ZUZvbGRlcihkZXN0UGF0aCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIGlmICghZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoXCJGb2xkZXIgYWxyZWFkeSBleGlzdHNcIikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZvbGRlciBleGlzdHMsIHRoYXQncyBmaW5lIC0gd2UncmUgbWVyZ2luZ1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWFyayBUSElTIGZvbGRlciBmb3IgZGVsZXRpb24gQkVGT1JFIHByb2Nlc3NpbmcgY2hpbGRyZW5cbiAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHBhcmVudCBmb2xkZXJzIGFyZSBhZGRlZCB0byB0aGUgbGlzdCBiZWZvcmUgdGhlaXIgY2hpbGRyZW5cbiAgICAgICAgLy8gV2hlbiB3ZSByZXZlcnNlIHRoZSBsaXN0IGxhdGVyLCBjaGlsZHJlbiB3aWxsIGJlIGRlbGV0ZWQgYmVmb3JlIHBhcmVudHNcbiAgICAgICAgZm9sZGVyc1RvRGVsZXRlLnB1c2goc291cmNlRm9sZGVyKTtcblxuICAgICAgICAvLyBQcm9jZXNzIGFsbCBjaGlsZHJlblxuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIFsuLi5zb3VyY2VGb2xkZXIuY2hpbGRyZW5dKSB7IC8vIENvcHkgYXJyYXkgdG8gYXZvaWQgbW9kaWZpY2F0aW9uIGR1cmluZyBpdGVyYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNoaWxkTmV3UGF0aCA9IGAke2Rlc3RQYXRofS8ke2NoaWxkLm5hbWV9YDtcblxuICAgICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICAgICAgICAgIC8vIFJlY3Vyc2l2ZWx5IHByb2Nlc3Mgc3ViZm9sZGVyXG4gICAgICAgICAgICAgICAgYXdhaXQgbW92ZVJlY3Vyc2l2ZShjaGlsZCwgY2hpbGROZXdQYXRoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSXQncyBhIGZpbGVcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBkZXN0aW5hdGlvbiBhbHJlYWR5IGV4aXN0c1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB2YXVsdC5hZGFwdGVyLmV4aXN0cyhjaGlsZE5ld1BhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNraXAgZXhpc3RpbmcgZmlsZXMgdG8gYXZvaWQgb3ZlcndyaXRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZEZpbGVzKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3MocHJvY2Vzc2VkRmlsZXMsIHRvdGFsRmlsZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBEZXN0aW5hdGlvbiBkb2Vzbid0IGV4aXN0LCBzYWZlIHRvIG1vdmVcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdmF1bHQucmVuYW1lKGNoaWxkLCBjaGlsZE5ld1BhdGgpO1xuICAgICAgICAgICAgICAgICAgICBtb3ZlZCsrO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRGaWxlcysrO1xuICAgICAgICAgICAgICAgICAgICBpZiAob25Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25Qcm9ncmVzcyhwcm9jZXNzZWRGaWxlcywgdG90YWxGaWxlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBtb3ZlICR7Y2hpbGQucGF0aH06ICR7ZXJyb3IubWVzc2FnZSB8fCBTdHJpbmcoZXJyb3IpfWA7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgW21vdmVBbmRNZXJnZUZvbGRlcnNdICR7ZXJyb3JNc2d9YCk7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yRGV0YWlscy5wdXNoKGVycm9yTXNnKTtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzKys7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZEZpbGVzKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvblByb2dyZXNzKHByb2Nlc3NlZEZpbGVzLCB0b3RhbEZpbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG1vdmVSZWN1cnNpdmUob2xkRm9sZGVyLCBuZXdQYXRoKTtcblxuICAgICAgICAvLyBEZWxldGUgZm9sZGVycyBib3R0b20tdXAgKGRlZXBlc3QgZmlyc3QpXG4gICAgICAgIC8vIFJldmVyc2UgdGhlIGFycmF5IHNvIHdlIGRlbGV0ZSBjaGlsZHJlbiBiZWZvcmUgcGFyZW50c1xuICAgICAgICBmb3IgKGNvbnN0IGZvbGRlciBvZiBmb2xkZXJzVG9EZWxldGUucmV2ZXJzZSgpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGZvbGRlciBzdGlsbCBleGlzdHMgYmVmb3JlIHRyeWluZyB0byBkZWxldGVcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB2YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXIucGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZm9sZGVyIGlzIGFjdHVhbGx5IGVtcHR5IHVzaW5nIGxvdy1sZXZlbCBBUElcbiAgICAgICAgICAgICAgICAvLyBmb2xkZXIuY2hpbGRyZW4gbWlnaHQgYmUgc3RhbGUgYWZ0ZXIgbW92aW5nIGZpbGVzXG4gICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyQ29udGVudHMgPSBhd2FpdCB2YXVsdC5hZGFwdGVyLmxpc3QoZm9sZGVyLnBhdGgpO1xuXG4gICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBoaWRkZW4gZmlsZXMgKGxpa2UgLkRTX1N0b3JlIG9uIG1hY09TKVxuICAgICAgICAgICAgICAgIGNvbnN0IHZpc2libGVGaWxlcyA9IGZvbGRlckNvbnRlbnRzLmZpbGVzLmZpbHRlcihmID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBmLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhZmlsZU5hbWUuc3RhcnRzV2l0aCgnLicpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaXNFbXB0eSA9IHZpc2libGVGaWxlcy5sZW5ndGggPT09IDAgJiYgZm9sZGVyQ29udGVudHMuZm9sZGVycy5sZW5ndGggPT09IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBGb2xkZXIgaXMgZW1wdHkgKG9yIG9ubHkgY29udGFpbnMgaGlkZGVuIGZpbGVzKSwgc2FmZSB0byBkZWxldGVcbiAgICAgICAgICAgICAgICAgICAgLy8gcm1kaXIgd2l0aCByZWN1cnNpdmU9dHJ1ZSB3aWxsIGhhbmRsZSBoaWRkZW4gZmlsZXNcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdmF1bHQuYWRhcHRlci5ybWRpcihmb2xkZXIucGF0aCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFttb3ZlQW5kTWVyZ2VGb2xkZXJzXSBcdTI2QTBcdUZFMEYgRm9sZGVyIG5vdCBlbXB0eSwgc2tpcHBpbmcgZGVsZXRpb246ICR7Zm9sZGVyLnBhdGh9ICgke3Zpc2libGVGaWxlcy5sZW5ndGh9IGZpbGVzLCAke2ZvbGRlckNvbnRlbnRzLmZvbGRlcnMubGVuZ3RofSBmb2xkZXJzKWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgICAgICAvLyBGb2xkZXIgbWlnaHQgaGF2ZSBhbHJlYWR5IGJlZW4gZGVsZXRlZCwgb3IgbWlnaHQgbm90IGV4aXN0XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBub3QgYSBjcml0aWNhbCBlcnJvciAtIGp1c3QgbG9nIGl0XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBlcnJvci5tZXNzYWdlIHx8IFN0cmluZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgaWYgKCFlcnJvck1zZy5pbmNsdWRlcyhcImRvZXMgbm90IGV4aXN0XCIpICYmICFlcnJvck1zZy5pbmNsdWRlcyhcIkVOT0VOVFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgW21vdmVBbmRNZXJnZUZvbGRlcnNdIFx1Mjc0QyBDb3VsZCBub3QgZGVsZXRlIGZvbGRlciAke2ZvbGRlci5wYXRofTogJHtlcnJvck1zZ31gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWxldGUgZW1wdHkgcGFyZW50IGZvbGRlcnMgcmVjdXJzaXZlbHlcbiAgICAgICAgLy8gU3RhcnQgZnJvbSB0aGUgb3JpZ2luYWwgZm9sZGVyJ3MgcGFyZW50IGFuZCBnbyB1cFxuICAgICAgICBsZXQgY3VycmVudEZvbGRlciA9IG9sZEZvbGRlci5wYXJlbnQ7XG4gICAgICAgIHdoaWxlIChjdXJyZW50Rm9sZGVyICYmIGN1cnJlbnRGb2xkZXIucGF0aCAhPT0gXCIvXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZm9sZGVyIHN0aWxsIGV4aXN0c1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHZhdWx0LmFkYXB0ZXIuZXhpc3RzKGN1cnJlbnRGb2xkZXIucGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZm9sZGVyIGlzIGFjdHVhbGx5IGVtcHR5IHVzaW5nIGxvdy1sZXZlbCBBUElcbiAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJDb250ZW50cyA9IGF3YWl0IHZhdWx0LmFkYXB0ZXIubGlzdChjdXJyZW50Rm9sZGVyLnBhdGgpO1xuXG4gICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBoaWRkZW4gZmlsZXMgKGxpa2UgLkRTX1N0b3JlIG9uIG1hY09TKVxuICAgICAgICAgICAgICAgIGNvbnN0IHZpc2libGVGaWxlcyA9IGZvbGRlckNvbnRlbnRzLmZpbGVzLmZpbHRlcihmID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBmLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhZmlsZU5hbWUuc3RhcnRzV2l0aCgnLicpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaXNFbXB0eSA9IHZpc2libGVGaWxlcy5sZW5ndGggPT09IDAgJiYgZm9sZGVyQ29udGVudHMuZm9sZGVycy5sZW5ndGggPT09IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBGb2xkZXIgaXMgZW1wdHkgKG9yIG9ubHkgY29udGFpbnMgaGlkZGVuIGZpbGVzKSwgc2FmZSB0byBkZWxldGVcbiAgICAgICAgICAgICAgICAgICAgLy8gcm1kaXIgd2l0aCByZWN1cnNpdmU9dHJ1ZSB3aWxsIGhhbmRsZSBoaWRkZW4gZmlsZXNcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdmF1bHQuYWRhcHRlci5ybWRpcihjdXJyZW50Rm9sZGVyLnBhdGgsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIHVwIHRvIHRoZSBuZXh0IHBhcmVudFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Rm9sZGVyID0gY3VycmVudEZvbGRlci5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGFyZW50IGZvbGRlciBpcyBub3QgZW1wdHkgLSBzdG9wIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgICAgIC8vIFBhcmVudCBmb2xkZXIgZXJyb3IgLSBzdG9wIGhlcmVcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBlcnJvcnMgPT09IDAsXG4gICAgICAgICAgICBtb3ZlZCxcbiAgICAgICAgICAgIHNraXBwZWQsXG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgICAgICBlcnJvckRldGFpbHM6IGVycm9yRGV0YWlscy5sZW5ndGggPiAwID8gZXJyb3JEZXRhaWxzIDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBtZXJnZSBmb2xkZXJzOmAsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbW92ZWQsXG4gICAgICAgICAgICBza2lwcGVkLFxuICAgICAgICAgICAgZXJyb3JzOiBlcnJvcnMgKyAxLFxuICAgICAgICAgICAgZXJyb3JEZXRhaWxzOiBbYENyaXRpY2FsIGVycm9yOiAke2Vycm9yLm1lc3NhZ2UgfHwgU3RyaW5nKGVycm9yKX1gXVxuICAgICAgICB9O1xuICAgIH1cbn0iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3NlcnZpY2VzL2xpbmstdXBkYXRlLXNlcnZpY2UudHNcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQgeyBVcGdyYWRlUHJvZ3Jlc3NNb2RhbCB9IGZyb20gXCIuLi91cGdyYWRlL3V0aWxzL3Byb2dyZXNzLW1vZGFsXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlua1VwZGF0ZVN0YXRzIHtcbiAgICBjb252ZXJzYXRpb25zU2Nhbm5lZDogbnVtYmVyO1xuICAgIHJlcG9ydHNTY2FubmVkOiBudW1iZXI7XG4gICAgYXR0YWNobWVudExpbmtzVXBkYXRlZDogbnVtYmVyO1xuICAgIGNvbnZlcnNhdGlvbkxpbmtzVXBkYXRlZDogbnVtYmVyO1xuICAgIGZpbGVzTW9kaWZpZWQ6IG51bWJlcjtcbiAgICBlcnJvcnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaW5rVXBkYXRlUHJvZ3Jlc3Mge1xuICAgIHBoYXNlOiAnc2Nhbm5pbmcnIHwgJ3VwZGF0aW5nLWF0dGFjaG1lbnRzJyB8ICd1cGRhdGluZy1jb252ZXJzYXRpb25zJyB8ICd1cGRhdGluZy1hcnRpZmFjdHMnIHwgJ2NvbXBsZXRlJyB8ICdlcnJvcic7XG4gICAgY3VycmVudDogbnVtYmVyO1xuICAgIHRvdGFsOiBudW1iZXI7XG4gICAgZGV0YWlsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBMaW5rVXBkYXRlU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4pIHt9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYXR0YWNobWVudCBsaW5rcyB3aGVuIGF0dGFjaG1lbnQgZm9sZGVyIHBhdGggY2hhbmdlc1xuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZUF0dGFjaG1lbnRMaW5rcyhcbiAgICAgICAgb2xkQXR0YWNobWVudFBhdGg6IHN0cmluZyxcbiAgICAgICAgbmV3QXR0YWNobWVudFBhdGg6IHN0cmluZyxcbiAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjaz86IChwcm9ncmVzczogTGlua1VwZGF0ZVByb2dyZXNzKSA9PiB2b2lkXG4gICAgKTogUHJvbWlzZTxMaW5rVXBkYXRlU3RhdHM+IHtcbiAgICAgICAgY29uc3Qgc3RhdHM6IExpbmtVcGRhdGVTdGF0cyA9IHtcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbnNTY2FubmVkOiAwLFxuICAgICAgICAgICAgcmVwb3J0c1NjYW5uZWQ6IDAsXG4gICAgICAgICAgICBhdHRhY2htZW50TGlua3NVcGRhdGVkOiAwLFxuICAgICAgICAgICAgY29udmVyc2F0aW9uTGlua3NVcGRhdGVkOiAwLFxuICAgICAgICAgICAgZmlsZXNNb2RpZmllZDogMCxcbiAgICAgICAgICAgIGVycm9yczogMFxuICAgICAgICB9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgYWxsIGNvbnZlcnNhdGlvbiBmaWxlc1xuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRmlsZXMgPSBhd2FpdCB0aGlzLmdldENvbnZlcnNhdGlvbkZpbGVzKCk7XG4gICAgICAgICAgICBzdGF0cy5jb252ZXJzYXRpb25zU2Nhbm5lZCA9IGNvbnZlcnNhdGlvbkZpbGVzLmxlbmd0aDtcblxuICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjaz8uKHtcbiAgICAgICAgICAgICAgICBwaGFzZTogJ3NjYW5uaW5nJyxcbiAgICAgICAgICAgICAgICBjdXJyZW50OiAwLFxuICAgICAgICAgICAgICAgIHRvdGFsOiBjb252ZXJzYXRpb25GaWxlcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgZGV0YWlsOiBgRm91bmQgJHtjb252ZXJzYXRpb25GaWxlcy5sZW5ndGh9IGNvbnZlcnNhdGlvbnMgdG8gc2NhbmBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGNvbnZlcnNhdGlvbnMgaW4gYmF0Y2hlc1xuICAgICAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnZlcnNhdGlvbkZpbGVzLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaCA9IGNvbnZlcnNhdGlvbkZpbGVzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjaz8uKHtcbiAgICAgICAgICAgICAgICAgICAgcGhhc2U6ICd1cGRhdGluZy1hdHRhY2htZW50cycsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6IGksXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiBjb252ZXJzYXRpb25GaWxlcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbDogYFVwZGF0aW5nIGF0dGFjaG1lbnQgbGlua3M6ICR7aX0vJHtjb252ZXJzYXRpb25GaWxlcy5sZW5ndGh9IGZpbGVzIHByb2Nlc3NlZGBcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBiYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy51cGRhdGVBdHRhY2htZW50TGlua3NJbkZpbGUoZmlsZSwgb2xkQXR0YWNobWVudFBhdGgsIG5ld0F0dGFjaG1lbnRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLmF0dGFjaG1lbnRMaW5rc1VwZGF0ZWQgKz0gcmVzdWx0LmxpbmtzVXBkYXRlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZmlsZU1vZGlmaWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMuZmlsZXNNb2RpZmllZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMuZXJyb3JzKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoYEVycm9yIHVwZGF0aW5nIGF0dGFjaG1lbnQgbGlua3MgaW4gJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNtYWxsIGRlbGF5IGJldHdlZW4gYmF0Y2hlcyB0byBwcmV2ZW50IFVJIGJsb2NraW5nXG4gICAgICAgICAgICAgICAgaWYgKGkgKyBiYXRjaFNpemUgPCBjb252ZXJzYXRpb25GaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrPy4oe1xuICAgICAgICAgICAgICAgIHBoYXNlOiAnY29tcGxldGUnLFxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IGNvbnZlcnNhdGlvbkZpbGVzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICB0b3RhbDogY29udmVyc2F0aW9uRmlsZXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGRldGFpbDogYFVwZGF0ZWQgJHtzdGF0cy5hdHRhY2htZW50TGlua3NVcGRhdGVkfSBhdHRhY2htZW50IGxpbmtzIGluICR7c3RhdHMuZmlsZXNNb2RpZmllZH0gZmlsZXNgXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0YXRzO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBhdHRhY2htZW50IGxpbmtzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrPy4oe1xuICAgICAgICAgICAgICAgIHBoYXNlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IDAsXG4gICAgICAgICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgICAgICAgZGV0YWlsOiBgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGNvbnZlcnNhdGlvbiBsaW5rcyB3aGVuIGNvbnZlcnNhdGlvbiBmb2xkZXIgcGF0aCBjaGFuZ2VzXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlQ29udmVyc2F0aW9uTGlua3MoXG4gICAgICAgIG9sZENvbnZlcnNhdGlvblBhdGg6IHN0cmluZyxcbiAgICAgICAgbmV3Q29udmVyc2F0aW9uUGF0aDogc3RyaW5nLFxuICAgICAgICBwcm9ncmVzc0NhbGxiYWNrPzogKHByb2dyZXNzOiBMaW5rVXBkYXRlUHJvZ3Jlc3MpID0+IHZvaWRcbiAgICApOiBQcm9taXNlPExpbmtVcGRhdGVTdGF0cz4ge1xuICAgICAgICBjb25zdCBzdGF0czogTGlua1VwZGF0ZVN0YXRzID0ge1xuICAgICAgICAgICAgY29udmVyc2F0aW9uc1NjYW5uZWQ6IDAsXG4gICAgICAgICAgICByZXBvcnRzU2Nhbm5lZDogMCxcbiAgICAgICAgICAgIGF0dGFjaG1lbnRMaW5rc1VwZGF0ZWQ6IDAsXG4gICAgICAgICAgICBjb252ZXJzYXRpb25MaW5rc1VwZGF0ZWQ6IDAsXG4gICAgICAgICAgICBmaWxlc01vZGlmaWVkOiAwLFxuICAgICAgICAgICAgZXJyb3JzOiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEdldCBhbGwgcmVwb3J0IGZpbGVzIGFuZCBDbGF1ZGUgYXJ0aWZhY3QgZmlsZXNcbiAgICAgICAgICAgIGNvbnN0IHJlcG9ydEZpbGVzID0gYXdhaXQgdGhpcy5nZXRSZXBvcnRGaWxlcygpO1xuICAgICAgICAgICAgY29uc3QgYXJ0aWZhY3RGaWxlcyA9IGF3YWl0IHRoaXMuZ2V0Q2xhdWRlQXJ0aWZhY3RGaWxlcygpO1xuICAgICAgICAgICAgY29uc3QgdG90YWxGaWxlcyA9IHJlcG9ydEZpbGVzLmxlbmd0aCArIGFydGlmYWN0RmlsZXMubGVuZ3RoO1xuICAgICAgICAgICAgc3RhdHMucmVwb3J0c1NjYW5uZWQgPSByZXBvcnRGaWxlcy5sZW5ndGg7XG5cbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2s/Lih7XG4gICAgICAgICAgICAgICAgcGhhc2U6ICdzY2FubmluZycsXG4gICAgICAgICAgICAgICAgY3VycmVudDogMCxcbiAgICAgICAgICAgICAgICB0b3RhbDogdG90YWxGaWxlcyxcbiAgICAgICAgICAgICAgICBkZXRhaWw6IGBGb3VuZCAke3JlcG9ydEZpbGVzLmxlbmd0aH0gcmVwb3J0cyBhbmQgJHthcnRpZmFjdEZpbGVzLmxlbmd0aH0gYXJ0aWZhY3RzIHRvIHNjYW5gXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUHJvY2VzcyByZXBvcnRzIGluIGJhdGNoZXNcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IDU7IC8vIFNtYWxsZXIgYmF0Y2hlcyBmb3IgcmVwb3J0cyBzaW5jZSB0aGV5J3JlIHR5cGljYWxseSBmZXdlclxuICAgICAgICAgICAgbGV0IHByb2Nlc3NlZENvdW50ID0gMDtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXBvcnRGaWxlcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSByZXBvcnRGaWxlcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKTtcblxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2s/Lih7XG4gICAgICAgICAgICAgICAgICAgIHBoYXNlOiAndXBkYXRpbmctY29udmVyc2F0aW9ucycsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6IHByb2Nlc3NlZENvdW50LFxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogdG90YWxGaWxlcyxcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBgVXBkYXRpbmcgY29udmVyc2F0aW9uIGxpbmtzIGluIHJlcG9ydHM6ICR7aX0vJHtyZXBvcnRGaWxlcy5sZW5ndGh9IHByb2Nlc3NlZGBcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBiYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy51cGRhdGVDb252ZXJzYXRpb25MaW5rc0luRmlsZShmaWxlLCBvbGRDb252ZXJzYXRpb25QYXRoLCBuZXdDb252ZXJzYXRpb25QYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLmNvbnZlcnNhdGlvbkxpbmtzVXBkYXRlZCArPSByZXN1bHQubGlua3NVcGRhdGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5maWxlTW9kaWZpZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5maWxlc01vZGlmaWVkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5lcnJvcnMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci5lcnJvcihgRXJyb3IgdXBkYXRpbmcgY29udmVyc2F0aW9uIGxpbmtzIGluICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBwcm9jZXNzZWRDb3VudCArPSBiYXRjaC5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICAvLyBTbWFsbCBkZWxheSBiZXR3ZWVuIGJhdGNoZXNcbiAgICAgICAgICAgICAgICBpZiAoaSArIGJhdGNoU2l6ZSA8IHJlcG9ydEZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFByb2Nlc3MgQ2xhdWRlIGFydGlmYWN0cyBpbiBiYXRjaGVzXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFydGlmYWN0RmlsZXMubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhdGNoID0gYXJ0aWZhY3RGaWxlcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKTtcblxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2s/Lih7XG4gICAgICAgICAgICAgICAgICAgIHBoYXNlOiAndXBkYXRpbmctYXJ0aWZhY3RzJyxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudDogcHJvY2Vzc2VkQ291bnQsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiB0b3RhbEZpbGVzLFxuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGBVcGRhdGluZyBjb252ZXJzYXRpb24gbGlua3MgaW4gYXJ0aWZhY3RzOiAke2l9LyR7YXJ0aWZhY3RGaWxlcy5sZW5ndGh9IHByb2Nlc3NlZGBcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBiYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy51cGRhdGVDb252ZXJzYXRpb25MaW5rSW5BcnRpZmFjdEZyb250bWF0dGVyKGZpbGUsIG9sZENvbnZlcnNhdGlvblBhdGgsIG5ld0NvbnZlcnNhdGlvblBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5saW5rc1VwZGF0ZWQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMuY29udmVyc2F0aW9uTGlua3NVcGRhdGVkICs9IHJlc3VsdC5saW5rc1VwZGF0ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmZpbGVNb2RpZmllZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLmZpbGVzTW9kaWZpZWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLmVycm9ycysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ubG9nZ2VyLmVycm9yKGBFcnJvciB1cGRhdGluZyBjb252ZXJzYXRpb24gbGluayBpbiBhcnRpZmFjdCAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkQ291bnQgKz0gYmF0Y2gubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgLy8gU21hbGwgZGVsYXkgYmV0d2VlbiBiYXRjaGVzXG4gICAgICAgICAgICAgICAgaWYgKGkgKyBiYXRjaFNpemUgPCBhcnRpZmFjdEZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2s/Lih7XG4gICAgICAgICAgICAgICAgcGhhc2U6ICdjb21wbGV0ZScsXG4gICAgICAgICAgICAgICAgY3VycmVudDogdG90YWxGaWxlcyxcbiAgICAgICAgICAgICAgICB0b3RhbDogdG90YWxGaWxlcyxcbiAgICAgICAgICAgICAgICBkZXRhaWw6IGBVcGRhdGVkICR7c3RhdHMuY29udmVyc2F0aW9uTGlua3NVcGRhdGVkfSBjb252ZXJzYXRpb24gbGlua3MgaW4gJHtzdGF0cy5maWxlc01vZGlmaWVkfSBmaWxlc2BcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RhdHM7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGNvbnZlcnNhdGlvbiBsaW5rczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjaz8uKHtcbiAgICAgICAgICAgICAgICBwaGFzZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICBjdXJyZW50OiAwLFxuICAgICAgICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgICAgICAgIGRldGFpbDogYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVzdGltYXRlIHRpbWUgZm9yIGxpbmsgdXBkYXRlcyBiYXNlZCBvbiBmaWxlIGNvdW50XG4gICAgICovXG4gICAgYXN5bmMgZXN0aW1hdGVVcGRhdGVUaW1lKGZvbGRlclR5cGU6ICdhdHRhY2htZW50cycgfCAnY29udmVyc2F0aW9ucycpOiBQcm9taXNlPHsgZmlsZUNvdW50OiBudW1iZXI7IGVzdGltYXRlZFNlY29uZHM6IG51bWJlciB9PiB7XG4gICAgICAgIGxldCBmaWxlQ291bnQgPSAwO1xuXG4gICAgICAgIGlmIChmb2xkZXJUeXBlID09PSAnYXR0YWNobWVudHMnKSB7XG4gICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25GaWxlcyA9IGF3YWl0IHRoaXMuZ2V0Q29udmVyc2F0aW9uRmlsZXMoKTtcbiAgICAgICAgICAgIGZpbGVDb3VudCA9IGNvbnZlcnNhdGlvbkZpbGVzLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcG9ydEZpbGVzID0gYXdhaXQgdGhpcy5nZXRSZXBvcnRGaWxlcygpO1xuICAgICAgICAgICAgZmlsZUNvdW50ID0gcmVwb3J0RmlsZXMubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXN0aW1hdGUgfjAuMSBzZWNvbmRzIHBlciBmaWxlIGZvciBzbWFsbCBvcGVyYXRpb25zLCB3aXRoIG1pbmltdW0gMiBzZWNvbmRzXG4gICAgICAgIGNvbnN0IGVzdGltYXRlZFNlY29uZHMgPSBNYXRoLm1heCgyLCBNYXRoLmNlaWwoZmlsZUNvdW50ICogMC4xKSk7XG5cbiAgICAgICAgcmV0dXJuIHsgZmlsZUNvdW50LCBlc3RpbWF0ZWRTZWNvbmRzIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBjb252ZXJzYXRpb24gZmlsZXMgZnJvbSB0aGUgdmF1bHRcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGdldENvbnZlcnNhdGlvbkZpbGVzKCk6IFByb21pc2U8VEZpbGVbXT4ge1xuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25Gb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb252ZXJzYXRpb25Gb2xkZXI7XG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgICAgICByZXR1cm4gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFmaWxlLnBhdGguc3RhcnRzV2l0aChjb252ZXJzYXRpb25Gb2xkZXIpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIEV4Y2x1ZGUgUmVwb3J0cyBhbmQgQXR0YWNobWVudHMgZm9sZGVyc1xuICAgICAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gZmlsZS5wYXRoLnN1YnN0cmluZyhjb252ZXJzYXRpb25Gb2xkZXIubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICBpZiAocmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ1JlcG9ydHMvJykgfHxcbiAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnQXR0YWNobWVudHMvJykgfHxcbiAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgncmVwb3J0cy8nKSB8fFxuICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdhdHRhY2htZW50cy8nKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgcmVwb3J0IGZpbGVzIGZyb20gdGhlIHZhdWx0XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRSZXBvcnRGaWxlcygpOiBQcm9taXNlPFRGaWxlW10+IHtcbiAgICAgICAgY29uc3QgcmVwb3J0Rm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwb3J0Rm9sZGVyO1xuICAgICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAgICAgcmV0dXJuIGFsbEZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKHJlcG9ydEZvbGRlcikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgQ2xhdWRlIGFydGlmYWN0IGZpbGVzIGZyb20gdGhlIHZhdWx0XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRDbGF1ZGVBcnRpZmFjdEZpbGVzKCk6IFByb21pc2U8VEZpbGVbXT4ge1xuICAgICAgICBjb25zdCBhdHRhY2htZW50Rm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudEZvbGRlcjtcbiAgICAgICAgY29uc3QgY2xhdWRlQXJ0aWZhY3RzUGF0aCA9IGAke2F0dGFjaG1lbnRGb2xkZXJ9L2NsYXVkZS9hcnRpZmFjdHNgO1xuICAgICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAgICAgcmV0dXJuIGFsbEZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKGNsYXVkZUFydGlmYWN0c1BhdGgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYXR0YWNobWVudCBsaW5rcyBpbiBhIHNpbmdsZSBmaWxlXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVBdHRhY2htZW50TGlua3NJbkZpbGUoXG4gICAgICAgIGZpbGU6IFRGaWxlLFxuICAgICAgICBvbGRBdHRhY2htZW50UGF0aDogc3RyaW5nLFxuICAgICAgICBuZXdBdHRhY2htZW50UGF0aDogc3RyaW5nXG4gICAgKTogUHJvbWlzZTx7IGxpbmtzVXBkYXRlZDogbnVtYmVyOyBmaWxlTW9kaWZpZWQ6IGJvb2xlYW4gfT4ge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgIGxldCB1cGRhdGVkQ29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIGxldCBsaW5rc1VwZGF0ZWQgPSAwO1xuXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBwYXRoczogcmVtb3ZlIHRyYWlsaW5nIHNsYXNoZXMgZm9yIGNvbnNpc3RlbnQgbWF0Y2hpbmdcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZE9sZFBhdGggPSBvbGRBdHRhY2htZW50UGF0aC5yZXBsYWNlKC9cXC8rJC8sICcnKTtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZE5ld1BhdGggPSBuZXdBdHRhY2htZW50UGF0aC5yZXBsYWNlKC9cXC8rJC8sICcnKTtcblxuICAgICAgICAvLyBFc2NhcGUgc3BlY2lhbCByZWdleCBjaGFyYWN0ZXJzIGluIHBhdGhzXG4gICAgICAgIGNvbnN0IGVzY2FwZWRPbGRQYXRoID0gdGhpcy5lc2NhcGVSZWdFeHAobm9ybWFsaXplZE9sZFBhdGgpO1xuXG4gICAgICAgIC8vIFBhdHRlcm4gMTogTWFya2Rvd24gaW1hZ2UgbGlua3MgIVthbHRdKHBhdGgvLi4uKVxuICAgICAgICAvLyBNYXRjaGVzOiAhW2FsdF0ob2xkUGF0aC9zdWJwYXRoL2ZpbGUucG5nKVxuICAgICAgICBjb25zdCBpbWFnZVBhdHRlcm4gPSBuZXcgUmVnRXhwKGAoIVxcXFxbW15cXFxcXV0qXFxcXF1cXFxcKCkke2VzY2FwZWRPbGRQYXRofSgvW14pXStcXFxcKSlgLCAnZycpO1xuICAgICAgICB1cGRhdGVkQ29udGVudCA9IHVwZGF0ZWRDb250ZW50LnJlcGxhY2UoaW1hZ2VQYXR0ZXJuLCAobWF0Y2gsIHByZWZpeCwgc3VmZml4KSA9PiB7XG4gICAgICAgICAgICBsaW5rc1VwZGF0ZWQrKztcbiAgICAgICAgICAgIHJldHVybiBgJHtwcmVmaXh9JHtub3JtYWxpemVkTmV3UGF0aH0ke3N1ZmZpeH1gO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQYXR0ZXJuIDI6IE1hcmtkb3duIGZpbGUgbGlua3MgW3RleHRdKHBhdGgvLi4uKVxuICAgICAgICAvLyBNYXRjaGVzOiBbdGV4dF0ob2xkUGF0aC9zdWJwYXRoL2ZpbGUucGRmKVxuICAgICAgICBjb25zdCBsaW5rUGF0dGVybiA9IG5ldyBSZWdFeHAoYChcXFxcW1teXFxcXF1dKlxcXFxdXFxcXCgpJHtlc2NhcGVkT2xkUGF0aH0oL1teKV0rXFxcXCkpYCwgJ2cnKTtcbiAgICAgICAgdXBkYXRlZENvbnRlbnQgPSB1cGRhdGVkQ29udGVudC5yZXBsYWNlKGxpbmtQYXR0ZXJuLCAobWF0Y2gsIHByZWZpeCwgc3VmZml4KSA9PiB7XG4gICAgICAgICAgICBsaW5rc1VwZGF0ZWQrKztcbiAgICAgICAgICAgIHJldHVybiBgJHtwcmVmaXh9JHtub3JtYWxpemVkTmV3UGF0aH0ke3N1ZmZpeH1gO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQYXR0ZXJuIDM6IE9ic2lkaWFuIGltYWdlIGVtYmVkcyAhW1twYXRoLy4uLl1dXG4gICAgICAgIC8vIE1hdGNoZXM6ICFbW29sZFBhdGgvc3VicGF0aC9maWxlLnBuZ11dXG4gICAgICAgIGNvbnN0IG9ic2lkaWFuSW1hZ2VQYXR0ZXJuID0gbmV3IFJlZ0V4cChgKCFcXFxcW1xcXFxbKSR7ZXNjYXBlZE9sZFBhdGh9KC9bXlxcXFxdXStcXFxcXVxcXFxdKWAsICdnJyk7XG4gICAgICAgIHVwZGF0ZWRDb250ZW50ID0gdXBkYXRlZENvbnRlbnQucmVwbGFjZShvYnNpZGlhbkltYWdlUGF0dGVybiwgKG1hdGNoLCBwcmVmaXgsIHN1ZmZpeCkgPT4ge1xuICAgICAgICAgICAgbGlua3NVcGRhdGVkKys7XG4gICAgICAgICAgICByZXR1cm4gYCR7cHJlZml4fSR7bm9ybWFsaXplZE5ld1BhdGh9JHtzdWZmaXh9YDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUGF0dGVybiA0OiBPYnNpZGlhbiBmaWxlIGxpbmtzIFtbcGF0aC8uLi5dXVxuICAgICAgICAvLyBNYXRjaGVzOiBbW29sZFBhdGgvc3VicGF0aC9maWxlLm1kXV1cbiAgICAgICAgY29uc3Qgb2JzaWRpYW5MaW5rUGF0dGVybiA9IG5ldyBSZWdFeHAoYChcXFxcW1xcXFxbKSR7ZXNjYXBlZE9sZFBhdGh9KC9bXlxcXFxdXStcXFxcXVxcXFxdKWAsICdnJyk7XG4gICAgICAgIHVwZGF0ZWRDb250ZW50ID0gdXBkYXRlZENvbnRlbnQucmVwbGFjZShvYnNpZGlhbkxpbmtQYXR0ZXJuLCAobWF0Y2gsIHByZWZpeCwgc3VmZml4KSA9PiB7XG4gICAgICAgICAgICBsaW5rc1VwZGF0ZWQrKztcbiAgICAgICAgICAgIHJldHVybiBgJHtwcmVmaXh9JHtub3JtYWxpemVkTmV3UGF0aH0ke3N1ZmZpeH1gO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBmaWxlTW9kaWZpZWQgPSBjb250ZW50ICE9PSB1cGRhdGVkQ29udGVudDtcbiAgICAgICAgaWYgKGZpbGVNb2RpZmllZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCB1cGRhdGVkQ29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBsaW5rc1VwZGF0ZWQsIGZpbGVNb2RpZmllZCB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBjb252ZXJzYXRpb24gbGlua3MgaW4gYSBzaW5nbGUgcmVwb3J0IGZpbGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUNvbnZlcnNhdGlvbkxpbmtzSW5GaWxlKFxuICAgICAgICBmaWxlOiBURmlsZSxcbiAgICAgICAgb2xkQ29udmVyc2F0aW9uUGF0aDogc3RyaW5nLFxuICAgICAgICBuZXdDb252ZXJzYXRpb25QYXRoOiBzdHJpbmdcbiAgICApOiBQcm9taXNlPHsgbGlua3NVcGRhdGVkOiBudW1iZXI7IGZpbGVNb2RpZmllZDogYm9vbGVhbiB9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgbGV0IHVwZGF0ZWRDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgbGV0IGxpbmtzVXBkYXRlZCA9IDA7XG5cbiAgICAgICAgLy8gTm9ybWFsaXplIHBhdGhzOiByZW1vdmUgdHJhaWxpbmcgc2xhc2hlcyBmb3IgY29uc2lzdGVudCBtYXRjaGluZ1xuICAgICAgICBjb25zdCBub3JtYWxpemVkT2xkUGF0aCA9IG9sZENvbnZlcnNhdGlvblBhdGgucmVwbGFjZSgvXFwvKyQvLCAnJyk7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWROZXdQYXRoID0gbmV3Q29udmVyc2F0aW9uUGF0aC5yZXBsYWNlKC9cXC8rJC8sICcnKTtcblxuICAgICAgICAvLyBFc2NhcGUgc3BlY2lhbCByZWdleCBjaGFyYWN0ZXJzIGluIHBhdGhzXG4gICAgICAgIGNvbnN0IGVzY2FwZWRPbGRQYXRoID0gdGhpcy5lc2NhcGVSZWdFeHAobm9ybWFsaXplZE9sZFBhdGgpO1xuXG4gICAgICAgIC8vIFBhdHRlcm46IE9ic2lkaWFuIGxpbmtzIHdpdGggYWxpYXNlcyBbW3BhdGgvLi4ufHRpdGxlXV1cbiAgICAgICAgY29uc3QgbGlua1dpdGhBbGlhc1BhdHRlcm4gPSBuZXcgUmVnRXhwKGAoXFxcXFtcXFxcWykke2VzY2FwZWRPbGRQYXRofSgvW158XFxcXF1dKykoXFxcXHxbXlxcXFxdXStcXFxcXVxcXFxdKWAsICdnJyk7XG4gICAgICAgIHVwZGF0ZWRDb250ZW50ID0gdXBkYXRlZENvbnRlbnQucmVwbGFjZShsaW5rV2l0aEFsaWFzUGF0dGVybiwgKG1hdGNoLCBwcmVmaXgsIHBhdGhTdWZmaXgsIGFsaWFzU3VmZml4KSA9PiB7XG4gICAgICAgICAgICBsaW5rc1VwZGF0ZWQrKztcbiAgICAgICAgICAgIHJldHVybiBgJHtwcmVmaXh9JHtub3JtYWxpemVkTmV3UGF0aH0ke3BhdGhTdWZmaXh9JHthbGlhc1N1ZmZpeH1gO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQYXR0ZXJuOiBTaW1wbGUgT2JzaWRpYW4gbGlua3MgW1twYXRoLy4uLl1dXG4gICAgICAgIGNvbnN0IHNpbXBsZUxpbmtQYXR0ZXJuID0gbmV3IFJlZ0V4cChgKFxcXFxbXFxcXFspJHtlc2NhcGVkT2xkUGF0aH0oL1teXFxcXF1dK1xcXFxdXFxcXF0pYCwgJ2cnKTtcbiAgICAgICAgdXBkYXRlZENvbnRlbnQgPSB1cGRhdGVkQ29udGVudC5yZXBsYWNlKHNpbXBsZUxpbmtQYXR0ZXJuLCAobWF0Y2gsIHByZWZpeCwgc3VmZml4KSA9PiB7XG4gICAgICAgICAgICBsaW5rc1VwZGF0ZWQrKztcbiAgICAgICAgICAgIHJldHVybiBgJHtwcmVmaXh9JHtub3JtYWxpemVkTmV3UGF0aH0ke3N1ZmZpeH1gO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBmaWxlTW9kaWZpZWQgPSBjb250ZW50ICE9PSB1cGRhdGVkQ29udGVudDtcbiAgICAgICAgaWYgKGZpbGVNb2RpZmllZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCB1cGRhdGVkQ29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBsaW5rc1VwZGF0ZWQsIGZpbGVNb2RpZmllZCB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBjb252ZXJzYXRpb24gbGlua3MgaW4gQ2xhdWRlIGFydGlmYWN0IChib3RoIGZyb250bWF0dGVyIGFuZCBib2R5KVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQ29udmVyc2F0aW9uTGlua0luQXJ0aWZhY3RGcm9udG1hdHRlcihcbiAgICAgICAgZmlsZTogVEZpbGUsXG4gICAgICAgIG9sZENvbnZlcnNhdGlvblBhdGg6IHN0cmluZyxcbiAgICAgICAgbmV3Q29udmVyc2F0aW9uUGF0aDogc3RyaW5nXG4gICAgKTogUHJvbWlzZTx7IGxpbmtzVXBkYXRlZDogbnVtYmVyOyBmaWxlTW9kaWZpZWQ6IGJvb2xlYW4gfT4ge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgIGxldCB1cGRhdGVkQ29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIGxldCBsaW5rc1VwZGF0ZWQgPSAwO1xuXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBwYXRoczogcmVtb3ZlIHRyYWlsaW5nIHNsYXNoZXMgZm9yIGNvbnNpc3RlbnQgbWF0Y2hpbmdcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZE9sZFBhdGggPSBvbGRDb252ZXJzYXRpb25QYXRoLnJlcGxhY2UoL1xcLyskLywgJycpO1xuICAgICAgICBjb25zdCBub3JtYWxpemVkTmV3UGF0aCA9IG5ld0NvbnZlcnNhdGlvblBhdGgucmVwbGFjZSgvXFwvKyQvLCAnJyk7XG5cbiAgICAgICAgLy8gRXNjYXBlIHNwZWNpYWwgcmVnZXggY2hhcmFjdGVycyBpbiBwYXRoc1xuICAgICAgICBjb25zdCBlc2NhcGVkT2xkUGF0aCA9IHRoaXMuZXNjYXBlUmVnRXhwKG5vcm1hbGl6ZWRPbGRQYXRoKTtcblxuICAgICAgICAvLyBQYXR0ZXJuIDE6IGNvbnZlcnNhdGlvbl9saW5rIGluIGZyb250bWF0dGVyOiBcIltbb2xkUGF0aC8uLi5dXVwiIG9yIFwiW1tvbGRQYXRoLy4uLnxhbGlhc11dXCJcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXJMaW5rUGF0dGVybiA9IG5ldyBSZWdFeHAoXG4gICAgICAgICAgICBgKGNvbnZlcnNhdGlvbl9saW5rOlxcXFxzKlwiXFxcXFtcXFxcWykke2VzY2FwZWRPbGRQYXRofSgvW15cXFxcXV0rKShcXFxcXVxcXFxdXCIpYCxcbiAgICAgICAgICAgICdnJ1xuICAgICAgICApO1xuICAgICAgICB1cGRhdGVkQ29udGVudCA9IHVwZGF0ZWRDb250ZW50LnJlcGxhY2UoZnJvbnRtYXR0ZXJMaW5rUGF0dGVybiwgKG1hdGNoLCBwcmVmaXgsIHBhdGhTdWZmaXgsIHN1ZmZpeCkgPT4ge1xuICAgICAgICAgICAgbGlua3NVcGRhdGVkKys7XG4gICAgICAgICAgICByZXR1cm4gYCR7cHJlZml4fSR7bm9ybWFsaXplZE5ld1BhdGh9JHtwYXRoU3VmZml4fSR7c3VmZml4fWA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFBhdHRlcm4gMjogKipDb252ZXJzYXRpb246KiogbGluayBpbiBib2R5IHdpdGggYWxpYXMgW1twYXRoLy4uLnx0aXRsZV1dXG4gICAgICAgIGNvbnN0IGJvZHlMaW5rV2l0aEFsaWFzUGF0dGVybiA9IG5ldyBSZWdFeHAoXG4gICAgICAgICAgICBgKFxcXFwqXFxcXCpDb252ZXJzYXRpb246XFxcXCpcXFxcKlxcXFxzKlxcXFxbXFxcXFspJHtlc2NhcGVkT2xkUGF0aH0oL1tefFxcXFxdXSspKFxcXFx8W15cXFxcXV0rXFxcXF1cXFxcXSlgLFxuICAgICAgICAgICAgJ2cnXG4gICAgICAgICk7XG4gICAgICAgIHVwZGF0ZWRDb250ZW50ID0gdXBkYXRlZENvbnRlbnQucmVwbGFjZShib2R5TGlua1dpdGhBbGlhc1BhdHRlcm4sIChtYXRjaCwgcHJlZml4LCBwYXRoU3VmZml4LCBhbGlhc1N1ZmZpeCkgPT4ge1xuICAgICAgICAgICAgbGlua3NVcGRhdGVkKys7XG4gICAgICAgICAgICByZXR1cm4gYCR7cHJlZml4fSR7bm9ybWFsaXplZE5ld1BhdGh9JHtwYXRoU3VmZml4fSR7YWxpYXNTdWZmaXh9YDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUGF0dGVybiAzOiAqKkNvbnZlcnNhdGlvbjoqKiBsaW5rIGluIGJvZHkgd2l0aG91dCBhbGlhcyBbW3BhdGhdXVxuICAgICAgICBjb25zdCBib2R5TGlua1NpbXBsZVBhdHRlcm4gPSBuZXcgUmVnRXhwKFxuICAgICAgICAgICAgYChcXFxcKlxcXFwqQ29udmVyc2F0aW9uOlxcXFwqXFxcXCpcXFxccypcXFxcW1xcXFxbKSR7ZXNjYXBlZE9sZFBhdGh9KC9bXlxcXFxdXStcXFxcXVxcXFxdKWAsXG4gICAgICAgICAgICAnZydcbiAgICAgICAgKTtcbiAgICAgICAgdXBkYXRlZENvbnRlbnQgPSB1cGRhdGVkQ29udGVudC5yZXBsYWNlKGJvZHlMaW5rU2ltcGxlUGF0dGVybiwgKG1hdGNoLCBwcmVmaXgsIHN1ZmZpeCkgPT4ge1xuICAgICAgICAgICAgbGlua3NVcGRhdGVkKys7XG4gICAgICAgICAgICByZXR1cm4gYCR7cHJlZml4fSR7bmV3Q29udmVyc2F0aW9uUGF0aH0ke3N1ZmZpeH1gO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBmaWxlTW9kaWZpZWQgPSBjb250ZW50ICE9PSB1cGRhdGVkQ29udGVudDtcbiAgICAgICAgaWYgKGZpbGVNb2RpZmllZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCB1cGRhdGVkQ29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBsaW5rc1VwZGF0ZWQsIGZpbGVNb2RpZmllZCB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVzY2FwZSBzcGVjaWFsIHJlZ2V4IGNoYXJhY3RlcnNcbiAgICAgKi9cbiAgICBwcml2YXRlIGVzY2FwZVJlZ0V4cChzdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3VwZ3JhZGUvdXRpbHMvcHJvZ3Jlc3MtbW9kYWwudHNcbmltcG9ydCB7IE1vZGFsLCBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSBQcm9ncmVzc1N0ZXAge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGV0YWlsPzogc3RyaW5nO1xuICAgIHByb2dyZXNzPzogbnVtYmVyOyAvLyAwLTEwMFxufVxuXG5leHBvcnQgY2xhc3MgVXBncmFkZVByb2dyZXNzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSB0aXRsZTogc3RyaW5nO1xuICAgIHByaXZhdGUgdG90YWxTdGVwczogbnVtYmVyO1xuICAgIHByaXZhdGUgY3VycmVudFN0ZXA6IG51bWJlciA9IDA7XG4gICAgXG4gICAgcHJpdmF0ZSBtb2RhbFRpdGxlRWw6IGFueTtcbiAgICBwcml2YXRlIHN0ZXBFbDogYW55O1xuICAgIHByaXZhdGUgcHJvZ3Jlc3NCYXJFbDogYW55O1xuICAgIHByaXZhdGUgc3RhdHVzRWw6IGFueTtcbiAgICBwcml2YXRlIGRldGFpbEVsOiBhbnk7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGl0bGU6IHN0cmluZywgdG90YWxTdGVwczogbnVtYmVyID0gMTAwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy50b3RhbFN0ZXBzID0gdG90YWxTdGVwcztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoXCJuZXh1cy1haS1jaGF0LWltcG9ydGVyLW1vZGFsXCIpO1xuXG4gICAgICAgIC8vIFRpdGxlXG4gICAgICAgIHRoaXMubW9kYWxUaXRsZUVsID0gY29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyBcbiAgICAgICAgICAgIHRleHQ6IHRoaXMudGl0bGUsIFxuICAgICAgICAgICAgY2xzOiBcIm1vZGFsLXRpdGxlXCIgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWNvbnRlbnRcIiB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN0ZXAgY291bnRlclxuICAgICAgICB0aGlzLnN0ZXBFbCA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwic3RlcC1jb3VudGVyXCIgfSk7XG4gICAgICAgIHRoaXMuc3RlcEVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBgO1xuXG4gICAgICAgIC8vIFByb2dyZXNzIGJhciBjb250YWluZXJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NDb250YWluZXIgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJwcm9ncmVzcy1jb250YWluZXJcIiB9KTtcbiAgICAgICAgcHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBgO1xuXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXJFbCA9IHByb2dyZXNzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJwcm9ncmVzcy1iYXJcIiB9KTtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhckVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgd2lkdGg6IDAlO1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogd2lkdGggMC4zcyBlYXNlO1xuICAgICAgICBgO1xuXG4gICAgICAgIC8vIEN1cnJlbnQgc3RhdHVzXG4gICAgICAgIHRoaXMuc3RhdHVzRWwgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInN0YXR1cy10ZXh0XCIgfSk7XG4gICAgICAgIHRoaXMuc3RhdHVzRWwuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIG1hcmdpbjogMTVweCAwO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gRGV0YWlsIHRleHRcbiAgICAgICAgdGhpcy5kZXRhaWxFbCA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwiZGV0YWlsLXRleHRcIiB9KTtcbiAgICAgICAgdGhpcy5kZXRhaWxFbC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDEuMmVtO1xuICAgICAgICBgO1xuXG4gICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3MoeyB0aXRsZTogXCJTdGFydGluZy4uLlwiLCBwcm9ncmVzczogMCB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgcHJvZ3Jlc3Mgd2l0aCBzdGVwIGluZm9ybWF0aW9uXG4gICAgICovXG4gICAgdXBkYXRlUHJvZ3Jlc3Moc3RlcDogUHJvZ3Jlc3NTdGVwKSB7XG4gICAgICAgIGlmIChzdGVwLnByb2dyZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBNYXRoLm1pbigxMDAsIE1hdGgubWF4KDAsIHN0ZXAucHJvZ3Jlc3MpKTtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NCYXJFbC5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnRhZ2V9JWA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc3RlcEVsLnRleHRDb250ZW50ID0gYFByb2dyZXNzOiAke01hdGgucm91bmQocGVyY2VudGFnZSl9JWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBVc2Ugc3RlcC1iYXNlZCBwcm9ncmVzc1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RlcCsrO1xuICAgICAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IE1hdGgucm91bmQoKHRoaXMuY3VycmVudFN0ZXAgLyB0aGlzLnRvdGFsU3RlcHMpICogMTAwKTtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NCYXJFbC5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnRhZ2V9JWA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc3RlcEVsLnRleHRDb250ZW50ID0gYFN0ZXAgJHt0aGlzLmN1cnJlbnRTdGVwfS8ke3RoaXMudG90YWxTdGVwc31gO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdGF0dXNFbC50ZXh0Q29udGVudCA9IHN0ZXAudGl0bGU7XG4gICAgICAgIHRoaXMuZGV0YWlsRWwudGV4dENvbnRlbnQgPSBzdGVwLmRldGFpbCB8fCBcIlwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB3aXRoIHNwZWNpZmljIHN0ZXAgbnVtYmVyXG4gICAgICovXG4gICAgdXBkYXRlU3RlcChzdGVwTnVtYmVyOiBudW1iZXIsIHN0ZXA6IFByb2dyZXNzU3RlcCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gc3RlcE51bWJlcjtcbiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IE1hdGgucm91bmQoKHN0ZXBOdW1iZXIgLyB0aGlzLnRvdGFsU3RlcHMpICogMTAwKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXJFbC5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnRhZ2V9JWA7XG4gICAgICAgIHRoaXMuc3RlcEVsLnRleHRDb250ZW50ID0gYFN0ZXAgJHtzdGVwTnVtYmVyfS8ke3RoaXMudG90YWxTdGVwc31gO1xuICAgICAgICB0aGlzLnN0YXR1c0VsLnRleHRDb250ZW50ID0gc3RlcC50aXRsZTtcbiAgICAgICAgdGhpcy5kZXRhaWxFbC50ZXh0Q29udGVudCA9IHN0ZXAuZGV0YWlsIHx8IFwiXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyBjb21wbGV0aW9uIHN0YXRlXG4gICAgICovXG4gICAgc2hvd0NvbXBsZXRlKG1lc3NhZ2U6IHN0cmluZyA9IFwiQ29tcGxldGVkIHN1Y2Nlc3NmdWxseVwiKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXJFbC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgICB0aGlzLnN0ZXBFbC50ZXh0Q29udGVudCA9IFwiQ29tcGxldGVcIjtcbiAgICAgICAgdGhpcy5zdGF0dXNFbC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMuZGV0YWlsRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hhbmdlIGNvbG9yIHRvIHN1Y2Nlc3NcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhckVsLnN0eWxlLmJhY2tncm91bmQgPSBcInZhcigtLXRleHQtc3VjY2VzcylcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IGVycm9yIHN0YXRlXG4gICAgICovXG4gICAgc2hvd0Vycm9yKG1lc3NhZ2U6IHN0cmluZyA9IFwiQW4gZXJyb3Igb2NjdXJyZWRcIikge1xuICAgICAgICB0aGlzLnN0YXR1c0VsLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5kZXRhaWxFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGFuZ2UgY29sb3IgdG8gZXJyb3JcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhckVsLnN0eWxlLmJhY2tncm91bmQgPSBcInZhcigtLXRleHQtZXJyb3IpXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvc2UgYWZ0ZXIgZGVsYXlcbiAgICAgKi9cbiAgICBjbG9zZUFmdGVyRGVsYXkoZGVsYXk6IG51bWJlciA9IDIwMDApIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmNsb3NlKCksIGRlbGF5KTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG4vLyBFeHBvcnQgYm90aCB0aGUgaW50ZXJmYWNlIGFuZCB0aGUgcmVuYW1lZCBjbGFzc1xuZXhwb3J0IHsgVXBncmFkZVByb2dyZXNzTW9kYWwgYXMgUHJvZ3Jlc3NNb2RhbCB9OyIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuXG4vLyBzcmMvZGlhbG9ncy9lbmhhbmNlZC1mb2xkZXItbWlncmF0aW9uLWRpYWxvZy50c1xuaW1wb3J0IHsgTW9kYWwsIE5vdGljZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuXG4vKipcbiAqIEVuaGFuY2VkIGRpYWxvZyBmb3IgZm9sZGVyIG1pZ3JhdGlvbiB3aXRoIGxpbmsgdXBkYXRlIGNhcGFiaWxpdGllc1xuICovXG5leHBvcnQgY2xhc3MgRW5oYW5jZWRGb2xkZXJNaWdyYXRpb25EaWFsb2cgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW47XG4gICAgcHJpdmF0ZSBvbkNvbXBsZXRlOiAoYWN0aW9uOiAnbW92ZScgfCAna2VlcCcgfCAnY2FuY2VsJykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgICBwcml2YXRlIG9sZFBhdGg6IHN0cmluZztcbiAgICBwcml2YXRlIG5ld1BhdGg6IHN0cmluZztcbiAgICBwcml2YXRlIGZvbGRlclR5cGU6IHN0cmluZztcbiAgICBwcml2YXRlIGVzdGltYXRlZFRpbWU6IG51bWJlciA9IDA7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luLFxuICAgICAgICBvbGRQYXRoOiBzdHJpbmcsXG4gICAgICAgIG5ld1BhdGg6IHN0cmluZyxcbiAgICAgICAgZm9sZGVyVHlwZTogc3RyaW5nLFxuICAgICAgICBvbkNvbXBsZXRlOiAoYWN0aW9uOiAnbW92ZScgfCAna2VlcCcgfCAnY2FuY2VsJykgPT4gUHJvbWlzZTx2b2lkPlxuICAgICkge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMub2xkUGF0aCA9IG9sZFBhdGg7XG4gICAgICAgIHRoaXMubmV3UGF0aCA9IG5ld1BhdGg7XG4gICAgICAgIHRoaXMuZm9sZGVyVHlwZSA9IGZvbGRlclR5cGU7XG4gICAgICAgIHRoaXMub25Db21wbGV0ZSA9IG9uQ29tcGxldGU7XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgLy8gR2V0IGVzdGltYXRlcyBmb3IgbGluayB1cGRhdGVzXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZEVzdGltYXRlcygpO1xuXG4gICAgICAgIC8vIFRpdGxlXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgXG4gICAgICAgICAgICB0ZXh0OiBcIk1vdmUgRXhpc3RpbmcgRmlsZXM/XCIsXG4gICAgICAgICAgICBjbHM6IFwibmV4dXMtbWlncmF0aW9uLXRpdGxlXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTWVzc2FnZVxuICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy1taWdyYXRpb24tbWVzc2FnZVwiIH0pO1xuICAgICAgICBcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5jcmVhdGVFbChcInBcIiwgeyBcbiAgICAgICAgICAgIHRleHQ6IGBZb3UgYXJlIGNoYW5naW5nIHRoZSAke3RoaXMuZm9sZGVyVHlwZX0gZm9sZGVyIGxvY2F0aW9uOmAgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHBhdGhDb250YWluZXIgPSBtZXNzYWdlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy1taWdyYXRpb24tcGF0aHNcIiB9KTtcbiAgICAgICAgcGF0aENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IFxuICAgICAgICAgICAgdGV4dDogYEZyb206ICR7dGhpcy5vbGRQYXRofWAsXG4gICAgICAgICAgICBjbHM6IFwibmV4dXMtbWlncmF0aW9uLXBhdGgtb2xkXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHBhdGhDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBcbiAgICAgICAgICAgIHRleHQ6IGBUbzogJHt0aGlzLm5ld1BhdGh9YCxcbiAgICAgICAgICAgIGNsczogXCJuZXh1cy1taWdyYXRpb24tcGF0aC1uZXdcIlxuICAgICAgICB9KTtcblxuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IFxuICAgICAgICAgICAgdGV4dDogXCJEbyB5b3Ugd2FudCB0byBtb3ZlIGV4aXN0aW5nIGZpbGVzIHRvIHRoZSBuZXcgbG9jYXRpb24/XCIgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIExpbmsgdXBkYXRlIGluZm9ybWF0aW9uIChvbmx5IGZvciBhdHRhY2htZW50IGFuZCBjb252ZXJzYXRpb24gZm9sZGVycylcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkU2hvd0xpbmtVcGRhdGVJbmZvKCkpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTGlua1VwZGF0ZUluZm8oY29udGVudEVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdhcm5pbmcgYm94XG4gICAgICAgIGNvbnN0IHdhcm5pbmdCb3ggPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLW1pZ3JhdGlvbi13YXJuaW5nXCIgfSk7XG4gICAgICAgIHdhcm5pbmdCb3guY3JlYXRlRWwoXCJzdHJvbmdcIiwgeyB0ZXh0OiBcIlx1MjZBMFx1RkUwRiBJbXBvcnRhbnQ6XCIgfSk7XG4gICAgICAgIHdhcm5pbmdCb3guY3JlYXRlRWwoXCJwXCIsIHsgXG4gICAgICAgICAgICB0ZXh0OiBcIklmIHlvdSBjaG9vc2UgJ05vJywgZXhpc3RpbmcgZmlsZXMgd2lsbCByZW1haW4gaW4gdGhlIG9sZCBsb2NhdGlvbiBhbmQgd2lsbCBub3QgYmUgaW1wYWN0ZWQgYnkgZnV0dXJlIHVwZGF0ZXMuXCIgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJ1dHRvbnMgKDMgb3B0aW9uczogQ2FuY2VsLCBLZWVwLCBNb3ZlKVxuICAgICAgICB0aGlzLmNyZWF0ZUJ1dHRvbnMoY29udGVudEVsKTtcblxuICAgICAgICAvLyBBZGQgc3R5bGVzXG4gICAgICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkRXN0aW1hdGVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gTGF6eSBpbXBvcnQgTGlua1VwZGF0ZVNlcnZpY2VcbiAgICAgICAgICAgIGNvbnN0IHsgTGlua1VwZGF0ZVNlcnZpY2UgfSA9IGF3YWl0IGltcG9ydChcIi4uL3NlcnZpY2VzL2xpbmstdXBkYXRlLXNlcnZpY2VcIik7XG4gICAgICAgICAgICBjb25zdCBsaW5rVXBkYXRlU2VydmljZSA9IG5ldyBMaW5rVXBkYXRlU2VydmljZSh0aGlzLnBsdWdpbik7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmZvbGRlclR5cGUgPT09ICdhdHRhY2htZW50cycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlc3RpbWF0ZSA9IGF3YWl0IGxpbmtVcGRhdGVTZXJ2aWNlLmVzdGltYXRlVXBkYXRlVGltZSgnYXR0YWNobWVudHMnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVzdGltYXRlZFRpbWUgPSBlc3RpbWF0ZS5lc3RpbWF0ZWRTZWNvbmRzO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZvbGRlclR5cGUgPT09ICdjb252ZXJzYXRpb25zJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVzdGltYXRlID0gYXdhaXQgbGlua1VwZGF0ZVNlcnZpY2UuZXN0aW1hdGVVcGRhdGVUaW1lKCdjb252ZXJzYXRpb25zJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZWRUaW1lID0gZXN0aW1hdGUuZXN0aW1hdGVkU2Vjb25kcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci53YXJuKFwiRmFpbGVkIHRvIGxvYWQgbGluayB1cGRhdGUgZXN0aW1hdGVzOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3VsZFNob3dMaW5rVXBkYXRlSW5mbygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9sZGVyVHlwZSA9PT0gJ2F0dGFjaG1lbnRzJyB8fCB0aGlzLmZvbGRlclR5cGUgPT09ICdjb252ZXJzYXRpb25zJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUxpbmtVcGRhdGVJbmZvKGNvbnRlbnRFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbGlua1VwZGF0ZUJveCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtbGluay11cGRhdGUtaW5mb1wiIH0pO1xuICAgICAgICBsaW5rVXBkYXRlQm94LmNyZWF0ZUVsKFwic3Ryb25nXCIsIHsgdGV4dDogXCJcdUQ4M0RcdUREMTcgTGluayBVcGRhdGVzOlwiIH0pO1xuXG4gICAgICAgIGNvbnN0IGluZm9UZXh0ID0gbGlua1VwZGF0ZUJveC5jcmVhdGVEaXYoKTtcblxuICAgICAgICBpZiAodGhpcy5mb2xkZXJUeXBlID09PSAnYXR0YWNobWVudHMnKSB7XG4gICAgICAgICAgICBpbmZvVGV4dC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAgICAgICAgIHRleHQ6IFwiTW92aW5nIGF0dGFjaG1lbnRzIHdpbGwgYWxzbyB1cGRhdGUgYWxsIGNvbnZlcnNhdGlvbiBub3RlcyB0aGF0IHJlZmVyZW5jZSB0aGVtLlwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZvbGRlclR5cGUgPT09ICdjb252ZXJzYXRpb25zJykge1xuICAgICAgICAgICAgaW5mb1RleHQuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIk1vdmluZyBjb252ZXJzYXRpb25zIHdpbGwgYWxzbyB1cGRhdGUgYWxsIHJlcG9ydHMgYW5kIGF0dGFjaG1lbnRzIHRoYXQgcmVmZXJlbmNlIHRoZW0uXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZXN0aW1hdGVkVGltZSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVUZXh0ID0gdGhpcy5lc3RpbWF0ZWRUaW1lIDwgNjBcbiAgICAgICAgICAgICAgICA/IGB+JHt0aGlzLmVzdGltYXRlZFRpbWV9IHNlY29uZHNgXG4gICAgICAgICAgICAgICAgOiBgfiR7TWF0aC5jZWlsKHRoaXMuZXN0aW1hdGVkVGltZSAvIDYwKX0gbWludXRlKHMpYDtcblxuICAgICAgICAgICAgaW5mb1RleHQuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBgRXN0aW1hdGVkIHRpbWU6ICR7dGltZVRleHR9YCxcbiAgICAgICAgICAgICAgICBjbHM6IFwibmV4dXMtdGltZS1lc3RpbWF0ZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQnV0dG9ucyhjb250ZW50RWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtbWlncmF0aW9uLWJ1dHRvbnNcIiB9KTtcblxuICAgICAgICAvLyBDYW5jZWwgYnV0dG9uIChsZWZ0KVxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdGV4dDogXCJDYW5jZWxcIixcbiAgICAgICAgICAgIGNsczogXCJuZXh1cy1taWdyYXRpb24tYnV0dG9uLWNhbmNlbFwiXG4gICAgICAgIH0pO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vbkNvbXBsZXRlKCdjYW5jZWwnKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBDaGFuZ2UgY2FuY2VsbGVkLiBGb2xkZXIgc2V0dGluZyByZXZlcnRlZC5gKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byByZXZlcnQgc2V0dGluZzogJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEtlZXAgYnV0dG9uIChtaWRkbGUpXG4gICAgICAgIGNvbnN0IGtlZXBCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdGV4dDogXCJObywga2VlcCBmaWxlcyBpbiBvbGQgbG9jYXRpb25cIixcbiAgICAgICAgICAgIGNsczogXCJuZXh1cy1taWdyYXRpb24tYnV0dG9uLWtlZXBcIlxuICAgICAgICB9KTtcbiAgICAgICAga2VlcEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9uQ29tcGxldGUoJ2tlZXAnKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBGb2xkZXIgc2V0dGluZyB1cGRhdGVkLiBGaWxlcyByZW1haW4gaW4gJHt0aGlzLm9sZFBhdGh9YCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gdXBkYXRlIHNldHRpbmc6ICR7ZXJyb3JNZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBNb3ZlIGJ1dHRvbiAocmlnaHQsIHByaW1hcnkgYWN0aW9uKVxuICAgICAgICBjb25zdCBtb3ZlQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuc2hvdWxkU2hvd0xpbmtVcGRhdGVJbmZvKCkgPyBcIlllcywgbW92ZSBmaWxlcyBhbmQgdXBkYXRlIGxpbmtzXCIgOiBcIlllcywgbW92ZSBmaWxlc1wiLFxuICAgICAgICAgICAgY2xzOiBcIm1vZC1jdGEgbmV4dXMtbWlncmF0aW9uLWJ1dHRvbi1tb3ZlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIG1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkU2hvd0xpbmtVcGRhdGVJbmZvKCkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZU1vdmVXaXRoTGlua1VwZGF0ZXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vbkNvbXBsZXRlKCdtb3ZlJyk7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZpbGVzIG1vdmVkIHRvICR7dGhpcy5uZXdQYXRofWApO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIG1vdmUgZmlsZXM6ICR7ZXJyb3JNZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVNb3ZlV2l0aExpbmtVcGRhdGVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBsZXQgcHJvZ3Jlc3NNb2RhbDogYW55ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIExhenkgaW1wb3J0IGRlcGVuZGVuY2llc1xuICAgICAgICAgICAgY29uc3QgW3sgVXBncmFkZVByb2dyZXNzTW9kYWwgfSwgeyBMaW5rVXBkYXRlU2VydmljZSB9LCB7IG1vdmVBbmRNZXJnZUZvbGRlcnMgfV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgaW1wb3J0KFwiLi4vdXBncmFkZS91dGlscy9wcm9ncmVzcy1tb2RhbFwiKSxcbiAgICAgICAgICAgICAgICBpbXBvcnQoXCIuLi9zZXJ2aWNlcy9saW5rLXVwZGF0ZS1zZXJ2aWNlXCIpLFxuICAgICAgICAgICAgICAgIGltcG9ydChcIi4uL3V0aWxzXCIpXG4gICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgLy8gU2hvdyBwcm9ncmVzcyBtb2RhbCBmb3IgdGhlIG9wZXJhdGlvblxuICAgICAgICAgICAgcHJvZ3Jlc3NNb2RhbCA9IG5ldyBVcGdyYWRlUHJvZ3Jlc3NNb2RhbChcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICBgTW92aW5nICR7dGhpcy5mb2xkZXJUeXBlfSBhbmQgdXBkYXRpbmcgbGlua3NgLFxuICAgICAgICAgICAgICAgIDEwMFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHByb2dyZXNzTW9kYWwub3BlbigpO1xuXG4gICAgICAgICAgICAvLyBTdGVwIDE6IE1vdmUgdGhlIGZpbGVzICgwLTMwJSlcbiAgICAgICAgICAgIHByb2dyZXNzTW9kYWwudXBkYXRlUHJvZ3Jlc3Moe1xuICAgICAgICAgICAgICAgIHRpdGxlOiBcIk1vdmluZyBmaWxlcy4uLlwiLFxuICAgICAgICAgICAgICAgIGRldGFpbDogYE1vdmluZyBmcm9tICR7dGhpcy5vbGRQYXRofSB0byAke3RoaXMubmV3UGF0aH1gLFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiA1XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBvbGQgZm9sZGVyXG4gICAgICAgICAgICBjb25zdCBvbGRGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5vbGRQYXRoKTtcbiAgICAgICAgICAgIGlmICghb2xkRm9sZGVyIHx8ICEob2xkRm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNvdXJjZSBmb2xkZXIgbm90IGZvdW5kOiAke3RoaXMub2xkUGF0aH1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTW92ZSBmaWxlcyB3aXRoIHByb2dyZXNzIHRyYWNraW5nXG4gICAgICAgICAgICBjb25zdCBtb3ZlUmVzdWx0ID0gYXdhaXQgbW92ZUFuZE1lcmdlRm9sZGVycyhcbiAgICAgICAgICAgICAgICBvbGRGb2xkZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5uZXdQYXRoLFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LFxuICAgICAgICAgICAgICAgIChjdXJyZW50LCB0b3RhbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBNYXAgZmlsZSBtb3ZlIHByb2dyZXNzIGZyb20gNSUgdG8gMzAlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSA1ICsgTWF0aC5yb3VuZCgoY3VycmVudCAvIHRvdGFsKSAqIDI1KTtcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NNb2RhbC51cGRhdGVQcm9ncmVzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJNb3ZpbmcgZmlsZXMuLi5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDogYCR7Y3VycmVudH0gLyAke3RvdGFsfSBmaWxlcyBwcm9jZXNzZWRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHBlcmNlbnRhZ2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcHJvZ3Jlc3NNb2RhbC51cGRhdGVQcm9ncmVzcyh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiRmlsZXMgbW92ZWRcIixcbiAgICAgICAgICAgICAgICBkZXRhaWw6IGAke21vdmVSZXN1bHQubW92ZWR9IGZpbGVzIG1vdmVkLCAke21vdmVSZXN1bHQuc2tpcHBlZH0gc2tpcHBlZC4gUHJlcGFyaW5nIHRvIHVwZGF0ZSBsaW5rcy4uLmAsXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IDMwXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgbGlua1VwZGF0ZVNlcnZpY2UgPSBuZXcgTGlua1VwZGF0ZVNlcnZpY2UodGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgbGV0IHN0YXRzO1xuXG4gICAgICAgICAgICAvLyBTdGVwIDI6IFVwZGF0ZSBsaW5rcyAoMzAtMTAwJSlcbiAgICAgICAgICAgIGlmICh0aGlzLmZvbGRlclR5cGUgPT09ICdhdHRhY2htZW50cycpIHtcbiAgICAgICAgICAgICAgICBzdGF0cyA9IGF3YWl0IGxpbmtVcGRhdGVTZXJ2aWNlLnVwZGF0ZUF0dGFjaG1lbnRMaW5rcyhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbGRQYXRoLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld1BhdGgsXG4gICAgICAgICAgICAgICAgICAgIChwcm9ncmVzcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGxpbmsgdXBkYXRlIHByb2dyZXNzIGZyb20gMzAlIHRvIDEwMCVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSAzMCArIE1hdGgucm91bmQoKHByb2dyZXNzLmN1cnJlbnQgLyBwcm9ncmVzcy50b3RhbCkgKiA3MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc01vZGFsLnVwZGF0ZVByb2dyZXNzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJVcGRhdGluZyBhdHRhY2htZW50IGxpbmtzLi4uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBwcm9ncmVzcy5kZXRhaWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHBlcmNlbnRhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5mb2xkZXJUeXBlID09PSAnY29udmVyc2F0aW9ucycpIHtcbiAgICAgICAgICAgICAgICBzdGF0cyA9IGF3YWl0IGxpbmtVcGRhdGVTZXJ2aWNlLnVwZGF0ZUNvbnZlcnNhdGlvbkxpbmtzKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9sZFBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV3UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgKHByb2dyZXNzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgbGluayB1cGRhdGUgcHJvZ3Jlc3MgZnJvbSAzMCUgdG8gMTAwJVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IDMwICsgTWF0aC5yb3VuZCgocHJvZ3Jlc3MuY3VycmVudCAvIHByb2dyZXNzLnRvdGFsKSAqIDcwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJvdmlkZSBtb3JlIGRldGFpbGVkIHByb2dyZXNzIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSBcIlVwZGF0aW5nIGNvbnZlcnNhdGlvbiBsaW5rcy4uLlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzLnBoYXNlID09PSAndXBkYXRpbmctY29udmVyc2F0aW9ucycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IFwiVXBkYXRpbmcgbGlua3MgaW4gcmVwb3J0cy4uLlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9ncmVzcy5waGFzZSA9PT0gJ3VwZGF0aW5nLWFydGlmYWN0cycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IFwiVXBkYXRpbmcgbGlua3MgaW4gYXJ0aWZhY3RzLi4uXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWwudXBkYXRlUHJvZ3Jlc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHByb2dyZXNzLmRldGFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogcGVyY2VudGFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb21wbGV0ZVxuICAgICAgICAgICAgY29uc3QgbGlua3NVcGRhdGVkID0gdGhpcy5mb2xkZXJUeXBlID09PSAnYXR0YWNobWVudHMnXG4gICAgICAgICAgICAgICAgPyBzdGF0cz8uYXR0YWNobWVudExpbmtzVXBkYXRlZCB8fCAwXG4gICAgICAgICAgICAgICAgOiBzdGF0cz8uY29udmVyc2F0aW9uTGlua3NVcGRhdGVkIHx8IDA7XG5cbiAgICAgICAgICAgIHByb2dyZXNzTW9kYWwuc2hvd0NvbXBsZXRlKFxuICAgICAgICAgICAgICAgIGAke21vdmVSZXN1bHQubW92ZWR9IGZpbGVzIG1vdmVkLiAke2xpbmtzVXBkYXRlZH0gbGlua3MgdXBkYXRlZCBzdWNjZXNzZnVsbHlgXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcHJvZ3Jlc3NNb2RhbC5jbG9zZUFmdGVyRGVsYXkoMzAwMCk7XG5cbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSAke21vdmVSZXN1bHQubW92ZWR9IGZpbGVzIG1vdmVkIHRvICR7dGhpcy5uZXdQYXRofS4gJHtsaW5rc1VwZGF0ZWR9IGxpbmtzIHVwZGF0ZWRgKTtcblxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgc2V0dGluZyBjaGFuZ2VcbiAgICAgICAgICAgIGF3YWl0IHRoaXMub25Db21wbGV0ZSgnbW92ZScpO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3NNb2RhbCkge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yRGlhbG9nKFwiTWlncmF0aW9uIEZhaWxlZFwiLCBgRmFpbGVkIHRvIG1vdmUgZmlsZXMgb3IgdXBkYXRlIGxpbmtzOiAke2Vycm9yTWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAgICAgLm5leHVzLW1pZ3JhdGlvbi10aXRsZSB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMWVtO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1taWdyYXRpb24tbWVzc2FnZSB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMS41ZW07XG4gICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLW1pZ3JhdGlvbi1wYXRocyB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDFlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDFlbSAwO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogdmFyKC0tZm9udC1tb25vc3BhY2UpO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1taWdyYXRpb24tcGF0aC1vbGQge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLW1pZ3JhdGlvbi1wYXRoLW5ldyB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLWxpbmstdXBkYXRlLWluZm8ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItc3VjY2Vzcy1ob3Zlcik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCB2YXIoLS10ZXh0LXN1Y2Nlc3MpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDFlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbGluay11cGRhdGUtaW5mbyBzdHJvbmcge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuNWVtO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXN1Y2Nlc3MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbGluay11cGRhdGUtaW5mbyBwIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAuM2VtIDA7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLXRpbWUtZXN0aW1hdGUge1xuICAgICAgICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLXdhcm5pbmcge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3ItaG92ZXIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tdGV4dC1lcnJvcik7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMWVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEuNWVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLW1pZ3JhdGlvbi13YXJuaW5nIHN0cm9uZyB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41ZW07XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLXdhcm5pbmcgcCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1taWdyYXRpb24tYnV0dG9ucyB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLWJ1dHRvbnMgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLWJ1dHRvbi1jYW5jZWwge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1taWdyYXRpb24tYnV0dG9uLWtlZXAge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLW1pZ3JhdGlvbi1idXR0b24tbW92ZSB7XG4gICAgICAgICAgICAgICAgLyogVXNlcyBtb2QtY3RhIGNsYXNzIGZvciBwcmltYXJ5IHN0eWxpbmcgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dFcnJvckRpYWxvZyh0aXRsZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuICAgICAgICBtb2RhbC50aXRsZUVsLnNldFRleHQodGl0bGUpO1xuXG4gICAgICAgIG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgICAgICAgIGNsczogXCJuZXh1cy1lcnJvci1tZXNzYWdlXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gbW9kYWwuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1lbmRcIjtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9IFwiMWVtXCI7XG5cbiAgICAgICAgY29uc3Qgb2tCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdGV4dDogXCJPS1wiLFxuICAgICAgICAgICAgY2xzOiBcIm1vZC1jdGFcIlxuICAgICAgICB9KTtcbiAgICAgICAgb2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG1vZGFsLmNsb3NlKCkpO1xuXG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuIiwgIi8qIVxuXG5KU1ppcCB2My4xMC4xIC0gQSBKYXZhU2NyaXB0IGNsYXNzIGZvciBnZW5lcmF0aW5nIGFuZCByZWFkaW5nIHppcCBmaWxlc1xuPGh0dHA6Ly9zdHVhcnRrLmNvbS9qc3ppcD5cblxuKGMpIDIwMDktMjAxNiBTdHVhcnQgS25pZ2h0bGV5IDxzdHVhcnQgW2F0XSBzdHVhcnRrLmNvbT5cbkR1YWwgbGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIG9yIEdQTHYzLiBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9TdHVrL2pzemlwL21haW4vTElDRU5TRS5tYXJrZG93bi5cblxuSlNaaXAgdXNlcyB0aGUgbGlicmFyeSBwYWtvIHJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSA6XG5odHRwczovL2dpdGh1Yi5jb20vbm9kZWNhL3Bha28vYmxvYi9tYWluL0xJQ0VOU0VcbiovXG5cbiFmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcykuSlNaaXA9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gcyhhLG8saCl7ZnVuY3Rpb24gdShyLGUpe2lmKCFvW3JdKXtpZighYVtyXSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZSYmdClyZXR1cm4gdChyLCEwKTtpZihsKXJldHVybiBsKHIsITApO3ZhciBuPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrcitcIidcIik7dGhyb3cgbi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLG59dmFyIGk9b1tyXT17ZXhwb3J0czp7fX07YVtyXVswXS5jYWxsKGkuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgdD1hW3JdWzFdW2VdO3JldHVybiB1KHR8fGUpfSxpLGkuZXhwb3J0cyxzLGEsbyxoKX1yZXR1cm4gb1tyXS5leHBvcnRzfWZvcih2YXIgbD1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGU9MDtlPGgubGVuZ3RoO2UrKyl1KGhbZV0pO3JldHVybiB1fSh7MTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBkPWUoXCIuL3V0aWxzXCIpLGM9ZShcIi4vc3VwcG9ydFwiKSxwPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIjtyLmVuY29kZT1mdW5jdGlvbihlKXtmb3IodmFyIHQscixuLGkscyxhLG8saD1bXSx1PTAsbD1lLmxlbmd0aCxmPWwsYz1cInN0cmluZ1wiIT09ZC5nZXRUeXBlT2YoZSk7dTxlLmxlbmd0aDspZj1sLXUsbj1jPyh0PWVbdSsrXSxyPXU8bD9lW3UrK106MCx1PGw/ZVt1KytdOjApOih0PWUuY2hhckNvZGVBdCh1KyspLHI9dTxsP2UuY2hhckNvZGVBdCh1KyspOjAsdTxsP2UuY2hhckNvZGVBdCh1KyspOjApLGk9dD4+MixzPSgzJnQpPDw0fHI+PjQsYT0xPGY/KDE1JnIpPDwyfG4+PjY6NjQsbz0yPGY/NjMmbjo2NCxoLnB1c2gocC5jaGFyQXQoaSkrcC5jaGFyQXQocykrcC5jaGFyQXQoYSkrcC5jaGFyQXQobykpO3JldHVybiBoLmpvaW4oXCJcIil9LHIuZGVjb2RlPWZ1bmN0aW9uKGUpe3ZhciB0LHIsbixpLHMsYSxvPTAsaD0wLHU9XCJkYXRhOlwiO2lmKGUuc3Vic3RyKDAsdS5sZW5ndGgpPT09dSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJhc2U2NCBpbnB1dCwgaXQgbG9va3MgbGlrZSBhIGRhdGEgdXJsLlwiKTt2YXIgbCxmPTMqKGU9ZS5yZXBsYWNlKC9bXkEtWmEtejAtOSsvPV0vZyxcIlwiKSkubGVuZ3RoLzQ7aWYoZS5jaGFyQXQoZS5sZW5ndGgtMSk9PT1wLmNoYXJBdCg2NCkmJmYtLSxlLmNoYXJBdChlLmxlbmd0aC0yKT09PXAuY2hhckF0KDY0KSYmZi0tLGYlMSE9MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJhc2U2NCBpbnB1dCwgYmFkIGNvbnRlbnQgbGVuZ3RoLlwiKTtmb3IobD1jLnVpbnQ4YXJyYXk/bmV3IFVpbnQ4QXJyYXkoMHxmKTpuZXcgQXJyYXkoMHxmKTtvPGUubGVuZ3RoOyl0PXAuaW5kZXhPZihlLmNoYXJBdChvKyspKTw8MnwoaT1wLmluZGV4T2YoZS5jaGFyQXQobysrKSkpPj40LHI9KDE1JmkpPDw0fChzPXAuaW5kZXhPZihlLmNoYXJBdChvKyspKSk+PjIsbj0oMyZzKTw8NnwoYT1wLmluZGV4T2YoZS5jaGFyQXQobysrKSkpLGxbaCsrXT10LDY0IT09cyYmKGxbaCsrXT1yKSw2NCE9PWEmJihsW2grK109bik7cmV0dXJuIGx9fSx7XCIuL3N1cHBvcnRcIjozMCxcIi4vdXRpbHNcIjozMn1dLDI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1lKFwiLi9leHRlcm5hbFwiKSxpPWUoXCIuL3N0cmVhbS9EYXRhV29ya2VyXCIpLHM9ZShcIi4vc3RyZWFtL0NyYzMyUHJvYmVcIiksYT1lKFwiLi9zdHJlYW0vRGF0YUxlbmd0aFByb2JlXCIpO2Z1bmN0aW9uIG8oZSx0LHIsbixpKXt0aGlzLmNvbXByZXNzZWRTaXplPWUsdGhpcy51bmNvbXByZXNzZWRTaXplPXQsdGhpcy5jcmMzMj1yLHRoaXMuY29tcHJlc3Npb249bix0aGlzLmNvbXByZXNzZWRDb250ZW50PWl9by5wcm90b3R5cGU9e2dldENvbnRlbnRXb3JrZXI6ZnVuY3Rpb24oKXt2YXIgZT1uZXcgaShuLlByb21pc2UucmVzb2x2ZSh0aGlzLmNvbXByZXNzZWRDb250ZW50KSkucGlwZSh0aGlzLmNvbXByZXNzaW9uLnVuY29tcHJlc3NXb3JrZXIoKSkucGlwZShuZXcgYShcImRhdGFfbGVuZ3RoXCIpKSx0PXRoaXM7cmV0dXJuIGUub24oXCJlbmRcIixmdW5jdGlvbigpe2lmKHRoaXMuc3RyZWFtSW5mby5kYXRhX2xlbmd0aCE9PXQudW5jb21wcmVzc2VkU2l6ZSl0aHJvdyBuZXcgRXJyb3IoXCJCdWcgOiB1bmNvbXByZXNzZWQgZGF0YSBzaXplIG1pc21hdGNoXCIpfSksZX0sZ2V0Q29tcHJlc3NlZFdvcmtlcjpmdW5jdGlvbigpe3JldHVybiBuZXcgaShuLlByb21pc2UucmVzb2x2ZSh0aGlzLmNvbXByZXNzZWRDb250ZW50KSkud2l0aFN0cmVhbUluZm8oXCJjb21wcmVzc2VkU2l6ZVwiLHRoaXMuY29tcHJlc3NlZFNpemUpLndpdGhTdHJlYW1JbmZvKFwidW5jb21wcmVzc2VkU2l6ZVwiLHRoaXMudW5jb21wcmVzc2VkU2l6ZSkud2l0aFN0cmVhbUluZm8oXCJjcmMzMlwiLHRoaXMuY3JjMzIpLndpdGhTdHJlYW1JbmZvKFwiY29tcHJlc3Npb25cIix0aGlzLmNvbXByZXNzaW9uKX19LG8uY3JlYXRlV29ya2VyRnJvbT1mdW5jdGlvbihlLHQscil7cmV0dXJuIGUucGlwZShuZXcgcykucGlwZShuZXcgYShcInVuY29tcHJlc3NlZFNpemVcIikpLnBpcGUodC5jb21wcmVzc1dvcmtlcihyKSkucGlwZShuZXcgYShcImNvbXByZXNzZWRTaXplXCIpKS53aXRoU3RyZWFtSW5mbyhcImNvbXByZXNzaW9uXCIsdCl9LHQuZXhwb3J0cz1vfSx7XCIuL2V4dGVybmFsXCI6NixcIi4vc3RyZWFtL0NyYzMyUHJvYmVcIjoyNSxcIi4vc3RyZWFtL0RhdGFMZW5ndGhQcm9iZVwiOjI2LFwiLi9zdHJlYW0vRGF0YVdvcmtlclwiOjI3fV0sMzpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPWUoXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCIpO3IuU1RPUkU9e21hZ2ljOlwiXFwwXFwwXCIsY29tcHJlc3NXb3JrZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4oXCJTVE9SRSBjb21wcmVzc2lvblwiKX0sdW5jb21wcmVzc1dvcmtlcjpmdW5jdGlvbigpe3JldHVybiBuZXcgbihcIlNUT1JFIGRlY29tcHJlc3Npb25cIil9fSxyLkRFRkxBVEU9ZShcIi4vZmxhdGVcIil9LHtcIi4vZmxhdGVcIjo3LFwiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiOjI4fV0sNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPWUoXCIuL3V0aWxzXCIpO3ZhciBvPWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9W10scj0wO3I8MjU2O3IrKyl7ZT1yO2Zvcih2YXIgbj0wO248ODtuKyspZT0xJmU/Mzk4ODI5MjM4NF5lPj4+MTplPj4+MTt0W3JdPWV9cmV0dXJuIHR9KCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMCE9PWUmJmUubGVuZ3RoP1wic3RyaW5nXCIhPT1uLmdldFR5cGVPZihlKT9mdW5jdGlvbihlLHQscixuKXt2YXIgaT1vLHM9bityO2VePS0xO2Zvcih2YXIgYT1uO2E8czthKyspZT1lPj4+OF5pWzI1NSYoZV50W2FdKV07cmV0dXJuLTFeZX0oMHx0LGUsZS5sZW5ndGgsMCk6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9byxzPW4rcjtlXj0tMTtmb3IodmFyIGE9bjthPHM7YSsrKWU9ZT4+PjheaVsyNTUmKGVedC5jaGFyQ29kZUF0KGEpKV07cmV0dXJuLTFeZX0oMHx0LGUsZS5sZW5ndGgsMCk6MH19LHtcIi4vdXRpbHNcIjozMn1dLDU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtyLmJhc2U2ND0hMSxyLmJpbmFyeT0hMSxyLmRpcj0hMSxyLmNyZWF0ZUZvbGRlcnM9ITAsci5kYXRlPW51bGwsci5jb21wcmVzc2lvbj1udWxsLHIuY29tcHJlc3Npb25PcHRpb25zPW51bGwsci5jb21tZW50PW51bGwsci51bml4UGVybWlzc2lvbnM9bnVsbCxyLmRvc1Blcm1pc3Npb25zPW51bGx9LHt9XSw2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49bnVsbDtuPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBQcm9taXNlP1Byb21pc2U6ZShcImxpZVwiKSx0LmV4cG9ydHM9e1Byb21pc2U6bn19LHtsaWU6Mzd9XSw3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50MTZBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQzMkFycmF5LGk9ZShcInBha29cIikscz1lKFwiLi91dGlsc1wiKSxhPWUoXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCIpLG89bj9cInVpbnQ4YXJyYXlcIjpcImFycmF5XCI7ZnVuY3Rpb24gaChlLHQpe2EuY2FsbCh0aGlzLFwiRmxhdGVXb3JrZXIvXCIrZSksdGhpcy5fcGFrbz1udWxsLHRoaXMuX3Bha29BY3Rpb249ZSx0aGlzLl9wYWtvT3B0aW9ucz10LHRoaXMubWV0YT17fX1yLm1hZ2ljPVwiXFxiXFwwXCIscy5pbmhlcml0cyhoLGEpLGgucHJvdG90eXBlLnByb2Nlc3NDaHVuaz1mdW5jdGlvbihlKXt0aGlzLm1ldGE9ZS5tZXRhLG51bGw9PT10aGlzLl9wYWtvJiZ0aGlzLl9jcmVhdGVQYWtvKCksdGhpcy5fcGFrby5wdXNoKHMudHJhbnNmb3JtVG8obyxlLmRhdGEpLCExKX0saC5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXthLnByb3RvdHlwZS5mbHVzaC5jYWxsKHRoaXMpLG51bGw9PT10aGlzLl9wYWtvJiZ0aGlzLl9jcmVhdGVQYWtvKCksdGhpcy5fcGFrby5wdXNoKFtdLCEwKX0saC5wcm90b3R5cGUuY2xlYW5VcD1mdW5jdGlvbigpe2EucHJvdG90eXBlLmNsZWFuVXAuY2FsbCh0aGlzKSx0aGlzLl9wYWtvPW51bGx9LGgucHJvdG90eXBlLl9jcmVhdGVQYWtvPWZ1bmN0aW9uKCl7dGhpcy5fcGFrbz1uZXcgaVt0aGlzLl9wYWtvQWN0aW9uXSh7cmF3OiEwLGxldmVsOnRoaXMuX3Bha29PcHRpb25zLmxldmVsfHwtMX0pO3ZhciB0PXRoaXM7dGhpcy5fcGFrby5vbkRhdGE9ZnVuY3Rpb24oZSl7dC5wdXNoKHtkYXRhOmUsbWV0YTp0Lm1ldGF9KX19LHIuY29tcHJlc3NXb3JrZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBoKFwiRGVmbGF0ZVwiLGUpfSxyLnVuY29tcHJlc3NXb3JrZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGgoXCJJbmZsYXRlXCIse30pfX0se1wiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiOjI4LFwiLi91dGlsc1wiOjMyLHBha286Mzh9XSw4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gQShlLHQpe3ZhciByLG49XCJcIjtmb3Iocj0wO3I8dDtyKyspbis9U3RyaW5nLmZyb21DaGFyQ29kZSgyNTUmZSksZT4+Pj04O3JldHVybiBufWZ1bmN0aW9uIG4oZSx0LHIsbixpLHMpe3ZhciBhLG8saD1lLmZpbGUsdT1lLmNvbXByZXNzaW9uLGw9cyE9PU8udXRmOGVuY29kZSxmPUkudHJhbnNmb3JtVG8oXCJzdHJpbmdcIixzKGgubmFtZSkpLGM9SS50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLE8udXRmOGVuY29kZShoLm5hbWUpKSxkPWguY29tbWVudCxwPUkudHJhbnNmb3JtVG8oXCJzdHJpbmdcIixzKGQpKSxtPUkudHJhbnNmb3JtVG8oXCJzdHJpbmdcIixPLnV0ZjhlbmNvZGUoZCkpLF89Yy5sZW5ndGghPT1oLm5hbWUubGVuZ3RoLGc9bS5sZW5ndGghPT1kLmxlbmd0aCxiPVwiXCIsdj1cIlwiLHk9XCJcIix3PWguZGlyLGs9aC5kYXRlLHg9e2NyYzMyOjAsY29tcHJlc3NlZFNpemU6MCx1bmNvbXByZXNzZWRTaXplOjB9O3QmJiFyfHwoeC5jcmMzMj1lLmNyYzMyLHguY29tcHJlc3NlZFNpemU9ZS5jb21wcmVzc2VkU2l6ZSx4LnVuY29tcHJlc3NlZFNpemU9ZS51bmNvbXByZXNzZWRTaXplKTt2YXIgUz0wO3QmJihTfD04KSxsfHwhXyYmIWd8fChTfD0yMDQ4KTt2YXIgej0wLEM9MDt3JiYoenw9MTYpLFwiVU5JWFwiPT09aT8oQz03OTgsenw9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lO3JldHVybiBlfHwocj10PzE2ODkzOjMzMjA0KSwoNjU1MzUmcik8PDE2fShoLnVuaXhQZXJtaXNzaW9ucyx3KSk6KEM9MjAsenw9ZnVuY3Rpb24oZSl7cmV0dXJuIDYzJihlfHwwKX0oaC5kb3NQZXJtaXNzaW9ucykpLGE9ay5nZXRVVENIb3VycygpLGE8PD02LGF8PWsuZ2V0VVRDTWludXRlcygpLGE8PD01LGF8PWsuZ2V0VVRDU2Vjb25kcygpLzIsbz1rLmdldFVUQ0Z1bGxZZWFyKCktMTk4MCxvPDw9NCxvfD1rLmdldFVUQ01vbnRoKCkrMSxvPDw9NSxvfD1rLmdldFVUQ0RhdGUoKSxfJiYodj1BKDEsMSkrQShCKGYpLDQpK2MsYis9XCJ1cFwiK0Eodi5sZW5ndGgsMikrdiksZyYmKHk9QSgxLDEpK0EoQihwKSw0KSttLGIrPVwidWNcIitBKHkubGVuZ3RoLDIpK3kpO3ZhciBFPVwiXCI7cmV0dXJuIEUrPVwiXFxuXFwwXCIsRSs9QShTLDIpLEUrPXUubWFnaWMsRSs9QShhLDIpLEUrPUEobywyKSxFKz1BKHguY3JjMzIsNCksRSs9QSh4LmNvbXByZXNzZWRTaXplLDQpLEUrPUEoeC51bmNvbXByZXNzZWRTaXplLDQpLEUrPUEoZi5sZW5ndGgsMiksRSs9QShiLmxlbmd0aCwyKSx7ZmlsZVJlY29yZDpSLkxPQ0FMX0ZJTEVfSEVBREVSK0UrZitiLGRpclJlY29yZDpSLkNFTlRSQUxfRklMRV9IRUFERVIrQShDLDIpK0UrQShwLmxlbmd0aCwyKStcIlxcMFxcMFxcMFxcMFwiK0Eoeiw0KStBKG4sNCkrZitiK3B9fXZhciBJPWUoXCIuLi91dGlsc1wiKSxpPWUoXCIuLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiKSxPPWUoXCIuLi91dGY4XCIpLEI9ZShcIi4uL2NyYzMyXCIpLFI9ZShcIi4uL3NpZ25hdHVyZVwiKTtmdW5jdGlvbiBzKGUsdCxyLG4pe2kuY2FsbCh0aGlzLFwiWmlwRmlsZVdvcmtlclwiKSx0aGlzLmJ5dGVzV3JpdHRlbj0wLHRoaXMuemlwQ29tbWVudD10LHRoaXMuemlwUGxhdGZvcm09cix0aGlzLmVuY29kZUZpbGVOYW1lPW4sdGhpcy5zdHJlYW1GaWxlcz1lLHRoaXMuYWNjdW11bGF0ZT0hMSx0aGlzLmNvbnRlbnRCdWZmZXI9W10sdGhpcy5kaXJSZWNvcmRzPVtdLHRoaXMuY3VycmVudFNvdXJjZU9mZnNldD0wLHRoaXMuZW50cmllc0NvdW50PTAsdGhpcy5jdXJyZW50RmlsZT1udWxsLHRoaXMuX3NvdXJjZXM9W119SS5pbmhlcml0cyhzLGkpLHMucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXRhLnBlcmNlbnR8fDAscj10aGlzLmVudHJpZXNDb3VudCxuPXRoaXMuX3NvdXJjZXMubGVuZ3RoO3RoaXMuYWNjdW11bGF0ZT90aGlzLmNvbnRlbnRCdWZmZXIucHVzaChlKToodGhpcy5ieXRlc1dyaXR0ZW4rPWUuZGF0YS5sZW5ndGgsaS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMse2RhdGE6ZS5kYXRhLG1ldGE6e2N1cnJlbnRGaWxlOnRoaXMuY3VycmVudEZpbGUscGVyY2VudDpyPyh0KzEwMCooci1uLTEpKS9yOjEwMH19KSl9LHMucHJvdG90eXBlLm9wZW5lZFNvdXJjZT1mdW5jdGlvbihlKXt0aGlzLmN1cnJlbnRTb3VyY2VPZmZzZXQ9dGhpcy5ieXRlc1dyaXR0ZW4sdGhpcy5jdXJyZW50RmlsZT1lLmZpbGUubmFtZTt2YXIgdD10aGlzLnN0cmVhbUZpbGVzJiYhZS5maWxlLmRpcjtpZih0KXt2YXIgcj1uKGUsdCwhMSx0aGlzLmN1cnJlbnRTb3VyY2VPZmZzZXQsdGhpcy56aXBQbGF0Zm9ybSx0aGlzLmVuY29kZUZpbGVOYW1lKTt0aGlzLnB1c2goe2RhdGE6ci5maWxlUmVjb3JkLG1ldGE6e3BlcmNlbnQ6MH19KX1lbHNlIHRoaXMuYWNjdW11bGF0ZT0hMH0scy5wcm90b3R5cGUuY2xvc2VkU291cmNlPWZ1bmN0aW9uKGUpe3RoaXMuYWNjdW11bGF0ZT0hMTt2YXIgdD10aGlzLnN0cmVhbUZpbGVzJiYhZS5maWxlLmRpcixyPW4oZSx0LCEwLHRoaXMuY3VycmVudFNvdXJjZU9mZnNldCx0aGlzLnppcFBsYXRmb3JtLHRoaXMuZW5jb2RlRmlsZU5hbWUpO2lmKHRoaXMuZGlyUmVjb3Jkcy5wdXNoKHIuZGlyUmVjb3JkKSx0KXRoaXMucHVzaCh7ZGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gUi5EQVRBX0RFU0NSSVBUT1IrQShlLmNyYzMyLDQpK0EoZS5jb21wcmVzc2VkU2l6ZSw0KStBKGUudW5jb21wcmVzc2VkU2l6ZSw0KX0oZSksbWV0YTp7cGVyY2VudDoxMDB9fSk7ZWxzZSBmb3IodGhpcy5wdXNoKHtkYXRhOnIuZmlsZVJlY29yZCxtZXRhOntwZXJjZW50OjB9fSk7dGhpcy5jb250ZW50QnVmZmVyLmxlbmd0aDspdGhpcy5wdXNoKHRoaXMuY29udGVudEJ1ZmZlci5zaGlmdCgpKTt0aGlzLmN1cnJlbnRGaWxlPW51bGx9LHMucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuYnl0ZXNXcml0dGVuLHQ9MDt0PHRoaXMuZGlyUmVjb3Jkcy5sZW5ndGg7dCsrKXRoaXMucHVzaCh7ZGF0YTp0aGlzLmRpclJlY29yZHNbdF0sbWV0YTp7cGVyY2VudDoxMDB9fSk7dmFyIHI9dGhpcy5ieXRlc1dyaXR0ZW4tZSxuPWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIHM9SS50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLGkobikpO3JldHVybiBSLkNFTlRSQUxfRElSRUNUT1JZX0VORCtcIlxcMFxcMFxcMFxcMFwiK0EoZSwyKStBKGUsMikrQSh0LDQpK0Eociw0KStBKHMubGVuZ3RoLDIpK3N9KHRoaXMuZGlyUmVjb3Jkcy5sZW5ndGgscixlLHRoaXMuemlwQ29tbWVudCx0aGlzLmVuY29kZUZpbGVOYW1lKTt0aGlzLnB1c2goe2RhdGE6bixtZXRhOntwZXJjZW50OjEwMH19KX0scy5wcm90b3R5cGUucHJlcGFyZU5leHRTb3VyY2U9ZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzPXRoaXMuX3NvdXJjZXMuc2hpZnQoKSx0aGlzLm9wZW5lZFNvdXJjZSh0aGlzLnByZXZpb3VzLnN0cmVhbUluZm8pLHRoaXMuaXNQYXVzZWQ/dGhpcy5wcmV2aW91cy5wYXVzZSgpOnRoaXMucHJldmlvdXMucmVzdW1lKCl9LHMucHJvdG90eXBlLnJlZ2lzdGVyUHJldmlvdXM9ZnVuY3Rpb24oZSl7dGhpcy5fc291cmNlcy5wdXNoKGUpO3ZhciB0PXRoaXM7cmV0dXJuIGUub24oXCJkYXRhXCIsZnVuY3Rpb24oZSl7dC5wcm9jZXNzQ2h1bmsoZSl9KSxlLm9uKFwiZW5kXCIsZnVuY3Rpb24oKXt0LmNsb3NlZFNvdXJjZSh0LnByZXZpb3VzLnN0cmVhbUluZm8pLHQuX3NvdXJjZXMubGVuZ3RoP3QucHJlcGFyZU5leHRTb3VyY2UoKTp0LmVuZCgpfSksZS5vbihcImVycm9yXCIsZnVuY3Rpb24oZSl7dC5lcnJvcihlKX0pLHRoaXN9LHMucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3JldHVybiEhaS5wcm90b3R5cGUucmVzdW1lLmNhbGwodGhpcykmJighdGhpcy5wcmV2aW91cyYmdGhpcy5fc291cmNlcy5sZW5ndGg/KHRoaXMucHJlcGFyZU5leHRTb3VyY2UoKSwhMCk6dGhpcy5wcmV2aW91c3x8dGhpcy5fc291cmNlcy5sZW5ndGh8fHRoaXMuZ2VuZXJhdGVkRXJyb3I/dm9pZCAwOih0aGlzLmVuZCgpLCEwKSl9LHMucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3NvdXJjZXM7aWYoIWkucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcyxlKSlyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl0cnl7dFtyXS5lcnJvcihlKX1jYXRjaChlKXt9cmV0dXJuITB9LHMucHJvdG90eXBlLmxvY2s9ZnVuY3Rpb24oKXtpLnByb3RvdHlwZS5sb2NrLmNhbGwodGhpcyk7Zm9yKHZhciBlPXRoaXMuX3NvdXJjZXMsdD0wO3Q8ZS5sZW5ndGg7dCsrKWVbdF0ubG9jaygpfSx0LmV4cG9ydHM9c30se1wiLi4vY3JjMzJcIjo0LFwiLi4vc2lnbmF0dXJlXCI6MjMsXCIuLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiOjI4LFwiLi4vdXRmOFwiOjMxLFwiLi4vdXRpbHNcIjozMn1dLDk6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgdT1lKFwiLi4vY29tcHJlc3Npb25zXCIpLG49ZShcIi4vWmlwRmlsZVdvcmtlclwiKTtyLmdlbmVyYXRlV29ya2VyPWZ1bmN0aW9uKGUsYSx0KXt2YXIgbz1uZXcgbihhLnN0cmVhbUZpbGVzLHQsYS5wbGF0Zm9ybSxhLmVuY29kZUZpbGVOYW1lKSxoPTA7dHJ5e2UuZm9yRWFjaChmdW5jdGlvbihlLHQpe2grKzt2YXIgcj1mdW5jdGlvbihlLHQpe3ZhciByPWV8fHQsbj11W3JdO2lmKCFuKXRocm93IG5ldyBFcnJvcihyK1wiIGlzIG5vdCBhIHZhbGlkIGNvbXByZXNzaW9uIG1ldGhvZCAhXCIpO3JldHVybiBufSh0Lm9wdGlvbnMuY29tcHJlc3Npb24sYS5jb21wcmVzc2lvbiksbj10Lm9wdGlvbnMuY29tcHJlc3Npb25PcHRpb25zfHxhLmNvbXByZXNzaW9uT3B0aW9uc3x8e30saT10LmRpcixzPXQuZGF0ZTt0Ll9jb21wcmVzc1dvcmtlcihyLG4pLndpdGhTdHJlYW1JbmZvKFwiZmlsZVwiLHtuYW1lOmUsZGlyOmksZGF0ZTpzLGNvbW1lbnQ6dC5jb21tZW50fHxcIlwiLHVuaXhQZXJtaXNzaW9uczp0LnVuaXhQZXJtaXNzaW9ucyxkb3NQZXJtaXNzaW9uczp0LmRvc1Blcm1pc3Npb25zfSkucGlwZShvKX0pLG8uZW50cmllc0NvdW50PWh9Y2F0Y2goZSl7by5lcnJvcihlKX1yZXR1cm4gb319LHtcIi4uL2NvbXByZXNzaW9uc1wiOjMsXCIuL1ppcEZpbGVXb3JrZXJcIjo4fV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpcmV0dXJuIG5ldyBuO2lmKGFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGNvbnN0cnVjdG9yIHdpdGggcGFyYW1ldGVycyBoYXMgYmVlbiByZW1vdmVkIGluIEpTWmlwIDMuMCwgcGxlYXNlIGNoZWNrIHRoZSB1cGdyYWRlIGd1aWRlLlwiKTt0aGlzLmZpbGVzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5jb21tZW50PW51bGwsdGhpcy5yb290PVwiXCIsdGhpcy5jbG9uZT1mdW5jdGlvbigpe3ZhciBlPW5ldyBuO2Zvcih2YXIgdCBpbiB0aGlzKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbdF0mJihlW3RdPXRoaXNbdF0pO3JldHVybiBlfX0obi5wcm90b3R5cGU9ZShcIi4vb2JqZWN0XCIpKS5sb2FkQXN5bmM9ZShcIi4vbG9hZFwiKSxuLnN1cHBvcnQ9ZShcIi4vc3VwcG9ydFwiKSxuLmRlZmF1bHRzPWUoXCIuL2RlZmF1bHRzXCIpLG4udmVyc2lvbj1cIjMuMTAuMVwiLG4ubG9hZEFzeW5jPWZ1bmN0aW9uKGUsdCl7cmV0dXJuKG5ldyBuKS5sb2FkQXN5bmMoZSx0KX0sbi5leHRlcm5hbD1lKFwiLi9leHRlcm5hbFwiKSx0LmV4cG9ydHM9bn0se1wiLi9kZWZhdWx0c1wiOjUsXCIuL2V4dGVybmFsXCI6NixcIi4vbG9hZFwiOjExLFwiLi9vYmplY3RcIjoxNSxcIi4vc3VwcG9ydFwiOjMwfV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgdT1lKFwiLi91dGlsc1wiKSxpPWUoXCIuL2V4dGVybmFsXCIpLG49ZShcIi4vdXRmOFwiKSxzPWUoXCIuL3ppcEVudHJpZXNcIiksYT1lKFwiLi9zdHJlYW0vQ3JjMzJQcm9iZVwiKSxsPWUoXCIuL25vZGVqc1V0aWxzXCIpO2Z1bmN0aW9uIGYobil7cmV0dXJuIG5ldyBpLlByb21pc2UoZnVuY3Rpb24oZSx0KXt2YXIgcj1uLmRlY29tcHJlc3NlZC5nZXRDb250ZW50V29ya2VyKCkucGlwZShuZXcgYSk7ci5vbihcImVycm9yXCIsZnVuY3Rpb24oZSl7dChlKX0pLm9uKFwiZW5kXCIsZnVuY3Rpb24oKXtyLnN0cmVhbUluZm8uY3JjMzIhPT1uLmRlY29tcHJlc3NlZC5jcmMzMj90KG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgOiBDUkMzMiBtaXNtYXRjaFwiKSk6ZSgpfSkucmVzdW1lKCl9KX10LmV4cG9ydHM9ZnVuY3Rpb24oZSxvKXt2YXIgaD10aGlzO3JldHVybiBvPXUuZXh0ZW5kKG98fHt9LHtiYXNlNjQ6ITEsY2hlY2tDUkMzMjohMSxvcHRpbWl6ZWRCaW5hcnlTdHJpbmc6ITEsY3JlYXRlRm9sZGVyczohMSxkZWNvZGVGaWxlTmFtZTpuLnV0ZjhkZWNvZGV9KSxsLmlzTm9kZSYmbC5pc1N0cmVhbShlKT9pLlByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkpTWmlwIGNhbid0IGFjY2VwdCBhIHN0cmVhbSB3aGVuIGxvYWRpbmcgYSB6aXAgZmlsZS5cIikpOnUucHJlcGFyZUNvbnRlbnQoXCJ0aGUgbG9hZGVkIHppcCBmaWxlXCIsZSwhMCxvLm9wdGltaXplZEJpbmFyeVN0cmluZyxvLmJhc2U2NCkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1uZXcgcyhvKTtyZXR1cm4gdC5sb2FkKGUpLHR9KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PVtpLlByb21pc2UucmVzb2x2ZShlKV0scj1lLmZpbGVzO2lmKG8uY2hlY2tDUkMzMilmb3IodmFyIG49MDtuPHIubGVuZ3RoO24rKyl0LnB1c2goZihyW25dKSk7cmV0dXJuIGkuUHJvbWlzZS5hbGwodCl9KS50aGVuKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnNoaWZ0KCkscj10LmZpbGVzLG49MDtuPHIubGVuZ3RoO24rKyl7dmFyIGk9cltuXSxzPWkuZmlsZU5hbWVTdHIsYT11LnJlc29sdmUoaS5maWxlTmFtZVN0cik7aC5maWxlKGEsaS5kZWNvbXByZXNzZWQse2JpbmFyeTohMCxvcHRpbWl6ZWRCaW5hcnlTdHJpbmc6ITAsZGF0ZTppLmRhdGUsZGlyOmkuZGlyLGNvbW1lbnQ6aS5maWxlQ29tbWVudFN0ci5sZW5ndGg/aS5maWxlQ29tbWVudFN0cjpudWxsLHVuaXhQZXJtaXNzaW9uczppLnVuaXhQZXJtaXNzaW9ucyxkb3NQZXJtaXNzaW9uczppLmRvc1Blcm1pc3Npb25zLGNyZWF0ZUZvbGRlcnM6by5jcmVhdGVGb2xkZXJzfSksaS5kaXJ8fChoLmZpbGUoYSkudW5zYWZlT3JpZ2luYWxOYW1lPXMpfXJldHVybiB0LnppcENvbW1lbnQubGVuZ3RoJiYoaC5jb21tZW50PXQuemlwQ29tbWVudCksaH0pfX0se1wiLi9leHRlcm5hbFwiOjYsXCIuL25vZGVqc1V0aWxzXCI6MTQsXCIuL3N0cmVhbS9DcmMzMlByb2JlXCI6MjUsXCIuL3V0ZjhcIjozMSxcIi4vdXRpbHNcIjozMixcIi4vemlwRW50cmllc1wiOjMzfV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1lKFwiLi4vdXRpbHNcIiksaT1lKFwiLi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIik7ZnVuY3Rpb24gcyhlLHQpe2kuY2FsbCh0aGlzLFwiTm9kZWpzIHN0cmVhbSBpbnB1dCBhZGFwdGVyIGZvciBcIitlKSx0aGlzLl91cHN0cmVhbUVuZGVkPSExLHRoaXMuX2JpbmRTdHJlYW0odCl9bi5pbmhlcml0cyhzLGkpLHMucHJvdG90eXBlLl9iaW5kU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7KHRoaXMuX3N0cmVhbT1lKS5wYXVzZSgpLGUub24oXCJkYXRhXCIsZnVuY3Rpb24oZSl7dC5wdXNoKHtkYXRhOmUsbWV0YTp7cGVyY2VudDowfX0pfSkub24oXCJlcnJvclwiLGZ1bmN0aW9uKGUpe3QuaXNQYXVzZWQ/dGhpcy5nZW5lcmF0ZWRFcnJvcj1lOnQuZXJyb3IoZSl9KS5vbihcImVuZFwiLGZ1bmN0aW9uKCl7dC5pc1BhdXNlZD90Ll91cHN0cmVhbUVuZGVkPSEwOnQuZW5kKCl9KX0scy5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXtyZXR1cm4hIWkucHJvdG90eXBlLnBhdXNlLmNhbGwodGhpcykmJih0aGlzLl9zdHJlYW0ucGF1c2UoKSwhMCl9LHMucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3JldHVybiEhaS5wcm90b3R5cGUucmVzdW1lLmNhbGwodGhpcykmJih0aGlzLl91cHN0cmVhbUVuZGVkP3RoaXMuZW5kKCk6dGhpcy5fc3RyZWFtLnJlc3VtZSgpLCEwKX0sdC5leHBvcnRzPXN9LHtcIi4uL3N0cmVhbS9HZW5lcmljV29ya2VyXCI6MjgsXCIuLi91dGlsc1wiOjMyfV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1lKFwicmVhZGFibGUtc3RyZWFtXCIpLlJlYWRhYmxlO2Z1bmN0aW9uIG4oZSx0LHIpe2kuY2FsbCh0aGlzLHQpLHRoaXMuX2hlbHBlcj1lO3ZhciBuPXRoaXM7ZS5vbihcImRhdGFcIixmdW5jdGlvbihlLHQpe24ucHVzaChlKXx8bi5faGVscGVyLnBhdXNlKCksciYmcih0KX0pLm9uKFwiZXJyb3JcIixmdW5jdGlvbihlKXtuLmVtaXQoXCJlcnJvclwiLGUpfSkub24oXCJlbmRcIixmdW5jdGlvbigpe24ucHVzaChudWxsKX0pfWUoXCIuLi91dGlsc1wiKS5pbmhlcml0cyhuLGkpLG4ucHJvdG90eXBlLl9yZWFkPWZ1bmN0aW9uKCl7dGhpcy5faGVscGVyLnJlc3VtZSgpfSx0LmV4cG9ydHM9bn0se1wiLi4vdXRpbHNcIjozMixcInJlYWRhYmxlLXN0cmVhbVwiOjE2fV0sMTQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9e2lzTm9kZTpcInVuZGVmaW5lZFwiIT10eXBlb2YgQnVmZmVyLG5ld0J1ZmZlckZyb206ZnVuY3Rpb24oZSx0KXtpZihCdWZmZXIuZnJvbSYmQnVmZmVyLmZyb20hPT1VaW50OEFycmF5LmZyb20pcmV0dXJuIEJ1ZmZlci5mcm9tKGUsdCk7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJkYXRhXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKTtyZXR1cm4gbmV3IEJ1ZmZlcihlLHQpfSxhbGxvY0J1ZmZlcjpmdW5jdGlvbihlKXtpZihCdWZmZXIuYWxsb2MpcmV0dXJuIEJ1ZmZlci5hbGxvYyhlKTt2YXIgdD1uZXcgQnVmZmVyKGUpO3JldHVybiB0LmZpbGwoMCksdH0saXNCdWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihlKX0saXNTdHJlYW06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUub24mJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUucGF1c2UmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUucmVzdW1lfX19LHt9XSwxNTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHMoZSx0LHIpe3ZhciBuLGk9dS5nZXRUeXBlT2YodCkscz11LmV4dGVuZChyfHx7fSxmKTtzLmRhdGU9cy5kYXRlfHxuZXcgRGF0ZSxudWxsIT09cy5jb21wcmVzc2lvbiYmKHMuY29tcHJlc3Npb249cy5jb21wcmVzc2lvbi50b1VwcGVyQ2FzZSgpKSxcInN0cmluZ1wiPT10eXBlb2Ygcy51bml4UGVybWlzc2lvbnMmJihzLnVuaXhQZXJtaXNzaW9ucz1wYXJzZUludChzLnVuaXhQZXJtaXNzaW9ucyw4KSkscy51bml4UGVybWlzc2lvbnMmJjE2Mzg0JnMudW5peFBlcm1pc3Npb25zJiYocy5kaXI9ITApLHMuZG9zUGVybWlzc2lvbnMmJjE2JnMuZG9zUGVybWlzc2lvbnMmJihzLmRpcj0hMCkscy5kaXImJihlPWcoZSkpLHMuY3JlYXRlRm9sZGVycyYmKG49XyhlKSkmJmIuY2FsbCh0aGlzLG4sITApO3ZhciBhPVwic3RyaW5nXCI9PT1pJiYhMT09PXMuYmluYXJ5JiYhMT09PXMuYmFzZTY0O3ImJnZvaWQgMCE9PXIuYmluYXJ5fHwocy5iaW5hcnk9IWEpLCh0IGluc3RhbmNlb2YgYyYmMD09PXQudW5jb21wcmVzc2VkU2l6ZXx8cy5kaXJ8fCF0fHwwPT09dC5sZW5ndGgpJiYocy5iYXNlNjQ9ITEscy5iaW5hcnk9ITAsdD1cIlwiLHMuY29tcHJlc3Npb249XCJTVE9SRVwiLGk9XCJzdHJpbmdcIik7dmFyIG89bnVsbDtvPXQgaW5zdGFuY2VvZiBjfHx0IGluc3RhbmNlb2YgbD90OnAuaXNOb2RlJiZwLmlzU3RyZWFtKHQpP25ldyBtKGUsdCk6dS5wcmVwYXJlQ29udGVudChlLHQscy5iaW5hcnkscy5vcHRpbWl6ZWRCaW5hcnlTdHJpbmcscy5iYXNlNjQpO3ZhciBoPW5ldyBkKGUsbyxzKTt0aGlzLmZpbGVzW2VdPWh9dmFyIGk9ZShcIi4vdXRmOFwiKSx1PWUoXCIuL3V0aWxzXCIpLGw9ZShcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIiksYT1lKFwiLi9zdHJlYW0vU3RyZWFtSGVscGVyXCIpLGY9ZShcIi4vZGVmYXVsdHNcIiksYz1lKFwiLi9jb21wcmVzc2VkT2JqZWN0XCIpLGQ9ZShcIi4vemlwT2JqZWN0XCIpLG89ZShcIi4vZ2VuZXJhdGVcIikscD1lKFwiLi9ub2RlanNVdGlsc1wiKSxtPWUoXCIuL25vZGVqcy9Ob2RlanNTdHJlYW1JbnB1dEFkYXB0ZXJcIiksXz1mdW5jdGlvbihlKXtcIi9cIj09PWUuc2xpY2UoLTEpJiYoZT1lLnN1YnN0cmluZygwLGUubGVuZ3RoLTEpKTt2YXIgdD1lLmxhc3RJbmRleE9mKFwiL1wiKTtyZXR1cm4gMDx0P2Uuc3Vic3RyaW5nKDAsdCk6XCJcIn0sZz1mdW5jdGlvbihlKXtyZXR1cm5cIi9cIiE9PWUuc2xpY2UoLTEpJiYoZSs9XCIvXCIpLGV9LGI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD12b2lkIDAhPT10P3Q6Zi5jcmVhdGVGb2xkZXJzLGU9ZyhlKSx0aGlzLmZpbGVzW2VdfHxzLmNhbGwodGhpcyxlLG51bGwse2RpcjohMCxjcmVhdGVGb2xkZXJzOnR9KSx0aGlzLmZpbGVzW2VdfTtmdW5jdGlvbiBoKGUpe3JldHVyblwiW29iamVjdCBSZWdFeHBdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9dmFyIG49e2xvYWQ6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1ldGhvZCBoYXMgYmVlbiByZW1vdmVkIGluIEpTWmlwIDMuMCwgcGxlYXNlIGNoZWNrIHRoZSB1cGdyYWRlIGd1aWRlLlwiKX0sZm9yRWFjaDpmdW5jdGlvbihlKXt2YXIgdCxyLG47Zm9yKHQgaW4gdGhpcy5maWxlcyluPXRoaXMuZmlsZXNbdF0sKHI9dC5zbGljZSh0aGlzLnJvb3QubGVuZ3RoLHQubGVuZ3RoKSkmJnQuc2xpY2UoMCx0aGlzLnJvb3QubGVuZ3RoKT09PXRoaXMucm9vdCYmZShyLG4pfSxmaWx0ZXI6ZnVuY3Rpb24ocil7dmFyIG49W107cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihlLHQpe3IoZSx0KSYmbi5wdXNoKHQpfSksbn0sZmlsZTpmdW5jdGlvbihlLHQscil7aWYoMSE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGU9dGhpcy5yb290K2Uscy5jYWxsKHRoaXMsZSx0LHIpLHRoaXM7aWYoaChlKSl7dmFyIG49ZTtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oZSx0KXtyZXR1cm4hdC5kaXImJm4udGVzdChlKX0pfXZhciBpPXRoaXMuZmlsZXNbdGhpcy5yb290K2VdO3JldHVybiBpJiYhaS5kaXI/aTpudWxsfSxmb2xkZXI6ZnVuY3Rpb24ocil7aWYoIXIpcmV0dXJuIHRoaXM7aWYoaChyKSlyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5kaXImJnIudGVzdChlKX0pO3ZhciBlPXRoaXMucm9vdCtyLHQ9Yi5jYWxsKHRoaXMsZSksbj10aGlzLmNsb25lKCk7cmV0dXJuIG4ucm9vdD10Lm5hbWUsbn0scmVtb3ZlOmZ1bmN0aW9uKHIpe3I9dGhpcy5yb290K3I7dmFyIGU9dGhpcy5maWxlc1tyXTtpZihlfHwoXCIvXCIhPT1yLnNsaWNlKC0xKSYmKHIrPVwiL1wiKSxlPXRoaXMuZmlsZXNbcl0pLGUmJiFlLmRpcilkZWxldGUgdGhpcy5maWxlc1tyXTtlbHNlIGZvcih2YXIgdD10aGlzLmZpbHRlcihmdW5jdGlvbihlLHQpe3JldHVybiB0Lm5hbWUuc2xpY2UoMCxyLmxlbmd0aCk9PT1yfSksbj0wO248dC5sZW5ndGg7bisrKWRlbGV0ZSB0aGlzLmZpbGVzW3Rbbl0ubmFtZV07cmV0dXJuIHRoaXN9LGdlbmVyYXRlOmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiVGhpcyBtZXRob2QgaGFzIGJlZW4gcmVtb3ZlZCBpbiBKU1ppcCAzLjAsIHBsZWFzZSBjaGVjayB0aGUgdXBncmFkZSBndWlkZS5cIil9LGdlbmVyYXRlSW50ZXJuYWxTdHJlYW06ZnVuY3Rpb24oZSl7dmFyIHQscj17fTt0cnl7aWYoKHI9dS5leHRlbmQoZXx8e30se3N0cmVhbUZpbGVzOiExLGNvbXByZXNzaW9uOlwiU1RPUkVcIixjb21wcmVzc2lvbk9wdGlvbnM6bnVsbCx0eXBlOlwiXCIscGxhdGZvcm06XCJET1NcIixjb21tZW50Om51bGwsbWltZVR5cGU6XCJhcHBsaWNhdGlvbi96aXBcIixlbmNvZGVGaWxlTmFtZTppLnV0ZjhlbmNvZGV9KSkudHlwZT1yLnR5cGUudG9Mb3dlckNhc2UoKSxyLmNvbXByZXNzaW9uPXIuY29tcHJlc3Npb24udG9VcHBlckNhc2UoKSxcImJpbmFyeXN0cmluZ1wiPT09ci50eXBlJiYoci50eXBlPVwic3RyaW5nXCIpLCFyLnR5cGUpdGhyb3cgbmV3IEVycm9yKFwiTm8gb3V0cHV0IHR5cGUgc3BlY2lmaWVkLlwiKTt1LmNoZWNrU3VwcG9ydChyLnR5cGUpLFwiZGFyd2luXCIhPT1yLnBsYXRmb3JtJiZcImZyZWVic2RcIiE9PXIucGxhdGZvcm0mJlwibGludXhcIiE9PXIucGxhdGZvcm0mJlwic3Vub3NcIiE9PXIucGxhdGZvcm18fChyLnBsYXRmb3JtPVwiVU5JWFwiKSxcIndpbjMyXCI9PT1yLnBsYXRmb3JtJiYoci5wbGF0Zm9ybT1cIkRPU1wiKTt2YXIgbj1yLmNvbW1lbnR8fHRoaXMuY29tbWVudHx8XCJcIjt0PW8uZ2VuZXJhdGVXb3JrZXIodGhpcyxyLG4pfWNhdGNoKGUpeyh0PW5ldyBsKFwiZXJyb3JcIikpLmVycm9yKGUpfXJldHVybiBuZXcgYSh0LHIudHlwZXx8XCJzdHJpbmdcIixyLm1pbWVUeXBlKX0sZ2VuZXJhdGVBc3luYzpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmdlbmVyYXRlSW50ZXJuYWxTdHJlYW0oZSkuYWNjdW11bGF0ZSh0KX0sZ2VuZXJhdGVOb2RlU3RyZWFtOmZ1bmN0aW9uKGUsdCl7cmV0dXJuKGU9ZXx8e30pLnR5cGV8fChlLnR5cGU9XCJub2RlYnVmZmVyXCIpLHRoaXMuZ2VuZXJhdGVJbnRlcm5hbFN0cmVhbShlKS50b05vZGVqc1N0cmVhbSh0KX19O3QuZXhwb3J0cz1ufSx7XCIuL2NvbXByZXNzZWRPYmplY3RcIjoyLFwiLi9kZWZhdWx0c1wiOjUsXCIuL2dlbmVyYXRlXCI6OSxcIi4vbm9kZWpzL05vZGVqc1N0cmVhbUlucHV0QWRhcHRlclwiOjEyLFwiLi9ub2RlanNVdGlsc1wiOjE0LFwiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiOjI4LFwiLi9zdHJlYW0vU3RyZWFtSGVscGVyXCI6MjksXCIuL3V0ZjhcIjozMSxcIi4vdXRpbHNcIjozMixcIi4vemlwT2JqZWN0XCI6MzV9XSwxNjpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz1lKFwic3RyZWFtXCIpfSx7c3RyZWFtOnZvaWQgMH1dLDE3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49ZShcIi4vRGF0YVJlYWRlclwiKTtmdW5jdGlvbiBpKGUpe24uY2FsbCh0aGlzLGUpO2Zvcih2YXIgdD0wO3Q8dGhpcy5kYXRhLmxlbmd0aDt0KyspZVt0XT0yNTUmZVt0XX1lKFwiLi4vdXRpbHNcIikuaW5oZXJpdHMoaSxuKSxpLnByb3RvdHlwZS5ieXRlQXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGF0YVt0aGlzLnplcm8rZV19LGkucHJvdG90eXBlLmxhc3RJbmRleE9mU2lnbmF0dXJlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmNoYXJDb2RlQXQoMCkscj1lLmNoYXJDb2RlQXQoMSksbj1lLmNoYXJDb2RlQXQoMiksaT1lLmNoYXJDb2RlQXQoMykscz10aGlzLmxlbmd0aC00OzA8PXM7LS1zKWlmKHRoaXMuZGF0YVtzXT09PXQmJnRoaXMuZGF0YVtzKzFdPT09ciYmdGhpcy5kYXRhW3MrMl09PT1uJiZ0aGlzLmRhdGFbcyszXT09PWkpcmV0dXJuIHMtdGhpcy56ZXJvO3JldHVybi0xfSxpLnByb3RvdHlwZS5yZWFkQW5kQ2hlY2tTaWduYXR1cmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jaGFyQ29kZUF0KDApLHI9ZS5jaGFyQ29kZUF0KDEpLG49ZS5jaGFyQ29kZUF0KDIpLGk9ZS5jaGFyQ29kZUF0KDMpLHM9dGhpcy5yZWFkRGF0YSg0KTtyZXR1cm4gdD09PXNbMF0mJnI9PT1zWzFdJiZuPT09c1syXSYmaT09PXNbM119LGkucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGUpe2lmKHRoaXMuY2hlY2tPZmZzZXQoZSksMD09PWUpcmV0dXJuW107dmFyIHQ9dGhpcy5kYXRhLnNsaWNlKHRoaXMuemVybyt0aGlzLmluZGV4LHRoaXMuemVybyt0aGlzLmluZGV4K2UpO3JldHVybiB0aGlzLmluZGV4Kz1lLHR9LHQuZXhwb3J0cz1pfSx7XCIuLi91dGlsc1wiOjMyLFwiLi9EYXRhUmVhZGVyXCI6MTh9XSwxODpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPWUoXCIuLi91dGlsc1wiKTtmdW5jdGlvbiBpKGUpe3RoaXMuZGF0YT1lLHRoaXMubGVuZ3RoPWUubGVuZ3RoLHRoaXMuaW5kZXg9MCx0aGlzLnplcm89MH1pLnByb3RvdHlwZT17Y2hlY2tPZmZzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5jaGVja0luZGV4KHRoaXMuaW5kZXgrZSl9LGNoZWNrSW5kZXg6ZnVuY3Rpb24oZSl7aWYodGhpcy5sZW5ndGg8dGhpcy56ZXJvK2V8fGU8MCl0aHJvdyBuZXcgRXJyb3IoXCJFbmQgb2YgZGF0YSByZWFjaGVkIChkYXRhIGxlbmd0aCA9IFwiK3RoaXMubGVuZ3RoK1wiLCBhc2tlZCBpbmRleCA9IFwiK2UrXCIpLiBDb3JydXB0ZWQgemlwID9cIil9LHNldEluZGV4OmZ1bmN0aW9uKGUpe3RoaXMuY2hlY2tJbmRleChlKSx0aGlzLmluZGV4PWV9LHNraXA6ZnVuY3Rpb24oZSl7dGhpcy5zZXRJbmRleCh0aGlzLmluZGV4K2UpfSxieXRlQXQ6ZnVuY3Rpb24oKXt9LHJlYWRJbnQ6ZnVuY3Rpb24oZSl7dmFyIHQscj0wO2Zvcih0aGlzLmNoZWNrT2Zmc2V0KGUpLHQ9dGhpcy5pbmRleCtlLTE7dD49dGhpcy5pbmRleDt0LS0pcj0ocjw8OCkrdGhpcy5ieXRlQXQodCk7cmV0dXJuIHRoaXMuaW5kZXgrPWUscn0scmVhZFN0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4gbi50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLHRoaXMucmVhZERhdGEoZSkpfSxyZWFkRGF0YTpmdW5jdGlvbigpe30sbGFzdEluZGV4T2ZTaWduYXR1cmU6ZnVuY3Rpb24oKXt9LHJlYWRBbmRDaGVja1NpZ25hdHVyZTpmdW5jdGlvbigpe30scmVhZERhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJlYWRJbnQoNCk7cmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKDE5ODArKGU+PjI1JjEyNyksKGU+PjIxJjE1KS0xLGU+PjE2JjMxLGU+PjExJjMxLGU+PjUmNjMsKDMxJmUpPDwxKSl9fSx0LmV4cG9ydHM9aX0se1wiLi4vdXRpbHNcIjozMn1dLDE5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49ZShcIi4vVWludDhBcnJheVJlYWRlclwiKTtmdW5jdGlvbiBpKGUpe24uY2FsbCh0aGlzLGUpfWUoXCIuLi91dGlsc1wiKS5pbmhlcml0cyhpLG4pLGkucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGUpe3RoaXMuY2hlY2tPZmZzZXQoZSk7dmFyIHQ9dGhpcy5kYXRhLnNsaWNlKHRoaXMuemVybyt0aGlzLmluZGV4LHRoaXMuemVybyt0aGlzLmluZGV4K2UpO3JldHVybiB0aGlzLmluZGV4Kz1lLHR9LHQuZXhwb3J0cz1pfSx7XCIuLi91dGlsc1wiOjMyLFwiLi9VaW50OEFycmF5UmVhZGVyXCI6MjF9XSwyMDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPWUoXCIuL0RhdGFSZWFkZXJcIik7ZnVuY3Rpb24gaShlKXtuLmNhbGwodGhpcyxlKX1lKFwiLi4vdXRpbHNcIikuaW5oZXJpdHMoaSxuKSxpLnByb3RvdHlwZS5ieXRlQXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGF0YS5jaGFyQ29kZUF0KHRoaXMuemVybytlKX0saS5wcm90b3R5cGUubGFzdEluZGV4T2ZTaWduYXR1cmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGF0YS5sYXN0SW5kZXhPZihlKS10aGlzLnplcm99LGkucHJvdG90eXBlLnJlYWRBbmRDaGVja1NpZ25hdHVyZT1mdW5jdGlvbihlKXtyZXR1cm4gZT09PXRoaXMucmVhZERhdGEoNCl9LGkucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGUpe3RoaXMuY2hlY2tPZmZzZXQoZSk7dmFyIHQ9dGhpcy5kYXRhLnNsaWNlKHRoaXMuemVybyt0aGlzLmluZGV4LHRoaXMuemVybyt0aGlzLmluZGV4K2UpO3JldHVybiB0aGlzLmluZGV4Kz1lLHR9LHQuZXhwb3J0cz1pfSx7XCIuLi91dGlsc1wiOjMyLFwiLi9EYXRhUmVhZGVyXCI6MTh9XSwyMTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPWUoXCIuL0FycmF5UmVhZGVyXCIpO2Z1bmN0aW9uIGkoZSl7bi5jYWxsKHRoaXMsZSl9ZShcIi4uL3V0aWxzXCIpLmluaGVyaXRzKGksbiksaS5wcm90b3R5cGUucmVhZERhdGE9ZnVuY3Rpb24oZSl7aWYodGhpcy5jaGVja09mZnNldChlKSwwPT09ZSlyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoMCk7dmFyIHQ9dGhpcy5kYXRhLnN1YmFycmF5KHRoaXMuemVybyt0aGlzLmluZGV4LHRoaXMuemVybyt0aGlzLmluZGV4K2UpO3JldHVybiB0aGlzLmluZGV4Kz1lLHR9LHQuZXhwb3J0cz1pfSx7XCIuLi91dGlsc1wiOjMyLFwiLi9BcnJheVJlYWRlclwiOjE3fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1lKFwiLi4vdXRpbHNcIiksaT1lKFwiLi4vc3VwcG9ydFwiKSxzPWUoXCIuL0FycmF5UmVhZGVyXCIpLGE9ZShcIi4vU3RyaW5nUmVhZGVyXCIpLG89ZShcIi4vTm9kZUJ1ZmZlclJlYWRlclwiKSxoPWUoXCIuL1VpbnQ4QXJyYXlSZWFkZXJcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4uZ2V0VHlwZU9mKGUpO3JldHVybiBuLmNoZWNrU3VwcG9ydCh0KSxcInN0cmluZ1wiIT09dHx8aS51aW50OGFycmF5P1wibm9kZWJ1ZmZlclwiPT09dD9uZXcgbyhlKTppLnVpbnQ4YXJyYXk/bmV3IGgobi50cmFuc2Zvcm1UbyhcInVpbnQ4YXJyYXlcIixlKSk6bmV3IHMobi50cmFuc2Zvcm1UbyhcImFycmF5XCIsZSkpOm5ldyBhKGUpfX0se1wiLi4vc3VwcG9ydFwiOjMwLFwiLi4vdXRpbHNcIjozMixcIi4vQXJyYXlSZWFkZXJcIjoxNyxcIi4vTm9kZUJ1ZmZlclJlYWRlclwiOjE5LFwiLi9TdHJpbmdSZWFkZXJcIjoyMCxcIi4vVWludDhBcnJheVJlYWRlclwiOjIxfV0sMjM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtyLkxPQ0FMX0ZJTEVfSEVBREVSPVwiUEtcdTAwMDNcdTAwMDRcIixyLkNFTlRSQUxfRklMRV9IRUFERVI9XCJQS1x1MDAwMVx1MDAwMlwiLHIuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EPVwiUEtcdTAwMDVcdTAwMDZcIixyLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0xPQ0FUT1I9XCJQS1x1MDAwNlx1MDAwN1wiLHIuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfRU5EPVwiUEtcdTAwMDZcdTAwMDZcIixyLkRBVEFfREVTQ1JJUFRPUj1cIlBLXHUwMDA3XFxiXCJ9LHt9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPWUoXCIuL0dlbmVyaWNXb3JrZXJcIiksaT1lKFwiLi4vdXRpbHNcIik7ZnVuY3Rpb24gcyhlKXtuLmNhbGwodGhpcyxcIkNvbnZlcnRXb3JrZXIgdG8gXCIrZSksdGhpcy5kZXN0VHlwZT1lfWkuaW5oZXJpdHMocyxuKSxzLnByb3RvdHlwZS5wcm9jZXNzQ2h1bms9ZnVuY3Rpb24oZSl7dGhpcy5wdXNoKHtkYXRhOmkudHJhbnNmb3JtVG8odGhpcy5kZXN0VHlwZSxlLmRhdGEpLG1ldGE6ZS5tZXRhfSl9LHQuZXhwb3J0cz1zfSx7XCIuLi91dGlsc1wiOjMyLFwiLi9HZW5lcmljV29ya2VyXCI6Mjh9XSwyNTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPWUoXCIuL0dlbmVyaWNXb3JrZXJcIiksaT1lKFwiLi4vY3JjMzJcIik7ZnVuY3Rpb24gcygpe24uY2FsbCh0aGlzLFwiQ3JjMzJQcm9iZVwiKSx0aGlzLndpdGhTdHJlYW1JbmZvKFwiY3JjMzJcIiwwKX1lKFwiLi4vdXRpbHNcIikuaW5oZXJpdHMocyxuKSxzLnByb3RvdHlwZS5wcm9jZXNzQ2h1bms9ZnVuY3Rpb24oZSl7dGhpcy5zdHJlYW1JbmZvLmNyYzMyPWkoZS5kYXRhLHRoaXMuc3RyZWFtSW5mby5jcmMzMnx8MCksdGhpcy5wdXNoKGUpfSx0LmV4cG9ydHM9c30se1wiLi4vY3JjMzJcIjo0LFwiLi4vdXRpbHNcIjozMixcIi4vR2VuZXJpY1dvcmtlclwiOjI4fV0sMjY6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1lKFwiLi4vdXRpbHNcIiksaT1lKFwiLi9HZW5lcmljV29ya2VyXCIpO2Z1bmN0aW9uIHMoZSl7aS5jYWxsKHRoaXMsXCJEYXRhTGVuZ3RoUHJvYmUgZm9yIFwiK2UpLHRoaXMucHJvcE5hbWU9ZSx0aGlzLndpdGhTdHJlYW1JbmZvKGUsMCl9bi5pbmhlcml0cyhzLGkpLHMucHJvdG90eXBlLnByb2Nlc3NDaHVuaz1mdW5jdGlvbihlKXtpZihlKXt2YXIgdD10aGlzLnN0cmVhbUluZm9bdGhpcy5wcm9wTmFtZV18fDA7dGhpcy5zdHJlYW1JbmZvW3RoaXMucHJvcE5hbWVdPXQrZS5kYXRhLmxlbmd0aH1pLnByb3RvdHlwZS5wcm9jZXNzQ2h1bmsuY2FsbCh0aGlzLGUpfSx0LmV4cG9ydHM9c30se1wiLi4vdXRpbHNcIjozMixcIi4vR2VuZXJpY1dvcmtlclwiOjI4fV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1lKFwiLi4vdXRpbHNcIiksaT1lKFwiLi9HZW5lcmljV29ya2VyXCIpO2Z1bmN0aW9uIHMoZSl7aS5jYWxsKHRoaXMsXCJEYXRhV29ya2VyXCIpO3ZhciB0PXRoaXM7dGhpcy5kYXRhSXNSZWFkeT0hMSx0aGlzLmluZGV4PTAsdGhpcy5tYXg9MCx0aGlzLmRhdGE9bnVsbCx0aGlzLnR5cGU9XCJcIix0aGlzLl90aWNrU2NoZWR1bGVkPSExLGUudGhlbihmdW5jdGlvbihlKXt0LmRhdGFJc1JlYWR5PSEwLHQuZGF0YT1lLHQubWF4PWUmJmUubGVuZ3RofHwwLHQudHlwZT1uLmdldFR5cGVPZihlKSx0LmlzUGF1c2VkfHx0Ll90aWNrQW5kUmVwZWF0KCl9LGZ1bmN0aW9uKGUpe3QuZXJyb3IoZSl9KX1uLmluaGVyaXRzKHMsaSkscy5wcm90b3R5cGUuY2xlYW5VcD1mdW5jdGlvbigpe2kucHJvdG90eXBlLmNsZWFuVXAuY2FsbCh0aGlzKSx0aGlzLmRhdGE9bnVsbH0scy5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7cmV0dXJuISFpLnByb3RvdHlwZS5yZXN1bWUuY2FsbCh0aGlzKSYmKCF0aGlzLl90aWNrU2NoZWR1bGVkJiZ0aGlzLmRhdGFJc1JlYWR5JiYodGhpcy5fdGlja1NjaGVkdWxlZD0hMCxuLmRlbGF5KHRoaXMuX3RpY2tBbmRSZXBlYXQsW10sdGhpcykpLCEwKX0scy5wcm90b3R5cGUuX3RpY2tBbmRSZXBlYXQ9ZnVuY3Rpb24oKXt0aGlzLl90aWNrU2NoZWR1bGVkPSExLHRoaXMuaXNQYXVzZWR8fHRoaXMuaXNGaW5pc2hlZHx8KHRoaXMuX3RpY2soKSx0aGlzLmlzRmluaXNoZWR8fChuLmRlbGF5KHRoaXMuX3RpY2tBbmRSZXBlYXQsW10sdGhpcyksdGhpcy5fdGlja1NjaGVkdWxlZD0hMCkpfSxzLnByb3RvdHlwZS5fdGljaz1mdW5jdGlvbigpe2lmKHRoaXMuaXNQYXVzZWR8fHRoaXMuaXNGaW5pc2hlZClyZXR1cm4hMTt2YXIgZT1udWxsLHQ9TWF0aC5taW4odGhpcy5tYXgsdGhpcy5pbmRleCsxNjM4NCk7aWYodGhpcy5pbmRleD49dGhpcy5tYXgpcmV0dXJuIHRoaXMuZW5kKCk7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZVwic3RyaW5nXCI6ZT10aGlzLmRhdGEuc3Vic3RyaW5nKHRoaXMuaW5kZXgsdCk7YnJlYWs7Y2FzZVwidWludDhhcnJheVwiOmU9dGhpcy5kYXRhLnN1YmFycmF5KHRoaXMuaW5kZXgsdCk7YnJlYWs7Y2FzZVwiYXJyYXlcIjpjYXNlXCJub2RlYnVmZmVyXCI6ZT10aGlzLmRhdGEuc2xpY2UodGhpcy5pbmRleCx0KX1yZXR1cm4gdGhpcy5pbmRleD10LHRoaXMucHVzaCh7ZGF0YTplLG1ldGE6e3BlcmNlbnQ6dGhpcy5tYXg/dGhpcy5pbmRleC90aGlzLm1heCoxMDA6MH19KX0sdC5leHBvcnRzPXN9LHtcIi4uL3V0aWxzXCI6MzIsXCIuL0dlbmVyaWNXb3JrZXJcIjoyOH1dLDI4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXt0aGlzLm5hbWU9ZXx8XCJkZWZhdWx0XCIsdGhpcy5zdHJlYW1JbmZvPXt9LHRoaXMuZ2VuZXJhdGVkRXJyb3I9bnVsbCx0aGlzLmV4dHJhU3RyZWFtSW5mbz17fSx0aGlzLmlzUGF1c2VkPSEwLHRoaXMuaXNGaW5pc2hlZD0hMSx0aGlzLmlzTG9ja2VkPSExLHRoaXMuX2xpc3RlbmVycz17ZGF0YTpbXSxlbmQ6W10sZXJyb3I6W119LHRoaXMucHJldmlvdXM9bnVsbH1uLnByb3RvdHlwZT17cHVzaDpmdW5jdGlvbihlKXt0aGlzLmVtaXQoXCJkYXRhXCIsZSl9LGVuZDpmdW5jdGlvbigpe2lmKHRoaXMuaXNGaW5pc2hlZClyZXR1cm4hMTt0aGlzLmZsdXNoKCk7dHJ5e3RoaXMuZW1pdChcImVuZFwiKSx0aGlzLmNsZWFuVXAoKSx0aGlzLmlzRmluaXNoZWQ9ITB9Y2F0Y2goZSl7dGhpcy5lbWl0KFwiZXJyb3JcIixlKX1yZXR1cm4hMH0sZXJyb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIXRoaXMuaXNGaW5pc2hlZCYmKHRoaXMuaXNQYXVzZWQ/dGhpcy5nZW5lcmF0ZWRFcnJvcj1lOih0aGlzLmlzRmluaXNoZWQ9ITAsdGhpcy5lbWl0KFwiZXJyb3JcIixlKSx0aGlzLnByZXZpb3VzJiZ0aGlzLnByZXZpb3VzLmVycm9yKGUpLHRoaXMuY2xlYW5VcCgpKSwhMCl9LG9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2xpc3RlbmVyc1tlXS5wdXNoKHQpLHRoaXN9LGNsZWFuVXA6ZnVuY3Rpb24oKXt0aGlzLnN0cmVhbUluZm89dGhpcy5nZW5lcmF0ZWRFcnJvcj10aGlzLmV4dHJhU3RyZWFtSW5mbz1udWxsLHRoaXMuX2xpc3RlbmVycz1bXX0sZW1pdDpmdW5jdGlvbihlLHQpe2lmKHRoaXMuX2xpc3RlbmVyc1tlXSlmb3IodmFyIHI9MDtyPHRoaXMuX2xpc3RlbmVyc1tlXS5sZW5ndGg7cisrKXRoaXMuX2xpc3RlbmVyc1tlXVtyXS5jYWxsKHRoaXMsdCl9LHBpcGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVnaXN0ZXJQcmV2aW91cyh0aGlzKX0scmVnaXN0ZXJQcmV2aW91czpmdW5jdGlvbihlKXtpZih0aGlzLmlzTG9ja2VkKXRocm93IG5ldyBFcnJvcihcIlRoZSBzdHJlYW0gJ1wiK3RoaXMrXCInIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC5cIik7dGhpcy5zdHJlYW1JbmZvPWUuc3RyZWFtSW5mbyx0aGlzLm1lcmdlU3RyZWFtSW5mbygpLHRoaXMucHJldmlvdXM9ZTt2YXIgdD10aGlzO3JldHVybiBlLm9uKFwiZGF0YVwiLGZ1bmN0aW9uKGUpe3QucHJvY2Vzc0NodW5rKGUpfSksZS5vbihcImVuZFwiLGZ1bmN0aW9uKCl7dC5lbmQoKX0pLGUub24oXCJlcnJvclwiLGZ1bmN0aW9uKGUpe3QuZXJyb3IoZSl9KSx0aGlzfSxwYXVzZTpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzUGF1c2VkJiYhdGhpcy5pc0ZpbmlzaGVkJiYodGhpcy5pc1BhdXNlZD0hMCx0aGlzLnByZXZpb3VzJiZ0aGlzLnByZXZpb3VzLnBhdXNlKCksITApfSxyZXN1bWU6ZnVuY3Rpb24oKXtpZighdGhpcy5pc1BhdXNlZHx8dGhpcy5pc0ZpbmlzaGVkKXJldHVybiExO3ZhciBlPXRoaXMuaXNQYXVzZWQ9ITE7cmV0dXJuIHRoaXMuZ2VuZXJhdGVkRXJyb3ImJih0aGlzLmVycm9yKHRoaXMuZ2VuZXJhdGVkRXJyb3IpLGU9ITApLHRoaXMucHJldmlvdXMmJnRoaXMucHJldmlvdXMucmVzdW1lKCksIWV9LGZsdXNoOmZ1bmN0aW9uKCl7fSxwcm9jZXNzQ2h1bms6ZnVuY3Rpb24oZSl7dGhpcy5wdXNoKGUpfSx3aXRoU3RyZWFtSW5mbzpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmV4dHJhU3RyZWFtSW5mb1tlXT10LHRoaXMubWVyZ2VTdHJlYW1JbmZvKCksdGhpc30sbWVyZ2VTdHJlYW1JbmZvOmZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIHRoaXMuZXh0cmFTdHJlYW1JbmZvKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmV4dHJhU3RyZWFtSW5mbyxlKSYmKHRoaXMuc3RyZWFtSW5mb1tlXT10aGlzLmV4dHJhU3RyZWFtSW5mb1tlXSl9LGxvY2s6ZnVuY3Rpb24oKXtpZih0aGlzLmlzTG9ja2VkKXRocm93IG5ldyBFcnJvcihcIlRoZSBzdHJlYW0gJ1wiK3RoaXMrXCInIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC5cIik7dGhpcy5pc0xvY2tlZD0hMCx0aGlzLnByZXZpb3VzJiZ0aGlzLnByZXZpb3VzLmxvY2soKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT1cIldvcmtlciBcIit0aGlzLm5hbWU7cmV0dXJuIHRoaXMucHJldmlvdXM/dGhpcy5wcmV2aW91cytcIiAtPiBcIitlOmV9fSx0LmV4cG9ydHM9bn0se31dLDI5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGg9ZShcIi4uL3V0aWxzXCIpLGk9ZShcIi4vQ29udmVydFdvcmtlclwiKSxzPWUoXCIuL0dlbmVyaWNXb3JrZXJcIiksdT1lKFwiLi4vYmFzZTY0XCIpLG49ZShcIi4uL3N1cHBvcnRcIiksYT1lKFwiLi4vZXh0ZXJuYWxcIiksbz1udWxsO2lmKG4ubm9kZXN0cmVhbSl0cnl7bz1lKFwiLi4vbm9kZWpzL05vZGVqc1N0cmVhbU91dHB1dEFkYXB0ZXJcIil9Y2F0Y2goZSl7fWZ1bmN0aW9uIGwoZSxvKXtyZXR1cm4gbmV3IGEuUHJvbWlzZShmdW5jdGlvbih0LHIpe3ZhciBuPVtdLGk9ZS5faW50ZXJuYWxUeXBlLHM9ZS5fb3V0cHV0VHlwZSxhPWUuX21pbWVUeXBlO2Uub24oXCJkYXRhXCIsZnVuY3Rpb24oZSx0KXtuLnB1c2goZSksbyYmbyh0KX0pLm9uKFwiZXJyb3JcIixmdW5jdGlvbihlKXtuPVtdLHIoZSl9KS5vbihcImVuZFwiLGZ1bmN0aW9uKCl7dHJ5e3ZhciBlPWZ1bmN0aW9uKGUsdCxyKXtzd2l0Y2goZSl7Y2FzZVwiYmxvYlwiOnJldHVybiBoLm5ld0Jsb2IoaC50cmFuc2Zvcm1UbyhcImFycmF5YnVmZmVyXCIsdCkscik7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIHUuZW5jb2RlKHQpO2RlZmF1bHQ6cmV0dXJuIGgudHJhbnNmb3JtVG8oZSx0KX19KHMsZnVuY3Rpb24oZSx0KXt2YXIgcixuPTAsaT1udWxsLHM9MDtmb3Iocj0wO3I8dC5sZW5ndGg7cisrKXMrPXRbcl0ubGVuZ3RoO3N3aXRjaChlKXtjYXNlXCJzdHJpbmdcIjpyZXR1cm4gdC5qb2luKFwiXCIpO2Nhc2VcImFycmF5XCI6cmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sdCk7Y2FzZVwidWludDhhcnJheVwiOmZvcihpPW5ldyBVaW50OEFycmF5KHMpLHI9MDtyPHQubGVuZ3RoO3IrKylpLnNldCh0W3JdLG4pLG4rPXRbcl0ubGVuZ3RoO3JldHVybiBpO2Nhc2VcIm5vZGVidWZmZXJcIjpyZXR1cm4gQnVmZmVyLmNvbmNhdCh0KTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcImNvbmNhdCA6IHVuc3VwcG9ydGVkIHR5cGUgJ1wiK2UrXCInXCIpfX0oaSxuKSxhKTt0KGUpfWNhdGNoKGUpe3IoZSl9bj1bXX0pLnJlc3VtZSgpfSl9ZnVuY3Rpb24gZihlLHQscil7dmFyIG49dDtzd2l0Y2godCl7Y2FzZVwiYmxvYlwiOmNhc2VcImFycmF5YnVmZmVyXCI6bj1cInVpbnQ4YXJyYXlcIjticmVhaztjYXNlXCJiYXNlNjRcIjpuPVwic3RyaW5nXCJ9dHJ5e3RoaXMuX2ludGVybmFsVHlwZT1uLHRoaXMuX291dHB1dFR5cGU9dCx0aGlzLl9taW1lVHlwZT1yLGguY2hlY2tTdXBwb3J0KG4pLHRoaXMuX3dvcmtlcj1lLnBpcGUobmV3IGkobikpLGUubG9jaygpfWNhdGNoKGUpe3RoaXMuX3dvcmtlcj1uZXcgcyhcImVycm9yXCIpLHRoaXMuX3dvcmtlci5lcnJvcihlKX19Zi5wcm90b3R5cGU9e2FjY3VtdWxhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGwodGhpcyxlKX0sb246ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVyblwiZGF0YVwiPT09ZT90aGlzLl93b3JrZXIub24oZSxmdW5jdGlvbihlKXt0LmNhbGwocixlLmRhdGEsZS5tZXRhKX0pOnRoaXMuX3dvcmtlci5vbihlLGZ1bmN0aW9uKCl7aC5kZWxheSh0LGFyZ3VtZW50cyxyKX0pLHRoaXN9LHJlc3VtZTpmdW5jdGlvbigpe3JldHVybiBoLmRlbGF5KHRoaXMuX3dvcmtlci5yZXN1bWUsW10sdGhpcy5fd29ya2VyKSx0aGlzfSxwYXVzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93b3JrZXIucGF1c2UoKSx0aGlzfSx0b05vZGVqc1N0cmVhbTpmdW5jdGlvbihlKXtpZihoLmNoZWNrU3VwcG9ydChcIm5vZGVzdHJlYW1cIiksXCJub2RlYnVmZmVyXCIhPT10aGlzLl9vdXRwdXRUeXBlKXRocm93IG5ldyBFcnJvcih0aGlzLl9vdXRwdXRUeXBlK1wiIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBtZXRob2RcIik7cmV0dXJuIG5ldyBvKHRoaXMse29iamVjdE1vZGU6XCJub2RlYnVmZmVyXCIhPT10aGlzLl9vdXRwdXRUeXBlfSxlKX19LHQuZXhwb3J0cz1mfSx7XCIuLi9iYXNlNjRcIjoxLFwiLi4vZXh0ZXJuYWxcIjo2LFwiLi4vbm9kZWpzL05vZGVqc1N0cmVhbU91dHB1dEFkYXB0ZXJcIjoxMyxcIi4uL3N1cHBvcnRcIjozMCxcIi4uL3V0aWxzXCI6MzIsXCIuL0NvbnZlcnRXb3JrZXJcIjoyNCxcIi4vR2VuZXJpY1dvcmtlclwiOjI4fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtpZihyLmJhc2U2ND0hMCxyLmFycmF5PSEwLHIuc3RyaW5nPSEwLHIuYXJyYXlidWZmZXI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSxyLm5vZGVidWZmZXI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJ1ZmZlcixyLnVpbnQ4YXJyYXk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXksXCJ1bmRlZmluZWRcIj09dHlwZW9mIEFycmF5QnVmZmVyKXIuYmxvYj0hMTtlbHNle3ZhciBuPW5ldyBBcnJheUJ1ZmZlcigwKTt0cnl7ci5ibG9iPTA9PT1uZXcgQmxvYihbbl0se3R5cGU6XCJhcHBsaWNhdGlvbi96aXBcIn0pLnNpemV9Y2F0Y2goZSl7dHJ5e3ZhciBpPW5ldyhzZWxmLkJsb2JCdWlsZGVyfHxzZWxmLldlYktpdEJsb2JCdWlsZGVyfHxzZWxmLk1vekJsb2JCdWlsZGVyfHxzZWxmLk1TQmxvYkJ1aWxkZXIpO2kuYXBwZW5kKG4pLHIuYmxvYj0wPT09aS5nZXRCbG9iKFwiYXBwbGljYXRpb24vemlwXCIpLnNpemV9Y2F0Y2goZSl7ci5ibG9iPSExfX19dHJ5e3Iubm9kZXN0cmVhbT0hIWUoXCJyZWFkYWJsZS1zdHJlYW1cIikuUmVhZGFibGV9Y2F0Y2goZSl7ci5ub2Rlc3RyZWFtPSExfX0se1wicmVhZGFibGUtc3RyZWFtXCI6MTZ9XSwzMTpbZnVuY3Rpb24oZSx0LHMpe1widXNlIHN0cmljdFwiO2Zvcih2YXIgbz1lKFwiLi91dGlsc1wiKSxoPWUoXCIuL3N1cHBvcnRcIikscj1lKFwiLi9ub2RlanNVdGlsc1wiKSxuPWUoXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCIpLHU9bmV3IEFycmF5KDI1NiksaT0wO2k8MjU2O2krKyl1W2ldPTI1Mjw9aT82OjI0ODw9aT81OjI0MDw9aT80OjIyNDw9aT8zOjE5Mjw9aT8yOjE7dVsyNTRdPXVbMjU0XT0xO2Z1bmN0aW9uIGEoKXtuLmNhbGwodGhpcyxcInV0Zi04IGRlY29kZVwiKSx0aGlzLmxlZnRPdmVyPW51bGx9ZnVuY3Rpb24gbCgpe24uY2FsbCh0aGlzLFwidXRmLTggZW5jb2RlXCIpfXMudXRmOGVuY29kZT1mdW5jdGlvbihlKXtyZXR1cm4gaC5ub2RlYnVmZmVyP3IubmV3QnVmZmVyRnJvbShlLFwidXRmLThcIik6ZnVuY3Rpb24oZSl7dmFyIHQscixuLGkscyxhPWUubGVuZ3RoLG89MDtmb3IoaT0wO2k8YTtpKyspNTUyOTY9PSg2NDUxMiYocj1lLmNoYXJDb2RlQXQoaSkpKSYmaSsxPGEmJjU2MzIwPT0oNjQ1MTImKG49ZS5jaGFyQ29kZUF0KGkrMSkpKSYmKHI9NjU1MzYrKHItNTUyOTY8PDEwKSsobi01NjMyMCksaSsrKSxvKz1yPDEyOD8xOnI8MjA0OD8yOnI8NjU1MzY/Mzo0O2Zvcih0PWgudWludDhhcnJheT9uZXcgVWludDhBcnJheShvKTpuZXcgQXJyYXkobyksaT1zPTA7czxvO2krKyk1NTI5Nj09KDY0NTEyJihyPWUuY2hhckNvZGVBdChpKSkpJiZpKzE8YSYmNTYzMjA9PSg2NDUxMiYobj1lLmNoYXJDb2RlQXQoaSsxKSkpJiYocj02NTUzNisoci01NTI5Njw8MTApKyhuLTU2MzIwKSxpKyspLHI8MTI4P3RbcysrXT1yOihyPDIwNDg/dFtzKytdPTE5MnxyPj4+Njoocjw2NTUzNj90W3MrK109MjI0fHI+Pj4xMjoodFtzKytdPTI0MHxyPj4+MTgsdFtzKytdPTEyOHxyPj4+MTImNjMpLHRbcysrXT0xMjh8cj4+PjYmNjMpLHRbcysrXT0xMjh8NjMmcik7cmV0dXJuIHR9KGUpfSxzLnV0ZjhkZWNvZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGgubm9kZWJ1ZmZlcj9vLnRyYW5zZm9ybVRvKFwibm9kZWJ1ZmZlclwiLGUpLnRvU3RyaW5nKFwidXRmLThcIik6ZnVuY3Rpb24oZSl7dmFyIHQscixuLGkscz1lLmxlbmd0aCxhPW5ldyBBcnJheSgyKnMpO2Zvcih0PXI9MDt0PHM7KWlmKChuPWVbdCsrXSk8MTI4KWFbcisrXT1uO2Vsc2UgaWYoNDwoaT11W25dKSlhW3IrK109NjU1MzMsdCs9aS0xO2Vsc2V7Zm9yKG4mPTI9PT1pPzMxOjM9PT1pPzE1Ojc7MTxpJiZ0PHM7KW49bjw8Nnw2MyZlW3QrK10saS0tOzE8aT9hW3IrK109NjU1MzM6bjw2NTUzNj9hW3IrK109bjoobi09NjU1MzYsYVtyKytdPTU1Mjk2fG4+PjEwJjEwMjMsYVtyKytdPTU2MzIwfDEwMjMmbil9cmV0dXJuIGEubGVuZ3RoIT09ciYmKGEuc3ViYXJyYXk/YT1hLnN1YmFycmF5KDAscik6YS5sZW5ndGg9ciksby5hcHBseUZyb21DaGFyQ29kZShhKX0oZT1vLnRyYW5zZm9ybVRvKGgudWludDhhcnJheT9cInVpbnQ4YXJyYXlcIjpcImFycmF5XCIsZSkpfSxvLmluaGVyaXRzKGEsbiksYS5wcm90b3R5cGUucHJvY2Vzc0NodW5rPWZ1bmN0aW9uKGUpe3ZhciB0PW8udHJhbnNmb3JtVG8oaC51aW50OGFycmF5P1widWludDhhcnJheVwiOlwiYXJyYXlcIixlLmRhdGEpO2lmKHRoaXMubGVmdE92ZXImJnRoaXMubGVmdE92ZXIubGVuZ3RoKXtpZihoLnVpbnQ4YXJyYXkpe3ZhciByPXQ7KHQ9bmV3IFVpbnQ4QXJyYXkoci5sZW5ndGgrdGhpcy5sZWZ0T3Zlci5sZW5ndGgpKS5zZXQodGhpcy5sZWZ0T3ZlciwwKSx0LnNldChyLHRoaXMubGVmdE92ZXIubGVuZ3RoKX1lbHNlIHQ9dGhpcy5sZWZ0T3Zlci5jb25jYXQodCk7dGhpcy5sZWZ0T3Zlcj1udWxsfXZhciBuPWZ1bmN0aW9uKGUsdCl7dmFyIHI7Zm9yKCh0PXR8fGUubGVuZ3RoKT5lLmxlbmd0aCYmKHQ9ZS5sZW5ndGgpLHI9dC0xOzA8PXImJjEyOD09KDE5MiZlW3JdKTspci0tO3JldHVybiByPDA/dDowPT09cj90OnIrdVtlW3JdXT50P3I6dH0odCksaT10O24hPT10Lmxlbmd0aCYmKGgudWludDhhcnJheT8oaT10LnN1YmFycmF5KDAsbiksdGhpcy5sZWZ0T3Zlcj10LnN1YmFycmF5KG4sdC5sZW5ndGgpKTooaT10LnNsaWNlKDAsbiksdGhpcy5sZWZ0T3Zlcj10LnNsaWNlKG4sdC5sZW5ndGgpKSksdGhpcy5wdXNoKHtkYXRhOnMudXRmOGRlY29kZShpKSxtZXRhOmUubWV0YX0pfSxhLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe3RoaXMubGVmdE92ZXImJnRoaXMubGVmdE92ZXIubGVuZ3RoJiYodGhpcy5wdXNoKHtkYXRhOnMudXRmOGRlY29kZSh0aGlzLmxlZnRPdmVyKSxtZXRhOnt9fSksdGhpcy5sZWZ0T3Zlcj1udWxsKX0scy5VdGY4RGVjb2RlV29ya2VyPWEsby5pbmhlcml0cyhsLG4pLGwucHJvdG90eXBlLnByb2Nlc3NDaHVuaz1mdW5jdGlvbihlKXt0aGlzLnB1c2goe2RhdGE6cy51dGY4ZW5jb2RlKGUuZGF0YSksbWV0YTplLm1ldGF9KX0scy5VdGY4RW5jb2RlV29ya2VyPWx9LHtcIi4vbm9kZWpzVXRpbHNcIjoxNCxcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIjoyOCxcIi4vc3VwcG9ydFwiOjMwLFwiLi91dGlsc1wiOjMyfV0sMzI6W2Z1bmN0aW9uKGUsdCxhKXtcInVzZSBzdHJpY3RcIjt2YXIgbz1lKFwiLi9zdXBwb3J0XCIpLGg9ZShcIi4vYmFzZTY0XCIpLHI9ZShcIi4vbm9kZWpzVXRpbHNcIiksdT1lKFwiLi9leHRlcm5hbFwiKTtmdW5jdGlvbiBuKGUpe3JldHVybiBlfWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoOysrcil0W3JdPTI1NSZlLmNoYXJDb2RlQXQocik7cmV0dXJuIHR9ZShcInNldGltbWVkaWF0ZVwiKSxhLm5ld0Jsb2I9ZnVuY3Rpb24odCxyKXthLmNoZWNrU3VwcG9ydChcImJsb2JcIik7dHJ5e3JldHVybiBuZXcgQmxvYihbdF0se3R5cGU6cn0pfWNhdGNoKGUpe3RyeXt2YXIgbj1uZXcoc2VsZi5CbG9iQnVpbGRlcnx8c2VsZi5XZWJLaXRCbG9iQnVpbGRlcnx8c2VsZi5Nb3pCbG9iQnVpbGRlcnx8c2VsZi5NU0Jsb2JCdWlsZGVyKTtyZXR1cm4gbi5hcHBlbmQodCksbi5nZXRCbG9iKHIpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihcIkJ1ZyA6IGNhbid0IGNvbnN0cnVjdCB0aGUgQmxvYi5cIil9fX07dmFyIGk9e3N0cmluZ2lmeUJ5Q2h1bms6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPVtdLGk9MCxzPWUubGVuZ3RoO2lmKHM8PXIpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxlKTtmb3IoO2k8czspXCJhcnJheVwiPT09dHx8XCJub2RlYnVmZmVyXCI9PT10P24ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsZS5zbGljZShpLE1hdGgubWluKGkrcixzKSkpKTpuLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGUuc3ViYXJyYXkoaSxNYXRoLm1pbihpK3IscykpKSksaSs9cjtyZXR1cm4gbi5qb2luKFwiXCIpfSxzdHJpbmdpZnlCeUNoYXI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVwiXCIscj0wO3I8ZS5sZW5ndGg7cisrKXQrPVN0cmluZy5mcm9tQ2hhckNvZGUoZVtyXSk7cmV0dXJuIHR9LGFwcGx5Q2FuQmVVc2VkOnt1aW50OGFycmF5OmZ1bmN0aW9uKCl7dHJ5e3JldHVybiBvLnVpbnQ4YXJyYXkmJjE9PT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpLmxlbmd0aH1jYXRjaChlKXtyZXR1cm4hMX19KCksbm9kZWJ1ZmZlcjpmdW5jdGlvbigpe3RyeXtyZXR1cm4gby5ub2RlYnVmZmVyJiYxPT09U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHIuYWxsb2NCdWZmZXIoMSkpLmxlbmd0aH1jYXRjaChlKXtyZXR1cm4hMX19KCl9fTtmdW5jdGlvbiBzKGUpe3ZhciB0PTY1NTM2LHI9YS5nZXRUeXBlT2YoZSksbj0hMDtpZihcInVpbnQ4YXJyYXlcIj09PXI/bj1pLmFwcGx5Q2FuQmVVc2VkLnVpbnQ4YXJyYXk6XCJub2RlYnVmZmVyXCI9PT1yJiYobj1pLmFwcGx5Q2FuQmVVc2VkLm5vZGVidWZmZXIpLG4pZm9yKDsxPHQ7KXRyeXtyZXR1cm4gaS5zdHJpbmdpZnlCeUNodW5rKGUscix0KX1jYXRjaChlKXt0PU1hdGguZmxvb3IodC8yKX1yZXR1cm4gaS5zdHJpbmdpZnlCeUNoYXIoZSl9ZnVuY3Rpb24gZihlLHQpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXRbcl09ZVtyXTtyZXR1cm4gdH1hLmFwcGx5RnJvbUNoYXJDb2RlPXM7dmFyIGM9e307Yy5zdHJpbmc9e3N0cmluZzpuLGFycmF5OmZ1bmN0aW9uKGUpe3JldHVybiBsKGUsbmV3IEFycmF5KGUubGVuZ3RoKSl9LGFycmF5YnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiBjLnN0cmluZy51aW50OGFycmF5KGUpLmJ1ZmZlcn0sdWludDhhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gbChlLG5ldyBVaW50OEFycmF5KGUubGVuZ3RoKSl9LG5vZGVidWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGwoZSxyLmFsbG9jQnVmZmVyKGUubGVuZ3RoKSl9fSxjLmFycmF5PXtzdHJpbmc6cyxhcnJheTpuLGFycmF5YnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgVWludDhBcnJheShlKS5idWZmZXJ9LHVpbnQ4YXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBVaW50OEFycmF5KGUpfSxub2RlYnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiByLm5ld0J1ZmZlckZyb20oZSl9fSxjLmFycmF5YnVmZmVyPXtzdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIHMobmV3IFVpbnQ4QXJyYXkoZSkpfSxhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gZihuZXcgVWludDhBcnJheShlKSxuZXcgQXJyYXkoZS5ieXRlTGVuZ3RoKSl9LGFycmF5YnVmZmVyOm4sdWludDhhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZSl9LG5vZGVidWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHIubmV3QnVmZmVyRnJvbShuZXcgVWludDhBcnJheShlKSl9fSxjLnVpbnQ4YXJyYXk9e3N0cmluZzpzLGFycmF5OmZ1bmN0aW9uKGUpe3JldHVybiBmKGUsbmV3IEFycmF5KGUubGVuZ3RoKSl9LGFycmF5YnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiBlLmJ1ZmZlcn0sdWludDhhcnJheTpuLG5vZGVidWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHIubmV3QnVmZmVyRnJvbShlKX19LGMubm9kZWJ1ZmZlcj17c3RyaW5nOnMsYXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIGYoZSxuZXcgQXJyYXkoZS5sZW5ndGgpKX0sYXJyYXlidWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGMubm9kZWJ1ZmZlci51aW50OGFycmF5KGUpLmJ1ZmZlcn0sdWludDhhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gZihlLG5ldyBVaW50OEFycmF5KGUubGVuZ3RoKSl9LG5vZGVidWZmZXI6bn0sYS50cmFuc2Zvcm1Ubz1mdW5jdGlvbihlLHQpe2lmKHQ9dHx8XCJcIiwhZSlyZXR1cm4gdDthLmNoZWNrU3VwcG9ydChlKTt2YXIgcj1hLmdldFR5cGVPZih0KTtyZXR1cm4gY1tyXVtlXSh0KX0sYS5yZXNvbHZlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnNwbGl0KFwiL1wiKSxyPVtdLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIGk9dFtuXTtcIi5cIj09PWl8fFwiXCI9PT1pJiYwIT09biYmbiE9PXQubGVuZ3RoLTF8fChcIi4uXCI9PT1pP3IucG9wKCk6ci5wdXNoKGkpKX1yZXR1cm4gci5qb2luKFwiL1wiKX0sYS5nZXRUeXBlT2Y9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/XCJzdHJpbmdcIjpcIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk/XCJhcnJheVwiOm8ubm9kZWJ1ZmZlciYmci5pc0J1ZmZlcihlKT9cIm5vZGVidWZmZXJcIjpvLnVpbnQ4YXJyYXkmJmUgaW5zdGFuY2VvZiBVaW50OEFycmF5P1widWludDhhcnJheVwiOm8uYXJyYXlidWZmZXImJmUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcj9cImFycmF5YnVmZmVyXCI6dm9pZCAwfSxhLmNoZWNrU3VwcG9ydD1mdW5jdGlvbihlKXtpZighb1tlLnRvTG93ZXJDYXNlKCldKXRocm93IG5ldyBFcnJvcihlK1wiIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBwbGF0Zm9ybVwiKX0sYS5NQVhfVkFMVUVfMTZCSVRTPTY1NTM1LGEuTUFYX1ZBTFVFXzMyQklUUz0tMSxhLnByZXR0eT1mdW5jdGlvbihlKXt2YXIgdCxyLG49XCJcIjtmb3Iocj0wO3I8KGV8fFwiXCIpLmxlbmd0aDtyKyspbis9XCJcXFxceFwiKygodD1lLmNoYXJDb2RlQXQocikpPDE2P1wiMFwiOlwiXCIpK3QudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7cmV0dXJuIG59LGEuZGVsYXk9ZnVuY3Rpb24oZSx0LHIpe3NldEltbWVkaWF0ZShmdW5jdGlvbigpe2UuYXBwbHkocnx8bnVsbCx0fHxbXSl9KX0sYS5pbmhlcml0cz1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt9ci5wcm90b3R5cGU9dC5wcm90b3R5cGUsZS5wcm90b3R5cGU9bmV3IHJ9LGEuZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxyPXt9O2ZvcihlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKylmb3IodCBpbiBhcmd1bWVudHNbZV0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFyZ3VtZW50c1tlXSx0KSYmdm9pZCAwPT09clt0XSYmKHJbdF09YXJndW1lbnRzW2VdW3RdKTtyZXR1cm4gcn0sYS5wcmVwYXJlQ29udGVudD1mdW5jdGlvbihyLGUsbixpLHMpe3JldHVybiB1LlByb21pc2UucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKG4pe3JldHVybiBvLmJsb2ImJihuIGluc3RhbmNlb2YgQmxvYnx8LTEhPT1bXCJbb2JqZWN0IEZpbGVdXCIsXCJbb2JqZWN0IEJsb2JdXCJdLmluZGV4T2YoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG4pKSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBGaWxlUmVhZGVyP25ldyB1LlByb21pc2UoZnVuY3Rpb24odCxyKXt2YXIgZT1uZXcgRmlsZVJlYWRlcjtlLm9ubG9hZD1mdW5jdGlvbihlKXt0KGUudGFyZ2V0LnJlc3VsdCl9LGUub25lcnJvcj1mdW5jdGlvbihlKXtyKGUudGFyZ2V0LmVycm9yKX0sZS5yZWFkQXNBcnJheUJ1ZmZlcihuKX0pOm59KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PWEuZ2V0VHlwZU9mKGUpO3JldHVybiB0PyhcImFycmF5YnVmZmVyXCI9PT10P2U9YS50cmFuc2Zvcm1UbyhcInVpbnQ4YXJyYXlcIixlKTpcInN0cmluZ1wiPT09dCYmKHM/ZT1oLmRlY29kZShlKTpuJiYhMCE9PWkmJihlPWZ1bmN0aW9uKGUpe3JldHVybiBsKGUsby51aW50OGFycmF5P25ldyBVaW50OEFycmF5KGUubGVuZ3RoKTpuZXcgQXJyYXkoZS5sZW5ndGgpKX0oZSkpKSxlKTp1LlByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkNhbid0IHJlYWQgdGhlIGRhdGEgb2YgJ1wiK3IrXCInLiBJcyBpdCBpbiBhIHN1cHBvcnRlZCBKYXZhU2NyaXB0IHR5cGUgKFN0cmluZywgQmxvYiwgQXJyYXlCdWZmZXIsIGV0YykgP1wiKSl9KX19LHtcIi4vYmFzZTY0XCI6MSxcIi4vZXh0ZXJuYWxcIjo2LFwiLi9ub2RlanNVdGlsc1wiOjE0LFwiLi9zdXBwb3J0XCI6MzAsc2V0aW1tZWRpYXRlOjU0fV0sMzM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1lKFwiLi9yZWFkZXIvcmVhZGVyRm9yXCIpLGk9ZShcIi4vdXRpbHNcIikscz1lKFwiLi9zaWduYXR1cmVcIiksYT1lKFwiLi96aXBFbnRyeVwiKSxvPWUoXCIuL3N1cHBvcnRcIik7ZnVuY3Rpb24gaChlKXt0aGlzLmZpbGVzPVtdLHRoaXMubG9hZE9wdGlvbnM9ZX1oLnByb3RvdHlwZT17Y2hlY2tTaWduYXR1cmU6ZnVuY3Rpb24oZSl7aWYoIXRoaXMucmVhZGVyLnJlYWRBbmRDaGVja1NpZ25hdHVyZShlKSl7dGhpcy5yZWFkZXIuaW5kZXgtPTQ7dmFyIHQ9dGhpcy5yZWFkZXIucmVhZFN0cmluZyg0KTt0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIG9yIGJ1ZzogdW5leHBlY3RlZCBzaWduYXR1cmUgKFwiK2kucHJldHR5KHQpK1wiLCBleHBlY3RlZCBcIitpLnByZXR0eShlKStcIilcIil9fSxpc1NpZ25hdHVyZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMucmVhZGVyLmluZGV4O3RoaXMucmVhZGVyLnNldEluZGV4KGUpO3ZhciBuPXRoaXMucmVhZGVyLnJlYWRTdHJpbmcoNCk9PT10O3JldHVybiB0aGlzLnJlYWRlci5zZXRJbmRleChyKSxufSxyZWFkQmxvY2tFbmRPZkNlbnRyYWw6ZnVuY3Rpb24oKXt0aGlzLmRpc2tOdW1iZXI9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0PXRoaXMucmVhZGVyLnJlYWRJbnQoMiksdGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzPXRoaXMucmVhZGVyLnJlYWRJbnQoMiksdGhpcy5jZW50cmFsRGlyU2l6ZT10aGlzLnJlYWRlci5yZWFkSW50KDQpLHRoaXMuY2VudHJhbERpck9mZnNldD10aGlzLnJlYWRlci5yZWFkSW50KDQpLHRoaXMuemlwQ29tbWVudExlbmd0aD10aGlzLnJlYWRlci5yZWFkSW50KDIpO3ZhciBlPXRoaXMucmVhZGVyLnJlYWREYXRhKHRoaXMuemlwQ29tbWVudExlbmd0aCksdD1vLnVpbnQ4YXJyYXk/XCJ1aW50OGFycmF5XCI6XCJhcnJheVwiLHI9aS50cmFuc2Zvcm1Ubyh0LGUpO3RoaXMuemlwQ29tbWVudD10aGlzLmxvYWRPcHRpb25zLmRlY29kZUZpbGVOYW1lKHIpfSxyZWFkQmxvY2taaXA2NEVuZE9mQ2VudHJhbDpmdW5jdGlvbigpe3RoaXMuemlwNjRFbmRPZkNlbnRyYWxTaXplPXRoaXMucmVhZGVyLnJlYWRJbnQoOCksdGhpcy5yZWFkZXIuc2tpcCg0KSx0aGlzLmRpc2tOdW1iZXI9dGhpcy5yZWFkZXIucmVhZEludCg0KSx0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0PXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9dGhpcy5yZWFkZXIucmVhZEludCg4KSx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzPXRoaXMucmVhZGVyLnJlYWRJbnQoOCksdGhpcy5jZW50cmFsRGlyU2l6ZT10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuY2VudHJhbERpck9mZnNldD10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuemlwNjRFeHRlbnNpYmxlRGF0YT17fTtmb3IodmFyIGUsdCxyLG49dGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUtNDQ7MDxuOyllPXRoaXMucmVhZGVyLnJlYWRJbnQoMiksdD10aGlzLnJlYWRlci5yZWFkSW50KDQpLHI9dGhpcy5yZWFkZXIucmVhZERhdGEodCksdGhpcy56aXA2NEV4dGVuc2libGVEYXRhW2VdPXtpZDplLGxlbmd0aDp0LHZhbHVlOnJ9fSxyZWFkQmxvY2taaXA2NEVuZE9mQ2VudHJhbExvY2F0b3I6ZnVuY3Rpb24oKXtpZih0aGlzLmRpc2tXaXRoWmlwNjRDZW50cmFsRGlyU3RhcnQ9dGhpcy5yZWFkZXIucmVhZEludCg0KSx0aGlzLnJlbGF0aXZlT2Zmc2V0RW5kT2ZaaXA2NENlbnRyYWxEaXI9dGhpcy5yZWFkZXIucmVhZEludCg4KSx0aGlzLmRpc2tzQ291bnQ9dGhpcy5yZWFkZXIucmVhZEludCg0KSwxPHRoaXMuZGlza3NDb3VudCl0aHJvdyBuZXcgRXJyb3IoXCJNdWx0aS12b2x1bWVzIHppcCBhcmUgbm90IHN1cHBvcnRlZFwiKX0scmVhZExvY2FsRmlsZXM6ZnVuY3Rpb24oKXt2YXIgZSx0O2ZvcihlPTA7ZTx0aGlzLmZpbGVzLmxlbmd0aDtlKyspdD10aGlzLmZpbGVzW2VdLHRoaXMucmVhZGVyLnNldEluZGV4KHQubG9jYWxIZWFkZXJPZmZzZXQpLHRoaXMuY2hlY2tTaWduYXR1cmUocy5MT0NBTF9GSUxFX0hFQURFUiksdC5yZWFkTG9jYWxQYXJ0KHRoaXMucmVhZGVyKSx0LmhhbmRsZVVURjgoKSx0LnByb2Nlc3NBdHRyaWJ1dGVzKCl9LHJlYWRDZW50cmFsRGlyOmZ1bmN0aW9uKCl7dmFyIGU7Zm9yKHRoaXMucmVhZGVyLnNldEluZGV4KHRoaXMuY2VudHJhbERpck9mZnNldCk7dGhpcy5yZWFkZXIucmVhZEFuZENoZWNrU2lnbmF0dXJlKHMuQ0VOVFJBTF9GSUxFX0hFQURFUik7KShlPW5ldyBhKHt6aXA2NDp0aGlzLnppcDY0fSx0aGlzLmxvYWRPcHRpb25zKSkucmVhZENlbnRyYWxQYXJ0KHRoaXMucmVhZGVyKSx0aGlzLmZpbGVzLnB1c2goZSk7aWYodGhpcy5jZW50cmFsRGlyUmVjb3JkcyE9PXRoaXMuZmlsZXMubGVuZ3RoJiYwIT09dGhpcy5jZW50cmFsRGlyUmVjb3JkcyYmMD09PXRoaXMuZmlsZXMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgb3IgYnVnOiBleHBlY3RlZCBcIit0aGlzLmNlbnRyYWxEaXJSZWNvcmRzK1wiIHJlY29yZHMgaW4gY2VudHJhbCBkaXIsIGdvdCBcIit0aGlzLmZpbGVzLmxlbmd0aCl9LHJlYWRFbmRPZkNlbnRyYWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJlYWRlci5sYXN0SW5kZXhPZlNpZ25hdHVyZShzLkNFTlRSQUxfRElSRUNUT1JZX0VORCk7aWYoZTwwKXRocm93IXRoaXMuaXNTaWduYXR1cmUoMCxzLkxPQ0FMX0ZJTEVfSEVBREVSKT9uZXcgRXJyb3IoXCJDYW4ndCBmaW5kIGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSA6IGlzIHRoaXMgYSB6aXAgZmlsZSA/IElmIGl0IGlzLCBzZWUgaHR0cHM6Ly9zdHVrLmdpdGh1Yi5pby9qc3ppcC9kb2N1bWVudGF0aW9uL2hvd3RvL3JlYWRfemlwLmh0bWxcIik6bmV3IEVycm9yKFwiQ29ycnVwdGVkIHppcDogY2FuJ3QgZmluZCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnlcIik7dGhpcy5yZWFkZXIuc2V0SW5kZXgoZSk7dmFyIHQ9ZTtpZih0aGlzLmNoZWNrU2lnbmF0dXJlKHMuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKSx0aGlzLnJlYWRCbG9ja0VuZE9mQ2VudHJhbCgpLHRoaXMuZGlza051bWJlcj09PWkuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5kaXNrV2l0aENlbnRyYWxEaXJTdGFydD09PWkuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9PT1pLk1BWF9WQUxVRV8xNkJJVFN8fHRoaXMuY2VudHJhbERpclJlY29yZHM9PT1pLk1BWF9WQUxVRV8xNkJJVFN8fHRoaXMuY2VudHJhbERpclNpemU9PT1pLk1BWF9WQUxVRV8zMkJJVFN8fHRoaXMuY2VudHJhbERpck9mZnNldD09PWkuTUFYX1ZBTFVFXzMyQklUUyl7aWYodGhpcy56aXA2ND0hMCwoZT10aGlzLnJlYWRlci5sYXN0SW5kZXhPZlNpZ25hdHVyZShzLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0xPQ0FUT1IpKTwwKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXA6IGNhbid0IGZpbmQgdGhlIFpJUDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSBsb2NhdG9yXCIpO2lmKHRoaXMucmVhZGVyLnNldEluZGV4KGUpLHRoaXMuY2hlY2tTaWduYXR1cmUocy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9MT0NBVE9SKSx0aGlzLnJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsTG9jYXRvcigpLCF0aGlzLmlzU2lnbmF0dXJlKHRoaXMucmVsYXRpdmVPZmZzZXRFbmRPZlppcDY0Q2VudHJhbERpcixzLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0VORCkmJih0aGlzLnJlbGF0aXZlT2Zmc2V0RW5kT2ZaaXA2NENlbnRyYWxEaXI9dGhpcy5yZWFkZXIubGFzdEluZGV4T2ZTaWduYXR1cmUocy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9FTkQpLHRoaXMucmVsYXRpdmVPZmZzZXRFbmRPZlppcDY0Q2VudHJhbERpcjwwKSl0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwOiBjYW4ndCBmaW5kIHRoZSBaSVA2NCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnlcIik7dGhpcy5yZWFkZXIuc2V0SW5kZXgodGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyKSx0aGlzLmNoZWNrU2lnbmF0dXJlKHMuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKSx0aGlzLnJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsKCl9dmFyIHI9dGhpcy5jZW50cmFsRGlyT2Zmc2V0K3RoaXMuY2VudHJhbERpclNpemU7dGhpcy56aXA2NCYmKHIrPTIwLHIrPTEyK3RoaXMuemlwNjRFbmRPZkNlbnRyYWxTaXplKTt2YXIgbj10LXI7aWYoMDxuKXRoaXMuaXNTaWduYXR1cmUodCxzLkNFTlRSQUxfRklMRV9IRUFERVIpfHwodGhpcy5yZWFkZXIuemVybz1uKTtlbHNlIGlmKG48MCl0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwOiBtaXNzaW5nIFwiK01hdGguYWJzKG4pK1wiIGJ5dGVzLlwiKX0scHJlcGFyZVJlYWRlcjpmdW5jdGlvbihlKXt0aGlzLnJlYWRlcj1uKGUpfSxsb2FkOmZ1bmN0aW9uKGUpe3RoaXMucHJlcGFyZVJlYWRlcihlKSx0aGlzLnJlYWRFbmRPZkNlbnRyYWwoKSx0aGlzLnJlYWRDZW50cmFsRGlyKCksdGhpcy5yZWFkTG9jYWxGaWxlcygpfX0sdC5leHBvcnRzPWh9LHtcIi4vcmVhZGVyL3JlYWRlckZvclwiOjIyLFwiLi9zaWduYXR1cmVcIjoyMyxcIi4vc3VwcG9ydFwiOjMwLFwiLi91dGlsc1wiOjMyLFwiLi96aXBFbnRyeVwiOjM0fV0sMzQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1lKFwiLi9yZWFkZXIvcmVhZGVyRm9yXCIpLHM9ZShcIi4vdXRpbHNcIiksaT1lKFwiLi9jb21wcmVzc2VkT2JqZWN0XCIpLGE9ZShcIi4vY3JjMzJcIiksbz1lKFwiLi91dGY4XCIpLGg9ZShcIi4vY29tcHJlc3Npb25zXCIpLHU9ZShcIi4vc3VwcG9ydFwiKTtmdW5jdGlvbiBsKGUsdCl7dGhpcy5vcHRpb25zPWUsdGhpcy5sb2FkT3B0aW9ucz10fWwucHJvdG90eXBlPXtpc0VuY3J5cHRlZDpmdW5jdGlvbigpe3JldHVybiAxPT0oMSZ0aGlzLmJpdEZsYWcpfSx1c2VVVEY4OmZ1bmN0aW9uKCl7cmV0dXJuIDIwNDg9PSgyMDQ4JnRoaXMuYml0RmxhZyl9LHJlYWRMb2NhbFBhcnQ6ZnVuY3Rpb24oZSl7dmFyIHQscjtpZihlLnNraXAoMjIpLHRoaXMuZmlsZU5hbWVMZW5ndGg9ZS5yZWFkSW50KDIpLHI9ZS5yZWFkSW50KDIpLHRoaXMuZmlsZU5hbWU9ZS5yZWFkRGF0YSh0aGlzLmZpbGVOYW1lTGVuZ3RoKSxlLnNraXAociksLTE9PT10aGlzLmNvbXByZXNzZWRTaXplfHwtMT09PXRoaXMudW5jb21wcmVzc2VkU2l6ZSl0aHJvdyBuZXcgRXJyb3IoXCJCdWcgb3IgY29ycnVwdGVkIHppcCA6IGRpZG4ndCBnZXQgZW5vdWdoIGluZm9ybWF0aW9uIGZyb20gdGhlIGNlbnRyYWwgZGlyZWN0b3J5IChjb21wcmVzc2VkU2l6ZSA9PT0gLTEgfHwgdW5jb21wcmVzc2VkU2l6ZSA9PT0gLTEpXCIpO2lmKG51bGw9PT0odD1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gaClpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaCx0KSYmaFt0XS5tYWdpYz09PWUpcmV0dXJuIGhbdF07cmV0dXJuIG51bGx9KHRoaXMuY29tcHJlc3Npb25NZXRob2QpKSl0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIDogY29tcHJlc3Npb24gXCIrcy5wcmV0dHkodGhpcy5jb21wcmVzc2lvbk1ldGhvZCkrXCIgdW5rbm93biAoaW5uZXIgZmlsZSA6IFwiK3MudHJhbnNmb3JtVG8oXCJzdHJpbmdcIix0aGlzLmZpbGVOYW1lKStcIilcIik7dGhpcy5kZWNvbXByZXNzZWQ9bmV3IGkodGhpcy5jb21wcmVzc2VkU2l6ZSx0aGlzLnVuY29tcHJlc3NlZFNpemUsdGhpcy5jcmMzMix0LGUucmVhZERhdGEodGhpcy5jb21wcmVzc2VkU2l6ZSkpfSxyZWFkQ2VudHJhbFBhcnQ6ZnVuY3Rpb24oZSl7dGhpcy52ZXJzaW9uTWFkZUJ5PWUucmVhZEludCgyKSxlLnNraXAoMiksdGhpcy5iaXRGbGFnPWUucmVhZEludCgyKSx0aGlzLmNvbXByZXNzaW9uTWV0aG9kPWUucmVhZFN0cmluZygyKSx0aGlzLmRhdGU9ZS5yZWFkRGF0ZSgpLHRoaXMuY3JjMzI9ZS5yZWFkSW50KDQpLHRoaXMuY29tcHJlc3NlZFNpemU9ZS5yZWFkSW50KDQpLHRoaXMudW5jb21wcmVzc2VkU2l6ZT1lLnJlYWRJbnQoNCk7dmFyIHQ9ZS5yZWFkSW50KDIpO2lmKHRoaXMuZXh0cmFGaWVsZHNMZW5ndGg9ZS5yZWFkSW50KDIpLHRoaXMuZmlsZUNvbW1lbnRMZW5ndGg9ZS5yZWFkSW50KDIpLHRoaXMuZGlza051bWJlclN0YXJ0PWUucmVhZEludCgyKSx0aGlzLmludGVybmFsRmlsZUF0dHJpYnV0ZXM9ZS5yZWFkSW50KDIpLHRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcz1lLnJlYWRJbnQoNCksdGhpcy5sb2NhbEhlYWRlck9mZnNldD1lLnJlYWRJbnQoNCksdGhpcy5pc0VuY3J5cHRlZCgpKXRocm93IG5ldyBFcnJvcihcIkVuY3J5cHRlZCB6aXAgYXJlIG5vdCBzdXBwb3J0ZWRcIik7ZS5za2lwKHQpLHRoaXMucmVhZEV4dHJhRmllbGRzKGUpLHRoaXMucGFyc2VaSVA2NEV4dHJhRmllbGQoZSksdGhpcy5maWxlQ29tbWVudD1lLnJlYWREYXRhKHRoaXMuZmlsZUNvbW1lbnRMZW5ndGgpfSxwcm9jZXNzQXR0cmlidXRlczpmdW5jdGlvbigpe3RoaXMudW5peFBlcm1pc3Npb25zPW51bGwsdGhpcy5kb3NQZXJtaXNzaW9ucz1udWxsO3ZhciBlPXRoaXMudmVyc2lvbk1hZGVCeT4+ODt0aGlzLmRpcj0hISgxNiZ0aGlzLmV4dGVybmFsRmlsZUF0dHJpYnV0ZXMpLDA9PWUmJih0aGlzLmRvc1Blcm1pc3Npb25zPTYzJnRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcyksMz09ZSYmKHRoaXMudW5peFBlcm1pc3Npb25zPXRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcz4+MTYmNjU1MzUpLHRoaXMuZGlyfHxcIi9cIiE9PXRoaXMuZmlsZU5hbWVTdHIuc2xpY2UoLTEpfHwodGhpcy5kaXI9ITApfSxwYXJzZVpJUDY0RXh0cmFGaWVsZDpmdW5jdGlvbigpe2lmKHRoaXMuZXh0cmFGaWVsZHNbMV0pe3ZhciBlPW4odGhpcy5leHRyYUZpZWxkc1sxXS52YWx1ZSk7dGhpcy51bmNvbXByZXNzZWRTaXplPT09cy5NQVhfVkFMVUVfMzJCSVRTJiYodGhpcy51bmNvbXByZXNzZWRTaXplPWUucmVhZEludCg4KSksdGhpcy5jb21wcmVzc2VkU2l6ZT09PXMuTUFYX1ZBTFVFXzMyQklUUyYmKHRoaXMuY29tcHJlc3NlZFNpemU9ZS5yZWFkSW50KDgpKSx0aGlzLmxvY2FsSGVhZGVyT2Zmc2V0PT09cy5NQVhfVkFMVUVfMzJCSVRTJiYodGhpcy5sb2NhbEhlYWRlck9mZnNldD1lLnJlYWRJbnQoOCkpLHRoaXMuZGlza051bWJlclN0YXJ0PT09cy5NQVhfVkFMVUVfMzJCSVRTJiYodGhpcy5kaXNrTnVtYmVyU3RhcnQ9ZS5yZWFkSW50KDQpKX19LHJlYWRFeHRyYUZpZWxkczpmdW5jdGlvbihlKXt2YXIgdCxyLG4saT1lLmluZGV4K3RoaXMuZXh0cmFGaWVsZHNMZW5ndGg7Zm9yKHRoaXMuZXh0cmFGaWVsZHN8fCh0aGlzLmV4dHJhRmllbGRzPXt9KTtlLmluZGV4KzQ8aTspdD1lLnJlYWRJbnQoMikscj1lLnJlYWRJbnQoMiksbj1lLnJlYWREYXRhKHIpLHRoaXMuZXh0cmFGaWVsZHNbdF09e2lkOnQsbGVuZ3RoOnIsdmFsdWU6bn07ZS5zZXRJbmRleChpKX0saGFuZGxlVVRGODpmdW5jdGlvbigpe3ZhciBlPXUudWludDhhcnJheT9cInVpbnQ4YXJyYXlcIjpcImFycmF5XCI7aWYodGhpcy51c2VVVEY4KCkpdGhpcy5maWxlTmFtZVN0cj1vLnV0ZjhkZWNvZGUodGhpcy5maWxlTmFtZSksdGhpcy5maWxlQ29tbWVudFN0cj1vLnV0ZjhkZWNvZGUodGhpcy5maWxlQ29tbWVudCk7ZWxzZXt2YXIgdD10aGlzLmZpbmRFeHRyYUZpZWxkVW5pY29kZVBhdGgoKTtpZihudWxsIT09dCl0aGlzLmZpbGVOYW1lU3RyPXQ7ZWxzZXt2YXIgcj1zLnRyYW5zZm9ybVRvKGUsdGhpcy5maWxlTmFtZSk7dGhpcy5maWxlTmFtZVN0cj10aGlzLmxvYWRPcHRpb25zLmRlY29kZUZpbGVOYW1lKHIpfXZhciBuPXRoaXMuZmluZEV4dHJhRmllbGRVbmljb2RlQ29tbWVudCgpO2lmKG51bGwhPT1uKXRoaXMuZmlsZUNvbW1lbnRTdHI9bjtlbHNle3ZhciBpPXMudHJhbnNmb3JtVG8oZSx0aGlzLmZpbGVDb21tZW50KTt0aGlzLmZpbGVDb21tZW50U3RyPXRoaXMubG9hZE9wdGlvbnMuZGVjb2RlRmlsZU5hbWUoaSl9fX0sZmluZEV4dHJhRmllbGRVbmljb2RlUGF0aDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZXh0cmFGaWVsZHNbMjg3ODldO2lmKGUpe3ZhciB0PW4oZS52YWx1ZSk7cmV0dXJuIDEhPT10LnJlYWRJbnQoMSk/bnVsbDphKHRoaXMuZmlsZU5hbWUpIT09dC5yZWFkSW50KDQpP251bGw6by51dGY4ZGVjb2RlKHQucmVhZERhdGEoZS5sZW5ndGgtNSkpfXJldHVybiBudWxsfSxmaW5kRXh0cmFGaWVsZFVuaWNvZGVDb21tZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5leHRyYUZpZWxkc1syNTQ2MV07aWYoZSl7dmFyIHQ9bihlLnZhbHVlKTtyZXR1cm4gMSE9PXQucmVhZEludCgxKT9udWxsOmEodGhpcy5maWxlQ29tbWVudCkhPT10LnJlYWRJbnQoNCk/bnVsbDpvLnV0ZjhkZWNvZGUodC5yZWFkRGF0YShlLmxlbmd0aC01KSl9cmV0dXJuIG51bGx9fSx0LmV4cG9ydHM9bH0se1wiLi9jb21wcmVzc2VkT2JqZWN0XCI6MixcIi4vY29tcHJlc3Npb25zXCI6MyxcIi4vY3JjMzJcIjo0LFwiLi9yZWFkZXIvcmVhZGVyRm9yXCI6MjIsXCIuL3N1cHBvcnRcIjozMCxcIi4vdXRmOFwiOjMxLFwiLi91dGlsc1wiOjMyfV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUsdCxyKXt0aGlzLm5hbWU9ZSx0aGlzLmRpcj1yLmRpcix0aGlzLmRhdGU9ci5kYXRlLHRoaXMuY29tbWVudD1yLmNvbW1lbnQsdGhpcy51bml4UGVybWlzc2lvbnM9ci51bml4UGVybWlzc2lvbnMsdGhpcy5kb3NQZXJtaXNzaW9ucz1yLmRvc1Blcm1pc3Npb25zLHRoaXMuX2RhdGE9dCx0aGlzLl9kYXRhQmluYXJ5PXIuYmluYXJ5LHRoaXMub3B0aW9ucz17Y29tcHJlc3Npb246ci5jb21wcmVzc2lvbixjb21wcmVzc2lvbk9wdGlvbnM6ci5jb21wcmVzc2lvbk9wdGlvbnN9fXZhciBzPWUoXCIuL3N0cmVhbS9TdHJlYW1IZWxwZXJcIiksaT1lKFwiLi9zdHJlYW0vRGF0YVdvcmtlclwiKSxhPWUoXCIuL3V0ZjhcIiksbz1lKFwiLi9jb21wcmVzc2VkT2JqZWN0XCIpLGg9ZShcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIik7bi5wcm90b3R5cGU9e2ludGVybmFsU3RyZWFtOmZ1bmN0aW9uKGUpe3ZhciB0PW51bGwscj1cInN0cmluZ1wiO3RyeXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJObyBvdXRwdXQgdHlwZSBzcGVjaWZpZWQuXCIpO3ZhciBuPVwic3RyaW5nXCI9PT0ocj1lLnRvTG93ZXJDYXNlKCkpfHxcInRleHRcIj09PXI7XCJiaW5hcnlzdHJpbmdcIiE9PXImJlwidGV4dFwiIT09cnx8KHI9XCJzdHJpbmdcIiksdD10aGlzLl9kZWNvbXByZXNzV29ya2VyKCk7dmFyIGk9IXRoaXMuX2RhdGFCaW5hcnk7aSYmIW4mJih0PXQucGlwZShuZXcgYS5VdGY4RW5jb2RlV29ya2VyKSksIWkmJm4mJih0PXQucGlwZShuZXcgYS5VdGY4RGVjb2RlV29ya2VyKSl9Y2F0Y2goZSl7KHQ9bmV3IGgoXCJlcnJvclwiKSkuZXJyb3IoZSl9cmV0dXJuIG5ldyBzKHQscixcIlwiKX0sYXN5bmM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5pbnRlcm5hbFN0cmVhbShlKS5hY2N1bXVsYXRlKHQpfSxub2RlU3RyZWFtOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuaW50ZXJuYWxTdHJlYW0oZXx8XCJub2RlYnVmZmVyXCIpLnRvTm9kZWpzU3RyZWFtKHQpfSxfY29tcHJlc3NXb3JrZXI6ZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9kYXRhIGluc3RhbmNlb2YgbyYmdGhpcy5fZGF0YS5jb21wcmVzc2lvbi5tYWdpYz09PWUubWFnaWMpcmV0dXJuIHRoaXMuX2RhdGEuZ2V0Q29tcHJlc3NlZFdvcmtlcigpO3ZhciByPXRoaXMuX2RlY29tcHJlc3NXb3JrZXIoKTtyZXR1cm4gdGhpcy5fZGF0YUJpbmFyeXx8KHI9ci5waXBlKG5ldyBhLlV0ZjhFbmNvZGVXb3JrZXIpKSxvLmNyZWF0ZVdvcmtlckZyb20ocixlLHQpfSxfZGVjb21wcmVzc1dvcmtlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhIGluc3RhbmNlb2Ygbz90aGlzLl9kYXRhLmdldENvbnRlbnRXb3JrZXIoKTp0aGlzLl9kYXRhIGluc3RhbmNlb2YgaD90aGlzLl9kYXRhOm5ldyBpKHRoaXMuX2RhdGEpfX07Zm9yKHZhciB1PVtcImFzVGV4dFwiLFwiYXNCaW5hcnlcIixcImFzTm9kZUJ1ZmZlclwiLFwiYXNVaW50OEFycmF5XCIsXCJhc0FycmF5QnVmZmVyXCJdLGw9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1ldGhvZCBoYXMgYmVlbiByZW1vdmVkIGluIEpTWmlwIDMuMCwgcGxlYXNlIGNoZWNrIHRoZSB1cGdyYWRlIGd1aWRlLlwiKX0sZj0wO2Y8dS5sZW5ndGg7ZisrKW4ucHJvdG90eXBlW3VbZl1dPWw7dC5leHBvcnRzPW59LHtcIi4vY29tcHJlc3NlZE9iamVjdFwiOjIsXCIuL3N0cmVhbS9EYXRhV29ya2VyXCI6MjcsXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCI6MjgsXCIuL3N0cmVhbS9TdHJlYW1IZWxwZXJcIjoyOSxcIi4vdXRmOFwiOjMxfV0sMzY6W2Z1bmN0aW9uKGUsbCx0KXsoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsbixlPXQuTXV0YXRpb25PYnNlcnZlcnx8dC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO2lmKGUpe3ZhciBpPTAscz1uZXcgZSh1KSxhPXQuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7cy5vYnNlcnZlKGEse2NoYXJhY3RlckRhdGE6ITB9KSxyPWZ1bmN0aW9uKCl7YS5kYXRhPWk9KytpJTJ9fWVsc2UgaWYodC5zZXRJbW1lZGlhdGV8fHZvaWQgMD09PXQuTWVzc2FnZUNoYW5uZWwpcj1cImRvY3VtZW50XCJpbiB0JiZcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiaW4gdC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpP2Z1bmN0aW9uKCl7dmFyIGU9dC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO2Uub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dSgpLGUub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpLGU9bnVsbH0sdC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoZSl9OmZ1bmN0aW9uKCl7c2V0VGltZW91dCh1LDApfTtlbHNle3ZhciBvPW5ldyB0Lk1lc3NhZ2VDaGFubmVsO28ucG9ydDEub25tZXNzYWdlPXUscj1mdW5jdGlvbigpe28ucG9ydDIucG9zdE1lc3NhZ2UoMCl9fXZhciBoPVtdO2Z1bmN0aW9uIHUoKXt2YXIgZSx0O249ITA7Zm9yKHZhciByPWgubGVuZ3RoO3I7KXtmb3IodD1oLGg9W10sZT0tMTsrK2U8cjspdFtlXSgpO3I9aC5sZW5ndGh9bj0hMX1sLmV4cG9ydHM9ZnVuY3Rpb24oZSl7MSE9PWgucHVzaChlKXx8bnx8cigpfX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dLDM3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZShcImltbWVkaWF0ZVwiKTtmdW5jdGlvbiB1KCl7fXZhciBsPXt9LHM9W1wiUkVKRUNURURcIl0sYT1bXCJGVUxGSUxMRURcIl0sbj1bXCJQRU5ESU5HXCJdO2Z1bmN0aW9uIG8oZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVzb2x2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3RoaXMuc3RhdGU9bix0aGlzLnF1ZXVlPVtdLHRoaXMub3V0Y29tZT12b2lkIDAsZSE9PXUmJmQodGhpcyxlKX1mdW5jdGlvbiBoKGUsdCxyKXt0aGlzLnByb21pc2U9ZSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiYodGhpcy5vbkZ1bGZpbGxlZD10LHRoaXMuY2FsbEZ1bGZpbGxlZD10aGlzLm90aGVyQ2FsbEZ1bGZpbGxlZCksXCJmdW5jdGlvblwiPT10eXBlb2YgciYmKHRoaXMub25SZWplY3RlZD1yLHRoaXMuY2FsbFJlamVjdGVkPXRoaXMub3RoZXJDYWxsUmVqZWN0ZWQpfWZ1bmN0aW9uIGYodCxyLG4pe2koZnVuY3Rpb24oKXt2YXIgZTt0cnl7ZT1yKG4pfWNhdGNoKGUpe3JldHVybiBsLnJlamVjdCh0LGUpfWU9PT10P2wucmVqZWN0KHQsbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZXNvbHZlIHByb21pc2Ugd2l0aCBpdHNlbGZcIikpOmwucmVzb2x2ZSh0LGUpfSl9ZnVuY3Rpb24gYyhlKXt2YXIgdD1lJiZlLnRoZW47aWYoZSYmKFwib2JqZWN0XCI9PXR5cGVvZiBlfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdClyZXR1cm4gZnVuY3Rpb24oKXt0LmFwcGx5KGUsYXJndW1lbnRzKX19ZnVuY3Rpb24gZCh0LGUpe3ZhciByPSExO2Z1bmN0aW9uIG4oZSl7cnx8KHI9ITAsbC5yZWplY3QodCxlKSl9ZnVuY3Rpb24gaShlKXtyfHwocj0hMCxsLnJlc29sdmUodCxlKSl9dmFyIHM9cChmdW5jdGlvbigpe2UoaSxuKX0pO1wiZXJyb3JcIj09PXMuc3RhdHVzJiZuKHMudmFsdWUpfWZ1bmN0aW9uIHAoZSx0KXt2YXIgcj17fTt0cnl7ci52YWx1ZT1lKHQpLHIuc3RhdHVzPVwic3VjY2Vzc1wifWNhdGNoKGUpe3Iuc3RhdHVzPVwiZXJyb3JcIixyLnZhbHVlPWV9cmV0dXJuIHJ9KHQuZXhwb3J0cz1vKS5wcm90b3R5cGUuZmluYWxseT1mdW5jdGlvbih0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXJldHVybiB0aGlzO3ZhciByPXRoaXMuY29uc3RydWN0b3I7cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gci5yZXNvbHZlKHQoKSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlfSl9LGZ1bmN0aW9uKGUpe3JldHVybiByLnJlc29sdmUodCgpKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgZX0pfSl9LG8ucHJvdG90eXBlLmNhdGNoPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4obnVsbCxlKX0sby5wcm90b3R5cGUudGhlbj1mdW5jdGlvbihlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJnRoaXMuc3RhdGU9PT1hfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZ0aGlzLnN0YXRlPT09cylyZXR1cm4gdGhpczt2YXIgcj1uZXcgdGhpcy5jb25zdHJ1Y3Rvcih1KTt0aGlzLnN0YXRlIT09bj9mKHIsdGhpcy5zdGF0ZT09PWE/ZTp0LHRoaXMub3V0Y29tZSk6dGhpcy5xdWV1ZS5wdXNoKG5ldyBoKHIsZSx0KSk7cmV0dXJuIHJ9LGgucHJvdG90eXBlLmNhbGxGdWxmaWxsZWQ9ZnVuY3Rpb24oZSl7bC5yZXNvbHZlKHRoaXMucHJvbWlzZSxlKX0saC5wcm90b3R5cGUub3RoZXJDYWxsRnVsZmlsbGVkPWZ1bmN0aW9uKGUpe2YodGhpcy5wcm9taXNlLHRoaXMub25GdWxmaWxsZWQsZSl9LGgucHJvdG90eXBlLmNhbGxSZWplY3RlZD1mdW5jdGlvbihlKXtsLnJlamVjdCh0aGlzLnByb21pc2UsZSl9LGgucHJvdG90eXBlLm90aGVyQ2FsbFJlamVjdGVkPWZ1bmN0aW9uKGUpe2YodGhpcy5wcm9taXNlLHRoaXMub25SZWplY3RlZCxlKX0sbC5yZXNvbHZlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9cChjLHQpO2lmKFwiZXJyb3JcIj09PXIuc3RhdHVzKXJldHVybiBsLnJlamVjdChlLHIudmFsdWUpO3ZhciBuPXIudmFsdWU7aWYobilkKGUsbik7ZWxzZXtlLnN0YXRlPWEsZS5vdXRjb21lPXQ7Zm9yKHZhciBpPS0xLHM9ZS5xdWV1ZS5sZW5ndGg7KytpPHM7KWUucXVldWVbaV0uY2FsbEZ1bGZpbGxlZCh0KX1yZXR1cm4gZX0sbC5yZWplY3Q9ZnVuY3Rpb24oZSx0KXtlLnN0YXRlPXMsZS5vdXRjb21lPXQ7Zm9yKHZhciByPS0xLG49ZS5xdWV1ZS5sZW5ndGg7KytyPG47KWUucXVldWVbcl0uY2FsbFJlamVjdGVkKHQpO3JldHVybiBlfSxvLnJlc29sdmU9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHRoaXMpcmV0dXJuIGU7cmV0dXJuIGwucmVzb2x2ZShuZXcgdGhpcyh1KSxlKX0sby5yZWplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHRoaXModSk7cmV0dXJuIGwucmVqZWN0KHQsZSl9LG8uYWxsPWZ1bmN0aW9uKGUpe3ZhciByPXRoaXM7aWYoXCJbb2JqZWN0IEFycmF5XVwiIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKXJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwibXVzdCBiZSBhbiBhcnJheVwiKSk7dmFyIG49ZS5sZW5ndGgsaT0hMTtpZighbilyZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTt2YXIgcz1uZXcgQXJyYXkobiksYT0wLHQ9LTEsbz1uZXcgdGhpcyh1KTtmb3IoOysrdDxuOyloKGVbdF0sdCk7cmV0dXJuIG87ZnVuY3Rpb24gaChlLHQpe3IucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe3NbdF09ZSwrK2EhPT1ufHxpfHwoaT0hMCxsLnJlc29sdmUobyxzKSl9LGZ1bmN0aW9uKGUpe2l8fChpPSEwLGwucmVqZWN0KG8sZSkpfSl9fSxvLnJhY2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihcIltvYmplY3QgQXJyYXldXCIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJtdXN0IGJlIGFuIGFycmF5XCIpKTt2YXIgcj1lLmxlbmd0aCxuPSExO2lmKCFyKXJldHVybiB0aGlzLnJlc29sdmUoW10pO3ZhciBpPS0xLHM9bmV3IHRoaXModSk7Zm9yKDsrK2k8cjspYT1lW2ldLHQucmVzb2x2ZShhKS50aGVuKGZ1bmN0aW9uKGUpe258fChuPSEwLGwucmVzb2x2ZShzLGUpKX0sZnVuY3Rpb24oZSl7bnx8KG49ITAsbC5yZWplY3QocyxlKSl9KTt2YXIgYTtyZXR1cm4gc319LHtpbW1lZGlhdGU6MzZ9XSwzODpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXt9OygwLGUoXCIuL2xpYi91dGlscy9jb21tb25cIikuYXNzaWduKShuLGUoXCIuL2xpYi9kZWZsYXRlXCIpLGUoXCIuL2xpYi9pbmZsYXRlXCIpLGUoXCIuL2xpYi96bGliL2NvbnN0YW50c1wiKSksdC5leHBvcnRzPW59LHtcIi4vbGliL2RlZmxhdGVcIjozOSxcIi4vbGliL2luZmxhdGVcIjo0MCxcIi4vbGliL3V0aWxzL2NvbW1vblwiOjQxLFwiLi9saWIvemxpYi9jb25zdGFudHNcIjo0NH1dLDM5OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGE9ZShcIi4vemxpYi9kZWZsYXRlXCIpLG89ZShcIi4vdXRpbHMvY29tbW9uXCIpLGg9ZShcIi4vdXRpbHMvc3RyaW5nc1wiKSxpPWUoXCIuL3psaWIvbWVzc2FnZXNcIikscz1lKFwiLi96bGliL3pzdHJlYW1cIiksdT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGw9MCxmPS0xLGM9MCxkPTg7ZnVuY3Rpb24gcChlKXtpZighKHRoaXMgaW5zdGFuY2VvZiBwKSlyZXR1cm4gbmV3IHAoZSk7dGhpcy5vcHRpb25zPW8uYXNzaWduKHtsZXZlbDpmLG1ldGhvZDpkLGNodW5rU2l6ZToxNjM4NCx3aW5kb3dCaXRzOjE1LG1lbUxldmVsOjgsc3RyYXRlZ3k6Yyx0bzpcIlwifSxlfHx7fSk7dmFyIHQ9dGhpcy5vcHRpb25zO3QucmF3JiYwPHQud2luZG93Qml0cz90LndpbmRvd0JpdHM9LXQud2luZG93Qml0czp0Lmd6aXAmJjA8dC53aW5kb3dCaXRzJiZ0LndpbmRvd0JpdHM8MTYmJih0LndpbmRvd0JpdHMrPTE2KSx0aGlzLmVycj0wLHRoaXMubXNnPVwiXCIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IHMsdGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciByPWEuZGVmbGF0ZUluaXQyKHRoaXMuc3RybSx0LmxldmVsLHQubWV0aG9kLHQud2luZG93Qml0cyx0Lm1lbUxldmVsLHQuc3RyYXRlZ3kpO2lmKHIhPT1sKXRocm93IG5ldyBFcnJvcihpW3JdKTtpZih0LmhlYWRlciYmYS5kZWZsYXRlU2V0SGVhZGVyKHRoaXMuc3RybSx0LmhlYWRlciksdC5kaWN0aW9uYXJ5KXt2YXIgbjtpZihuPVwic3RyaW5nXCI9PXR5cGVvZiB0LmRpY3Rpb25hcnk/aC5zdHJpbmcyYnVmKHQuZGljdGlvbmFyeSk6XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09dS5jYWxsKHQuZGljdGlvbmFyeSk/bmV3IFVpbnQ4QXJyYXkodC5kaWN0aW9uYXJ5KTp0LmRpY3Rpb25hcnksKHI9YS5kZWZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLnN0cm0sbikpIT09bCl0aHJvdyBuZXcgRXJyb3IoaVtyXSk7dGhpcy5fZGljdF9zZXQ9ITB9fWZ1bmN0aW9uIG4oZSx0KXt2YXIgcj1uZXcgcCh0KTtpZihyLnB1c2goZSwhMCksci5lcnIpdGhyb3cgci5tc2d8fGlbci5lcnJdO3JldHVybiByLnJlc3VsdH1wLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpPXRoaXMuc3RybSxzPXRoaXMub3B0aW9ucy5jaHVua1NpemU7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtuPXQ9PT1+fnQ/dDohMD09PXQ/NDowLFwic3RyaW5nXCI9PXR5cGVvZiBlP2kuaW5wdXQ9aC5zdHJpbmcyYnVmKGUpOlwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIj09PXUuY2FsbChlKT9pLmlucHV0PW5ldyBVaW50OEFycmF5KGUpOmkuaW5wdXQ9ZSxpLm5leHRfaW49MCxpLmF2YWlsX2luPWkuaW5wdXQubGVuZ3RoO2Rve2lmKDA9PT1pLmF2YWlsX291dCYmKGkub3V0cHV0PW5ldyBvLkJ1ZjgocyksaS5uZXh0X291dD0wLGkuYXZhaWxfb3V0PXMpLDEhPT0ocj1hLmRlZmxhdGUoaSxuKSkmJnIhPT1sKXJldHVybiB0aGlzLm9uRW5kKHIpLCEodGhpcy5lbmRlZD0hMCk7MCE9PWkuYXZhaWxfb3V0JiYoMCE9PWkuYXZhaWxfaW58fDQhPT1uJiYyIT09bil8fChcInN0cmluZ1wiPT09dGhpcy5vcHRpb25zLnRvP3RoaXMub25EYXRhKGguYnVmMmJpbnN0cmluZyhvLnNocmlua0J1ZihpLm91dHB1dCxpLm5leHRfb3V0KSkpOnRoaXMub25EYXRhKG8uc2hyaW5rQnVmKGkub3V0cHV0LGkubmV4dF9vdXQpKSl9d2hpbGUoKDA8aS5hdmFpbF9pbnx8MD09PWkuYXZhaWxfb3V0KSYmMSE9PXIpO3JldHVybiA0PT09bj8ocj1hLmRlZmxhdGVFbmQodGhpcy5zdHJtKSx0aGlzLm9uRW5kKHIpLHRoaXMuZW5kZWQ9ITAscj09PWwpOjIhPT1ufHwodGhpcy5vbkVuZChsKSwhKGkuYXZhaWxfb3V0PTApKX0scC5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKGUpe3RoaXMuY2h1bmtzLnB1c2goZSl9LHAucHJvdG90eXBlLm9uRW5kPWZ1bmN0aW9uKGUpe2U9PT1sJiYoXCJzdHJpbmdcIj09PXRoaXMub3B0aW9ucy50bz90aGlzLnJlc3VsdD10aGlzLmNodW5rcy5qb2luKFwiXCIpOnRoaXMucmVzdWx0PW8uZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcykpLHRoaXMuY2h1bmtzPVtdLHRoaXMuZXJyPWUsdGhpcy5tc2c9dGhpcy5zdHJtLm1zZ30sci5EZWZsYXRlPXAsci5kZWZsYXRlPW4sci5kZWZsYXRlUmF3PWZ1bmN0aW9uKGUsdCl7cmV0dXJuKHQ9dHx8e30pLnJhdz0hMCxuKGUsdCl9LHIuZ3ppcD1mdW5jdGlvbihlLHQpe3JldHVybih0PXR8fHt9KS5nemlwPSEwLG4oZSx0KX19LHtcIi4vdXRpbHMvY29tbW9uXCI6NDEsXCIuL3V0aWxzL3N0cmluZ3NcIjo0MixcIi4vemxpYi9kZWZsYXRlXCI6NDYsXCIuL3psaWIvbWVzc2FnZXNcIjo1MSxcIi4vemxpYi96c3RyZWFtXCI6NTN9XSw0MDpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBjPWUoXCIuL3psaWIvaW5mbGF0ZVwiKSxkPWUoXCIuL3V0aWxzL2NvbW1vblwiKSxwPWUoXCIuL3V0aWxzL3N0cmluZ3NcIiksbT1lKFwiLi96bGliL2NvbnN0YW50c1wiKSxuPWUoXCIuL3psaWIvbWVzc2FnZXNcIiksaT1lKFwiLi96bGliL3pzdHJlYW1cIikscz1lKFwiLi96bGliL2d6aGVhZGVyXCIpLF89T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBhKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGEpKXJldHVybiBuZXcgYShlKTt0aGlzLm9wdGlvbnM9ZC5hc3NpZ24oe2NodW5rU2l6ZToxNjM4NCx3aW5kb3dCaXRzOjAsdG86XCJcIn0sZXx8e30pO3ZhciB0PXRoaXMub3B0aW9uczt0LnJhdyYmMDw9dC53aW5kb3dCaXRzJiZ0LndpbmRvd0JpdHM8MTYmJih0LndpbmRvd0JpdHM9LXQud2luZG93Qml0cywwPT09dC53aW5kb3dCaXRzJiYodC53aW5kb3dCaXRzPS0xNSkpLCEoMDw9dC53aW5kb3dCaXRzJiZ0LndpbmRvd0JpdHM8MTYpfHxlJiZlLndpbmRvd0JpdHN8fCh0LndpbmRvd0JpdHMrPTMyKSwxNTx0LndpbmRvd0JpdHMmJnQud2luZG93Qml0czw0OCYmMD09KDE1JnQud2luZG93Qml0cykmJih0LndpbmRvd0JpdHN8PTE1KSx0aGlzLmVycj0wLHRoaXMubXNnPVwiXCIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IGksdGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciByPWMuaW5mbGF0ZUluaXQyKHRoaXMuc3RybSx0LndpbmRvd0JpdHMpO2lmKHIhPT1tLlpfT0spdGhyb3cgbmV3IEVycm9yKG5bcl0pO3RoaXMuaGVhZGVyPW5ldyBzLGMuaW5mbGF0ZUdldEhlYWRlcih0aGlzLnN0cm0sdGhpcy5oZWFkZXIpfWZ1bmN0aW9uIG8oZSx0KXt2YXIgcj1uZXcgYSh0KTtpZihyLnB1c2goZSwhMCksci5lcnIpdGhyb3cgci5tc2d8fG5bci5lcnJdO3JldHVybiByLnJlc3VsdH1hLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpLHMsYSxvLGg9dGhpcy5zdHJtLHU9dGhpcy5vcHRpb25zLmNodW5rU2l6ZSxsPXRoaXMub3B0aW9ucy5kaWN0aW9uYXJ5LGY9ITE7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtuPXQ9PT1+fnQ/dDohMD09PXQ/bS5aX0ZJTklTSDptLlpfTk9fRkxVU0gsXCJzdHJpbmdcIj09dHlwZW9mIGU/aC5pbnB1dD1wLmJpbnN0cmluZzJidWYoZSk6XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09Xy5jYWxsKGUpP2guaW5wdXQ9bmV3IFVpbnQ4QXJyYXkoZSk6aC5pbnB1dD1lLGgubmV4dF9pbj0wLGguYXZhaWxfaW49aC5pbnB1dC5sZW5ndGg7ZG97aWYoMD09PWguYXZhaWxfb3V0JiYoaC5vdXRwdXQ9bmV3IGQuQnVmOCh1KSxoLm5leHRfb3V0PTAsaC5hdmFpbF9vdXQ9dSksKHI9Yy5pbmZsYXRlKGgsbS5aX05PX0ZMVVNIKSk9PT1tLlpfTkVFRF9ESUNUJiZsJiYobz1cInN0cmluZ1wiPT10eXBlb2YgbD9wLnN0cmluZzJidWYobCk6XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09Xy5jYWxsKGwpP25ldyBVaW50OEFycmF5KGwpOmwscj1jLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSxvKSkscj09PW0uWl9CVUZfRVJST1ImJiEwPT09ZiYmKHI9bS5aX09LLGY9ITEpLHIhPT1tLlpfU1RSRUFNX0VORCYmciE9PW0uWl9PSylyZXR1cm4gdGhpcy5vbkVuZChyKSwhKHRoaXMuZW5kZWQ9ITApO2gubmV4dF9vdXQmJigwIT09aC5hdmFpbF9vdXQmJnIhPT1tLlpfU1RSRUFNX0VORCYmKDAhPT1oLmF2YWlsX2lufHxuIT09bS5aX0ZJTklTSCYmbiE9PW0uWl9TWU5DX0ZMVVNIKXx8KFwic3RyaW5nXCI9PT10aGlzLm9wdGlvbnMudG8/KGk9cC51dGY4Ym9yZGVyKGgub3V0cHV0LGgubmV4dF9vdXQpLHM9aC5uZXh0X291dC1pLGE9cC5idWYyc3RyaW5nKGgub3V0cHV0LGkpLGgubmV4dF9vdXQ9cyxoLmF2YWlsX291dD11LXMscyYmZC5hcnJheVNldChoLm91dHB1dCxoLm91dHB1dCxpLHMsMCksdGhpcy5vbkRhdGEoYSkpOnRoaXMub25EYXRhKGQuc2hyaW5rQnVmKGgub3V0cHV0LGgubmV4dF9vdXQpKSkpLDA9PT1oLmF2YWlsX2luJiYwPT09aC5hdmFpbF9vdXQmJihmPSEwKX13aGlsZSgoMDxoLmF2YWlsX2lufHwwPT09aC5hdmFpbF9vdXQpJiZyIT09bS5aX1NUUkVBTV9FTkQpO3JldHVybiByPT09bS5aX1NUUkVBTV9FTkQmJihuPW0uWl9GSU5JU0gpLG49PT1tLlpfRklOSVNIPyhyPWMuaW5mbGF0ZUVuZCh0aGlzLnN0cm0pLHRoaXMub25FbmQociksdGhpcy5lbmRlZD0hMCxyPT09bS5aX09LKTpuIT09bS5aX1NZTkNfRkxVU0h8fCh0aGlzLm9uRW5kKG0uWl9PSyksIShoLmF2YWlsX291dD0wKSl9LGEucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbihlKXt0aGlzLmNodW5rcy5wdXNoKGUpfSxhLnByb3RvdHlwZS5vbkVuZD1mdW5jdGlvbihlKXtlPT09bS5aX09LJiYoXCJzdHJpbmdcIj09PXRoaXMub3B0aW9ucy50bz90aGlzLnJlc3VsdD10aGlzLmNodW5rcy5qb2luKFwiXCIpOnRoaXMucmVzdWx0PWQuZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcykpLHRoaXMuY2h1bmtzPVtdLHRoaXMuZXJyPWUsdGhpcy5tc2c9dGhpcy5zdHJtLm1zZ30sci5JbmZsYXRlPWEsci5pbmZsYXRlPW8sci5pbmZsYXRlUmF3PWZ1bmN0aW9uKGUsdCl7cmV0dXJuKHQ9dHx8e30pLnJhdz0hMCxvKGUsdCl9LHIudW5nemlwPW99LHtcIi4vdXRpbHMvY29tbW9uXCI6NDEsXCIuL3V0aWxzL3N0cmluZ3NcIjo0MixcIi4vemxpYi9jb25zdGFudHNcIjo0NCxcIi4vemxpYi9nemhlYWRlclwiOjQ3LFwiLi96bGliL2luZmxhdGVcIjo0OSxcIi4vemxpYi9tZXNzYWdlc1wiOjUxLFwiLi96bGliL3pzdHJlYW1cIjo1M31dLDQxOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50MTZBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEludDMyQXJyYXk7ci5hc3NpZ249ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTt0Lmxlbmd0aDspe3ZhciByPXQuc2hpZnQoKTtpZihyKXtpZihcIm9iamVjdFwiIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKHIrXCJtdXN0IGJlIG5vbi1vYmplY3RcIik7Zm9yKHZhciBuIGluIHIpci5oYXNPd25Qcm9wZXJ0eShuKSYmKGVbbl09cltuXSl9fXJldHVybiBlfSxyLnNocmlua0J1Zj1mdW5jdGlvbihlLHQpe3JldHVybiBlLmxlbmd0aD09PXQ/ZTplLnN1YmFycmF5P2Uuc3ViYXJyYXkoMCx0KTooZS5sZW5ndGg9dCxlKX07dmFyIGk9e2FycmF5U2V0OmZ1bmN0aW9uKGUsdCxyLG4saSl7aWYodC5zdWJhcnJheSYmZS5zdWJhcnJheSllLnNldCh0LnN1YmFycmF5KHIscituKSxpKTtlbHNlIGZvcih2YXIgcz0wO3M8bjtzKyspZVtpK3NdPXRbcitzXX0sZmxhdHRlbkNodW5rczpmdW5jdGlvbihlKXt2YXIgdCxyLG4saSxzLGE7Zm9yKHQ9bj0wLHI9ZS5sZW5ndGg7dDxyO3QrKyluKz1lW3RdLmxlbmd0aDtmb3IoYT1uZXcgVWludDhBcnJheShuKSx0PWk9MCxyPWUubGVuZ3RoO3Q8cjt0Kyspcz1lW3RdLGEuc2V0KHMsaSksaSs9cy5sZW5ndGg7cmV0dXJuIGF9fSxzPXthcnJheVNldDpmdW5jdGlvbihlLHQscixuLGkpe2Zvcih2YXIgcz0wO3M8bjtzKyspZVtpK3NdPXRbcitzXX0sZmxhdHRlbkNodW5rczpmdW5jdGlvbihlKXtyZXR1cm5bXS5jb25jYXQuYXBwbHkoW10sZSl9fTtyLnNldFR5cGVkPWZ1bmN0aW9uKGUpe2U/KHIuQnVmOD1VaW50OEFycmF5LHIuQnVmMTY9VWludDE2QXJyYXksci5CdWYzMj1JbnQzMkFycmF5LHIuYXNzaWduKHIsaSkpOihyLkJ1Zjg9QXJyYXksci5CdWYxNj1BcnJheSxyLkJ1ZjMyPUFycmF5LHIuYXNzaWduKHIscykpfSxyLnNldFR5cGVkKG4pfSx7fV0sNDI6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaD1lKFwiLi9jb21tb25cIiksaT0hMCxzPSEwO3RyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsWzBdKX1jYXRjaChlKXtpPSExfXRyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpfWNhdGNoKGUpe3M9ITF9Zm9yKHZhciB1PW5ldyBoLkJ1ZjgoMjU2KSxuPTA7bjwyNTY7bisrKXVbbl09MjUyPD1uPzY6MjQ4PD1uPzU6MjQwPD1uPzQ6MjI0PD1uPzM6MTkyPD1uPzI6MTtmdW5jdGlvbiBsKGUsdCl7aWYodDw2NTUzNyYmKGUuc3ViYXJyYXkmJnN8fCFlLnN1YmFycmF5JiZpKSlyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGguc2hyaW5rQnVmKGUsdCkpO2Zvcih2YXIgcj1cIlwiLG49MDtuPHQ7bisrKXIrPVN0cmluZy5mcm9tQ2hhckNvZGUoZVtuXSk7cmV0dXJuIHJ9dVsyNTRdPXVbMjU0XT0xLHIuc3RyaW5nMmJ1Zj1mdW5jdGlvbihlKXt2YXIgdCxyLG4saSxzLGE9ZS5sZW5ndGgsbz0wO2ZvcihpPTA7aTxhO2krKyk1NTI5Nj09KDY0NTEyJihyPWUuY2hhckNvZGVBdChpKSkpJiZpKzE8YSYmNTYzMjA9PSg2NDUxMiYobj1lLmNoYXJDb2RlQXQoaSsxKSkpJiYocj02NTUzNisoci01NTI5Njw8MTApKyhuLTU2MzIwKSxpKyspLG8rPXI8MTI4PzE6cjwyMDQ4PzI6cjw2NTUzNj8zOjQ7Zm9yKHQ9bmV3IGguQnVmOChvKSxpPXM9MDtzPG87aSsrKTU1Mjk2PT0oNjQ1MTImKHI9ZS5jaGFyQ29kZUF0KGkpKSkmJmkrMTxhJiY1NjMyMD09KDY0NTEyJihuPWUuY2hhckNvZGVBdChpKzEpKSkmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApLGkrKykscjwxMjg/dFtzKytdPXI6KHI8MjA0OD90W3MrK109MTkyfHI+Pj42OihyPDY1NTM2P3RbcysrXT0yMjR8cj4+PjEyOih0W3MrK109MjQwfHI+Pj4xOCx0W3MrK109MTI4fHI+Pj4xMiY2MyksdFtzKytdPTEyOHxyPj4+NiY2MyksdFtzKytdPTEyOHw2MyZyKTtyZXR1cm4gdH0sci5idWYyYmluc3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiBsKGUsZS5sZW5ndGgpfSxyLmJpbnN0cmluZzJidWY9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBoLkJ1ZjgoZS5sZW5ndGgpLHI9MCxuPXQubGVuZ3RoO3I8bjtyKyspdFtyXT1lLmNoYXJDb2RlQXQocik7cmV0dXJuIHR9LHIuYnVmMnN0cmluZz1mdW5jdGlvbihlLHQpe3ZhciByLG4saSxzLGE9dHx8ZS5sZW5ndGgsbz1uZXcgQXJyYXkoMiphKTtmb3Iocj1uPTA7cjxhOylpZigoaT1lW3IrK10pPDEyOClvW24rK109aTtlbHNlIGlmKDQ8KHM9dVtpXSkpb1tuKytdPTY1NTMzLHIrPXMtMTtlbHNle2ZvcihpJj0yPT09cz8zMTozPT09cz8xNTo3OzE8cyYmcjxhOylpPWk8PDZ8NjMmZVtyKytdLHMtLTsxPHM/b1tuKytdPTY1NTMzOmk8NjU1MzY/b1tuKytdPWk6KGktPTY1NTM2LG9bbisrXT01NTI5NnxpPj4xMCYxMDIzLG9bbisrXT01NjMyMHwxMDIzJmkpfXJldHVybiBsKG8sbil9LHIudXRmOGJvcmRlcj1mdW5jdGlvbihlLHQpe3ZhciByO2ZvcigodD10fHxlLmxlbmd0aCk+ZS5sZW5ndGgmJih0PWUubGVuZ3RoKSxyPXQtMTswPD1yJiYxMjg9PSgxOTImZVtyXSk7KXItLTtyZXR1cm4gcjwwP3Q6MD09PXI/dDpyK3VbZVtyXV0+dD9yOnR9fSx7XCIuL2NvbW1vblwiOjQxfV0sNDM6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbil7Zm9yKHZhciBpPTY1NTM1JmV8MCxzPWU+Pj4xNiY2NTUzNXwwLGE9MDswIT09cjspe2ZvcihyLT1hPTJlMzxyPzJlMzpyO3M9cysoaT1pK3RbbisrXXwwKXwwLC0tYTspO2klPTY1NTIxLHMlPTY1NTIxfXJldHVybiBpfHM8PDE2fDB9fSx7fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9e1pfTk9fRkxVU0g6MCxaX1BBUlRJQUxfRkxVU0g6MSxaX1NZTkNfRkxVU0g6MixaX0ZVTExfRkxVU0g6MyxaX0ZJTklTSDo0LFpfQkxPQ0s6NSxaX1RSRUVTOjYsWl9PSzowLFpfU1RSRUFNX0VORDoxLFpfTkVFRF9ESUNUOjIsWl9FUlJOTzotMSxaX1NUUkVBTV9FUlJPUjotMixaX0RBVEFfRVJST1I6LTMsWl9CVUZfRVJST1I6LTUsWl9OT19DT01QUkVTU0lPTjowLFpfQkVTVF9TUEVFRDoxLFpfQkVTVF9DT01QUkVTU0lPTjo5LFpfREVGQVVMVF9DT01QUkVTU0lPTjotMSxaX0ZJTFRFUkVEOjEsWl9IVUZGTUFOX09OTFk6MixaX1JMRTozLFpfRklYRUQ6NCxaX0RFRkFVTFRfU1RSQVRFR1k6MCxaX0JJTkFSWTowLFpfVEVYVDoxLFpfVU5LTk9XTjoyLFpfREVGTEFURUQ6OH19LHt9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBvPWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9W10scj0wO3I8MjU2O3IrKyl7ZT1yO2Zvcih2YXIgbj0wO248ODtuKyspZT0xJmU/Mzk4ODI5MjM4NF5lPj4+MTplPj4+MTt0W3JdPWV9cmV0dXJuIHR9KCk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPW8scz1uK3I7ZV49LTE7Zm9yKHZhciBhPW47YTxzO2ErKyllPWU+Pj44XmlbMjU1JihlXnRbYV0pXTtyZXR1cm4tMV5lfX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGgsYz1lKFwiLi4vdXRpbHMvY29tbW9uXCIpLHU9ZShcIi4vdHJlZXNcIiksZD1lKFwiLi9hZGxlcjMyXCIpLHA9ZShcIi4vY3JjMzJcIiksbj1lKFwiLi9tZXNzYWdlc1wiKSxsPTAsZj00LG09MCxfPS0yLGc9LTEsYj00LGk9Mix2PTgseT05LHM9Mjg2LGE9MzAsbz0xOSx3PTIqcysxLGs9MTUseD0zLFM9MjU4LHo9Uyt4KzEsQz00MixFPTExMyxBPTEsST0yLE89MyxCPTQ7ZnVuY3Rpb24gUihlLHQpe3JldHVybiBlLm1zZz1uW3RdLHR9ZnVuY3Rpb24gVChlKXtyZXR1cm4oZTw8MSktKDQ8ZT85OjApfWZ1bmN0aW9uIEQoZSl7Zm9yKHZhciB0PWUubGVuZ3RoOzA8PS0tdDspZVt0XT0wfWZ1bmN0aW9uIEYoZSl7dmFyIHQ9ZS5zdGF0ZSxyPXQucGVuZGluZztyPmUuYXZhaWxfb3V0JiYocj1lLmF2YWlsX291dCksMCE9PXImJihjLmFycmF5U2V0KGUub3V0cHV0LHQucGVuZGluZ19idWYsdC5wZW5kaW5nX291dCxyLGUubmV4dF9vdXQpLGUubmV4dF9vdXQrPXIsdC5wZW5kaW5nX291dCs9cixlLnRvdGFsX291dCs9cixlLmF2YWlsX291dC09cix0LnBlbmRpbmctPXIsMD09PXQucGVuZGluZyYmKHQucGVuZGluZ19vdXQ9MCkpfWZ1bmN0aW9uIE4oZSx0KXt1Ll90cl9mbHVzaF9ibG9jayhlLDA8PWUuYmxvY2tfc3RhcnQ/ZS5ibG9ja19zdGFydDotMSxlLnN0cnN0YXJ0LWUuYmxvY2tfc3RhcnQsdCksZS5ibG9ja19zdGFydD1lLnN0cnN0YXJ0LEYoZS5zdHJtKX1mdW5jdGlvbiBVKGUsdCl7ZS5wZW5kaW5nX2J1ZltlLnBlbmRpbmcrK109dH1mdW5jdGlvbiBQKGUsdCl7ZS5wZW5kaW5nX2J1ZltlLnBlbmRpbmcrK109dD4+PjgmMjU1LGUucGVuZGluZ19idWZbZS5wZW5kaW5nKytdPTI1NSZ0fWZ1bmN0aW9uIEwoZSx0KXt2YXIgcixuLGk9ZS5tYXhfY2hhaW5fbGVuZ3RoLHM9ZS5zdHJzdGFydCxhPWUucHJldl9sZW5ndGgsbz1lLm5pY2VfbWF0Y2gsaD1lLnN0cnN0YXJ0PmUud19zaXplLXo/ZS5zdHJzdGFydC0oZS53X3NpemUteik6MCx1PWUud2luZG93LGw9ZS53X21hc2ssZj1lLnByZXYsYz1lLnN0cnN0YXJ0K1MsZD11W3MrYS0xXSxwPXVbcythXTtlLnByZXZfbGVuZ3RoPj1lLmdvb2RfbWF0Y2gmJihpPj49Miksbz5lLmxvb2thaGVhZCYmKG89ZS5sb29rYWhlYWQpO2Rve2lmKHVbKHI9dCkrYV09PT1wJiZ1W3IrYS0xXT09PWQmJnVbcl09PT11W3NdJiZ1Wysrcl09PT11W3MrMV0pe3MrPTIscisrO2Rve313aGlsZSh1Wysrc109PT11Wysrcl0mJnVbKytzXT09PXVbKytyXSYmdVsrK3NdPT09dVsrK3JdJiZ1Wysrc109PT11Wysrcl0mJnVbKytzXT09PXVbKytyXSYmdVsrK3NdPT09dVsrK3JdJiZ1Wysrc109PT11Wysrcl0mJnVbKytzXT09PXVbKytyXSYmczxjKTtpZihuPVMtKGMtcykscz1jLVMsYTxuKXtpZihlLm1hdGNoX3N0YXJ0PXQsbzw9KGE9bikpYnJlYWs7ZD11W3MrYS0xXSxwPXVbcythXX19fXdoaWxlKCh0PWZbdCZsXSk+aCYmMCE9LS1pKTtyZXR1cm4gYTw9ZS5sb29rYWhlYWQ/YTplLmxvb2thaGVhZH1mdW5jdGlvbiBqKGUpe3ZhciB0LHIsbixpLHMsYSxvLGgsdSxsLGY9ZS53X3NpemU7ZG97aWYoaT1lLndpbmRvd19zaXplLWUubG9va2FoZWFkLWUuc3Ryc3RhcnQsZS5zdHJzdGFydD49ZisoZi16KSl7Zm9yKGMuYXJyYXlTZXQoZS53aW5kb3csZS53aW5kb3csZixmLDApLGUubWF0Y2hfc3RhcnQtPWYsZS5zdHJzdGFydC09ZixlLmJsb2NrX3N0YXJ0LT1mLHQ9cj1lLmhhc2hfc2l6ZTtuPWUuaGVhZFstLXRdLGUuaGVhZFt0XT1mPD1uP24tZjowLC0tcjspO2Zvcih0PXI9ZjtuPWUucHJldlstLXRdLGUucHJldlt0XT1mPD1uP24tZjowLC0tcjspO2krPWZ9aWYoMD09PWUuc3RybS5hdmFpbF9pbilicmVhaztpZihhPWUuc3RybSxvPWUud2luZG93LGg9ZS5zdHJzdGFydCtlLmxvb2thaGVhZCx1PWksbD12b2lkIDAsbD1hLmF2YWlsX2luLHU8bCYmKGw9dSkscj0wPT09bD8wOihhLmF2YWlsX2luLT1sLGMuYXJyYXlTZXQobyxhLmlucHV0LGEubmV4dF9pbixsLGgpLDE9PT1hLnN0YXRlLndyYXA/YS5hZGxlcj1kKGEuYWRsZXIsbyxsLGgpOjI9PT1hLnN0YXRlLndyYXAmJihhLmFkbGVyPXAoYS5hZGxlcixvLGwsaCkpLGEubmV4dF9pbis9bCxhLnRvdGFsX2luKz1sLGwpLGUubG9va2FoZWFkKz1yLGUubG9va2FoZWFkK2UuaW5zZXJ0Pj14KWZvcihzPWUuc3Ryc3RhcnQtZS5pbnNlcnQsZS5pbnNfaD1lLndpbmRvd1tzXSxlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbcysxXSkmZS5oYXNoX21hc2s7ZS5pbnNlcnQmJihlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbcyt4LTFdKSZlLmhhc2hfbWFzayxlLnByZXZbcyZlLndfbWFza109ZS5oZWFkW2UuaW5zX2hdLGUuaGVhZFtlLmluc19oXT1zLHMrKyxlLmluc2VydC0tLCEoZS5sb29rYWhlYWQrZS5pbnNlcnQ8eCkpOyk7fXdoaWxlKGUubG9va2FoZWFkPHomJjAhPT1lLnN0cm0uYXZhaWxfaW4pfWZ1bmN0aW9uIFooZSx0KXtmb3IodmFyIHIsbjs7KXtpZihlLmxvb2thaGVhZDx6KXtpZihqKGUpLGUubG9va2FoZWFkPHomJnQ9PT1sKXJldHVybiBBO2lmKDA9PT1lLmxvb2thaGVhZClicmVha31pZihyPTAsZS5sb29rYWhlYWQ+PXgmJihlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbZS5zdHJzdGFydCt4LTFdKSZlLmhhc2hfbWFzayxyPWUucHJldltlLnN0cnN0YXJ0JmUud19tYXNrXT1lLmhlYWRbZS5pbnNfaF0sZS5oZWFkW2UuaW5zX2hdPWUuc3Ryc3RhcnQpLDAhPT1yJiZlLnN0cnN0YXJ0LXI8PWUud19zaXplLXomJihlLm1hdGNoX2xlbmd0aD1MKGUscikpLGUubWF0Y2hfbGVuZ3RoPj14KWlmKG49dS5fdHJfdGFsbHkoZSxlLnN0cnN0YXJ0LWUubWF0Y2hfc3RhcnQsZS5tYXRjaF9sZW5ndGgteCksZS5sb29rYWhlYWQtPWUubWF0Y2hfbGVuZ3RoLGUubWF0Y2hfbGVuZ3RoPD1lLm1heF9sYXp5X21hdGNoJiZlLmxvb2thaGVhZD49eCl7Zm9yKGUubWF0Y2hfbGVuZ3RoLS07ZS5zdHJzdGFydCsrLGUuaW5zX2g9KGUuaW5zX2g8PGUuaGFzaF9zaGlmdF5lLndpbmRvd1tlLnN0cnN0YXJ0K3gtMV0pJmUuaGFzaF9tYXNrLHI9ZS5wcmV2W2Uuc3Ryc3RhcnQmZS53X21hc2tdPWUuaGVhZFtlLmluc19oXSxlLmhlYWRbZS5pbnNfaF09ZS5zdHJzdGFydCwwIT0tLWUubWF0Y2hfbGVuZ3RoOyk7ZS5zdHJzdGFydCsrfWVsc2UgZS5zdHJzdGFydCs9ZS5tYXRjaF9sZW5ndGgsZS5tYXRjaF9sZW5ndGg9MCxlLmluc19oPWUud2luZG93W2Uuc3Ryc3RhcnRdLGUuaW5zX2g9KGUuaW5zX2g8PGUuaGFzaF9zaGlmdF5lLndpbmRvd1tlLnN0cnN0YXJ0KzFdKSZlLmhhc2hfbWFzaztlbHNlIG49dS5fdHJfdGFsbHkoZSwwLGUud2luZG93W2Uuc3Ryc3RhcnRdKSxlLmxvb2thaGVhZC0tLGUuc3Ryc3RhcnQrKztpZihuJiYoTihlLCExKSwwPT09ZS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIEF9cmV0dXJuIGUuaW5zZXJ0PWUuc3Ryc3RhcnQ8eC0xP2Uuc3Ryc3RhcnQ6eC0xLHQ9PT1mPyhOKGUsITApLDA9PT1lLnN0cm0uYXZhaWxfb3V0P086Qik6ZS5sYXN0X2xpdCYmKE4oZSwhMSksMD09PWUuc3RybS5hdmFpbF9vdXQpP0E6SX1mdW5jdGlvbiBXKGUsdCl7Zm9yKHZhciByLG4saTs7KXtpZihlLmxvb2thaGVhZDx6KXtpZihqKGUpLGUubG9va2FoZWFkPHomJnQ9PT1sKXJldHVybiBBO2lmKDA9PT1lLmxvb2thaGVhZClicmVha31pZihyPTAsZS5sb29rYWhlYWQ+PXgmJihlLmluc19oPShlLmluc19oPDxlLmhhc2hfc2hpZnReZS53aW5kb3dbZS5zdHJzdGFydCt4LTFdKSZlLmhhc2hfbWFzayxyPWUucHJldltlLnN0cnN0YXJ0JmUud19tYXNrXT1lLmhlYWRbZS5pbnNfaF0sZS5oZWFkW2UuaW5zX2hdPWUuc3Ryc3RhcnQpLGUucHJldl9sZW5ndGg9ZS5tYXRjaF9sZW5ndGgsZS5wcmV2X21hdGNoPWUubWF0Y2hfc3RhcnQsZS5tYXRjaF9sZW5ndGg9eC0xLDAhPT1yJiZlLnByZXZfbGVuZ3RoPGUubWF4X2xhenlfbWF0Y2gmJmUuc3Ryc3RhcnQtcjw9ZS53X3NpemUteiYmKGUubWF0Y2hfbGVuZ3RoPUwoZSxyKSxlLm1hdGNoX2xlbmd0aDw9NSYmKDE9PT1lLnN0cmF0ZWd5fHxlLm1hdGNoX2xlbmd0aD09PXgmJjQwOTY8ZS5zdHJzdGFydC1lLm1hdGNoX3N0YXJ0KSYmKGUubWF0Y2hfbGVuZ3RoPXgtMSkpLGUucHJldl9sZW5ndGg+PXgmJmUubWF0Y2hfbGVuZ3RoPD1lLnByZXZfbGVuZ3RoKXtmb3IoaT1lLnN0cnN0YXJ0K2UubG9va2FoZWFkLXgsbj11Ll90cl90YWxseShlLGUuc3Ryc3RhcnQtMS1lLnByZXZfbWF0Y2gsZS5wcmV2X2xlbmd0aC14KSxlLmxvb2thaGVhZC09ZS5wcmV2X2xlbmd0aC0xLGUucHJldl9sZW5ndGgtPTI7KytlLnN0cnN0YXJ0PD1pJiYoZS5pbnNfaD0oZS5pbnNfaDw8ZS5oYXNoX3NoaWZ0XmUud2luZG93W2Uuc3Ryc3RhcnQreC0xXSkmZS5oYXNoX21hc2sscj1lLnByZXZbZS5zdHJzdGFydCZlLndfbWFza109ZS5oZWFkW2UuaW5zX2hdLGUuaGVhZFtlLmluc19oXT1lLnN0cnN0YXJ0KSwwIT0tLWUucHJldl9sZW5ndGg7KTtpZihlLm1hdGNoX2F2YWlsYWJsZT0wLGUubWF0Y2hfbGVuZ3RoPXgtMSxlLnN0cnN0YXJ0KyssbiYmKE4oZSwhMSksMD09PWUuc3RybS5hdmFpbF9vdXQpKXJldHVybiBBfWVsc2UgaWYoZS5tYXRjaF9hdmFpbGFibGUpe2lmKChuPXUuX3RyX3RhbGx5KGUsMCxlLndpbmRvd1tlLnN0cnN0YXJ0LTFdKSkmJk4oZSwhMSksZS5zdHJzdGFydCsrLGUubG9va2FoZWFkLS0sMD09PWUuc3RybS5hdmFpbF9vdXQpcmV0dXJuIEF9ZWxzZSBlLm1hdGNoX2F2YWlsYWJsZT0xLGUuc3Ryc3RhcnQrKyxlLmxvb2thaGVhZC0tfXJldHVybiBlLm1hdGNoX2F2YWlsYWJsZSYmKG49dS5fdHJfdGFsbHkoZSwwLGUud2luZG93W2Uuc3Ryc3RhcnQtMV0pLGUubWF0Y2hfYXZhaWxhYmxlPTApLGUuaW5zZXJ0PWUuc3Ryc3RhcnQ8eC0xP2Uuc3Ryc3RhcnQ6eC0xLHQ9PT1mPyhOKGUsITApLDA9PT1lLnN0cm0uYXZhaWxfb3V0P086Qik6ZS5sYXN0X2xpdCYmKE4oZSwhMSksMD09PWUuc3RybS5hdmFpbF9vdXQpP0E6SX1mdW5jdGlvbiBNKGUsdCxyLG4saSl7dGhpcy5nb29kX2xlbmd0aD1lLHRoaXMubWF4X2xhenk9dCx0aGlzLm5pY2VfbGVuZ3RoPXIsdGhpcy5tYXhfY2hhaW49bix0aGlzLmZ1bmM9aX1mdW5jdGlvbiBIKCl7dGhpcy5zdHJtPW51bGwsdGhpcy5zdGF0dXM9MCx0aGlzLnBlbmRpbmdfYnVmPW51bGwsdGhpcy5wZW5kaW5nX2J1Zl9zaXplPTAsdGhpcy5wZW5kaW5nX291dD0wLHRoaXMucGVuZGluZz0wLHRoaXMud3JhcD0wLHRoaXMuZ3poZWFkPW51bGwsdGhpcy5nemluZGV4PTAsdGhpcy5tZXRob2Q9dix0aGlzLmxhc3RfZmx1c2g9LTEsdGhpcy53X3NpemU9MCx0aGlzLndfYml0cz0wLHRoaXMud19tYXNrPTAsdGhpcy53aW5kb3c9bnVsbCx0aGlzLndpbmRvd19zaXplPTAsdGhpcy5wcmV2PW51bGwsdGhpcy5oZWFkPW51bGwsdGhpcy5pbnNfaD0wLHRoaXMuaGFzaF9zaXplPTAsdGhpcy5oYXNoX2JpdHM9MCx0aGlzLmhhc2hfbWFzaz0wLHRoaXMuaGFzaF9zaGlmdD0wLHRoaXMuYmxvY2tfc3RhcnQ9MCx0aGlzLm1hdGNoX2xlbmd0aD0wLHRoaXMucHJldl9tYXRjaD0wLHRoaXMubWF0Y2hfYXZhaWxhYmxlPTAsdGhpcy5zdHJzdGFydD0wLHRoaXMubWF0Y2hfc3RhcnQ9MCx0aGlzLmxvb2thaGVhZD0wLHRoaXMucHJldl9sZW5ndGg9MCx0aGlzLm1heF9jaGFpbl9sZW5ndGg9MCx0aGlzLm1heF9sYXp5X21hdGNoPTAsdGhpcy5sZXZlbD0wLHRoaXMuc3RyYXRlZ3k9MCx0aGlzLmdvb2RfbWF0Y2g9MCx0aGlzLm5pY2VfbWF0Y2g9MCx0aGlzLmR5bl9sdHJlZT1uZXcgYy5CdWYxNigyKncpLHRoaXMuZHluX2R0cmVlPW5ldyBjLkJ1ZjE2KDIqKDIqYSsxKSksdGhpcy5ibF90cmVlPW5ldyBjLkJ1ZjE2KDIqKDIqbysxKSksRCh0aGlzLmR5bl9sdHJlZSksRCh0aGlzLmR5bl9kdHJlZSksRCh0aGlzLmJsX3RyZWUpLHRoaXMubF9kZXNjPW51bGwsdGhpcy5kX2Rlc2M9bnVsbCx0aGlzLmJsX2Rlc2M9bnVsbCx0aGlzLmJsX2NvdW50PW5ldyBjLkJ1ZjE2KGsrMSksdGhpcy5oZWFwPW5ldyBjLkJ1ZjE2KDIqcysxKSxEKHRoaXMuaGVhcCksdGhpcy5oZWFwX2xlbj0wLHRoaXMuaGVhcF9tYXg9MCx0aGlzLmRlcHRoPW5ldyBjLkJ1ZjE2KDIqcysxKSxEKHRoaXMuZGVwdGgpLHRoaXMubF9idWY9MCx0aGlzLmxpdF9idWZzaXplPTAsdGhpcy5sYXN0X2xpdD0wLHRoaXMuZF9idWY9MCx0aGlzLm9wdF9sZW49MCx0aGlzLnN0YXRpY19sZW49MCx0aGlzLm1hdGNoZXM9MCx0aGlzLmluc2VydD0wLHRoaXMuYmlfYnVmPTAsdGhpcy5iaV92YWxpZD0wfWZ1bmN0aW9uIEcoZSl7dmFyIHQ7cmV0dXJuIGUmJmUuc3RhdGU/KGUudG90YWxfaW49ZS50b3RhbF9vdXQ9MCxlLmRhdGFfdHlwZT1pLCh0PWUuc3RhdGUpLnBlbmRpbmc9MCx0LnBlbmRpbmdfb3V0PTAsdC53cmFwPDAmJih0LndyYXA9LXQud3JhcCksdC5zdGF0dXM9dC53cmFwP0M6RSxlLmFkbGVyPTI9PT10LndyYXA/MDoxLHQubGFzdF9mbHVzaD1sLHUuX3RyX2luaXQodCksbSk6UihlLF8pfWZ1bmN0aW9uIEsoZSl7dmFyIHQ9RyhlKTtyZXR1cm4gdD09PW0mJmZ1bmN0aW9uKGUpe2Uud2luZG93X3NpemU9MiplLndfc2l6ZSxEKGUuaGVhZCksZS5tYXhfbGF6eV9tYXRjaD1oW2UubGV2ZWxdLm1heF9sYXp5LGUuZ29vZF9tYXRjaD1oW2UubGV2ZWxdLmdvb2RfbGVuZ3RoLGUubmljZV9tYXRjaD1oW2UubGV2ZWxdLm5pY2VfbGVuZ3RoLGUubWF4X2NoYWluX2xlbmd0aD1oW2UubGV2ZWxdLm1heF9jaGFpbixlLnN0cnN0YXJ0PTAsZS5ibG9ja19zdGFydD0wLGUubG9va2FoZWFkPTAsZS5pbnNlcnQ9MCxlLm1hdGNoX2xlbmd0aD1lLnByZXZfbGVuZ3RoPXgtMSxlLm1hdGNoX2F2YWlsYWJsZT0wLGUuaW5zX2g9MH0oZS5zdGF0ZSksdH1mdW5jdGlvbiBZKGUsdCxyLG4saSxzKXtpZighZSlyZXR1cm4gXzt2YXIgYT0xO2lmKHQ9PT1nJiYodD02KSxuPDA/KGE9MCxuPS1uKToxNTxuJiYoYT0yLG4tPTE2KSxpPDF8fHk8aXx8ciE9PXZ8fG48OHx8MTU8bnx8dDwwfHw5PHR8fHM8MHx8YjxzKXJldHVybiBSKGUsXyk7OD09PW4mJihuPTkpO3ZhciBvPW5ldyBIO3JldHVybihlLnN0YXRlPW8pLnN0cm09ZSxvLndyYXA9YSxvLmd6aGVhZD1udWxsLG8ud19iaXRzPW4sby53X3NpemU9MTw8by53X2JpdHMsby53X21hc2s9by53X3NpemUtMSxvLmhhc2hfYml0cz1pKzcsby5oYXNoX3NpemU9MTw8by5oYXNoX2JpdHMsby5oYXNoX21hc2s9by5oYXNoX3NpemUtMSxvLmhhc2hfc2hpZnQ9fn4oKG8uaGFzaF9iaXRzK3gtMSkveCksby53aW5kb3c9bmV3IGMuQnVmOCgyKm8ud19zaXplKSxvLmhlYWQ9bmV3IGMuQnVmMTYoby5oYXNoX3NpemUpLG8ucHJldj1uZXcgYy5CdWYxNihvLndfc2l6ZSksby5saXRfYnVmc2l6ZT0xPDxpKzYsby5wZW5kaW5nX2J1Zl9zaXplPTQqby5saXRfYnVmc2l6ZSxvLnBlbmRpbmdfYnVmPW5ldyBjLkJ1Zjgoby5wZW5kaW5nX2J1Zl9zaXplKSxvLmRfYnVmPTEqby5saXRfYnVmc2l6ZSxvLmxfYnVmPTMqby5saXRfYnVmc2l6ZSxvLmxldmVsPXQsby5zdHJhdGVneT1zLG8ubWV0aG9kPXIsSyhlKX1oPVtuZXcgTSgwLDAsMCwwLGZ1bmN0aW9uKGUsdCl7dmFyIHI9NjU1MzU7Zm9yKHI+ZS5wZW5kaW5nX2J1Zl9zaXplLTUmJihyPWUucGVuZGluZ19idWZfc2l6ZS01KTs7KXtpZihlLmxvb2thaGVhZDw9MSl7aWYoaihlKSwwPT09ZS5sb29rYWhlYWQmJnQ9PT1sKXJldHVybiBBO2lmKDA9PT1lLmxvb2thaGVhZClicmVha31lLnN0cnN0YXJ0Kz1lLmxvb2thaGVhZCxlLmxvb2thaGVhZD0wO3ZhciBuPWUuYmxvY2tfc3RhcnQrcjtpZigoMD09PWUuc3Ryc3RhcnR8fGUuc3Ryc3RhcnQ+PW4pJiYoZS5sb29rYWhlYWQ9ZS5zdHJzdGFydC1uLGUuc3Ryc3RhcnQ9bixOKGUsITEpLDA9PT1lLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gQTtpZihlLnN0cnN0YXJ0LWUuYmxvY2tfc3RhcnQ+PWUud19zaXplLXomJihOKGUsITEpLDA9PT1lLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gQX1yZXR1cm4gZS5pbnNlcnQ9MCx0PT09Zj8oTihlLCEwKSwwPT09ZS5zdHJtLmF2YWlsX291dD9POkIpOihlLnN0cnN0YXJ0PmUuYmxvY2tfc3RhcnQmJihOKGUsITEpLGUuc3RybS5hdmFpbF9vdXQpLEEpfSksbmV3IE0oNCw0LDgsNCxaKSxuZXcgTSg0LDUsMTYsOCxaKSxuZXcgTSg0LDYsMzIsMzIsWiksbmV3IE0oNCw0LDE2LDE2LFcpLG5ldyBNKDgsMTYsMzIsMzIsVyksbmV3IE0oOCwxNiwxMjgsMTI4LFcpLG5ldyBNKDgsMzIsMTI4LDI1NixXKSxuZXcgTSgzMiwxMjgsMjU4LDEwMjQsVyksbmV3IE0oMzIsMjU4LDI1OCw0MDk2LFcpXSxyLmRlZmxhdGVJbml0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIFkoZSx0LHYsMTUsOCwwKX0sci5kZWZsYXRlSW5pdDI9WSxyLmRlZmxhdGVSZXNldD1LLHIuZGVmbGF0ZVJlc2V0S2VlcD1HLHIuZGVmbGF0ZVNldEhlYWRlcj1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZlLnN0YXRlPzIhPT1lLnN0YXRlLndyYXA/XzooZS5zdGF0ZS5nemhlYWQ9dCxtKTpffSxyLmRlZmxhdGU9ZnVuY3Rpb24oZSx0KXt2YXIgcixuLGkscztpZighZXx8IWUuc3RhdGV8fDU8dHx8dDwwKXJldHVybiBlP1IoZSxfKTpfO2lmKG49ZS5zdGF0ZSwhZS5vdXRwdXR8fCFlLmlucHV0JiYwIT09ZS5hdmFpbF9pbnx8NjY2PT09bi5zdGF0dXMmJnQhPT1mKXJldHVybiBSKGUsMD09PWUuYXZhaWxfb3V0Py01Ol8pO2lmKG4uc3RybT1lLHI9bi5sYXN0X2ZsdXNoLG4ubGFzdF9mbHVzaD10LG4uc3RhdHVzPT09QylpZigyPT09bi53cmFwKWUuYWRsZXI9MCxVKG4sMzEpLFUobiwxMzkpLFUobiw4KSxuLmd6aGVhZD8oVShuLChuLmd6aGVhZC50ZXh0PzE6MCkrKG4uZ3poZWFkLmhjcmM/MjowKSsobi5nemhlYWQuZXh0cmE/NDowKSsobi5nemhlYWQubmFtZT84OjApKyhuLmd6aGVhZC5jb21tZW50PzE2OjApKSxVKG4sMjU1Jm4uZ3poZWFkLnRpbWUpLFUobixuLmd6aGVhZC50aW1lPj44JjI1NSksVShuLG4uZ3poZWFkLnRpbWU+PjE2JjI1NSksVShuLG4uZ3poZWFkLnRpbWU+PjI0JjI1NSksVShuLDk9PT1uLmxldmVsPzI6Mjw9bi5zdHJhdGVneXx8bi5sZXZlbDwyPzQ6MCksVShuLDI1NSZuLmd6aGVhZC5vcyksbi5nemhlYWQuZXh0cmEmJm4uZ3poZWFkLmV4dHJhLmxlbmd0aCYmKFUobiwyNTUmbi5nemhlYWQuZXh0cmEubGVuZ3RoKSxVKG4sbi5nemhlYWQuZXh0cmEubGVuZ3RoPj44JjI1NSkpLG4uZ3poZWFkLmhjcmMmJihlLmFkbGVyPXAoZS5hZGxlcixuLnBlbmRpbmdfYnVmLG4ucGVuZGluZywwKSksbi5nemluZGV4PTAsbi5zdGF0dXM9NjkpOihVKG4sMCksVShuLDApLFUobiwwKSxVKG4sMCksVShuLDApLFUobiw5PT09bi5sZXZlbD8yOjI8PW4uc3RyYXRlZ3l8fG4ubGV2ZWw8Mj80OjApLFUobiwzKSxuLnN0YXR1cz1FKTtlbHNle3ZhciBhPXYrKG4ud19iaXRzLTg8PDQpPDw4O2F8PSgyPD1uLnN0cmF0ZWd5fHxuLmxldmVsPDI/MDpuLmxldmVsPDY/MTo2PT09bi5sZXZlbD8yOjMpPDw2LDAhPT1uLnN0cnN0YXJ0JiYoYXw9MzIpLGErPTMxLWElMzEsbi5zdGF0dXM9RSxQKG4sYSksMCE9PW4uc3Ryc3RhcnQmJihQKG4sZS5hZGxlcj4+PjE2KSxQKG4sNjU1MzUmZS5hZGxlcikpLGUuYWRsZXI9MX1pZig2OT09PW4uc3RhdHVzKWlmKG4uZ3poZWFkLmV4dHJhKXtmb3IoaT1uLnBlbmRpbmc7bi5nemluZGV4PCg2NTUzNSZuLmd6aGVhZC5leHRyYS5sZW5ndGgpJiYobi5wZW5kaW5nIT09bi5wZW5kaW5nX2J1Zl9zaXplfHwobi5nemhlYWQuaGNyYyYmbi5wZW5kaW5nPmkmJihlLmFkbGVyPXAoZS5hZGxlcixuLnBlbmRpbmdfYnVmLG4ucGVuZGluZy1pLGkpKSxGKGUpLGk9bi5wZW5kaW5nLG4ucGVuZGluZyE9PW4ucGVuZGluZ19idWZfc2l6ZSkpOylVKG4sMjU1Jm4uZ3poZWFkLmV4dHJhW24uZ3ppbmRleF0pLG4uZ3ppbmRleCsrO24uZ3poZWFkLmhjcmMmJm4ucGVuZGluZz5pJiYoZS5hZGxlcj1wKGUuYWRsZXIsbi5wZW5kaW5nX2J1ZixuLnBlbmRpbmctaSxpKSksbi5nemluZGV4PT09bi5nemhlYWQuZXh0cmEubGVuZ3RoJiYobi5nemluZGV4PTAsbi5zdGF0dXM9NzMpfWVsc2Ugbi5zdGF0dXM9NzM7aWYoNzM9PT1uLnN0YXR1cylpZihuLmd6aGVhZC5uYW1lKXtpPW4ucGVuZGluZztkb3tpZihuLnBlbmRpbmc9PT1uLnBlbmRpbmdfYnVmX3NpemUmJihuLmd6aGVhZC5oY3JjJiZuLnBlbmRpbmc+aSYmKGUuYWRsZXI9cChlLmFkbGVyLG4ucGVuZGluZ19idWYsbi5wZW5kaW5nLWksaSkpLEYoZSksaT1uLnBlbmRpbmcsbi5wZW5kaW5nPT09bi5wZW5kaW5nX2J1Zl9zaXplKSl7cz0xO2JyZWFrfXM9bi5nemluZGV4PG4uZ3poZWFkLm5hbWUubGVuZ3RoPzI1NSZuLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQobi5nemluZGV4KyspOjAsVShuLHMpfXdoaWxlKDAhPT1zKTtuLmd6aGVhZC5oY3JjJiZuLnBlbmRpbmc+aSYmKGUuYWRsZXI9cChlLmFkbGVyLG4ucGVuZGluZ19idWYsbi5wZW5kaW5nLWksaSkpLDA9PT1zJiYobi5nemluZGV4PTAsbi5zdGF0dXM9OTEpfWVsc2Ugbi5zdGF0dXM9OTE7aWYoOTE9PT1uLnN0YXR1cylpZihuLmd6aGVhZC5jb21tZW50KXtpPW4ucGVuZGluZztkb3tpZihuLnBlbmRpbmc9PT1uLnBlbmRpbmdfYnVmX3NpemUmJihuLmd6aGVhZC5oY3JjJiZuLnBlbmRpbmc+aSYmKGUuYWRsZXI9cChlLmFkbGVyLG4ucGVuZGluZ19idWYsbi5wZW5kaW5nLWksaSkpLEYoZSksaT1uLnBlbmRpbmcsbi5wZW5kaW5nPT09bi5wZW5kaW5nX2J1Zl9zaXplKSl7cz0xO2JyZWFrfXM9bi5nemluZGV4PG4uZ3poZWFkLmNvbW1lbnQubGVuZ3RoPzI1NSZuLmd6aGVhZC5jb21tZW50LmNoYXJDb2RlQXQobi5nemluZGV4KyspOjAsVShuLHMpfXdoaWxlKDAhPT1zKTtuLmd6aGVhZC5oY3JjJiZuLnBlbmRpbmc+aSYmKGUuYWRsZXI9cChlLmFkbGVyLG4ucGVuZGluZ19idWYsbi5wZW5kaW5nLWksaSkpLDA9PT1zJiYobi5zdGF0dXM9MTAzKX1lbHNlIG4uc3RhdHVzPTEwMztpZigxMDM9PT1uLnN0YXR1cyYmKG4uZ3poZWFkLmhjcmM/KG4ucGVuZGluZysyPm4ucGVuZGluZ19idWZfc2l6ZSYmRihlKSxuLnBlbmRpbmcrMjw9bi5wZW5kaW5nX2J1Zl9zaXplJiYoVShuLDI1NSZlLmFkbGVyKSxVKG4sZS5hZGxlcj4+OCYyNTUpLGUuYWRsZXI9MCxuLnN0YXR1cz1FKSk6bi5zdGF0dXM9RSksMCE9PW4ucGVuZGluZyl7aWYoRihlKSwwPT09ZS5hdmFpbF9vdXQpcmV0dXJuIG4ubGFzdF9mbHVzaD0tMSxtfWVsc2UgaWYoMD09PWUuYXZhaWxfaW4mJlQodCk8PVQocikmJnQhPT1mKXJldHVybiBSKGUsLTUpO2lmKDY2Nj09PW4uc3RhdHVzJiYwIT09ZS5hdmFpbF9pbilyZXR1cm4gUihlLC01KTtpZigwIT09ZS5hdmFpbF9pbnx8MCE9PW4ubG9va2FoZWFkfHx0IT09bCYmNjY2IT09bi5zdGF0dXMpe3ZhciBvPTI9PT1uLnN0cmF0ZWd5P2Z1bmN0aW9uKGUsdCl7Zm9yKHZhciByOzspe2lmKDA9PT1lLmxvb2thaGVhZCYmKGooZSksMD09PWUubG9va2FoZWFkKSl7aWYodD09PWwpcmV0dXJuIEE7YnJlYWt9aWYoZS5tYXRjaF9sZW5ndGg9MCxyPXUuX3RyX3RhbGx5KGUsMCxlLndpbmRvd1tlLnN0cnN0YXJ0XSksZS5sb29rYWhlYWQtLSxlLnN0cnN0YXJ0KyssciYmKE4oZSwhMSksMD09PWUuc3RybS5hdmFpbF9vdXQpKXJldHVybiBBfXJldHVybiBlLmluc2VydD0wLHQ9PT1mPyhOKGUsITApLDA9PT1lLnN0cm0uYXZhaWxfb3V0P086Qik6ZS5sYXN0X2xpdCYmKE4oZSwhMSksMD09PWUuc3RybS5hdmFpbF9vdXQpP0E6SX0obix0KTozPT09bi5zdHJhdGVneT9mdW5jdGlvbihlLHQpe2Zvcih2YXIgcixuLGkscyxhPWUud2luZG93Ozspe2lmKGUubG9va2FoZWFkPD1TKXtpZihqKGUpLGUubG9va2FoZWFkPD1TJiZ0PT09bClyZXR1cm4gQTtpZigwPT09ZS5sb29rYWhlYWQpYnJlYWt9aWYoZS5tYXRjaF9sZW5ndGg9MCxlLmxvb2thaGVhZD49eCYmMDxlLnN0cnN0YXJ0JiYobj1hW2k9ZS5zdHJzdGFydC0xXSk9PT1hWysraV0mJm49PT1hWysraV0mJm49PT1hWysraV0pe3M9ZS5zdHJzdGFydCtTO2Rve313aGlsZShuPT09YVsrK2ldJiZuPT09YVsrK2ldJiZuPT09YVsrK2ldJiZuPT09YVsrK2ldJiZuPT09YVsrK2ldJiZuPT09YVsrK2ldJiZuPT09YVsrK2ldJiZuPT09YVsrK2ldJiZpPHMpO2UubWF0Y2hfbGVuZ3RoPVMtKHMtaSksZS5tYXRjaF9sZW5ndGg+ZS5sb29rYWhlYWQmJihlLm1hdGNoX2xlbmd0aD1lLmxvb2thaGVhZCl9aWYoZS5tYXRjaF9sZW5ndGg+PXg/KHI9dS5fdHJfdGFsbHkoZSwxLGUubWF0Y2hfbGVuZ3RoLXgpLGUubG9va2FoZWFkLT1lLm1hdGNoX2xlbmd0aCxlLnN0cnN0YXJ0Kz1lLm1hdGNoX2xlbmd0aCxlLm1hdGNoX2xlbmd0aD0wKToocj11Ll90cl90YWxseShlLDAsZS53aW5kb3dbZS5zdHJzdGFydF0pLGUubG9va2FoZWFkLS0sZS5zdHJzdGFydCsrKSxyJiYoTihlLCExKSwwPT09ZS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIEF9cmV0dXJuIGUuaW5zZXJ0PTAsdD09PWY/KE4oZSwhMCksMD09PWUuc3RybS5hdmFpbF9vdXQ/TzpCKTplLmxhc3RfbGl0JiYoTihlLCExKSwwPT09ZS5zdHJtLmF2YWlsX291dCk/QTpJfShuLHQpOmhbbi5sZXZlbF0uZnVuYyhuLHQpO2lmKG8hPT1PJiZvIT09Qnx8KG4uc3RhdHVzPTY2Niksbz09PUF8fG89PT1PKXJldHVybiAwPT09ZS5hdmFpbF9vdXQmJihuLmxhc3RfZmx1c2g9LTEpLG07aWYobz09PUkmJigxPT09dD91Ll90cl9hbGlnbihuKTo1IT09dCYmKHUuX3RyX3N0b3JlZF9ibG9jayhuLDAsMCwhMSksMz09PXQmJihEKG4uaGVhZCksMD09PW4ubG9va2FoZWFkJiYobi5zdHJzdGFydD0wLG4uYmxvY2tfc3RhcnQ9MCxuLmluc2VydD0wKSkpLEYoZSksMD09PWUuYXZhaWxfb3V0KSlyZXR1cm4gbi5sYXN0X2ZsdXNoPS0xLG19cmV0dXJuIHQhPT1mP206bi53cmFwPD0wPzE6KDI9PT1uLndyYXA/KFUobiwyNTUmZS5hZGxlciksVShuLGUuYWRsZXI+PjgmMjU1KSxVKG4sZS5hZGxlcj4+MTYmMjU1KSxVKG4sZS5hZGxlcj4+MjQmMjU1KSxVKG4sMjU1JmUudG90YWxfaW4pLFUobixlLnRvdGFsX2luPj44JjI1NSksVShuLGUudG90YWxfaW4+PjE2JjI1NSksVShuLGUudG90YWxfaW4+PjI0JjI1NSkpOihQKG4sZS5hZGxlcj4+PjE2KSxQKG4sNjU1MzUmZS5hZGxlcikpLEYoZSksMDxuLndyYXAmJihuLndyYXA9LW4ud3JhcCksMCE9PW4ucGVuZGluZz9tOjEpfSxyLmRlZmxhdGVFbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUmJmUuc3RhdGU/KHQ9ZS5zdGF0ZS5zdGF0dXMpIT09QyYmNjkhPT10JiY3MyE9PXQmJjkxIT09dCYmMTAzIT09dCYmdCE9PUUmJjY2NiE9PXQ/UihlLF8pOihlLnN0YXRlPW51bGwsdD09PUU/UihlLC0zKTptKTpffSxyLmRlZmxhdGVTZXREaWN0aW9uYXJ5PWZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpLHMsYSxvLGgsdSxsPXQubGVuZ3RoO2lmKCFlfHwhZS5zdGF0ZSlyZXR1cm4gXztpZigyPT09KHM9KHI9ZS5zdGF0ZSkud3JhcCl8fDE9PT1zJiZyLnN0YXR1cyE9PUN8fHIubG9va2FoZWFkKXJldHVybiBfO2ZvcigxPT09cyYmKGUuYWRsZXI9ZChlLmFkbGVyLHQsbCwwKSksci53cmFwPTAsbD49ci53X3NpemUmJigwPT09cyYmKEQoci5oZWFkKSxyLnN0cnN0YXJ0PTAsci5ibG9ja19zdGFydD0wLHIuaW5zZXJ0PTApLHU9bmV3IGMuQnVmOChyLndfc2l6ZSksYy5hcnJheVNldCh1LHQsbC1yLndfc2l6ZSxyLndfc2l6ZSwwKSx0PXUsbD1yLndfc2l6ZSksYT1lLmF2YWlsX2luLG89ZS5uZXh0X2luLGg9ZS5pbnB1dCxlLmF2YWlsX2luPWwsZS5uZXh0X2luPTAsZS5pbnB1dD10LGoocik7ci5sb29rYWhlYWQ+PXg7KXtmb3Iobj1yLnN0cnN0YXJ0LGk9ci5sb29rYWhlYWQtKHgtMSk7ci5pbnNfaD0oci5pbnNfaDw8ci5oYXNoX3NoaWZ0XnIud2luZG93W24reC0xXSkmci5oYXNoX21hc2ssci5wcmV2W24mci53X21hc2tdPXIuaGVhZFtyLmluc19oXSxyLmhlYWRbci5pbnNfaF09bixuKyssLS1pOyk7ci5zdHJzdGFydD1uLHIubG9va2FoZWFkPXgtMSxqKHIpfXJldHVybiByLnN0cnN0YXJ0Kz1yLmxvb2thaGVhZCxyLmJsb2NrX3N0YXJ0PXIuc3Ryc3RhcnQsci5pbnNlcnQ9ci5sb29rYWhlYWQsci5sb29rYWhlYWQ9MCxyLm1hdGNoX2xlbmd0aD1yLnByZXZfbGVuZ3RoPXgtMSxyLm1hdGNoX2F2YWlsYWJsZT0wLGUubmV4dF9pbj1vLGUuaW5wdXQ9aCxlLmF2YWlsX2luPWEsci53cmFwPXMsbX0sci5kZWZsYXRlSW5mbz1cInBha28gZGVmbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdClcIn0se1wiLi4vdXRpbHMvY29tbW9uXCI6NDEsXCIuL2FkbGVyMzJcIjo0MyxcIi4vY3JjMzJcIjo0NSxcIi4vbWVzc2FnZXNcIjo1MSxcIi4vdHJlZXNcIjo1Mn1dLDQ3OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dGhpcy50ZXh0PTAsdGhpcy50aW1lPTAsdGhpcy54ZmxhZ3M9MCx0aGlzLm9zPTAsdGhpcy5leHRyYT1udWxsLHRoaXMuZXh0cmFfbGVuPTAsdGhpcy5uYW1lPVwiXCIsdGhpcy5jb21tZW50PVwiXCIsdGhpcy5oY3JjPTAsdGhpcy5kb25lPSExfX0se31dLDQ4OltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpLHMsYSxvLGgsdSxsLGYsYyxkLHAsbSxfLGcsYix2LHksdyxrLHgsUyx6LEM7cj1lLnN0YXRlLG49ZS5uZXh0X2luLHo9ZS5pbnB1dCxpPW4rKGUuYXZhaWxfaW4tNSkscz1lLm5leHRfb3V0LEM9ZS5vdXRwdXQsYT1zLSh0LWUuYXZhaWxfb3V0KSxvPXMrKGUuYXZhaWxfb3V0LTI1NyksaD1yLmRtYXgsdT1yLndzaXplLGw9ci53aGF2ZSxmPXIud25leHQsYz1yLndpbmRvdyxkPXIuaG9sZCxwPXIuYml0cyxtPXIubGVuY29kZSxfPXIuZGlzdGNvZGUsZz0oMTw8ci5sZW5iaXRzKS0xLGI9KDE8PHIuZGlzdGJpdHMpLTE7ZTpkb3twPDE1JiYoZCs9eltuKytdPDxwLHArPTgsZCs9eltuKytdPDxwLHArPTgpLHY9bVtkJmddO3Q6Zm9yKDs7KXtpZihkPj4+PXk9dj4+PjI0LHAtPXksMD09PSh5PXY+Pj4xNiYyNTUpKUNbcysrXT02NTUzNSZ2O2Vsc2V7aWYoISgxNiZ5KSl7aWYoMD09KDY0JnkpKXt2PW1bKDY1NTM1JnYpKyhkJigxPDx5KS0xKV07Y29udGludWUgdH1pZigzMiZ5KXtyLm1vZGU9MTI7YnJlYWsgZX1lLm1zZz1cImludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZVwiLHIubW9kZT0zMDticmVhayBlfXc9NjU1MzUmdiwoeSY9MTUpJiYocDx5JiYoZCs9eltuKytdPDxwLHArPTgpLHcrPWQmKDE8PHkpLTEsZD4+Pj15LHAtPXkpLHA8MTUmJihkKz16W24rK108PHAscCs9OCxkKz16W24rK108PHAscCs9OCksdj1fW2QmYl07cjpmb3IoOzspe2lmKGQ+Pj49eT12Pj4+MjQscC09eSwhKDE2Jih5PXY+Pj4xNiYyNTUpKSl7aWYoMD09KDY0JnkpKXt2PV9bKDY1NTM1JnYpKyhkJigxPDx5KS0xKV07Y29udGludWUgcn1lLm1zZz1cImludmFsaWQgZGlzdGFuY2UgY29kZVwiLHIubW9kZT0zMDticmVhayBlfWlmKGs9NjU1MzUmdixwPCh5Jj0xNSkmJihkKz16W24rK108PHAsKHArPTgpPHkmJihkKz16W24rK108PHAscCs9OCkpLGg8KGsrPWQmKDE8PHkpLTEpKXtlLm1zZz1cImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrXCIsci5tb2RlPTMwO2JyZWFrIGV9aWYoZD4+Pj15LHAtPXksKHk9cy1hKTxrKXtpZihsPCh5PWsteSkmJnIuc2FuZSl7ZS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFja1wiLHIubW9kZT0zMDticmVhayBlfWlmKFM9YywoeD0wKT09PWYpe2lmKHgrPXUteSx5PHcpe2Zvcih3LT15O0NbcysrXT1jW3grK10sLS15Oyk7eD1zLWssUz1DfX1lbHNlIGlmKGY8eSl7aWYoeCs9dStmLXksKHktPWYpPHcpe2Zvcih3LT15O0NbcysrXT1jW3grK10sLS15Oyk7aWYoeD0wLGY8dyl7Zm9yKHctPXk9ZjtDW3MrK109Y1t4KytdLC0teTspO3g9cy1rLFM9Q319fWVsc2UgaWYoeCs9Zi15LHk8dyl7Zm9yKHctPXk7Q1tzKytdPWNbeCsrXSwtLXk7KTt4PXMtayxTPUN9Zm9yKDsyPHc7KUNbcysrXT1TW3grK10sQ1tzKytdPVNbeCsrXSxDW3MrK109U1t4KytdLHctPTM7dyYmKENbcysrXT1TW3grK10sMTx3JiYoQ1tzKytdPVNbeCsrXSkpfWVsc2V7Zm9yKHg9cy1rO0NbcysrXT1DW3grK10sQ1tzKytdPUNbeCsrXSxDW3MrK109Q1t4KytdLDI8KHctPTMpOyk7dyYmKENbcysrXT1DW3grK10sMTx3JiYoQ1tzKytdPUNbeCsrXSkpfWJyZWFrfX1icmVha319d2hpbGUobjxpJiZzPG8pO24tPXc9cD4+MyxkJj0oMTw8KHAtPXc8PDMpKS0xLGUubmV4dF9pbj1uLGUubmV4dF9vdXQ9cyxlLmF2YWlsX2luPW48aT9pLW4rNTo1LShuLWkpLGUuYXZhaWxfb3V0PXM8bz9vLXMrMjU3OjI1Ny0ocy1vKSxyLmhvbGQ9ZCxyLmJpdHM9cH19LHt9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBJPWUoXCIuLi91dGlscy9jb21tb25cIiksTz1lKFwiLi9hZGxlcjMyXCIpLEI9ZShcIi4vY3JjMzJcIiksUj1lKFwiLi9pbmZmYXN0XCIpLFQ9ZShcIi4vaW5mdHJlZXNcIiksRD0xLEY9MixOPTAsVT0tMixQPTEsbj04NTIsaT01OTI7ZnVuY3Rpb24gTChlKXtyZXR1cm4oZT4+PjI0JjI1NSkrKGU+Pj44JjY1MjgwKSsoKDY1MjgwJmUpPDw4KSsoKDI1NSZlKTw8MjQpfWZ1bmN0aW9uIHMoKXt0aGlzLm1vZGU9MCx0aGlzLmxhc3Q9ITEsdGhpcy53cmFwPTAsdGhpcy5oYXZlZGljdD0hMSx0aGlzLmZsYWdzPTAsdGhpcy5kbWF4PTAsdGhpcy5jaGVjaz0wLHRoaXMudG90YWw9MCx0aGlzLmhlYWQ9bnVsbCx0aGlzLndiaXRzPTAsdGhpcy53c2l6ZT0wLHRoaXMud2hhdmU9MCx0aGlzLnduZXh0PTAsdGhpcy53aW5kb3c9bnVsbCx0aGlzLmhvbGQ9MCx0aGlzLmJpdHM9MCx0aGlzLmxlbmd0aD0wLHRoaXMub2Zmc2V0PTAsdGhpcy5leHRyYT0wLHRoaXMubGVuY29kZT1udWxsLHRoaXMuZGlzdGNvZGU9bnVsbCx0aGlzLmxlbmJpdHM9MCx0aGlzLmRpc3RiaXRzPTAsdGhpcy5uY29kZT0wLHRoaXMubmxlbj0wLHRoaXMubmRpc3Q9MCx0aGlzLmhhdmU9MCx0aGlzLm5leHQ9bnVsbCx0aGlzLmxlbnM9bmV3IEkuQnVmMTYoMzIwKSx0aGlzLndvcms9bmV3IEkuQnVmMTYoMjg4KSx0aGlzLmxlbmR5bj1udWxsLHRoaXMuZGlzdGR5bj1udWxsLHRoaXMuc2FuZT0wLHRoaXMuYmFjaz0wLHRoaXMud2FzPTB9ZnVuY3Rpb24gYShlKXt2YXIgdDtyZXR1cm4gZSYmZS5zdGF0ZT8odD1lLnN0YXRlLGUudG90YWxfaW49ZS50b3RhbF9vdXQ9dC50b3RhbD0wLGUubXNnPVwiXCIsdC53cmFwJiYoZS5hZGxlcj0xJnQud3JhcCksdC5tb2RlPVAsdC5sYXN0PTAsdC5oYXZlZGljdD0wLHQuZG1heD0zMjc2OCx0LmhlYWQ9bnVsbCx0LmhvbGQ9MCx0LmJpdHM9MCx0LmxlbmNvZGU9dC5sZW5keW49bmV3IEkuQnVmMzIobiksdC5kaXN0Y29kZT10LmRpc3RkeW49bmV3IEkuQnVmMzIoaSksdC5zYW5lPTEsdC5iYWNrPS0xLE4pOlV9ZnVuY3Rpb24gbyhlKXt2YXIgdDtyZXR1cm4gZSYmZS5zdGF0ZT8oKHQ9ZS5zdGF0ZSkud3NpemU9MCx0LndoYXZlPTAsdC53bmV4dD0wLGEoZSkpOlV9ZnVuY3Rpb24gaChlLHQpe3ZhciByLG47cmV0dXJuIGUmJmUuc3RhdGU/KG49ZS5zdGF0ZSx0PDA/KHI9MCx0PS10KToocj0xKyh0Pj40KSx0PDQ4JiYodCY9MTUpKSx0JiYodDw4fHwxNTx0KT9VOihudWxsIT09bi53aW5kb3cmJm4ud2JpdHMhPT10JiYobi53aW5kb3c9bnVsbCksbi53cmFwPXIsbi53Yml0cz10LG8oZSkpKTpVfWZ1bmN0aW9uIHUoZSx0KXt2YXIgcixuO3JldHVybiBlPyhuPW5ldyBzLChlLnN0YXRlPW4pLndpbmRvdz1udWxsLChyPWgoZSx0KSkhPT1OJiYoZS5zdGF0ZT1udWxsKSxyKTpVfXZhciBsLGYsYz0hMDtmdW5jdGlvbiBqKGUpe2lmKGMpe3ZhciB0O2ZvcihsPW5ldyBJLkJ1ZjMyKDUxMiksZj1uZXcgSS5CdWYzMigzMiksdD0wO3Q8MTQ0OyllLmxlbnNbdCsrXT04O2Zvcig7dDwyNTY7KWUubGVuc1t0KytdPTk7Zm9yKDt0PDI4MDspZS5sZW5zW3QrK109Nztmb3IoO3Q8Mjg4OyllLmxlbnNbdCsrXT04O2ZvcihUKEQsZS5sZW5zLDAsMjg4LGwsMCxlLndvcmsse2JpdHM6OX0pLHQ9MDt0PDMyOyllLmxlbnNbdCsrXT01O1QoRixlLmxlbnMsMCwzMixmLDAsZS53b3JrLHtiaXRzOjV9KSxjPSExfWUubGVuY29kZT1sLGUubGVuYml0cz05LGUuZGlzdGNvZGU9ZixlLmRpc3RiaXRzPTV9ZnVuY3Rpb24gWihlLHQscixuKXt2YXIgaSxzPWUuc3RhdGU7cmV0dXJuIG51bGw9PT1zLndpbmRvdyYmKHMud3NpemU9MTw8cy53Yml0cyxzLnduZXh0PTAscy53aGF2ZT0wLHMud2luZG93PW5ldyBJLkJ1Zjgocy53c2l6ZSkpLG4+PXMud3NpemU/KEkuYXJyYXlTZXQocy53aW5kb3csdCxyLXMud3NpemUscy53c2l6ZSwwKSxzLnduZXh0PTAscy53aGF2ZT1zLndzaXplKToobjwoaT1zLndzaXplLXMud25leHQpJiYoaT1uKSxJLmFycmF5U2V0KHMud2luZG93LHQsci1uLGkscy53bmV4dCksKG4tPWkpPyhJLmFycmF5U2V0KHMud2luZG93LHQsci1uLG4sMCkscy53bmV4dD1uLHMud2hhdmU9cy53c2l6ZSk6KHMud25leHQrPWkscy53bmV4dD09PXMud3NpemUmJihzLnduZXh0PTApLHMud2hhdmU8cy53c2l6ZSYmKHMud2hhdmUrPWkpKSksMH1yLmluZmxhdGVSZXNldD1vLHIuaW5mbGF0ZVJlc2V0Mj1oLHIuaW5mbGF0ZVJlc2V0S2VlcD1hLHIuaW5mbGF0ZUluaXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHUoZSwxNSl9LHIuaW5mbGF0ZUluaXQyPXUsci5pbmZsYXRlPWZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpLHMsYSxvLGgsdSxsLGYsYyxkLHAsbSxfLGcsYix2LHksdyxrLHgsUyx6LEM9MCxFPW5ldyBJLkJ1ZjgoNCksQT1bMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV07aWYoIWV8fCFlLnN0YXRlfHwhZS5vdXRwdXR8fCFlLmlucHV0JiYwIT09ZS5hdmFpbF9pbilyZXR1cm4gVTsxMj09PShyPWUuc3RhdGUpLm1vZGUmJihyLm1vZGU9MTMpLGE9ZS5uZXh0X291dCxpPWUub3V0cHV0LGg9ZS5hdmFpbF9vdXQscz1lLm5leHRfaW4sbj1lLmlucHV0LG89ZS5hdmFpbF9pbix1PXIuaG9sZCxsPXIuYml0cyxmPW8sYz1oLHg9TjtlOmZvcig7Oylzd2l0Y2goci5tb2RlKXtjYXNlIFA6aWYoMD09PXIud3JhcCl7ci5tb2RlPTEzO2JyZWFrfWZvcig7bDwxNjspe2lmKDA9PT1vKWJyZWFrIGU7by0tLHUrPW5bcysrXTw8bCxsKz04fWlmKDImci53cmFwJiYzNTYxNT09PXUpe0Vbci5jaGVjaz0wXT0yNTUmdSxFWzFdPXU+Pj44JjI1NSxyLmNoZWNrPUIoci5jaGVjayxFLDIsMCksbD11PTAsci5tb2RlPTI7YnJlYWt9aWYoci5mbGFncz0wLHIuaGVhZCYmKHIuaGVhZC5kb25lPSExKSwhKDEmci53cmFwKXx8KCgoMjU1JnUpPDw4KSsodT4+OCkpJTMxKXtlLm1zZz1cImluY29ycmVjdCBoZWFkZXIgY2hlY2tcIixyLm1vZGU9MzA7YnJlYWt9aWYoOCE9KDE1JnUpKXtlLm1zZz1cInVua25vd24gY29tcHJlc3Npb24gbWV0aG9kXCIsci5tb2RlPTMwO2JyZWFrfWlmKGwtPTQsaz04KygxNSYodT4+Pj00KSksMD09PXIud2JpdHMpci53Yml0cz1rO2Vsc2UgaWYoaz5yLndiaXRzKXtlLm1zZz1cImludmFsaWQgd2luZG93IHNpemVcIixyLm1vZGU9MzA7YnJlYWt9ci5kbWF4PTE8PGssZS5hZGxlcj1yLmNoZWNrPTEsci5tb2RlPTUxMiZ1PzEwOjEyLGw9dT0wO2JyZWFrO2Nhc2UgMjpmb3IoO2w8MTY7KXtpZigwPT09bylicmVhayBlO28tLSx1Kz1uW3MrK108PGwsbCs9OH1pZihyLmZsYWdzPXUsOCE9KDI1NSZyLmZsYWdzKSl7ZS5tc2c9XCJ1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZFwiLHIubW9kZT0zMDticmVha31pZig1NzM0NCZyLmZsYWdzKXtlLm1zZz1cInVua25vd24gaGVhZGVyIGZsYWdzIHNldFwiLHIubW9kZT0zMDticmVha31yLmhlYWQmJihyLmhlYWQudGV4dD11Pj44JjEpLDUxMiZyLmZsYWdzJiYoRVswXT0yNTUmdSxFWzFdPXU+Pj44JjI1NSxyLmNoZWNrPUIoci5jaGVjayxFLDIsMCkpLGw9dT0wLHIubW9kZT0zO2Nhc2UgMzpmb3IoO2w8MzI7KXtpZigwPT09bylicmVhayBlO28tLSx1Kz1uW3MrK108PGwsbCs9OH1yLmhlYWQmJihyLmhlYWQudGltZT11KSw1MTImci5mbGFncyYmKEVbMF09MjU1JnUsRVsxXT11Pj4+OCYyNTUsRVsyXT11Pj4+MTYmMjU1LEVbM109dT4+PjI0JjI1NSxyLmNoZWNrPUIoci5jaGVjayxFLDQsMCkpLGw9dT0wLHIubW9kZT00O2Nhc2UgNDpmb3IoO2w8MTY7KXtpZigwPT09bylicmVhayBlO28tLSx1Kz1uW3MrK108PGwsbCs9OH1yLmhlYWQmJihyLmhlYWQueGZsYWdzPTI1NSZ1LHIuaGVhZC5vcz11Pj44KSw1MTImci5mbGFncyYmKEVbMF09MjU1JnUsRVsxXT11Pj4+OCYyNTUsci5jaGVjaz1CKHIuY2hlY2ssRSwyLDApKSxsPXU9MCxyLm1vZGU9NTtjYXNlIDU6aWYoMTAyNCZyLmZsYWdzKXtmb3IoO2w8MTY7KXtpZigwPT09bylicmVhayBlO28tLSx1Kz1uW3MrK108PGwsbCs9OH1yLmxlbmd0aD11LHIuaGVhZCYmKHIuaGVhZC5leHRyYV9sZW49dSksNTEyJnIuZmxhZ3MmJihFWzBdPTI1NSZ1LEVbMV09dT4+PjgmMjU1LHIuY2hlY2s9QihyLmNoZWNrLEUsMiwwKSksbD11PTB9ZWxzZSByLmhlYWQmJihyLmhlYWQuZXh0cmE9bnVsbCk7ci5tb2RlPTY7Y2FzZSA2OmlmKDEwMjQmci5mbGFncyYmKG88KGQ9ci5sZW5ndGgpJiYoZD1vKSxkJiYoci5oZWFkJiYoaz1yLmhlYWQuZXh0cmFfbGVuLXIubGVuZ3RoLHIuaGVhZC5leHRyYXx8KHIuaGVhZC5leHRyYT1uZXcgQXJyYXkoci5oZWFkLmV4dHJhX2xlbikpLEkuYXJyYXlTZXQoci5oZWFkLmV4dHJhLG4scyxkLGspKSw1MTImci5mbGFncyYmKHIuY2hlY2s9QihyLmNoZWNrLG4sZCxzKSksby09ZCxzKz1kLHIubGVuZ3RoLT1kKSxyLmxlbmd0aCkpYnJlYWsgZTtyLmxlbmd0aD0wLHIubW9kZT03O2Nhc2UgNzppZigyMDQ4JnIuZmxhZ3Mpe2lmKDA9PT1vKWJyZWFrIGU7Zm9yKGQ9MDtrPW5bcytkKytdLHIuaGVhZCYmayYmci5sZW5ndGg8NjU1MzYmJihyLmhlYWQubmFtZSs9U3RyaW5nLmZyb21DaGFyQ29kZShrKSksayYmZDxvOyk7aWYoNTEyJnIuZmxhZ3MmJihyLmNoZWNrPUIoci5jaGVjayxuLGQscykpLG8tPWQscys9ZCxrKWJyZWFrIGV9ZWxzZSByLmhlYWQmJihyLmhlYWQubmFtZT1udWxsKTtyLmxlbmd0aD0wLHIubW9kZT04O2Nhc2UgODppZig0MDk2JnIuZmxhZ3Mpe2lmKDA9PT1vKWJyZWFrIGU7Zm9yKGQ9MDtrPW5bcytkKytdLHIuaGVhZCYmayYmci5sZW5ndGg8NjU1MzYmJihyLmhlYWQuY29tbWVudCs9U3RyaW5nLmZyb21DaGFyQ29kZShrKSksayYmZDxvOyk7aWYoNTEyJnIuZmxhZ3MmJihyLmNoZWNrPUIoci5jaGVjayxuLGQscykpLG8tPWQscys9ZCxrKWJyZWFrIGV9ZWxzZSByLmhlYWQmJihyLmhlYWQuY29tbWVudD1udWxsKTtyLm1vZGU9OTtjYXNlIDk6aWYoNTEyJnIuZmxhZ3Mpe2Zvcig7bDwxNjspe2lmKDA9PT1vKWJyZWFrIGU7by0tLHUrPW5bcysrXTw8bCxsKz04fWlmKHUhPT0oNjU1MzUmci5jaGVjaykpe2UubXNnPVwiaGVhZGVyIGNyYyBtaXNtYXRjaFwiLHIubW9kZT0zMDticmVha31sPXU9MH1yLmhlYWQmJihyLmhlYWQuaGNyYz1yLmZsYWdzPj45JjEsci5oZWFkLmRvbmU9ITApLGUuYWRsZXI9ci5jaGVjaz0wLHIubW9kZT0xMjticmVhaztjYXNlIDEwOmZvcig7bDwzMjspe2lmKDA9PT1vKWJyZWFrIGU7by0tLHUrPW5bcysrXTw8bCxsKz04fWUuYWRsZXI9ci5jaGVjaz1MKHUpLGw9dT0wLHIubW9kZT0xMTtjYXNlIDExOmlmKDA9PT1yLmhhdmVkaWN0KXJldHVybiBlLm5leHRfb3V0PWEsZS5hdmFpbF9vdXQ9aCxlLm5leHRfaW49cyxlLmF2YWlsX2luPW8sci5ob2xkPXUsci5iaXRzPWwsMjtlLmFkbGVyPXIuY2hlY2s9MSxyLm1vZGU9MTI7Y2FzZSAxMjppZig1PT09dHx8Nj09PXQpYnJlYWsgZTtjYXNlIDEzOmlmKHIubGFzdCl7dT4+Pj03JmwsbC09NyZsLHIubW9kZT0yNzticmVha31mb3IoO2w8Mzspe2lmKDA9PT1vKWJyZWFrIGU7by0tLHUrPW5bcysrXTw8bCxsKz04fXN3aXRjaChyLmxhc3Q9MSZ1LGwtPTEsMyYodT4+Pj0xKSl7Y2FzZSAwOnIubW9kZT0xNDticmVhaztjYXNlIDE6aWYoaihyKSxyLm1vZGU9MjAsNiE9PXQpYnJlYWs7dT4+Pj0yLGwtPTI7YnJlYWsgZTtjYXNlIDI6ci5tb2RlPTE3O2JyZWFrO2Nhc2UgMzplLm1zZz1cImludmFsaWQgYmxvY2sgdHlwZVwiLHIubW9kZT0zMH11Pj4+PTIsbC09MjticmVhaztjYXNlIDE0OmZvcih1Pj4+PTcmbCxsLT03Jmw7bDwzMjspe2lmKDA9PT1vKWJyZWFrIGU7by0tLHUrPW5bcysrXTw8bCxsKz04fWlmKCg2NTUzNSZ1KSE9KHU+Pj4xNl42NTUzNSkpe2UubXNnPVwiaW52YWxpZCBzdG9yZWQgYmxvY2sgbGVuZ3Roc1wiLHIubW9kZT0zMDticmVha31pZihyLmxlbmd0aD02NTUzNSZ1LGw9dT0wLHIubW9kZT0xNSw2PT09dClicmVhayBlO2Nhc2UgMTU6ci5tb2RlPTE2O2Nhc2UgMTY6aWYoZD1yLmxlbmd0aCl7aWYobzxkJiYoZD1vKSxoPGQmJihkPWgpLDA9PT1kKWJyZWFrIGU7SS5hcnJheVNldChpLG4scyxkLGEpLG8tPWQscys9ZCxoLT1kLGErPWQsci5sZW5ndGgtPWQ7YnJlYWt9ci5tb2RlPTEyO2JyZWFrO2Nhc2UgMTc6Zm9yKDtsPDE0Oyl7aWYoMD09PW8pYnJlYWsgZTtvLS0sdSs9bltzKytdPDxsLGwrPTh9aWYoci5ubGVuPTI1NysoMzEmdSksdT4+Pj01LGwtPTUsci5uZGlzdD0xKygzMSZ1KSx1Pj4+PTUsbC09NSxyLm5jb2RlPTQrKDE1JnUpLHU+Pj49NCxsLT00LDI4NjxyLm5sZW58fDMwPHIubmRpc3Qpe2UubXNnPVwidG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIHN5bWJvbHNcIixyLm1vZGU9MzA7YnJlYWt9ci5oYXZlPTAsci5tb2RlPTE4O2Nhc2UgMTg6Zm9yKDtyLmhhdmU8ci5uY29kZTspe2Zvcig7bDwzOyl7aWYoMD09PW8pYnJlYWsgZTtvLS0sdSs9bltzKytdPDxsLGwrPTh9ci5sZW5zW0Fbci5oYXZlKytdXT03JnUsdT4+Pj0zLGwtPTN9Zm9yKDtyLmhhdmU8MTk7KXIubGVuc1tBW3IuaGF2ZSsrXV09MDtpZihyLmxlbmNvZGU9ci5sZW5keW4sci5sZW5iaXRzPTcsUz17Yml0czpyLmxlbmJpdHN9LHg9VCgwLHIubGVucywwLDE5LHIubGVuY29kZSwwLHIud29yayxTKSxyLmxlbmJpdHM9Uy5iaXRzLHgpe2UubXNnPVwiaW52YWxpZCBjb2RlIGxlbmd0aHMgc2V0XCIsci5tb2RlPTMwO2JyZWFrfXIuaGF2ZT0wLHIubW9kZT0xOTtjYXNlIDE5OmZvcig7ci5oYXZlPHIubmxlbityLm5kaXN0Oyl7Zm9yKDtnPShDPXIubGVuY29kZVt1JigxPDxyLmxlbmJpdHMpLTFdKT4+PjE2JjI1NSxiPTY1NTM1JkMsISgoXz1DPj4+MjQpPD1sKTspe2lmKDA9PT1vKWJyZWFrIGU7by0tLHUrPW5bcysrXTw8bCxsKz04fWlmKGI8MTYpdT4+Pj1fLGwtPV8sci5sZW5zW3IuaGF2ZSsrXT1iO2Vsc2V7aWYoMTY9PT1iKXtmb3Ioej1fKzI7bDx6Oyl7aWYoMD09PW8pYnJlYWsgZTtvLS0sdSs9bltzKytdPDxsLGwrPTh9aWYodT4+Pj1fLGwtPV8sMD09PXIuaGF2ZSl7ZS5tc2c9XCJpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0XCIsci5tb2RlPTMwO2JyZWFrfWs9ci5sZW5zW3IuaGF2ZS0xXSxkPTMrKDMmdSksdT4+Pj0yLGwtPTJ9ZWxzZSBpZigxNz09PWIpe2Zvcih6PV8rMztsPHo7KXtpZigwPT09bylicmVhayBlO28tLSx1Kz1uW3MrK108PGwsbCs9OH1sLT1fLGs9MCxkPTMrKDcmKHU+Pj49XykpLHU+Pj49MyxsLT0zfWVsc2V7Zm9yKHo9Xys3O2w8ejspe2lmKDA9PT1vKWJyZWFrIGU7by0tLHUrPW5bcysrXTw8bCxsKz04fWwtPV8saz0wLGQ9MTErKDEyNyYodT4+Pj1fKSksdT4+Pj03LGwtPTd9aWYoci5oYXZlK2Q+ci5ubGVuK3IubmRpc3Qpe2UubXNnPVwiaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdFwiLHIubW9kZT0zMDticmVha31mb3IoO2QtLTspci5sZW5zW3IuaGF2ZSsrXT1rfX1pZigzMD09PXIubW9kZSlicmVhaztpZigwPT09ci5sZW5zWzI1Nl0pe2UubXNnPVwiaW52YWxpZCBjb2RlIC0tIG1pc3NpbmcgZW5kLW9mLWJsb2NrXCIsci5tb2RlPTMwO2JyZWFrfWlmKHIubGVuYml0cz05LFM9e2JpdHM6ci5sZW5iaXRzfSx4PVQoRCxyLmxlbnMsMCxyLm5sZW4sci5sZW5jb2RlLDAsci53b3JrLFMpLHIubGVuYml0cz1TLmJpdHMseCl7ZS5tc2c9XCJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RocyBzZXRcIixyLm1vZGU9MzA7YnJlYWt9aWYoci5kaXN0Yml0cz02LHIuZGlzdGNvZGU9ci5kaXN0ZHluLFM9e2JpdHM6ci5kaXN0Yml0c30seD1UKEYsci5sZW5zLHIubmxlbixyLm5kaXN0LHIuZGlzdGNvZGUsMCxyLndvcmssUyksci5kaXN0Yml0cz1TLmJpdHMseCl7ZS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlcyBzZXRcIixyLm1vZGU9MzA7YnJlYWt9aWYoci5tb2RlPTIwLDY9PT10KWJyZWFrIGU7Y2FzZSAyMDpyLm1vZGU9MjE7Y2FzZSAyMTppZig2PD1vJiYyNTg8PWgpe2UubmV4dF9vdXQ9YSxlLmF2YWlsX291dD1oLGUubmV4dF9pbj1zLGUuYXZhaWxfaW49byxyLmhvbGQ9dSxyLmJpdHM9bCxSKGUsYyksYT1lLm5leHRfb3V0LGk9ZS5vdXRwdXQsaD1lLmF2YWlsX291dCxzPWUubmV4dF9pbixuPWUuaW5wdXQsbz1lLmF2YWlsX2luLHU9ci5ob2xkLGw9ci5iaXRzLDEyPT09ci5tb2RlJiYoci5iYWNrPS0xKTticmVha31mb3Ioci5iYWNrPTA7Zz0oQz1yLmxlbmNvZGVbdSYoMTw8ci5sZW5iaXRzKS0xXSk+Pj4xNiYyNTUsYj02NTUzNSZDLCEoKF89Qz4+PjI0KTw9bCk7KXtpZigwPT09bylicmVhayBlO28tLSx1Kz1uW3MrK108PGwsbCs9OH1pZihnJiYwPT0oMjQwJmcpKXtmb3Iodj1fLHk9Zyx3PWI7Zz0oQz1yLmxlbmNvZGVbdysoKHUmKDE8PHYreSktMSk+PnYpXSk+Pj4xNiYyNTUsYj02NTUzNSZDLCEodisoXz1DPj4+MjQpPD1sKTspe2lmKDA9PT1vKWJyZWFrIGU7by0tLHUrPW5bcysrXTw8bCxsKz04fXU+Pj49dixsLT12LHIuYmFjays9dn1pZih1Pj4+PV8sbC09XyxyLmJhY2srPV8sci5sZW5ndGg9YiwwPT09Zyl7ci5tb2RlPTI2O2JyZWFrfWlmKDMyJmcpe3IuYmFjaz0tMSxyLm1vZGU9MTI7YnJlYWt9aWYoNjQmZyl7ZS5tc2c9XCJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGVcIixyLm1vZGU9MzA7YnJlYWt9ci5leHRyYT0xNSZnLHIubW9kZT0yMjtjYXNlIDIyOmlmKHIuZXh0cmEpe2Zvcih6PXIuZXh0cmE7bDx6Oyl7aWYoMD09PW8pYnJlYWsgZTtvLS0sdSs9bltzKytdPDxsLGwrPTh9ci5sZW5ndGgrPXUmKDE8PHIuZXh0cmEpLTEsdT4+Pj1yLmV4dHJhLGwtPXIuZXh0cmEsci5iYWNrKz1yLmV4dHJhfXIud2FzPXIubGVuZ3RoLHIubW9kZT0yMztjYXNlIDIzOmZvcig7Zz0oQz1yLmRpc3Rjb2RlW3UmKDE8PHIuZGlzdGJpdHMpLTFdKT4+PjE2JjI1NSxiPTY1NTM1JkMsISgoXz1DPj4+MjQpPD1sKTspe2lmKDA9PT1vKWJyZWFrIGU7by0tLHUrPW5bcysrXTw8bCxsKz04fWlmKDA9PSgyNDAmZykpe2Zvcih2PV8seT1nLHc9YjtnPShDPXIuZGlzdGNvZGVbdysoKHUmKDE8PHYreSktMSk+PnYpXSk+Pj4xNiYyNTUsYj02NTUzNSZDLCEodisoXz1DPj4+MjQpPD1sKTspe2lmKDA9PT1vKWJyZWFrIGU7by0tLHUrPW5bcysrXTw8bCxsKz04fXU+Pj49dixsLT12LHIuYmFjays9dn1pZih1Pj4+PV8sbC09XyxyLmJhY2srPV8sNjQmZyl7ZS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIGNvZGVcIixyLm1vZGU9MzA7YnJlYWt9ci5vZmZzZXQ9YixyLmV4dHJhPTE1Jmcsci5tb2RlPTI0O2Nhc2UgMjQ6aWYoci5leHRyYSl7Zm9yKHo9ci5leHRyYTtsPHo7KXtpZigwPT09bylicmVhayBlO28tLSx1Kz1uW3MrK108PGwsbCs9OH1yLm9mZnNldCs9dSYoMTw8ci5leHRyYSktMSx1Pj4+PXIuZXh0cmEsbC09ci5leHRyYSxyLmJhY2srPXIuZXh0cmF9aWYoci5vZmZzZXQ+ci5kbWF4KXtlLm1zZz1cImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrXCIsci5tb2RlPTMwO2JyZWFrfXIubW9kZT0yNTtjYXNlIDI1OmlmKDA9PT1oKWJyZWFrIGU7aWYoZD1jLWgsci5vZmZzZXQ+ZCl7aWYoKGQ9ci5vZmZzZXQtZCk+ci53aGF2ZSYmci5zYW5lKXtlLm1zZz1cImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrXCIsci5tb2RlPTMwO2JyZWFrfXA9ZD5yLnduZXh0PyhkLT1yLnduZXh0LHIud3NpemUtZCk6ci53bmV4dC1kLGQ+ci5sZW5ndGgmJihkPXIubGVuZ3RoKSxtPXIud2luZG93fWVsc2UgbT1pLHA9YS1yLm9mZnNldCxkPXIubGVuZ3RoO2ZvcihoPGQmJihkPWgpLGgtPWQsci5sZW5ndGgtPWQ7aVthKytdPW1bcCsrXSwtLWQ7KTswPT09ci5sZW5ndGgmJihyLm1vZGU9MjEpO2JyZWFrO2Nhc2UgMjY6aWYoMD09PWgpYnJlYWsgZTtpW2ErK109ci5sZW5ndGgsaC0tLHIubW9kZT0yMTticmVhaztjYXNlIDI3OmlmKHIud3JhcCl7Zm9yKDtsPDMyOyl7aWYoMD09PW8pYnJlYWsgZTtvLS0sdXw9bltzKytdPDxsLGwrPTh9aWYoYy09aCxlLnRvdGFsX291dCs9YyxyLnRvdGFsKz1jLGMmJihlLmFkbGVyPXIuY2hlY2s9ci5mbGFncz9CKHIuY2hlY2ssaSxjLGEtYyk6TyhyLmNoZWNrLGksYyxhLWMpKSxjPWgsKHIuZmxhZ3M/dTpMKHUpKSE9PXIuY2hlY2spe2UubXNnPVwiaW5jb3JyZWN0IGRhdGEgY2hlY2tcIixyLm1vZGU9MzA7YnJlYWt9bD11PTB9ci5tb2RlPTI4O2Nhc2UgMjg6aWYoci53cmFwJiZyLmZsYWdzKXtmb3IoO2w8MzI7KXtpZigwPT09bylicmVhayBlO28tLSx1Kz1uW3MrK108PGwsbCs9OH1pZih1IT09KDQyOTQ5NjcyOTUmci50b3RhbCkpe2UubXNnPVwiaW5jb3JyZWN0IGxlbmd0aCBjaGVja1wiLHIubW9kZT0zMDticmVha31sPXU9MH1yLm1vZGU9Mjk7Y2FzZSAyOTp4PTE7YnJlYWsgZTtjYXNlIDMwOng9LTM7YnJlYWsgZTtjYXNlIDMxOnJldHVybi00O2Nhc2UgMzI6ZGVmYXVsdDpyZXR1cm4gVX1yZXR1cm4gZS5uZXh0X291dD1hLGUuYXZhaWxfb3V0PWgsZS5uZXh0X2luPXMsZS5hdmFpbF9pbj1vLHIuaG9sZD11LHIuYml0cz1sLChyLndzaXplfHxjIT09ZS5hdmFpbF9vdXQmJnIubW9kZTwzMCYmKHIubW9kZTwyN3x8NCE9PXQpKSYmWihlLGUub3V0cHV0LGUubmV4dF9vdXQsYy1lLmF2YWlsX291dCk/KHIubW9kZT0zMSwtNCk6KGYtPWUuYXZhaWxfaW4sYy09ZS5hdmFpbF9vdXQsZS50b3RhbF9pbis9ZixlLnRvdGFsX291dCs9YyxyLnRvdGFsKz1jLHIud3JhcCYmYyYmKGUuYWRsZXI9ci5jaGVjaz1yLmZsYWdzP0Ioci5jaGVjayxpLGMsZS5uZXh0X291dC1jKTpPKHIuY2hlY2ssaSxjLGUubmV4dF9vdXQtYykpLGUuZGF0YV90eXBlPXIuYml0cysoci5sYXN0PzY0OjApKygxMj09PXIubW9kZT8xMjg6MCkrKDIwPT09ci5tb2RlfHwxNT09PXIubW9kZT8yNTY6MCksKDA9PWYmJjA9PT1jfHw0PT09dCkmJng9PT1OJiYoeD0tNSkseCl9LHIuaW5mbGF0ZUVuZD1mdW5jdGlvbihlKXtpZighZXx8IWUuc3RhdGUpcmV0dXJuIFU7dmFyIHQ9ZS5zdGF0ZTtyZXR1cm4gdC53aW5kb3cmJih0LndpbmRvdz1udWxsKSxlLnN0YXRlPW51bGwsTn0sci5pbmZsYXRlR2V0SGVhZGVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI7cmV0dXJuIGUmJmUuc3RhdGU/MD09KDImKHI9ZS5zdGF0ZSkud3JhcCk/VTooKHIuaGVhZD10KS5kb25lPSExLE4pOlV9LHIuaW5mbGF0ZVNldERpY3Rpb25hcnk9ZnVuY3Rpb24oZSx0KXt2YXIgcixuPXQubGVuZ3RoO3JldHVybiBlJiZlLnN0YXRlPzAhPT0ocj1lLnN0YXRlKS53cmFwJiYxMSE9PXIubW9kZT9VOjExPT09ci5tb2RlJiZPKDEsdCxuLDApIT09ci5jaGVjaz8tMzpaKGUsdCxuLG4pPyhyLm1vZGU9MzEsLTQpOihyLmhhdmVkaWN0PTEsTik6VX0sci5pbmZsYXRlSW5mbz1cInBha28gaW5mbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdClcIn0se1wiLi4vdXRpbHMvY29tbW9uXCI6NDEsXCIuL2FkbGVyMzJcIjo0MyxcIi4vY3JjMzJcIjo0NSxcIi4vaW5mZmFzdFwiOjQ4LFwiLi9pbmZ0cmVlc1wiOjUwfV0sNTA6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgRD1lKFwiLi4vdXRpbHMvY29tbW9uXCIpLEY9WzMsNCw1LDYsNyw4LDksMTAsMTEsMTMsMTUsMTcsMTksMjMsMjcsMzEsMzUsNDMsNTEsNTksNjcsODMsOTksMTE1LDEzMSwxNjMsMTk1LDIyNywyNTgsMCwwXSxOPVsxNiwxNiwxNiwxNiwxNiwxNiwxNiwxNiwxNywxNywxNywxNywxOCwxOCwxOCwxOCwxOSwxOSwxOSwxOSwyMCwyMCwyMCwyMCwyMSwyMSwyMSwyMSwxNiw3Miw3OF0sVT1bMSwyLDMsNCw1LDcsOSwxMywxNywyNSwzMyw0OSw2NSw5NywxMjksMTkzLDI1NywzODUsNTEzLDc2OSwxMDI1LDE1MzcsMjA0OSwzMDczLDQwOTcsNjE0NSw4MTkzLDEyMjg5LDE2Mzg1LDI0NTc3LDAsMF0sUD1bMTYsMTYsMTYsMTYsMTcsMTcsMTgsMTgsMTksMTksMjAsMjAsMjEsMjEsMjIsMjIsMjMsMjMsMjQsMjQsMjUsMjUsMjYsMjYsMjcsMjcsMjgsMjgsMjksMjksNjQsNjRdO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuLGkscyxhLG8pe3ZhciBoLHUsbCxmLGMsZCxwLG0sXyxnPW8uYml0cyxiPTAsdj0wLHk9MCx3PTAsaz0wLHg9MCxTPTAsej0wLEM9MCxFPTAsQT1udWxsLEk9MCxPPW5ldyBELkJ1ZjE2KDE2KSxCPW5ldyBELkJ1ZjE2KDE2KSxSPW51bGwsVD0wO2ZvcihiPTA7Yjw9MTU7YisrKU9bYl09MDtmb3Iodj0wO3Y8bjt2KyspT1t0W3Irdl1dKys7Zm9yKGs9Zyx3PTE1OzE8PXcmJjA9PT1PW3ddO3ctLSk7aWYodzxrJiYoaz13KSwwPT09dylyZXR1cm4gaVtzKytdPTIwOTcxNTIwLGlbcysrXT0yMDk3MTUyMCxvLmJpdHM9MSwwO2Zvcih5PTE7eTx3JiYwPT09T1t5XTt5KyspO2ZvcihrPHkmJihrPXkpLGI9ej0xO2I8PTE1O2IrKylpZih6PDw9MSwoei09T1tiXSk8MClyZXR1cm4tMTtpZigwPHomJigwPT09ZXx8MSE9PXcpKXJldHVybi0xO2ZvcihCWzFdPTAsYj0xO2I8MTU7YisrKUJbYisxXT1CW2JdK09bYl07Zm9yKHY9MDt2PG47disrKTAhPT10W3Irdl0mJihhW0JbdFtyK3ZdXSsrXT12KTtpZihkPTA9PT1lPyhBPVI9YSwxOSk6MT09PWU/KEE9RixJLT0yNTcsUj1OLFQtPTI1NywyNTYpOihBPVUsUj1QLC0xKSxiPXksYz1zLFM9dj1FPTAsbD0tMSxmPShDPTE8PCh4PWspKS0xLDE9PT1lJiY4NTI8Q3x8Mj09PWUmJjU5MjxDKXJldHVybiAxO2Zvcig7Oyl7Zm9yKHA9Yi1TLF89YVt2XTxkPyhtPTAsYVt2XSk6YVt2XT5kPyhtPVJbVCthW3ZdXSxBW0krYVt2XV0pOihtPTk2LDApLGg9MTw8Yi1TLHk9dT0xPDx4O2lbYysoRT4+UykrKHUtPWgpXT1wPDwyNHxtPDwxNnxffDAsMCE9PXU7KTtmb3IoaD0xPDxiLTE7RSZoOyloPj49MTtpZigwIT09aD8oRSY9aC0xLEUrPWgpOkU9MCx2KyssMD09LS1PW2JdKXtpZihiPT09dylicmVhaztiPXRbcithW3ZdXX1pZihrPGImJihFJmYpIT09bCl7Zm9yKDA9PT1TJiYoUz1rKSxjKz15LHo9MTw8KHg9Yi1TKTt4K1M8dyYmISgoei09T1t4K1NdKTw9MCk7KXgrKyx6PDw9MTtpZihDKz0xPDx4LDE9PT1lJiY4NTI8Q3x8Mj09PWUmJjU5MjxDKXJldHVybiAxO2lbbD1FJmZdPWs8PDI0fHg8PDE2fGMtc3wwfX1yZXR1cm4gMCE9PUUmJihpW2MrRV09Yi1TPDwyNHw2NDw8MTZ8MCksby5iaXRzPWssMH19LHtcIi4uL3V0aWxzL2NvbW1vblwiOjQxfV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9ezI6XCJuZWVkIGRpY3Rpb25hcnlcIiwxOlwic3RyZWFtIGVuZFwiLDA6XCJcIixcIi0xXCI6XCJmaWxlIGVycm9yXCIsXCItMlwiOlwic3RyZWFtIGVycm9yXCIsXCItM1wiOlwiZGF0YSBlcnJvclwiLFwiLTRcIjpcImluc3VmZmljaWVudCBtZW1vcnlcIixcIi01XCI6XCJidWZmZXIgZXJyb3JcIixcIi02XCI6XCJpbmNvbXBhdGlibGUgdmVyc2lvblwifX0se31dLDUyOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZShcIi4uL3V0aWxzL2NvbW1vblwiKSxvPTAsaD0xO2Z1bmN0aW9uIG4oZSl7Zm9yKHZhciB0PWUubGVuZ3RoOzA8PS0tdDspZVt0XT0wfXZhciBzPTAsYT0yOSx1PTI1NixsPXUrMSthLGY9MzAsYz0xOSxfPTIqbCsxLGc9MTUsZD0xNixwPTcsbT0yNTYsYj0xNix2PTE3LHk9MTgsdz1bMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwXSxrPVswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzXSx4PVswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDIsMyw3XSxTPVsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSx6PW5ldyBBcnJheSgyKihsKzIpKTtuKHopO3ZhciBDPW5ldyBBcnJheSgyKmYpO24oQyk7dmFyIEU9bmV3IEFycmF5KDUxMik7bihFKTt2YXIgQT1uZXcgQXJyYXkoMjU2KTtuKEEpO3ZhciBJPW5ldyBBcnJheShhKTtuKEkpO3ZhciBPLEIsUixUPW5ldyBBcnJheShmKTtmdW5jdGlvbiBEKGUsdCxyLG4saSl7dGhpcy5zdGF0aWNfdHJlZT1lLHRoaXMuZXh0cmFfYml0cz10LHRoaXMuZXh0cmFfYmFzZT1yLHRoaXMuZWxlbXM9bix0aGlzLm1heF9sZW5ndGg9aSx0aGlzLmhhc19zdHJlZT1lJiZlLmxlbmd0aH1mdW5jdGlvbiBGKGUsdCl7dGhpcy5keW5fdHJlZT1lLHRoaXMubWF4X2NvZGU9MCx0aGlzLnN0YXRfZGVzYz10fWZ1bmN0aW9uIE4oZSl7cmV0dXJuIGU8MjU2P0VbZV06RVsyNTYrKGU+Pj43KV19ZnVuY3Rpb24gVShlLHQpe2UucGVuZGluZ19idWZbZS5wZW5kaW5nKytdPTI1NSZ0LGUucGVuZGluZ19idWZbZS5wZW5kaW5nKytdPXQ+Pj44JjI1NX1mdW5jdGlvbiBQKGUsdCxyKXtlLmJpX3ZhbGlkPmQtcj8oZS5iaV9idWZ8PXQ8PGUuYmlfdmFsaWQmNjU1MzUsVShlLGUuYmlfYnVmKSxlLmJpX2J1Zj10Pj5kLWUuYmlfdmFsaWQsZS5iaV92YWxpZCs9ci1kKTooZS5iaV9idWZ8PXQ8PGUuYmlfdmFsaWQmNjU1MzUsZS5iaV92YWxpZCs9cil9ZnVuY3Rpb24gTChlLHQscil7UChlLHJbMip0XSxyWzIqdCsxXSl9ZnVuY3Rpb24gaihlLHQpe2Zvcih2YXIgcj0wO3J8PTEmZSxlPj4+PTEscjw8PTEsMDwtLXQ7KTtyZXR1cm4gcj4+PjF9ZnVuY3Rpb24gWihlLHQscil7dmFyIG4saSxzPW5ldyBBcnJheShnKzEpLGE9MDtmb3Iobj0xO248PWc7bisrKXNbbl09YT1hK3Jbbi0xXTw8MTtmb3IoaT0wO2k8PXQ7aSsrKXt2YXIgbz1lWzIqaSsxXTswIT09byYmKGVbMippXT1qKHNbb10rKyxvKSl9fWZ1bmN0aW9uIFcoZSl7dmFyIHQ7Zm9yKHQ9MDt0PGw7dCsrKWUuZHluX2x0cmVlWzIqdF09MDtmb3IodD0wO3Q8Zjt0KyspZS5keW5fZHRyZWVbMip0XT0wO2Zvcih0PTA7dDxjO3QrKyllLmJsX3RyZWVbMip0XT0wO2UuZHluX2x0cmVlWzIqbV09MSxlLm9wdF9sZW49ZS5zdGF0aWNfbGVuPTAsZS5sYXN0X2xpdD1lLm1hdGNoZXM9MH1mdW5jdGlvbiBNKGUpezg8ZS5iaV92YWxpZD9VKGUsZS5iaV9idWYpOjA8ZS5iaV92YWxpZCYmKGUucGVuZGluZ19idWZbZS5wZW5kaW5nKytdPWUuYmlfYnVmKSxlLmJpX2J1Zj0wLGUuYmlfdmFsaWQ9MH1mdW5jdGlvbiBIKGUsdCxyLG4pe3ZhciBpPTIqdCxzPTIqcjtyZXR1cm4gZVtpXTxlW3NdfHxlW2ldPT09ZVtzXSYmblt0XTw9bltyXX1mdW5jdGlvbiBHKGUsdCxyKXtmb3IodmFyIG49ZS5oZWFwW3JdLGk9cjw8MTtpPD1lLmhlYXBfbGVuJiYoaTxlLmhlYXBfbGVuJiZIKHQsZS5oZWFwW2krMV0sZS5oZWFwW2ldLGUuZGVwdGgpJiZpKyssIUgodCxuLGUuaGVhcFtpXSxlLmRlcHRoKSk7KWUuaGVhcFtyXT1lLmhlYXBbaV0scj1pLGk8PD0xO2UuaGVhcFtyXT1ufWZ1bmN0aW9uIEsoZSx0LHIpe3ZhciBuLGkscyxhLG89MDtpZigwIT09ZS5sYXN0X2xpdClmb3IoO249ZS5wZW5kaW5nX2J1ZltlLmRfYnVmKzIqb108PDh8ZS5wZW5kaW5nX2J1ZltlLmRfYnVmKzIqbysxXSxpPWUucGVuZGluZ19idWZbZS5sX2J1ZitvXSxvKyssMD09PW4/TChlLGksdCk6KEwoZSwocz1BW2ldKSt1KzEsdCksMCE9PShhPXdbc10pJiZQKGUsaS09SVtzXSxhKSxMKGUscz1OKC0tbiksciksMCE9PShhPWtbc10pJiZQKGUsbi09VFtzXSxhKSksbzxlLmxhc3RfbGl0Oyk7TChlLG0sdCl9ZnVuY3Rpb24gWShlLHQpe3ZhciByLG4saSxzPXQuZHluX3RyZWUsYT10LnN0YXRfZGVzYy5zdGF0aWNfdHJlZSxvPXQuc3RhdF9kZXNjLmhhc19zdHJlZSxoPXQuc3RhdF9kZXNjLmVsZW1zLHU9LTE7Zm9yKGUuaGVhcF9sZW49MCxlLmhlYXBfbWF4PV8scj0wO3I8aDtyKyspMCE9PXNbMipyXT8oZS5oZWFwWysrZS5oZWFwX2xlbl09dT1yLGUuZGVwdGhbcl09MCk6c1syKnIrMV09MDtmb3IoO2UuaGVhcF9sZW48Mjspc1syKihpPWUuaGVhcFsrK2UuaGVhcF9sZW5dPXU8Mj8rK3U6MCldPTEsZS5kZXB0aFtpXT0wLGUub3B0X2xlbi0tLG8mJihlLnN0YXRpY19sZW4tPWFbMippKzFdKTtmb3IodC5tYXhfY29kZT11LHI9ZS5oZWFwX2xlbj4+MTsxPD1yO3ItLSlHKGUscyxyKTtmb3IoaT1oO3I9ZS5oZWFwWzFdLGUuaGVhcFsxXT1lLmhlYXBbZS5oZWFwX2xlbi0tXSxHKGUscywxKSxuPWUuaGVhcFsxXSxlLmhlYXBbLS1lLmhlYXBfbWF4XT1yLGUuaGVhcFstLWUuaGVhcF9tYXhdPW4sc1syKmldPXNbMipyXStzWzIqbl0sZS5kZXB0aFtpXT0oZS5kZXB0aFtyXT49ZS5kZXB0aFtuXT9lLmRlcHRoW3JdOmUuZGVwdGhbbl0pKzEsc1syKnIrMV09c1syKm4rMV09aSxlLmhlYXBbMV09aSsrLEcoZSxzLDEpLDI8PWUuaGVhcF9sZW47KTtlLmhlYXBbLS1lLmhlYXBfbWF4XT1lLmhlYXBbMV0sZnVuY3Rpb24oZSx0KXt2YXIgcixuLGkscyxhLG8saD10LmR5bl90cmVlLHU9dC5tYXhfY29kZSxsPXQuc3RhdF9kZXNjLnN0YXRpY190cmVlLGY9dC5zdGF0X2Rlc2MuaGFzX3N0cmVlLGM9dC5zdGF0X2Rlc2MuZXh0cmFfYml0cyxkPXQuc3RhdF9kZXNjLmV4dHJhX2Jhc2UscD10LnN0YXRfZGVzYy5tYXhfbGVuZ3RoLG09MDtmb3Iocz0wO3M8PWc7cysrKWUuYmxfY291bnRbc109MDtmb3IoaFsyKmUuaGVhcFtlLmhlYXBfbWF4XSsxXT0wLHI9ZS5oZWFwX21heCsxO3I8XztyKyspcDwocz1oWzIqaFsyKihuPWUuaGVhcFtyXSkrMV0rMV0rMSkmJihzPXAsbSsrKSxoWzIqbisxXT1zLHU8bnx8KGUuYmxfY291bnRbc10rKyxhPTAsZDw9biYmKGE9Y1tuLWRdKSxvPWhbMipuXSxlLm9wdF9sZW4rPW8qKHMrYSksZiYmKGUuc3RhdGljX2xlbis9byoobFsyKm4rMV0rYSkpKTtpZigwIT09bSl7ZG97Zm9yKHM9cC0xOzA9PT1lLmJsX2NvdW50W3NdOylzLS07ZS5ibF9jb3VudFtzXS0tLGUuYmxfY291bnRbcysxXSs9MixlLmJsX2NvdW50W3BdLS0sbS09Mn13aGlsZSgwPG0pO2ZvcihzPXA7MCE9PXM7cy0tKWZvcihuPWUuYmxfY291bnRbc107MCE9PW47KXU8KGk9ZS5oZWFwWy0tcl0pfHwoaFsyKmkrMV0hPT1zJiYoZS5vcHRfbGVuKz0ocy1oWzIqaSsxXSkqaFsyKmldLGhbMippKzFdPXMpLG4tLSl9fShlLHQpLFoocyx1LGUuYmxfY291bnQpfWZ1bmN0aW9uIFgoZSx0LHIpe3ZhciBuLGkscz0tMSxhPXRbMV0sbz0wLGg9Nyx1PTQ7Zm9yKDA9PT1hJiYoaD0xMzgsdT0zKSx0WzIqKHIrMSkrMV09NjU1MzUsbj0wO248PXI7bisrKWk9YSxhPXRbMioobisxKSsxXSwrK288aCYmaT09PWF8fChvPHU/ZS5ibF90cmVlWzIqaV0rPW86MCE9PWk/KGkhPT1zJiZlLmJsX3RyZWVbMippXSsrLGUuYmxfdHJlZVsyKmJdKyspOm88PTEwP2UuYmxfdHJlZVsyKnZdKys6ZS5ibF90cmVlWzIqeV0rKyxzPWksdT0obz0wKT09PWE/KGg9MTM4LDMpOmk9PT1hPyhoPTYsMyk6KGg9Nyw0KSl9ZnVuY3Rpb24gVihlLHQscil7dmFyIG4saSxzPS0xLGE9dFsxXSxvPTAsaD03LHU9NDtmb3IoMD09PWEmJihoPTEzOCx1PTMpLG49MDtuPD1yO24rKylpZihpPWEsYT10WzIqKG4rMSkrMV0sISgrK288aCYmaT09PWEpKXtpZihvPHUpZm9yKDtMKGUsaSxlLmJsX3RyZWUpLDAhPS0tbzspO2Vsc2UgMCE9PWk/KGkhPT1zJiYoTChlLGksZS5ibF90cmVlKSxvLS0pLEwoZSxiLGUuYmxfdHJlZSksUChlLG8tMywyKSk6bzw9MTA/KEwoZSx2LGUuYmxfdHJlZSksUChlLG8tMywzKSk6KEwoZSx5LGUuYmxfdHJlZSksUChlLG8tMTEsNykpO3M9aSx1PShvPTApPT09YT8oaD0xMzgsMyk6aT09PWE/KGg9NiwzKTooaD03LDQpfX1uKFQpO3ZhciBxPSExO2Z1bmN0aW9uIEooZSx0LHIsbil7UChlLChzPDwxKSsobj8xOjApLDMpLGZ1bmN0aW9uKGUsdCxyLG4pe00oZSksbiYmKFUoZSxyKSxVKGUsfnIpKSxpLmFycmF5U2V0KGUucGVuZGluZ19idWYsZS53aW5kb3csdCxyLGUucGVuZGluZyksZS5wZW5kaW5nKz1yfShlLHQsciwhMCl9ci5fdHJfaW5pdD1mdW5jdGlvbihlKXtxfHwoZnVuY3Rpb24oKXt2YXIgZSx0LHIsbixpLHM9bmV3IEFycmF5KGcrMSk7Zm9yKG49cj0wO248YS0xO24rKylmb3IoSVtuXT1yLGU9MDtlPDE8PHdbbl07ZSsrKUFbcisrXT1uO2ZvcihBW3ItMV09bixuPWk9MDtuPDE2O24rKylmb3IoVFtuXT1pLGU9MDtlPDE8PGtbbl07ZSsrKUVbaSsrXT1uO2ZvcihpPj49NztuPGY7bisrKWZvcihUW25dPWk8PDcsZT0wO2U8MTw8a1tuXS03O2UrKylFWzI1NitpKytdPW47Zm9yKHQ9MDt0PD1nO3QrKylzW3RdPTA7Zm9yKGU9MDtlPD0xNDM7KXpbMiplKzFdPTgsZSsrLHNbOF0rKztmb3IoO2U8PTI1NTspelsyKmUrMV09OSxlKyssc1s5XSsrO2Zvcig7ZTw9Mjc5Oyl6WzIqZSsxXT03LGUrKyxzWzddKys7Zm9yKDtlPD0yODc7KXpbMiplKzFdPTgsZSsrLHNbOF0rKztmb3IoWih6LGwrMSxzKSxlPTA7ZTxmO2UrKylDWzIqZSsxXT01LENbMiplXT1qKGUsNSk7Tz1uZXcgRCh6LHcsdSsxLGwsZyksQj1uZXcgRChDLGssMCxmLGcpLFI9bmV3IEQobmV3IEFycmF5KDApLHgsMCxjLHApfSgpLHE9ITApLGUubF9kZXNjPW5ldyBGKGUuZHluX2x0cmVlLE8pLGUuZF9kZXNjPW5ldyBGKGUuZHluX2R0cmVlLEIpLGUuYmxfZGVzYz1uZXcgRihlLmJsX3RyZWUsUiksZS5iaV9idWY9MCxlLmJpX3ZhbGlkPTAsVyhlKX0sci5fdHJfc3RvcmVkX2Jsb2NrPUosci5fdHJfZmx1c2hfYmxvY2s9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGkscyxhPTA7MDxlLmxldmVsPygyPT09ZS5zdHJtLmRhdGFfdHlwZSYmKGUuc3RybS5kYXRhX3R5cGU9ZnVuY3Rpb24oZSl7dmFyIHQscj00MDkzNjI0NDQ3O2Zvcih0PTA7dDw9MzE7dCsrLHI+Pj49MSlpZigxJnImJjAhPT1lLmR5bl9sdHJlZVsyKnRdKXJldHVybiBvO2lmKDAhPT1lLmR5bl9sdHJlZVsxOF18fDAhPT1lLmR5bl9sdHJlZVsyMF18fDAhPT1lLmR5bl9sdHJlZVsyNl0pcmV0dXJuIGg7Zm9yKHQ9MzI7dDx1O3QrKylpZigwIT09ZS5keW5fbHRyZWVbMip0XSlyZXR1cm4gaDtyZXR1cm4gb30oZSkpLFkoZSxlLmxfZGVzYyksWShlLGUuZF9kZXNjKSxhPWZ1bmN0aW9uKGUpe3ZhciB0O2ZvcihYKGUsZS5keW5fbHRyZWUsZS5sX2Rlc2MubWF4X2NvZGUpLFgoZSxlLmR5bl9kdHJlZSxlLmRfZGVzYy5tYXhfY29kZSksWShlLGUuYmxfZGVzYyksdD1jLTE7Mzw9dCYmMD09PWUuYmxfdHJlZVsyKlNbdF0rMV07dC0tKTtyZXR1cm4gZS5vcHRfbGVuKz0zKih0KzEpKzUrNSs0LHR9KGUpLGk9ZS5vcHRfbGVuKzMrNz4+PjMsKHM9ZS5zdGF0aWNfbGVuKzMrNz4+PjMpPD1pJiYoaT1zKSk6aT1zPXIrNSxyKzQ8PWkmJi0xIT09dD9KKGUsdCxyLG4pOjQ9PT1lLnN0cmF0ZWd5fHxzPT09aT8oUChlLDIrKG4/MTowKSwzKSxLKGUseixDKSk6KFAoZSw0KyhuPzE6MCksMyksZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk7Zm9yKFAoZSx0LTI1Nyw1KSxQKGUsci0xLDUpLFAoZSxuLTQsNCksaT0wO2k8bjtpKyspUChlLGUuYmxfdHJlZVsyKlNbaV0rMV0sMyk7VihlLGUuZHluX2x0cmVlLHQtMSksVihlLGUuZHluX2R0cmVlLHItMSl9KGUsZS5sX2Rlc2MubWF4X2NvZGUrMSxlLmRfZGVzYy5tYXhfY29kZSsxLGErMSksSyhlLGUuZHluX2x0cmVlLGUuZHluX2R0cmVlKSksVyhlKSxuJiZNKGUpfSxyLl90cl90YWxseT1mdW5jdGlvbihlLHQscil7cmV0dXJuIGUucGVuZGluZ19idWZbZS5kX2J1ZisyKmUubGFzdF9saXRdPXQ+Pj44JjI1NSxlLnBlbmRpbmdfYnVmW2UuZF9idWYrMiplLmxhc3RfbGl0KzFdPTI1NSZ0LGUucGVuZGluZ19idWZbZS5sX2J1ZitlLmxhc3RfbGl0XT0yNTUmcixlLmxhc3RfbGl0KyssMD09PXQ/ZS5keW5fbHRyZWVbMipyXSsrOihlLm1hdGNoZXMrKyx0LS0sZS5keW5fbHRyZWVbMiooQVtyXSt1KzEpXSsrLGUuZHluX2R0cmVlWzIqTih0KV0rKyksZS5sYXN0X2xpdD09PWUubGl0X2J1ZnNpemUtMX0sci5fdHJfYWxpZ249ZnVuY3Rpb24oZSl7UChlLDIsMyksTChlLG0seiksZnVuY3Rpb24oZSl7MTY9PT1lLmJpX3ZhbGlkPyhVKGUsZS5iaV9idWYpLGUuYmlfYnVmPTAsZS5iaV92YWxpZD0wKTo4PD1lLmJpX3ZhbGlkJiYoZS5wZW5kaW5nX2J1ZltlLnBlbmRpbmcrK109MjU1JmUuYmlfYnVmLGUuYmlfYnVmPj49OCxlLmJpX3ZhbGlkLT04KX0oZSl9fSx7XCIuLi91dGlscy9jb21tb25cIjo0MX1dLDUzOltmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dGhpcy5pbnB1dD1udWxsLHRoaXMubmV4dF9pbj0wLHRoaXMuYXZhaWxfaW49MCx0aGlzLnRvdGFsX2luPTAsdGhpcy5vdXRwdXQ9bnVsbCx0aGlzLm5leHRfb3V0PTAsdGhpcy5hdmFpbF9vdXQ9MCx0aGlzLnRvdGFsX291dD0wLHRoaXMubXNnPVwiXCIsdGhpcy5zdGF0ZT1udWxsLHRoaXMuZGF0YV90eXBlPTIsdGhpcy5hZGxlcj0wfX0se31dLDU0OltmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKGUpeyFmdW5jdGlvbihyLG4pe1widXNlIHN0cmljdFwiO2lmKCFyLnNldEltbWVkaWF0ZSl7dmFyIGkscyx0LGEsbz0xLGg9e30sdT0hMSxsPXIuZG9jdW1lbnQsZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YmJk9iamVjdC5nZXRQcm90b3R5cGVPZihyKTtlPWUmJmUuc2V0VGltZW91dD9lOnIsaT1cIltvYmplY3QgcHJvY2Vzc11cIj09PXt9LnRvU3RyaW5nLmNhbGwoci5wcm9jZXNzKT9mdW5jdGlvbihlKXtwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCl7YyhlKX0pfTpmdW5jdGlvbigpe2lmKHIucG9zdE1lc3NhZ2UmJiFyLmltcG9ydFNjcmlwdHMpe3ZhciBlPSEwLHQ9ci5vbm1lc3NhZ2U7cmV0dXJuIHIub25tZXNzYWdlPWZ1bmN0aW9uKCl7ZT0hMX0sci5wb3N0TWVzc2FnZShcIlwiLFwiKlwiKSxyLm9ubWVzc2FnZT10LGV9fSgpPyhhPVwic2V0SW1tZWRpYXRlJFwiK01hdGgucmFuZG9tKCkrXCIkXCIsci5hZGRFdmVudExpc3RlbmVyP3IuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixkLCExKTpyLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsZCksZnVuY3Rpb24oZSl7ci5wb3N0TWVzc2FnZShhK2UsXCIqXCIpfSk6ci5NZXNzYWdlQ2hhbm5lbD8oKHQ9bmV3IE1lc3NhZ2VDaGFubmVsKS5wb3J0MS5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7YyhlLmRhdGEpfSxmdW5jdGlvbihlKXt0LnBvcnQyLnBvc3RNZXNzYWdlKGUpfSk6bCYmXCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIGwuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKT8ocz1sLmRvY3VtZW50RWxlbWVudCxmdW5jdGlvbihlKXt2YXIgdD1sLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7dC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtjKGUpLHQub25yZWFkeXN0YXRlY2hhbmdlPW51bGwscy5yZW1vdmVDaGlsZCh0KSx0PW51bGx9LHMuYXBwZW5kQ2hpbGQodCl9KTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGMsMCxlKX0sZS5zZXRJbW1lZGlhdGU9ZnVuY3Rpb24oZSl7XCJmdW5jdGlvblwiIT10eXBlb2YgZSYmKGU9bmV3IEZ1bmN0aW9uKFwiXCIrZSkpO2Zvcih2YXIgdD1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKSxyPTA7cjx0Lmxlbmd0aDtyKyspdFtyXT1hcmd1bWVudHNbcisxXTt2YXIgbj17Y2FsbGJhY2s6ZSxhcmdzOnR9O3JldHVybiBoW29dPW4saShvKSxvKyt9LGUuY2xlYXJJbW1lZGlhdGU9Zn1mdW5jdGlvbiBmKGUpe2RlbGV0ZSBoW2VdfWZ1bmN0aW9uIGMoZSl7aWYodSlzZXRUaW1lb3V0KGMsMCxlKTtlbHNle3ZhciB0PWhbZV07aWYodCl7dT0hMDt0cnl7IWZ1bmN0aW9uKGUpe3ZhciB0PWUuY2FsbGJhY2sscj1lLmFyZ3M7c3dpdGNoKHIubGVuZ3RoKXtjYXNlIDA6dCgpO2JyZWFrO2Nhc2UgMTp0KHJbMF0pO2JyZWFrO2Nhc2UgMjp0KHJbMF0sclsxXSk7YnJlYWs7Y2FzZSAzOnQoclswXSxyWzFdLHJbMl0pO2JyZWFrO2RlZmF1bHQ6dC5hcHBseShuLHIpfX0odCl9ZmluYWxseXtmKGUpLHU9ITF9fX19ZnVuY3Rpb24gZChlKXtlLnNvdXJjZT09PXImJlwic3RyaW5nXCI9PXR5cGVvZiBlLmRhdGEmJjA9PT1lLmRhdGEuaW5kZXhPZihhKSYmYygrZS5kYXRhLnNsaWNlKGEubGVuZ3RoKSl9fShcInVuZGVmaW5lZFwiPT10eXBlb2Ygc2VsZj92b2lkIDA9PT1lP3RoaXM6ZTpzZWxmKX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dfSx7fSxbMTBdKSgxMCl9KTsiLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL2RpYWxvZ3MudHNcbmltcG9ydCB7IE1vZGFsLCBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuLy8gRnVuY3Rpb24gdG8gc2hvdyB0aGUgbW9kYWwgd2l0aCBpbXByb3ZlZCBzcGFjaW5nXG5mdW5jdGlvbiBkaXNwbGF5TW9kYWwoYXBwOiBBcHAsIHRpdGxlOiBzdHJpbmcsIHBhcmFncmFwaHM6IHN0cmluZ1tdLCBub3RlPzogc3RyaW5nKTogTW9kYWwge1xuICAgIGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKGFwcCk7XG4gICAgbW9kYWwuY29udGVudEVsLmFkZENsYXNzKFwibmV4dXMtYWktY2hhdC1pbXBvcnRlci1tb2RhbFwiKTtcblxuICAgIC8vIFRpdGxlIHdpdGggcmVkdWNlZCB0b3Agc3BhY2luZ1xuICAgIGNvbnN0IHRpdGxlRWwgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IFxuICAgICAgICB0ZXh0OiB0aXRsZSxcbiAgICAgICAgY2xzOiBcIm1vZGFsLXRpdGxlXCJcbiAgICB9KTtcblxuICAgIC8vIENvbnRlbnQgY29udGFpbmVyXG4gICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtY29udGVudFwiIH0pO1xuXG4gICAgLy8gUHJvY2VzcyBwYXJhZ3JhcGhzIHdpdGggYXV0b21hdGljIHNwYWNpbmdcbiAgICBwYXJhZ3JhcGhzLmZvckVhY2goKHBhcmFncmFwaCwgcGFyYWdyYXBoSW5kZXgpID0+IHtcbiAgICAgICAgLy8gQWRkIGRvdWJsZSBsaW5lIGJyZWFrcyB0byBlbnN1cmUgc2VjdGlvbnMgYXJlIHNlcGFyYXRlZFxuICAgICAgICBjb25zdCBwYXJhZ3JhcGhXaXRoU3BhY2luZyA9IHBhcmFncmFwaCArICdcXG5cXG4nO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcGFyYWdyYXBoRGl2ID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtcGFyYWdyYXBoXCIgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTcGxpdCBpbnRvIHNlY3Rpb25zIChkb3VibGUgbGluZSBicmVha3MgY3JlYXRlIG5ldyBzZWN0aW9ucylcbiAgICAgICAgY29uc3Qgc2VjdGlvbnMgPSBwYXJhZ3JhcGhXaXRoU3BhY2luZy5zcGxpdCgnXFxuXFxuJykuZmlsdGVyKHNlY3Rpb24gPT4gc2VjdGlvbi50cmltKCkgIT09ICcnKTtcbiAgICAgICAgXG4gICAgICAgIHNlY3Rpb25zLmZvckVhY2goKHNlY3Rpb24sIHNlY3Rpb25JbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkRpdiA9IHBhcmFncmFwaERpdi5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtc2VjdGlvblwiIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGVhY2ggbGluZSB3aXRoaW4gdGhlIHNlY3Rpb25cbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gc2VjdGlvbi5zcGxpdCgnXFxuJykuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkgIT09ICcnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGluZXMuZm9yRWFjaCgobGluZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVEaXYgPSBzZWN0aW9uRGl2LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1saW5lXCIgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCBtYXJrZG93biBmb3JtYXR0aW5nIHRvIEhUTUxcbiAgICAgICAgICAgICAgICBsZXQgaHRtbENvbnRlbnQgPSBsaW5lXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFsoW15cXF1dKylcXF1cXCgoW14pXSspXFwpL2csICc8YSBocmVmPVwiJDJcIiBjbGFzcz1cImV4dGVybmFsLWxpbmtcIiB0YXJnZXQ9XCJfYmxhbmtcIj4kMTwvYT4nKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwqXFwqKFteKl0rKVxcKlxcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCooW14qXSspXFwqL2csICc8ZW0+JDE8L2VtPicpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBzcGVjaWFsIGZvcm1hdHRpbmdcbiAgICAgICAgICAgICAgICBpZiAobGluZS50cmltKCkuZW5kc1dpdGgoJzonKSAmJiBsaW5lLnRyaW0oKS5sZW5ndGggPCAzMCkge1xuICAgICAgICAgICAgICAgICAgICBsaW5lRGl2LmlubmVySFRNTCA9IGA8c3Ryb25nIGNsYXNzPVwic2VjdGlvbi1oZWFkZXJcIj4ke2h0bWxDb250ZW50fTwvc3Ryb25nPmA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lLnRyaW0oKS5zdGFydHNXaXRoKCdcdTIwMjInKSB8fCBsaW5lLnRyaW0oKS5zdGFydHNXaXRoKCctJykpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZURpdi5pbm5lckhUTUwgPSBodG1sQ29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgbGluZURpdi5hZGRDbGFzcygnbW9kYWwtbGlzdC1pdGVtJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZURpdi5pbm5lckhUTUwgPSBodG1sQ29udGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWRkIHNwYWNpbmcgYmV0d2VlbiBzZWN0aW9ucyB3aXRoaW4gcGFyYWdyYXBoXG4gICAgICAgICAgICBpZiAoc2VjdGlvbkluZGV4IDwgc2VjdGlvbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHBhcmFncmFwaERpdi5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtc2VjdGlvbi1icmVha1wiIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIEhhbmRsZSBub3RlIGFzIHNlcGFyYXRlIHNlY3Rpb24gd2l0aCBzcGFjaW5nXG4gICAgaWYgKG5vdGUpIHtcbiAgICAgICAgLy8gQWRkIHNwYWNpbmcgYmVmb3JlIG5vdGVcbiAgICAgICAgY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtbWFqb3ItYnJlYWtcIiB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG5vdGVEaXYgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1ub3RlXCIgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBQcm9jZXNzIG5vdGUgY29udGVudCB3aXRoIHNhbWUgZm9ybWF0dGluZ1xuICAgICAgICBsZXQgbm90ZUNvbnRlbnQgPSBub3RlXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxbKFteXFxdXSspXFxdXFwoKFteKV0rKVxcKS9nLCAnPGEgaHJlZj1cIiQyXCIgY2xhc3M9XCJleHRlcm5hbC1saW5rXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JDE8L2E+JylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXCpcXCooW14qXSspXFwqXFwqL2csICc8c3Ryb25nPiQxPC9zdHJvbmc+JylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXCooW14qXSspXFwqL2csICc8ZW0+JDE8L2VtPicpO1xuICAgICAgICBcbiAgICAgICAgbm90ZURpdi5pbm5lckhUTUwgPSBub3RlQ29udGVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gbW9kYWw7XG59XG5cbi8vIEZ1bmN0aW9uIHRvIGFkZCBidXR0b25zIHdpdGggYmV0dGVyIHN0eWxpbmdcbmZ1bmN0aW9uIGFkZEJ1dHRvbnMoXG4gICAgbW9kYWw6IE1vZGFsLCBcbiAgICB0eXBlOiBcImluZm9ybWF0aW9uXCIgfCBcImNvbmZpcm1hdGlvblwiLCBcbiAgICByZXNvbHZlOiAodmFsdWU6IGJvb2xlYW4pID0+IHZvaWQsXG4gICAgY3VzdG9tTGFiZWxzPzogeyBidXR0b24xPzogc3RyaW5nOyBidXR0b24yPzogc3RyaW5nIH1cbik6IHZvaWQge1xuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuICAgIFxuICAgIGlmICh0eXBlID09PSBcImluZm9ybWF0aW9uXCIpIHtcbiAgICAgICAgY29uc3QgYnV0dG9uTGFiZWwgPSBjdXN0b21MYWJlbHM/LmJ1dHRvbjEgfHwgXCJVbmRlcnN0b29kXCI7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuICAgICAgICAgICAgdGV4dDogYnV0dG9uTGFiZWwsXG4gICAgICAgICAgICBjbHM6IFwibW9kLWN0YVwiICAvLyBPYnNpZGlhbidzIHByaW1hcnkgYnV0dG9uIGNsYXNzXG4gICAgICAgIH0pO1xuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgeyAvLyBcImNvbmZpcm1hdGlvblwiXG4gICAgICAgIGNvbnN0IG5vTGFiZWwgPSBjdXN0b21MYWJlbHM/LmJ1dHRvbjIgfHwgXCJOb1wiO1xuICAgICAgICBjb25zdCB5ZXNMYWJlbCA9IGN1c3RvbUxhYmVscz8uYnV0dG9uMSB8fCBcIlllc1wiO1xuICAgICAgICBcbiAgICAgICAgLy8gTm8gYnV0dG9uIChzZWNvbmRhcnkpXG4gICAgICAgIGNvbnN0IG5vQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG4gICAgICAgICAgICB0ZXh0OiBub0xhYmVsLFxuICAgICAgICAgICAgY2xzOiBcIm1vZC1tdXRlZFwiICAvLyBPYnNpZGlhbidzIHNlY29uZGFyeSBidXR0b24gY2xhc3NcbiAgICAgICAgfSk7XG4gICAgICAgIG5vQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gWWVzIGJ1dHRvbiAocHJpbWFyeSlcbiAgICAgICAgY29uc3QgeWVzQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG4gICAgICAgICAgICB0ZXh0OiB5ZXNMYWJlbCxcbiAgICAgICAgICAgIGNsczogXCJtb2QtY3RhXCIgIC8vIE9ic2lkaWFuJ3MgcHJpbWFyeSBidXR0b24gY2xhc3NcbiAgICAgICAgfSk7XG4gICAgICAgIHllc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8gTWFpbiBmdW5jdGlvbiB0byBzaG93IGNvbmZpcm1hdGlvbiBvciBpbmZvcm1hdGlvbiBkaWFsb2dcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93RGlhbG9nKFxuICAgIGFwcDogQXBwLFxuICAgIHR5cGU6IFwiaW5mb3JtYXRpb25cIiB8IFwiY29uZmlybWF0aW9uXCIsXG4gICAgdGl0bGU6IHN0cmluZyxcbiAgICBwYXJhZ3JhcGhzOiBzdHJpbmdbXSxcbiAgICBub3RlPzogc3RyaW5nLFxuICAgIGN1c3RvbUxhYmVscz86IHsgYnV0dG9uMT86IHN0cmluZzsgYnV0dG9uMj86IHN0cmluZyB9XG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBkaXNwbGF5TW9kYWwoYXBwLCB0aXRsZSwgcGFyYWdyYXBocywgbm90ZSk7XG4gICAgICAgIGFkZEJ1dHRvbnMobW9kYWwsIHR5cGUsIHJlc29sdmUsIGN1c3RvbUxhYmVscyk7XG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBCZWF1dGlmdWwgdXBncmFkZSBkaWFsb2cgd2l0aCBlbmhhbmNlZCBzdHlsaW5nIChsaWtlIEV4Y2FsaWRyYXcpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93VXBncmFkZURpYWxvZyhcbiAgICBhcHA6IEFwcCxcbiAgICBvcHRpb25zOiB7XG4gICAgICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICAgICAgYnV0dG9uczogQXJyYXk8eyB0ZXh0OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmc7IHByaW1hcnk/OiBib29sZWFuIH0+O1xuICAgIH1cbik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IEJlYXV0aWZ1bFVwZ3JhZGVEaWFsb2coYXBwLCBvcHRpb25zLCByZXNvbHZlKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH0pO1xufVxuXG5jbGFzcyBCZWF1dGlmdWxVcGdyYWRlRGlhbG9nIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgcmVzb2x2ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBvcHRpb25zOiB7XG4gICAgICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICAgICAgYnV0dG9uczogQXJyYXk8eyB0ZXh0OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmc7IHByaW1hcnk/OiBib29sZWFuIH0+O1xuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYXBwOiBBcHAsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgICAgICAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgICAgICAgICBidXR0b25zOiBBcnJheTx7IHRleHQ6IHN0cmluZzsgdmFsdWU6IHN0cmluZzsgcHJpbWFyeT86IGJvb2xlYW4gfT47XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgLy8gQWRkIGN1c3RvbSBDU1MgY2xhc3MgZm9yIHN0eWxpbmdcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCduZXh1cy11cGdyYWRlLWRpYWxvZycpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBtYWluIGNvbnRhaW5lclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCduZXh1cy11cGdyYWRlLWNvbnRhaW5lcicpO1xuXG4gICAgICAgIC8vIEhlYWRlciB3aXRoIGljb24gYW5kIHRpdGxlXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ25leHVzLXVwZ3JhZGUtaGVhZGVyJyk7XG4gICAgICAgIGNvbnN0IGhlYWRlckljb24gPSBoZWFkZXIuY3JlYXRlRGl2KCduZXh1cy11cGdyYWRlLWljb24nKTtcbiAgICAgICAgaGVhZGVySWNvbi5pbm5lckhUTUwgPSAnXHVEODNEXHVERTgwJztcbiAgICAgICAgY29uc3QgaGVhZGVyVGl0bGUgPSBoZWFkZXIuY3JlYXRlRGl2KCduZXh1cy11cGdyYWRlLXRpdGxlJyk7XG4gICAgICAgIGhlYWRlclRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5vcHRpb25zLnRpdGxlO1xuXG4gICAgICAgIC8vIENvbnRlbnQgYXJlYSB3aXRoIHJpY2ggZm9ybWF0dGluZ1xuICAgICAgICBjb25zdCBjb250ZW50ID0gY29udGFpbmVyLmNyZWF0ZURpdignbmV4dXMtdXBncmFkZS1jb250ZW50Jyk7XG4gICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLm1lc3NhZ2U7XG5cbiAgICAgICAgLy8gS28tZmkgc3VwcG9ydCBzZWN0aW9uIChsaWtlIEV4Y2FsaWRyYXcpXG4gICAgICAgIGNvbnN0IHN1cHBvcnRTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdignbmV4dXMtc3VwcG9ydC1zZWN0aW9uJyk7XG4gICAgICAgIHN1cHBvcnRTZWN0aW9uLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJuZXh1cy1zdXBwb3J0LXRleHRcIj5cbiAgICAgICAgICAgICAgICBJJ20gd29ya2luZyBvbiBOZXh1cyBwcm9qZWN0cyBmdWxsLXRpbWUgd2hpbGUgdW5lbXBsb3llZCBhbmQgZGVhbGluZyB3aXRoIGhlYWx0aCBpc3N1ZXMgLSBvdmVyIDEsMDAwIHVzZXJzIHNvIGZhciwgYnV0IEkndmUgcmVjZWl2ZWQganVzdCAkMTAgaW4gZG9uYXRpb25zIHdoaWxlIHBheWluZyAkMjAwL21vbnRoIG91dCBvZiBwb2NrZXQgaW4gZXhwZW5zZXMuXG5cbiAgICAgICAgICAgICAgICBJZiB0aGVzZSBwbHVnaW5zIGhlbHAgeW91LCBldmVuIGEgc21hbGwgZG9uYXRpb24gd291bGQgbWVhbiB0aGUgd29ybGQgYW5kIGhlbHAga2VlcCB0aGVtIGFsaXZlLlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibmV4dXMtY29mZmVlLWRpdlwiPlxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2tvLWZpLmNvbS9uZXh1c3BsdWdpbnNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJodHRwczovL3N0b3JhZ2Uua28tZmkuY29tL2Nkbi9rb2ZpNi5wbmc/dj02XCIgYm9yZGVyPVwiMFwiIGFsdD1cIkJ1eSBNZSBhIENvZmZlZSBhdCBrby1maS5jb21cIiBoZWlnaHQ9XCI0NVwiPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIC8vIEJ1dHRvbnMgY29udGFpbmVyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCduZXh1cy11cGdyYWRlLWJ1dHRvbnMnKTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMuYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBidG4gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogYnV0dG9uLnRleHQsXG4gICAgICAgICAgICAgICAgY2xzOiBidXR0b24ucHJpbWFyeSA/ICduZXh1cy1idG4tcHJpbWFyeScgOiAnbmV4dXMtYnRuLXNlY29uZGFyeSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZShidXR0b24udmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG4vLyBzcmMvdXRpbHMvZGF0ZS1wYXJzZXIudHNcbmltcG9ydCB7IG1vbWVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG4vKipcbiAqIERhdGUgZm9ybWF0IGluZm9ybWF0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRGF0ZUZvcm1hdEluZm8ge1xuICAgIHNlcGFyYXRvcjogJy8nIHwgJy0nIHwgJy4nO1xuICAgIG9yZGVyOiAnWU1EJyB8ICdETVknIHwgJ01EWSc7XG4gICAgdGltZUZvcm1hdDogJzEyaCcgfCAnMjRoJztcbiAgICBoYXNTZWNvbmRzOiBib29sZWFuO1xufVxuXG4vKipcbiAqIEludGVsbGlnZW50IGRhdGUgZm9ybWF0IGRldGVjdG9yIGFuZCBwYXJzZXJcbiAqIFN1cHBvcnRzIGFsbCBmb3JtYXRzOiBJU08sIFVTLCBFVSwgREUsIEpQLCBhbmQgbG9jYWxlLWJhc2VkIGZvcm1hdHNcbiAqL1xuZXhwb3J0IGNsYXNzIERhdGVQYXJzZXIge1xuXG4gICAgLyoqXG4gICAgICogUGFyc2UgYSBkYXRlIHN0cmluZyB3aXRoIGF1dG9tYXRpYyBmb3JtYXQgZGV0ZWN0aW9uXG4gICAgICogUmV0dXJucyBVbml4IHRpbWVzdGFtcCAoc2Vjb25kcykgb3IgMCBpZiBwYXJzaW5nIGZhaWxzXG4gICAgICogQHBhcmFtIGRhdGVTdHIgLSBEYXRlIHN0cmluZyB0byBwYXJzZVxuICAgICAqIEBwYXJhbSBjb250ZXh0SWQgLSBPcHRpb25hbCBjb250ZXh0IGlkZW50aWZpZXIgZm9yIGxvZ2dpbmcgKGUuZy4sIFwiQXJ0aWZhY3QgYWJjMTIzX3YxXCIsIFwiQ29udmVyc2F0aW9uIHh5elwiKVxuICAgICAqL1xuICAgIHN0YXRpYyBwYXJzZURhdGUoZGF0ZVN0cjogc3RyaW5nLCBjb250ZXh0SWQ/OiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBjdHggPSBjb250ZXh0SWQgPyBgWyR7Y29udGV4dElkfV0gYCA6ICcnO1xuXG4gICAgICAgIGlmICghZGF0ZVN0ciB8fCB0eXBlb2YgZGF0ZVN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRyeSBJU08gODYwMSBmaXJzdCAoZmFzdGVzdCBhbmQgbW9zdCBjb21tb24gaW4gdjEuMy4wKylcbiAgICAgICAgICAgIGNvbnN0IGlzb0RhdGUgPSBtb21lbnQoZGF0ZVN0ciwgbW9tZW50LklTT184NjAxLCB0cnVlKTtcbiAgICAgICAgICAgIGlmIChpc29EYXRlLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc29EYXRlLnVuaXgoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRGV0ZWN0IGZvcm1hdCBhbmQgcGFyc2VcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMuZGV0ZWN0Rm9ybWF0KGRhdGVTdHIpO1xuICAgICAgICAgICAgaWYgKCFmb3JtYXQpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgJHtjdHh9cGFyc2VEYXRlIC0gRkFJTEVEOiBjb3VsZCBub3QgZGV0ZWN0IGZvcm1hdGApO1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSB0aGlzLnBhcnNlV2l0aEZvcm1hdChkYXRlU3RyLCBmb3JtYXQpO1xuICAgICAgICAgICAgaWYgKHBhcnNlZCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKGAke2N0eH1wYXJzZURhdGUgLSBGQUlMRUQ6IHBhcnNpbmcgcmV0dXJuZWQgMGApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihgJHtjdHh9cGFyc2VEYXRlIC0gRkFJTEVEOiBleGNlcHRpb246YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZSBhIGRhdGUgc3RyaW5nIHdpdGggYSBmb3JjZWQgY29tcG9uZW50IG9yZGVyIChZTUQvRE1ZL01EWSlcbiAgICAgKiBLZWVwcyBvdGhlciBwYXJ0cyBhdXRvLWRldGVjdGVkIGZyb20gdGhlIHN0cmluZyAoc2VwYXJhdG9yLCB0aW1lIGZvcm1hdCwgc2Vjb25kcylcbiAgICAgKi9cbiAgICBzdGF0aWMgcGFyc2VEYXRlV2l0aE9yZGVyKGRhdGVTdHI6IHN0cmluZywgb3JkZXI6ICdZTUQnfCdETVknfCdNRFknKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKCFkYXRlU3RyIHx8IHR5cGVvZiBkYXRlU3RyICE9PSAnc3RyaW5nJykgcmV0dXJuIDA7XG5cbiAgICAgICAgLy8gSWYgSVNPLCBzaG9ydC1jaXJjdWl0XG4gICAgICAgIGNvbnN0IGlzb0RhdGUgPSBtb21lbnQoZGF0ZVN0ciwgbW9tZW50LklTT184NjAxLCB0cnVlKTtcbiAgICAgICAgaWYgKGlzb0RhdGUuaXNWYWxpZCgpKSByZXR1cm4gaXNvRGF0ZS51bml4KCk7XG5cbiAgICAgICAgLy8gU3RhcnQgZnJvbSBhdXRvLWRldGVjdGVkIGZvcm1hdCBhbmQgb3ZlcnJpZGUgb3JkZXJcbiAgICAgICAgY29uc3QgZGV0ZWN0ZWQgPSB0aGlzLmRldGVjdEZvcm1hdChkYXRlU3RyKTtcbiAgICAgICAgaWYgKCFkZXRlY3RlZCkgcmV0dXJuIDA7XG4gICAgICAgIGNvbnN0IGZvcmNlZDogRGF0ZUZvcm1hdEluZm8gPSB7IC4uLmRldGVjdGVkLCBvcmRlciB9O1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVdpdGhGb3JtYXQoZGF0ZVN0ciwgZm9yY2VkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IGEgZGF0ZSBzdHJpbmcgdG8gSVNPIDg2MDEgd2l0aCBhIGZvcmNlZCBjb21wb25lbnQgb3JkZXJcbiAgICAgKi9cbiAgICBzdGF0aWMgY29udmVydFRvSVNPODYwMVdpdGhPcmRlcihkYXRlU3RyOiBzdHJpbmcsIG9yZGVyOiAnWU1EJ3wnRE1ZJ3wnTURZJyk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBjb25zdCB1bml4VGltZSA9IHRoaXMucGFyc2VEYXRlV2l0aE9yZGVyKGRhdGVTdHIsIG9yZGVyKTtcbiAgICAgICAgaWYgKHVuaXhUaW1lID09PSAwKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHVuaXhUaW1lICogMTAwMCkudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgZGF0ZSBmb3JtYXQgZnJvbSBhIHNpbmdsZSBkYXRlIHN0cmluZ1xuICAgICAqL1xuICAgIHN0YXRpYyBkZXRlY3RGb3JtYXQoZGF0ZVN0cjogc3RyaW5nKTogRGF0ZUZvcm1hdEluZm8gfCBudWxsIHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIElTTyA4NjAxIGZvcm1hdCBmaXJzdFxuICAgICAgICBpZiAoZGF0ZVN0ci5tYXRjaCgvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9W1QgXVxcZHsyfTpcXGR7Mn0oOlxcZHsyfSk/KFxcLlxcZHszfSk/Wj8kLykpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yOiAnLScsXG4gICAgICAgICAgICAgICAgb3JkZXI6ICdZTUQnLFxuICAgICAgICAgICAgICAgIHRpbWVGb3JtYXQ6ICcyNGgnLFxuICAgICAgICAgICAgICAgIGhhc1NlY29uZHM6IGRhdGVTdHIuaW5jbHVkZXMoJzonKSAmJiBkYXRlU3RyLnNwbGl0KCc6JykubGVuZ3RoID49IDNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXRlcm1pbmUgc2VwYXJhdG9yXG4gICAgICAgIGxldCBzZXBhcmF0b3I6ICcvJyB8ICctJyB8ICcuJyA9ICcvJztcbiAgICAgICAgaWYgKGRhdGVTdHIuaW5jbHVkZXMoJy0nKSAmJiAhZGF0ZVN0ci5tYXRjaCgvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9LykpIHtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9ICctJztcbiAgICAgICAgfSBlbHNlIGlmIChkYXRlU3RyLmluY2x1ZGVzKCcuJykpIHtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9ICcuJztcbiAgICAgICAgfSBlbHNlIGlmIChkYXRlU3RyLmluY2x1ZGVzKCcvJykpIHtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9ICcvJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBObyByZWNvZ25pemFibGUgc2VwYXJhdG9yXG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXRlcm1pbmUgdGltZSBmb3JtYXQgKDEyaCB3aXRoIEFNL1BNIG9yIDI0aClcbiAgICAgICAgY29uc3QgaGFzQU1QTSA9IC9cXHMoQU18UE0pJC9pLnRlc3QoZGF0ZVN0cik7XG4gICAgICAgIGNvbnN0IHRpbWVGb3JtYXQ6ICcxMmgnIHwgJzI0aCcgPSBoYXNBTVBNID8gJzEyaCcgOiAnMjRoJztcblxuICAgICAgICAvLyBDaGVjayBpZiBoYXMgc2Vjb25kcyAoZXh0cmFjdCB0aW1lIHBhcnQgYWZ0ZXIgYW55IHdoaXRlc3BhY2UpXG4gICAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IGRhdGVTdHIubWF0Y2goL1xccyhcXGR7MSwyfTpcXGR7Mn0oPzo6XFxkezJ9KT8oPzpcXHM/W0FQXU0pPykvaSk7XG4gICAgICAgIGNvbnN0IHRpbWVQYXJ0ID0gdGltZU1hdGNoID8gdGltZU1hdGNoWzFdIDogJyc7XG4gICAgICAgIGNvbnN0IGhhc1NlY29uZHMgPSB0aW1lUGFydC5zcGxpdCgnOicpLmxlbmd0aCA+PSAzO1xuXG4gICAgICAgIC8vIEV4dHJhY3QgZGF0ZSBwYXJ0IChiZWZvcmUgdGltZSlcbiAgICAgICAgY29uc3QgZGF0ZVBhcnQgPSBkYXRlU3RyLnNwbGl0KC9cXHMvKVswXTtcbiAgICAgICAgY29uc3QgcGFydHMgPSBkYXRlUGFydC5zcGxpdChzZXBhcmF0b3IpLm1hcChwID0+IHBhcnNlSW50KHAsIDEwKSk7XG5cbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMyB8fCBwYXJ0cy5zb21lKGlzTmFOKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXRlY3Qgb3JkZXIgKFlNRCwgRE1ZLCBNRFkpIC0gbm93IHdpdGggQU0vUE0gaGludFxuICAgICAgICBjb25zdCBvcmRlciA9IHRoaXMuZGV0ZWN0T3JkZXIocGFydHMsIHNlcGFyYXRvciwgaGFzQU1QTSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlcGFyYXRvcixcbiAgICAgICAgICAgIG9yZGVyLFxuICAgICAgICAgICAgdGltZUZvcm1hdCxcbiAgICAgICAgICAgIGhhc1NlY29uZHNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgZGF0ZSBjb21wb25lbnQgb3JkZXIgKFlNRCwgRE1ZLCBNRFkpXG4gICAgICogQHBhcmFtIHBhcnRzIC0gRGF0ZSBwYXJ0cyBbZmlyc3QsIHNlY29uZCwgdGhpcmRdXG4gICAgICogQHBhcmFtIHNlcGFyYXRvciAtIERhdGUgc2VwYXJhdG9yICgnLycsICctJywgJy4nKVxuICAgICAqIEBwYXJhbSBoYXNBTVBNIC0gV2hldGhlciB0aGUgdGltZSB1c2VzIEFNL1BNIGZvcm1hdCAoaGludCBmb3IgVVMgZm9ybWF0KVxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGRldGVjdE9yZGVyKHBhcnRzOiBudW1iZXJbXSwgc2VwYXJhdG9yOiBzdHJpbmcsIGhhc0FNUE06IGJvb2xlYW4pOiAnWU1EJyB8ICdETVknIHwgJ01EWScge1xuICAgICAgICBjb25zdCBbZmlyc3QsIHNlY29uZCwgdGhpcmRdID0gcGFydHM7XG5cbiAgICAgICAgLy8gUlVMRSAxOiBJZiBmaXJzdCA+IDMxIFx1MjE5MiBZZWFyIGZpcnN0IFx1MjE5MiBZTURcbiAgICAgICAgaWYgKGZpcnN0ID4gMzEpIHtcbiAgICAgICAgICAgIHJldHVybiAnWU1EJzsgLy8gMjAyNC8wNi8yOCBvciAyMDI0LTA2LTI4XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSVUxFIDI6IElmIHRoaXJkID4gMzEgXHUyMTkyIFllYXIgbGFzdCBcdTIxOTIgRE1ZIG9yIE1EWVxuICAgICAgICBpZiAodGhpcmQgPiAzMSkge1xuICAgICAgICAgICAgLy8gSWYgZmlyc3QgPiAxMiBcdTIxOTIgRGF5IGZpcnN0IFx1MjE5MiBETVlcbiAgICAgICAgICAgIGlmIChmaXJzdCA+IDEyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdETVknOyAvLyAyOC8wNi8yMDI0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBzZWNvbmQgPiAxMiBcdTIxOTIgRGF5IHNlY29uZCBcdTIxOTIgTURZXG4gICAgICAgICAgICBpZiAoc2Vjb25kID4gMTIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ01EWSc7IC8vIDA2LzI4LzIwMjRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFtYmlndW91cyAoYm90aCBcdTIyNjQgMTIpLCB1c2UgaGludHNcbiAgICAgICAgICAgIGlmIChzZXBhcmF0b3IgPT09ICcuJykge1xuICAgICAgICAgICAgICAgIHJldHVybiAnRE1ZJzsgLy8gR2VybWFuIGZvcm1hdFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0FNUE0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ01EWSc7IC8vIFVTIGZvcm1hdCAobW9zdCBjb21tb24gd2l0aCAxMmgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEZWZhdWx0IHRvIERNWSAobW9yZSBjb21tb24gaW50ZXJuYXRpb25hbGx5KVxuICAgICAgICAgICAgcmV0dXJuICdETVknO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUlVMRSAzOiBJZiBmaXJzdCA+IDEyIFx1MjE5MiBEYXkgZmlyc3QgXHUyMTkyIERNWVxuICAgICAgICBpZiAoZmlyc3QgPiAxMikge1xuICAgICAgICAgICAgcmV0dXJuICdETVknOyAvLyAyOC8wNi8yMDI0XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSVUxFIDQ6IElmIHNlY29uZCA+IDEyIFx1MjE5MiBEYXkgc2Vjb25kIFx1MjE5MiBNRFlcbiAgICAgICAgaWYgKHNlY29uZCA+IDEyKSB7XG4gICAgICAgICAgICByZXR1cm4gJ01EWSc7IC8vIDA2LzI4LzIwMjRcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFtYmlndW91cyAtIHVzZSBoaW50c1xuICAgICAgICBpZiAoc2VwYXJhdG9yID09PSAnLScpIHtcbiAgICAgICAgICAgIHJldHVybiAnWU1EJzsgLy8gSVNPLWxpa2VcbiAgICAgICAgfSBlbHNlIGlmIChzZXBhcmF0b3IgPT09ICcuJykge1xuICAgICAgICAgICAgcmV0dXJuICdETVknOyAvLyBHZXJtYW5cbiAgICAgICAgfSBlbHNlIGlmIChoYXNBTVBNKSB7XG4gICAgICAgICAgICByZXR1cm4gJ01EWSc7IC8vIFVTIGZvcm1hdCAobW9zdCBjb21tb24gd2l0aCAxMmgpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWZhdWx0IHRvIERNWSAoRXVyb3BlYW4gZm9ybWF0IG1vcmUgY29tbW9uKVxuICAgICAgICByZXR1cm4gJ0RNWSc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2UgZGF0ZSBzdHJpbmcgd2l0aCBkZXRlY3RlZCBmb3JtYXRcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBwYXJzZVdpdGhGb3JtYXQoZGF0ZVN0cjogc3RyaW5nLCBmb3JtYXQ6IERhdGVGb3JtYXRJbmZvKTogbnVtYmVyIHtcbiAgICAgICAgLy8gQnVpbGQgbW9tZW50LmpzIGZvcm1hdCBzdHJpbmdcbiAgICAgICAgbGV0IGRhdGVQYXR0ZXJuOiBzdHJpbmc7XG5cbiAgICAgICAgc3dpdGNoIChmb3JtYXQub3JkZXIpIHtcbiAgICAgICAgICAgIGNhc2UgJ1lNRCc6XG4gICAgICAgICAgICAgICAgZGF0ZVBhdHRlcm4gPSBmb3JtYXQuc2VwYXJhdG9yID09PSAnLScgPyAnWVlZWS1NTS1ERCcgOiAnWVlZWS9NTS9ERCc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdETVknOlxuICAgICAgICAgICAgICAgIGRhdGVQYXR0ZXJuID0gZm9ybWF0LnNlcGFyYXRvciA9PT0gJy4nID8gJ0RELk1NLllZWVknIDogJ0REL01NL1lZWVknO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnTURZJzpcbiAgICAgICAgICAgICAgICBkYXRlUGF0dGVybiA9ICdNTS9ERC9ZWVlZJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRpbWVQYXR0ZXJuID0gZm9ybWF0LnRpbWVGb3JtYXQgPT09ICcxMmgnXG4gICAgICAgICAgICA/IChmb3JtYXQuaGFzU2Vjb25kcyA/ICdoOm1tOnNzIEEnIDogJ2g6bW0gQScpXG4gICAgICAgICAgICA6IChmb3JtYXQuaGFzU2Vjb25kcyA/ICdISDptbTpzcycgOiAnSEg6bW0nKTtcblxuICAgICAgICAvLyBBdXRvLWRldGVjdCB0aW1lIHNlcGFyYXRvciAoc3BhY2UsICdUJywgb3IgJyBhdCAnKVxuICAgICAgICAvLyBXZSBkb24ndCBzdG9yZSBpdCBhbnltb3JlIC0ganVzdCB0cnkgY29tbW9uIHBhdHRlcm5zXG4gICAgICAgIGNvbnN0IHBhdHRlcm5zID0gW1xuICAgICAgICAgICAgYCR7ZGF0ZVBhdHRlcm59ICR7dGltZVBhdHRlcm59YCwgICAgICAvLyBTdGFuZGFyZCBzcGFjZVxuICAgICAgICAgICAgYCR7ZGF0ZVBhdHRlcm59W1RdJHt0aW1lUGF0dGVybn1gLCAgICAvLyBJU08gODYwMSBUXG4gICAgICAgICAgICBgJHtkYXRlUGF0dGVybn1bIGF0IF0ke3RpbWVQYXR0ZXJufWAgIC8vIEVuZ2xpc2ggXCJhdFwiXG4gICAgICAgIF07XG5cbiAgICAgICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHBhdHRlcm5zKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbW9tZW50KGRhdGVTdHIsIHBhdHRlcm4sIHRydWUpO1xuICAgICAgICAgICAgaWYgKGRhdGUuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGUudW5peCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVHJ5IHdpdGhvdXQgc2Vjb25kcyBhcyBmYWxsYmFja1xuICAgICAgICBpZiAoZm9ybWF0Lmhhc1NlY29uZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVQYXR0ZXJuTm9TZWMgPSBmb3JtYXQudGltZUZvcm1hdCA9PT0gJzEyaCcgPyAnaDptbSBBJyA6ICdISDptbSc7XG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja1BhdHRlcm5zID0gW1xuICAgICAgICAgICAgICAgIGAke2RhdGVQYXR0ZXJufSAke3RpbWVQYXR0ZXJuTm9TZWN9YCxcbiAgICAgICAgICAgICAgICBgJHtkYXRlUGF0dGVybn1bVF0ke3RpbWVQYXR0ZXJuTm9TZWN9YCxcbiAgICAgICAgICAgICAgICBgJHtkYXRlUGF0dGVybn1bIGF0IF0ke3RpbWVQYXR0ZXJuTm9TZWN9YFxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIGZhbGxiYWNrUGF0dGVybnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gbW9tZW50KGRhdGVTdHIsIHBhdHRlcm4sIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRlLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZS51bml4KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydCBhbnkgZGF0ZSBmb3JtYXQgdG8gSVNPIDg2MDFcbiAgICAgKiBSZXR1cm5zIElTTyA4NjAxIHN0cmluZyBvciBudWxsIGlmIHBhcnNpbmcgZmFpbHNcbiAgICAgKi9cbiAgICBzdGF0aWMgY29udmVydFRvSVNPODYwMShkYXRlU3RyOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgdW5peFRpbWUgPSB0aGlzLnBhcnNlRGF0ZShkYXRlU3RyKTtcbiAgICAgICAgaWYgKHVuaXhUaW1lID09PSAwKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihgY29udmVydFRvSVNPODYwMSAtIHBhcnNpbmcgcmV0dXJuZWQgMGApO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb252ZXJ0IHRvIElTTyA4NjAxIHdpdGggbWlsbGlzZWNvbmRzXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh1bml4VGltZSAqIDEwMDApLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGZvcm1hdCBmcm9tIG11bHRpcGxlIGRhdGUgc2FtcGxlcyAobW9yZSByZWxpYWJsZSlcbiAgICAgKiBVc2VkIGZvciBiYXRjaCBwcm9jZXNzaW5nIChlLmcuLCB1cGdyYWRlIG9wZXJhdGlvbnMpXG4gICAgICovXG4gICAgc3RhdGljIGRldGVjdEZvcm1hdEZyb21TYW1wbGVzKGRhdGVzOiBzdHJpbmdbXSk6IERhdGVGb3JtYXRJbmZvIHwgbnVsbCB7XG4gICAgICAgIGlmICghZGF0ZXMgfHwgZGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyeSB0byBkZXRlY3QgZnJvbSBlYWNoIHNhbXBsZSB1bnRpbCB3ZSBmaW5kIGEgZGVjaXNpdmUgb25lXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZVN0ciBvZiBkYXRlcy5zbGljZSgwLCAyMCkpIHsgLy8gQ2hlY2sgdXAgdG8gMjAgc2FtcGxlc1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0gdGhpcy5kZXRlY3RGb3JtYXQoZGF0ZVN0cik7XG4gICAgICAgICAgICBpZiAoZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgLy8gVmVyaWZ5IGl0J3Mgbm90IGFtYmlndW91cyBieSBjaGVja2luZyBpZiB3ZSBoYXZlIHZhbHVlcyA+IDEyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVBhcnQgPSBkYXRlU3RyLnNwbGl0KC9cXHMvKVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRhdGVQYXJ0LnNwbGl0KGZvcm1hdC5zZXBhcmF0b3IpLm1hcChwID0+IHBhcnNlSW50KHAsIDEwKSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIGRlY2lzaXZlIHZhbHVlICg+IDEyIG9yID4gMzEpLCB1c2UgdGhpcyBmb3JtYXRcbiAgICAgICAgICAgICAgICBpZiAocGFydHMuc29tZShwID0+IHAgPiAxMikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBhbGwgc2FtcGxlcyBhcmUgYW1iaWd1b3VzLCByZXR1cm4gdGhlIGZpcnN0IGRldGVjdGVkIGZvcm1hdFxuICAgICAgICByZXR1cm4gdGhpcy5kZXRlY3RGb3JtYXQoZGF0ZXNbMF0pO1xuICAgIH1cbn1cblxuIiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy91cGdyYWRlL3V0aWxzL3ZlcnNpb24tdXRpbHMudHNcblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRWZXJzaW9uIHtcbiAgICBtYWpvcjogbnVtYmVyO1xuICAgIG1pbm9yOiBudW1iZXI7XG4gICAgcGF0Y2g6IG51bWJlcjtcbiAgICBvcmlnaW5hbDogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgVmVyc2lvblV0aWxzIHtcbiAgICAvKipcbiAgICAgKiBQYXJzZSB2ZXJzaW9uIHN0cmluZyBpbnRvIGNvbXBvbmVudHNcbiAgICAgKi9cbiAgICBzdGF0aWMgcGFyc2VWZXJzaW9uKHZlcnNpb246IHN0cmluZyk6IFBhcnNlZFZlcnNpb24ge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IHZlcnNpb24uc3BsaXQoJy4nKS5tYXAoTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ham9yOiBwYXJ0c1swXSB8fCAwLFxuICAgICAgICAgICAgbWlub3I6IHBhcnRzWzFdIHx8IDAsIFxuICAgICAgICAgICAgcGF0Y2g6IHBhcnRzWzJdIHx8IDAsXG4gICAgICAgICAgICBvcmlnaW5hbDogdmVyc2lvblxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBhcmUgdHdvIHZlcnNpb25zXG4gICAgICogUmV0dXJuczogLTEgKHYxIDwgdjIpLCAwICh2MSA9IHYyKSwgMSAodjEgPiB2MilcbiAgICAgKi9cbiAgICBzdGF0aWMgY29tcGFyZVZlcnNpb25zKHZlcnNpb24xOiBzdHJpbmcsIHZlcnNpb24yOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICBjb25zdCB2MSA9IHRoaXMucGFyc2VWZXJzaW9uKHZlcnNpb24xKTtcbiAgICAgICAgY29uc3QgdjIgPSB0aGlzLnBhcnNlVmVyc2lvbih2ZXJzaW9uMik7XG5cbiAgICAgICAgaWYgKHYxLm1ham9yICE9PSB2Mi5tYWpvcikgcmV0dXJuIHYxLm1ham9yIC0gdjIubWFqb3I7XG4gICAgICAgIGlmICh2MS5taW5vciAhPT0gdjIubWlub3IpIHJldHVybiB2MS5taW5vciAtIHYyLm1pbm9yO1xuICAgICAgICByZXR1cm4gdjEucGF0Y2ggLSB2Mi5wYXRjaDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB2ZXJzaW9uIGlzIGluIHJhbmdlIFttaW4sIG1heF1cbiAgICAgKi9cbiAgICBzdGF0aWMgaXNJblJhbmdlKHZlcnNpb246IHN0cmluZywgbWluVmVyc2lvbjogc3RyaW5nLCBtYXhWZXJzaW9uPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGlzQWJvdmVNaW4gPSB0aGlzLmNvbXBhcmVWZXJzaW9ucyh2ZXJzaW9uLCBtaW5WZXJzaW9uKSA+PSAwO1xuICAgICAgICBpZiAoIW1heFZlcnNpb24pIHJldHVybiBpc0Fib3ZlTWluO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaXNCZWxvd01heCA9IHRoaXMuY29tcGFyZVZlcnNpb25zKHZlcnNpb24sIG1heFZlcnNpb24pIDw9IDA7XG4gICAgICAgIHJldHVybiBpc0Fib3ZlTWluICYmIGlzQmVsb3dNYXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgbWlncmF0aW9uIHNob3VsZCBydW4gYmFzZWQgb24gdmVyc2lvbiByYW5nZVxuICAgICAqL1xuICAgIHN0YXRpYyBzaG91bGRSdW5NaWdyYXRpb24oXG4gICAgICAgIGZyb21WZXJzaW9uOiBzdHJpbmcsIFxuICAgICAgICB0b1ZlcnNpb246IHN0cmluZywgXG4gICAgICAgIG1pZ3JhdGlvbkZyb21WZXJzaW9uOiBzdHJpbmcsXG4gICAgICAgIG1pZ3JhdGlvblRvVmVyc2lvbj86IHN0cmluZ1xuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBNaWdyYXRpb24gbmVlZGVkIGlmIHVzZXIncyBvbGQgdmVyc2lvbiBpcyA+PSBtaWdyYXRpb24ncyB0YXJnZXQgcmFuZ2VcbiAgICAgICAgLy8gYW5kIHVzZXIncyBuZXcgdmVyc2lvbiBpcyA+PSBtaWdyYXRpb24ncyB0YXJnZXQgdmVyc2lvblxuICAgICAgICBcbiAgICAgICAgY29uc3QgdXNlckZyb20gPSB0aGlzLnBhcnNlVmVyc2lvbihmcm9tVmVyc2lvbik7XG4gICAgICAgIGNvbnN0IHVzZXJUbyA9IHRoaXMucGFyc2VWZXJzaW9uKHRvVmVyc2lvbik7XG4gICAgICAgIGNvbnN0IG1pZ3JhdGlvbkZyb20gPSB0aGlzLnBhcnNlVmVyc2lvbihtaWdyYXRpb25Gcm9tVmVyc2lvbik7XG4gICAgICAgIGNvbnN0IG1pZ3JhdGlvblRvID0gbWlncmF0aW9uVG9WZXJzaW9uID8gdGhpcy5wYXJzZVZlcnNpb24obWlncmF0aW9uVG9WZXJzaW9uKSA6IHVzZXJUbztcblxuICAgICAgICAvLyBVc2VyIHdhcyBpbiB0aGUgcmFuZ2UgdGhhdCBuZWVkcyB0aGlzIG1pZ3JhdGlvblxuICAgICAgICBjb25zdCB3YXNJblJhbmdlID0gdGhpcy5jb21wYXJlVmVyc2lvbnMoZnJvbVZlcnNpb24sIG1pZ3JhdGlvbkZyb21WZXJzaW9uKSA+PSAwO1xuICAgICAgICBcbiAgICAgICAgLy8gVXNlciBpcyB1cGdyYWRpbmcgdG8gYSB2ZXJzaW9uIHRoYXQgaGFzIHRoaXMgbWlncmF0aW9uXG4gICAgICAgIGNvbnN0IGlzVXBncmFkaW5nVG8gPSB0aGlzLmNvbXBhcmVWZXJzaW9ucyh0b1ZlcnNpb24sIG1pZ3JhdGlvblRvLm9yaWdpbmFsKSA+PSAwO1xuXG4gICAgICAgIHJldHVybiB3YXNJblJhbmdlICYmIGlzVXBncmFkaW5nVG87XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCB2ZXJzaW9ucyBiZXR3ZWVuIHR3byB2ZXJzaW9ucyAoZm9yIHNlcXVlbnRpYWwgbWlncmF0aW9ucylcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0VmVyc2lvbnNJblJhbmdlKGZyb21WZXJzaW9uOiBzdHJpbmcsIHRvVmVyc2lvbjogc3RyaW5nLCBhdmFpbGFibGVWZXJzaW9uczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBhdmFpbGFibGVWZXJzaW9uc1xuICAgICAgICAgICAgLmZpbHRlcih2ID0+IFxuICAgICAgICAgICAgICAgIHRoaXMuY29tcGFyZVZlcnNpb25zKHYsIGZyb21WZXJzaW9uKSA+IDAgJiYgXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wYXJlVmVyc2lvbnModiwgdG9WZXJzaW9uKSA8PSAwXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gdGhpcy5jb21wYXJlVmVyc2lvbnMoYSwgYikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcm1hdCB2ZXJzaW9uIGZvciBkaXNwbGF5XG4gICAgICovXG4gICAgc3RhdGljIGZvcm1hdFZlcnNpb24odmVyc2lvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gdGhpcy5wYXJzZVZlcnNpb24odmVyc2lvbik7XG4gICAgICAgIHJldHVybiBgdiR7cGFyc2VkLm1ham9yfS4ke3BhcnNlZC5taW5vcn0uJHtwYXJzZWQucGF0Y2h9YDtcbiAgICB9XG59IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy91cGdyYWRlL3VwZ3JhZGUtaW50ZXJmYWNlLnRzXG5pbXBvcnQgdHlwZSBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQgeyBWZXJzaW9uVXRpbHMgfSBmcm9tIFwiLi91dGlscy92ZXJzaW9uLXV0aWxzXCI7XG5pbXBvcnQgeyBzaG93RGlhbG9nIH0gZnJvbSBcIi4uL2RpYWxvZ3NcIjtcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9sb2dnZXJcIjtcblxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuXG5leHBvcnQgaW50ZXJmYWNlIE9wZXJhdGlvblJlc3VsdCB7XG4gICAgc3VjY2VzczogYm9vbGVhbjtcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgZGV0YWlscz86IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcGdyYWRlQ29udGV4dCB7XG4gICAgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luO1xuICAgIGZyb21WZXJzaW9uOiBzdHJpbmc7XG4gICAgdG9WZXJzaW9uOiBzdHJpbmc7XG4gICAgcGx1Z2luRGF0YTogYW55O1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVXBncmFkZU9wZXJhdGlvbiB7XG4gICAgYWJzdHJhY3QgcmVhZG9ubHkgaWQ6IHN0cmluZztcbiAgICBhYnN0cmFjdCByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gICAgYWJzdHJhY3QgcmVhZG9ubHkgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBhYnN0cmFjdCByZWFkb25seSB0eXBlOiAnYXV0b21hdGljJyB8ICdtYW51YWwnO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgb3BlcmF0aW9uIGNhbiBydW4gKHByZXJlcXVpc2l0ZXMpXG4gICAgICovXG4gICAgYXN5bmMgY2FuUnVuKGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGUgdGhlIG9wZXJhdGlvblxuICAgICAqL1xuICAgIGFic3RyYWN0IGV4ZWN1dGUoY29udGV4dDogVXBncmFkZUNvbnRleHQpOiBQcm9taXNlPE9wZXJhdGlvblJlc3VsdD47XG5cbiAgICAvKipcbiAgICAgKiBWZXJpZnkgb3BlcmF0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHlcbiAgICAgKi9cbiAgICBhc3luYyB2ZXJpZnkoY29udGV4dDogVXBncmFkZUNvbnRleHQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVmVyc2lvblVwZ3JhZGUge1xuICAgIGFic3RyYWN0IHJlYWRvbmx5IHZlcnNpb246IHN0cmluZztcbiAgICBhYnN0cmFjdCByZWFkb25seSBhdXRvbWF0aWNPcGVyYXRpb25zOiBVcGdyYWRlT3BlcmF0aW9uW107XG4gICAgYWJzdHJhY3QgcmVhZG9ubHkgbWFudWFsT3BlcmF0aW9uczogVXBncmFkZU9wZXJhdGlvbltdO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhpcyB1cGdyYWRlIHNob3VsZCBydW4gZm9yIHRoZSB2ZXJzaW9uIHJhbmdlXG4gICAgICovXG4gICAgc2hvdWxkUnVuKGZyb21WZXJzaW9uOiBzdHJpbmcsIHRvVmVyc2lvbjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIFJ1biBpZiB0YXJnZXQgdmVyc2lvbiA+PSB0aGlzIHVwZ3JhZGUgdmVyc2lvbiBhbmQgdXNlciBpcyB1cGdyYWRpbmcgdG8vcGFzdCBpdFxuICAgICAgICByZXR1cm4gVmVyc2lvblV0aWxzLmNvbXBhcmVWZXJzaW9ucyh0b1ZlcnNpb24sIHRoaXMudmVyc2lvbikgPj0gMCAmJlxuICAgICAgICAgICAgICAgVmVyc2lvblV0aWxzLmNvbXBhcmVWZXJzaW9ucyhmcm9tVmVyc2lvbiwgdGhpcy52ZXJzaW9uKSA8IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBhbGwgYXV0b21hdGljIG9wZXJhdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyBleGVjdXRlQXV0b21hdGljT3BlcmF0aW9ucyhjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8e1xuICAgICAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgICAgICByZXN1bHRzOiBBcnJheTx7b3BlcmF0aW9uSWQ6IHN0cmluZzsgcmVzdWx0OiBPcGVyYXRpb25SZXN1bHR9PjtcbiAgICB9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHM6IEFycmF5PHtvcGVyYXRpb25JZDogc3RyaW5nOyByZXN1bHQ6IE9wZXJhdGlvblJlc3VsdH0+ID0gW107XG4gICAgICAgIGxldCBhbGxTdWNjZXNzID0gdHJ1ZTtcblxuICAgICAgICBmb3IgKGNvbnN0IG9wZXJhdGlvbiBvZiB0aGlzLmF1dG9tYXRpY09wZXJhdGlvbnMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBjb21wbGV0ZWRcbiAgICAgICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5pc09wZXJhdGlvbkNvbXBsZXRlZChvcGVyYXRpb24uaWQsIGNvbnRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25JZDogb3BlcmF0aW9uLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IFwiQWxyZWFkeSBjb21wbGV0ZWRcIiB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjYW4gcnVuXG4gICAgICAgICAgICAgICAgaWYgKCEoYXdhaXQgb3BlcmF0aW9uLmNhblJ1bihjb250ZXh0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbklkOiBvcGVyYXRpb24uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiUHJlcmVxdWlzaXRlcyBub3QgbWV0XCIgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYWxsU3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIG9wZXJhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZXJhdGlvbi5leGVjdXRlKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7IG9wZXJhdGlvbklkOiBvcGVyYXRpb24uaWQsIHJlc3VsdCB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1hcmtPcGVyYXRpb25Db21wbGV0ZWQob3BlcmF0aW9uLmlkLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbGxTdWNjZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yUmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYE9wZXJhdGlvbiBmYWlsZWQ6ICR7ZXJyb3J9YCxcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogeyBlcnJvcjogU3RyaW5nKGVycm9yKSB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goeyBvcGVyYXRpb25JZDogb3BlcmF0aW9uLmlkLCByZXN1bHQ6IGVycm9yUmVzdWx0IH0pO1xuICAgICAgICAgICAgICAgIGFsbFN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGFsbFN1Y2Nlc3MsIHJlc3VsdHMgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IG1hbnVhbCBvcGVyYXRpb25zIGRpYWxvZyBhbmQgZXhlY3V0ZSBzZWxlY3RlZCBvbmVzXG4gICAgICovXG4gICAgYXN5bmMgc2hvd01hbnVhbE9wZXJhdGlvbnNEaWFsb2coY29udGV4dDogVXBncmFkZUNvbnRleHQpOiBQcm9taXNlPHtcbiAgICAgICAgc3VjY2VzczogYm9vbGVhbjtcbiAgICAgICAgcmVzdWx0czogQXJyYXk8e29wZXJhdGlvbklkOiBzdHJpbmc7IHJlc3VsdDogT3BlcmF0aW9uUmVzdWx0fT47XG4gICAgfT4ge1xuICAgICAgICAvLyBGaWx0ZXIgb3BlcmF0aW9ucyB0aGF0IGNhbiBydW4gYW5kIGFyZW4ndCBjb21wbGV0ZWRcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlT3BlcmF0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG9wZXJhdGlvbiBvZiB0aGlzLm1hbnVhbE9wZXJhdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghKGF3YWl0IHRoaXMuaXNPcGVyYXRpb25Db21wbGV0ZWQob3BlcmF0aW9uLmlkLCBjb250ZXh0KSkgJiZcbiAgICAgICAgICAgICAgICBhd2FpdCBvcGVyYXRpb24uY2FuUnVuKGNvbnRleHQpKSB7XG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlT3BlcmF0aW9ucy5wdXNoKG9wZXJhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXZhaWxhYmxlT3BlcmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHJlc3VsdHM6IFtdIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCdWlsZCBkaWFsb2cgY29udGVudFxuICAgICAgICBjb25zdCBwYXJhZ3JhcGhzID0gW1xuICAgICAgICAgICAgYCoqVmVyc2lvbiAke3RoaXMudmVyc2lvbn0gTWFudWFsIE9wZXJhdGlvbnMqKmAsXG4gICAgICAgICAgICBcIlRoZSBmb2xsb3dpbmcgb3B0aW9uYWwgb3BlcmF0aW9ucyBhcmUgYXZhaWxhYmxlOlwiLFxuICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIC4uLmF2YWlsYWJsZU9wZXJhdGlvbnMubWFwKG9wID0+IGBcdTIwMjIgKioke29wLm5hbWV9Kio6ICR7b3AuZGVzY3JpcHRpb259YClcbiAgICAgICAgXTtcblxuICAgICAgICBjb25zdCBzaG91bGRFeGVjdXRlID0gYXdhaXQgc2hvd0RpYWxvZyhcbiAgICAgICAgICAgIGNvbnRleHQucGx1Z2luLmFwcCxcbiAgICAgICAgICAgIFwiY29uZmlybWF0aW9uXCIsXG4gICAgICAgICAgICBgT3B0aW9uYWwgT3BlcmF0aW9ucyAtIHYke3RoaXMudmVyc2lvbn1gLFxuICAgICAgICAgICAgcGFyYWdyYXBocyxcbiAgICAgICAgICAgIFwiVGhlc2Ugb3BlcmF0aW9ucyBhcmUgb3B0aW9uYWwgYW5kIGNhbiBiZSBydW4gbGF0ZXIgZnJvbSBTZXR0aW5ncyBcdTIxOTIgTWlncmF0aW9uc1wiLFxuICAgICAgICAgICAgeyBidXR0b24xOiBcIlJ1biBBbGwgTm93XCIsIGJ1dHRvbjI6IFwiU2tpcCAoUnVuIExhdGVyKVwiIH1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXN1bHRzOiBBcnJheTx7b3BlcmF0aW9uSWQ6IHN0cmluZzsgcmVzdWx0OiBPcGVyYXRpb25SZXN1bHR9PiA9IFtdO1xuXG4gICAgICAgIGlmIChzaG91bGRFeGVjdXRlKSB7XG4gICAgICAgICAgICAvLyBFeGVjdXRlIGFsbCBhdmFpbGFibGUgbWFudWFsIG9wZXJhdGlvbnNcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3BlcmF0aW9uIG9mIGF2YWlsYWJsZU9wZXJhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcGVyYXRpb24uZXhlY3V0ZShjb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsgb3BlcmF0aW9uSWQ6IG9wZXJhdGlvbi5pZCwgcmVzdWx0IH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tYXJrT3BlcmF0aW9uQ29tcGxldGVkKG9wZXJhdGlvbi5pZCwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvclJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYE9wZXJhdGlvbiBmYWlsZWQ6ICR7ZXJyb3J9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgZXJyb3I6IFN0cmluZyhlcnJvcikgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goeyBvcGVyYXRpb25JZDogb3BlcmF0aW9uLmlkLCByZXN1bHQ6IGVycm9yUmVzdWx0IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgc3VjY2VzczogcmVzdWx0cy5ldmVyeShyID0+IHIucmVzdWx0LnN1Y2Nlc3MpLCBcbiAgICAgICAgICAgIHJlc3VsdHMgXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IG1hbnVhbCBvcGVyYXRpb25zIHN0YXR1cyBmb3Igc2V0dGluZ3MgVUlcbiAgICAgKi9cbiAgICBhc3luYyBnZXRNYW51YWxPcGVyYXRpb25zU3RhdHVzKGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxBcnJheTx7XG4gICAgICAgIG9wZXJhdGlvbjogVXBncmFkZU9wZXJhdGlvbjtcbiAgICAgICAgY29tcGxldGVkOiBib29sZWFuO1xuICAgICAgICBjYW5SdW46IGJvb2xlYW47XG4gICAgfT4+IHtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IG9wZXJhdGlvbiBvZiB0aGlzLm1hbnVhbE9wZXJhdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZCA9IGF3YWl0IHRoaXMuaXNPcGVyYXRpb25Db21wbGV0ZWQob3BlcmF0aW9uLmlkLCBjb250ZXh0KTtcbiAgICAgICAgICAgIGNvbnN0IGNhblJ1biA9ICFjb21wbGV0ZWQgJiYgYXdhaXQgb3BlcmF0aW9uLmNhblJ1bihjb250ZXh0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQsXG4gICAgICAgICAgICAgICAgY2FuUnVuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIHNpbmdsZSBtYW51YWwgb3BlcmF0aW9uIChmcm9tIHNldHRpbmdzKVxuICAgICAqL1xuICAgIGFzeW5jIGV4ZWN1dGVNYW51YWxPcGVyYXRpb24ob3BlcmF0aW9uSWQ6IHN0cmluZywgY29udGV4dDogVXBncmFkZUNvbnRleHQpOiBQcm9taXNlPE9wZXJhdGlvblJlc3VsdD4ge1xuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSB0aGlzLm1hbnVhbE9wZXJhdGlvbnMuZmluZChvcCA9PiBvcC5pZCA9PT0gb3BlcmF0aW9uSWQpO1xuICAgICAgICBpZiAoIW9wZXJhdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiT3BlcmF0aW9uIG5vdCBmb3VuZFwiIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXdhaXQgdGhpcy5pc09wZXJhdGlvbkNvbXBsZXRlZChvcGVyYXRpb24uaWQsIGNvbnRleHQpKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBcIkFscmVhZHkgY29tcGxldGVkXCIgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghKGF3YWl0IG9wZXJhdGlvbi5jYW5SdW4oY29udGV4dCkpKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJQcmVyZXF1aXNpdGVzIG5vdCBtZXRcIiB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZXJhdGlvbi5leGVjdXRlKGNvbnRleHQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tYXJrT3BlcmF0aW9uQ29tcGxldGVkKG9wZXJhdGlvbi5pZCwgY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgT3BlcmF0aW9uIGZhaWxlZDogJHtlcnJvcn1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgZXJyb3I6IFN0cmluZyhlcnJvcikgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIG9wZXJhdGlvbiB3YXMgY29tcGxldGVkIHVzaW5nIHN0cnVjdHVyZWQgdXBncmFkZSBoaXN0b3J5XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBpc09wZXJhdGlvbkNvbXBsZXRlZChvcGVyYXRpb25JZDogc3RyaW5nLCBjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY29udGV4dC5wbHVnaW4ubG9hZERhdGEoKTtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uS2V5ID0gYG9wZXJhdGlvbl8ke3RoaXMudmVyc2lvbi5yZXBsYWNlKC9cXC4vZywgJ18nKX1fJHtvcGVyYXRpb25JZH1gO1xuICAgICAgICByZXR1cm4gZGF0YT8udXBncmFkZUhpc3Rvcnk/LmNvbXBsZXRlZE9wZXJhdGlvbnM/LltvcGVyYXRpb25LZXldPy5jb21wbGV0ZWQgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFyayBvcGVyYXRpb24gYXMgY29tcGxldGVkIHVzaW5nIHN0cnVjdHVyZWQgdXBncmFkZSBoaXN0b3J5XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBtYXJrT3BlcmF0aW9uQ29tcGxldGVkKG9wZXJhdGlvbklkOiBzdHJpbmcsIGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjb250ZXh0LnBsdWdpbi5sb2FkRGF0YSgpIHx8IHt9O1xuICAgICAgICBcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB1cGdyYWRlIGhpc3Rvcnkgc3RydWN0dXJlIGlmIG5lZWRlZFxuICAgICAgICBpZiAoIWRhdGEudXBncmFkZUhpc3RvcnkpIHtcbiAgICAgICAgICAgIGRhdGEudXBncmFkZUhpc3RvcnkgPSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVkVXBncmFkZXM6IHt9LFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZE9wZXJhdGlvbnM6IHt9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBNYXJrIG9wZXJhdGlvbiBhcyBjb21wbGV0ZWQgaW4gc3RydWN0dXJlZCBmb3JtYXRcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uS2V5ID0gYG9wZXJhdGlvbl8ke3RoaXMudmVyc2lvbi5yZXBsYWNlKC9cXC4vZywgJ18nKX1fJHtvcGVyYXRpb25JZH1gO1xuICAgICAgICBkYXRhLnVwZ3JhZGVIaXN0b3J5LmNvbXBsZXRlZE9wZXJhdGlvbnNbb3BlcmF0aW9uS2V5XSA9IHtcbiAgICAgICAgICAgIG9wZXJhdGlvbklkOiBvcGVyYXRpb25JZCxcbiAgICAgICAgICAgIHZlcnNpb246IHRoaXMudmVyc2lvbixcbiAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGNvbXBsZXRlZDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgY29udGV4dC5wbHVnaW4uc2F2ZURhdGEoZGF0YSk7XG4gICAgfVxufSIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuXG4vLyBzcmMvdXBncmFkZS92ZXJzaW9ucy91cGdyYWRlLTEuMS4wLnRzXG5pbXBvcnQgeyBWZXJzaW9uVXBncmFkZSwgVXBncmFkZU9wZXJhdGlvbiwgVXBncmFkZUNvbnRleHQsIE9wZXJhdGlvblJlc3VsdCB9IGZyb20gXCIuLi91cGdyYWRlLWludGVyZmFjZVwiO1xuaW1wb3J0IHsgVXBncmFkZVByb2dyZXNzTW9kYWwgfSBmcm9tIFwiLi4vdXRpbHMvcHJvZ3Jlc3MtbW9kYWxcIjtcbmltcG9ydCB7IHNob3dEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZGlhbG9nc1wiO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCIuLi8uLi9sb2dnZXJcIjtcblxuLyoqXG4gKiBEZWxldGUgb2xkIGNvbnZlcnNhdGlvbiBjYXRhbG9nIChhdXRvbWF0aWMgb3BlcmF0aW9uKVxuICovXG5jbGFzcyBEZWxldGVDYXRhbG9nT3BlcmF0aW9uIGV4dGVuZHMgVXBncmFkZU9wZXJhdGlvbiB7XG4gICAgcmVhZG9ubHkgaWQgPSBcImRlbGV0ZS1jYXRhbG9nXCI7XG4gICAgcmVhZG9ubHkgbmFtZSA9IFwiRGVsZXRlIE9sZCBDYXRhbG9nXCI7XG4gICAgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSBcIlJlbW92ZSBsZWdhY3kgY29udmVyc2F0aW9uIGNhdGFsb2cgZGF0YVwiO1xuICAgIHJlYWRvbmx5IHR5cGUgPSBcImF1dG9tYXRpY1wiIGFzIGNvbnN0O1xuXG4gICAgYXN5bmMgY2FuUnVuKGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBPcGVyYXRpb24gbG9hZHMgaXRzIG93biBkYXRhIC0gbWFuYWdlciBzdGF5cyB2ZXJzaW9uLWFnbm9zdGljXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY29udGV4dC5wbHVnaW4ubG9hZERhdGEoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhdGFsb2cgPSBkYXRhPy5jb252ZXJzYXRpb25DYXRhbG9nO1xuICAgICAgICAgICAgY29uc3QgaGFzRGF0YSA9IGNhdGFsb2cgJiYgdHlwZW9mIGNhdGFsb2cgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKGNhdGFsb2cpLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChjYXRhbG9nKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGFzRGF0YTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRGVsZXRlQ2F0YWxvZy5jYW5SdW4gZmFpbGVkOmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUoY29udGV4dDogVXBncmFkZUNvbnRleHQpOiBQcm9taXNlPE9wZXJhdGlvblJlc3VsdD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBPcGVyYXRpb24gbG9hZHMgaXRzIG93biBkYXRhIC0gbm90IHJlbHlpbmcgb24gY29udGV4dC5wbHVnaW5EYXRhXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY29udGV4dC5wbHVnaW4ubG9hZERhdGEoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhdGFsb2cgPSBkYXRhPy5jb252ZXJzYXRpb25DYXRhbG9nIHx8IHt9O1xuICAgICAgICAgICAgY29uc3QgY2F0YWxvZ1NpemUgPSBPYmplY3Qua2V5cyhjYXRhbG9nKS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChjYXRhbG9nU2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTm8gbGVnYWN5IGNhdGFsb2cgZm91bmQgdG8gZGVsZXRlXCJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDUklUSUNBTCBGSVg6IFByZXNlcnZlIGltcG9ydGVkQXJjaGl2ZXMgZXhwbGljaXRseVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJbXBvcnRlZEFyY2hpdmVzID0gZGF0YT8uaW1wb3J0ZWRBcmNoaXZlcztcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGNsZWFuZWQgZGF0YSB3aXRob3V0IGNhdGFsb2cgQlVUIHByZXNlcnZlIGltcG9ydGVkQXJjaGl2ZXNcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuZWREYXRhID0ge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzOiBkYXRhLnNldHRpbmdzIHx8IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLFxuICAgICAgICAgICAgICAgIC8vIENSSVRJQ0FMIEZJWDogRm9yY2UgcHJlc2VydmF0aW9uIG9mIGltcG9ydGVkQXJjaGl2ZXNcbiAgICAgICAgICAgICAgICBpbXBvcnRlZEFyY2hpdmVzOiBleGlzdGluZ0ltcG9ydGVkQXJjaGl2ZXMgfHwge30sXG4gICAgICAgICAgICAgICAgdXBncmFkZUhpc3Rvcnk6IGRhdGEudXBncmFkZUhpc3RvcnkgfHwge1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRVcGdyYWRlczoge30sXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZE9wZXJhdGlvbnM6IHt9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgY29udmVyc2F0aW9uQ2F0YWxvZyAtIGtleSBjaGFuZ2VcbiAgICAgICAgICAgICAgICBjYXRhbG9nRGVsZXRpb25EYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgY2F0YWxvZ0RlbGV0aW9uU3RhdHM6IHsgZW50cmllc0RlbGV0ZWQ6IGNhdGFsb2dTaXplIH1cbiAgICAgICAgICAgIH07XG5cblxuICAgICAgICAgICAgLy8gU2F2ZSBjbGVhbmVkIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IGNvbnRleHQucGx1Z2luLnNhdmVEYXRhKGNsZWFuZWREYXRhKTtcblxuICAgICAgICAgICAgLy8gVmVyaWZ5IHByZXNlcnZhdGlvbiB3b3JrZWRcbiAgICAgICAgICAgIGNvbnN0IHZlcmlmeURhdGEgPSBhd2FpdCBjb250ZXh0LnBsdWdpbi5sb2FkRGF0YSgpO1xuICAgICAgICAgICAgY29uc3QgdmVyaWZ5QXJjaGl2ZXMgPSB2ZXJpZnlEYXRhPy5pbXBvcnRlZEFyY2hpdmVzIHx8IHt9O1xuXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModmVyaWZ5QXJjaGl2ZXMpLmxlbmd0aCA9PT0gMCAmJiBPYmplY3Qua2V5cyhleGlzdGluZ0ltcG9ydGVkQXJjaGl2ZXMgfHwge30pLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYERlbGV0ZUNhdGFsb2c6IENSSVRJQ0FMIC0gaW1wb3J0ZWRBcmNoaXZlcyB3ZXJlIGxvc3QgZHVyaW5nIHNhdmUhYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBDcml0aWNhbCBlcnJvcjogaW1wb3J0ZWRBcmNoaXZlcyB3ZXJlIGxvc3QgZHVyaW5nIG1pZ3JhdGlvbmAsXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVDb3VudDogT2JqZWN0LmtleXMoZXhpc3RpbmdJbXBvcnRlZEFyY2hpdmVzIHx8IHt9KS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZnRlckNvdW50OiBPYmplY3Qua2V5cyh2ZXJpZnlBcmNoaXZlcykubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYExlZ2FjeSBjYXRhbG9nIGRlbGV0ZWQ6ICR7Y2F0YWxvZ1NpemV9IGVudHJpZXMgcmVtb3ZlZCwgJHtPYmplY3Qua2V5cyh2ZXJpZnlBcmNoaXZlcykubGVuZ3RofSBpbXBvcnRlZCBhcmNoaXZlcyBwcmVzZXJ2ZWRgLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgZW50cmllc0RlbGV0ZWQ6IGNhdGFsb2dTaXplLCBhcmNoaXZlc1ByZXNlcnZlZDogT2JqZWN0LmtleXModmVyaWZ5QXJjaGl2ZXMpLmxlbmd0aCB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoYERlbGV0ZUNhdGFsb2cuZXhlY3V0ZSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGRlbGV0ZSBsZWdhY3kgY2F0YWxvZzogJHtlcnJvcn1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgZXJyb3I6IFN0cmluZyhlcnJvcikgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHZlcmlmeShjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNvbnRleHQucGx1Z2luLmxvYWREYXRhKCk7XG4gICAgICAgICAgICBjb25zdCBoYXNOb0NhdGFsb2cgPSAhZGF0YT8uY29udmVyc2F0aW9uQ2F0YWxvZztcbiAgICAgICAgICAgIGNvbnN0IGhhc0ltcG9ydGVkQXJjaGl2ZXMgPSBkYXRhPy5pbXBvcnRlZEFyY2hpdmVzICYmIE9iamVjdC5rZXlzKGRhdGEuaW1wb3J0ZWRBcmNoaXZlcykubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU3VjY2VzcyBpZiBjYXRhbG9nIGlzIGdvbmUgQU5EIGltcG9ydGVkQXJjaGl2ZXMgYXJlIHByZXNlcnZlZCAoaWYgdGhleSBleGlzdGVkKVxuICAgICAgICAgICAgcmV0dXJuIGhhc05vQ2F0YWxvZztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRGVsZXRlQ2F0YWxvZy52ZXJpZnkgZmFpbGVkOmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBDbGVhbiBtZXRhZGF0YSBmcm9tIGNvbnZlcnNhdGlvbiBub3RlcyBhbmQgYWRkIHBsdWdpbl92ZXJzaW9uIChhdXRvbWF0aWMgb3BlcmF0aW9uKVxuICovXG5jbGFzcyBDbGVhbk1ldGFkYXRhT3BlcmF0aW9uIGV4dGVuZHMgVXBncmFkZU9wZXJhdGlvbiB7XG4gICAgcmVhZG9ubHkgaWQgPSBcImNsZWFuLW1ldGFkYXRhXCI7XG4gICAgcmVhZG9ubHkgbmFtZSA9IFwiQ2xlYW4gJiBWZXJzaW9uIE1ldGFkYXRhXCI7XG4gICAgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSBcIlJlbW92ZSB1bm5lY2Vzc2FyeSBtZXRhZGF0YSBhbmQgYWRkIHBsdWdpbiB2ZXJzaW9uIHRvIGNvbnZlcnNhdGlvbiBub3Rlc1wiO1xuICAgIHJlYWRvbmx5IHR5cGUgPSBcImF1dG9tYXRpY1wiIGFzIGNvbnN0O1xuXG4gICAgYXN5bmMgY2FuUnVuKGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25Gb2xkZXIgPSBjb250ZXh0LnBsdWdpbi5zZXR0aW5ncy5jb252ZXJzYXRpb25Gb2xkZXI7XG4gICAgICAgICAgICBjb25zdCBhbGxGaWxlcyA9IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpbHRlciBmaWxlcyBpbiBjb252ZXJzYXRpb24gZm9sZGVyIGJ1dCBFWENMVURFIFJlcG9ydHMgYW5kIEF0dGFjaG1lbnRzXG4gICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25GaWxlcyA9IGFsbEZpbGVzLmZpbHRlcihmaWxlID0+IHtcbiAgICAgICAgICAgICAgICAvLyBNdXN0IGJlIGluIGNvbnZlcnNhdGlvbiBmb2xkZXJcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGUucGF0aC5zdGFydHNXaXRoKGNvbnZlcnNhdGlvbkZvbGRlcikpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgIC8vIEVYQ0xVREUgUmVwb3J0cyBhbmQgQXR0YWNobWVudHMgZm9sZGVyc1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGZpbGUucGF0aC5zdWJzdHJpbmcoY29udmVyc2F0aW9uRm9sZGVyLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChyZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnUmVwb3J0cy8nKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ0F0dGFjaG1lbnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdyZXBvcnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdhdHRhY2htZW50cy8nKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNhblJ1biA9IGNvbnZlcnNhdGlvbkZpbGVzLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICByZXR1cm4gY2FuUnVuO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBDbGVhbk1ldGFkYXRhLmNhblJ1biBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8T3BlcmF0aW9uUmVzdWx0PiB7XG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZvbGRlciA9IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLmNvbnZlcnNhdGlvbkZvbGRlcjtcbiAgICAgICAgICAgIGNvbnN0IGFsbEZpbGVzID0gY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmlsdGVyIGNvbnZlcnNhdGlvbiBmaWxlcyAoZXhjbHVkZSBSZXBvcnRzL0F0dGFjaG1lbnRzKVxuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlLnBhdGguc3RhcnRzV2l0aChjb252ZXJzYXRpb25Gb2xkZXIpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBmaWxlLnBhdGguc3Vic3RyaW5nKGNvbnZlcnNhdGlvbkZvbGRlci5sZW5ndGggKyAxKTtcbiAgICAgICAgICAgICAgICBpZiAocmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ1JlcG9ydHMvJykgfHwgXG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdBdHRhY2htZW50cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgncmVwb3J0cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnYXR0YWNobWVudHMvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoY29udmVyc2F0aW9uRmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJObyBjb252ZXJzYXRpb24gZmlsZXMgZm91bmQgdG8gY2xlYW5cIixcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogeyBwcm9jZXNzZWQ6IDAsIGNsZWFuZWQ6IDAsIGVycm9yczogMCB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBsZXQgcHJvY2Vzc2VkID0gMDtcbiAgICAgICAgICAgIGxldCBjbGVhbmVkID0gMDtcbiAgICAgICAgICAgIGxldCBlcnJvcnMgPSAwO1xuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGZpbGVzIGluIHNtYWxsZXIgYmF0Y2hlcyB0byBhdm9pZCBibG9ja2luZ1xuICAgICAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnZlcnNhdGlvbkZpbGVzLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaCA9IGNvbnZlcnNhdGlvbkZpbGVzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBiYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWQrKztcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYW5lZENvbnRlbnQgPSB0aGlzLmNsZWFuRnJvbnRtYXR0ZXJSb2J1c3QoY29udGVudCwgY29udGV4dC50b1ZlcnNpb24sIGZpbGUuYmFzZW5hbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudCAhPT0gY2xlYW5lZENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGNsZWFuZWRDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhbmVkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBjbGVhbmluZyBtZXRhZGF0YSBmb3IgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNtYWxsIGRlbGF5IGJldHdlZW4gYmF0Y2hlcyB0byBwcmV2ZW50IGJsb2NraW5nXG4gICAgICAgICAgICAgICAgaWYgKGkgKyBiYXRjaFNpemUgPCBjb252ZXJzYXRpb25GaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZXJyb3JzID09PSAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBNZXRhZGF0YSBjbGVhbnVwIGNvbXBsZXRlZDogJHtjbGVhbmVkfSBmaWxlcyBjbGVhbmVkLCAke2Vycm9yc30gZXJyb3JzYCxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7IHByb2Nlc3NlZCwgY2xlYW5lZCwgZXJyb3JzIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgQ2xlYW5NZXRhZGF0YS5leGVjdXRlIGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBNZXRhZGF0YSBjbGVhbnVwIGZhaWxlZDogJHtlcnJvcn1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgZXJyb3I6IFN0cmluZyhlcnJvcikgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFuIGZyb250bWF0dGVyIHdpdGggcm9idXN0IHBhcnNpbmcgYW5kIHNhZmUgYWxpYXMgZ2VuZXJhdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgY2xlYW5Gcm9udG1hdHRlclJvYnVzdChjb250ZW50OiBzdHJpbmcsIHBsdWdpblZlcnNpb246IHN0cmluZywgZmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIC8vIFRyeSB0byBleHRyYWN0IGZyb250bWF0dGVyIG1hbnVhbGx5IChtb3JlIHJvYnVzdCB0aGFuIG1ldGFkYXRhQ2FjaGUpXG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHtcbiAgICAgICAgICAgIC8vIE5vIGZyb250bWF0dGVyIGZvdW5kIC0gY2hlY2sgaWYgdGhpcyBsb29rcyBsaWtlIGEgTmV4dXMgZmlsZVxuICAgICAgICAgICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ25leHVzOicpIHx8IGNvbnRlbnQuaW5jbHVkZXMoJ2NvbnZlcnNhdGlvbl9pZDonKSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKGBGaWxlICR7ZmlsZU5hbWV9IGFwcGVhcnMgdG8gYmUgTmV4dXMgYnV0IGhhcyBtYWxmb3JtZWQgZnJvbnRtYXR0ZXJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXJDb250ZW50ID0gZnJvbnRtYXR0ZXJNYXRjaFsxXTtcbiAgICAgICAgY29uc3QgcmVzdE9mQ29udGVudCA9IGNvbnRlbnQuc3Vic3RyaW5nKGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoKTtcblxuICAgICAgICAvLyBQYXJzZSBmcm9udG1hdHRlciBsaW5lcyBtYW51YWxseSAobW9yZSByb2J1c3QgdGhhbiBZQU1MIHBhcnNpbmcpXG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyRGF0YTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgICBjb25zdCBsaW5lcyA9IGZyb250bWF0dGVyQ29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9uSW5kZXggPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICAgICAgICAgIGlmIChjb2xvbkluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGxpbmUuc3Vic3RyaW5nKDAsIGNvbG9uSW5kZXgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBsaW5lLnN1YnN0cmluZyhjb2xvbkluZGV4ICsgMSkudHJpbSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdW90ZXMgaWYgcHJlc2VudFxuICAgICAgICAgICAgICAgIGlmICgodmFsdWUuc3RhcnRzV2l0aCgnXCInKSAmJiB2YWx1ZS5lbmRzV2l0aCgnXCInKSkgfHwgXG4gICAgICAgICAgICAgICAgICAgICh2YWx1ZS5zdGFydHNXaXRoKFwiJ1wiKSAmJiB2YWx1ZS5lbmRzV2l0aChcIidcIikpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSwgLTEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmcm9udG1hdHRlckRhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIE5leHVzIGNvbnZlcnNhdGlvbiBmaWxlXG4gICAgICAgIGNvbnN0IG5leHVzSWQgPSAnbmV4dXMtYWktY2hhdC1pbXBvcnRlcic7IC8vIEhhcmQtY29kZWQgZm9yIHNhZmV0eVxuICAgICAgICBpZiAoZnJvbnRtYXR0ZXJEYXRhLm5leHVzICE9PSBuZXh1c0lkKSB7XG4gICAgICAgICAgICAvLyBOb3QgYSBOZXh1cyBmaWxlLCBza2lwXG4gICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdlbmVyYXRlIHNhZmUgYWxpYXMgZnJvbSBmaWxlbmFtZSAobW9yZSByb2J1c3QgdGhhbiB0aXRsZSBwYXJzaW5nKVxuICAgICAgICBjb25zdCBzYWZlQWxpYXMgPSB0aGlzLmdlbmVyYXRlU2FmZUFsaWFzKGZpbGVOYW1lKTtcblxuICAgICAgICAvLyBCdWlsZCBuZXcgZnJvbnRtYXR0ZXIgaW4gY29ycmVjdCBvcmRlciB3aXRoIHJvYnVzdCB2YWx1ZXNcbiAgICAgICAgY29uc3QgbmV3RnJvbnRtYXR0ZXI6IHN0cmluZ1tdID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyBSZXF1aXJlZCBmaWVsZHMgaW4gc3BlY2lmaWMgb3JkZXJcbiAgICAgICAgbmV3RnJvbnRtYXR0ZXIucHVzaChgbmV4dXM6ICR7bmV4dXNJZH1gKTtcbiAgICAgICAgbmV3RnJvbnRtYXR0ZXIucHVzaChgcGx1Z2luX3ZlcnNpb246IFwiMS4wLnhcImApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGZyb250bWF0dGVyRGF0YS5wcm92aWRlcikge1xuICAgICAgICAgICAgbmV3RnJvbnRtYXR0ZXIucHVzaChgcHJvdmlkZXI6ICR7ZnJvbnRtYXR0ZXJEYXRhLnByb3ZpZGVyfWApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBVc2Ugc2FmZSBhbGlhcyBpbnN0ZWFkIG9mIHBvdGVudGlhbGx5IHByb2JsZW1hdGljIHRpdGxlXG4gICAgICAgIG5ld0Zyb250bWF0dGVyLnB1c2goYGFsaWFzZXM6ICR7c2FmZUFsaWFzfWApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGZyb250bWF0dGVyRGF0YS5jb252ZXJzYXRpb25faWQpIHtcbiAgICAgICAgICAgIG5ld0Zyb250bWF0dGVyLnB1c2goYGNvbnZlcnNhdGlvbl9pZDogJHtmcm9udG1hdHRlckRhdGEuY29udmVyc2F0aW9uX2lkfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmcm9udG1hdHRlckRhdGEuY3JlYXRlX3RpbWUpIHtcbiAgICAgICAgICAgIG5ld0Zyb250bWF0dGVyLnB1c2goYGNyZWF0ZV90aW1lOiAke2Zyb250bWF0dGVyRGF0YS5jcmVhdGVfdGltZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZnJvbnRtYXR0ZXJEYXRhLnVwZGF0ZV90aW1lKSB7XG4gICAgICAgICAgICBuZXdGcm9udG1hdHRlci5wdXNoKGB1cGRhdGVfdGltZTogJHtmcm9udG1hdHRlckRhdGEudXBkYXRlX3RpbWV9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZWNvbnN0cnVjdCBjb250ZW50XG4gICAgICAgIGNvbnN0IGNsZWFuZWRGcm9udG1hdHRlciA9IG5ld0Zyb250bWF0dGVyLmpvaW4oJ1xcbicpO1xuICAgICAgICByZXR1cm4gYC0tLVxcbiR7Y2xlYW5lZEZyb250bWF0dGVyfVxcbi0tLSR7cmVzdE9mQ29udGVudH1gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIHNhZmUgYWxpYXMgZnJvbSBmaWxlbmFtZSAocmV1c2UgdGhlIHJvYnVzdCBmaWxlbmFtZSBsb2dpYylcbiAgICAgKi9cbiAgICBwcml2YXRlIGdlbmVyYXRlU2FmZUFsaWFzKGZpbGVOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAvLyBSZW1vdmUgZGF0ZSBwcmVmaXggaWYgcHJlc2VudCAoWVlZWU1NREQgLSBvciBZWVlZLU1NLUREIC0pXG4gICAgICAgIGxldCBjbGVhbk5hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9eXFxkezh9XFxzKi1cXHMqLywgJycpLnJlcGxhY2UoL15cXGR7NH0tXFxkezJ9LVxcZHsyfVxccyotXFxzKi8sICcnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbW92ZSBmaWxlIGV4dGVuc2lvblxuICAgICAgICBjbGVhbk5hbWUgPSBjbGVhbk5hbWUucmVwbGFjZSgvXFwubWQkLywgJycpO1xuICAgICAgICBcbiAgICAgICAgLy8gQXBwbHkgc2FtZSBzYW5pdGl6YXRpb24gYXMgZ2VuZXJhdGVGaWxlTmFtZSBidXQgcHJlc2VydmUgcmVhZGFiaWxpdHlcbiAgICAgICAgY2xlYW5OYW1lID0gY2xlYW5OYW1lXG4gICAgICAgICAgICAubm9ybWFsaXplKFwiTkZEXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgXCJcIikgLy8gUmVtb3ZlIGRpYWNyaXRpY3NcbiAgICAgICAgICAgIC5yZXBsYWNlKC9bPD46XCJcXC9cXFxcfD8qXFxuXFxyXSsvZywgXCJcIikgLy8gUmVtb3ZlIGludmFsaWQgZmlsZXN5c3RlbSBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAucmVwbGFjZSgvXFwuezIsfS9nLCBcIi5cIikgLy8gUmVwbGFjZSBtdWx0aXBsZSBkb3RzIHdpdGggc2luZ2xlIGRvdFxuICAgICAgICAgICAgLnRyaW0oKTtcblxuICAgICAgICAvLyBDUklUSUNBTDogUmVtb3ZlIHNwZWNpYWwgY2hhcmFjdGVycyBmcm9tIHRoZSBiZWdpbm5pbmdcbiAgICAgICAgLy8gVGhpcyBmaXhlcyBpc3N1ZXMgbGlrZSBcIi5odGFjY2Vzc1wiIGJlY29taW5nIHByb2JsZW1hdGljIGFsaWFzXG4gICAgICAgIGNsZWFuTmFtZSA9IGNsZWFuTmFtZS5yZXBsYWNlKC9eW15cXHdcXGRcXHNdKy8sIFwiXCIpOyAvLyBSZW1vdmUgbm9uLWFscGhhbnVtZXJpYyBhdCBzdGFydFxuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYW4gdXAgYW55IHJlbWFpbmluZyBwcm9ibGVtYXRpYyBwYXR0ZXJuc1xuICAgICAgICBjbGVhbk5hbWUgPSBjbGVhbk5hbWVcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKSAvLyBOb3JtYWxpemUgc3BhY2VzXG4gICAgICAgICAgICAudHJpbSgpO1xuXG4gICAgICAgIC8vIEVuc3VyZSB3ZSBoYXZlIGEgdmFsaWQgYWxpYXNcbiAgICAgICAgaWYgKCFjbGVhbk5hbWUgfHwgY2xlYW5OYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY2xlYW5OYW1lID0gXCJVbnRpdGxlZFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW5zdXJlIGFsaWFzIGRvZXNuJ3Qgc3RhcnQgd2l0aCBhIGRvdCAoY2FuIGNhdXNlIGlzc3VlcyBpbiBmcm9udG1hdHRlcilcbiAgICAgICAgaWYgKGNsZWFuTmFtZS5zdGFydHNXaXRoKFwiLlwiKSkge1xuICAgICAgICAgICAgY2xlYW5OYW1lID0gY2xlYW5OYW1lLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbmFsIHNhZmV0eSBjaGVja1xuICAgICAgICBpZiAoIWNsZWFuTmFtZSB8fCBjbGVhbk5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjbGVhbk5hbWUgPSBcIlVudGl0bGVkXCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2xlYW5OYW1lO1xuICAgIH1cblxuICAgIGFzeW5jIHZlcmlmeShjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyO1xuICAgICAgICAgICAgY29uc3QgYWxsRmlsZXMgPSBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGVjayBjb252ZXJzYXRpb24gZmlsZXMgKHNhbXBsZSB2ZXJpZmljYXRpb24pXG4gICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25GaWxlcyA9IGFsbEZpbGVzLmZpbHRlcihmaWxlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGUucGF0aC5zdGFydHNXaXRoKGNvbnZlcnNhdGlvbkZvbGRlcikpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGZpbGUucGF0aC5zdWJzdHJpbmcoY29udmVyc2F0aW9uRm9sZGVyLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChyZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnUmVwb3J0cy8nKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ0F0dGFjaG1lbnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdyZXBvcnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdhdHRhY2htZW50cy8nKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSkuc2xpY2UoMCwgNSk7IC8vIENoZWNrIGZpcnN0IDUgZmlsZXNcblxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGNvbnZlcnNhdGlvbkZpbGVzKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmcm9udG1hdHRlck1hdGNoKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBtYW51YWxseSBpZiBwbHVnaW5fdmVyc2lvbiB3YXMgYWRkZWRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXJDb250ZW50ID0gZnJvbnRtYXR0ZXJNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmcm9udG1hdHRlckNvbnRlbnQuaW5jbHVkZXMoJ3BsdWdpbl92ZXJzaW9uOicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBmb3JiaWRkZW4gbWV0YWRhdGEgc3RpbGwgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcmJpZGRlbkZpZWxkcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb252ZXJzYXRpb25fdGVtcGxhdGVfaWQ6JywgJ2dpem1vX2lkOicsICdnaXptb190eXBlOicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGVmYXVsdF9tb2RlbF9zbHVnOicsICdpc19hcmNoaXZlZDonLCAnaXNfc3RhcnJlZDonLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2N1cnJlbnRfbm9kZTonLCAnbWVtb3J5X3Njb3BlOidcbiAgICAgICAgICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNVbndhbnRlZEZpZWxkcyA9IGZvcmJpZGRlbkZpZWxkcy5zb21lKGZpZWxkID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXJDb250ZW50LmluY2x1ZGVzKGZpZWxkKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzVW53YW50ZWRGaWVsZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgQ2xlYW5NZXRhZGF0YS52ZXJpZnkgZXJyb3IgZm9yICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBDbGVhbk1ldGFkYXRhLnZlcmlmeSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIFZlcnNpb24gMS4xLjAgVXBncmFkZSBEZWZpbml0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBVcGdyYWRlMTEwIGV4dGVuZHMgVmVyc2lvblVwZ3JhZGUge1xuICAgIHJlYWRvbmx5IHZlcnNpb24gPSBcIjEuMS4wXCI7XG4gICAgXG4gICAgcmVhZG9ubHkgYXV0b21hdGljT3BlcmF0aW9ucyA9IFtcbiAgICAgICAgbmV3IERlbGV0ZUNhdGFsb2dPcGVyYXRpb24oKSxcbiAgICAgICAgbmV3IENsZWFuTWV0YWRhdGFPcGVyYXRpb24oKVxuICAgIF07XG4gICAgXG4gICAgcmVhZG9ubHkgbWFudWFsT3BlcmF0aW9ucyA9IFtcbiAgICAgICAgLy8gTm8gbWFudWFsIG9wZXJhdGlvbnMgZm9yIDEuMS4wIC0gYWxsIG9wZXJhdGlvbnMgYXJlIGF1dG9tYXRpY1xuICAgICAgICAvLyBGdXR1cmUgdmVyc2lvbnMgY2FuIGFkZCBtYW51YWwgb3BlcmF0aW9ucyBoZXJlIGZvciB0cnVseSBvcHRpb25hbCB0YXNrc1xuICAgIF07XG59IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy91cGdyYWRlL3ZlcnNpb25zL3VwZ3JhZGUtMS4yLjAudHNcbmltcG9ydCB7IFZlcnNpb25VcGdyYWRlLCBVcGdyYWRlT3BlcmF0aW9uLCBVcGdyYWRlQ29udGV4dCwgT3BlcmF0aW9uUmVzdWx0IH0gZnJvbSBcIi4uL3VwZ3JhZGUtaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBNYXJrZG93blJlbmRlcmVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vLi4vbWFpblwiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIi4uLy4uL2xvZ2dlclwiO1xuXG4vKipcbiAqIENvbnZlcnQgaW5kZW50YXRpb25zIHRvIGNhbGxvdXRzIChhdXRvbWF0aWMgb3BlcmF0aW9uKVxuICovXG5jbGFzcyBDb252ZXJ0VG9DYWxsb3V0c09wZXJhdGlvbiBleHRlbmRzIFVwZ3JhZGVPcGVyYXRpb24ge1xuICAgIHJlYWRvbmx5IGlkID0gXCJjb252ZXJ0LXRvLWNhbGxvdXRzXCI7XG4gICAgcmVhZG9ubHkgbmFtZSA9IFwiQ29udmVydCB0byBNb2Rlcm4gQ2FsbG91dHNcIjtcbiAgICByZWFkb25seSBkZXNjcmlwdGlvbiA9IFwiVHJhbnNmb3JtIG9sZCBpbmRlbnRhdGlvbnMgKD4sID4+KSB0byBiZWF1dGlmdWwgTmV4dXMgY2FsbG91dHNcIjtcbiAgICByZWFkb25seSB0eXBlID0gXCJhdXRvbWF0aWNcIiBhcyBjb25zdDtcblxuICAgIGFzeW5jIGNhblJ1bihjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyO1xuICAgICAgICAgICAgY29uc3QgYWxsRmlsZXMgPSBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgICAgICAgICAvLyBGaWx0ZXIgY29udmVyc2F0aW9uIGZpbGVzIChleGNsdWRlIFJlcG9ydHMvQXR0YWNobWVudHMpXG4gICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25GaWxlcyA9IGFsbEZpbGVzLmZpbHRlcihmaWxlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGUucGF0aC5zdGFydHNXaXRoKGNvbnZlcnNhdGlvbkZvbGRlcikpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGZpbGUucGF0aC5zdWJzdHJpbmcoY29udmVyc2F0aW9uRm9sZGVyLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChyZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnUmVwb3J0cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnQXR0YWNobWVudHMvJykgfHxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ3JlcG9ydHMvJykgfHxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ2F0dGFjaG1lbnRzLycpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhbnkgZmlsZXMgaGF2ZSBvbGQgaW5kZW50YXRpb24gZm9ybWF0XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgY29udmVyc2F0aW9uRmlsZXMuc2xpY2UoMCwgMTApKSB7IC8vIFNhbXBsZSBmaXJzdCAxMCBmaWxlc1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgdjEuMS4wIGZvcm1hdCBtYXJrZXJzXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc09sZEluZGVudGF0aW9uRm9ybWF0KGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgY2hlY2tpbmcgZmlsZSAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBDb252ZXJ0VG9DYWxsb3V0cy5jYW5SdW4gZmFpbGVkOmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUoY29udGV4dDogVXBncmFkZUNvbnRleHQpOiBQcm9taXNlPE9wZXJhdGlvblJlc3VsdD4ge1xuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25Gb2xkZXIgPSBjb250ZXh0LnBsdWdpbi5zZXR0aW5ncy5jb252ZXJzYXRpb25Gb2xkZXI7XG4gICAgICAgICAgICBjb25zdCBhbGxGaWxlcyA9IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAgICAgICAgIC8vIEZpbHRlciBjb252ZXJzYXRpb24gZmlsZXMgKGV4Y2x1ZGUgUmVwb3J0cy9BdHRhY2htZW50cylcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZmlsZS5wYXRoLnN0YXJ0c1dpdGgoY29udmVyc2F0aW9uRm9sZGVyKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gZmlsZS5wYXRoLnN1YnN0cmluZyhjb252ZXJzYXRpb25Gb2xkZXIubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdSZXBvcnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdBdHRhY2htZW50cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgncmVwb3J0cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnYXR0YWNobWVudHMvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCBwcm9jZXNzZWQgPSAwO1xuICAgICAgICAgICAgbGV0IGNvbnZlcnRlZCA9IDA7XG4gICAgICAgICAgICBsZXQgZXJyb3JzID0gMDtcblxuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGZpbGVzIGluIHNtYWxsZXIgYmF0Y2hlcyB0byBhdm9pZCBibG9ja2luZ1xuICAgICAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnZlcnNhdGlvbkZpbGVzLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaCA9IGNvbnZlcnNhdGlvbkZpbGVzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGJhdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZCsrO1xuXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgcHJvY2VzcyBmaWxlcyB3aXRoIG9sZCBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNPbGRJbmRlbnRhdGlvbkZvcm1hdChjb250ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJ0ZWRDb250ZW50ID0gdGhpcy5jb252ZXJ0SW5kZW50YXRpb25zVG9DYWxsb3V0cyhjb250ZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgIT09IGNvbnZlcnRlZENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcGx1Z2luX3ZlcnNpb24gdG8gMS4yLjBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbENvbnRlbnQgPSB0aGlzLnVwZGF0ZVBsdWdpblZlcnNpb24oY29udmVydGVkQ29udGVudCwgXCIxLjIuMFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGZpbmFsQ29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVydGVkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBjb252ZXJ0aW5nICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTbWFsbCBkZWxheSBiZXR3ZWVuIGJhdGNoZXMgdG8gcHJldmVudCBibG9ja2luZ1xuICAgICAgICAgICAgICAgIGlmIChpICsgYmF0Y2hTaXplIDwgY29udmVyc2F0aW9uRmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGVycm9ycyA9PT0gMCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgQ2FsbG91dCBjb252ZXJzaW9uIGNvbXBsZXRlZDogJHtjb252ZXJ0ZWR9IGZpbGVzIGNvbnZlcnRlZCwgJHtlcnJvcnN9IGVycm9yc2AsXG4gICAgICAgICAgICAgICAgZGV0YWlsczogeyBwcm9jZXNzZWQsIGNvbnZlcnRlZCwgZXJyb3JzIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgQ29udmVydFRvQ2FsbG91dHMuZXhlY3V0ZSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgQ2FsbG91dCBjb252ZXJzaW9uIGZhaWxlZDogJHtlcnJvcn1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgZXJyb3I6IFN0cmluZyhlcnJvcikgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGNvbnRlbnQgaGFzIG9sZCBpbmRlbnRhdGlvbiBmb3JtYXQgKHYxLjEuMClcbiAgICAgKi9cbiAgICBwcml2YXRlIGhhc09sZEluZGVudGF0aW9uRm9ybWF0KGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBMb29rIGZvciBwYXR0ZXJucyB0aGF0IGluZGljYXRlIHYxLjEuMCBmb3JtYXRcbiAgICAgICAgY29uc3Qgb2xkUGF0dGVybnMgPSBbXG4gICAgICAgICAgICAvXiMjIyBVc2VyLCBvbiAuKiBhdCAuKjtcXG4+L20sICAgICAgICAgICAvLyBVc2VyIG1lc3NhZ2VzIHdpdGggaW5kZW50YXRpb25cbiAgICAgICAgICAgIC9eIyMjIyBBc3Npc3RhbnQsIG9uIC4qIGF0IC4qO1xcbj4+L20sICAgIC8vIEFzc2lzdGFudCBtZXNzYWdlcyB3aXRoIGluZGVudGF0aW9uXG4gICAgICAgICAgICAvPGRpdiBjbGFzcz1cIm5leHVzLWF0dGFjaG1lbnQtYm94XCI+LywgICAgLy8gT2xkIGF0dGFjaG1lbnQgZGl2c1xuICAgICAgICAgICAgLzxkaXYgY2xhc3M9XCJuZXh1cy1hcnRpZmFjdC1ib3hcIj4vLCAgICAgIC8vIE9sZCBhcnRpZmFjdCBkaXZzXG4gICAgICAgICAgICAvPlxcWyFub3RlXFxdIFx1RDgzRFx1RENDRSBcXCpcXCpBdHRhY2htZW50OlxcKlxcKi8gICAgICAvLyBPbGQgbm90ZSBjYWxsb3V0cyBmb3IgYXR0YWNobWVudHNcbiAgICAgICAgXTtcblxuICAgICAgICByZXR1cm4gb2xkUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChjb250ZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydCBvbGQgaW5kZW50YXRpb25zIHRvIG1vZGVybiBjYWxsb3V0c1xuICAgICAqL1xuICAgIHByaXZhdGUgY29udmVydEluZGVudGF0aW9uc1RvQ2FsbG91dHMoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGNvbnZlcnRlZCA9IGNvbnRlbnQ7XG5cbiAgICAgICAgLy8gMS4gQ29udmVydCBVc2VyIG1lc3NhZ2VzOiAjIyMgVXNlciwgb24gREFURSBhdCBUSU1FO1xcbj4gY29udGVudFxuICAgICAgICBjb252ZXJ0ZWQgPSBjb252ZXJ0ZWQucmVwbGFjZShcbiAgICAgICAgICAgIC9eIyMjIFVzZXIsIG9uICguKj8pIGF0ICguKj8pO1xcbigoPzo+IC4qKD86XFxufCQpKSopL2dtLFxuICAgICAgICAgICAgKG1hdGNoLCBkYXRlLCB0aW1lLCBxdW90ZWRDb250ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xlYW5Db250ZW50ID0gcXVvdGVkQ29udGVudC5yZXBsYWNlKC9ePiAvZ20sICc+ICcpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgPlshbmV4dXNfdXNlcl0gKipVc2VyKiogLSAke2RhdGV9IGF0ICR7dGltZX1cXG4ke2NsZWFuQ29udGVudH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIDIuIENvbnZlcnQgQXNzaXN0YW50IG1lc3NhZ2VzOiAjIyMjIEFzc2lzdGFudCwgb24gREFURSBhdCBUSU1FO1xcbj4+IGNvbnRlbnRcbiAgICAgICAgY29udmVydGVkID0gY29udmVydGVkLnJlcGxhY2UoXG4gICAgICAgICAgICAvXiMjIyMgQXNzaXN0YW50LCBvbiAoLio/KSBhdCAoLio/KTtcXG4oKD86Pj4gLiooPzpcXG58JCkpKikvZ20sXG4gICAgICAgICAgICAobWF0Y2gsIGRhdGUsIHRpbWUsIHF1b3RlZENvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGVhbkNvbnRlbnQgPSBxdW90ZWRDb250ZW50LnJlcGxhY2UoL14+PiAvZ20sICc+ICcpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgPlshbmV4dXNfYWdlbnRdICoqQXNzaXN0YW50KiogLSAke2RhdGV9IGF0ICR7dGltZX1cXG4ke2NsZWFuQ29udGVudH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIDMuIENvbnZlcnQgYXR0YWNobWVudCBkaXZzIHRvIGNhbGxvdXRzIChyb2J1c3QgcGF0dGVybilcbiAgICAgICAgY29udmVydGVkID0gY29udmVydGVkLnJlcGxhY2UoXG4gICAgICAgICAgICAvPGRpdiBjbGFzcz1cIm5leHVzLWF0dGFjaG1lbnQtYm94XCI+XFxzKlxcblxccypcXCpcXCpcdUQ4M0RcdURDQ0UgQXR0YWNobWVudDpcXCpcXCogKFteKF0rKVxcKChbXildKylcXCkoW1xcc1xcU10qPyk8XFwvZGl2Pi9nLFxuICAgICAgICAgICAgKG1hdGNoLCBmaWxlTmFtZSwgZmlsZVR5cGUsIGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGVhbkZpbGVOYW1lID0gZmlsZU5hbWUudHJpbSgpO1xuICAgICAgICAgICAgICAgIGxldCBjbGVhbkNvbnRlbnQgPSBjb250ZW50LnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgY29udGVudCBwYXR0ZXJuc1xuICAgICAgICAgICAgICAgIGlmIChjbGVhbkNvbnRlbnQuaW5jbHVkZXMoJyoqQ29udGVudDoqKicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFuQ29udGVudCA9IGNsZWFuQ29udGVudC5yZXBsYWNlKC9cXCpcXCpDb250ZW50OlxcKlxcKi9nLCAnJykudHJpbSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2xlYW5Db250ZW50LmluY2x1ZGVzKCcqKlN0YXR1czoqKicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFuQ29udGVudCA9IGNsZWFuQ29udGVudC5yZXBsYWNlKC9cXCpcXCpTdGF0dXM6XFwqXFwqL2csICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRm9ybWF0IGZvciBjYWxsb3V0XG4gICAgICAgICAgICAgICAgY2xlYW5Db250ZW50ID0gY2xlYW5Db250ZW50LnJlcGxhY2UoL1xcbi9nLCAnXFxuPiAnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNsZWFuQ29udGVudCAmJiAhY2xlYW5Db250ZW50LnN0YXJ0c1dpdGgoJz4nKSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhbkNvbnRlbnQgPSAnPiAnICsgY2xlYW5Db250ZW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBgPlshbmV4dXNfYXR0YWNobWVudF0gKioke2NsZWFuRmlsZU5hbWV9KiogKCR7ZmlsZVR5cGV9KVxcbiR7Y2xlYW5Db250ZW50fWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gNC4gQ29udmVydCBhcnRpZmFjdCBkaXZzIHRvIGNhbGxvdXRzIChlbmhhbmNlZCBwYXR0ZXJuKVxuICAgICAgICBjb252ZXJ0ZWQgPSBjb252ZXJ0ZWQucmVwbGFjZShcbiAgICAgICAgICAgIC88ZGl2IGNsYXNzPVwibmV4dXMtYXJ0aWZhY3QtYm94XCI+XFxzKihbXFxzXFxTXSo/KVxccyo8XFwvZGl2Pi9nLFxuICAgICAgICAgICAgKG1hdGNoLCBjb250ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGNsZWFuQ29udGVudCA9IGNvbnRlbnQudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBhcnRpZmFjdCB0aXRsZSBpZiBwcmVzZW50XG4gICAgICAgICAgICAgICAgY29uc3QgdGl0bGVNYXRjaCA9IGNsZWFuQ29udGVudC5tYXRjaCgvXFwqXFwqKFteKl0rKVxcKlxcKi8pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gdGl0bGVNYXRjaCA/IHRpdGxlTWF0Y2hbMV0gOiAnQXJ0aWZhY3QnO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2xlYW4gYW5kIGZvcm1hdCBjb250ZW50XG4gICAgICAgICAgICAgICAgY2xlYW5Db250ZW50ID0gY2xlYW5Db250ZW50LnJlcGxhY2UoL1xcKlxcKlteKl0rXFwqXFwqL2csICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgY2xlYW5Db250ZW50ID0gY2xlYW5Db250ZW50LnJlcGxhY2UoL1xcbi9nLCAnXFxuPiAnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNsZWFuQ29udGVudCAmJiAhY2xlYW5Db250ZW50LnN0YXJ0c1dpdGgoJz4nKSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhbkNvbnRlbnQgPSAnPiAnICsgY2xlYW5Db250ZW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBgPlshbmV4dXNfYXJ0aWZhY3RdICoqJHt0aXRsZX0qKlxcbiR7Y2xlYW5Db250ZW50fWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gNS4gSGFuZGxlIGFueSByZW1haW5pbmcgb2xkLXN0eWxlIG5vdGUgY2FsbG91dHMgdGhhdCBzaG91bGQgYmUgYXR0YWNobWVudHNcbiAgICAgICAgY29udmVydGVkID0gY29udmVydGVkLnJlcGxhY2UoXG4gICAgICAgICAgICAvPlxcWyFub3RlXFxdIFx1RDgzRFx1RENDRSBcXCpcXCpBdHRhY2htZW50OlxcKlxcKiAoW14oXSspXFwoKFteKV0rKVxcKSguKj8pKD89XFxuXFxufFxcbj58XFxuPCEtLXxcXG4tLS18JCkvZ3MsXG4gICAgICAgICAgICAobWF0Y2gsIGZpbGVOYW1lLCBmaWxlVHlwZSwgY29udGVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuRmlsZU5hbWUgPSBmaWxlTmFtZS50cmltKCk7XG4gICAgICAgICAgICAgICAgbGV0IGNsZWFuQ29udGVudCA9IGNvbnRlbnQudHJpbSgpO1xuICAgICAgICAgICAgICAgIGNsZWFuQ29udGVudCA9IGNsZWFuQ29udGVudC5yZXBsYWNlKC9cXG4vZywgJ1xcbj4gJykudHJpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChjbGVhbkNvbnRlbnQgJiYgIWNsZWFuQ29udGVudC5zdGFydHNXaXRoKCc+JykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW5Db250ZW50ID0gJz4gJyArIGNsZWFuQ29udGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGA+WyFuZXh1c19hdHRhY2htZW50XSAqKiR7Y2xlYW5GaWxlTmFtZX0qKiAoJHtmaWxlVHlwZX0pXFxuJHtjbGVhbkNvbnRlbnR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gY29udmVydGVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBwbHVnaW5fdmVyc2lvbiBpbiBmcm9udG1hdHRlclxuICAgICAqL1xuICAgIHByaXZhdGUgdXBkYXRlUGx1Z2luVmVyc2lvbihjb250ZW50OiBzdHJpbmcsIHZlcnNpb246IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBjb250ZW50LnJlcGxhY2UoXG4gICAgICAgICAgICAvXnBsdWdpbl92ZXJzaW9uOiBcIi4qP1wiJC9tLFxuICAgICAgICAgICAgYHBsdWdpbl92ZXJzaW9uOiBcIiR7dmVyc2lvbn1cImBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyB2ZXJpZnkoY29udGV4dDogVXBncmFkZUNvbnRleHQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZvbGRlciA9IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLmNvbnZlcnNhdGlvbkZvbGRlcjtcbiAgICAgICAgICAgIGNvbnN0IGFsbEZpbGVzID0gY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgY29udmVyc2F0aW9uIGZpbGVzIChzYW1wbGUgdmVyaWZpY2F0aW9uKVxuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlLnBhdGguc3RhcnRzV2l0aChjb252ZXJzYXRpb25Gb2xkZXIpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBmaWxlLnBhdGguc3Vic3RyaW5nKGNvbnZlcnNhdGlvbkZvbGRlci5sZW5ndGggKyAxKTtcbiAgICAgICAgICAgICAgICBpZiAocmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ1JlcG9ydHMvJykgfHxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ0F0dGFjaG1lbnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdyZXBvcnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdhdHRhY2htZW50cy8nKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KS5zbGljZSgwLCA1KTsgLy8gQ2hlY2sgZmlyc3QgNSBmaWxlc1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgY29udmVyc2F0aW9uRmlsZXMpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3RpbGwgaGFzIG9sZCBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzT2xkSW5kZW50YXRpb25Gb3JtYXQoY29udGVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHBsdWdpbl92ZXJzaW9uIHdhcyB1cGRhdGVkXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGVudC5pbmNsdWRlcygncGx1Z2luX3ZlcnNpb246IFwiMS4yLjBcIicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgdmVyaWZ5aW5nIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoYENvbnZlcnRUb0NhbGxvdXRzLnZlcmlmeSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIE1vdmUgcmVwb3J0cyBmcm9tIHJvb3QgUmVwb3J0cy8gZm9sZGVyIHRvIFJlcG9ydHMvY2hhdGdwdC8gKGF1dG9tYXRpYyBvcGVyYXRpb24pXG4gKiBGb3IgdXNlcnMgdXBncmFkaW5nIGRpcmVjdGx5IGZyb20gcHJlLTEuMS4wIHZlcnNpb25zXG4gKi9cbmNsYXNzIE1vdmVSZXBvcnRzVG9Qcm92aWRlck9wZXJhdGlvbiBleHRlbmRzIFVwZ3JhZGVPcGVyYXRpb24ge1xuICAgIHJlYWRvbmx5IGlkID0gXCJtb3ZlLXJlcG9ydHMtdG8tcHJvdmlkZXJcIjtcbiAgICByZWFkb25seSBuYW1lID0gXCJPcmdhbml6ZSBSZXBvcnRzIGJ5IFByb3ZpZGVyXCI7XG4gICAgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSBcIk1vdmUgcmVwb3J0cyBmcm9tIHJvb3QgUmVwb3J0cy8gZm9sZGVyIHRvIFJlcG9ydHMvY2hhdGdwdC9cIjtcbiAgICByZWFkb25seSB0eXBlID0gXCJhdXRvbWF0aWNcIiBhcyBjb25zdDtcblxuICAgIGFzeW5jIGNhblJ1bihjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVwb3J0Rm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MucmVwb3J0Rm9sZGVyO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgYW55IHJlcG9ydCBmaWxlcyBpbiB0aGUgcm9vdCBSZXBvcnRzLyBmb2xkZXJcbiAgICAgICAgICAgIGNvbnN0IHJlcG9ydEZpbGVzID0gY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0XG4gICAgICAgICAgICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE11c3QgYmUgaW4gcm9vdCByZXBvcnQgZm9sZGVyIChub3QgaW4gcHJvdmlkZXIgc3ViZm9sZGVyKVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWYucGF0aC5zdGFydHNXaXRoKHJlcG9ydEZvbGRlciArICcvJykpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBNdXN0IG5vdCBhbHJlYWR5IGJlIGluIGEgcHJvdmlkZXIgc3ViZm9sZGVyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGYucGF0aC5zdWJzdHJpbmcocmVwb3J0Rm9sZGVyLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVsYXRpdmVQYXRoLmluY2x1ZGVzKCcvJykpIHJldHVybiBmYWxzZTsgLy8gQWxyZWFkeSBpbiBzdWJmb2xkZXJcblxuICAgICAgICAgICAgICAgICAgICAvLyBNdXN0IGJlIGFuIGltcG9ydCByZXBvcnQgZmlsZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi5uYW1lLmluY2x1ZGVzKCdpbXBvcnQgcmVwb3J0JykgfHwgZi5uYW1lLmluY2x1ZGVzKCdpbXBvcnRfJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXBvcnRGaWxlcy5sZW5ndGggPiAwO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBNb3ZlUmVwb3J0c1RvUHJvdmlkZXJPcGVyYXRpb24uY2FuUnVuIGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxPcGVyYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcG9ydEZvbGRlciA9IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLnJlcG9ydEZvbGRlcjtcbiAgICAgICAgICAgIGxldCBwcm9jZXNzZWQgPSAwO1xuICAgICAgICAgICAgbGV0IG1vdmVkID0gMDtcbiAgICAgICAgICAgIGxldCBlcnJvcnMgPSAwO1xuXG4gICAgICAgICAgICAvLyBGaW5kIHJlcG9ydCBmaWxlcyBpbiByb290IGZvbGRlclxuICAgICAgICAgICAgY29uc3QgcmVwb3J0RmlsZXMgPSBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHRcbiAgICAgICAgICAgICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmLnBhdGguc3RhcnRzV2l0aChyZXBvcnRGb2xkZXIgKyAnLycpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGYucGF0aC5zdWJzdHJpbmcocmVwb3J0Rm9sZGVyLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVsYXRpdmVQYXRoLmluY2x1ZGVzKCcvJykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYubmFtZS5pbmNsdWRlcygnaW1wb3J0IHJlcG9ydCcpIHx8IGYubmFtZS5pbmNsdWRlcygnaW1wb3J0XycpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBFbnN1cmUgY2hhdGdwdCBzdWJmb2xkZXIgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCBjaGF0Z3B0UmVwb3J0Rm9sZGVyID0gYCR7cmVwb3J0Rm9sZGVyfS9jaGF0Z3B0YDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIoY2hhdGdwdFJlcG9ydEZvbGRlcik7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gRm9sZGVyIG1pZ2h0IGFscmVhZHkgZXhpc3QsIHRoYXQncyBmaW5lXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiByZXBvcnRGaWxlcykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZCsrO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXRoID0gYCR7Y2hhdGdwdFJlcG9ydEZvbGRlcn0vJHtmaWxlLm5hbWV9YDtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0YXJnZXQgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF3YWl0IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhuZXdQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5yZW5hbWUoZmlsZS5wYXRoLCBuZXdQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgbW92ZWQrKztcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcnMrKztcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBtb3ZpbmcgcmVwb3J0ICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGVycm9ycyA9PT0gMCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgUmVwb3J0cyBvcmdhbml6ZWQ6ICR7bW92ZWR9IGZpbGVzIG1vdmVkIHRvIHByb3ZpZGVyIHN0cnVjdHVyZSwgJHtlcnJvcnN9IGVycm9yc2AsXG4gICAgICAgICAgICAgICAgZGV0YWlsczogeyBwcm9jZXNzZWQsIG1vdmVkLCBlcnJvcnMgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgTW92ZVJlcG9ydHNUb1Byb3ZpZGVyT3BlcmF0aW9uLmV4ZWN1dGUgZmFpbGVkOmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFJlcG9ydCBvcmdhbml6YXRpb24gZmFpbGVkOiAke2Vycm9yfWAsXG4gICAgICAgICAgICAgICAgZGV0YWlsczogeyBlcnJvcjogU3RyaW5nKGVycm9yKSB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgdmVyaWZ5KF9jb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICAvLyBTaW1wbGUgb3BlcmF0aW9uOyB0cmVhdCBhcyBzdWNjZXNzZnVsIGlmIGV4ZWN1dGUgcmV0dXJuZWQgc3VjY2Vzc1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbi8qKlxuICogRm9yY2UgdXBkYXRlIHJlcG9ydCBsaW5rcyB0byBpbmNsdWRlIHByb3ZpZGVyIHNlZ21lbnQgKGF1dG9tYXRpYyBvcGVyYXRpb24pXG4gKiBPbmx5IHBhdHRlcm4gY29uc2lkZXJlZDogJHtyZXBvcnRGb2xkZXJ9L2NoYXRncHQvXG4gKi9cbmNsYXNzIFVwZGF0ZVJlcG9ydExpbmtzT3BlcmF0aW9uIGV4dGVuZHMgVXBncmFkZU9wZXJhdGlvbiB7XG4gICAgcmVhZG9ubHkgaWQgPSBcInVwZGF0ZS1yZXBvcnQtbGlua3NcIjtcbiAgICByZWFkb25seSBuYW1lID0gXCJVcGRhdGUgUmVwb3J0IExpbmtzXCI7XG4gICAgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSBcIkluc2VydCAnY2hhdGdwdC8nIGJlZm9yZSB5ZWFyIGluIHJlcG9ydCBsaW5rcyBpbnNpZGUgcmVwb3J0c1wiO1xuICAgIHJlYWRvbmx5IHR5cGUgPSBcImF1dG9tYXRpY1wiIGFzIGNvbnN0O1xuXG4gICAgYXN5bmMgY2FuUnVuKF9jb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICAvLyBGb3JjZSBydW4gd2hlbiB0aGlzIG1pZ3JhdGlvbiBleGVjdXRlc1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGVzY2FwZVJlZ0V4cChzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxPcGVyYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcG9ydEZvbGRlciA9IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLnJlcG9ydEZvbGRlcjtcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZvbGRlciA9IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLmNvbnZlcnNhdGlvbkZvbGRlcjtcbiAgICAgICAgICAgIGNvbnN0IGVzY2FwZWRBcmNoaXZlID0gdGhpcy5lc2NhcGVSZWdFeHAoY29udmVyc2F0aW9uRm9sZGVyKTtcblxuICAgICAgICAgICAgbGV0IHByb2Nlc3NlZCA9IDA7XG4gICAgICAgICAgICBsZXQgdXBkYXRlZCA9IDA7XG4gICAgICAgICAgICBsZXQgZXJyb3JzID0gMDtcblxuICAgICAgICAgICAgLy8gQ29uc2lkZXIgYm90aCAke3JlcG9ydEZvbGRlcn0vY2hhdGdwdC8gYW5kICR7cmVwb3J0Rm9sZGVyfS8gKGZhbGxiYWNrIGZvciBwcmUtMS4xLjApXG4gICAgICAgICAgICBjb25zdCByZXBvcnRQcmVmaXhDaGF0Z3B0ID0gYCR7cmVwb3J0Rm9sZGVyfS9jaGF0Z3B0L2A7XG4gICAgICAgICAgICBjb25zdCByZXBvcnRQcmVmaXhSb290ID0gYCR7cmVwb3J0Rm9sZGVyfS9gO1xuXG4gICAgICAgICAgICBjb25zdCByZXBvcnRGaWxlcyA9IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdFxuICAgICAgICAgICAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIGZpbGVzIGluIGNoYXRncHQgc3ViZm9sZGVyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmLnBhdGguc3RhcnRzV2l0aChyZXBvcnRQcmVmaXhDaGF0Z3B0KSkgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSW5jbHVkZSBmaWxlcyBpbiByb290IHJlcG9ydCBmb2xkZXIgKGJ1dCBub3QgaW4gb3RoZXIgc3ViZm9sZGVycylcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYucGF0aC5zdGFydHNXaXRoKHJlcG9ydFByZWZpeFJvb3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBmLnBhdGguc3Vic3RyaW5nKHJlcG9ydFByZWZpeFJvb3QubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE11c3QgYmUgZGlyZWN0bHkgaW4gcm9vdCBmb2xkZXIgKG5vIHNsYXNoZXMgPSBubyBzdWJmb2xkZXJzKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWxhdGl2ZVBhdGguaW5jbHVkZXMoJy8nKSAmJiAoZi5uYW1lLmluY2x1ZGVzKCdpbXBvcnQgcmVwb3J0JykgfHwgZi5uYW1lLmluY2x1ZGVzKCdpbXBvcnRfJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFJlZ2V4OiBbWzxjb252ZXJzYXRpb25Gb2xkZXI+L1lZWVkvTU0vIC4uLl1dIC0+IGluc2VydCBjaGF0Z3B0L1xuICAgICAgICAgICAgY29uc3QgbGlua1BhdHRlcm4gPSBuZXcgUmVnRXhwKGAoXFxcXFtcXFxcWyR7ZXNjYXBlZEFyY2hpdmV9LykoXFxcXGR7NH0vXFxcXGR7Mn0vKWAsICdnJyk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiByZXBvcnRGaWxlcykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZCsrO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VkID0gY29udGVudC5yZXBsYWNlKGxpbmtQYXR0ZXJuLCAnJDFjaGF0Z3B0LyQyJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlZCAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCByZXBsYWNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycysrO1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYFVwZGF0ZVJlcG9ydExpbmtzT3BlcmF0aW9uIGVycm9yIGluICR7ZmlsZS5wYXRofTpgLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZXJyb3JzID09PSAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBSZXBvcnQgbGlua3MgdXBkYXRlZDogJHt1cGRhdGVkfSBmaWxlcyBjaGFuZ2VkLCAke2Vycm9yc30gZXJyb3JzYCxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7IHByb2Nlc3NlZCwgdXBkYXRlZCwgZXJyb3JzIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoYFVwZGF0ZVJlcG9ydExpbmtzT3BlcmF0aW9uLmV4ZWN1dGUgZmFpbGVkOmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFJlcG9ydCBsaW5rIHVwZGF0ZSBmYWlsZWQ6ICR7ZXJyb3J9YCxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyB2ZXJpZnkoX2NvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIC8vIFNpbXBsZSBvcGVyYXRpb247IHRyZWF0IGFzIHN1Y2Nlc3NmdWwgaWYgZXhlY3V0ZSByZXR1cm5lZCBzdWNjZXNzXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuXG4vKipcbiAqIE1vdmUgeWVhciBmb2xkZXJzIHRvIGNoYXRncHQgcHJvdmlkZXIgc3RydWN0dXJlIChhdXRvbWF0aWMgb3BlcmF0aW9uKVxuICogU0lNUExFOiBKdXN0IG1vdmUgPHl5eXk+IGZvbGRlcnMgdG8gY2hhdGdwdC88eXl5eT5cbiAqL1xuY2xhc3MgTW92ZVllYXJGb2xkZXJzT3BlcmF0aW9uIGV4dGVuZHMgVXBncmFkZU9wZXJhdGlvbiB7XG4gICAgcmVhZG9ubHkgaWQgPSBcIm1vdmUteWVhci1mb2xkZXJzXCI7XG4gICAgcmVhZG9ubHkgbmFtZSA9IFwiT3JnYW5pemUgQ29udmVyc2F0aW9ucyBieSBQcm92aWRlclwiO1xuICAgIHJlYWRvbmx5IGRlc2NyaXB0aW9uID0gXCJNb3ZlIHllYXIgZm9sZGVycyB0byBjaGF0Z3B0IHByb3ZpZGVyIHN0cnVjdHVyZVwiO1xuICAgIHJlYWRvbmx5IHR5cGUgPSBcImF1dG9tYXRpY1wiIGFzIGNvbnN0O1xuXG4gICAgYXN5bmMgY2FuUnVuKGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25Gb2xkZXIgPSBjb250ZXh0LnBsdWdpbi5zZXR0aW5ncy5jb252ZXJzYXRpb25Gb2xkZXI7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHllYXIgZm9sZGVycyBleGlzdCBkaXJlY3RseSBpbiBjb252ZXJzYXRpb24gZm9sZGVyIChub3QgaW4gY2hhdGdwdCBzdWJmb2xkZXIpXG4gICAgICAgICAgICBjb25zdCB5ZWFyRm9sZGVycyA9IGF3YWl0IHRoaXMuZmluZFllYXJGb2xkZXJzKGNvbnRleHQsIGNvbnZlcnNhdGlvbkZvbGRlcik7XG5cbiAgICAgICAgICAgIHJldHVybiB5ZWFyRm9sZGVycy5sZW5ndGggPiAwO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBNb3ZlWWVhckZvbGRlcnMuY2FuUnVuIGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxPcGVyYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyO1xuXG4gICAgICAgICAgICBsZXQgbW92ZWRGb2xkZXJzID0gMDtcbiAgICAgICAgICAgIGxldCBlcnJvcnMgPSAwO1xuXG4gICAgICAgICAgICAvLyBNb3ZlIDx5eXl5PiBmb2xkZXJzIHRvIGNoYXRncHQvPHl5eXk+XG4gICAgICAgICAgICBjb25zdCB5ZWFyRm9sZGVycyA9IGF3YWl0IHRoaXMuZmluZFllYXJGb2xkZXJzKGNvbnRleHQsIGNvbnZlcnNhdGlvbkZvbGRlcik7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgeWVhckZvbGRlciBvZiB5ZWFyRm9sZGVycykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXRncHRGb2xkZXIgPSBgJHtjb252ZXJzYXRpb25Gb2xkZXJ9L2NoYXRncHRgO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5ta2RpcihjaGF0Z3B0Rm9sZGVyKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXRoID0gYCR7Y2hhdGdwdEZvbGRlcn0vJHt5ZWFyRm9sZGVyfWA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZFBhdGggPSBgJHtjb252ZXJzYXRpb25Gb2xkZXJ9LyR7eWVhckZvbGRlcn1gO1xuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLnJlbmFtZShvbGRQYXRoLCBuZXdQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgbW92ZWRGb2xkZXJzKys7XG5cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcnMrKztcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBtb3ZpbmcgeWVhciBmb2xkZXIgJHt5ZWFyRm9sZGVyfTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZXJyb3JzID09PSAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBDb252ZXJzYXRpb24gb3JnYW5pemF0aW9uIGNvbXBsZXRlZDogJHttb3ZlZEZvbGRlcnN9IHllYXIgZm9sZGVycyBtb3ZlZCB0byBjaGF0Z3B0IHN0cnVjdHVyZSwgJHtlcnJvcnN9IGVycm9yc2AsXG4gICAgICAgICAgICAgICAgZGV0YWlsczogeyBtb3ZlZEZvbGRlcnMsIGVycm9ycyB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoYE1vdmVZZWFyRm9sZGVycy5leGVjdXRlIGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBDb252ZXJzYXRpb24gb3JnYW5pemF0aW9uIGZhaWxlZDogJHtlcnJvcn1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgZXJyb3I6IFN0cmluZyhlcnJvcikgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHZlcmlmeShjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyO1xuXG4gICAgICAgICAgICAvLyBDaGVjayB0aGF0IHllYXIgZm9sZGVycyBhcmUgbm93IGluIGNoYXRncHQgc3RydWN0dXJlXG4gICAgICAgICAgICBjb25zdCByZW1haW5pbmdZZWFyRm9sZGVycyA9IGF3YWl0IHRoaXMuZmluZFllYXJGb2xkZXJzKGNvbnRleHQsIGNvbnZlcnNhdGlvbkZvbGRlcik7XG5cbiAgICAgICAgICAgIGlmIChyZW1haW5pbmdZZWFyRm9sZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgTW92ZVllYXJGb2xkZXJzLnZlcmlmeSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZCB5ZWFyIGZvbGRlcnMgKFlZWVkpIGRpcmVjdGx5IGluIGNvbnZlcnNhdGlvbiBmb2xkZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGZpbmRZZWFyRm9sZGVycyhjb250ZXh0OiBVcGdyYWRlQ29udGV4dCwgY29udmVyc2F0aW9uRm9sZGVyOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmb2xkZXJzID0gYXdhaXQgY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIubGlzdChjb252ZXJzYXRpb25Gb2xkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIGZvbGRlcnMuZm9sZGVycy5maWx0ZXIoZm9sZGVyID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJOYW1lID0gZm9sZGVyLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC9eXFxkezR9JC8udGVzdChmb2xkZXJOYW1lKSAmJiBmb2xkZXJOYW1lICE9PSAnY2hhdGdwdCc7XG4gICAgICAgICAgICB9KS5tYXAoZm9sZGVyID0+IGZvbGRlci5zcGxpdCgnLycpLnBvcCgpIHx8ICcnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vKipcbiAqIEJlYXV0aWZ1bCB1cGdyYWRlIG1vZGFsIChsaWtlIEV4Y2FsaWRyYXcpXG4gKi9cbmV4cG9ydCBjbGFzcyBOZXh1c1VwZ3JhZGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIHBsdWdpbjogTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbjtcbiAgICBwcml2YXRlIHZlcnNpb246IHN0cmluZztcbiAgICBwcml2YXRlIHJlc29sdmU6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiwgdmVyc2lvbjogc3RyaW5nLCByZXNvbHZlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwsIHRpdGxlRWwgfSA9IHRoaXM7XG5cbiAgICAgICAgLy8gQWRkIEV4Y2FsaWRyYXctc3R5bGUgQ1NTIGNsYXNzXG4gICAgICAgIGNvbnRhaW5lckVsLmNsYXNzTGlzdC5hZGQoJ25leHVzLXVwZ3JhZGUtbW9kYWwnKTtcblxuICAgICAgICAvLyBTZXQgdGl0bGUgbGlrZSBFeGNhbGlkcmF3XG4gICAgICAgIHRpdGxlRWwuc2V0VGV4dChgXHVEODNEXHVERTgwIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgJHt0aGlzLnZlcnNpb259YCk7XG4gICAgICAgIHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY2xvc2UtYnV0dG9uJyk/LnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmNyZWF0ZUZvcm0oKTtcbiAgICB9XG5cbiAgICBhc3luYyBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGNyZWF0ZUZvcm0oKSB7XG4gICAgICAgIC8vIEZldGNoIHJlbGVhc2Ugbm90ZXMgZnJvbSBHaXRIdWJcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBgXHVEODNDXHVERjg5ICoqVXBncmFkZSB0byB2MS4yLjAqKlxuXG5Zb3VyIGNvbnZlcnNhdGlvbnMgd2lsbCBiZSByZW9yZ2FuaXplZCB3aXRoIHByb3ZpZGVyIHN0cnVjdHVyZSBhbmQgbW9kZXJuIGNhbGxvdXRzLiBBbGwgbGlua3MgaW4geW91ciByZXBvcnRzIHdpbGwgYmUgdXBkYXRlZC4gXG5cbioqXHVEODNEXHVEQ0ExIFRvIGdldCBBTEwgdjEuMi4wIGZlYXR1cmVzOioqIFJlaW1wb3J0IHlvdXIgb3JpZ2luYWwgQ2hhdEdQVCBaSVAgZmlsZXMuXG5cbi0tLVxuXG4jIyBcdTI2MTUgU3VwcG9ydCBNeSBXb3JrXG5cblshW1N1cHBvcnQgbWUgb24gS28tZmldKGh0dHBzOi8va28tZmkuY29tL2ltZy9naXRodWJidXR0b25fc20uc3ZnKV0oaHR0cHM6Ly9rby1maS5jb20vbmV4dXNwbHVnaW5zKWA7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRyeSB0byBmZXRjaCByZWxlYXNlIG5vdGVzIGZyb20gR2l0SHViXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL1N1cGVya2lraW0vbmV4dXMtYWktY2hhdC1pbXBvcnRlci9yZWxlYXNlcy90YWdzL3YxLjIuMCcpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICBpZiAocmVsZWFzZS5ib2R5KSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSByZWxlYXNlLmJvZHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gVXNlIGZhbGxiYWNrIG1lc3NhZ2UgaWYgR2l0SHViIGZldGNoIGZhaWxzXG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW5kZXIgbWFya2Rvd24gY29udGVudFxuICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcbiAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLFxuICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEFkZCBzaW5nbGUgY29uZmlybWF0aW9uIGJ1dHRvblxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJuZXh1cy11cGdyYWRlLWJ1dHRvbnNcIiB9LCAoZWwpID0+IHtcbiAgICAgICAgICAgIGVsLnN0eWxlLnRleHRBbGlnbiA9IFwicmlnaHRcIjtcbiAgICAgICAgICAgIGVsLnN0eWxlLm1hcmdpblRvcCA9IFwiMjBweFwiO1xuICAgICAgICAgICAgZWwuc3R5bGUucGFkZGluZ1RvcCA9IFwiMTVweFwiO1xuICAgICAgICAgICAgZWwuc3R5bGUuYm9yZGVyVG9wID0gXCIxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpXCI7XG5cbiAgICAgICAgICAgIGNvbnN0IGJ0bk9rID0gZWwuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgICAgIHRleHQ6IFwiUHJvY2VlZFwiLFxuICAgICAgICAgICAgICAgIGNsczogXCJuZXh1cy1idG4tcHJpbWFyeVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJ0bk9rLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZShcIm9rXCIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIE9mZmVyIGZ1bGwgcmVpbXBvcnQgZm9yIGNvbXBsZXRlIHYxLjIuMCBmZWF0dXJlcyAobWFudWFsIG9wZXJhdGlvbilcbiAqL1xuY2xhc3MgT2ZmZXJSZWltcG9ydE9wZXJhdGlvbiBleHRlbmRzIFVwZ3JhZGVPcGVyYXRpb24ge1xuICAgIHJlYWRvbmx5IGlkID0gXCJvZmZlci1yZWltcG9ydFwiO1xuICAgIHJlYWRvbmx5IG5hbWUgPSBcIkZ1bGwgRmVhdHVyZSBSZWltcG9ydFwiO1xuICAgIHJlYWRvbmx5IGRlc2NyaXB0aW9uID0gXCJPcHRpb25hbGx5IHJlaW1wb3J0IGNvbnZlcnNhdGlvbnMgdG8gZ2V0IGFsbCB2MS4yLjAgZmVhdHVyZXMgKGF0dGFjaG1lbnRzLCBjaHJvbm9sb2dpY2FsIG9yZGVyLCBldGMuKVwiO1xuICAgIHJlYWRvbmx5IHR5cGUgPSBcIm1hbnVhbFwiIGFzIGNvbnN0O1xuXG4gICAgYXN5bmMgY2FuUnVuKF9jb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICAvLyBBbHdheXMgb2ZmZXIgdGhpcyBvcHRpb24gYWZ0ZXIgY2FsbG91dCBjb252ZXJzaW9uXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUoX2NvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxPcGVyYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRoZSBiZWF1dGlmdWwgZGlhbG9nIGlzIG5vdyBzaG93biBCRUZPUkUgb3BlcmF0aW9ucyBleGVjdXRlXG4gICAgICAgICAgICAvLyBUaGlzIG9wZXJhdGlvbiBqdXN0IHByb3ZpZGVzIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1cGdyYWRlIGNvbXBsZXRpb25cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlVwZ3JhZGUgaW5mb3JtYXRpb24gcHJvdmlkZWQgdG8gdXNlclwiLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgYWN0aW9uOiBcImluZm9fZGlzcGxheWVkXCIgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBPZmZlclJlaW1wb3J0LmV4ZWN1dGUgZmFpbGVkOmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byBjb21wbGV0ZSByZWltcG9ydCBvcGVyYXRpb246ICR7ZXJyb3J9YCxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyB2ZXJpZnkoX2NvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIC8vIFRoaXMgb3BlcmF0aW9uIGFsd2F5cyBzdWNjZWVkcyBpZiBpdCBydW5zXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBWZXJzaW9uIDEuMi4wIFVwZ3JhZGUgRGVmaW5pdGlvblxuICovXG5leHBvcnQgY2xhc3MgVXBncmFkZTEyMCBleHRlbmRzIFZlcnNpb25VcGdyYWRlIHtcbiAgICByZWFkb25seSB2ZXJzaW9uID0gXCIxLjIuMFwiO1xuXG4gICAgcmVhZG9ubHkgYXV0b21hdGljT3BlcmF0aW9ucyA9IFtcbiAgICAgICAgbmV3IE1vdmVZZWFyRm9sZGVyc09wZXJhdGlvbigpLFxuICAgICAgICBuZXcgTW92ZVJlcG9ydHNUb1Byb3ZpZGVyT3BlcmF0aW9uKCksXG4gICAgICAgIG5ldyBVcGRhdGVSZXBvcnRMaW5rc09wZXJhdGlvbigpLFxuICAgICAgICBuZXcgQ29udmVydFRvQ2FsbG91dHNPcGVyYXRpb24oKVxuICAgIF07XG5cbiAgICByZWFkb25seSBtYW51YWxPcGVyYXRpb25zID0gW1xuICAgICAgICBuZXcgT2ZmZXJSZWltcG9ydE9wZXJhdGlvbigpXG4gICAgXTtcbn1cbiIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuXG4vLyBzcmMvZGlhbG9ncy9jb25maWd1cmUtZm9sZGVyLWxvY2F0aW9ucy1kaWFsb2cudHNcbmltcG9ydCB7IE1vZGFsLCBTZXR0aW5nLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7IEZvbGRlck1pZ3JhdGlvbkRpYWxvZyB9IGZyb20gXCIuL2ZvbGRlci1taWdyYXRpb24tZGlhbG9nXCI7XG5pbXBvcnQgeyBFbmhhbmNlZEZvbGRlck1pZ3JhdGlvbkRpYWxvZyB9IGZyb20gXCIuL2VuaGFuY2VkLWZvbGRlci1taWdyYXRpb24tZGlhbG9nXCI7XG5pbXBvcnQgeyBGb2xkZXJUcmVlQnJvd3Nlck1vZGFsIH0gZnJvbSBcIi4vZm9sZGVyLXRyZWUtYnJvd3Nlci1tb2RhbFwiO1xuaW1wb3J0IHsgdmFsaWRhdGVGb2xkZXJOZXN0aW5nIH0gZnJvbSBcIi4uL3V0aWxzL2ZvbGRlci12YWxpZGF0aW9uXCI7XG5pbXBvcnQgeyBtb3ZlQW5kTWVyZ2VGb2xkZXJzLCB0eXBlIEZvbGRlck1lcmdlUmVzdWx0IH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRm9sZGVyQ29uZmlndXJhdGlvblJlc3VsdCB7XG4gICAgY29udmVyc2F0aW9uRm9sZGVyOiB7XG4gICAgICAgIGNoYW5nZWQ6IGJvb2xlYW47XG4gICAgICAgIG9sZFBhdGg6IHN0cmluZztcbiAgICAgICAgbmV3UGF0aDogc3RyaW5nO1xuICAgICAgICBmaWxlc01vdmVkPzogbnVtYmVyO1xuICAgIH07XG4gICAgcmVwb3J0Rm9sZGVyOiB7XG4gICAgICAgIGNoYW5nZWQ6IGJvb2xlYW47XG4gICAgICAgIG9sZFBhdGg6IHN0cmluZztcbiAgICAgICAgbmV3UGF0aDogc3RyaW5nO1xuICAgICAgICBmaWxlc01vdmVkPzogbnVtYmVyO1xuICAgIH07XG4gICAgYXR0YWNobWVudEZvbGRlcjoge1xuICAgICAgICBjaGFuZ2VkOiBib29sZWFuO1xuICAgICAgICBvbGRQYXRoOiBzdHJpbmc7XG4gICAgICAgIG5ld1BhdGg6IHN0cmluZztcbiAgICAgICAgZmlsZXNNb3ZlZD86IG51bWJlcjtcbiAgICB9O1xufVxuXG4vKipcbiAqIERpYWxvZyB0byBjb25maWd1cmUgUmVwb3J0IGZvbGRlciBsb2NhdGlvbiBkdXJpbmcgdjEuMy4wIHVwZ3JhZGVcbiAqIFRoaXMgaXMgYSBCTE9DS0lORyBkaWFsb2cgLSBpdCB3YWl0cyBmb3IgdXNlciB0byBzYXZlIGJlZm9yZSBjb250aW51aW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBDb25maWd1cmVGb2xkZXJMb2NhdGlvbnNEaWFsb2cgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSByZXBvcnRGb2xkZXJJbnB1dDogSFRNTElucHV0RWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gICAgcHJpdmF0ZSBvcmlnaW5hbFJlcG9ydEZvbGRlcjogc3RyaW5nO1xuXG4gICAgcHJpdmF0ZSBvbkNvbXBsZXRlOiAocmVzdWx0OiBGb2xkZXJDb25maWd1cmF0aW9uUmVzdWx0KSA9PiB2b2lkO1xuICAgIHByaXZhdGUgY29tcGxldGVkOiBib29sZWFuID0gZmFsc2U7IC8vIFRyYWNrIGlmIG9uQ29tcGxldGUgd2FzIGFscmVhZHkgY2FsbGVkXG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4sXG4gICAgICAgIG9uQ29tcGxldGU6IChyZXN1bHQ6IEZvbGRlckNvbmZpZ3VyYXRpb25SZXN1bHQpID0+IHZvaWRcbiAgICApIHtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcCk7XG4gICAgICAgIHRoaXMub25Db21wbGV0ZSA9IG9uQ29tcGxldGU7XG5cbiAgICAgICAgLy8gU3RvcmUgb3JpZ2luYWwgdmFsdWVcbiAgICAgICAgdGhpcy5vcmlnaW5hbFJlcG9ydEZvbGRlciA9IHBsdWdpbi5zZXR0aW5ncy5yZXBvcnRGb2xkZXIgfHwgXCJOZXh1cyBSZXBvcnRzXCI7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgLy8gVGl0bGVcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwge1xuICAgICAgICAgICAgdGV4dDogXCJcdUQ4M0NcdURGODkgTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciB2MS4zLjBcIixcbiAgICAgICAgICAgIGNsczogXCJuZXh1cy11cGdyYWRlLXRpdGxlXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTWFpbiBtZXNzYWdlIC0gU0lNUExJRklFRCBBTkQgQUJPVkUgVEhFIEZJRUxEXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLXVwZ3JhZGUtbWVzc2FnZVwiIH0pO1xuXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRWwgPSBtZXNzYWdlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy11cGdyYWRlLWRlc2NyaXB0aW9uXCIgfSk7XG4gICAgICAgIGRlc2NyaXB0aW9uRWwuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IGBJbiB2ZXJzaW9uIDEuMy4wLCB5b3UgY2FuIHNwZWNpZnkgYSBmb2xkZXIgZm9yIFJlcG9ydHMuIFdlIHdpbGwgbW92ZSBleGlzdGluZyByZXBvcnRzIHRvICR7dGhpcy5vcmlnaW5hbFJlcG9ydEZvbGRlcn0sIG9yIHlvdSBjYW4gc2VsZWN0IHlvdXIgcHJlZmVycmVkIGZvbGRlciBiZWxvdy5gXG4gICAgICAgIH0pO1xuICAgICAgICBkZXNjcmlwdGlvbkVsLmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIk5vdGU6IFRoZSBmb2xkZXIgY2Fubm90IGJlIGluc2lkZSBDb252ZXJzYXRpb25zIG9yIEF0dGFjaG1lbnRzLlwiLFxuICAgICAgICAgICAgY2xzOiBcIm5leHVzLXVwZ3JhZGUtbm90ZVwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEZvbGRlciBpbnB1dHMgc2VjdGlvblxuICAgICAgICBjb25zdCBmb2xkZXJTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy11cGdyYWRlLWZvbGRlci1zZWN0aW9uXCIgfSk7XG5cbiAgICAgICAgLy8gUmVwb3J0IEZvbGRlciBMYWJlbFxuICAgICAgICBmb2xkZXJTZWN0aW9uLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiXHVEODNEXHVEQ0NBIFJlcG9ydCBGb2xkZXJcIixcbiAgICAgICAgICAgIGNsczogXCJuZXh1cy11cGdyYWRlLWZvbGRlci1sYWJlbFwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFJlcG9ydCBGb2xkZXIgSW5wdXQgQ29udGFpbmVyXG4gICAgICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gZm9sZGVyU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtdXBncmFkZS1pbnB1dC1jb250YWluZXJcIiB9KTtcblxuICAgICAgICB0aGlzLnJlcG9ydEZvbGRlcklucHV0ID0gaW5wdXRDb250YWluZXIuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIk5leHVzIFJlcG9ydHNcIixcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLm9yaWdpbmFsUmVwb3J0Rm9sZGVyLFxuICAgICAgICAgICAgY2xzOiBcIm5leHVzLXVwZ3JhZGUtZm9sZGVyLWlucHV0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVwb3J0Rm9sZGVySW5wdXQucmVhZE9ubHkgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlcG9ydEZvbGRlcklucHV0LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xuXG4gICAgICAgIGNvbnN0IGJyb3dzZUJ1dHRvbiA9IGlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiQnJvd3NlXCIsXG4gICAgICAgICAgICBjbHM6IFwibW9kLWN0YSBuZXh1cy11cGdyYWRlLWJyb3dzZS1idXR0b25cIlxuICAgICAgICB9KTtcbiAgICAgICAgYnJvd3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBGb2xkZXJUcmVlQnJvd3Nlck1vZGFsKFxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcCxcbiAgICAgICAgICAgICAgICAocGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZXIgc2VsZWN0ZWQgb3IgY3JlYXRlZCBhIGZvbGRlclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXBvcnRGb2xkZXJJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBvcnRGb2xkZXJJbnB1dC52YWx1ZSA9IHBhdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRoaXMub3JpZ2luYWxSZXBvcnRGb2xkZXJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJ1dHRvbnMgLSBCSUcgQ0VOVEVSRUQgUFJPQ0VFRCBCVVRUT05cbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy11cGdyYWRlLWJ1dHRvbi1jb250YWluZXItY2VudGVyZWRcIiB9KTtcblxuICAgICAgICBjb25zdCBwcm9jZWVkQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiUHJvY2VlZFwiLFxuICAgICAgICAgICAgY2xzOiBcIm1vZC1jdGEgbmV4dXMtdXBncmFkZS1wcm9jZWVkLWJ1dHRvblwiXG4gICAgICAgIH0pO1xuICAgICAgICBwcm9jZWVkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVNhdmUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIHN0eWxlc1xuICAgICAgICB0aGlzLmFkZFN0eWxlcygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlU2F2ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkKSByZXR1cm47IC8vIFByZXZlbnQgZG91YmxlIGV4ZWN1dGlvblxuXG4gICAgICAgIGlmICghdGhpcy5yZXBvcnRGb2xkZXJJbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25Gb2xkZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9sZFBhdGg6IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnZlcnNhdGlvbkZvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgbmV3UGF0aDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXBvcnRGb2xkZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9sZFBhdGg6IHRoaXMub3JpZ2luYWxSZXBvcnRGb2xkZXIsXG4gICAgICAgICAgICAgICAgICAgIG5ld1BhdGg6IHRoaXMub3JpZ2luYWxSZXBvcnRGb2xkZXJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRGb2xkZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9sZFBhdGg6IHRoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnRGb2xkZXIsXG4gICAgICAgICAgICAgICAgICAgIG5ld1BhdGg6IHRoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnRGb2xkZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5ld1JlcG9ydEZvbGRlciA9IHRoaXMucmVwb3J0Rm9sZGVySW5wdXQudmFsdWUudHJpbSgpO1xuXG4gICAgICAgIC8vIFZhbGlkYXRlIHRoYXQgcmVwb3J0IGZvbGRlciBpcyBub3QgaW5zaWRlIGNvbnZlcnNhdGlvbnMgb3IgYXR0YWNobWVudHNcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlRm9sZGVyTmVzdGluZyhcbiAgICAgICAgICAgICdyZXBvcnRGb2xkZXInLFxuICAgICAgICAgICAgbmV3UmVwb3J0Rm9sZGVyLFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyLFxuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbFJlcG9ydEZvbGRlciwgLy8gVXNlIG9yaWdpbmFsIHRvIGF2b2lkIHNlbGYtY2hlY2tcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnRGb2xkZXJcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIXZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yRGlhbG9nKFwiSW52YWxpZCBGb2xkZXIgTG9jYXRpb25cIiwgdmFsaWRhdGlvbi5lcnJvciA/PyBcIkludmFsaWQgZm9sZGVyIGNvbmZpZ3VyYXRpb25cIik7XG4gICAgICAgICAgICByZXR1cm47IC8vIERvbid0IGNsb3NlIGRpYWxvZywgbGV0IHVzZXIgZml4IHRoZSBwYXRoXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXN1bHQ6IEZvbGRlckNvbmZpZ3VyYXRpb25SZXN1bHQgPSB7XG4gICAgICAgICAgICBjb252ZXJzYXRpb25Gb2xkZXI6IHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBvbGRQYXRoOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb252ZXJzYXRpb25Gb2xkZXIsXG4gICAgICAgICAgICAgICAgbmV3UGF0aDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwb3J0Rm9sZGVyOiB7XG4gICAgICAgICAgICAgICAgY2hhbmdlZDogbmV3UmVwb3J0Rm9sZGVyICE9PSB0aGlzLm9yaWdpbmFsUmVwb3J0Rm9sZGVyLFxuICAgICAgICAgICAgICAgIG9sZFBhdGg6IHRoaXMub3JpZ2luYWxSZXBvcnRGb2xkZXIsXG4gICAgICAgICAgICAgICAgbmV3UGF0aDogbmV3UmVwb3J0Rm9sZGVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0YWNobWVudEZvbGRlcjoge1xuICAgICAgICAgICAgICAgIGNoYW5nZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG9sZFBhdGg6IHRoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnRGb2xkZXIsXG4gICAgICAgICAgICAgICAgbmV3UGF0aDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudEZvbGRlclxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIE1hcmsgYXMgY29tcGxldGVkIGJlZm9yZSBjbG9zaW5nXG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcblxuICAgICAgICAvLyBDbG9zZSB0aGlzIGRpYWxvZyBmaXJzdFxuICAgICAgICB0aGlzLmNsb3NlKCk7XG5cbiAgICAgICAgLy8gSGFuZGxlIHJlcG9ydCBmb2xkZXIgY2hhbmdlXG4gICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlRm9sZGVyQ2hhbmdlKCdyZXBvcnRGb2xkZXInLCByZXN1bHQucmVwb3J0Rm9sZGVyKTtcblxuICAgICAgICAvLyBDYWxsIGNvbXBsZXRpb24gY2FsbGJhY2sgd2l0aCByZXN1bHRzXG4gICAgICAgIHRoaXMub25Db21wbGV0ZShyZXN1bHQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlRm9sZGVyQ2hhbmdlKFxuICAgICAgICBmb2xkZXJUeXBlOiAnY29udmVyc2F0aW9uRm9sZGVyJyB8ICdyZXBvcnRGb2xkZXInIHwgJ2F0dGFjaG1lbnRGb2xkZXInLFxuICAgICAgICBmb2xkZXJJbmZvOiB7IGNoYW5nZWQ6IGJvb2xlYW47IG9sZFBhdGg6IHN0cmluZzsgbmV3UGF0aDogc3RyaW5nOyBmaWxlc01vdmVkPzogbnVtYmVyIH1cbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFmb2xkZXJJbmZvLmNoYW5nZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG9sZFBhdGggPSBmb2xkZXJJbmZvLm9sZFBhdGg7XG4gICAgICAgIGNvbnN0IG5ld1BhdGggPSBmb2xkZXJJbmZvLm5ld1BhdGg7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGFyZ2V0IGZvbGRlciBleGlzdHMgYW5kIGlzIG5vdCBlbXB0eVxuICAgICAgICBjb25zdCBuZXdGb2xkZXIgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld1BhdGgpO1xuICAgICAgICBpZiAobmV3Rm9sZGVyICYmIG5ld0ZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIgJiYgbmV3Rm9sZGVyLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yRGlhbG9nKFxuICAgICAgICAgICAgICAgIFwiVGFyZ2V0IEZvbGRlciBOb3QgRW1wdHlcIixcbiAgICAgICAgICAgICAgICBgVGhlIGZvbGRlciBcIiR7bmV3UGF0aH1cIiBhbHJlYWR5IGNvbnRhaW5zIGZpbGVzLlxcblxcblRvIGNoYW5nZSB0aGUgZm9sZGVyIGxvY2F0aW9uOlxcblx1MjAyMiBNb3ZlIGV4aXN0aW5nIGZpbGVzIG1hbnVhbGx5IGluIE9ic2lkaWFuLCBPUlxcblx1MjAyMiBDaG9vc2UgYW4gZW1wdHkgZm9sZGVyIG9yIGNyZWF0ZSBhIG5ldyBvbmVgXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgLy8gRG9uJ3QgdXBkYXRlIHRoZSBzZXR0aW5nXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgc2V0dGluZyBmaXJzdFxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1tmb2xkZXJUeXBlXSA9IG5ld1BhdGg7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIG9sZCBmb2xkZXIgZXhpc3RzIGFuZCBoYXMgY29udGVudFxuICAgICAgICBjb25zdCBvbGRGb2xkZXIgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9sZFBhdGgpO1xuXG4gICAgICAgIGlmICghb2xkRm9sZGVyIHx8ICEob2xkRm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikgfHwgb2xkRm9sZGVyLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gTm8gbWlncmF0aW9uIG5lZWRlZFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2hvdyBtaWdyYXRpb24gZGlhbG9nIGFuZCB3YWl0IGZvciB1c2VyIGNob2ljZVxuICAgICAgICAvLyBVc2UgRW5oYW5jZWQgZGlhbG9nIGZvciBBTEwgZm9sZGVyIHR5cGVzIChpdCBoYW5kbGVzIGxpbmsgdXBkYXRlcyBmb3IgY29udmVyc2F0aW9ucy9hdHRhY2htZW50cywgc2ltcGxlIG1vdmUgZm9yIHJlcG9ydHMpXG4gICAgICAgIGNvbnN0IGZvbGRlclR5cGVMYWJlbCA9IGZvbGRlclR5cGUgPT09ICdjb252ZXJzYXRpb25Gb2xkZXInID8gJ2NvbnZlcnNhdGlvbnMnIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2xkZXJUeXBlID09PSAncmVwb3J0Rm9sZGVyJyA/ICdyZXBvcnRzJyA6ICdhdHRhY2htZW50cyc7XG5cbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZU1pZ3JhdGlvbkFjdGlvbiA9IGFzeW5jIChhY3Rpb246ICdtb3ZlJyB8ICdrZWVwJyB8ICdjYW5jZWwnKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ21vdmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb3ZlQW5kTWVyZ2VGb2xkZXJzKG9sZEZvbGRlciwgbmV3UGF0aCwgdGhpcy5wbHVnaW4uYXBwLnZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlckluZm8uZmlsZXNNb3ZlZCA9IHJlc3VsdC5tb3ZlZDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hvdyByZXN1bHQgdG8gdXNlclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5za2lwcGVkID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGVyZmVjdCBzdWNjZXNzIC0gc2ltcGxlIG5vdGljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGaWxlcyBtb3ZlZCB0byAke25ld1BhdGh9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvbWUgZmlsZXMgc2tpcHBlZCBvciBlcnJvcnMgLSBzaG93IGRldGFpbGVkIGRpYWxvZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lcmdlUmVzdWx0RGlhbG9nKHJlc3VsdCwgb2xkUGF0aCwgbmV3UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBtb3ZlICR7Zm9sZGVyVHlwZUxhYmVsfSBmb2xkZXI6YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JEaWFsb2coXCJNaWdyYXRpb24gRmFpbGVkXCIsIGBGYWlsZWQgdG8gbW92ZSBmaWxlczogJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2NhbmNlbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV2ZXJ0IHNldHRpbmdcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3NbZm9sZGVyVHlwZV0gPSBvbGRQYXRoO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gQWx3YXlzIHVzZSBFbmhhbmNlZCBkaWFsb2cgKGl0IGhhbmRsZXMgbGluayB1cGRhdGVzIHdoZW4gbmVlZGVkKVxuICAgICAgICAgICAgY29uc3QgZGlhbG9nID0gbmV3IEVuaGFuY2VkRm9sZGVyTWlncmF0aW9uRGlhbG9nKFxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLFxuICAgICAgICAgICAgICAgIG9sZFBhdGgsXG4gICAgICAgICAgICAgICAgbmV3UGF0aCxcbiAgICAgICAgICAgICAgICBmb2xkZXJUeXBlTGFiZWwsXG4gICAgICAgICAgICAgICAgaGFuZGxlTWlncmF0aW9uQWN0aW9uXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZGlhbG9nLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyBkaWFsb2cgd2l0aCBtZXJnZSByZXN1bHQgZGV0YWlscyB3aGVuIGZpbGVzIHdlcmUgc2tpcHBlZCBvciBlcnJvcnMgb2NjdXJyZWRcbiAgICAgKi9cbiAgICBwcml2YXRlIHNob3dNZXJnZVJlc3VsdERpYWxvZyhyZXN1bHQ6IEZvbGRlck1lcmdlUmVzdWx0LCBvbGRQYXRoOiBzdHJpbmcsIG5ld1BhdGg6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLnBsdWdpbi5hcHApO1xuICAgICAgICBtb2RhbC50aXRsZUVsLnNldFRleHQoXCJGb2xkZXIgTWlncmF0aW9uIFJlc3VsdFwiKTtcblxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gbW9kYWw7XG5cbiAgICAgICAgLy8gU3VtbWFyeVxuICAgICAgICBjb25zdCBzdW1tYXJ5ID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy1tZXJnZS1zdW1tYXJ5XCIgfSk7XG4gICAgICAgIHN1bW1hcnkuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiTWlncmF0aW9uIFN1bW1hcnlcIiB9KTtcblxuICAgICAgICBjb25zdCBzdGF0cyA9IHN1bW1hcnkuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLW1lcmdlLXN0YXRzXCIgfSk7XG4gICAgICAgIHN0YXRzLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGBcdTI3MDUgU3VjY2Vzc2Z1bGx5IG1vdmVkOiAke3Jlc3VsdC5tb3ZlZH0gZmlsZShzKWAgfSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdC5za2lwcGVkID4gMCkge1xuICAgICAgICAgICAgc3RhdHMuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNkEwXHVGRTBGIFNraXBwZWQgKGFscmVhZHkgZXhpc3QpOiAke3Jlc3VsdC5za2lwcGVkfSBmaWxlKHMpYCxcbiAgICAgICAgICAgICAgICBjbHM6IFwibmV4dXMtbWVyZ2Utd2FybmluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXN1bHQuZXJyb3JzID4gMCkge1xuICAgICAgICAgICAgc3RhdHMuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUyNzRDIEVycm9yczogJHtyZXN1bHQuZXJyb3JzfSBmaWxlKHMpYCxcbiAgICAgICAgICAgICAgICBjbHM6IFwibmV4dXMtbWVyZ2UtZXJyb3JcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFeHBsYW5hdGlvblxuICAgICAgICBjb25zdCBleHBsYW5hdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtbWVyZ2UtZXhwbGFuYXRpb25cIiB9KTtcbiAgICAgICAgZXhwbGFuYXRpb24uY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiRmlsZXMgdGhhdCBhbHJlYWR5IGV4aXN0ZWQgaW4gdGhlIGRlc3RpbmF0aW9uIHdlcmUgbm90IG92ZXJ3cml0dGVuIHRvIHByZXNlcnZlIHlvdXIgZGF0YS5cIlxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFcnJvciBkZXRhaWxzIGlmIGFueVxuICAgICAgICBpZiAocmVzdWx0LmVycm9yRGV0YWlscyAmJiByZXN1bHQuZXJyb3JEZXRhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtbWVyZ2UtZXJyb3JzXCIgfSk7XG4gICAgICAgICAgICBlcnJvclNlY3Rpb24uY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiRXJyb3IgRGV0YWlsczpcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTGlzdCA9IGVycm9yU2VjdGlvbi5jcmVhdGVFbChcInVsXCIpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlcnJvciBvZiByZXN1bHQuZXJyb3JEZXRhaWxzKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JMaXN0LmNyZWF0ZUVsKFwibGlcIiwgeyB0ZXh0OiBlcnJvciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENsb3NlIGJ1dHRvblxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIk9LXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBtb2RhbC5jbG9zZSgpKTtcblxuICAgICAgICAvLyBBZGQgc3R5bGVzXG4gICAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgICAgICAubmV4dXMtbWVyZ2Utc3VtbWFyeSB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5uZXh1cy1tZXJnZS1zdGF0cyBwIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDhweCAwO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5uZXh1cy1tZXJnZS13YXJuaW5nIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC13YXJuaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5uZXh1cy1tZXJnZS1lcnJvciB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLm5leHVzLW1lcmdlLWV4cGxhbmF0aW9uIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxNnB4IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubmV4dXMtbWVyZ2UtZXJyb3JzIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxNnB4O1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvcik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLm5leHVzLW1lcmdlLWVycm9ycyB1bCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiA4cHggMDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubmV4dXMtbWVyZ2UtZXJyb3JzIGxpIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDRweCAwO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogdmFyKC0tZm9udC1tb25vc3BhY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuXG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgICAgIC5uZXh1cy11cGdyYWRlLXRpdGxlIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxZW07XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy11cGdyYWRlLW1lc3NhZ2Uge1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEuNWVtO1xuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy11cGdyYWRlLWRlc2NyaXB0aW9uIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuMDVlbTtcbiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS42O1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEuNWVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtdXBncmFkZS1kZXNjcmlwdGlvbiBwIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAuOGVtIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy11cGdyYWRlLW5vdGUge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy11cGdyYWRlLWZvbGRlci1zZWN0aW9uIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMS41ZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxZW0gMDtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy11cGdyYWRlLWZvbGRlci1sYWJlbCB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjFlbTtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuOGVtO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy11cGdyYWRlLWlucHV0LWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBnYXA6IDAuOGVtO1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtdXBncmFkZS1mb2xkZXItaW5wdXQge1xuICAgICAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC42ZW0gMC44ZW07XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtdXBncmFkZS1icm93c2UtYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjZlbSAxLjJlbSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMWVtICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLXVwZ3JhZGUtYnV0dG9uLWNvbnRhaW5lci1jZW50ZXJlZCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy11cGdyYWRlLXByb2NlZWQtYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDQ4cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMDBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgLy8gSWYgZGlhbG9nIGlzIGNsb3NlZCB3aXRob3V0IHNhdmluZyAoZS5nLiwgY2xpY2tpbmcgWCksIHJlc29sdmUgd2l0aCBubyBjaGFuZ2VzXG4gICAgICAgIC8vIFRoaXMgcHJldmVudHMgdGhlIHVwZ3JhZGUgcHJvY2VzcyBmcm9tIGhhbmdpbmdcbiAgICAgICAgaWYgKCF0aGlzLmNvbXBsZXRlZCAmJiB0aGlzLm9uQ29tcGxldGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uRm9sZGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvbGRQYXRoOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb252ZXJzYXRpb25Gb2xkZXIsXG4gICAgICAgICAgICAgICAgICAgIG5ld1BhdGg6IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnZlcnNhdGlvbkZvbGRlclxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVwb3J0Rm9sZGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvbGRQYXRoOiB0aGlzLm9yaWdpbmFsUmVwb3J0Rm9sZGVyLFxuICAgICAgICAgICAgICAgICAgICBuZXdQYXRoOiB0aGlzLm9yaWdpbmFsUmVwb3J0Rm9sZGVyXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhdHRhY2htZW50Rm9sZGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvbGRQYXRoOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdHRhY2htZW50Rm9sZGVyLFxuICAgICAgICAgICAgICAgICAgICBuZXdQYXRoOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdHRhY2htZW50Rm9sZGVyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dFcnJvckRpYWxvZyh0aXRsZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5wbHVnaW4uYXBwKTtcbiAgICAgICAgbW9kYWwudGl0bGVFbC5zZXRUZXh0KHRpdGxlKTtcblxuICAgICAgICBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UsXG4gICAgICAgICAgICBjbHM6IFwibmV4dXMtZXJyb3ItbWVzc2FnZVwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImZsZXgtZW5kXCI7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSBcIjFlbVwiO1xuXG4gICAgICAgIGNvbnN0IG9rQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiT0tcIixcbiAgICAgICAgICAgIGNsczogXCJtb2QtY3RhXCJcbiAgICAgICAgfSk7XG4gICAgICAgIG9rQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBtb2RhbC5jbG9zZSgpKTtcblxuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfVxufVxuXG4iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3VwZ3JhZGUvdmVyc2lvbnMvdXBncmFkZS0xLjMuMC50c1xuaW1wb3J0IHsgVmVyc2lvblVwZ3JhZGUsIFVwZ3JhZGVPcGVyYXRpb24sIFVwZ3JhZGVDb250ZXh0LCBPcGVyYXRpb25SZXN1bHQgfSBmcm9tIFwiLi4vdXBncmFkZS1pbnRlcmZhY2VcIjtcbmltcG9ydCB0eXBlIE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcbmltcG9ydCB7IGdlbmVyYXRlU2FmZUFsaWFzLCBtb3ZlQW5kTWVyZ2VGb2xkZXJzIH0gZnJvbSBcIi4uLy4uL3V0aWxzXCI7XG5pbXBvcnQgeyBEYXRlUGFyc2VyIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2RhdGUtcGFyc2VyXCI7XG5pbXBvcnQgeyBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBDb25maWd1cmVGb2xkZXJMb2NhdGlvbnNEaWFsb2csIEZvbGRlckNvbmZpZ3VyYXRpb25SZXN1bHQgfSBmcm9tIFwiLi4vLi4vZGlhbG9ncy9jb25maWd1cmUtZm9sZGVyLWxvY2F0aW9ucy1kaWFsb2dcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCIuLi8uLi9sb2dnZXJcIjtcblxuLyoqXG4gKiBDb252ZXJ0IHRpbWVzdGFtcHMgdG8gSVNPIDg2MDEgZm9ybWF0IGluIGFsbCBleGlzdGluZyBmcm9udG1hdHRlclxuICogVGhpcyByZXNvbHZlcyBsb2NhbGUtZGVwZW5kZW50IHBhcnNpbmcgaXNzdWVzIGFuZCBwcm92aWRlcyBhIHVuaXZlcnNhbCB0aW1lc3RhbXAgZm9ybWF0LlxuICogTWlncmF0aW9uIGNvbnZlcnRzIFVTIGZvcm1hdCAoTU0vREQvWVlZWSBhdCBIOk1NOlNTIEFNL1BNKSB0byBJU08gODYwMSAoWVlZWS1NTS1ERFRISDpNTTpTU1opXG4gKi9cbmNsYXNzIENvbnZlcnRUb0lTTzg2MDFUaW1lc3RhbXBzT3BlcmF0aW9uIGV4dGVuZHMgVXBncmFkZU9wZXJhdGlvbiB7XG4gICAgcmVhZG9ubHkgaWQgPSBcImNvbnZlcnQtdG8taXNvODYwMS10aW1lc3RhbXBzXCI7XG4gICAgcmVhZG9ubHkgbmFtZSA9IFwiQ29udmVydCBUaW1lc3RhbXBzIHRvIElTTyA4NjAxXCI7XG4gICAgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSBcIkNvbnZlcnRzIGNvbnZlcnNhdGlvbiB0aW1lc3RhbXBzIHRvIHVuaXZlcnNhbCBJU08gODYwMSBmb3JtYXQgKFlZWVktTU0tRERUSEg6bW06c3NaKS4gVGhpcyBmaXhlcyBwYXJzaW5nIGlzc3VlcyB3aXRoIGxvY2FsZS1zcGVjaWZpYyBkYXRlIGZvcm1hdHMgYW5kIGVuc3VyZXMgY29uc2lzdGVudCB0aW1lc3RhbXBzIGFjcm9zcyBhbGwgcmVnaW9ucy5cIjtcbiAgICByZWFkb25seSB0eXBlID0gXCJhdXRvbWF0aWNcIiBhcyBjb25zdDtcblxuICAgIHByaXZhdGUgZ2xvYmFsT3JkZXI/OiAnWU1EJyB8ICdETVknIHwgJ01EWSc7XG5cblxuICAgIGFzeW5jIGNhblJ1bihjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyIHx8IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLmFyY2hpdmVGb2xkZXIgfHwgXCJOZXh1cy9Db252ZXJzYXRpb25zXCI7XG5cbiAgICAgICAgICAgIGNvbnN0IGFsbEZpbGVzID0gY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgICAgICAgICAgLy8gRmlsdGVyIGNvbnZlcnNhdGlvbiBmaWxlcyAoZXhjbHVkZSBSZXBvcnRzL0F0dGFjaG1lbnRzKVxuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlLnBhdGguc3RhcnRzV2l0aChjb252ZXJzYXRpb25Gb2xkZXIpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBmaWxlLnBhdGguc3Vic3RyaW5nKGNvbnZlcnNhdGlvbkZvbGRlci5sZW5ndGggKyAxKTtcbiAgICAgICAgICAgICAgICBpZiAocmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ1JlcG9ydHMvJykgfHxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ0F0dGFjaG1lbnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdyZXBvcnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdhdHRhY2htZW50cy8nKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAvLyBCdWlsZCBhIGZhc3Qgc2FtcGxlIHZpYSBtZXRhZGF0YUNhY2hlIChubyBmaWxlIEkvTylcbiAgICAgICAgICAgIGNvbnN0IHNhbXBsZXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICBsZXQgZm91bmROb25JU08gPSBmYWxzZTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGNvbnZlcnNhdGlvbkZpbGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm0gPSBjb250ZXh0LnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyIGFzIGFueTtcbiAgICAgICAgICAgICAgICBpZiAoIWZtIHx8IGZtLm5leHVzICE9PSBjb250ZXh0LnBsdWdpbi5tYW5pZmVzdC5pZCkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB2YWxzID0gW2ZtLmNyZWF0ZV90aW1lLCBmbS51cGRhdGVfdGltZV0uZmlsdGVyKHYgPT4gdHlwZW9mIHYgPT09ICdzdHJpbmcnKSBhcyBzdHJpbmdbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgdmFscykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIS9eXFxkezR9LVxcZHsyfS1cXGR7Mn1bVCBdXFxkezJ9OlxcZHsyfSg6XFxkezJ9KT8oXFwuXFxkezN9KT9aPyQvLnRlc3QodikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaCh2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kTm9uSVNPID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGEgZ2xvYmFsIG9yZGVyIGhpbnQgZnJvbSBkZWNpc2l2ZSBzYW1wbGVzXG4gICAgICAgICAgICBpZiAoc2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXQgPSBEYXRlUGFyc2VyLmRldGVjdEZvcm1hdEZyb21TYW1wbGVzKHNhbXBsZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsT3JkZXIgPSBmb3JtYXQ/Lm9yZGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZm91bmROb25JU08pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ29udmVydFRvSVNPODYwMVRpbWVzdGFtcHMuY2FuUnVuIGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxPcGVyYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyIHx8IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLmFyY2hpdmVGb2xkZXIgfHwgXCJOZXh1cy9Db252ZXJzYXRpb25zXCI7XG4gICAgICAgICAgICBjb25zdCBhbGxGaWxlcyA9IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAgICAgICAgIC8vIEZpbHRlciBjb252ZXJzYXRpb24gZmlsZXMgKGV4Y2x1ZGUgUmVwb3J0cy9BdHRhY2htZW50cylcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZmlsZS5wYXRoLnN0YXJ0c1dpdGgoY29udmVyc2F0aW9uRm9sZGVyKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gZmlsZS5wYXRoLnN1YnN0cmluZyhjb252ZXJzYXRpb25Gb2xkZXIubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdSZXBvcnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdBdHRhY2htZW50cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgncmVwb3J0cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnYXR0YWNobWVudHMvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIERldGVybWluZSBnbG9iYWwgb3JkZXIgaGludCBpZiBub3QgYWxyZWFkeSBjb21wdXRlZFxuICAgICAgICAgICAgaWYgKCF0aGlzLmdsb2JhbE9yZGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2FtcGxlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgY29udmVyc2F0aW9uRmlsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm0gPSBjb250ZXh0LnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyIGFzIGFueTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmbSB8fCBmbS5uZXh1cyAhPT0gY29udGV4dC5wbHVnaW4ubWFuaWZlc3QuaWQpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxzID0gW2ZtLmNyZWF0ZV90aW1lLCBmbS51cGRhdGVfdGltZV0uZmlsdGVyKHYgPT4gdHlwZW9mIHYgPT09ICdzdHJpbmcnKSBhcyBzdHJpbmdbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIHZhbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghL15cXGR7NH0tXFxkezJ9LVxcZHsyfVtUIF1cXGR7Mn06XFxkezJ9KDpcXGR7Mn0pPyhcXC5cXGR7M30pP1o/JC8udGVzdCh2KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaCh2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0gRGF0ZVBhcnNlci5kZXRlY3RGb3JtYXRGcm9tU2FtcGxlcyhzYW1wbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxPcmRlciA9IGZvcm1hdD8ub3JkZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgcHJvY2Vzc2VkID0gMDtcbiAgICAgICAgICAgIGxldCBjb252ZXJ0ZWQgPSAwO1xuICAgICAgICAgICAgbGV0IHNraXBwZWQgPSAwO1xuICAgICAgICAgICAgbGV0IGFscmVhZHlJU08gPSAwO1xuICAgICAgICAgICAgbGV0IGZhaWxlZCA9IDA7XG4gICAgICAgICAgICBsZXQgZXJyb3JzID0gMDtcblxuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGZpbGVzIGluIHNtYWxsZXIgYmF0Y2hlcyB0byBhdm9pZCBibG9ja2luZ1xuICAgICAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnZlcnNhdGlvbkZpbGVzLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaCA9IGNvbnZlcnNhdGlvbkZpbGVzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuXG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYmF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkKys7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBwcm9jZXNzIE5leHVzIHBsdWdpbiBmaWxlc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTmV4dXNGaWxlKGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYWROb25JU08gPSB0aGlzLmhhc05vbklTT1RpbWVzdGFtcHMoY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhZE5vbklTTykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFscmVhZHlJU08rKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gTm90aGluZyB0byBkb1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJ0ZWRDb250ZW50ID0gdGhpcy5jb252ZXJ0VGltZXN0YW1wc1RvSVNPODYwMShjb250ZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgIT09IGNvbnZlcnRlZENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcGx1Z2luX3ZlcnNpb24gdG8gMS4zLjBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbENvbnRlbnQgPSB0aGlzLnVwZGF0ZVBsdWdpblZlcnNpb24oY29udmVydGVkQ29udGVudCwgXCIxLjMuMFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGZpbmFsQ29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVydGVkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0aWxsIGhhcyBub24tSVNPIGFmdGVyIGF0dGVtcHQgXHUyMTkyIG1hcmsgYXMgZmFpbGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY29udmVydGluZyB0aW1lc3RhbXBzIGluICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTbWFsbCBkZWxheSBiZXR3ZWVuIGJhdGNoZXMgdG8gcHJldmVudCBibG9ja2luZ1xuICAgICAgICAgICAgICAgIGlmIChpICsgYmF0Y2hTaXplIDwgY29udmVyc2F0aW9uRmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAqKldoYXQgdGhpcyBkb2VzOioqYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYENvbnZlcnRzIGNvbnZlcnNhdGlvbiB0aW1lc3RhbXBzIHRvIHVuaXZlcnNhbCBJU08gODYwMSBmb3JtYXQgKFlZWVktTU0tRERUSEg6bW06c3NaKS5gKTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChgVGhpcyBmaXhlcyBwYXJzaW5nIGlzc3VlcyB3aXRoIGxvY2FsZS1zcGVjaWZpYyBkYXRlIGZvcm1hdHMuYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYGApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAqKlN1bW1hcnk6KipgKTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChgYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYC0gVG90YWwgZmlsZXMgc2Nhbm5lZDogJHtwcm9jZXNzZWR9YCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYC0gQWxyZWFkeSBpbiBJU08gZm9ybWF0OiAke2FscmVhZHlJU099YCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYC0gQ29udmVydGVkIHRvIElTTzogJHtjb252ZXJ0ZWR9YCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYC0gU2tpcHBlZCAobm9uLU5leHVzKTogJHtza2lwcGVkfWApO1xuICAgICAgICAgICAgaWYgKGZhaWxlZCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goYC0gRmFpbGVkIHRvIGNvbnZlcnQ6ICR7ZmFpbGVkfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVycm9ycyA+IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goYC0gRXJyb3JzOiAke2Vycm9yc31gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBlcnJvcnMgPT09IDAsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYENvbnZlcnRlZCAke2NvbnZlcnRlZH0gY29udmVyc2F0aW9uKHMpIHRvIElTTyA4NjAxIGZvcm1hdC5gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHJlc3VsdHNcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYENvbnZlcnRUb0lTTzg2MDFUaW1lc3RhbXBzLmV4ZWN1dGUgZmFpbGVkOmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFRpbWVzdGFtcCBjb252ZXJzaW9uIGZhaWxlZDogJHtlcnJvcn1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgZXJyb3I6IFN0cmluZyhlcnJvcikgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGZpbGUgYmVsb25ncyB0byBOZXh1cyBwbHVnaW5cbiAgICAgKi9cbiAgICBwcml2YXRlIGlzTmV4dXNGaWxlKGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gY29udGVudC5pbmNsdWRlcygnbmV4dXM6IG5leHVzLWFpLWNoYXQtaW1wb3J0ZXInKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBjb250ZW50IGhhcyBub24tSVNPIHRpbWVzdGFtcHMgKG5lZWQgY29udmVyc2lvbiB0byBJU08gODYwMSlcbiAgICAgKiBEZXRlY3RzIGFueSBmb3JtYXQgdGhhdCBpcyBub3QgYWxyZWFkeSBJU08gODYwMVxuICAgICAqL1xuICAgIHByaXZhdGUgaGFzTm9uSVNPVGltZXN0YW1wcyhjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgLy8gRXh0cmFjdCBmcm9udG1hdHRlciBvbmx5XG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxyP1xcbihbXFxzXFxTXSo/KVxccj9cXG4tLS0vKTtcbiAgICAgICAgaWYgKCFmcm9udG1hdHRlck1hdGNoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGZyb250bWF0dGVyTWF0Y2hbMV07XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIElTTyA4NjAxIGZvcm1hdCAoaWYgcHJlc2VudCwgbm8gY29udmVyc2lvbiBuZWVkZWQpXG4gICAgICAgIGNvbnN0IGhhc0lTTyA9IC9eKGNyZWF0ZXx1cGRhdGUpX3RpbWU6IFxcZHs0fS1cXGR7Mn0tXFxkezJ9W1QgXVxcZHsyfTpcXGR7Mn06XFxkezJ9KFxcLlxcZHszfSk/Wj8kL20udGVzdChmcm9udG1hdHRlcik7XG5cbiAgICAgICAgaWYgKGhhc0lTTykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBBbHJlYWR5IElTTywgbm8gY29udmVyc2lvbiBuZWVkZWRcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGZvciBhbnkgZGF0ZS1saWtlIHBhdHRlcm4gKG5lZWRzIGNvbnZlcnNpb24pXG4gICAgICAgIC8vIE1hdGNoZXM6IEREL01NL1lZWVksIE1NL0REL1lZWVksIFlZWVkvTU0vREQsIERELk1NLllZWVksIGV0Yy5cbiAgICAgICAgY29uc3QgaGFzTm9uSVNPID0gL14oY3JlYXRlfHVwZGF0ZSlfdGltZTogXFxkezEsNH1bXFwvXFwuXFwtXVxcZHsxLDJ9W1xcL1xcLlxcLV1cXGR7Miw0fS9tLnRlc3QoZnJvbnRtYXR0ZXIpO1xuXG4gICAgICAgIHJldHVybiBoYXNOb25JU087XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydCBhbnkgZGF0ZSBmb3JtYXQgdG8gSVNPIDg2MDEgaW4gZnJvbnRtYXR0ZXIgb25seVxuICAgICAqIFN1cHBvcnRzOiBVUywgRVUsIERFLCBKUCwgYW5kIGFsbCBsb2NhbGUtYmFzZWQgZm9ybWF0c1xuICAgICAqIFVzZXMgaW50ZWxsaWdlbnQgRGF0ZVBhcnNlciBmb3IgYXV0b21hdGljIGZvcm1hdCBkZXRlY3Rpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIGNvbnZlcnRUaW1lc3RhbXBzVG9JU084NjAxKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG5cbiAgICAgICAgLy8gRXh0cmFjdCBmcm9udG1hdHRlclxuICAgICAgICBjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxccj9cXG4oW1xcc1xcU10qPylcXHI/XFxuLS0tLyk7XG4gICAgICAgIGlmICghZnJvbnRtYXR0ZXJNYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlck1hdGNoWzFdO1xuICAgICAgICBjb25zdCByZXN0T2ZDb250ZW50ID0gY29udGVudC5zdWJzdHJpbmcoZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGgpO1xuXG5cbiAgICAgICAgLy8gQ29udmVydCB0aW1lc3RhbXBzIGluIGZyb250bWF0dGVyIHVzaW5nIGludGVsbGlnZW50IHBhcnNlclxuICAgICAgICAvLyBNYXRjaGVzIGFueSBkYXRlIGZvcm1hdDogREQvTU0vWVlZWSwgTU0vREQvWVlZWSwgWVlZWS9NTS9ERCwgREQuTU0uWVlZWSwgZXRjLlxuICAgICAgICBsZXQgY29udmVyc2lvbkNvdW50ID0gMDtcbiAgICAgICAgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlci5yZXBsYWNlKFxuICAgICAgICAgICAgL14oY3JlYXRlfHVwZGF0ZSlfdGltZTogKC4rKSQvZ20sXG4gICAgICAgICAgICAobWF0Y2gsIGZpZWxkLCBkYXRlU3RyKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAvLyBTa2lwIGlmIGFscmVhZHkgSVNPIDg2MDFcbiAgICAgICAgICAgICAgICBpZiAoL15cXGR7NH0tXFxkezJ9LVxcZHsyfVtUIF1cXGR7Mn06XFxkezJ9OlxcZHsyfShcXC5cXGR7M30pP1o/JC8udGVzdChkYXRlU3RyKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2g7IC8vIEFscmVhZHkgSVNPLCBrZWVwIGFzLWlzXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCB1c2luZyBpbnRlbGxpZ2VudCBwYXJzZXJcbiAgICAgICAgICAgICAgICBsZXQgaXNvRGF0ZSA9IERhdGVQYXJzZXIuY29udmVydFRvSVNPODYwMShkYXRlU3RyKTtcblxuICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBpZiBnbG9iYWwgb3JkZXIgd2FzIGRldGVjdGVkLCB0cnkgd2l0aCBmb3JjZWQgb3JkZXJcbiAgICAgICAgICAgICAgICBpZiAoIWlzb0RhdGUgJiYgdGhpcy5nbG9iYWxPcmRlcikge1xuICAgICAgICAgICAgICAgICAgICBpc29EYXRlID0gRGF0ZVBhcnNlci5jb252ZXJ0VG9JU084NjAxV2l0aE9yZGVyKGRhdGVTdHIsIHRoaXMuZ2xvYmFsT3JkZXIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghaXNvRGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYGNvbnZlcnRUaW1lc3RhbXBzVG9JU084NjAxIC0gRkFJTEVEIHRvIGNvbnZlcnQ6ICR7ZGF0ZVN0cn1gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoOyAvLyBLZWVwIG9yaWdpbmFsIGlmIGNvbnZlcnNpb24gZmFpbHNcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb252ZXJzaW9uQ291bnQrKztcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7ZmllbGR9X3RpbWU6ICR7aXNvRGF0ZX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG5cbiAgICAgICAgLy8gUmVjb25zdHJ1Y3QgZmlsZVxuICAgICAgICByZXR1cm4gYC0tLVxcbiR7ZnJvbnRtYXR0ZXJ9XFxuLS0tJHtyZXN0T2ZDb250ZW50fWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHBsdWdpbl92ZXJzaW9uIGluIGZyb250bWF0dGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSB1cGRhdGVQbHVnaW5WZXJzaW9uKGNvbnRlbnQ6IHN0cmluZywgdmVyc2lvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZShcbiAgICAgICAgICAgIC9ecGx1Z2luX3ZlcnNpb246IFwiLio/XCIkL20sXG4gICAgICAgICAgICBgcGx1Z2luX3ZlcnNpb246IFwiJHt2ZXJzaW9ufVwiYFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIHZlcmlmeShjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyIHx8IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLmFyY2hpdmVGb2xkZXIgfHwgXCJOZXh1cy9Db252ZXJzYXRpb25zXCI7XG4gICAgICAgICAgICBjb25zdCBhbGxGaWxlcyA9IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGNvbnZlcnNhdGlvbiBmaWxlcyAoc2FtcGxlIHZlcmlmaWNhdGlvbilcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZmlsZS5wYXRoLnN0YXJ0c1dpdGgoY29udmVyc2F0aW9uRm9sZGVyKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gZmlsZS5wYXRoLnN1YnN0cmluZyhjb252ZXJzYXRpb25Gb2xkZXIubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdSZXBvcnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdBdHRhY2htZW50cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgncmVwb3J0cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnYXR0YWNobWVudHMvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSkuc2xpY2UoMCwgNSk7IC8vIENoZWNrIGZpcnN0IDUgZmlsZXNcblxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGNvbnZlcnNhdGlvbkZpbGVzKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNraXAgbm9uLU5leHVzIGZpbGVzXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc05leHVzRmlsZShjb250ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzdGlsbCBoYXMgbm9uLUlTTyBmb3JtYXQgdGltZXN0YW1wc1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNOb25JU09UaW1lc3RhbXBzKGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwbHVnaW5fdmVyc2lvbiB3YXMgdXBkYXRlZFxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQuaW5jbHVkZXMoJ3BsdWdpbl92ZXJzaW9uOiBcIjEuMy4wXCInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciB2ZXJpZnlpbmcgZmlsZSAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYENvbnZlcnRUb0lTTzg2MDFUaW1lc3RhbXBzLnZlcmlmeSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEZpeCBmcm9udG1hdHRlciBhbGlhc2VzIHdpdGggWUFNTCBzcGVjaWFsIGNoYXJhY3RlcnNcbiAqIFRoaXMgcmVzb2x2ZXMgSXNzdWUgIzE3IC0gdGl0bGVzIHdpdGggY29sb25zLCBicmFja2V0cywgYnJhY2VzLCBldGMuXG4gKi9cbmNsYXNzIEZpeEZyb250bWF0dGVyQWxpYXNlc09wZXJhdGlvbiBleHRlbmRzIFVwZ3JhZGVPcGVyYXRpb24ge1xuICAgIHJlYWRvbmx5IGlkID0gXCJmaXgtZnJvbnRtYXR0ZXItYWxpYXNlc1wiO1xuICAgIHJlYWRvbmx5IG5hbWUgPSBcIkZpeCBGcm9udG1hdHRlciBBbGlhc2VzXCI7XG4gICAgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSBcIkZpeGVzIFlBTUwgc3ludGF4IGVycm9ycyBpbiBjb252ZXJzYXRpb24gYWxpYXNlcy4gUHJvcGVybHkgcXVvdGVzIHRpdGxlcyBjb250YWluaW5nIHNwZWNpYWwgY2hhcmFjdGVycyAoY29sb25zLCBicmFja2V0cywgZXRjLikgdG8gcHJldmVudCBmcm9udG1hdHRlciBwYXJzaW5nIGVycm9ycy5cIjtcbiAgICByZWFkb25seSB0eXBlID0gXCJhdXRvbWF0aWNcIiBhcyBjb25zdDtcblxuICAgIGFzeW5jIGNhblJ1bihjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyIHx8IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLmFyY2hpdmVGb2xkZXIgfHwgXCJOZXh1cy9Db252ZXJzYXRpb25zXCI7XG4gICAgICAgICAgICBjb25zdCBhbGxGaWxlcyA9IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAgICAgICAgIC8vIEZpbHRlciBjb252ZXJzYXRpb24gZmlsZXMgKGV4Y2x1ZGUgUmVwb3J0cy9BdHRhY2htZW50cylcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZmlsZS5wYXRoLnN0YXJ0c1dpdGgoY29udmVyc2F0aW9uRm9sZGVyKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gZmlsZS5wYXRoLnN1YnN0cmluZyhjb252ZXJzYXRpb25Gb2xkZXIubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdSZXBvcnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdBdHRhY2htZW50cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgncmVwb3J0cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnYXR0YWNobWVudHMvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFueSBmaWxlcyBoYXZlIHByb2JsZW1hdGljIGFsaWFzZXNcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBjb252ZXJzYXRpb25GaWxlcy5zbGljZSgwLCAxMCkpIHsgLy8gU2FtcGxlIGZpcnN0IDEwIGZpbGVzXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgY2hlY2sgZmlsZXMgdGhhdCBiZWxvbmcgdG8gdGhpcyBwbHVnaW5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTmV4dXNGaWxlKGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBwcm9ibGVtYXRpYyBhbGlhc2VzXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1Byb2JsZW1hdGljQWxpYXMoY29udGVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY2hlY2tpbmcgZmlsZSAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRml4RnJvbnRtYXR0ZXJBbGlhc2VzLmNhblJ1biBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8T3BlcmF0aW9uUmVzdWx0PiB7XG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZvbGRlciA9IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLmNvbnZlcnNhdGlvbkZvbGRlciB8fCBjb250ZXh0LnBsdWdpbi5zZXR0aW5ncy5hcmNoaXZlRm9sZGVyIHx8IFwiTmV4dXMvQ29udmVyc2F0aW9uc1wiO1xuICAgICAgICAgICAgY29uc3QgYWxsRmlsZXMgPSBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgICAgICAgICAvLyBGaWx0ZXIgY29udmVyc2F0aW9uIGZpbGVzIChleGNsdWRlIFJlcG9ydHMvQXR0YWNobWVudHMpXG4gICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25GaWxlcyA9IGFsbEZpbGVzLmZpbHRlcihmaWxlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGUucGF0aC5zdGFydHNXaXRoKGNvbnZlcnNhdGlvbkZvbGRlcikpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGZpbGUucGF0aC5zdWJzdHJpbmcoY29udmVyc2F0aW9uRm9sZGVyLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChyZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnUmVwb3J0cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnQXR0YWNobWVudHMvJykgfHxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ3JlcG9ydHMvJykgfHxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ2F0dGFjaG1lbnRzLycpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgcHJvY2Vzc2VkID0gMDtcbiAgICAgICAgICAgIGxldCBmaXhlZCA9IDA7XG4gICAgICAgICAgICBsZXQgc2tpcHBlZCA9IDA7XG4gICAgICAgICAgICBsZXQgZXJyb3JzID0gMDtcblxuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGZpbGVzIGluIHNtYWxsZXIgYmF0Y2hlcyB0byBhdm9pZCBibG9ja2luZ1xuICAgICAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnZlcnNhdGlvbkZpbGVzLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaCA9IGNvbnZlcnNhdGlvbkZpbGVzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuXG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYmF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkKys7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBwcm9jZXNzIE5leHVzIHBsdWdpbiBmaWxlc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTmV4dXNGaWxlKGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHByb2Nlc3MgZmlsZXMgd2l0aCBwcm9ibGVtYXRpYyBhbGlhc2VzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzUHJvYmxlbWF0aWNBbGlhcyhjb250ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXhlZENvbnRlbnQgPSB0aGlzLmZpeEFsaWFzZXMoY29udGVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50ICE9PSBmaXhlZENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGZpeGVkQ29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZml4ZWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmaXhpbmcgYWxpYXNlcyBpbiAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU21hbGwgZGVsYXkgYmV0d2VlbiBiYXRjaGVzIHRvIHByZXZlbnQgYmxvY2tpbmdcbiAgICAgICAgICAgICAgICBpZiAoaSArIGJhdGNoU2l6ZSA8IGNvbnZlcnNhdGlvbkZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAqKldoYXQgdGhpcyBkb2VzOioqYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYEZpeGVzIFlBTUwgc3ludGF4IGVycm9ycyBpbiBjb252ZXJzYXRpb24gYWxpYXNlcyBjYXVzZWQgYnkgc3BlY2lhbCBjaGFyYWN0ZXJzLmApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGBQcm9wZXJseSBxdW90ZXMgdGl0bGVzIGNvbnRhaW5pbmcgY29sb25zLCBicmFja2V0cywgZXRjLiB0byBwcmV2ZW50IHBhcnNpbmcgZXJyb3JzLmApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGBgKTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChgKipTdW1tYXJ5OioqYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYGApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAtIFRvdGFsIGZpbGVzIHNjYW5uZWQ6ICR7cHJvY2Vzc2VkfWApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAtIEZpeGVkOiAke2ZpeGVkfWApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAtIFNraXBwZWQgKG5vbi1OZXh1cyk6ICR7c2tpcHBlZH1gKTtcbiAgICAgICAgICAgIGlmIChlcnJvcnMgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAtIEVycm9yczogJHtlcnJvcnN9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZXJyb3JzID09PSAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBGaXhlZCAke2ZpeGVkfSBjb252ZXJzYXRpb24ocykgd2l0aCBwcm9ibGVtYXRpYyBhbGlhc2VzLmAsXG4gICAgICAgICAgICAgICAgZGV0YWlsczogcmVzdWx0c1xuICAgICAgICAgICAgfTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRml4RnJvbnRtYXR0ZXJBbGlhc2VzLmV4ZWN1dGUgZmFpbGVkOmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEFsaWFzIGZpeCBmYWlsZWQ6ICR7ZXJyb3J9YCxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBmaWxlIGJlbG9uZ3MgdG8gTmV4dXMgcGx1Z2luXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc05leHVzRmlsZShjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQuaW5jbHVkZXMoJ25leHVzOiBuZXh1cy1haS1jaGF0LWltcG9ydGVyJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgY29udGVudCBoYXMgcHJvYmxlbWF0aWMgYWxpYXNlcyAoWUFNTCBzcGVjaWFsIGNoYXJhY3RlcnMgd2l0aG91dCBwcm9wZXIgcXVvdGluZylcbiAgICAgKi9cbiAgICBwcml2YXRlIGhhc1Byb2JsZW1hdGljQWxpYXMoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIEV4dHJhY3QgZnJvbnRtYXR0ZXIgb25seVxuICAgICAgICBjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuICAgICAgICBpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGZyb250bWF0dGVyTWF0Y2hbMV07XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGFsaWFzZXMgbGluZVxuICAgICAgICBjb25zdCBhbGlhc01hdGNoID0gZnJvbnRtYXR0ZXIubWF0Y2goL15hbGlhc2VzOiAoLispJC9tKTtcbiAgICAgICAgaWYgKCFhbGlhc01hdGNoKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgYWxpYXNWYWx1ZSA9IGFsaWFzTWF0Y2hbMV07XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgYWxpYXMgY29udGFpbnMgWUFNTCBzcGVjaWFsIGNoYXJhY3RlcnMgYnV0IGlzIG5vdCBwcm9wZXJseSBxdW90ZWRcbiAgICAgICAgLy8gUHJvYmxlbWF0aWMgcGF0dGVybnM6XG4gICAgICAgIC8vIC0gQ29udGFpbnMgY29sb24gYnV0IG5vdCBxdW90ZWQ6IFwiYWxpYXNlczogTXkgVGl0bGU6IFN1YnRpdGxlXCJcbiAgICAgICAgLy8gLSBDb250YWlucyBicmFja2V0cy9icmFjZXMgYnV0IG5vdCBxdW90ZWQ6IFwiYWxpYXNlczogTXkgW1RpdGxlXVwiXG4gICAgICAgIC8vIC0gU3RhcnRzIHdpdGggc3BlY2lhbCBjaGFyIGJ1dCBub3QgcXVvdGVkOiBcImFsaWFzZXM6ICNoYXNodGFnXCJcblxuICAgICAgICAvLyBJZiBhbHJlYWR5IHByb3Blcmx5IHF1b3RlZCB3aXRoIHNpbmdsZSBxdW90ZXMsIGl0J3MgZmluZVxuICAgICAgICBpZiAoYWxpYXNWYWx1ZS5zdGFydHNXaXRoKFwiJ1wiKSAmJiBhbGlhc1ZhbHVlLmVuZHNXaXRoKFwiJ1wiKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgYWxyZWFkeSBwcm9wZXJseSBxdW90ZWQgd2l0aCBkb3VibGUgcXVvdGVzIChvbGQgZm9ybWF0KSwgbmVlZHMgZml4aW5nXG4gICAgICAgIGlmIChhbGlhc1ZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgYWxpYXNWYWx1ZS5lbmRzV2l0aCgnXCInKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBmb3IgWUFNTCBzcGVjaWFsIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHF1b3RpbmdcbiAgICAgICAgY29uc3QgbmVlZHNRdW90aW5nID1cbiAgICAgICAgICAgIGFsaWFzVmFsdWUuaW5jbHVkZXMoJzonKSB8fFxuICAgICAgICAgICAgYWxpYXNWYWx1ZS5pbmNsdWRlcygnWycpIHx8XG4gICAgICAgICAgICBhbGlhc1ZhbHVlLmluY2x1ZGVzKCddJykgfHxcbiAgICAgICAgICAgIGFsaWFzVmFsdWUuaW5jbHVkZXMoJ3snKSB8fFxuICAgICAgICAgICAgYWxpYXNWYWx1ZS5pbmNsdWRlcygnfScpIHx8XG4gICAgICAgICAgICBhbGlhc1ZhbHVlLmluY2x1ZGVzKCdcIicpIHx8XG4gICAgICAgICAgICAvXih0cnVlfGZhbHNlfG51bGx8eWVzfG5vfG9ufG9mZnxcXGQrfFxcZCpcXC5cXGQrKSQvaS50ZXN0KGFsaWFzVmFsdWUpIHx8XG4gICAgICAgICAgICBhbGlhc1ZhbHVlLnN0YXJ0c1dpdGgoJyMnKSB8fFxuICAgICAgICAgICAgYWxpYXNWYWx1ZS5zdGFydHNXaXRoKCcmJykgfHxcbiAgICAgICAgICAgIGFsaWFzVmFsdWUuc3RhcnRzV2l0aCgnKicpIHx8XG4gICAgICAgICAgICBhbGlhc1ZhbHVlLnN0YXJ0c1dpdGgoJyEnKSB8fFxuICAgICAgICAgICAgYWxpYXNWYWx1ZS5zdGFydHNXaXRoKCd8JykgfHxcbiAgICAgICAgICAgIGFsaWFzVmFsdWUuc3RhcnRzV2l0aCgnPicpIHx8XG4gICAgICAgICAgICBhbGlhc1ZhbHVlLnN0YXJ0c1dpdGgoJyUnKSB8fFxuICAgICAgICAgICAgYWxpYXNWYWx1ZS5zdGFydHNXaXRoKCdAJykgfHxcbiAgICAgICAgICAgIGFsaWFzVmFsdWUuc3RhcnRzV2l0aCgnYCcpO1xuXG4gICAgICAgIHJldHVybiBuZWVkc1F1b3Rpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRml4IGFsaWFzZXMgaW4gZnJvbnRtYXR0ZXIgdXNpbmcgZ2VuZXJhdGVTYWZlQWxpYXNcbiAgICAgKi9cbiAgICBwcml2YXRlIGZpeEFsaWFzZXMoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgLy8gRXh0cmFjdCBmcm9udG1hdHRlclxuICAgICAgICBjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuICAgICAgICBpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHJldHVybiBjb250ZW50O1xuXG4gICAgICAgIGxldCBmcm9udG1hdHRlciA9IGZyb250bWF0dGVyTWF0Y2hbMV07XG4gICAgICAgIGNvbnN0IHJlc3RPZkNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZyhmcm9udG1hdHRlck1hdGNoWzBdLmxlbmd0aCk7XG5cbiAgICAgICAgLy8gRmluZCBhbmQgZml4IGFsaWFzZXMgbGluZVxuICAgICAgICBmcm9udG1hdHRlciA9IGZyb250bWF0dGVyLnJlcGxhY2UoXG4gICAgICAgICAgICAvXmFsaWFzZXM6ICguKykkL20sXG4gICAgICAgICAgICAoX20sIGFsaWFzVmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgZXhpc3RpbmcgcXVvdGVzIGlmIGFueVxuICAgICAgICAgICAgICAgIGxldCBjbGVhbkFsaWFzID0gYWxpYXNWYWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKChjbGVhbkFsaWFzLnN0YXJ0c1dpdGgoJ1wiJykgJiYgY2xlYW5BbGlhcy5lbmRzV2l0aCgnXCInKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGNsZWFuQWxpYXMuc3RhcnRzV2l0aChcIidcIikgJiYgY2xlYW5BbGlhcy5lbmRzV2l0aChcIidcIikpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFuQWxpYXMgPSBjbGVhbkFsaWFzLnNsaWNlKDEsIC0xKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBVbmVzY2FwZSBhbnkgZXNjYXBlZCBxdW90ZXNcbiAgICAgICAgICAgICAgICBjbGVhbkFsaWFzID0gY2xlYW5BbGlhcy5yZXBsYWNlKC8nJy9nLCBcIidcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBzYWZlIGFsaWFzXG4gICAgICAgICAgICAgICAgY29uc3Qgc2FmZUFsaWFzID0gZ2VuZXJhdGVTYWZlQWxpYXMoY2xlYW5BbGlhcyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYGFsaWFzZXM6ICR7c2FmZUFsaWFzfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gUmVjb25zdHJ1Y3QgZmlsZVxuICAgICAgICByZXR1cm4gYC0tLVxcbiR7ZnJvbnRtYXR0ZXJ9XFxuLS0tJHtyZXN0T2ZDb250ZW50fWA7XG4gICAgfVxuXG4gICAgYXN5bmMgdmVyaWZ5KGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25Gb2xkZXIgPSBjb250ZXh0LnBsdWdpbi5zZXR0aW5ncy5jb252ZXJzYXRpb25Gb2xkZXIgfHwgY29udGV4dC5wbHVnaW4uc2V0dGluZ3MuYXJjaGl2ZUZvbGRlciB8fCBcIk5leHVzL0NvbnZlcnNhdGlvbnNcIjtcbiAgICAgICAgICAgIGNvbnN0IGFsbEZpbGVzID0gY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgY29udmVyc2F0aW9uIGZpbGVzIChzYW1wbGUgdmVyaWZpY2F0aW9uKVxuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlLnBhdGguc3RhcnRzV2l0aChjb252ZXJzYXRpb25Gb2xkZXIpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBmaWxlLnBhdGguc3Vic3RyaW5nKGNvbnZlcnNhdGlvbkZvbGRlci5sZW5ndGggKyAxKTtcbiAgICAgICAgICAgICAgICBpZiAocmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ1JlcG9ydHMvJykgfHxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ0F0dGFjaG1lbnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdyZXBvcnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdhdHRhY2htZW50cy8nKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KS5zbGljZSgwLCA1KTsgLy8gQ2hlY2sgZmlyc3QgNSBmaWxlc1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgY29udmVyc2F0aW9uRmlsZXMpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBub24tTmV4dXMgZmlsZXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTmV4dXNGaWxlKGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHN0aWxsIGhhcyBwcm9ibGVtYXRpYyBhbGlhc2VzXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1Byb2JsZW1hdGljQWxpYXMoY29udGVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgdmVyaWZ5aW5nIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGaXhGcm9udG1hdHRlckFsaWFzZXMudmVyaWZ5IGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogTWlncmF0ZSBSZXBvcnRzIGZvbGRlciB0byB2YXVsdCByb290IGFuZCBjcmVhdGUgcmVwb3J0Rm9sZGVyIHNldHRpbmdcbiAqIC0gTW92ZSBSZXBvcnRzIGZyb20gPGFyY2hpdmVGb2xkZXI+L1JlcG9ydHMgdG8gTmV4dXMgUmVwb3J0cyAodmF1bHQgcm9vdClcbiAqIC0gQ3JlYXRlIHJlcG9ydEZvbGRlciBzZXR0aW5nXG4gKiBUaGlzIGlzIHRoZSBPTkxZIGNoYW5nZSBpbiB0aGlzIG9wZXJhdGlvbiAtIGNvbnZlcnNhdGlvbkZvbGRlciBhbmQgYXR0YWNobWVudEZvbGRlciBhcmUgbm90IHRvdWNoZWRcbiAqL1xuY2xhc3MgTWlncmF0ZVRvU2VwYXJhdGVGb2xkZXJzT3BlcmF0aW9uIGV4dGVuZHMgVXBncmFkZU9wZXJhdGlvbiB7XG4gICAgcmVhZG9ubHkgaWQgPSBcIm1pZ3JhdGUtdG8tc2VwYXJhdGUtZm9sZGVyc1wiO1xuICAgIHJlYWRvbmx5IG5hbWUgPSBcIkltcGxlbWVudCBTZXBhcmF0ZSBGb2xkZXIgU2V0dGluZ3NcIjtcbiAgICByZWFkb25seSBkZXNjcmlwdGlvbiA9IFwiQ3JlYXRlcyBkZWRpY2F0ZWQgc2V0dGluZ3MgZm9yIFJlcG9ydHMgZm9sZGVyIGxvY2F0aW9uIGFuZCBtb3ZlcyBSZXBvcnRzIGZyb20gaW5zaWRlIENvbnZlcnNhdGlvbnMgdG8gdGhlIHZhdWx0IHJvb3QgZm9yIGJldHRlciBvcmdhbml6YXRpb24uXCI7XG4gICAgcmVhZG9ubHkgdHlwZSA9IFwiYXV0b21hdGljXCIgYXMgY29uc3Q7XG5cbiAgICBhc3luYyBjYW5SdW4oY29udGV4dDogVXBncmFkZUNvbnRleHQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgLy8gUnVuIGlmIHJlcG9ydEZvbGRlciBpcyBlbXB0eSBvciBzdGlsbCBwb2ludHMgdG8gdGhlIG9sZCBuZXN0ZWQgbG9jYXRpb25cbiAgICAgICAgY29uc3QgcmVwb3J0Rm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MucmVwb3J0Rm9sZGVyO1xuICAgICAgICBjb25zdCBhcmNoaXZlRm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MuYXJjaGl2ZUZvbGRlciB8fCBcIk5leHVzL0NvbnZlcnNhdGlvbnNcIjtcbiAgICAgICAgY29uc3Qgb2xkUmVwb3J0UGF0aCA9IGAke2FyY2hpdmVGb2xkZXJ9L1JlcG9ydHNgO1xuXG4gICAgICAgIC8vIE1pZ3JhdGlvbiBuZWVkZWQgaWY6XG4gICAgICAgIC8vIDEuIHJlcG9ydEZvbGRlciBpcyBlbXB0eS91bmRlZmluZWQsIE9SXG4gICAgICAgIC8vIDIuIHJlcG9ydEZvbGRlciBzdGlsbCBwb2ludHMgdG8gdGhlIG9sZCBuZXN0ZWQgcGF0aCAoZS5nLiwgXCJOZXh1cy9Db252ZXJzYXRpb25zL1JlcG9ydHNcIilcbiAgICAgICAgcmV0dXJuICFyZXBvcnRGb2xkZXIgfHwgcmVwb3J0Rm9sZGVyID09PSBcIlwiIHx8IHJlcG9ydEZvbGRlciA9PT0gb2xkUmVwb3J0UGF0aDtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxPcGVyYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0czogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAqKldoYXQgdGhpcyBkb2VzOioqYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYFZlcnNpb24gMS4zLjAgYWRkcyBhIGRlZGljYXRlZCBzZXR0aW5nIGZvciB0aGUgUmVwb3J0cyBmb2xkZXIgbG9jYXRpb24uYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYFRvIHByZXZlbnQgcmVwb3J0cyBmcm9tIG1vdmluZyB3aGVuIHlvdSByZW9yZ2FuaXplIGNvbnZlcnNhdGlvbnMsIHdlJ3JlIG1vdmluZyB0aGUgUmVwb3J0cyBmb2xkZXIgdG8gdGhlIHZhdWx0IHJvb3QuYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYGApO1xuXG5cbiAgICAgICAgICAgIC8vIEdldCBvbGQgcmVwb3J0IHBhdGggKHdhcyBhbHdheXMgPGFyY2hpdmVGb2xkZXI+L1JlcG9ydHMgaW4gdjEuMi4wKVxuICAgICAgICAgICAgY29uc3Qgb2xkQXJjaGl2ZUZvbGRlciA9IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLmFyY2hpdmVGb2xkZXIgfHwgXCJOZXh1cy9Db252ZXJzYXRpb25zXCI7XG4gICAgICAgICAgICBjb25zdCBvbGRSZXBvcnRQYXRoID0gYCR7b2xkQXJjaGl2ZUZvbGRlcn0vUmVwb3J0c2A7XG4gICAgICAgICAgICBjb25zdCBuZXdSZXBvcnRQYXRoID0gXCJOZXh1cyBSZXBvcnRzXCI7XG5cblxuICAgICAgICAgICAgLy8gVHJ5IHRvIG1vdmUgUmVwb3J0cyBmb2xkZXIgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCBvbGRSZXBvcnRGb2xkZXIgPSBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9sZFJlcG9ydFBhdGgpO1xuICAgICAgICAgICAgbGV0IHJlcG9ydHNNb3ZlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAob2xkUmVwb3J0Rm9sZGVyICYmIG9sZFJlcG9ydEZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb3ZlQW5kTWVyZ2VGb2xkZXJzKG9sZFJlcG9ydEZvbGRlciwgbmV3UmVwb3J0UGF0aCwgY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0c01vdmVkID0gcmVzdWx0Lm1vdmVkID4gMDtcblxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0byBleHBsaWNpdGx5IGRlbGV0ZSB0aGUgb2xkIFJlcG9ydHMgZm9sZGVyIGlmIGl0IHN0aWxsIGV4aXN0c1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RpbGxFeGlzdHMgPSBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMob2xkUmVwb3J0UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RpbGxFeGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJUb0RlbGV0ZSA9IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2xkUmVwb3J0UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGRlclRvRGVsZXRlICYmIGZvbGRlclRvRGVsZXRlIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQuZGVsZXRlKGZvbGRlclRvRGVsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGRlbGV0ZUVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBjcml0aWNhbCAtIGp1c3QgbG9nIGl0XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LnNraXBwZWQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZlY3Qgc3VjY2Vzc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGBcdTI3MDUgUmVwb3J0cyBmb2xkZXIgbW92ZWQ6IFxcYCR7b2xkUmVwb3J0UGF0aH1cXGAgXHUyMTkyIFxcYCR7bmV3UmVwb3J0UGF0aH1cXGAgKCR7cmVzdWx0Lm1vdmVkfSBmaWxlKHMpKWApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29tZSBmaWxlcyBza2lwcGVkIG9yIGVycm9yc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGBcdTI2QTBcdUZFMEYgUmVwb3J0cyBmb2xkZXIgbWlncmF0aW9uIGNvbXBsZXRlZCB3aXRoIHdhcm5pbmdzOmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAgICAtIFN1Y2Nlc3NmdWxseSBtb3ZlZDogJHtyZXN1bHQubW92ZWR9IGZpbGUocylgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc2tpcHBlZCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goYCAgIC0gU2tpcHBlZCAoYWxyZWFkeSBleGlzdCk6ICR7cmVzdWx0LnNraXBwZWR9IGZpbGUocylgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3JzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChgICAgLSBFcnJvcnM6ICR7cmVzdWx0LmVycm9yc30gZmlsZShzKWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW01pZ3JhdGVSZXBvcnRzRm9sZGVyXSBGYWlsZWQgdG8gbW92ZSBSZXBvcnRzIGZvbGRlcjpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBrZWVwIG9sZCBwYXRoIGlmIG1vdmUgZmFpbHNcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5wbHVnaW4uc2V0dGluZ3MucmVwb3J0Rm9sZGVyID0gb2xkUmVwb3J0UGF0aDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGBcdTI2QTBcdUZFMEYgUmVwb3J0cyBmb2xkZXIgY291bGQgbm90IGJlIG1vdmVkIGF1dG9tYXRpY2FsbHkuYCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChgICAgQ3VycmVudCBsb2NhdGlvbjogXFxgJHtvbGRSZXBvcnRQYXRofVxcYGApO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goYCAgIFlvdSBjYW4gbW92ZSBpdCBtYW51YWxseSBsYXRlciBpbiBzZXR0aW5ncy5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChgXHUyMTM5XHVGRTBGIE5vIGV4aXN0aW5nIFJlcG9ydHMgZm9sZGVyIGZvdW5kLiBOZXcgcmVwb3J0cyB3aWxsIGJlIGNyZWF0ZWQgaW4gXFxgJHtuZXdSZXBvcnRQYXRofVxcYGApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXQgcmVwb3J0IGZvbGRlciBzZXR0aW5nXG4gICAgICAgICAgICBpZiAocmVwb3J0c01vdmVkIHx8ICFvbGRSZXBvcnRGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnBsdWdpbi5zZXR0aW5ncy5yZXBvcnRGb2xkZXIgPSBuZXdSZXBvcnRQYXRoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBjb250ZXh0LnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJSZXBvcnRzIGZvbGRlciBtaWdyYXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiByZXN1bHRzXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbTWlncmF0ZVJlcG9ydHNGb2xkZXJdIEZhaWxlZDpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYFx1Mjc0QyBFcnJvcjogJHtlcnJvck1zZ31gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byBtaWdyYXRlIFJlcG9ydHMgZm9sZGVyOiAke2Vycm9yTXNnfWAsXG4gICAgICAgICAgICAgICAgZGV0YWlsczogcmVzdWx0c1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHZlcmlmeShjb250ZXh0OiBVcGdyYWRlQ29udGV4dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVmVyaWZ5IHJlcG9ydEZvbGRlciBzZXR0aW5nIGV4aXN0c1xuICAgICAgICAgICAgcmV0dXJuICEhY29udGV4dC5wbHVnaW4uc2V0dGluZ3MucmVwb3J0Rm9sZGVyO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTWlncmF0ZVJlcG9ydHNGb2xkZXIudmVyaWZ5IGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogTWlncmF0ZSBDbGF1ZGUgYXJ0aWZhY3RzIHRvIG5ldyBmb3JtYXQ6XG4gKiAxLiBSZW1vdmUgcmVkdW5kYW50IGhlYWRlciAoVHlwZS9MYW5ndWFnZS9Db21tYW5kL1ZlcnNpb24vSUQvVVVJRClcbiAqIDIuIEFkZCBjb252ZXJzYXRpb24gbGluayBpZiBtaXNzaW5nXG4gKiAzLiBBZGQgY3JlYXRlX3RpbWUgdG8gZnJvbnRtYXR0ZXJcbiAqL1xuY2xhc3MgTWlncmF0ZUNsYXVkZUFydGlmYWN0c09wZXJhdGlvbiBleHRlbmRzIFVwZ3JhZGVPcGVyYXRpb24ge1xuICAgIHJlYWRvbmx5IGlkID0gXCJtaWdyYXRlLWNsYXVkZS1hcnRpZmFjdHNcIjtcbiAgICByZWFkb25seSBuYW1lID0gXCJNaWdyYXRlIENsYXVkZSBBcnRpZmFjdHNcIjtcbiAgICByZWFkb25seSBkZXNjcmlwdGlvbiA9IFwiVXBkYXRlcyBleGlzdGluZyBDbGF1ZGUgYXJ0aWZhY3RzOiByZW1vdmVzIHJlZHVuZGFudCBoZWFkZXIgaW5mb3JtYXRpb24gKGFscmVhZHkgaW4gZnJvbnRtYXR0ZXIpLCBhZGRzIG1pc3NpbmcgY29udmVyc2F0aW9uIGxpbmtzLCBhbmQgYWRkcyBjcmVhdGlvbiB0aW1lc3RhbXBzIGZvciBiZXR0ZXIgb3JnYW5pemF0aW9uLlwiO1xuICAgIHJlYWRvbmx5IHR5cGUgPSBcImF1dG9tYXRpY1wiIGFzIGNvbnN0O1xuXG4gICAgYXN5bmMgY2FuUnVuKGNvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhdHRhY2htZW50Rm9sZGVyID0gY29udGV4dC5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudEZvbGRlciB8fCBcIk5leHVzIEFJIENoYXQgSW1wb3J0cy9BdHRhY2htZW50c1wiO1xuICAgICAgICAgICAgY29uc3QgY2xhdWRlQXJ0aWZhY3RzUGF0aCA9IGAke2F0dGFjaG1lbnRGb2xkZXJ9L2NsYXVkZS9hcnRpZmFjdHNgO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBDbGF1ZGUgYXJ0aWZhY3RzIGZvbGRlciBleGlzdHNcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY2xhdWRlQXJ0aWZhY3RzUGF0aCk7XG4gICAgICAgICAgICBpZiAoIWZvbGRlciB8fCAhKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZXQgYWxsIGFydGlmYWN0IGZpbGVzXG4gICAgICAgICAgICBjb25zdCBhbGxGaWxlcyA9IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgICAgICBjb25zdCBhcnRpZmFjdEZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoY2xhdWRlQXJ0aWZhY3RzUGF0aCkpO1xuXG4gICAgICAgICAgICBpZiAoYXJ0aWZhY3RGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFueSBhcnRpZmFjdHMgbmVlZCBtaWdyYXRpb24gKG1pc3NpbmcgY3JlYXRlX3RpbWUgb3IgaGFzIG9sZCBoZWFkZXIpXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYXJ0aWZhY3RGaWxlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZtID0gY29udGV4dC5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlciBhcyBhbnk7XG4gICAgICAgICAgICAgICAgaWYgKCFmbSB8fCBmbS5wcm92aWRlciAhPT0gJ2NsYXVkZScpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY3JlYXRlX3RpbWUgaXMgbWlzc2luZ1xuICAgICAgICAgICAgICAgIGlmICghZm0uY3JlYXRlX3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb2xkIGhlYWRlciBleGlzdHMgKHJlYWQgZmlsZSBjb250ZW50KVxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5pbmNsdWRlcygnKipUeXBlOioqIENsYXVkZSBBcnRpZmFjdCcpIHx8XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuaW5jbHVkZXMoJyoqQ29tbWFuZDoqKicpIHx8XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuaW5jbHVkZXMoJyoqVVVJRDoqKicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTWlncmF0ZUNsYXVkZUFydGlmYWN0cy5jYW5SdW4gZmFpbGVkOmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUoY29udGV4dDogVXBncmFkZUNvbnRleHQpOiBQcm9taXNlPE9wZXJhdGlvblJlc3VsdD4ge1xuICAgICAgICBjb25zdCByZXN1bHRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBsZXQgdG90YWxGaWxlcyA9IDA7XG4gICAgICAgIGxldCBwcm9jZXNzZWRDb3VudCA9IDA7XG4gICAgICAgIGxldCBza2lwcGVkQ291bnQgPSAwO1xuICAgICAgICBsZXQgdXBkYXRlZENvdW50ID0gMDtcbiAgICAgICAgbGV0IGVycm9yQ291bnQgPSAwO1xuICAgICAgICBsZXQgd2FybmluZ0NvdW50ID0gMDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYXR0YWNobWVudEZvbGRlciA9IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnRGb2xkZXIgfHwgXCJOZXh1cyBBSSBDaGF0IEltcG9ydHMvQXR0YWNobWVudHNcIjtcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZvbGRlciA9IGNvbnRleHQucGx1Z2luLnNldHRpbmdzLmNvbnZlcnNhdGlvbkZvbGRlciB8fCBcIk5leHVzL0NvbnZlcnNhdGlvbnNcIjtcbiAgICAgICAgICAgIGNvbnN0IGNsYXVkZUFydGlmYWN0c1BhdGggPSBgJHthdHRhY2htZW50Rm9sZGVyfS9jbGF1ZGUvYXJ0aWZhY3RzYDtcblxuICAgICAgICAgICAgLy8gR2V0IGFsbCBhcnRpZmFjdCBmaWxlc1xuICAgICAgICAgICAgY29uc3QgYWxsRmlsZXMgPSBjb250ZXh0LnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICAgICAgY29uc3QgYXJ0aWZhY3RGaWxlcyA9IGFsbEZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKGNsYXVkZUFydGlmYWN0c1BhdGgpKTtcbiAgICAgICAgICAgIHRvdGFsRmlsZXMgPSBhcnRpZmFjdEZpbGVzLmxlbmd0aDtcblxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAqKldoYXQgdGhpcyBkb2VzOioqYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYFVwZGF0ZXMgeW91ciBleGlzdGluZyBDbGF1ZGUgYXJ0aWZhY3RzIHRvIHRoZSBuZXcgZm9ybWF0OmApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAtIFJlbW92ZXMgcmVkdW5kYW50IGhlYWRlciBpbmZvcm1hdGlvbiAoVHlwZSwgTGFuZ3VhZ2UsIENvbW1hbmQsIGV0Yy4pYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYC0gQWRkcyBtaXNzaW5nIGNvbnZlcnNhdGlvbiBsaW5rc2ApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAtIEFkZHMgY3JlYXRpb24gdGltZXN0YW1wcyBmb3IgYmV0dGVyIG9yZ2FuaXphdGlvbmApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGBgKTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChgKipQcm9jZXNzaW5nICR7dG90YWxGaWxlc30gYXJ0aWZhY3QgZmlsZShzKS4uLioqYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYGApO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYXJ0aWZhY3RGaWxlcykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm0gPSBjb250ZXh0LnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyIGFzIGFueTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmbSB8fCBmbS5wcm92aWRlciAhPT0gJ2NsYXVkZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWRDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRDb3VudCsrO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gYXdhaXQgY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtb2RpZmllZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgd2FybmluZ3M6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBmcm9udG1hdHRlciBhbmQgYm9keVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmbU1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLVxcbihbXFxzXFxTXSopJC8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZtTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChgXHUyNzRDICR7ZmlsZS5iYXNlbmFtZX06IEludmFsaWQgZnJvbnRtYXR0ZXIgZm9ybWF0YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGxldCBmcm9udG1hdHRlciA9IGZtTWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgIGxldCBib2R5ID0gZm1NYXRjaFsyXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBUQVNLIDE6IEFkZCBjcmVhdGVfdGltZSBpZiBtaXNzaW5nXG4gICAgICAgICAgICAgICAgICAgIGlmICghZm0uY3JlYXRlX3RpbWUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlVGltZSA9IGF3YWl0IHRoaXMuZXh0cmFjdEFydGlmYWN0Q3JlYXRlVGltZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25Gb2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5wbHVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNyZWF0ZVRpbWUuc291cmNlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlciArPSBgXFxuY3JlYXRlX3RpbWU6ICR7Y3JlYXRlVGltZS52YWx1ZX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3JlYXRlVGltZS5zb3VyY2UgPT09ICdjb252ZXJzYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIgKz0gYFxcbmNyZWF0ZV90aW1lOiAke2NyZWF0ZVRpbWUudmFsdWV9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKGBVc2VkIGNvbnZlcnNhdGlvbiBjcmVhdGVfdGltZSAobWVzc2FnZSBub3QgZm91bmQpYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKGBDb3VsZCBub3QgZGV0ZXJtaW5lIGNyZWF0ZV90aW1lYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGAke2ZpbGUuYmFzZW5hbWV9OiBUQVNLIDEgLSBGQUlMRUQgdG8gZGV0ZXJtaW5lIGNyZWF0ZV90aW1lYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBUQVNLIDI6IFJlbW92ZSBvbGQgaGVhZGVyIChUeXBlL0xhbmd1YWdlL0NvbW1hbmQvVmVyc2lvbi9JRC9VVUlEKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJSZWdleCA9IC9cXG5cXG5cXCpcXCpUeXBlOlxcKlxcKiBDbGF1ZGUgQXJ0aWZhY3RcXG5cXCpcXCpMYW5ndWFnZTpcXCpcXCpbXlxcbl0qKD86XFxuXFwqXFwqQ29tbWFuZDpcXCpcXCpbXlxcbl0qKT8oPzpcXG5cXCpcXCpWZXJzaW9uOlxcKlxcKlteXFxuXSopPyg/OlxcblxcKlxcKklEOlxcKlxcKlteXFxuXSopPyg/OlxcblxcKlxcKlVVSUQ6XFwqXFwqW15cXG5dKik/LztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlclJlZ2V4LnRlc3QoYm9keSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSBib2R5LnJlcGxhY2UoaGVhZGVyUmVnZXgsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRBU0sgMzogQWRkIGNvbnZlcnNhdGlvbiBsaW5rIGlmIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFib2R5LmluY2x1ZGVzKCcqKkNvbnZlcnNhdGlvbjoqKicpICYmIGZtLmNvbnZlcnNhdGlvbl9pZCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25MaW5rID0gYXdhaXQgdGhpcy5maW5kQ29udmVyc2F0aW9uTGluayhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbS5jb252ZXJzYXRpb25faWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uRm9sZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQucGx1Z2luXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udmVyc2F0aW9uTGluaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluc2VydCBhZnRlciB0aXRsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlTWF0Y2ggPSBib2R5Lm1hdGNoKC9eIyBbXlxcbl0rXFxuLyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpdGxlTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zZXJ0UG9zID0gdGl0bGVNYXRjaFswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSBib2R5LnN1YnN0cmluZygwLCBpbnNlcnRQb3MpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcXG4qKkNvbnZlcnNhdGlvbjoqKiAke2NvbnZlcnNhdGlvbkxpbmt9XFxuYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5LnN1YnN0cmluZyhpbnNlcnRQb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RpZmllZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGAke2ZpbGUuYmFzZW5hbWV9OiBUQVNLIDMgLSBDb3VsZCBub3QgZmluZCB0aXRsZSB0byBpbnNlcnQgbGluayBhZnRlcmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaChgQ29udmVyc2F0aW9uIG5vdGUgbm90IGZvdW5kIChJRDogJHtmbS5jb252ZXJzYXRpb25faWR9KWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgJHtmaWxlLmJhc2VuYW1lfTogVEFTSyAzIC0gQ29udmVyc2F0aW9uIG5vdGUgbm90IGZvdW5kIGZvciBJRCAke2ZtLmNvbnZlcnNhdGlvbl9pZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChib2R5LmluY2x1ZGVzKCcqKkNvbnZlcnNhdGlvbjoqKicpKSB7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBBTFdBWVMgdXBkYXRlIHBsdWdpbl92ZXJzaW9uIHRvIDEuMy4wIChldmVuIGlmIG5vdGhpbmcgZWxzZSBjaGFuZ2VkKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZWVkc1ZlcnNpb25VcGRhdGUgPSAhZnJvbnRtYXR0ZXIuaW5jbHVkZXMoJ3BsdWdpbl92ZXJzaW9uOiBcIjEuMy4wXCInKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobW9kaWZpZWQgfHwgbmVlZHNWZXJzaW9uVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcGx1Z2luX3ZlcnNpb24gdG8gMS4zLjAgKHdpdGggcXVvdGVzIGZvciBzZW1hbnRpYyB2ZXJzaW9uaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWF0Y2ggYm90aCB3aXRoIGFuZCB3aXRob3V0IHF1b3RlczogMS4yLjAgb3IgXCIxLjIuMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbnRtYXR0ZXIuaW5jbHVkZXMoJ3BsdWdpbl92ZXJzaW9uOicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlci5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvXnBsdWdpbl92ZXJzaW9uOiAuKiQvbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYHBsdWdpbl92ZXJzaW9uOiBcIjEuMy4wXCJgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHBsdWdpbl92ZXJzaW9uIGlmIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlciArPSBgXFxucGx1Z2luX3ZlcnNpb246IFwiMS4zLjBcImA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBgLS0tXFxuJHtmcm9udG1hdHRlcn1cXG4tLS1cXG4ke2JvZHl9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvbnRleHQucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQ291bnQrKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGlmaWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2FybmluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChgXHUyNkEwXHVGRTBGICAke2ZpbGUuYmFzZW5hbWV9OiAke3dhcm5pbmdzLmpvaW4oJywgJyl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvckNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7ZmlsZS5iYXNlbmFtZX06IFx1Mjc0QyBFUlJPUjpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChgXHUyNzRDICR7ZmlsZS5iYXNlbmFtZX06ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChgYCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYCoqU3VtbWFyeToqKmApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGBgKTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChgLSBUb3RhbCBmaWxlcyBmb3VuZDogJHt0b3RhbEZpbGVzfWApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAtIENsYXVkZSBhcnRpZmFjdHM6ICR7cHJvY2Vzc2VkQ291bnR9YCk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYC0gU2tpcHBlZCAobm9uLUNsYXVkZSk6ICR7c2tpcHBlZENvdW50fWApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAtIFVwZGF0ZWQ6ICR7dXBkYXRlZENvdW50fWApO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAtIFdhcm5pbmdzOiAke3dhcm5pbmdDb3VudH1gKTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChgLSBFcnJvcnM6ICR7ZXJyb3JDb3VudH1gKTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChgYCk7XG5cbiAgICAgICAgICAgIGlmIChza2lwcGVkQ291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGAqTm90ZTogJHtza2lwcGVkQ291bnR9IGZpbGUocykgd2VyZSBza2lwcGVkIGJlY2F1c2UgdGhleSBhcmUgbm90IENsYXVkZSBhcnRpZmFjdHMuKmApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGVycm9yQ291bnQgPT09IDAsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYE1pZ3JhdGVkICR7dXBkYXRlZENvdW50fSBhcnRpZmFjdChzKSB3aXRoICR7d2FybmluZ0NvdW50fSB3YXJuaW5nKHMpIGFuZCAke2Vycm9yQ291bnR9IGVycm9yKHMpYCxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiByZXN1bHRzXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYE1pZ3JhdGlvbiBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHJlc3VsdHNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0IGFydGlmYWN0IGNyZWF0ZV90aW1lIGZyb20gY29udmVyc2F0aW9uIG5vdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGV4dHJhY3RBcnRpZmFjdENyZWF0ZVRpbWUoXG4gICAgICAgIGFydGlmYWN0Rm06IGFueSxcbiAgICAgICAgY29udmVyc2F0aW9uRm9sZGVyOiBzdHJpbmcsXG4gICAgICAgIHBsdWdpbjogTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbixcbiAgICAgICAgYXJ0aWZhY3RGaWxlOiBhbnlcbiAgICApOiBQcm9taXNlPHt2YWx1ZTogc3RyaW5nLCBzb3VyY2U6ICdtZXNzYWdlJyB8ICdjb252ZXJzYXRpb24nIHwgJ25vbmUnfT4ge1xuICAgICAgICBjb25zdCBhcnRpZmFjdElkID0gYXJ0aWZhY3RGbS5hcnRpZmFjdF9pZDtcbiAgICAgICAgY29uc3QgdmVyc2lvbk51bWJlciA9IGFydGlmYWN0Rm0udmVyc2lvbl9udW1iZXI7XG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbklkID0gYXJ0aWZhY3RGbS5jb252ZXJzYXRpb25faWQ7XG4gICAgICAgIGNvbnN0IGFydGlmYWN0UmVmID0gYCR7YXJ0aWZhY3RJZH1fdiR7dmVyc2lvbk51bWJlcn1gO1xuXG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIGlmICghY29udmVyc2F0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEFydGlmYWN0ICR7YXJ0aWZhY3RSZWZ9OiBObyBjb252ZXJzYXRpb25faWQgaW4gZnJvbnRtYXR0ZXJgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge3ZhbHVlOiAnJywgc291cmNlOiAnbm9uZSd9O1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8vIEZpbmQgY29udmVyc2F0aW9uIG5vdGVcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZpbGUgPSBhd2FpdCB0aGlzLmZpbmRDb252ZXJzYXRpb25GaWxlKGNvbnZlcnNhdGlvbklkLCBjb252ZXJzYXRpb25Gb2xkZXIsIHBsdWdpbik7XG4gICAgICAgICAgICBpZiAoIWNvbnZlcnNhdGlvbkZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEFydGlmYWN0ICR7YXJ0aWZhY3RSZWZ9OiBDb252ZXJzYXRpb24gZmlsZSBub3QgZm91bmQgZm9yIElEICR7Y29udmVyc2F0aW9uSWR9YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZTogJycsIHNvdXJjZTogJ25vbmUnfTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyBSZWFkIGNvbnZlcnNhdGlvbiBjb250ZW50XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcGx1Z2luLmFwcC52YXVsdC5yZWFkKGNvbnZlcnNhdGlvbkZpbGUpO1xuXG4gICAgICAgICAgICBpZiAoIWFydGlmYWN0SWQgfHwgIXZlcnNpb25OdW1iZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEFydGlmYWN0ICR7YXJ0aWZhY3RSZWZ9OiBNaXNzaW5nIGFydGlmYWN0X2lkIG9yIHZlcnNpb25fbnVtYmVyLCB1c2luZyBjb252ZXJzYXRpb24gZmFsbGJhY2tgKTtcbiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayB0byBjb252ZXJzYXRpb24gY3JlYXRlX3RpbWVcbiAgICAgICAgICAgICAgICBjb25zdCBmbSA9IHBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoY29udmVyc2F0aW9uRmlsZSk/LmZyb250bWF0dGVyIGFzIGFueTtcbiAgICAgICAgICAgICAgICBpZiAoZm0/LmNyZWF0ZV90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7dmFsdWU6IGZtLmNyZWF0ZV90aW1lLCBzb3VyY2U6ICdjb252ZXJzYXRpb24nfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZTogJycsIHNvdXJjZTogJ25vbmUnfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRXh0cmFjdCBhcnRpZmFjdCBmaWxlIHBhdGggKHdpdGhvdXQgLm1kIGV4dGVuc2lvbikgZm9yIGV4YWN0IGxpbmsgbWF0Y2hpbmdcbiAgICAgICAgICAgIGNvbnN0IGFydGlmYWN0TGlua1BhdGggPSBhcnRpZmFjdEZpbGUucGF0aC5yZXBsYWNlKC9cXC5tZCQvLCAnJyk7XG5cbiAgICAgICAgICAgIC8vIEVzY2FwZSBzcGVjaWFsIHJlZ2V4IGNoYXJhY3RlcnMgaW4gdGhlIHBhdGhcbiAgICAgICAgICAgIGNvbnN0IGVzY2FwZWRQYXRoID0gYXJ0aWZhY3RMaW5rUGF0aC5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpO1xuXG4gICAgICAgICAgICAvLyBTZWFyY2ggZm9yIHRoZSBleGFjdCBhcnRpZmFjdCBsaW5rXG4gICAgICAgICAgICBjb25zdCBsaW5rUGF0dGVybiA9IG5ldyBSZWdFeHAoYFxcXFxbXFxcXFske2VzY2FwZWRQYXRofVxcXFx8VmlldyBBcnRpZmFjdFxcXFxdXFxcXF1gLCAnbScpO1xuICAgICAgICAgICAgY29uc3QgbGlua01hdGNoID0gY29udGVudC5tYXRjaChsaW5rUGF0dGVybik7XG5cbiAgICAgICAgICAgIGlmICghbGlua01hdGNoIHx8IGxpbmtNYXRjaC5pbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBBcnRpZmFjdCAke2FydGlmYWN0UmVmfTogQXJ0aWZhY3QgbGluayBub3QgZm91bmQgaW4gY29udmVyc2F0aW9uLCB1c2luZyBjb252ZXJzYXRpb24gZmFsbGJhY2tgKTtcbiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayB0byBjb252ZXJzYXRpb24gY3JlYXRlX3RpbWVcbiAgICAgICAgICAgICAgICBjb25zdCBmbSA9IHBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoY29udmVyc2F0aW9uRmlsZSk/LmZyb250bWF0dGVyIGFzIGFueTtcbiAgICAgICAgICAgICAgICBpZiAoZm0/LmNyZWF0ZV90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7dmFsdWU6IGZtLmNyZWF0ZV90aW1lLCBzb3VyY2U6ICdjb252ZXJzYXRpb24nfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZTogJycsIHNvdXJjZTogJ25vbmUnfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbGlua0luZGV4ID0gbGlua01hdGNoLmluZGV4O1xuXG4gICAgICAgICAgICAvLyBHZXQgYWxsIHRleHQgQkVGT1JFIHRoZSBhcnRpZmFjdCBsaW5rXG4gICAgICAgICAgICBjb25zdCB0ZXh0QmVmb3JlTGluayA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIGxpbmtJbmRleCk7XG5cbiAgICAgICAgICAgIC8vIERFQlVHOiBTaG93IGNvbnRleHQgYXJvdW5kIHRoZSBhcnRpZmFjdCBsaW5rIChsYXN0IDMwMCBjaGFycyBiZWZvcmUgbGluaylcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHRTdGFydCA9IE1hdGgubWF4KDAsIGxpbmtJbmRleCAtIDMwMCk7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0VGV4dCA9IGNvbnRlbnQuc3Vic3RyaW5nKGNvbnRleHRTdGFydCwgbGlua0luZGV4KTtcblxuICAgICAgICAgICAgLy8gRmluZCB0aGUgTEFTVCBhZ2VudCBjYWxsb3V0IGJlZm9yZSB0aGUgbGluayAodGhlIHBhcmVudCBtZXNzYWdlKVxuICAgICAgICAgICAgLy8gUGF0dGVybiBtYXRjaGVzOiA+WyFuZXh1c19hZ2VudF0gKipBc3Npc3RhbnQqKiAtIDx0aW1lc3RhbXA+XG4gICAgICAgICAgICAvLyBOb3RlOiBEb24ndCB1c2UgJCAoZW5kIG9mIGxpbmUpIGJlY2F1c2UgY2FsbG91dHMgY2FuIGJlIG11bHRpLWxpbmVcbiAgICAgICAgICAgIC8vIEluc3RlYWQsIGNhcHR1cmUgZXZlcnl0aGluZyB1cCB0byB0aGUgbmV3bGluZVxuICAgICAgICAgICAgY29uc3QgYWdlbnRQYXR0ZXJuID0gLz5cXFshbmV4dXNfYWdlbnRcXF0gXFwqXFwqQXNzaXN0YW50XFwqXFwqIC0gKFteXFxuXSspL2dtO1xuICAgICAgICAgICAgbGV0IGxhc3RNYXRjaCA9IG51bGw7XG4gICAgICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgICAgICBsZXQgbWF0Y2hDb3VudCA9IDA7XG5cblxuICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IGFnZW50UGF0dGVybi5leGVjKHRleHRCZWZvcmVMaW5rKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtYXRjaENvdW50Kys7XG4gICAgICAgICAgICAgICAgbGFzdE1hdGNoID0gbWF0Y2g7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgaWYgKGxhc3RNYXRjaCAmJiBsYXN0TWF0Y2hbMV0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXBTdHIgPSBsYXN0TWF0Y2hbMV07XG5cbiAgICAgICAgICAgICAgICAvLyBQYXJzZSB0aW1lc3RhbXAgd2l0aCBEYXRlUGFyc2VyICh3aXRoIGNvbnRleHQgZm9yIGJldHRlciBsb2dnaW5nKVxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGVQYXJzZXIucGFyc2VEYXRlKHRpbWVzdGFtcFN0ciwgYXJ0aWZhY3RSZWYpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNvRGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCAqIDEwMDApLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXNvRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJ21lc3NhZ2UnXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBBcnRpZmFjdCAke2FydGlmYWN0UmVmfTogXHUyNzRDIFRpbWVzdGFtcCBwYXJzaW5nIEZBSUxFRCAocmV0dXJuZWQgMCksIHVzaW5nIGNvbnZlcnNhdGlvbiBmYWxsYmFja2ApO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEFydGlmYWN0ICR7YXJ0aWZhY3RSZWZ9OiBGYWlsZWQgdGltZXN0YW1wIHN0cmluZyB3YXM6IFwiJHt0aW1lc3RhbXBTdHJ9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgQXJ0aWZhY3QgJHthcnRpZmFjdFJlZn06IFx1Mjc0QyBObyBhZ2VudCBjYWxsb3V0IGZvdW5kIGJlZm9yZSBhcnRpZmFjdCBsaW5rLCB1c2luZyBjb252ZXJzYXRpb24gZmFsbGJhY2tgKTtcblxuICAgICAgICAgICAgICAgIC8vIERFQlVHOiBTaG93IGEgc2FtcGxlIG9mIHdoYXQgd2Ugd2VyZSBzZWFyY2hpbmcgaW5cbiAgICAgICAgICAgICAgICBjb25zdCBzYW1wbGVUZXh0ID0gdGV4dEJlZm9yZUxpbmsuc3Vic3RyaW5nKE1hdGgubWF4KDAsIHRleHRCZWZvcmVMaW5rLmxlbmd0aCAtIDUwMCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgQXJ0aWZhY3QgJHthcnRpZmFjdFJlZn06IExhc3QgNTAwIGNoYXJzIG9mIHNlYXJjaCB0ZXh0OlxcbiR7c2FtcGxlVGV4dH1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gY29udmVyc2F0aW9uIGNyZWF0ZV90aW1lXG4gICAgICAgICAgICBjb25zdCBmbSA9IHBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoY29udmVyc2F0aW9uRmlsZSk/LmZyb250bWF0dGVyIGFzIGFueTtcbiAgICAgICAgICAgIGlmIChmbT8uY3JlYXRlX3RpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge3ZhbHVlOiBmbS5jcmVhdGVfdGltZSwgc291cmNlOiAnY29udmVyc2F0aW9uJ307XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgQXJ0aWZhY3QgJHthcnRpZmFjdFJlZn06IE5vIGNyZWF0ZV90aW1lIGF2YWlsYWJsZWApO1xuICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZTogJycsIHNvdXJjZTogJ25vbmUnfTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQXJ0aWZhY3QgJHthcnRpZmFjdFJlZn06IEV4Y2VwdGlvbiBkdXJpbmcgY3JlYXRlX3RpbWUgZXh0cmFjdGlvbjpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge3ZhbHVlOiAnJywgc291cmNlOiAnbm9uZSd9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZCBjb252ZXJzYXRpb24gZmlsZSBieSBJRFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZmluZENvbnZlcnNhdGlvbkZpbGUoXG4gICAgICAgIGNvbnZlcnNhdGlvbklkOiBzdHJpbmcsXG4gICAgICAgIGNvbnZlcnNhdGlvbkZvbGRlcjogc3RyaW5nLFxuICAgICAgICBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW5cbiAgICApOiBQcm9taXNlPGFueT4ge1xuICAgICAgICBjb25zdCBhbGxGaWxlcyA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCBjbGF1ZGVQYXRoID0gYCR7Y29udmVyc2F0aW9uRm9sZGVyfS9jbGF1ZGVgO1xuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBhbGxGaWxlcykge1xuICAgICAgICAgICAgaWYgKCFmaWxlLnBhdGguc3RhcnRzV2l0aChjbGF1ZGVQYXRoKSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGZtID0gcGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXIgYXMgYW55O1xuICAgICAgICAgICAgaWYgKGZtPy5jb252ZXJzYXRpb25faWQgPT09IGNvbnZlcnNhdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kIGFuZCBnZW5lcmF0ZSBjb252ZXJzYXRpb24gbGlua1xuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZmluZENvbnZlcnNhdGlvbkxpbmsoXG4gICAgICAgIGNvbnZlcnNhdGlvbklkOiBzdHJpbmcsXG4gICAgICAgIGNvbnZlcnNhdGlvbkZvbGRlcjogc3RyaW5nLFxuICAgICAgICBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW5cbiAgICApOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRmlsZSA9IGF3YWl0IHRoaXMuZmluZENvbnZlcnNhdGlvbkZpbGUoY29udmVyc2F0aW9uSWQsIGNvbnZlcnNhdGlvbkZvbGRlciwgcGx1Z2luKTtcbiAgICAgICAgaWYgKCFjb252ZXJzYXRpb25GaWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZtID0gcGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShjb252ZXJzYXRpb25GaWxlKT8uZnJvbnRtYXR0ZXIgYXMgYW55O1xuICAgICAgICBjb25zdCB0aXRsZSA9IGZtPy5hbGlhc2VzIHx8IGNvbnZlcnNhdGlvbkZpbGUuYmFzZW5hbWU7XG5cbiAgICAgICAgLy8gUmVtb3ZlIC5tZCBleHRlbnNpb24gZnJvbSBwYXRoIGZvciBPYnNpZGlhbiBsaW5rc1xuICAgICAgICBjb25zdCBsaW5rUGF0aCA9IGNvbnZlcnNhdGlvbkZpbGUucGF0aC5yZXBsYWNlKC9cXC5tZCQvLCAnJyk7XG4gICAgICAgIHJldHVybiBgW1ske2xpbmtQYXRofXwke3RpdGxlfV1dYDtcbiAgICB9XG5cbiAgICBhc3luYyB2ZXJpZnkoY29udGV4dDogVXBncmFkZUNvbnRleHQpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGF0dGFjaG1lbnRGb2xkZXIgPSBjb250ZXh0LnBsdWdpbi5zZXR0aW5ncy5hdHRhY2htZW50Rm9sZGVyIHx8IFwiTmV4dXMgQUkgQ2hhdCBJbXBvcnRzL0F0dGFjaG1lbnRzXCI7XG4gICAgICAgICAgICBjb25zdCBjbGF1ZGVBcnRpZmFjdHNQYXRoID0gYCR7YXR0YWNobWVudEZvbGRlcn0vY2xhdWRlL2FydGlmYWN0c2A7XG5cbiAgICAgICAgICAgIGNvbnN0IGFsbEZpbGVzID0gY29udGV4dC5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgICAgIGNvbnN0IGFydGlmYWN0RmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChjbGF1ZGVBcnRpZmFjdHNQYXRoKSk7XG5cbiAgICAgICAgICAgIC8vIFZlcmlmeSBhbGwgYXJ0aWZhY3RzIGhhdmUgY3JlYXRlX3RpbWVcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBhcnRpZmFjdEZpbGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm0gPSBjb250ZXh0LnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyIGFzIGFueTtcbiAgICAgICAgICAgICAgICBpZiAoZm0/LnByb3ZpZGVyID09PSAnY2xhdWRlJyAmJiAhZm0uY3JlYXRlX3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBNaWdyYXRlQ2xhdWRlQXJ0aWZhY3RzLnZlcmlmeSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIENvbmZpZ3VyZSBmb2xkZXIgbG9jYXRpb25zIGFuZCBvcHRpb25hbGx5IG1pZ3JhdGUgZmlsZXNcbiAqIFRoaXMgaXMgYSBCTE9DS0lORyBvcGVyYXRpb24gdGhhdCBzaG93cyBhIGRpYWxvZyBhbmQgd2FpdHMgZm9yIHVzZXIgaW5wdXRcbiAqL1xuY2xhc3MgQ29uZmlndXJlRm9sZGVyTG9jYXRpb25zT3BlcmF0aW9uIGV4dGVuZHMgVXBncmFkZU9wZXJhdGlvbiB7XG4gICAgcmVhZG9ubHkgaWQgPSBcImNvbmZpZ3VyZS1mb2xkZXItbG9jYXRpb25zXCI7XG4gICAgcmVhZG9ubHkgbmFtZSA9IFwiQ29uZmlndXJlIEZvbGRlciBMb2NhdGlvbnNcIjtcbiAgICByZWFkb25seSBkZXNjcmlwdGlvbiA9IFwiQ29uZmlndXJlIHNlcGFyYXRlIGZvbGRlciBsb2NhdGlvbnMgZm9yIGNvbnZlcnNhdGlvbnMsIHJlcG9ydHMsIGFuZCBhdHRhY2htZW50cy4gT3B0aW9uYWxseSBtaWdyYXRlIGV4aXN0aW5nIGZpbGVzIHRvIG5ldyBsb2NhdGlvbnMuXCI7XG4gICAgcmVhZG9ubHkgdHlwZSA9IFwiYXV0b21hdGljXCIgYXMgY29uc3Q7XG5cbiAgICBhc3luYyBjYW5SdW4oX2NvbnRleHQ6IFVwZ3JhZGVDb250ZXh0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIC8vIEFsd2F5cyBydW4gLSB0aGlzIGlzIHRoZSBmaW5hbCBzdGVwIHRvIGxldCB1c2VyIGNvbmZpZ3VyZSBmb2xkZXJzXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUoY29udGV4dDogVXBncmFkZUNvbnRleHQpOiBQcm9taXNlPE9wZXJhdGlvblJlc3VsdD4ge1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxPcGVyYXRpb25SZXN1bHQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkaWFsb2cgPSBuZXcgQ29uZmlndXJlRm9sZGVyTG9jYXRpb25zRGlhbG9nKFxuICAgICAgICAgICAgICAgIGNvbnRleHQucGx1Z2luLFxuICAgICAgICAgICAgICAgIGFzeW5jIChyZXN1bHQ6IEZvbGRlckNvbmZpZ3VyYXRpb25SZXN1bHQpID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBCdWlsZCByZXN1bHQgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVwb3J0Rm9sZGVyLmNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHMucHVzaChgXHUyNzA1IFJlcG9ydCBmb2xkZXI6ICR7cmVzdWx0LnJlcG9ydEZvbGRlci5vbGRQYXRofSBcdTIxOTIgJHtyZXN1bHQucmVwb3J0Rm9sZGVyLm5ld1BhdGh9YCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLnB1c2goYFx1MjEzOVx1RkUwRiAgUmVwb3J0IGZvbGRlcjogJHtyZXN1bHQucmVwb3J0Rm9sZGVyLm5ld1BhdGh9ICh1bmNoYW5nZWQpYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiUmVwb3J0IGZvbGRlciBsb2NhdGlvbiBjb25maWd1cmVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsc1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZGlhbG9nLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFZlcnNpb24gMS4zLjAgVXBncmFkZSBEZWZpbml0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBVcGdyYWRlMTMwIGV4dGVuZHMgVmVyc2lvblVwZ3JhZGUge1xuICAgIHJlYWRvbmx5IHZlcnNpb24gPSBcIjEuMy4wXCI7XG5cbiAgICByZWFkb25seSBhdXRvbWF0aWNPcGVyYXRpb25zID0gW1xuICAgICAgICBuZXcgTWlncmF0ZVRvU2VwYXJhdGVGb2xkZXJzT3BlcmF0aW9uKCksXG4gICAgICAgIG5ldyBDb252ZXJ0VG9JU084NjAxVGltZXN0YW1wc09wZXJhdGlvbigpLFxuICAgICAgICBuZXcgRml4RnJvbnRtYXR0ZXJBbGlhc2VzT3BlcmF0aW9uKCksXG4gICAgICAgIG5ldyBNaWdyYXRlQ2xhdWRlQXJ0aWZhY3RzT3BlcmF0aW9uKCksXG4gICAgICAgIG5ldyBDb25maWd1cmVGb2xkZXJMb2NhdGlvbnNPcGVyYXRpb24oKVxuICAgIF07XG5cbiAgICByZWFkb25seSBtYW51YWxPcGVyYXRpb25zID0gW1xuICAgICAgICAvLyBObyBtYW51YWwgb3BlcmF0aW9ucyBmb3IgdGhpcyB2ZXJzaW9uXG4gICAgXTtcbn1cbiIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgTWFya2Rvd25SZW5kZXJlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHsgY3JlYXRlS29maVN1cHBvcnRCb3ggfSBmcm9tIFwiLi4vdWkvY29tcG9uZW50cy9rb2ZpLXN1cHBvcnQtYm94XCI7XG5cbi8qKlxuICogVXBncmFkZSBjb21wbGV0ZSBtb2RhbCAtIHNob3duIEFGVEVSIG1pZ3JhdGlvbnMgYXJlIGRvbmVcbiAqIERpc3BsYXlzIEtvLWZpICsgV2hhdCdzIE5ldyArIEltcHJvdmVtZW50cyArIEJ1ZyBGaXhlc1xuICovXG5leHBvcnQgY2xhc3MgVXBncmFkZUNvbXBsZXRlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW47XG4gICAgcHJpdmF0ZSB2ZXJzaW9uOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luLCB2ZXJzaW9uOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XG4gICAgfVxuXG4gICAgb25PcGVuKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsLCB0aXRsZUVsLCBtb2RhbEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIC8vIEFkZCBjdXN0b20gQ1NTIGNsYXNzXG4gICAgICAgIG1vZGFsRWwuY2xhc3NMaXN0LmFkZCgnbmV4dXMtdXBncmFkZS1jb21wbGV0ZS1tb2RhbCcpO1xuXG4gICAgICAgIC8vIFNldCBtb2RhbCB3aWR0aCBJTU1FRElBVEVMWSAoYmVmb3JlIGNvbnRlbnQgbG9hZHMpXG4gICAgICAgIG1vZGFsRWwuc3R5bGUud2lkdGggPSAnODAwcHgnO1xuICAgICAgICBtb2RhbEVsLnN0eWxlLm1heFdpZHRoID0gJzkwdncnO1xuXG4gICAgICAgIC8vIFNldCB0aXRsZVxuICAgICAgICB0aXRsZUVsLnNldFRleHQoYFx1MjcwNSBVcGdyYWRlIENvbXBsZXRlIC0gdiR7dGhpcy52ZXJzaW9ufWApO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlQ29udGVudCgpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlQ29udGVudCgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgLy8gS28tZmkgc2VjdGlvbiAodG9wKVxuICAgICAgICB0aGlzLmFkZEtvZmlTZWN0aW9uKCk7XG5cbiAgICAgICAgLy8gUmVsZWFzZSBub3RlcyBjb250ZW50XG4gICAgICAgIGF3YWl0IHRoaXMuYWRkUmVsZWFzZU5vdGVzKCk7XG5cbiAgICAgICAgLy8gQ2xvc2UgYnV0dG9uIChjZW50ZXJlZCBhbmQgcHJvbWluZW50KVxuICAgICAgICB0aGlzLmFkZENsb3NlQnV0dG9uKCk7XG5cbiAgICAgICAgLy8gQWRkIGN1c3RvbSBzdHlsZXNcbiAgICAgICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZEtvZmlTZWN0aW9uKCkge1xuLy8gS28tZmkgc3VwcG9ydCBzZWN0aW9uICh1c2luZyByZXVzYWJsZSBjb21wb25lbnQpXG4gICAgICAgIGNyZWF0ZUtvZmlTdXBwb3J0Qm94KHRoaXMuY29udGVudEVsKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGFkZFJlbGVhc2VOb3RlcygpIHtcbiAgICAgICAgLy8gRmFsbGJhY2sgY29udGVudCBmb3IgdjEuMy4wXG4gICAgICAgIGxldCBjb250ZW50ID0gYCMjIFx1MjcyOCBXaGF0J3MgTmV3XG5cbi0gKipcdUQ4M0RcdUREQzJcdUZFMEYgU2VwYXJhdGUgUmVwb3J0cyBGb2xkZXIqKiAtIEJldHRlciBvcmdhbml6YXRpb24sIGVhc2llciB0byBleGNsdWRlIGZyb20gc3luY1xuLSAqKlx1RDgzQ1x1REYwRCBJbnRlcm5hdGlvbmFsIERhdGUgU3VwcG9ydCoqIC0gV29ya3MgaW4gYWxsIGxhbmd1YWdlcywgbm8gbW9yZSBNTS9ERCBjb25mdXNpb25cbi0gKipcdUQ4M0NcdURGMzMgVmlzdWFsIEZvbGRlciBCcm93c2VyKiogLSBUcmVlLWJhc2VkIG5hdmlnYXRpb24sIGNyZWF0ZSBmb2xkZXJzIG9uIHRoZSBmbHlcbi0gKipcdUQ4M0NcdURGQUYgRW5oYW5jZWQgU2VsZWN0aXZlIEltcG9ydCoqIC0gQmV0dGVyIHByZXZpZXcsIGR1cGxpY2F0ZSBkZXRlY3Rpb24gYWNyb3NzIFpJUHNcbi0gKipcdUQ4M0RcdURDQ0UgSW1wcm92ZWQgQXR0YWNobWVudHMqKiAtIERBTEwtRSBpbWFnZXMgd2l0aCBwcm9tcHRzLCBiZXR0ZXIgZm9ybWF0dGluZ1xuXG4jIyBcdUQ4M0NcdURGQTggSW1wcm92ZW1lbnRzXG5cbi0gUmVkZXNpZ25lZCBTZXR0aW5ncyBwYWdlIC0gZWFzaWVyIHRvIGZpbmQgd2hhdCB5b3UgbmVlZFxuLSBGYXN0ZXIgaW1wb3J0cyAtIGVzcGVjaWFsbHkgZm9yIGxhcmdlIGNvbGxlY3Rpb25zXG4tIEJldHRlciBwcm9ncmVzcyBtZXNzYWdlcyAtIGtub3cgZXhhY3RseSB3aGF0J3MgaGFwcGVuaW5nXG4tIE1vcmUgZGV0YWlsZWQgcmVwb3J0cyAtIHNlZSBleGFjdGx5IHdoYXQgd2FzIGltcG9ydGVkXG4tIENsZWFyZXIgZGlhbG9ncyAtIGxlc3MgY29uZnVzaW5nIHRleHRcblxuIyMgXHVEODNEXHVEQzFCIEJ1ZyBGaXhlc1xuXG4tIEZpeGVkIHRpbWVzdGFtcCBwYXJzaW5nIGZvciBub24tVVMgbG9jYWxlc1xuLSBGaXhlZCBmb2xkZXIgZGVsZXRpb24gYWZ0ZXIgbWlncmF0aW9uXG4tIEZpeGVkIGxpbmsgdXBkYXRlcyBpbiBDbGF1ZGUgYXJ0aWZhY3RzXG4tIEZpeGVkIGR1cGxpY2F0ZSBjb252ZXJzYXRpb25zIGluIG11bHRpLVpJUCBpbXBvcnRzXG4tIEZpeGVkIHNwZWNpYWwgY2hhcmFjdGVycyBpbiBjb252ZXJzYXRpb24gdGl0bGVzXG4tIEZpeGVkIERBTEwtRSBpbWFnZXMgZGlzcGxheVxuLSBGaXhlZCBwcm9ncmVzcyBtb2RhbCBhY2N1cmFjeVxuLSBGaXhlZCBVSSBlbGVtZW50cyBvdmVyZmxvd1xuLSBBbmQgbWFueSBtb3JlLi4uYDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVHJ5IHRvIGZldGNoIGZyb20gR2l0SHViIHJlbGVhc2VcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvU3VwZXJraWtpbS9uZXh1cy1haS1jaGF0LWltcG9ydGVyL3JlbGVhc2VzL3RhZ3MvdiR7dGhpcy52ZXJzaW9ufWApO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICBpZiAocmVsZWFzZS5ib2R5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSByZWxlYXNlLmJvZHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gVXNlIGZhbGxiYWNrIGNvbnRlbnRcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbmRlciBtYXJrZG93blxuICAgICAgICBjb25zdCBjb250ZW50RGl2ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLXVwZ3JhZGUtbm90ZXNcIiB9KTtcbiAgICAgICAgYXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50RGl2LFxuICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIHRoaXMucGx1Z2luXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRDbG9zZUJ1dHRvbigpIHtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLXVwZ3JhZGUtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICBjb25zdCBidXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdGV4dDogXCJHb3QgaXQhXCIsXG4gICAgICAgICAgICBjbHM6IFwibW9kLWN0YSBuZXh1cy11cGdyYWRlLWJ1dHRvblwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gYFxuICAgICAgICAgICAgLyogTW9kYWwgc2l6aW5nIC0gTEFSR0UgYnkgZGVmYXVsdCAqL1xuICAgICAgICAgICAgLm5leHVzLXVwZ3JhZGUtY29tcGxldGUtbW9kYWwgLm1vZGFsIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogODAwcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDkwdncgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiA4NXZoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtdXBncmFkZS1jb21wbGV0ZS1tb2RhbCAubW9kYWwtY29udGVudCB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IGNhbGMoODV2aCAtIDEwMHB4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogS28tZmkgc2VjdGlvbiAqL1xuICAgICAgICAgICAgLm5leHVzLWtvZmktc2VjdGlvbiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTtcbiAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyZW07XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMta29maS1oZWFkZXIge1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLWtvZmktdGl0bGUge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS41ZW07XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1rb2ZpLW1lc3NhZ2Uge1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEuNWVtO1xuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1rb2ZpLW1lc3NhZ2UgcCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwLjVlbSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMta29maS1idXR0b24tY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDEuNWVtIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1rb2ZpLWxpbmsge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLWtvZmktbGluazpob3ZlciB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLWtvZmktYW1vdW50cyB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMWVtO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMta29maS1hbW91bnRzLXRpdGxlIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1rb2ZpLWFtb3VudHMtbGlzdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBnYXA6IDEuNWVtO1xuICAgICAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLWtvZmktYW1vdW50IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41ZW0gMWVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogUmVsZWFzZSBub3RlcyBjb250ZW50ICovXG4gICAgICAgICAgICAubmV4dXMtdXBncmFkZS1ub3RlcyB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMCAxZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtdXBncmFkZS1ub3RlcyBoMiB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxLjVlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjhlbTtcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAwLjNlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLXVwZ3JhZGUtbm90ZXMgaDI6Zmlyc3QtY2hpbGQge1xuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy11cGdyYWRlLW5vdGVzIHVsIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMS41ZW07XG4gICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuODtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLXVwZ3JhZGUtbm90ZXMgbGkge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMC41ZW0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogQ2xvc2UgYnV0dG9uICovXG4gICAgICAgICAgICAubmV4dXMtdXBncmFkZS1idXR0b24tY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMS41ZW0gMDtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDFlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLXVwZ3JhZGUtYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjhlbSAzZW07XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjFlbTtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgfVxufVxuXG4iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgTWFya2Rvd25SZW5kZXJlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHsgY3JlYXRlS29maVN1cHBvcnRCb3ggfSBmcm9tIFwiLi4vdWkvY29tcG9uZW50cy9rb2ZpLXN1cHBvcnQtYm94XCI7XG5cbi8qKlxuICogQmVhdXRpZnVsIHVwZ3JhZGUgbW9kYWwgZm9yIHYxLjMuMCB3aXRoIHByb21pbmVudCBLby1maSBzdXBwb3J0XG4gKi9cbmV4cG9ydCBjbGFzcyBOZXh1c1VwZ3JhZGVNb2RhbDEzMCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIHBsdWdpbjogTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbjtcbiAgICBwcml2YXRlIHZlcnNpb246IHN0cmluZztcbiAgICBwcml2YXRlIHJlc29sdmU6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgIHByaXZhdGUgaGFzUmVzb2x2ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4sIHZlcnNpb246IHN0cmluZywgcmVzb2x2ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgfVxuXG4gICAgb25PcGVuKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsLCB0aXRsZUVsLCBtb2RhbEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIC8vIEFkZCBjdXN0b20gQ1NTIGNsYXNzIHRvIG1vZGFsIGVsZW1lbnRcbiAgICAgICAgbW9kYWxFbC5jbGFzc0xpc3QuYWRkKCduZXh1cy11cGdyYWRlLW1vZGFsLTEzMCcpO1xuXG4gICAgICAgIC8vIFNldCB0aXRsZVxuICAgICAgICB0aXRsZUVsLnNldFRleHQoYFx1RDgzQ1x1REY4OSBOZXh1cyBBSSBDaGF0IEltcG9ydGVyICR7dGhpcy52ZXJzaW9ufWApO1xuICAgICAgICB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLm1vZGFsLWNsb3NlLWJ1dHRvbicpPy5yZW1vdmUoKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZUZvcm0oKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCk6IHZvaWQge1xuICAgICAgICAvLyBJZiB1c2VyIGNsb3NlZCBkaWFsb2cgd2l0aG91dCBjbGlja2luZyBidXR0b24sIHJlc29sdmUgd2l0aCBcImNhbmNlbFwiXG4gICAgICAgIGlmICghdGhpcy5oYXNSZXNvbHZlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlKFwiY2FuY2VsXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVGb3JtKCkge1xuICAgICAgICAvLyBBZGQgS28tZmkgc3VwcG9ydCBzZWN0aW9uIEZJUlNUIChhdCB0aGUgdG9wKSAtIHVzaW5nIHJldXNhYmxlIGNvbXBvbmVudFxuICAgICAgICBjcmVhdGVLb2ZpU3VwcG9ydEJveCh0aGlzLmNvbnRlbnRFbCk7XG5cbiAgICAgICAgLy8gQWRkIG1pZ3JhdGlvbiBpbmZvIHNlY3Rpb25cbiAgICAgICAgdGhpcy5hZGRNaWdyYXRpb25TZWN0aW9uKCk7XG5cbiAgICAgICAgLy8gQWRkIG1pZ3JhdGlvbiBidXR0b24gKGNlbnRlcmVkIGFuZCBwcm9taW5lbnQpXG4gICAgICAgIHRoaXMuYWRkTWlncmF0aW9uQnV0dG9uKCk7XG5cbiAgICAgICAgLy8gRmFsbGJhY2sgbWVzc2FnZSBpZiBHaXRIdWIgZmV0Y2ggZmFpbHNcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBgIyMgXHUyNzI4IFdoYXQncyBOZXcgaW4gdjEuMy4wXG5cbi0gKipcdUQ4M0NcdURGQUYgU2VsZWN0aXZlIENvbnZlcnNhdGlvbiBJbXBvcnQqKjogSW50ZXJhY3RpdmUgZGlhbG9nIHRvIGNob29zZSB3aGljaCBjb252ZXJzYXRpb25zIHRvIGltcG9ydFxuLSAqKlx1RDgzRFx1RENDQSBFbmhhbmNlZCBSZXBvcnRzKio6IFBlci1maWxlIHN0YXRpc3RpY3Mgd2l0aCBkZXRhaWxlZCBicmVha2Rvd25cbi0gKipcdUQ4M0RcdUREQzJcdUZFMEYgRmxleGlibGUgRm9sZGVycyoqOiBTZXBhcmF0ZSBzZXR0aW5ncyBmb3IgY29udmVyc2F0aW9ucywgYXR0YWNobWVudHMsIGFuZCByZXBvcnRzXG4tICoqXHVEODNDXHVERjBEIEludGVybmF0aW9uYWwgU3VwcG9ydCoqOiBJU08gODYwMSB0aW1lc3RhbXBzIHdvcmsgd2l0aCBhbGwgbG9jYWxlc1xuLSAqKlx1RDgzRFx1REMxQiAyNiBCdWcgRml4ZXMqKjogSW1wcm92ZWQgc3RhYmlsaXR5IGFuZCByZWxpYWJpbGl0eVxuXG4tLS1cblxuIyMjIFx1RDgzRFx1RENBMSBUaXBcblxuVHJ5IHRoZSBuZXcgKipzZWxlY3RpdmUgaW1wb3J0KiogZmVhdHVyZSBvbiB5b3VyIG5leHQgaW1wb3J0IC0geW91J2xsIGxvdmUgdGhlIGNvbnRyb2wgaXQgZ2l2ZXMgeW91IWA7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRyeSB0byBmZXRjaCByZWxlYXNlIG5vdGVzIGZyb20gR2l0SHViXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL1N1cGVya2lraW0vbmV4dXMtYWktY2hhdC1pbXBvcnRlci9yZWxlYXNlcy90YWdzL3YxLjMuMCcpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICBpZiAocmVsZWFzZS5ib2R5KSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSByZWxlYXNlLmJvZHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gVXNlIGZhbGxiYWNrIG1lc3NhZ2UgaWYgR2l0SHViIGZldGNoIGZhaWxzXG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW5kZXIgbWFya2Rvd24gY29udGVudFxuICAgICAgICBjb25zdCBjb250ZW50RGl2ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLXVwZ3JhZGUtY29udGVudFwiIH0pO1xuICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcbiAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGNvbnRlbnREaXYsXG4gICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4sXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gQWRkIGN1c3RvbSBzdHlsZXNcbiAgICAgICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBhZGRNaWdyYXRpb25TZWN0aW9uKCkge1xuICAgICAgICBjb25zdCBtaWdyYXRpb25TZWN0aW9uID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLW1pZ3JhdGlvbi1zZWN0aW9uXCIgfSk7XG5cbiAgICAgICAgLy8gSGVhZGVyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IG1pZ3JhdGlvblNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLW1pZ3JhdGlvbi1oZWFkZXJcIiB9KTtcbiAgICAgICAgaGVhZGVyLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJuZXh1cy1taWdyYXRpb24tdGl0bGVcIj5cbiAgICAgICAgICAgICAgICBcdUQ4M0RcdUREMDQgPHN0cm9uZz5NaWdyYXRpb24gUmVxdWlyZWQ8L3N0cm9uZz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIC8vIE1lc3NhZ2VcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IG1pZ3JhdGlvblNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLW1pZ3JhdGlvbi1tZXNzYWdlXCIgfSk7XG4gICAgICAgIG1lc3NhZ2UuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPHA+VGhlIGZvbGxvd2luZyB0YXNrcyB3aWxsIHJ1biBhdXRvbWF0aWNhbGx5IHRvIHVwZ3JhZGUgeW91ciBkYXRhIHRvIHYxLjMuMDo8L3A+XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gVGFzayBsaXN0XG4gICAgICAgIGNvbnN0IHRhc2tMaXN0ID0gbWlncmF0aW9uU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtbWlncmF0aW9uLXRhc2tzXCIgfSk7XG4gICAgICAgIHRhc2tMaXN0LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICA8bGk+XHUyNzEzIE1pZ3JhdGUgZm9sZGVyIHNldHRpbmdzIHRvIG5ldyBzdHJ1Y3R1cmU8L2xpPlxuICAgICAgICAgICAgICAgIDxsaT5cdTI3MTMgVXBkYXRlIHRpbWVzdGFtcHMgdG8gSVNPIDg2MDEgZm9ybWF0PC9saT5cbiAgICAgICAgICAgICAgICA8bGk+XHUyNzEzIEZpeCBmcm9udG1hdHRlciBhbGlhc2VzPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+XHUyNzEzIE1vdmUgUmVwb3J0cyBmb2xkZXIgdG8gcHJvcGVyIGxvY2F0aW9uPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+XHUyNzEzIFVwZGF0ZSBhcnRpZmFjdCBtZXRhZGF0YTwvbGk+XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICBgO1xuXG4gICAgICAgIC8vIEVzdGltYXRlZCB0aW1lXG4gICAgICAgIGNvbnN0IGVzdGltYXRlID0gbWlncmF0aW9uU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtbWlncmF0aW9uLWVzdGltYXRlXCIgfSk7XG4gICAgICAgIGVzdGltYXRlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxwPjxlbT5UaGlzIHdpbGwgdGFrZSBhIGZldyBzZWNvbmRzLjwvZW0+PC9wPlxuICAgICAgICBgO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkTWlncmF0aW9uQnV0dG9uKCkge1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtbWlncmF0aW9uLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblxuICAgICAgICBjb25zdCBtaWdyYXRpb25CdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdGV4dDogXCJcdUQ4M0RcdURFODAgUnVuIE1pZ3JhdGlvbiBUYXNrc1wiLFxuICAgICAgICAgICAgY2xzOiBcIm1vZC1jdGEgbmV4dXMtbWlncmF0aW9uLWJ1dHRvblwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1pZ3JhdGlvbkJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYXNSZXNvbHZlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUoXCJva1wiKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgICAgIC5tb2RhbC5uZXh1cy11cGdyYWRlLW1vZGFsLTEzMCB7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDUwcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy11cGdyYWRlLWNvbnRlbnQge1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogTWlncmF0aW9uIFNlY3Rpb24gU3R5bGVzICovXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLXNlY3Rpb24ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMjRweDtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDI0cHggMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLW1pZ3JhdGlvbi1oZWFkZXIge1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1taWdyYXRpb24tdGl0bGUge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4zZW07XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1taWdyYXRpb24tdGl0bGUgc3Ryb25nIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLW1pZ3JhdGlvbi1tZXNzYWdlIHtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1taWdyYXRpb24tdGFza3Mge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMTZweCAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLXRhc2tzIHVsIHtcbiAgICAgICAgICAgICAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLXRhc2tzIGxpIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHggMDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuOTVlbTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLWVzdGltYXRlIHtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogTWlncmF0aW9uIEJ1dHRvbiBTdHlsZXMgKi9cbiAgICAgICAgICAgIC5uZXh1cy1taWdyYXRpb24tYnV0dG9uLWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMzJweCAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLWJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTZweCA0OHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjJlbSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1taWdyYXRpb24tYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCA2cHggMTZweCByZ2JhKDAsIDAsIDAsIDAuMikgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG59XG5cbiIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuLy8gc3JjL21haW4udHNcbmltcG9ydCB7IFBsdWdpbiwgQXBwLCBQbHVnaW5NYW5pZmVzdCwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcIi4vY29uZmlnL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgUGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi90eXBlcy9wbHVnaW5cIjtcbmltcG9ydCB7IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW5TZXR0aW5nVGFiIH0gZnJvbSBcIi4vdWkvc2V0dGluZ3MtdGFiXCI7XG5pbXBvcnQgeyBDb21tYW5kUmVnaXN0cnkgfSBmcm9tIFwiLi9jb21tYW5kcy9jb21tYW5kLXJlZ2lzdHJ5XCI7XG5pbXBvcnQgeyBFdmVudEhhbmRsZXJzIH0gZnJvbSBcIi4vZXZlbnRzL2V2ZW50LWhhbmRsZXJzXCI7XG5pbXBvcnQgeyBJbXBvcnRTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZXMvaW1wb3J0LXNlcnZpY2VcIjtcbmltcG9ydCB7IFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBGaWxlU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VzL2ZpbGUtc2VydmljZVwiO1xuaW1wb3J0IHsgSW5jcmVtZW50YWxVcGdyYWRlTWFuYWdlciB9IGZyb20gXCIuL3VwZ3JhZGUvaW5jcmVtZW50YWwtdXBncmFkZS1tYW5hZ2VyXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXJcIjtcbmltcG9ydCB7IFByb3ZpZGVyU2VsZWN0aW9uRGlhbG9nIH0gZnJvbSBcIi4vZGlhbG9ncy9wcm92aWRlci1zZWxlY3Rpb24tZGlhbG9nXCI7XG5pbXBvcnQgeyBFbmhhbmNlZEZpbGVTZWxlY3Rpb25EaWFsb2cgfSBmcm9tIFwiLi9kaWFsb2dzL2VuaGFuY2VkLWZpbGUtc2VsZWN0aW9uLWRpYWxvZ1wiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uU2VsZWN0aW9uRGlhbG9nIH0gZnJvbSBcIi4vZGlhbG9ncy9jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZ1wiO1xuaW1wb3J0IHsgSW5zdGFsbGF0aW9uV2VsY29tZURpYWxvZyB9IGZyb20gXCIuL2RpYWxvZ3MvaW5zdGFsbGF0aW9uLXdlbGNvbWUtZGlhbG9nXCI7XG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlclJlZ2lzdHJ5IH0gZnJvbSBcIi4vcHJvdmlkZXJzL3Byb3ZpZGVyLXJlZ2lzdHJ5XCI7XG5pbXBvcnQgeyBGaWxlU2VsZWN0aW9uUmVzdWx0LCBDb252ZXJzYXRpb25TZWxlY3Rpb25SZXN1bHQgfSBmcm9tIFwiLi90eXBlcy9jb252ZXJzYXRpb24tc2VsZWN0aW9uXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25NZXRhZGF0YUV4dHJhY3RvciB9IGZyb20gXCIuL3NlcnZpY2VzL2NvbnZlcnNhdGlvbi1tZXRhZGF0YS1leHRyYWN0b3JcIjtcbmltcG9ydCB7IEltcG9ydFJlcG9ydCB9IGZyb20gXCIuL21vZGVscy9pbXBvcnQtcmVwb3J0XCI7XG5pbXBvcnQgeyBJbXBvcnRDb21wbGV0aW9uRGlhbG9nIH0gZnJvbSBcIi4vZGlhbG9ncy9pbXBvcnQtY29tcGxldGlvbi1kaWFsb2dcIjtcbmltcG9ydCB7IGVuc3VyZUZvbGRlckV4aXN0cywgZm9ybWF0VGltZXN0YW1wIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3MhOiBQbHVnaW5TZXR0aW5ncztcbiAgICBsb2dnZXI6IExvZ2dlciA9IG5ldyBMb2dnZXIoKTtcbiAgICBcbiAgICBwcml2YXRlIHN0b3JhZ2VTZXJ2aWNlOiBTdG9yYWdlU2VydmljZTtcbiAgICBwcml2YXRlIGltcG9ydFNlcnZpY2U6IEltcG9ydFNlcnZpY2U7XG4gICAgcHJpdmF0ZSBmaWxlU2VydmljZTogRmlsZVNlcnZpY2U7XG4gICAgcHJpdmF0ZSBjb21tYW5kUmVnaXN0cnk6IENvbW1hbmRSZWdpc3RyeTtcbiAgICBwcml2YXRlIGV2ZW50SGFuZGxlcnM6IEV2ZW50SGFuZGxlcnM7XG4gICAgcHJpdmF0ZSB1cGdyYWRlTWFuYWdlcjogSW5jcmVtZW50YWxVcGdyYWRlTWFuYWdlcjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBtYW5pZmVzdDogUGx1Z2luTWFuaWZlc3QpIHtcbiAgICAgICAgc3VwZXIoYXBwLCBtYW5pZmVzdCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnN0b3JhZ2VTZXJ2aWNlID0gbmV3IFN0b3JhZ2VTZXJ2aWNlKHRoaXMpO1xuICAgICAgICB0aGlzLmltcG9ydFNlcnZpY2UgPSBuZXcgSW1wb3J0U2VydmljZSh0aGlzKTtcbiAgICAgICAgdGhpcy5maWxlU2VydmljZSA9IG5ldyBGaWxlU2VydmljZSh0aGlzKTtcbiAgICAgICAgdGhpcy5jb21tYW5kUmVnaXN0cnkgPSBuZXcgQ29tbWFuZFJlZ2lzdHJ5KHRoaXMpO1xuICAgICAgICB0aGlzLmV2ZW50SGFuZGxlcnMgPSBuZXcgRXZlbnRIYW5kbGVycyh0aGlzKTtcbiAgICAgICAgdGhpcy51cGdyYWRlTWFuYWdlciA9IG5ldyBJbmNyZW1lbnRhbFVwZ3JhZGVNYW5hZ2VyKHRoaXMpO1xuICAgIH1cblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tbWFuZHMoKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIYW5kbGVycy5yZWdpc3RlckV2ZW50cygpO1xuXG4gICAgICAgICAgICBjb25zdCByaWJib25JY29uRWwgPSB0aGlzLmFkZFJpYmJvbkljb24oXG4gICAgICAgICAgICAgICAgXCJtZXNzYWdlLXNxdWFyZS1wbHVzXCIsXG4gICAgICAgICAgICAgICAgXCJOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gSW1wb3J0IG5ldyBmaWxlXCIsXG4gICAgICAgICAgICAgICAgKCkgPT4gdGhpcy5zaG93UHJvdmlkZXJTZWxlY3Rpb25EaWFsb2coKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJpYmJvbkljb25FbC5hZGRDbGFzcyhcIm5leHVzLWFpLWNoYXQtcmliYm9uXCIpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdXBncmFkZXMgYW5kIGZyZXNoIGluc3RhbGxhdGlvblxuICAgICAgICAgICAgY29uc3QgdXBncmFkZVJlc3VsdCA9IGF3YWl0IHRoaXMudXBncmFkZU1hbmFnZXIuY2hlY2tBbmRQZXJmb3JtVXBncmFkZSgpO1xuXG4gICAgICAgICAgICAvLyBTaG93IGluc3RhbGxhdGlvbiB3ZWxjb21lIGRpYWxvZyBmb3IgZnJlc2ggaW5zdGFsbHNcbiAgICAgICAgICAgIGlmICh1cGdyYWRlUmVzdWx0Py5pc0ZyZXNoSW5zdGFsbCkge1xuICAgICAgICAgICAgICAgIG5ldyBJbnN0YWxsYXRpb25XZWxjb21lRGlhbG9nKHRoaXMuYXBwLCB0aGlzLm1hbmlmZXN0LnZlcnNpb24pLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiUGx1Z2luIGxvYWRpbmcgZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIG9udW5sb2FkKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5ldmVudEhhbmRsZXJzLmNsZWFudXAoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIlBsdWdpbiB1bmxvYWRpbmcgZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGE/LnNldHRpbmdzIHx8IHt9KTtcblxuICAgICAgICAgICAgLy8gTm8gbmVlZCB0byBjb21wdXRlIHJlcG9ydEZvbGRlciBhbnltb3JlIC0gaXQncyBhIGRpcmVjdCBzZXR0aW5nIG5vd1xuICAgICAgICAgICAgLy8gTWlncmF0aW9uIHdpbGwgaGFuZGxlIGNvbnZlcnRpbmcgb2xkIGFyY2hpdmVGb2xkZXIgdG8gbmV3IHN0cnVjdHVyZVxuXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHZlcnNpb24gdHJhY2tpbmdcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWZXJzaW9uID0gdGhpcy5tYW5pZmVzdC52ZXJzaW9uO1xuICAgICAgICAgICAgY29uc3Qgc3RvcmVkQ3VycmVudFZlcnNpb24gPSB0aGlzLnNldHRpbmdzLmN1cnJlbnRWZXJzaW9uO1xuXG4gICAgICAgICAgICBpZiAoIXN0b3JlZEN1cnJlbnRWZXJzaW9uIHx8IHN0b3JlZEN1cnJlbnRWZXJzaW9uID09PSBcIjAuMC4wXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBGaXJzdCB0aW1lIHdpdGggdmVyc2lvbiB0cmFja2luZ1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhc0V4aXN0aW5nQ29udmVyc2F0aW9ucyA9IGF3YWl0IHRoaXMuaGFzRXhpc3RpbmdOZXh1c0NvbnZlcnNhdGlvbnMoKTtcblxuICAgICAgICAgICAgICAgIGlmIChoYXNFeGlzdGluZ0NvbnZlcnNhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRXhpc3RpbmcgdXNlciB1cGdyYWRpbmcgdG8gdmVyc2lvbiB0cmFja2luZyBmb3IgZmlyc3QgdGltZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnByZXZpb3VzVmVyc2lvbiA9IFwiMS4wLnhcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXJyZW50VmVyc2lvbiA9IGN1cnJlbnRWZXJzaW9uO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZyZXNoIGluc3RhbGxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5wcmV2aW91c1ZlcnNpb24gPSBjdXJyZW50VmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXJyZW50VmVyc2lvbiA9IGN1cnJlbnRWZXJzaW9uO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RvcmVkQ3VycmVudFZlcnNpb24gIT09IGN1cnJlbnRWZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gTm9ybWFsIHVwZ3JhZGVcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnByZXZpb3VzVmVyc2lvbiA9IHN0b3JlZEN1cnJlbnRWZXJzaW9uO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY3VycmVudFZlcnNpb24gPSBjdXJyZW50VmVyc2lvbjtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBMb2FkIHN0b3JhZ2UgZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlU2VydmljZS5sb2FkRGF0YSgpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcImxvYWRTZXR0aW5ncyBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdmF1bHQgY29udGFpbnMgZXhpc3RpbmcgTmV4dXMgY29udmVyc2F0aW9uc1xuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaGFzRXhpc3RpbmdOZXh1c0NvbnZlcnNhdGlvbnMoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgICAgIHJldHVybiBmaWxlcy5zb21lKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIHJldHVybiBmcm9udG1hdHRlcj8ubmV4dXMgPT09IHRoaXMubWFuaWZlc3QuaWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJFcnJvciBjaGVja2luZyBmb3IgZXhpc3RpbmcgY29udmVyc2F0aW9uczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gTG9hZCBleGlzdGluZyBkYXRhIHRvIHByZXNlcnZlIHVwZ3JhZGUgaGlzdG9yeSBhbmQgb3RoZXIgZGF0YVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdEYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpIHx8IHt9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQcmVzZXJ2ZSBleGlzdGluZ0RhdGEuaW1wb3J0ZWRBcmNoaXZlcyBpZiBpdCBleGlzdHMgYW5kIGhhcyBkYXRhXG4gICAgICAgICAgICBsZXQgZmluYWxJbXBvcnRlZEFyY2hpdmVzID0gdGhpcy5zdG9yYWdlU2VydmljZS5nZXRJbXBvcnRlZEFyY2hpdmVzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0RhdGEuaW1wb3J0ZWRBcmNoaXZlcyAmJiBPYmplY3Qua2V5cyhleGlzdGluZ0RhdGEuaW1wb3J0ZWRBcmNoaXZlcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIEV4aXN0aW5nIGRhdGEgaGFzIGFyY2hpdmVzIC0gcHJlc2VydmUgdGhlbSBhbmQgbWVyZ2Ugd2l0aCBzdG9yYWdlXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBcmNoaXZlcyA9IGV4aXN0aW5nRGF0YS5pbXBvcnRlZEFyY2hpdmVzO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JhZ2VBcmNoaXZlcyA9IHRoaXMuc3RvcmFnZVNlcnZpY2UuZ2V0SW1wb3J0ZWRBcmNoaXZlcygpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIE1lcmdlOiBzdG9yYWdlIHRha2VzIHByaW9yaXR5IGZvciBjb25mbGljdHNcbiAgICAgICAgICAgICAgICBmaW5hbEltcG9ydGVkQXJjaGl2ZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nQXJjaGl2ZXMsXG4gICAgICAgICAgICAgICAgICAgIC4uLnN0b3JhZ2VBcmNoaXZlc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE1lcmdlIHdpdGggbmV3IGRhdGEsIHByZXNlcnZpbmcgdXBncmFkZSBoaXN0b3J5IHN0cnVjdHVyZVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAuLi5leGlzdGluZ0RhdGEsXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgaW1wb3J0ZWRBcmNoaXZlczogZmluYWxJbXBvcnRlZEFyY2hpdmVzLFxuICAgICAgICAgICAgICAgIHVwZ3JhZGVIaXN0b3J5OiBleGlzdGluZ0RhdGEudXBncmFkZUhpc3RvcnkgfHwge1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRVcGdyYWRlczoge30sXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZE9wZXJhdGlvbnM6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlU2VydmljZS5zYXZlRGF0YShtZXJnZWREYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwic2F2ZVNldHRpbmdzIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcmVzZXRDYXRhbG9ncygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RvcmFnZVNlcnZpY2UucmVzZXRDYXRhbG9ncygpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwicmVzZXRDYXRhbG9ncyBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFN0b3JhZ2VTZXJ2aWNlKCk6IFN0b3JhZ2VTZXJ2aWNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZVNlcnZpY2U7XG4gICAgfVxuXG4gICAgZ2V0SW1wb3J0U2VydmljZSgpOiBJbXBvcnRTZXJ2aWNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1wb3J0U2VydmljZTtcbiAgICB9XG5cbiAgICBnZXRGaWxlU2VydmljZSgpOiBGaWxlU2VydmljZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbGVTZXJ2aWNlO1xuICAgIH1cblxuICAgIGdldFVwZ3JhZGVNYW5hZ2VyKCk6IEluY3JlbWVudGFsVXBncmFkZU1hbmFnZXIge1xuICAgICAgICByZXR1cm4gdGhpcy51cGdyYWRlTWFuYWdlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IHByb3ZpZGVyIHNlbGVjdGlvbiBkaWFsb2cgYW5kIHRoZW4gZmlsZSBzZWxlY3Rpb25cbiAgICAgKiBFbnN1cmVzIG1pZ3JhdGlvbiBpcyBjb21wbGV0ZSBiZWZvcmUgYWxsb3dpbmcgaW1wb3J0XG4gICAgICovXG4gICAgYXN5bmMgc2hvd1Byb3ZpZGVyU2VsZWN0aW9uRGlhbG9nKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBDaGVjayBpZiBtaWdyYXRpb24gaXMgbmVlZGVkIGJlZm9yZSBhbGxvd2luZyBpbXBvcnRcbiAgICAgICAgY29uc3QgdXBncmFkZVJlc3VsdCA9IGF3YWl0IHRoaXMudXBncmFkZU1hbmFnZXIuY2hlY2tBbmRQZXJmb3JtVXBncmFkZSgpO1xuXG4gICAgICAgIC8vIElmIG1pZ3JhdGlvbiB3YXMgbmVlZGVkIGJ1dCBmYWlsZWQvY2FuY2VsbGVkLCBibG9jayBpbXBvcnRcbiAgICAgICAgaWYgKHVwZ3JhZGVSZXN1bHQgIT09IG51bGwgJiYgIXVwZ3JhZGVSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgLy8gTWlncmF0aW9uIGZhaWxlZCBvciB3YXMgY2FuY2VsbGVkIC0gbm90aWNlIGFscmVhZHkgc2hvd24gYnkgdXBncmFkZSBtYW5hZ2VyXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdXBncmFkZVJlc3VsdCA9PT0gbnVsbDogbm8gbWlncmF0aW9uIG5lZWRlZFxuICAgICAgICAvLyBJZiB1cGdyYWRlUmVzdWx0LnN1Y2Nlc3MgPT09IHRydWU6IG1pZ3JhdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5XG4gICAgICAgIC8vIEluIGJvdGggY2FzZXMsIGNvbnRpbnVlIHdpdGggaW1wb3J0XG5cbiAgICAgICAgY29uc3QgcHJvdmlkZXJSZWdpc3RyeSA9IGNyZWF0ZVByb3ZpZGVyUmVnaXN0cnkodGhpcyk7XG5cbiAgICAgICAgbmV3IFByb3ZpZGVyU2VsZWN0aW9uRGlhbG9nKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICBwcm92aWRlclJlZ2lzdHJ5LFxuICAgICAgICAgICAgKHNlbGVjdGVkUHJvdmlkZXI6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0VuaGFuY2VkRmlsZVNlbGVjdGlvbkRpYWxvZyhzZWxlY3RlZFByb3ZpZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKS5vcGVuKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyBlbmhhbmNlZCBmaWxlIHNlbGVjdGlvbiBkaWFsb2cgd2l0aCBpbXBvcnQgbW9kZSBjaG9pY2VcbiAgICAgKi9cbiAgICBwcml2YXRlIHNob3dFbmhhbmNlZEZpbGVTZWxlY3Rpb25EaWFsb2cocHJvdmlkZXI6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBuZXcgRW5oYW5jZWRGaWxlU2VsZWN0aW9uRGlhbG9nKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICBwcm92aWRlcixcbiAgICAgICAgICAgIChyZXN1bHQ6IEZpbGVTZWxlY3Rpb25SZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVTZWxlY3Rpb25SZXN1bHQocmVzdWx0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICkub3BlbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSB0aGUgcmVzdWx0IGZyb20gZW5oYW5jZWQgZmlsZSBzZWxlY3Rpb24gZGlhbG9nXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVGaWxlU2VsZWN0aW9uUmVzdWx0KHJlc3VsdDogRmlsZVNlbGVjdGlvblJlc3VsdCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGZpbGVzLCBtb2RlLCBwcm92aWRlciB9ID0gcmVzdWx0O1xuXG4gICAgICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNvcnQgZmlsZXMgYnkgdGltZXN0YW1wXG4gICAgICAgIGNvbnN0IHNvcnRlZEZpbGVzID0gdGhpcy5zb3J0RmlsZXNCeVRpbWVzdGFtcChmaWxlcyk7XG5cbiAgICAgICAgaWYgKG1vZGUgPT09ICdhbGwnKSB7XG4gICAgICAgICAgICAvLyBJbXBvcnQgYWxsIGNvbnZlcnNhdGlvbnMgd2l0aCBhbmFseXNpcyAobmV3IG9wdGltaXplZCB3b3JrZmxvdylcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlSW1wb3J0QWxsKHNvcnRlZEZpbGVzLCBwcm92aWRlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTZWxlY3RpdmUgaW1wb3J0IC0gc2hvdyBjb252ZXJzYXRpb24gc2VsZWN0aW9uIGRpYWxvZ1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVTZWxlY3RpdmVJbXBvcnQoc29ydGVkRmlsZXMsIHByb3ZpZGVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBcIkltcG9ydCBBbGxcIiBtb2RlIHdpdGggYW5hbHlzaXMgYW5kIGF1dG8tc2VsZWN0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVJbXBvcnRBbGwoZmlsZXM6IEZpbGVbXSwgcHJvdmlkZXI6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgQW5hbHl6aW5nIGNvbnZlcnNhdGlvbnMgZnJvbSAke2ZpbGVzLmxlbmd0aH0gZmlsZShzKS4uLmApO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgbWV0YWRhdGEgZXh0cmFjdG9yXG4gICAgICAgICAgICBjb25zdCBwcm92aWRlclJlZ2lzdHJ5ID0gY3JlYXRlUHJvdmlkZXJSZWdpc3RyeSh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhRXh0cmFjdG9yID0gbmV3IENvbnZlcnNhdGlvbk1ldGFkYXRhRXh0cmFjdG9yKHByb3ZpZGVyUmVnaXN0cnksIHRoaXMpO1xuXG4gICAgICAgICAgICAvLyBHZXQgZXhpc3RpbmcgY29udmVyc2F0aW9ucyBmb3Igc3RhdHVzIGNoZWNraW5nXG4gICAgICAgICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5nZXRTdG9yYWdlU2VydmljZSgpO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDb252ZXJzYXRpb25zID0gYXdhaXQgc3RvcmFnZS5zY2FuRXhpc3RpbmdDb252ZXJzYXRpb25zKCk7XG5cbiAgICAgICAgICAgIC8vIEV4dHJhY3QgbWV0YWRhdGEgZnJvbSBhbGwgWklQIGZpbGVzIChzYW1lIGFzIHNlbGVjdGl2ZSBtb2RlKVxuICAgICAgICAgICAgY29uc3QgZXh0cmFjdGlvblJlc3VsdCA9IGF3YWl0IG1ldGFkYXRhRXh0cmFjdG9yLmV4dHJhY3RNZXRhZGF0YUZyb21NdWx0aXBsZVppcHMoXG4gICAgICAgICAgICAgICAgZmlsZXMsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdDb252ZXJzYXRpb25zXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgc2hhcmVkIHJlcG9ydCBmb3IgdGhlIGVudGlyZSBvcGVyYXRpb25cbiAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvblJlcG9ydCA9IG5ldyBJbXBvcnRSZXBvcnQoKTtcblxuICAgICAgICAgICAgLy8gU2V0IGN1c3RvbSB0aW1lc3RhbXAgZm9ybWF0IGlmIGVuYWJsZWRcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnVzZUN1c3RvbU1lc3NhZ2VUaW1lc3RhbXBGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICBvcGVyYXRpb25SZXBvcnQuc2V0Q3VzdG9tVGltZXN0YW1wRm9ybWF0KHRoaXMuc2V0dGluZ3MubWVzc2FnZVRpbWVzdGFtcEZvcm1hdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChleHRyYWN0aW9uUmVzdWx0LmNvbnZlcnNhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gTm8gY29udmVyc2F0aW9ucyB0byBpbXBvcnQsIGJ1dCBzdGlsbCBnZW5lcmF0ZSByZXBvcnQgYW5kIHNob3cgZGlhbG9nXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIG5ldyBvciB1cGRhdGVkIGNvbnZlcnNhdGlvbnMgZm91bmQuIEFsbCBjb252ZXJzYXRpb25zIGFyZSBhbHJlYWR5IHVwIHRvIGRhdGUuXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gV3JpdGUgcmVwb3J0IHNob3dpbmcgd2hhdCB3YXMgYW5hbHl6ZWRcbiAgICAgICAgICAgICAgICBjb25zdCByZXBvcnRQYXRoID0gYXdhaXQgdGhpcy53cml0ZUNvbnNvbGlkYXRlZFJlcG9ydChvcGVyYXRpb25SZXBvcnQsIHByb3ZpZGVyLCBmaWxlcywgZXh0cmFjdGlvblJlc3VsdC5hbmFseXNpc0luZm8sIGV4dHJhY3Rpb25SZXN1bHQuZmlsZVN0YXRzLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBTaG93IGNvbXBsZXRpb24gZGlhbG9nIHdpdGggMCBpbXBvcnRzXG4gICAgICAgICAgICAgICAgaWYgKHJlcG9ydFBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SW1wb3J0Q29tcGxldGlvbkRpYWxvZyhvcGVyYXRpb25SZXBvcnQsIHJlcG9ydFBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEF1dG8tc2VsZWN0IEFMTCBjb252ZXJzYXRpb25zIChORVcgKyBVUERBVEVEKVxuICAgICAgICAgICAgY29uc3QgYWxsSWRzID0gZXh0cmFjdGlvblJlc3VsdC5jb252ZXJzYXRpb25zLm1hcChjID0+IGMuaWQpO1xuXG4gICAgICAgICAgICBjb25zdCBuZXdDb3VudCA9IGV4dHJhY3Rpb25SZXN1bHQuYW5hbHlzaXNJbmZvPy5jb252ZXJzYXRpb25zTmV3ID8/IDA7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkQ291bnQgPSBleHRyYWN0aW9uUmVzdWx0LmFuYWx5c2lzSW5mbz8uY29udmVyc2F0aW9uc1VwZGF0ZWQgPz8gMDtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEltcG9ydGluZyAke2FsbElkcy5sZW5ndGh9IGNvbnZlcnNhdGlvbnMgKCR7bmV3Q291bnR9IG5ldywgJHt1cGRhdGVkQ291bnR9IHVwZGF0ZWQpLi4uYCk7XG5cbiAgICAgICAgICAgIC8vIEdyb3VwIGNvbnZlcnNhdGlvbnMgYnkgZmlsZSBhbmQgaW1wb3J0XG4gICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25zQnlGaWxlID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZ1tdPigpO1xuICAgICAgICAgICAgZXh0cmFjdGlvblJlc3VsdC5jb252ZXJzYXRpb25zLmZvckVhY2goY29udiA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnYuc291cmNlRmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnZlcnNhdGlvbnNCeUZpbGUuaGFzKGNvbnYuc291cmNlRmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbnNCeUZpbGUuc2V0KGNvbnYuc291cmNlRmlsZSwgW10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbnNCeUZpbGUuZ2V0KGNvbnYuc291cmNlRmlsZSkhLnB1c2goY29udi5pZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEJ1aWxkIGF0dGFjaG1lbnQgbWFwIGZvciBtdWx0aS1aSVAgZmFsbGJhY2sgKENoYXRHUFQgb25seSlcbiAgICAgICAgICAgIGlmIChwcm92aWRlciA9PT0gJ2NoYXRncHQnICYmIGZpbGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmltcG9ydFNlcnZpY2UuYnVpbGRBdHRhY2htZW50TWFwRm9yTXVsdGlaaXAoZmlsZXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGZpbGVzIHNlcXVlbnRpYWxseSB3aXRoIHNoYXJlZCByZXBvcnRcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnNGb3JGaWxlID0gY29udmVyc2F0aW9uc0J5RmlsZS5nZXQoZmlsZS5uYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoY29udmVyc2F0aW9uc0ZvckZpbGUgJiYgY29udmVyc2F0aW9uc0ZvckZpbGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5pbXBvcnRTZXJ2aWNlLmhhbmRsZVppcEZpbGUoZmlsZSwgcHJvdmlkZXIsIGNvbnZlcnNhdGlvbnNGb3JGaWxlLCBvcGVyYXRpb25SZXBvcnQpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgZmlsZSAke2ZpbGUubmFtZX06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udGludWUgd2l0aCBvdGhlciBmaWxlcyBldmVuIGlmIG9uZSBmYWlsc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDbGVhciBhdHRhY2htZW50IG1hcCBhZnRlciBpbXBvcnQgY29tcGxldGVzXG4gICAgICAgICAgICBpZiAocHJvdmlkZXIgPT09ICdjaGF0Z3B0JyAmJiBmaWxlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbXBvcnRTZXJ2aWNlLmNsZWFyQXR0YWNobWVudE1hcCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBXcml0ZSB0aGUgY29uc29saWRhdGVkIHJlcG9ydCAoYWx3YXlzLCBldmVuIGlmIHNvbWUgZmlsZXMgZmFpbGVkKVxuICAgICAgICAgICAgY29uc3QgcmVwb3J0UGF0aCA9IGF3YWl0IHRoaXMud3JpdGVDb25zb2xpZGF0ZWRSZXBvcnQob3BlcmF0aW9uUmVwb3J0LCBwcm92aWRlciwgZmlsZXMsIGV4dHJhY3Rpb25SZXN1bHQuYW5hbHlzaXNJbmZvLCBleHRyYWN0aW9uUmVzdWx0LmZpbGVTdGF0cywgZmFsc2UpO1xuXG4gICAgICAgICAgICAvLyBTaG93IGNvbXBsZXRpb24gZGlhbG9nXG4gICAgICAgICAgICBpZiAocmVwb3J0UGF0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ltcG9ydENvbXBsZXRpb25EaWFsb2cob3BlcmF0aW9uUmVwb3J0LCByZXBvcnRQYXRoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgaWYgcmVwb3J0IHdyaXRpbmcgZmFpbGVkXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgSW1wb3J0IGNvbXBsZXRlZC4gJHtvcGVyYXRpb25SZXBvcnQuZ2V0Q3JlYXRlZENvdW50KCl9IGNyZWF0ZWQsICR7b3BlcmF0aW9uUmVwb3J0LmdldFVwZGF0ZWRDb3VudCgpfSB1cGRhdGVkLmApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIltJTVBPUlQtQUxMXSBFcnJvciBpbiBpbXBvcnQgYWxsOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiW0lNUE9SVC1BTExdIEVycm9yIG1lc3NhZ2U6XCIsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiW0lNUE9SVC1BTExdIEVycm9yIG5hbWU6XCIsIGVycm9yLm5hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiW0lNUE9SVC1BTExdIEVycm9yIHN0YWNrOlwiLCBlcnJvci5zdGFjayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiW0lNUE9SVC1BTExdIEVycm9yIChub3QgRXJyb3IgaW5zdGFuY2UpOlwiLCBTdHJpbmcoZXJyb3IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIGR1cmluZyBpbXBvcnQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHNlbGVjdGl2ZSBpbXBvcnQgd29ya2Zsb3dcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVNlbGVjdGl2ZUltcG9ydChmaWxlczogRmlsZVtdLCBwcm92aWRlcjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBBbmFseXppbmcgY29udmVyc2F0aW9ucyBmcm9tICR7ZmlsZXMubGVuZ3RofSBmaWxlKHMpLi4uYCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBtZXRhZGF0YSBleHRyYWN0b3JcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyUmVnaXN0cnkgPSBjcmVhdGVQcm92aWRlclJlZ2lzdHJ5KHRoaXMpO1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGFFeHRyYWN0b3IgPSBuZXcgQ29udmVyc2F0aW9uTWV0YWRhdGFFeHRyYWN0b3IocHJvdmlkZXJSZWdpc3RyeSwgdGhpcyk7XG5cbiAgICAgICAgICAgIC8vIEdldCBleGlzdGluZyBjb252ZXJzYXRpb25zIGZvciBzdGF0dXMgY2hlY2tpbmdcbiAgICAgICAgICAgIGNvbnN0IHN0b3JhZ2UgPSB0aGlzLmdldFN0b3JhZ2VTZXJ2aWNlKCk7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0NvbnZlcnNhdGlvbnMgPSBhd2FpdCBzdG9yYWdlLnNjYW5FeGlzdGluZ0NvbnZlcnNhdGlvbnMoKTtcblxuICAgICAgICAgICAgLy8gRXh0cmFjdCBtZXRhZGF0YSBmcm9tIGFsbCBaSVAgZmlsZXNcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhY3Rpb25SZXN1bHQgPSBhd2FpdCBtZXRhZGF0YUV4dHJhY3Rvci5leHRyYWN0TWV0YWRhdGFGcm9tTXVsdGlwbGVaaXBzKFxuICAgICAgICAgICAgICAgIGZpbGVzLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQ29udmVyc2F0aW9uc1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKGV4dHJhY3Rpb25SZXN1bHQuY29udmVyc2F0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gY29udmVyc2F0aW9ucyBmb3VuZCBpbiB0aGUgc2VsZWN0ZWQgZmlsZXMuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2hvdyBjb252ZXJzYXRpb24gc2VsZWN0aW9uIGRpYWxvZyB3aXRoIGVuaGFuY2VkIG1ldGFkYXRhXG4gICAgICAgICAgICBuZXcgQ29udmVyc2F0aW9uU2VsZWN0aW9uRGlhbG9nKFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgICAgIGV4dHJhY3Rpb25SZXN1bHQuY29udmVyc2F0aW9ucyxcbiAgICAgICAgICAgICAgICAocmVzdWx0OiBDb252ZXJzYXRpb25TZWxlY3Rpb25SZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDb252ZXJzYXRpb25TZWxlY3Rpb25SZXN1bHQocmVzdWx0LCBmaWxlcywgcHJvdmlkZXIsIGV4dHJhY3Rpb25SZXN1bHQuYW5hbHlzaXNJbmZvLCBleHRyYWN0aW9uUmVzdWx0LmZpbGVTdGF0cyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgIGV4dHJhY3Rpb25SZXN1bHQuYW5hbHlzaXNJbmZvXG4gICAgICAgICAgICApLm9wZW4oKTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJbU0VMRUNUSVZFLUlNUE9SVF0gRXJyb3IgaW4gc2VsZWN0aXZlIGltcG9ydDpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJbU0VMRUNUSVZFLUlNUE9SVF0gRnVsbCBlcnJvciBkZXRhaWxzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiW1NFTEVDVElWRS1JTVBPUlRdIEVycm9yIHN0YWNrOlwiLCBlcnJvci5zdGFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvciBhbmFseXppbmcgY29udmVyc2F0aW9uczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGhlIHJlc3VsdCBmcm9tIGNvbnZlcnNhdGlvbiBzZWxlY3Rpb24gZGlhbG9nXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDb252ZXJzYXRpb25TZWxlY3Rpb25SZXN1bHQoXG4gICAgICAgIHJlc3VsdDogQ29udmVyc2F0aW9uU2VsZWN0aW9uUmVzdWx0LFxuICAgICAgICBmaWxlczogRmlsZVtdLFxuICAgICAgICBwcm92aWRlcjogc3RyaW5nLFxuICAgICAgICBhbmFseXNpc0luZm8/OiBhbnksXG4gICAgICAgIGZpbGVTdGF0cz86IE1hcDxzdHJpbmcsIGFueT5cbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gQ3JlYXRlIHNoYXJlZCByZXBvcnQgZm9yIHRoZSBlbnRpcmUgb3BlcmF0aW9uXG4gICAgICAgIGNvbnN0IG9wZXJhdGlvblJlcG9ydCA9IG5ldyBJbXBvcnRSZXBvcnQoKTtcblxuICAgICAgICAvLyBTZXQgY3VzdG9tIHRpbWVzdGFtcCBmb3JtYXQgaWYgZW5hYmxlZFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy51c2VDdXN0b21NZXNzYWdlVGltZXN0YW1wRm9ybWF0KSB7XG4gICAgICAgICAgICBvcGVyYXRpb25SZXBvcnQuc2V0Q3VzdG9tVGltZXN0YW1wRm9ybWF0KHRoaXMuc2V0dGluZ3MubWVzc2FnZVRpbWVzdGFtcEZvcm1hdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0LnNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIGNvbnZlcnNhdGlvbnMgc2VsZWN0ZWQgZm9yIGltcG9ydC5cIik7XG5cbiAgICAgICAgICAgIC8vIFN0aWxsIHdyaXRlIHJlcG9ydCBhbmQgc2hvdyBkaWFsb2dcbiAgICAgICAgICAgIGNvbnN0IHJlcG9ydFBhdGggPSBhd2FpdCB0aGlzLndyaXRlQ29uc29saWRhdGVkUmVwb3J0KG9wZXJhdGlvblJlcG9ydCwgcHJvdmlkZXIsIGZpbGVzLCBhbmFseXNpc0luZm8sIGZpbGVTdGF0cywgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAocmVwb3J0UGF0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ltcG9ydENvbXBsZXRpb25EaWFsb2cob3BlcmF0aW9uUmVwb3J0LCByZXBvcnRQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG5ldyBOb3RpY2UoYEltcG9ydGluZyAke3Jlc3VsdC5zZWxlY3RlZElkcy5sZW5ndGh9IHNlbGVjdGVkIGNvbnZlcnNhdGlvbnMgZnJvbSAke2ZpbGVzLmxlbmd0aH0gZmlsZShzKS4uLmApO1xuXG4gICAgICAgIC8vIEdyb3VwIHNlbGVjdGVkIGNvbnZlcnNhdGlvbnMgYnkgc291cmNlIGZpbGUgZm9yIGVmZmljaWVudCBwcm9jZXNzaW5nXG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnNCeUZpbGUgPSBhd2FpdCB0aGlzLmdyb3VwQ29udmVyc2F0aW9uc0J5RmlsZShyZXN1bHQsIGZpbGVzKTtcblxuICAgICAgICAvLyBCdWlsZCBhdHRhY2htZW50IG1hcCBmb3IgbXVsdGktWklQIGZhbGxiYWNrIChDaGF0R1BUIG9ubHkpXG4gICAgICAgIGlmIChwcm92aWRlciA9PT0gJ2NoYXRncHQnICYmIGZpbGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5pbXBvcnRTZXJ2aWNlLmJ1aWxkQXR0YWNobWVudE1hcEZvck11bHRpWmlwKGZpbGVzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBidWlsZCBhdHRhY2htZW50IG1hcDonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGJ1aWxkIGF0dGFjaG1lbnQgbWFwLiBDaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJvY2VzcyBmaWxlcyBzZXF1ZW50aWFsbHkgaW4gb3JpZ2luYWwgb3JkZXIgd2l0aCBzaGFyZWQgcmVwb3J0XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uc0ZvckZpbGUgPSBjb252ZXJzYXRpb25zQnlGaWxlLmdldChmaWxlLm5hbWUpO1xuICAgICAgICAgICAgaWYgKGNvbnZlcnNhdGlvbnNGb3JGaWxlICYmIGNvbnZlcnNhdGlvbnNGb3JGaWxlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmltcG9ydFNlcnZpY2UuaGFuZGxlWmlwRmlsZShmaWxlLCBwcm92aWRlciwgY29udmVyc2F0aW9uc0ZvckZpbGUsIG9wZXJhdGlvblJlcG9ydCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgZmlsZSAke2ZpbGUubmFtZX06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvciBwcm9jZXNzaW5nICR7ZmlsZS5uYW1lfS4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDbGVhciBhdHRhY2htZW50IG1hcCBhZnRlciBpbXBvcnQgY29tcGxldGVzXG4gICAgICAgIGlmIChwcm92aWRlciA9PT0gJ2NoYXRncHQnICYmIGZpbGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMuaW1wb3J0U2VydmljZS5jbGVhckF0dGFjaG1lbnRNYXAoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdyaXRlIHRoZSBjb25zb2xpZGF0ZWQgcmVwb3J0IChhbHdheXMsIGV2ZW4gaWYgc29tZSBmaWxlcyBmYWlsZWQpXG4gICAgICAgIGNvbnN0IHJlcG9ydFBhdGggPSBhd2FpdCB0aGlzLndyaXRlQ29uc29saWRhdGVkUmVwb3J0KG9wZXJhdGlvblJlcG9ydCwgcHJvdmlkZXIsIGZpbGVzLCBhbmFseXNpc0luZm8sIGZpbGVTdGF0cywgdHJ1ZSk7XG5cbiAgICAgICAgLy8gU2hvdyBjb21wbGV0aW9uIGRpYWxvZ1xuICAgICAgICBpZiAocmVwb3J0UGF0aCkge1xuICAgICAgICAgICAgdGhpcy5zaG93SW1wb3J0Q29tcGxldGlvbkRpYWxvZyhvcGVyYXRpb25SZXBvcnQsIHJlcG9ydFBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRmFsbGJhY2sgaWYgcmVwb3J0IHdyaXRpbmcgZmFpbGVkXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBJbXBvcnQgY29tcGxldGVkLiAke29wZXJhdGlvblJlcG9ydC5nZXRDcmVhdGVkQ291bnQoKX0gY3JlYXRlZCwgJHtvcGVyYXRpb25SZXBvcnQuZ2V0VXBkYXRlZENvdW50KCl9IHVwZGF0ZWQuYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcml0ZSBjb25zb2xpZGF0ZWQgcmVwb3J0IGZvciBtdWx0aS1maWxlIGltcG9ydFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgd3JpdGVDb25zb2xpZGF0ZWRSZXBvcnQoXG4gICAgICAgIHJlcG9ydDogSW1wb3J0UmVwb3J0LFxuICAgICAgICBwcm92aWRlcjogc3RyaW5nLFxuICAgICAgICBmaWxlczogRmlsZVtdLFxuICAgICAgICBhbmFseXNpc0luZm8/OiBhbnksXG4gICAgICAgIGZpbGVTdGF0cz86IE1hcDxzdHJpbmcsIGFueT4sXG4gICAgICAgIGlzU2VsZWN0aXZlSW1wb3J0PzogYm9vbGVhblxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIC8vIEdldCBwcm92aWRlci1zcGVjaWZpYyBmb2xkZXJcbiAgICAgICAgY29uc3QgcmVwb3J0Rm9sZGVyID0gdGhpcy5zZXR0aW5ncy5yZXBvcnRGb2xkZXI7XG5cbiAgICAgICAgY29uc3QgcHJvdmlkZXJSZWdpc3RyeSA9IGNyZWF0ZVByb3ZpZGVyUmVnaXN0cnkodGhpcyk7XG4gICAgICAgIGNvbnN0IGFkYXB0ZXIgPSBwcm92aWRlclJlZ2lzdHJ5LmdldEFkYXB0ZXIocHJvdmlkZXIpO1xuXG4gICAgICAgIGxldCBwcm92aWRlck5hbWUgPSBwcm92aWRlcjtcbiAgICAgICAgaWYgKGFkYXB0ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmF0ZWd5ID0gYWRhcHRlci5nZXRSZXBvcnROYW1pbmdTdHJhdGVneSgpO1xuICAgICAgICAgICAgcHJvdmlkZXJOYW1lID0gc3RyYXRlZ3kuZ2V0UHJvdmlkZXJOYW1lKCk7XG4gICAgICAgICAgICBjb25zdCBjb2x1bW5JbmZvID0gc3RyYXRlZ3kuZ2V0UHJvdmlkZXJTcGVjaWZpY0NvbHVtbigpO1xuICAgICAgICAgICAgcmVwb3J0LnNldFByb3ZpZGVyU3BlY2lmaWNDb2x1bW5IZWFkZXIoY29sdW1uSW5mby5oZWFkZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IGAke3JlcG9ydEZvbGRlcn0vJHtwcm92aWRlck5hbWV9YDtcblxuICAgICAgICAvLyBFbnN1cmUgcHJvdmlkZXIgc3ViZm9sZGVyIGV4aXN0c1xuICAgICAgICBjb25zdCBmb2xkZXJSZXN1bHQgPSBhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHMoZm9sZGVyUGF0aCwgdGhpcy5hcHAudmF1bHQpO1xuICAgICAgICBpZiAoIWZvbGRlclJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBvciBhY2Nlc3MgbG9nIGZvbGRlcjogJHtmb2xkZXJQYXRofWAsIGZvbGRlclJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGNyZWF0ZSBsb2cgZmlsZS4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy5cIik7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdlbmVyYXRlIGZpbGVuYW1lIHdpdGggdGltZXN0YW1wIChZWVlZTU1ERC1ISE1NU1MgZm9ybWF0IGZvciBjaHJvbm9sb2dpY2FsIHNvcnRpbmcpXG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCkgLyAxMDAwO1xuICAgICAgICBjb25zdCBkYXRlUHJlZml4ID0gZm9ybWF0VGltZXN0YW1wKG5vdywgXCJwcmVmaXhcIik7IC8vIFlZWVlNTUREXG4gICAgICAgIGNvbnN0IHRpbWVTdHIgPSBmb3JtYXRUaW1lc3RhbXAobm93LCBcInRpbWVcIikucmVwbGFjZSgvOi9nLCBcIlwiKS5yZXBsYWNlKC8gL2csIFwiXCIpOyAvLyBISE1NU1NcbiAgICAgICAgbGV0IGxvZ0ZpbGVQYXRoID0gYCR7Zm9sZGVyUGF0aH0vJHtkYXRlUHJlZml4fS0ke3RpbWVTdHJ9IC0gaW1wb3J0IHJlcG9ydC5tZGA7XG5cbiAgICAgICAgLy8gSGFuZGxlIGR1cGxpY2F0ZXNcbiAgICAgICAgbGV0IGNvdW50ZXIgPSAyO1xuICAgICAgICB3aGlsZSAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobG9nRmlsZVBhdGgpKSB7XG4gICAgICAgICAgICBsb2dGaWxlUGF0aCA9IGAke2ZvbGRlclBhdGh9LyR7ZGF0ZVByZWZpeH0tJHt0aW1lU3RyfS0ke2NvdW50ZXJ9IC0gaW1wb3J0IHJlcG9ydC5tZGA7XG4gICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZW5lcmF0ZSBmcm9udG1hdHRlciB3aXRoIElTTyA4NjAxIGRhdGUgZm9ybWF0IChjb25zaXN0ZW50IHdpdGggY29udmVyc2F0aW9uIGZyb250bWF0dGVyKVxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuICAgICAgICAvLyBTdG9yZSBmaWxlIHN0YXRzIGZvciBkdXBsaWNhdGUgY291bnRpbmdcbiAgICAgICAgaWYgKGZpbGVTdGF0cykge1xuICAgICAgICAgICAgcmVwb3J0LnNldEZpbGVTdGF0cyhmaWxlU3RhdHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RvcmUgYW5hbHlzaXMgaW5mbyBmb3IgY29tcGxldGlvbiBzdGF0c1xuICAgICAgICBpZiAoYW5hbHlzaXNJbmZvKSB7XG4gICAgICAgICAgICByZXBvcnQuc2V0QW5hbHlzaXNJbmZvKGFuYWx5c2lzSW5mbyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0cyA9IHJlcG9ydC5nZXRDb21wbGV0aW9uU3RhdHMoKTtcblxuICAgICAgICAvLyBEZXRlcm1pbmUgd2hpY2ggZmlsZXMgd2VyZSBwcm9jZXNzZWQgdnMgc2tpcHBlZFxuICAgICAgICBjb25zdCBwcm9jZXNzZWRGaWxlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3Qgc2tpcHBlZEZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGlmIChzdGF0cy50b3RhbEZpbGVzID4gMCkge1xuICAgICAgICAgICAgLy8gRmlsZXMgdGhhdCB3ZXJlIGFjdHVhbGx5IHByb2Nlc3NlZCAoaGF2ZSBlbnRyaWVzIGluIHJlcG9ydClcbiAgICAgICAgICAgIHJlcG9ydC5nZXRQcm9jZXNzZWRGaWxlTmFtZXMoKS5mb3JFYWNoKG5hbWUgPT4gcHJvY2Vzc2VkRmlsZXMucHVzaChuYW1lKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBbGwgZmlsZXMgdGhhdCB3ZXJlbid0IHByb2Nlc3NlZCBhcmUgY29uc2lkZXJlZCBza2lwcGVkXG4gICAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXByb2Nlc3NlZEZpbGVzLmluY2x1ZGVzKGZpbGUubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBza2lwcGVkRmlsZXMucHVzaChmaWxlLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBsb2dDb250ZW50ID0gYC0tLVxuaW1wb3J0ZGF0ZTogJHtjdXJyZW50RGF0ZX1cbnByb3ZpZGVyOiAke3Byb3ZpZGVyfVxudG90YWxGaWxlc0FuYWx5emVkOiAke2ZpbGVzLmxlbmd0aH1cbnRvdGFsRmlsZXNQcm9jZXNzZWQ6ICR7cHJvY2Vzc2VkRmlsZXMubGVuZ3RofVxudG90YWxGaWxlc1NraXBwZWQ6ICR7c2tpcHBlZEZpbGVzLmxlbmd0aH1cbnRvdGFsQ29udmVyc2F0aW9uczogJHtzdGF0cy50b3RhbENvbnZlcnNhdGlvbnN9XG50b3RhbENyZWF0ZWQ6ICR7c3RhdHMuY3JlYXRlZH1cbnRvdGFsVXBkYXRlZDogJHtzdGF0cy51cGRhdGVkfVxudG90YWxTa2lwcGVkOiAke3N0YXRzLnNraXBwZWR9XG50b3RhbEZhaWxlZDogJHtzdGF0cy5mYWlsZWR9XG4tLS1cblxuJHtyZXBvcnQuZ2VuZXJhdGVSZXBvcnRDb250ZW50KGZpbGVzLCBwcm9jZXNzZWRGaWxlcywgc2tpcHBlZEZpbGVzLCBhbmFseXNpc0luZm8sIGZpbGVTdGF0cywgaXNTZWxlY3RpdmVJbXBvcnQpfVxuYDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGxvZ0ZpbGVQYXRoLCBsb2dDb250ZW50KTtcbiAgICAgICAgICAgIHJldHVybiBsb2dGaWxlUGF0aDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEZhaWxlZCB0byB3cml0ZSBpbXBvcnQgbG9nIHRvICR7bG9nRmlsZVBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiRnVsbCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJMb2cgY29udGVudCBsZW5ndGg6XCIsIGxvZ0NvbnRlbnQubGVuZ3RoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gY3JlYXRlIGxvZyBmaWxlLiBDaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLlwiKTtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyBpbXBvcnQgY29tcGxldGlvbiBkaWFsb2dcbiAgICAgKi9cbiAgICBwcml2YXRlIHNob3dJbXBvcnRDb21wbGV0aW9uRGlhbG9nKHJlcG9ydDogSW1wb3J0UmVwb3J0LCByZXBvcnRQYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSByZXBvcnQuZ2V0Q29tcGxldGlvblN0YXRzKCk7XG5cbiAgICAgICAgbmV3IEltcG9ydENvbXBsZXRpb25EaWFsb2coXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIHN0YXRzLFxuICAgICAgICAgICAgcmVwb3J0UGF0aFxuICAgICAgICApLm9wZW4oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHcm91cCBzZWxlY3RlZCBjb252ZXJzYXRpb25zIGJ5IHRoZWlyIHNvdXJjZSBmaWxlIGZvciBtdWx0aS1maWxlIGltcG9ydFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ3JvdXBDb252ZXJzYXRpb25zQnlGaWxlKFxuICAgICAgICByZXN1bHQ6IENvbnZlcnNhdGlvblNlbGVjdGlvblJlc3VsdCxcbiAgICAgICAgZmlsZXM6IEZpbGVbXVxuICAgICk6IFByb21pc2U8TWFwPHN0cmluZywgc3RyaW5nW10+PiB7XG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnNCeUZpbGUgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nW10+KCk7XG5cbiAgICAgICAgLy8gV2UgbmVlZCB0byByZS1leHRyYWN0IG1ldGFkYXRhIHRvIGdldCBzb3VyY2UgZmlsZSBpbmZvcm1hdGlvblxuICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHRoZSBzZWxlY3Rpb24gcmVzdWx0IG9ubHkgY29udGFpbnMgSURzXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlclJlZ2lzdHJ5ID0gY3JlYXRlUHJvdmlkZXJSZWdpc3RyeSh0aGlzKTtcbiAgICAgICAgICAgIC8vIEZpeGVkOiBQYXNzIHBsdWdpbiBpbnN0YW5jZSB0byBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGFFeHRyYWN0b3IgPSBuZXcgQ29udmVyc2F0aW9uTWV0YWRhdGFFeHRyYWN0b3IocHJvdmlkZXJSZWdpc3RyeSwgdGhpcyk7XG4gICAgICAgICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5nZXRTdG9yYWdlU2VydmljZSgpO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDb252ZXJzYXRpb25zID0gYXdhaXQgc3RvcmFnZS5zY2FuRXhpc3RpbmdDb252ZXJzYXRpb25zKCk7XG5cbiAgICAgICAgICAgIC8vIFJlLWV4dHJhY3QgbWV0YWRhdGEgd2l0aCBzb3VyY2UgZmlsZSB0cmFja2luZ1xuICAgICAgICAgICAgY29uc3QgZXh0cmFjdGlvblJlc3VsdCA9IGF3YWl0IG1ldGFkYXRhRXh0cmFjdG9yLmV4dHJhY3RNZXRhZGF0YUZyb21NdWx0aXBsZVppcHMoXG4gICAgICAgICAgICAgICAgZmlsZXMsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBMZXQgaXQgYXV0by1kZXRlY3QgcHJvdmlkZXJcbiAgICAgICAgICAgICAgICBleGlzdGluZ0NvbnZlcnNhdGlvbnNcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIEdyb3VwIHNlbGVjdGVkIGNvbnZlcnNhdGlvbnMgYnkgc291cmNlIGZpbGVcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSWRzU2V0ID0gbmV3IFNldChyZXN1bHQuc2VsZWN0ZWRJZHMpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjb252ZXJzYXRpb24gb2YgZXh0cmFjdGlvblJlc3VsdC5jb252ZXJzYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkSWRzU2V0Lmhhcyhjb252ZXJzYXRpb24uaWQpICYmIGNvbnZlcnNhdGlvbi5zb3VyY2VGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVDb252ZXJzYXRpb25zID0gY29udmVyc2F0aW9uc0J5RmlsZS5nZXQoY29udmVyc2F0aW9uLnNvdXJjZUZpbGUpIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICBmaWxlQ29udmVyc2F0aW9ucy5wdXNoKGNvbnZlcnNhdGlvbi5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbnNCeUZpbGUuc2V0KGNvbnZlcnNhdGlvbi5zb3VyY2VGaWxlLCBmaWxlQ29udmVyc2F0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJFcnJvciBncm91cGluZyBjb252ZXJzYXRpb25zIGJ5IGZpbGU6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBhc3NpZ24gYWxsIGNvbnZlcnNhdGlvbnMgdG8gZmlyc3QgZmlsZVxuICAgICAgICAgICAgY29udmVyc2F0aW9uc0J5RmlsZS5zZXQoZmlsZXNbMF0ubmFtZSwgcmVzdWx0LnNlbGVjdGVkSWRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb252ZXJzYXRpb25zQnlGaWxlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNvcnQgZmlsZXMgYnkgdGltZXN0YW1wIChzYW1lIGxvZ2ljIGFzIEltcG9ydFNlcnZpY2UpXG4gICAgICovXG4gICAgcHJpdmF0ZSBzb3J0RmlsZXNCeVRpbWVzdGFtcChmaWxlczogRmlsZVtdKTogRmlsZVtdIHtcbiAgICAgICAgcmV0dXJuIGZpbGVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcFJlZ2V4ID0gLyhcXGR7NH0tXFxkezJ9LVxcZHsyfS1cXGR7Mn0tXFxkezJ9LVxcZHsyfSkvO1xuICAgICAgICAgICAgY29uc3QgZ2V0VGltZXN0YW1wID0gKGZpbGVuYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGZpbGVuYW1lLm1hdGNoKHRpbWVzdGFtcFJlZ2V4KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYE5vIHRpbWVzdGFtcCBmb3VuZCBpbiBmaWxlbmFtZTogJHtmaWxlbmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiMFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hbMV07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGdldFRpbWVzdGFtcChhLm5hbWUpLmxvY2FsZUNvbXBhcmUoZ2V0VGltZXN0YW1wKGIubmFtZSkpO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy91aS9zZXR0aW5ncy10YWIudHNcbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHsgQmFzZVNldHRpbmdzU2VjdGlvbiB9IGZyb20gXCIuL3NldHRpbmdzL2Jhc2Utc2V0dGluZ3Mtc2VjdGlvblwiO1xuaW1wb3J0IHsgU3VwcG9ydFNlY3Rpb24gfSBmcm9tIFwiLi9zZXR0aW5ncy9zdXBwb3J0LXNlY3Rpb25cIjtcbmltcG9ydCB7IEZvbGRlclNldHRpbmdzU2VjdGlvbiB9IGZyb20gXCIuL3NldHRpbmdzL2ZvbGRlci1zZXR0aW5ncy1zZWN0aW9uXCI7XG5pbXBvcnQgeyBEaXNwbGF5U2V0dGluZ3NTZWN0aW9uIH0gZnJvbSBcIi4vc2V0dGluZ3MvZGlzcGxheS1zZXR0aW5ncy1zZWN0aW9uXCI7XG5pbXBvcnQgeyBNZXNzYWdlRGF0ZUZvcm1hdFNlY3Rpb24gfSBmcm9tIFwiLi9zZXR0aW5ncy9tZXNzYWdlLWRhdGUtZm9ybWF0LXNlY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW5TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcHJpdmF0ZSBzZWN0aW9uczogQmFzZVNldHRpbmdzU2VjdGlvbltdID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVTZWN0aW9ucygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZVNlY3Rpb25zKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNlY3Rpb25zID0gW1xuICAgICAgICAgICAgbmV3IFN1cHBvcnRTZWN0aW9uKHRoaXMucGx1Z2luKSxcbiAgICAgICAgICAgIG5ldyBGb2xkZXJTZXR0aW5nc1NlY3Rpb24odGhpcy5wbHVnaW4pLFxuICAgICAgICAgICAgbmV3IERpc3BsYXlTZXR0aW5nc1NlY3Rpb24odGhpcy5wbHVnaW4pLFxuICAgICAgICAgICAgbmV3IE1lc3NhZ2VEYXRlRm9ybWF0U2VjdGlvbih0aGlzLnBsdWdpbilcbiAgICAgICAgXS5zb3J0KChhLCBiKSA9PiBhLm9yZGVyIC0gYi5vcmRlcik7XG5cbiAgICAgICAgLy8gU2V0IHJlZHJhdyBjYWxsYmFjayBmb3IgZWFjaCBzZWN0aW9uXG4gICAgICAgIHRoaXMuc2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcbiAgICAgICAgICAgIHNlY3Rpb24uc2V0UmVkcmF3Q2FsbGJhY2soKCkgPT4gdGhpcy5kaXNwbGF5KCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyU2VjdGlvbnMoY29udGFpbmVyRWwpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcmVuZGVyU2VjdGlvbnMoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiB0aGlzLnNlY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAoc2VjdGlvbi50aXRsZSkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBzZWN0aW9uLnRpdGxlIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBzZWN0aW9uLnJlbmRlcihjb250YWluZXJFbCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy91aS9zZXR0aW5ncy9zdXBwb3J0LXNlY3Rpb24udHNcbmltcG9ydCB7IFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEJhc2VTZXR0aW5nc1NlY3Rpb24gfSBmcm9tIFwiLi9iYXNlLXNldHRpbmdzLXNlY3Rpb25cIjtcbmltcG9ydCB7IGNyZWF0ZUtvZmlTdXBwb3J0Qm94IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMva29maS1zdXBwb3J0LWJveFwiO1xuXG5leHBvcnQgY2xhc3MgU3VwcG9ydFNlY3Rpb24gZXh0ZW5kcyBCYXNlU2V0dGluZ3NTZWN0aW9uIHtcbiAgICByZWFkb25seSB0aXRsZSA9IFwiXHVEODNEXHVEQzlEIFN1cHBvcnQgJiBIZWxwXCI7XG4gICAgcmVhZG9ubHkgb3JkZXIgPSA1O1xuXG4gICAgcmVuZGVyKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBzdXBwb3J0Q29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLXN1cHBvcnQtc2VjdGlvblwiIH0pO1xuXG4gICAgICAgIC8vIFVzZSByZXVzYWJsZSBLby1maSBzdXBwb3J0IGJveCBjb21wb25lbnRcbiAgICAgICAgY3JlYXRlS29maVN1cHBvcnRCb3goc3VwcG9ydENvbnRhaW5lcik7XG5cbiAgICAgICAgLy8gUmVzb3VyY2VzIHNlY3Rpb24gLSBPTkUgU2V0dGluZyB3aXRoIG11bHRpcGxlIGJ1dHRvbnNcbiAgICAgICAgbmV3IFNldHRpbmcoc3VwcG9ydENvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKFwiXHVEODNEXHVEQ0RBIFJlc291cmNlc1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJEb2N1bWVudGF0aW9uLCByZWxlYXNlIG5vdGVzLCBhbmQgY29tbXVuaXR5IGxpbmtzXCIpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidXR0b24pID0+XG4gICAgICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiXHVEODNEXHVEQ0Q2IFJFQURNRVwiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vZ2l0aHViLmNvbS9zdXBlcmtpa2ltL25leHVzLWFpLWNoYXQtaW1wb3J0ZXIvYmxvYi8xLjMuMC9SRUFETUUubWRcIiwgXCJfYmxhbmtcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidXR0b24pID0+XG4gICAgICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiXHVEODNEXHVEQ0REIENoYW5nZWxvZ1wiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vZ2l0aHViLmNvbS9zdXBlcmtpa2ltL25leHVzLWFpLWNoYXQtaW1wb3J0ZXIvYmxvYi8xLjMuMC9SRUxFQVNFX05PVEVTLm1kXCIsIFwiX2JsYW5rXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlx1RDgzRFx1REMxQiBJc3N1ZXNcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oXCJodHRwczovL2dpdGh1Yi5jb20vc3VwZXJraWtpbS9uZXh1cy1haS1jaGF0LWltcG9ydGVyL2lzc3Vlc1wiLCBcIl9ibGFua1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cbiAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJcdUQ4M0RcdURDQUMgRm9ydW1cIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oXCJodHRwczovL2ZvcnVtLm9ic2lkaWFuLm1kL3QvcGx1Z2luLW5leHVzLWFpLWNoYXQtaW1wb3J0ZXItaW1wb3J0LWNoYXRncHQtYW5kLWNsYXVkZS1jb252ZXJzYXRpb25zLXRvLXlvdXItdmF1bHQvNzE2NjRcIiwgXCJfYmxhbmtcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgIH1cbn1cblxuIiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy91aS9zZXR0aW5ncy9iYXNlLXNldHRpbmdzLXNlY3Rpb24udHNcbmltcG9ydCB0eXBlIE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VTZXR0aW5nc1NlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4pIHt9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhpcyBzZWN0aW9uJ3Mgc2V0dGluZ3NcbiAgICAgKi9cbiAgICBhYnN0cmFjdCByZW5kZXIoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB8IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBTZWN0aW9uIHRpdGxlIChvcHRpb25hbClcbiAgICAgKi9cbiAgICBhYnN0cmFjdCByZWFkb25seSB0aXRsZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFNlY3Rpb24gb3JkZXIgKGxvd2VyID0gaGlnaGVyIHVwKVxuICAgICAqL1xuICAgIHJlYWRvbmx5IG9yZGVyOiBudW1iZXIgPSAxMDA7XG5cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayB0byB0cmlnZ2VyIGZ1bGwgcmVkcmF3IHdoZW4gbmVlZGVkIChmb3IgY29uZGl0aW9uYWwgc2VjdGlvbnMpXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHJlZHJhd0NhbGxiYWNrPzogKCkgPT4gdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFNldCByZWRyYXcgY2FsbGJhY2sgZnJvbSBtYWluIHNldHRpbmdzIHRhYlxuICAgICAqL1xuICAgIHNldFJlZHJhd0NhbGxiYWNrKGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVkcmF3Q2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIHJlZHJhdyBvZiBlbnRpcmUgc2V0dGluZ3MgdGFiXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHJlZHJhdygpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMucmVkcmF3Q2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMucmVkcmF3Q2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3VpL3NldHRpbmdzL2ZvbGRlci1zZXR0aW5ncy1zZWN0aW9uLnRzXG5pbXBvcnQgeyBTZXR0aW5nLCBURm9sZGVyLCBUZXh0Q29tcG9uZW50LCBOb3RpY2UsIE1vZGFsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBCYXNlU2V0dGluZ3NTZWN0aW9uIH0gZnJvbSBcIi4vYmFzZS1zZXR0aW5ncy1zZWN0aW9uXCI7XG5pbXBvcnQgeyBGb2xkZXJNaWdyYXRpb25EaWFsb2cgfSBmcm9tIFwiLi4vLi4vZGlhbG9ncy9mb2xkZXItbWlncmF0aW9uLWRpYWxvZ1wiO1xuaW1wb3J0IHsgRm9sZGVyVHJlZUJyb3dzZXJNb2RhbCB9IGZyb20gXCIuLi8uLi9kaWFsb2dzL2ZvbGRlci10cmVlLWJyb3dzZXItbW9kYWxcIjtcbmltcG9ydCB7IHZhbGlkYXRlRm9sZGVyTmVzdGluZyB9IGZyb20gXCIuLi8uLi91dGlscy9mb2xkZXItdmFsaWRhdGlvblwiO1xuaW1wb3J0IHsgbW92ZUFuZE1lcmdlRm9sZGVycywgdHlwZSBGb2xkZXJNZXJnZVJlc3VsdCB9IGZyb20gXCIuLi8uLi91dGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgRm9sZGVyU2V0dGluZ3NTZWN0aW9uIGV4dGVuZHMgQmFzZVNldHRpbmdzU2VjdGlvbiB7XG4gICAgcmVhZG9ubHkgdGl0bGUgPSBcIlx1RDgzRFx1RENDMSBGb2xkZXIgU3RydWN0dXJlXCI7XG4gICAgcmVhZG9ubHkgb3JkZXIgPSAxMDtcblxuICAgIHJlbmRlcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gQ29udmVyc2F0aW9uIEZvbGRlclxuICAgICAgICBsZXQgY29udmVyc2F0aW9uRm9sZGVyVGV4dENvbXBvbmVudDogYW55O1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ29udmVyc2F0aW9uIGZvbGRlclwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJXaGVyZSBpbXBvcnRlZCBjb252ZXJzYXRpb25zIGFyZSBzdG9yZWRcIilcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uRm9sZGVyVGV4dENvbXBvbmVudCA9IHRleHQ7XG5cbiAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIk5leHVzL0NvbnZlcnNhdGlvbnNcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnZlcnNhdGlvbkZvbGRlcik7XG5cbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuYWRkQ2xhc3MoXCJuZXh1cy1mb2xkZXItcGF0aC1pbnB1dFwiKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuYWRkQ2xhc3MoXCJuZXh1cy1jb252ZXJzYXRpb24tZm9sZGVyLWlucHV0XCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBpbnB1dCByZWFkLW9ubHkgLSBvbmx5IEJyb3dzZSBidXR0b24gY2FuIGNoYW5nZSB0aGUgdmFsdWVcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwucmVhZE9ubHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidXR0b24pID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJCcm93c2VcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJCcm93c2UgZm9sZGVycyBvciBjcmVhdGUgYSBuZXcgb25lXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IEZvbGRlclRyZWVCcm93c2VyTW9kYWwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jIChwYXRoOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlciBzZWxlY3RlZCBvciBjcmVhdGVkIGEgZm9sZGVyIC0gaGFuZGxlIHRoZSBjaGFuZ2UgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnZlcnNhdGlvbkZvbGRlclRleHRDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbkZvbGRlclRleHRDb21wb25lbnQuc2V0VmFsdWUocGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZUZvbGRlckNoYW5nZSgnY29udmVyc2F0aW9uRm9sZGVyJywgcGF0aCwgJ2NvbnZlcnNhdGlvbnMnLCBjb252ZXJzYXRpb25Gb2xkZXJUZXh0Q29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwYXRoOiBzdHJpbmcpID0+IHZhbGlkYXRlRm9sZGVyTmVzdGluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbnZlcnNhdGlvbkZvbGRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnZlcnNhdGlvbkZvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwb3J0Rm9sZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdHRhY2htZW50Rm9sZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZXBvcnQgRm9sZGVyXG4gICAgICAgIGxldCByZXBvcnRGb2xkZXJUZXh0Q29tcG9uZW50OiBhbnk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJSZXBvcnRzIGZvbGRlclwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJXaGVyZSBpbXBvcnQgcmVwb3J0cyBhcmUgc3RvcmVkXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlcG9ydEZvbGRlclRleHRDb21wb25lbnQgPSB0ZXh0O1xuXG4gICAgICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJOZXh1cyBSZXBvcnRzXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBvcnRGb2xkZXIpO1xuXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLmFkZENsYXNzKFwibmV4dXMtZm9sZGVyLXBhdGgtaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLmFkZENsYXNzKFwibmV4dXMtcmVwb3J0LWZvbGRlci1pbnB1dFwiKTtcblxuICAgICAgICAgICAgICAgIC8vIE1ha2UgaW5wdXQgcmVhZC1vbmx5IC0gb25seSBCcm93c2UgYnV0dG9uIGNhbiBjaGFuZ2UgdGhlIHZhbHVlXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQnJvd3NlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiQnJvd3NlIGZvbGRlcnMgb3IgY3JlYXRlIGEgbmV3IG9uZVwiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBGb2xkZXJUcmVlQnJvd3Nlck1vZGFsKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3luYyAocGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZXIgc2VsZWN0ZWQgb3IgY3JlYXRlZCBhIGZvbGRlciAtIGhhbmRsZSB0aGUgY2hhbmdlIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXBvcnRGb2xkZXJUZXh0Q29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBvcnRGb2xkZXJUZXh0Q29tcG9uZW50LnNldFZhbHVlKHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVGb2xkZXJDaGFuZ2UoJ3JlcG9ydEZvbGRlcicsIHBhdGgsICdyZXBvcnRzJywgcmVwb3J0Rm9sZGVyVGV4dENvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcG9ydEZvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocGF0aDogc3RyaW5nKSA9PiB2YWxpZGF0ZUZvbGRlck5lc3RpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZXBvcnRGb2xkZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb252ZXJzYXRpb25Gb2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcG9ydEZvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudEZvbGRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQXR0YWNobWVudCBGb2xkZXJcbiAgICAgICAgbGV0IGF0dGFjaG1lbnRGb2xkZXJUZXh0Q29tcG9uZW50OiBhbnk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBdHRhY2htZW50IGZvbGRlclwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJXaGVyZSBhdHRhY2htZW50cyBhcmUgc3RvcmVkIChcdTI2QTBcdUZFMEYgRXhjbHVkZSBmcm9tIHN5bmMgdG8gc2F2ZSBzcGFjZSlcIilcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgYXR0YWNobWVudEZvbGRlclRleHRDb21wb25lbnQgPSB0ZXh0O1xuXG4gICAgICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJOZXh1cy9BdHRhY2htZW50c1wiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudEZvbGRlcik7XG5cbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuYWRkQ2xhc3MoXCJuZXh1cy1mb2xkZXItcGF0aC1pbnB1dFwiKTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuYWRkQ2xhc3MoXCJuZXh1cy1hdHRhY2htZW50LWZvbGRlci1pbnB1dFwiKTtcblxuICAgICAgICAgICAgICAgIC8vIE1ha2UgaW5wdXQgcmVhZC1vbmx5IC0gb25seSBCcm93c2UgYnV0dG9uIGNhbiBjaGFuZ2UgdGhlIHZhbHVlXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQnJvd3NlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiQnJvd3NlIGZvbGRlcnMgb3IgY3JlYXRlIGEgbmV3IG9uZVwiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBGb2xkZXJUcmVlQnJvd3Nlck1vZGFsKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3luYyAocGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZXIgc2VsZWN0ZWQgb3IgY3JlYXRlZCBhIGZvbGRlciAtIGhhbmRsZSB0aGUgY2hhbmdlIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRhY2htZW50Rm9sZGVyVGV4dENvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudEZvbGRlclRleHRDb21wb25lbnQuc2V0VmFsdWUocGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZUZvbGRlckNoYW5nZSgnYXR0YWNobWVudEZvbGRlcicsIHBhdGgsICdhdHRhY2htZW50cycsIGF0dGFjaG1lbnRGb2xkZXJUZXh0Q29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudEZvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocGF0aDogc3RyaW5nKSA9PiB2YWxpZGF0ZUZvbGRlck5lc3RpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhdHRhY2htZW50Rm9sZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBvcnRGb2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnRGb2xkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlRm9sZGVyQ2hhbmdlKFxuICAgICAgICBzZXR0aW5nS2V5OiAnY29udmVyc2F0aW9uRm9sZGVyJyB8ICdyZXBvcnRGb2xkZXInIHwgJ2F0dGFjaG1lbnRGb2xkZXInLFxuICAgICAgICBuZXdQYXRoOiBzdHJpbmcsXG4gICAgICAgIGZvbGRlclR5cGU6IHN0cmluZyxcbiAgICAgICAgdGV4dENvbXBvbmVudDogVGV4dENvbXBvbmVudFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBvbGRQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ0tleV07XG5cbiAgICAgICAgLy8gSWYgcGF0aCBoYXNuJ3QgY2hhbmdlZCwgZG8gbm90aGluZ1xuICAgICAgICBpZiAob2xkUGF0aCA9PT0gbmV3UGF0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgZm9sZGVyIG5lc3RpbmdcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlRm9sZGVyTmVzdGluZyhcbiAgICAgICAgICAgIHNldHRpbmdLZXksXG4gICAgICAgICAgICBuZXdQYXRoLFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyLFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwb3J0Rm9sZGVyLFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudEZvbGRlclxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghdmFsaWRhdGlvbi52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JEaWFsb2coXCJJbnZhbGlkIEZvbGRlciBMb2NhdGlvblwiLCB2YWxpZGF0aW9uLmVycm9yID8/IFwiSW52YWxpZCBmb2xkZXIgY29uZmlndXJhdGlvblwiKTtcbiAgICAgICAgICAgIC8vIFJlc3RvcmUgb2xkIHZhbHVlIGluIHRoZSB0ZXh0IGZpZWxkXG4gICAgICAgICAgICB0ZXh0Q29tcG9uZW50LnNldFZhbHVlKG9sZFBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgb2xkIGZvbGRlciBleGlzdHMgYW5kIGhhcyBjb250ZW50XG4gICAgICAgIGNvbnN0IG9sZEZvbGRlciA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2xkUGF0aCk7XG5cbiAgICAgICAgaWYgKCFvbGRGb2xkZXIgfHwgIShvbGRGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ0tleV0gPSBuZXdQYXRoO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBoYXNDb250ZW50ID0gb2xkRm9sZGVyLmNoaWxkcmVuLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgaWYgKCFoYXNDb250ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nS2V5XSA9IG5ld1BhdGg7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRhcmdldCBmb2xkZXIgZXhpc3RzIGFuZCBpcyBub3QgZW1wdHlcbiAgICAgICAgY29uc3QgbmV3Rm9sZGVyID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdQYXRoKTtcbiAgICAgICAgaWYgKG5ld0ZvbGRlciAmJiBuZXdGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyICYmIG5ld0ZvbGRlci5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dFcnJvckRpYWxvZyhcbiAgICAgICAgICAgICAgICBcIlRhcmdldCBGb2xkZXIgTm90IEVtcHR5XCIsXG4gICAgICAgICAgICAgICAgYFRoZSBmb2xkZXIgXCIke25ld1BhdGh9XCIgYWxyZWFkeSBjb250YWlucyBmaWxlcy5cXG5cXG5UbyBjaGFuZ2UgdGhlIGZvbGRlciBsb2NhdGlvbjpcXG5cdTIwMjIgTW92ZSBleGlzdGluZyBmaWxlcyBtYW51YWxseSBpbiBPYnNpZGlhbiwgT1JcXG5cdTIwMjIgQ2hvb3NlIGFuIGVtcHR5IGZvbGRlciBvciBjcmVhdGUgYSBuZXcgb25lYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIFJlc3RvcmUgb2xkIHZhbHVlIGluIHRoZSB0ZXh0IGZpZWxkXG4gICAgICAgICAgICB0ZXh0Q29tcG9uZW50LnNldFZhbHVlKG9sZFBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2hvdyBtaWdyYXRpb24gZGlhbG9nIC0gdXNlIGVuaGFuY2VkIGRpYWxvZyBmb3IgYXR0YWNobWVudCBhbmQgY29udmVyc2F0aW9uIGZvbGRlcnNcblxuICAgICAgICBjb25zdCB1c2VFbmhhbmNlZERpYWxvZyA9IHNldHRpbmdLZXkgPT09ICdhdHRhY2htZW50Rm9sZGVyJyB8fCBzZXR0aW5nS2V5ID09PSAnY29udmVyc2F0aW9uRm9sZGVyJztcblxuICAgICAgICBpZiAodXNlRW5oYW5jZWREaWFsb2cpIHtcbiAgICAgICAgICAgIC8vIExhenkgaW1wb3J0IHRvIGF2b2lkIGxvYWRpbmcgaXNzdWVzIGR1cmluZyBwbHVnaW4gaW5pdGlhbGl6YXRpb25cbiAgICAgICAgICAgIGltcG9ydChcIi4uLy4uL2RpYWxvZ3MvZW5oYW5jZWQtZm9sZGVyLW1pZ3JhdGlvbi1kaWFsb2dcIikudGhlbigoeyBFbmhhbmNlZEZvbGRlck1pZ3JhdGlvbkRpYWxvZyB9KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlhbG9nID0gbmV3IEVuaGFuY2VkRm9sZGVyTWlncmF0aW9uRGlhbG9nKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbixcbiAgICAgICAgICAgICAgICAgICAgb2xkUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgbmV3UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVyVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgKGFjdGlvbjogJ21vdmUnIHwgJ2tlZXAnIHwgJ2NhbmNlbCcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlTWlncmF0aW9uQWN0aW9uKGFjdGlvbiwgb2xkUGF0aCwgbmV3UGF0aCwgb2xkRm9sZGVyLCBzZXR0aW5nS2V5LCB0ZXh0Q29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZGlhbG9nLm9wZW4oKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBlbmhhbmNlZCBkaWFsb2c6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayB0byBzdGFuZGFyZCBkaWFsb2dcbiAgICAgICAgICAgICAgICBjb25zdCBkaWFsb2cgPSBuZXcgRm9sZGVyTWlncmF0aW9uRGlhbG9nKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbixcbiAgICAgICAgICAgICAgICAgICAgb2xkUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgbmV3UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVyVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgKGFjdGlvbjogJ21vdmUnIHwgJ2tlZXAnIHwgJ2NhbmNlbCcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlTWlncmF0aW9uQWN0aW9uKGFjdGlvbiwgb2xkUGF0aCwgbmV3UGF0aCwgb2xkRm9sZGVyLCBzZXR0aW5nS2V5LCB0ZXh0Q29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZGlhbG9nLm9wZW4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGlhbG9nID0gbmV3IEZvbGRlck1pZ3JhdGlvbkRpYWxvZyhcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbixcbiAgICAgICAgICAgICAgICBvbGRQYXRoLFxuICAgICAgICAgICAgICAgIG5ld1BhdGgsXG4gICAgICAgICAgICAgICAgZm9sZGVyVHlwZSxcbiAgICAgICAgICAgICAgICBhc3luYyAoYWN0aW9uOiAnbW92ZScgfCAna2VlcCcgfCAnY2FuY2VsJykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZU1pZ3JhdGlvbkFjdGlvbihhY3Rpb24sIG9sZFBhdGgsIG5ld1BhdGgsIG9sZEZvbGRlciwgc2V0dGluZ0tleSwgdGV4dENvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGRpYWxvZy5vcGVuKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgbWlncmF0aW9uIGFjdGlvbiAoZXh0cmFjdGVkIGZvciByZXVzZSBiZXR3ZWVuIGRpYWxvZyB0eXBlcylcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZU1pZ3JhdGlvbkFjdGlvbihcbiAgICAgICAgYWN0aW9uOiAnbW92ZScgfCAna2VlcCcgfCAnY2FuY2VsJyxcbiAgICAgICAgb2xkUGF0aDogc3RyaW5nLFxuICAgICAgICBuZXdQYXRoOiBzdHJpbmcsXG4gICAgICAgIG9sZEZvbGRlcjogVEZvbGRlcixcbiAgICAgICAgc2V0dGluZ0tleTogJ2NvbnZlcnNhdGlvbkZvbGRlcicgfCAncmVwb3J0Rm9sZGVyJyB8ICdhdHRhY2htZW50Rm9sZGVyJyxcbiAgICAgICAgdGV4dENvbXBvbmVudDogVGV4dENvbXBvbmVudFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoYWN0aW9uID09PSAnY2FuY2VsJykge1xuICAgICAgICAgICAgLy8gUmVzdG9yZSBvbGQgdmFsdWUgaW4gdGhlIHRleHQgZmllbGRcbiAgICAgICAgICAgIHRleHRDb21wb25lbnQuc2V0VmFsdWUob2xkUGF0aCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWN0aW9uID09PSAnbW92ZScpIHtcbiAgICAgICAgICAgIC8vIE1pZ3JhdGUgZmlsZXMgdXNpbmcgbWVyZ2UgZnVuY3Rpb25cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW92ZUFuZE1lcmdlRm9sZGVycyhvbGRGb2xkZXIsIG5ld1BhdGgsIHRoaXMucGx1Z2luLmFwcC52YXVsdCk7XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgbGlua3MgaWYgbmVlZGVkIChmb3IgY29udmVyc2F0aW9ucyBhbmQgYXR0YWNobWVudHMpXG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdLZXkgPT09ICdjb252ZXJzYXRpb25Gb2xkZXInIHx8IHNldHRpbmdLZXkgPT09ICdhdHRhY2htZW50Rm9sZGVyJykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxpbmtzQWZ0ZXJNb3ZlKHNldHRpbmdLZXksIG9sZFBhdGgsIG5ld1BhdGgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNob3cgcmVzdWx0IHRvIHVzZXJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LnNraXBwZWQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZmVjdCBzdWNjZXNzIC0gc2ltcGxlIG5vdGljZVxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3MDUgRmlsZXMgbW92ZWQgdG8gJHtuZXdQYXRofWApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNvbWUgZmlsZXMgc2tpcHBlZCBvciBlcnJvcnMgLSBzaG93IGRldGFpbGVkIGRpYWxvZ1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dNZXJnZVJlc3VsdERpYWxvZyhyZXN1bHQsIG9sZFBhdGgsIG5ld1BhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoYFtGb2xkZXJTZXR0aW5nc10gTWlncmF0aW9uIGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JEaWFsb2coXCJNaWdyYXRpb24gRmFpbGVkXCIsIGBGYWlsZWQgdG8gbW92ZSBmaWxlczogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHNldHRpbmcgKGZvciBib3RoICdtb3ZlJyBhbmQgJ2tlZXAnKVxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nS2V5XSA9IG5ld1BhdGg7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBsaW5rcyBhZnRlciBtb3ZpbmcgY29udmVyc2F0aW9ucyBvciBhdHRhY2htZW50c1xuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlTGlua3NBZnRlck1vdmUoXG4gICAgICAgIHNldHRpbmdLZXk6ICdjb252ZXJzYXRpb25Gb2xkZXInIHwgJ2F0dGFjaG1lbnRGb2xkZXInLFxuICAgICAgICBvbGRQYXRoOiBzdHJpbmcsXG4gICAgICAgIG5ld1BhdGg6IHN0cmluZ1xuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gTGF6eSBpbXBvcnQgTGlua1VwZGF0ZVNlcnZpY2VcbiAgICAgICAgICAgIGNvbnN0IHsgTGlua1VwZGF0ZVNlcnZpY2UgfSA9IGF3YWl0IGltcG9ydChcIi4uLy4uL3NlcnZpY2VzL2xpbmstdXBkYXRlLXNlcnZpY2VcIik7XG4gICAgICAgICAgICBjb25zdCBsaW5rVXBkYXRlU2VydmljZSA9IG5ldyBMaW5rVXBkYXRlU2VydmljZSh0aGlzLnBsdWdpbik7XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5nS2V5ID09PSAnY29udmVyc2F0aW9uRm9sZGVyJykge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjb252ZXJzYXRpb24gbGlua3MgaW4gcmVwb3J0cyBBTkQgYXJ0aWZhY3RzXG4gICAgICAgICAgICAgICAgYXdhaXQgbGlua1VwZGF0ZVNlcnZpY2UudXBkYXRlQ29udmVyc2F0aW9uTGlua3Mob2xkUGF0aCwgbmV3UGF0aCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdLZXkgPT09ICdhdHRhY2htZW50Rm9sZGVyJykge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBhdHRhY2htZW50IGxpbmtzIGluIGNvbnZlcnNhdGlvbnNcbiAgICAgICAgICAgICAgICBhd2FpdCBsaW5rVXBkYXRlU2VydmljZS51cGRhdGVBdHRhY2htZW50TGlua3Mob2xkUGF0aCwgbmV3UGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoYFtGb2xkZXJTZXR0aW5nc10gRmFpbGVkIHRvIHVwZGF0ZSBsaW5rczpgLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI2QTBcdUZFMEYgRmlsZXMgbW92ZWQgYnV0IHNvbWUgbGlua3MgbWF5IG5vdCBoYXZlIGJlZW4gdXBkYXRlZGApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyBkaWFsb2cgd2l0aCBtZXJnZSByZXN1bHQgZGV0YWlscyB3aGVuIGZpbGVzIHdlcmUgc2tpcHBlZCBvciBlcnJvcnMgb2NjdXJyZWRcbiAgICAgKi9cbiAgICBwcml2YXRlIHNob3dNZXJnZVJlc3VsdERpYWxvZyhyZXN1bHQ6IEZvbGRlck1lcmdlUmVzdWx0LCBfb2xkUGF0aDogc3RyaW5nLCBfbmV3UGF0aDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMucGx1Z2luLmFwcCk7XG4gICAgICAgIG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkZvbGRlciBNaWdyYXRpb24gUmVzdWx0XCIpO1xuXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSBtb2RhbDtcblxuICAgICAgICAvLyBTdW1tYXJ5XG4gICAgICAgIGNvbnN0IHN1bW1hcnkgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLW1lcmdlLXN1bW1hcnlcIiB9KTtcbiAgICAgICAgc3VtbWFyeS5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJNaWdyYXRpb24gU3VtbWFyeVwiIH0pO1xuXG4gICAgICAgIGNvbnN0IHN0YXRzID0gc3VtbWFyeS5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtbWVyZ2Utc3RhdHNcIiB9KTtcbiAgICAgICAgc3RhdHMuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogYFx1MjcwNSBTdWNjZXNzZnVsbHkgbW92ZWQ6ICR7cmVzdWx0Lm1vdmVkfSBmaWxlKHMpYCB9KTtcblxuICAgICAgICBpZiAocmVzdWx0LnNraXBwZWQgPiAwKSB7XG4gICAgICAgICAgICBzdGF0cy5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI2QTBcdUZFMEYgU2tpcHBlZCAoYWxyZWFkeSBleGlzdCk6ICR7cmVzdWx0LnNraXBwZWR9IGZpbGUocylgLFxuICAgICAgICAgICAgICAgIGNsczogXCJuZXh1cy1tZXJnZS13YXJuaW5nXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3VsdC5lcnJvcnMgPiAwKSB7XG4gICAgICAgICAgICBzdGF0cy5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTI3NEMgRXJyb3JzOiAke3Jlc3VsdC5lcnJvcnN9IGZpbGUocylgLFxuICAgICAgICAgICAgICAgIGNsczogXCJuZXh1cy1tZXJnZS1lcnJvclwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV4cGxhbmF0aW9uXG4gICAgICAgIGNvbnN0IGV4cGxhbmF0aW9uID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy1tZXJnZS1leHBsYW5hdGlvblwiIH0pO1xuICAgICAgICBleHBsYW5hdGlvbi5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAgICAgdGV4dDogXCJGaWxlcyB0aGF0IGFscmVhZHkgZXhpc3RlZCBpbiB0aGUgZGVzdGluYXRpb24gd2VyZSBub3Qgb3ZlcndyaXR0ZW4gdG8gcHJlc2VydmUgeW91ciBkYXRhLlwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVycm9yIGRldGFpbHMgaWYgYW55XG4gICAgICAgIGlmIChyZXN1bHQuZXJyb3JEZXRhaWxzICYmIHJlc3VsdC5lcnJvckRldGFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy1tZXJnZS1lcnJvcnNcIiB9KTtcbiAgICAgICAgICAgIGVycm9yU2VjdGlvbi5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJFcnJvciBEZXRhaWxzOlwiIH0pO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JMaXN0ID0gZXJyb3JTZWN0aW9uLmNyZWF0ZUVsKFwidWxcIik7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVycm9yIG9mIHJlc3VsdC5lcnJvckRldGFpbHMpIHtcbiAgICAgICAgICAgICAgICBlcnJvckxpc3QuY3JlYXRlRWwoXCJsaVwiLCB7IHRleHQ6IGVycm9yIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2xvc2UgYnV0dG9uXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiT0tcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG1vZGFsLmNsb3NlKCkpO1xuXG4gICAgICAgIC8vIEFkZCBzdHlsZXNcbiAgICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgICAgIC5uZXh1cy1tZXJnZS1zdW1tYXJ5IHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLm5leHVzLW1lcmdlLXN0YXRzIHAge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogOHB4IDA7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLm5leHVzLW1lcmdlLXdhcm5pbmcge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXdhcm5pbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLm5leHVzLW1lcmdlLWVycm9yIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubmV4dXMtbWVyZ2UtZXhwbGFuYXRpb24ge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDE2cHggMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5uZXh1cy1tZXJnZS1lcnJvcnMge1xuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDE2cHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubmV4dXMtbWVyZ2UtZXJyb3JzIHVsIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDhweCAwO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5uZXh1cy1tZXJnZS1lcnJvcnMgbGkge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogNHB4IDA7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LW1vbm9zcGFjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG5cbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd0Vycm9yRGlhbG9nKHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLnBsdWdpbi5hcHApO1xuICAgICAgICBtb2RhbC50aXRsZUVsLnNldFRleHQodGl0bGUpO1xuXG4gICAgICAgIG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgICAgICAgIGNsczogXCJuZXh1cy1lcnJvci1tZXNzYWdlXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gbW9kYWwuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1lbmRcIjtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9IFwiMWVtXCI7XG5cbiAgICAgICAgY29uc3Qgb2tCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdGV4dDogXCJPS1wiLFxuICAgICAgICAgICAgY2xzOiBcIm1vZC1jdGFcIlxuICAgICAgICB9KTtcbiAgICAgICAgb2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG1vZGFsLmNsb3NlKCkpO1xuXG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9XG59XG5cbiIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuXG4vLyBzcmMvZGlhbG9ncy9mb2xkZXItbWlncmF0aW9uLWRpYWxvZy50c1xuaW1wb3J0IHsgTW9kYWwsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuXG4vKipcbiAqIERpYWxvZyB0byBhc2sgdXNlciBpZiB0aGV5IHdhbnQgdG8gbWlncmF0ZSBmaWxlcyB3aGVuIGNoYW5naW5nIGZvbGRlciBsb2NhdGlvblxuICovXG5leHBvcnQgY2xhc3MgRm9sZGVyTWlncmF0aW9uRGlhbG9nIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgb25Db21wbGV0ZTogKGFjdGlvbjogJ21vdmUnIHwgJ2tlZXAnIHwgJ2NhbmNlbCcpID0+IFByb21pc2U8dm9pZD47XG4gICAgcHJpdmF0ZSBvbGRQYXRoOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBuZXdQYXRoOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBmb2xkZXJUeXBlOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luLFxuICAgICAgICBvbGRQYXRoOiBzdHJpbmcsXG4gICAgICAgIG5ld1BhdGg6IHN0cmluZyxcbiAgICAgICAgZm9sZGVyVHlwZTogc3RyaW5nLFxuICAgICAgICBvbkNvbXBsZXRlOiAoYWN0aW9uOiAnbW92ZScgfCAna2VlcCcgfCAnY2FuY2VsJykgPT4gUHJvbWlzZTx2b2lkPlxuICAgICkge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICAgICAgdGhpcy5vbGRQYXRoID0gb2xkUGF0aDtcbiAgICAgICAgdGhpcy5uZXdQYXRoID0gbmV3UGF0aDtcbiAgICAgICAgdGhpcy5mb2xkZXJUeXBlID0gZm9sZGVyVHlwZTtcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlID0gb25Db21wbGV0ZTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICAvLyBUaXRsZVxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IFxuICAgICAgICAgICAgdGV4dDogXCJNb3ZlIEV4aXN0aW5nIEZpbGVzP1wiLFxuICAgICAgICAgICAgY2xzOiBcIm5leHVzLW1pZ3JhdGlvbi10aXRsZVwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE1lc3NhZ2VcbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtbWlncmF0aW9uLW1lc3NhZ2VcIiB9KTtcbiAgICAgICAgXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgXG4gICAgICAgICAgICB0ZXh0OiBgWW91IGFyZSBjaGFuZ2luZyB0aGUgJHt0aGlzLmZvbGRlclR5cGV9IGZvbGRlciBsb2NhdGlvbjpgIFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBwYXRoQ29udGFpbmVyID0gbWVzc2FnZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtbWlncmF0aW9uLXBhdGhzXCIgfSk7XG4gICAgICAgIHBhdGhDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBcbiAgICAgICAgICAgIHRleHQ6IGBGcm9tOiAke3RoaXMub2xkUGF0aH1gLFxuICAgICAgICAgICAgY2xzOiBcIm5leHVzLW1pZ3JhdGlvbi1wYXRoLW9sZFwiXG4gICAgICAgIH0pO1xuICAgICAgICBwYXRoQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgXG4gICAgICAgICAgICB0ZXh0OiBgVG86ICR7dGhpcy5uZXdQYXRofWAsXG4gICAgICAgICAgICBjbHM6IFwibmV4dXMtbWlncmF0aW9uLXBhdGgtbmV3XCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5jcmVhdGVFbChcInBcIiwgeyBcbiAgICAgICAgICAgIHRleHQ6IFwiRG8geW91IHdhbnQgdG8gbW92ZSBleGlzdGluZyBmaWxlcyB0byB0aGUgbmV3IGxvY2F0aW9uP1wiIFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBXYXJuaW5nIGJveFxuICAgICAgICBjb25zdCB3YXJuaW5nQm94ID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy1taWdyYXRpb24td2FybmluZ1wiIH0pO1xuICAgICAgICB3YXJuaW5nQm94LmNyZWF0ZUVsKFwic3Ryb25nXCIsIHsgdGV4dDogXCJcdTI2QTBcdUZFMEYgSW1wb3J0YW50OlwiIH0pO1xuICAgICAgICB3YXJuaW5nQm94LmNyZWF0ZUVsKFwicFwiLCB7IFxuICAgICAgICAgICAgdGV4dDogXCJJZiB5b3UgY2hvb3NlICdObycsIGV4aXN0aW5nIGZpbGVzIHdpbGwgcmVtYWluIGluIHRoZSBvbGQgbG9jYXRpb24gYW5kIHdpbGwgbm90IGJlIGltcGFjdGVkIGJ5IGZ1dHVyZSB1cGRhdGVzLlwiIFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBCdXR0b25zICgzIG9wdGlvbnM6IENhbmNlbCwgS2VlcCwgTW92ZSlcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy1taWdyYXRpb24tYnV0dG9uc1wiIH0pO1xuXG4gICAgICAgIC8vIENhbmNlbCBidXR0b24gKGxlZnQpXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIkNhbmNlbFwiLFxuICAgICAgICAgICAgY2xzOiBcIm5leHVzLW1pZ3JhdGlvbi1idXR0b24tY2FuY2VsXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9uQ29tcGxldGUoJ2NhbmNlbCcpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYENoYW5nZSBjYW5jZWxsZWQuIEZvbGRlciBzZXR0aW5nIHJldmVydGVkLmApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gcmV2ZXJ0IHNldHRpbmc6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gS2VlcCBidXR0b24gKG1pZGRsZSlcbiAgICAgICAgY29uc3Qga2VlcEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIk5vLCBrZWVwIGZpbGVzIGluIG9sZCBsb2NhdGlvblwiLFxuICAgICAgICAgICAgY2xzOiBcIm5leHVzLW1pZ3JhdGlvbi1idXR0b24ta2VlcFwiXG4gICAgICAgIH0pO1xuICAgICAgICBrZWVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25Db21wbGV0ZSgna2VlcCcpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZvbGRlciBzZXR0aW5nIHVwZGF0ZWQuIEZpbGVzIHJlbWFpbiBpbiAke3RoaXMub2xkUGF0aH1gKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHVwZGF0ZSBzZXR0aW5nOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE1vdmUgYnV0dG9uIChyaWdodCwgcHJpbWFyeSBhY3Rpb24pXG4gICAgICAgIGNvbnN0IG1vdmVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdGV4dDogXCJZZXMsIG1vdmUgZmlsZXNcIixcbiAgICAgICAgICAgIGNsczogXCJtb2QtY3RhIG5leHVzLW1pZ3JhdGlvbi1idXR0b24tbW92ZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25Db21wbGV0ZSgnbW92ZScpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZpbGVzIG1vdmVkIHRvICR7dGhpcy5uZXdQYXRofWApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gbW92ZSBmaWxlczogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgc3R5bGVzXG4gICAgICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLXRpdGxlIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxZW07XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLW1pZ3JhdGlvbi1tZXNzYWdlIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxLjVlbTtcbiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS42O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLXBhdGhzIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMWVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMWVtIDA7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LW1vbm9zcGFjZSk7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLW1pZ3JhdGlvbi1wYXRoLW9sZCB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuNWVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLXBhdGgtbmV3IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLXdhcm5pbmcge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3ItaG92ZXIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tdGV4dC1lcnJvcik7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMWVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEuNWVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLW1pZ3JhdGlvbi13YXJuaW5nIHN0cm9uZyB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41ZW07XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLXdhcm5pbmcgcCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1taWdyYXRpb24tYnV0dG9ucyB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLWJ1dHRvbnMgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtbWlncmF0aW9uLWJ1dHRvbi1jYW5jZWwge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1taWdyYXRpb24tYnV0dG9uLWtlZXAge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLW1pZ3JhdGlvbi1idXR0b24tbW92ZSB7XG4gICAgICAgICAgICAgICAgLyogVXNlcyBtb2QtY3RhIGNsYXNzIGZvciBwcmltYXJ5IHN0eWxpbmcgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG4iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3VpL3NldHRpbmdzL2Rpc3BsYXktc2V0dGluZ3Mtc2VjdGlvbi50c1xuaW1wb3J0IHsgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQmFzZVNldHRpbmdzU2VjdGlvbiB9IGZyb20gXCIuL2Jhc2Utc2V0dGluZ3Mtc2VjdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgRGlzcGxheVNldHRpbmdzU2VjdGlvbiBleHRlbmRzIEJhc2VTZXR0aW5nc1NlY3Rpb24ge1xuICAgIHJlYWRvbmx5IHRpdGxlID0gXCJcdUQ4M0RcdURDQzUgRGF0ZSBQcmVmaXhcIjtcbiAgICByZWFkb25seSBvcmRlciA9IDIwO1xuXG4gICAgcmVuZGVyKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICAvLyBBZGQgY3VzdG9tIHN0eWxpbmcgZm9yIGJldHRlciByZWFkYWJpbGl0eVxuICAgICAgICBjb25zdCBzZWN0aW9uQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiBcIm5leHVzLWRhdGUtcHJlZml4LXNlY3Rpb25cIiB9KTtcblxuICAgICAgICAvLyBBZGQgRGF0ZSBQcmVmaXggd2l0aCBpbmxpbmUgZm9ybWF0IGRyb3Bkb3duXG4gICAgICAgIGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhzZWN0aW9uQ29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBZGQgZGF0ZSBwcmVmaXggdG8gZmlsZW5hbWVzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkFkZCBjcmVhdGlvbiBkYXRlIGFzIGEgcHJlZml4IHRvIGNvbnZlcnNhdGlvbiBmaWxlbmFtZXNcIik7XG5cbiAgICAgICAgLy8gQWRkIGRyb3Bkb3duIEJFRk9SRSB0b2dnbGUgKHNob3duIG9ubHkgd2hlbiBlbmFibGVkKVxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWRkRGF0ZVByZWZpeCkge1xuICAgICAgICAgICAgc2V0dGluZy5jb250cm9sRWwuY3JlYXRlU3Bhbih7IFxuICAgICAgICAgICAgICAgIHRleHQ6IFwiU2VsZWN0IGRhdGUgZm9ybWF0OiBcIixcbiAgICAgICAgICAgICAgICBjbHM6IFwiZGF0ZS1mb3JtYXQtbGFiZWxcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNldHRpbmcuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJZWVlZLU1NLUREXCIsIFwiWVlZWS1NTS1ERFwiKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiWVlZWU1NRERcIiwgXCJZWVlZTU1ERFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF0ZUZvcm1hdClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFwiWVlZWS1NTS1ERFwiIHx8IHZhbHVlID09PSBcIllZWVlNTUREXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0ID0gdmFsdWUgYXMgXCJZWVlZLU1NLUREXCIgfCBcIllZWVlNTUREXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIHRvZ2dsZSBBRlRFUiBkcm9wZG93blxuICAgICAgICBzZXR0aW5nLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFkZERhdGVQcmVmaXgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZGREYXRlUHJlZml4ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZHJhdygpOyAvLyBUcmlnZ2VyIHJlZHJhdyB0byBzaG93L2hpZGUgZGF0ZSBmb3JtYXQgZHJvcGRvd25cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cbn1cblxuIiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy91aS9zZXR0aW5ncy9tZXNzYWdlLWRhdGUtZm9ybWF0LXNlY3Rpb24udHNcbmltcG9ydCB7IFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEJhc2VTZXR0aW5nc1NlY3Rpb24gfSBmcm9tIFwiLi9iYXNlLXNldHRpbmdzLXNlY3Rpb25cIjtcbmltcG9ydCB7IE1FU1NBR0VfVElNRVNUQU1QX0ZPUk1BVFMgfSBmcm9tIFwiLi4vLi4vY29uZmlnL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZm9ybWF0TWVzc2FnZVRpbWVzdGFtcCB9IGZyb20gXCIuLi8uLi91dGlsc1wiO1xuaW1wb3J0IHR5cGUgeyBNZXNzYWdlVGltZXN0YW1wRm9ybWF0IH0gZnJvbSBcIi4uLy4uL3R5cGVzL3BsdWdpblwiO1xuXG5leHBvcnQgY2xhc3MgTWVzc2FnZURhdGVGb3JtYXRTZWN0aW9uIGV4dGVuZHMgQmFzZVNldHRpbmdzU2VjdGlvbiB7XG4gICAgcmVhZG9ubHkgdGl0bGUgPSBcIlx1RDgzRFx1RENDNSBNZXNzYWdlIERhdGUgRm9ybWF0XCI7XG4gICAgcmVhZG9ubHkgb3JkZXIgPSAyMTtcblxuICAgIHJlbmRlcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gQWRkIGN1c3RvbSBzdHlsaW5nIGZvciBiZXR0ZXIgcmVhZGFiaWxpdHlcbiAgICAgICAgY29uc3Qgc2VjdGlvbkNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy1tZXNzYWdlLWRhdGUtc2VjdGlvblwiIH0pO1xuXG4gICAgICAgIC8vIEN1c3RvbSBNZXNzYWdlIFRpbWVzdGFtcCBGb3JtYXRcbiAgICAgICAgbmV3IFNldHRpbmcoc2VjdGlvbkNvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIG1lc3NhZ2UgdGltZXN0YW1wIGZvcm1hdFwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJPdmVycmlkZSB0aGUgZGVmYXVsdCBsb2NhbGUtYmFzZWQgdGltZXN0YW1wIGZvcm1hdCBpbiBtZXNzYWdlIGhlYWRlcnMuIFdoZW4gZGlzYWJsZWQsIHRpbWVzdGFtcHMgZm9sbG93IE9ic2lkaWFuJ3MgbGFuZ3VhZ2Ugc2V0dGluZy4gSWYgT2JzaWRpYW4gaXMgc2V0IHRvIGVuZ2xpc2gsIHRoZSBVUyBmb3JtYXQgKFlZWVkvREQvTU0pIGlzIGVuZm9yY2VkLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlQ3VzdG9tTWVzc2FnZVRpbWVzdGFtcEZvcm1hdClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlQ3VzdG9tTWVzc2FnZVRpbWVzdGFtcEZvcm1hdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZHJhdygpOyAvLyBUcmlnZ2VyIHJlZHJhdyB0byBzaG93L2hpZGUgZm9ybWF0IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIC8vIE1lc3NhZ2UgVGltZXN0YW1wIEZvcm1hdCBEcm9wZG93biAob25seSBzaG93biBpZiBjdXN0b20gZm9ybWF0IGlzIGVuYWJsZWQpXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VDdXN0b21NZXNzYWdlVGltZXN0YW1wRm9ybWF0KSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhzZWN0aW9uQ29udGFpbmVyKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiVGltZXN0YW1wIGZvcm1hdFwiKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIHRoZSBmb3JtYXQgZm9yIG1lc3NhZ2UgdGltZXN0YW1wcyBpbiBjb252ZXJzYXRpb24gbm90ZXNcIilcbiAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBhbGwgYXZhaWxhYmxlIGZvcm1hdHNcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoTUVTU0FHRV9USU1FU1RBTVBfRk9STUFUUykuZm9yRWFjaCgoW2tleSwgY29uZmlnXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKGtleSwgY29uZmlnLmxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXNzYWdlVGltZXN0YW1wRm9ybWF0KVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1lc3NhZ2VUaW1lc3RhbXBGb3JtYXQgPSB2YWx1ZSBhcyBNZXNzYWdlVGltZXN0YW1wRm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHByZXZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRpbWVzdGFtcFByZXZpZXcocHJldmlld0NvbnRhaW5lciwgdmFsdWUgYXMgTWVzc2FnZVRpbWVzdGFtcEZvcm1hdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUHJldmlldyBjb250YWluZXIgQUZURVIgdGhlIGRyb3Bkb3duIHNldHRpbmdcbiAgICAgICAgICAgIGNvbnN0IHByZXZpZXdDb250YWluZXIgPSBzZWN0aW9uQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJuZXh1cy10aW1lc3RhbXAtcHJldmlld1wiIH0pO1xuXG4gICAgICAgICAgICAvLyBJbml0aWFsIHByZXZpZXdcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGltZXN0YW1wUHJldmlldyhwcmV2aWV3Q29udGFpbmVyLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXNzYWdlVGltZXN0YW1wRm9ybWF0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aW1lc3RhbXAgZm9ybWF0IHByZXZpZXdcbiAgICAgKi9cbiAgICBwcml2YXRlIHVwZGF0ZVRpbWVzdGFtcFByZXZpZXcoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZm9ybWF0OiBNZXNzYWdlVGltZXN0YW1wRm9ybWF0KTogdm9pZCB7XG4gICAgICAgIC8vIFVzZSB0aGUgZXhpc3RpbmcgZm9ybWF0TWVzc2FnZVRpbWVzdGFtcCB1dGlsaXR5IGZ1bmN0aW9uXG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCkgLyAxMDAwO1xuICAgICAgICBjb25zdCBwcmV2aWV3ID0gZm9ybWF0TWVzc2FnZVRpbWVzdGFtcChub3csIGZvcm1hdCk7XG5cbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHByZXZpZXcgd2l0aCBiZXR0ZXIgc3R5bGluZ1xuICAgICAgICBjb25zdCBwcmV2aWV3TGluZSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwibmV4dXMtcHJldmlldy1saW5lXCIgfSk7XG4gICAgICAgIHByZXZpZXdMaW5lLmNyZWF0ZUVsKFwic3Ryb25nXCIsIHsgdGV4dDogXCJQcmV2aWV3OiBcIiB9KTtcbiAgICAgICAgcHJldmlld0xpbmUuY3JlYXRlRWwoXCJjb2RlXCIsIHsgdGV4dDogcHJldmlldywgY2xzOiBcIm5leHVzLXByZXZpZXctY29kZVwiIH0pO1xuXG4gICAgICAgIC8vIEFkZCBmb3JtYXQgZGVzY3JpcHRpb25cbiAgICAgICAgY29uc3QgY29uZmlnID0gTUVTU0FHRV9USU1FU1RBTVBfRk9STUFUU1tmb3JtYXRdO1xuICAgICAgICBpZiAoY29uZmlnKSB7XG4gICAgICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICAgICAgICAgIHRleHQ6IGNvbmZpZy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBjbHM6IFwibmV4dXMtZm9ybWF0LWRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL2NvbW1hbmRzL2NvbW1hbmQtcmVnaXN0cnkudHNcbmltcG9ydCB7IE1vZGFsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kUmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luKSB7fVxuXG4gICAgcmVnaXN0ZXJDb21tYW5kcygpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJuZXh1cy1haS1jaGF0LWltcG9ydGVyLXNlbGVjdC16aXBcIixcbiAgICAgICAgICAgIG5hbWU6IFwiSW1wb3J0IEFJIGNvbnZlcnNhdGlvbnNcIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBuZXcgcHJvdmlkZXIgc2VsZWN0aW9uIHdvcmtmbG93XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2hvd1Byb3ZpZGVyU2VsZWN0aW9uRGlhbG9nKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd1Jlc2V0Q29uZmlybWF0aW9uKCkge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLnBsdWdpbi5hcHApO1xuICAgICAgICBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiVGhpcyB3aWxsIHJlc2V0IGFsbCBpbXBvcnQgY2F0YWxvZ3MuIFRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUuXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYnV0dG9uRGl2ID0gbW9kYWwuY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgICAgIGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgYnV0dG9uRGl2XG4gICAgICAgICAgICAuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG1vZGFsLmNsb3NlKCkpO1xuICAgICAgICBcbiAgICAgICAgYnV0dG9uRGl2XG4gICAgICAgICAgICAuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlJlc2V0XCIsIGNsczogXCJtb2Qtd2FybmluZ1wiIH0pXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5yZXNldENhdGFsb2dzKCk7XG4gICAgICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH1cbn0iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL2V2ZW50cy9ldmVudC1oYW5kbGVycy50c1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcblxuZXhwb3J0IGNsYXNzIEV2ZW50SGFuZGxlcnMge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luKSB7fVxuXG4gICAgcmVnaXN0ZXJFdmVudHMoKSB7XG4gICAgICAgIC8vIEhhbmRsZSBmaWxlIGRlbGV0aW9uIC0gcmVtb3ZlIGZyb20gY29udmVyc2F0aW9uIGNhdGFsb2dcbiAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5vbihcImRlbGV0ZVwiLCBhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZ2V0RmlsZVNlcnZpY2UoKS5oYW5kbGVDb252ZXJzYXRpb25GaWxlRGVsZXRpb24oZmlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjbGVhbnVwKCkge1xuICAgICAgICAvLyBObyBjbGVhbnVwIG5lZWRlZCAtIE9ic2lkaWFuIGhhbmRsZXMgZXZlbnQgdW5yZWdpc3RyYXRpb25cbiAgICB9XG59IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy9zZXJ2aWNlcy9pbXBvcnQtc2VydmljZS50c1xuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgSlNaaXAgZnJvbSBcImpzemlwXCI7XG5pbXBvcnQgeyBDdXN0b21FcnJvciB9IGZyb20gXCIuLi90eXBlcy9wbHVnaW5cIjtcbmltcG9ydCB7IGdldEZpbGVIYXNoLCBlbnN1cmVGb2xkZXJFeGlzdHMsIGZvcm1hdFRpbWVzdGFtcCB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgc2hvd0RpYWxvZyB9IGZyb20gXCIuLi9kaWFsb2dzXCI7XG5pbXBvcnQgeyBJbXBvcnRSZXBvcnQgfSBmcm9tIFwiLi4vbW9kZWxzL2ltcG9ydC1yZXBvcnRcIjtcbmltcG9ydCB7IENvbnZlcnNhdGlvblByb2Nlc3NvciB9IGZyb20gXCIuL2NvbnZlcnNhdGlvbi1wcm9jZXNzb3JcIjtcbmltcG9ydCB7IE5leHVzQWlDaGF0SW1wb3J0ZXJFcnJvciB9IGZyb20gXCIuLi9tb2RlbHMvZXJyb3JzXCI7XG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlclJlZ2lzdHJ5IH0gZnJvbSBcIi4uL3Byb3ZpZGVycy9wcm92aWRlci1yZWdpc3RyeVwiO1xuaW1wb3J0IHsgUHJvdmlkZXJSZWdpc3RyeSB9IGZyb20gXCIuLi9wcm92aWRlcnMvcHJvdmlkZXItYWRhcHRlclwiO1xuaW1wb3J0IHsgSW1wb3J0UHJvZ3Jlc3NNb2RhbCwgSW1wb3J0UHJvZ3Jlc3NDYWxsYmFjayB9IGZyb20gXCIuLi91aS9pbXBvcnQtcHJvZ3Jlc3MtbW9kYWxcIjtcbmltcG9ydCB7IEF0dGFjaG1lbnRNYXBCdWlsZGVyLCBBdHRhY2htZW50TWFwIH0gZnJvbSBcIi4vYXR0YWNobWVudC1tYXAtYnVpbGRlclwiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuXG5leHBvcnQgY2xhc3MgSW1wb3J0U2VydmljZSB7XG4gICAgcHJpdmF0ZSBpbXBvcnRSZXBvcnQ6IEltcG9ydFJlcG9ydCA9IG5ldyBJbXBvcnRSZXBvcnQoKTtcbiAgICBwcml2YXRlIGNvbnZlcnNhdGlvblByb2Nlc3NvcjogQ29udmVyc2F0aW9uUHJvY2Vzc29yO1xuICAgIHByaXZhdGUgcHJvdmlkZXJSZWdpc3RyeTogUHJvdmlkZXJSZWdpc3RyeTtcbiAgICBwcml2YXRlIGF0dGFjaG1lbnRNYXBCdWlsZGVyOiBBdHRhY2htZW50TWFwQnVpbGRlcjtcbiAgICBwcml2YXRlIGN1cnJlbnRBdHRhY2htZW50TWFwOiBBdHRhY2htZW50TWFwIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBjdXJyZW50WmlwczogSlNaaXBbXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wcm92aWRlclJlZ2lzdHJ5ID0gY3JlYXRlUHJvdmlkZXJSZWdpc3RyeShwbHVnaW4pO1xuICAgICAgICB0aGlzLmF0dGFjaG1lbnRNYXBCdWlsZGVyID0gbmV3IEF0dGFjaG1lbnRNYXBCdWlsZGVyKHBsdWdpbi5sb2dnZXIpO1xuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvblByb2Nlc3NvciA9IG5ldyBDb252ZXJzYXRpb25Qcm9jZXNzb3IocGx1Z2luLCB0aGlzLnByb3ZpZGVyUmVnaXN0cnkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNlbGVjdFppcEZpbGUoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBpbnB1dC50eXBlID0gXCJmaWxlXCI7XG4gICAgICAgIGlucHV0LmFjY2VwdCA9IFwiLnppcFwiO1xuICAgICAgICBpbnB1dC5tdWx0aXBsZSA9IHRydWU7XG4gICAgICAgIGlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbSgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuZmlsZXMgfHwgW10pO1xuICAgICAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRGaWxlcyA9IHRoaXMuc29ydEZpbGVzQnlUaW1lc3RhbXAoZmlsZXMpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBzb3J0ZWRGaWxlcykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVppcEZpbGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpbnB1dC5jbGljaygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc29ydEZpbGVzQnlUaW1lc3RhbXAoZmlsZXM6IEZpbGVbXSk6IEZpbGVbXSB7XG4gICAgICAgIHJldHVybiBmaWxlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aW1lc3RhbXBSZWdleCA9IC8oXFxkezR9LVxcZHsyfS1cXGR7Mn0tXFxkezJ9LVxcZHsyfS1cXGR7Mn0pLztcbiAgICAgICAgICAgIGNvbnN0IGdldFRpbWVzdGFtcCA9IChmaWxlbmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBmaWxlbmFtZS5tYXRjaCh0aW1lc3RhbXBSZWdleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIud2FybihgTm8gdGltZXN0YW1wIGZvdW5kIGluIGZpbGVuYW1lOiAke2ZpbGVuYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIwXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaFsxXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gZ2V0VGltZXN0YW1wKGEubmFtZSkubG9jYWxlQ29tcGFyZShnZXRUaW1lc3RhbXAoYi5uYW1lKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZVppcEZpbGUoZmlsZTogRmlsZSwgZm9yY2VkUHJvdmlkZXI/OiBzdHJpbmcsIHNlbGVjdGVkQ29udmVyc2F0aW9uSWRzPzogc3RyaW5nW10sIHNoYXJlZFJlcG9ydD86IEltcG9ydFJlcG9ydCkge1xuICAgICAgICAvLyBVc2Ugc2hhcmVkIHJlcG9ydCBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgY29uc3QgaXNTaGFyZWRSZXBvcnQgPSAhIXNoYXJlZFJlcG9ydDtcbiAgICAgICAgdGhpcy5pbXBvcnRSZXBvcnQgPSBzaGFyZWRSZXBvcnQgfHwgbmV3IEltcG9ydFJlcG9ydCgpO1xuXG4gICAgICAgIC8vIFNldCBjdXN0b20gdGltZXN0YW1wIGZvcm1hdCBpZiBlbmFibGVkIChvbmx5IGlmIGNyZWF0aW5nIG5ldyByZXBvcnQpXG4gICAgICAgIGlmICghaXNTaGFyZWRSZXBvcnQgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlQ3VzdG9tTWVzc2FnZVRpbWVzdGFtcEZvcm1hdCkge1xuICAgICAgICAgICAgdGhpcy5pbXBvcnRSZXBvcnQuc2V0Q3VzdG9tVGltZXN0YW1wRm9ybWF0KHRoaXMucGx1Z2luLnNldHRpbmdzLm1lc3NhZ2VUaW1lc3RhbXBGb3JtYXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RhcnQgYSBuZXcgZmlsZSBzZWN0aW9uIGluIHRoZSByZXBvcnRcbiAgICAgICAgdGhpcy5pbXBvcnRSZXBvcnQuc3RhcnRGaWxlU2VjdGlvbihmaWxlLm5hbWUpO1xuXG4gICAgICAgIC8vIFJlc2V0IGNvdW50ZXJzIGZvciB0aGlzIGZpbGUgKHByZXZlbnRzIGFjY3VtdWxhdGlvbiBhY3Jvc3MgbXVsdGlwbGUgZmlsZXMpXG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uUHJvY2Vzc29yLnJlc2V0Q291bnRlcnMoKTtcblxuICAgICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5wbHVnaW4uZ2V0U3RvcmFnZVNlcnZpY2UoKTtcbiAgICAgICAgbGV0IHByb2Nlc3NpbmdTdGFydGVkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuZCBzaG93IHByb2dyZXNzIG1vZGFsXG4gICAgICAgIGNvbnN0IHByb2dyZXNzTW9kYWwgPSBuZXcgSW1wb3J0UHJvZ3Jlc3NNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIGZpbGUubmFtZSk7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzQ2FsbGJhY2sgPSBwcm9ncmVzc01vZGFsLmdldFByb2dyZXNzQ2FsbGJhY2soKTtcbiAgICAgICAgcHJvZ3Jlc3NNb2RhbC5vcGVuKCk7XG5cbiAgICAgICAgLy8gU2V0IHNlbGVjdGl2ZSBpbXBvcnQgbW9kZSBpZiBhcHBsaWNhYmxlXG4gICAgICAgIGlmIChzZWxlY3RlZENvbnZlcnNhdGlvbklkcyAmJiBzZWxlY3RlZENvbnZlcnNhdGlvbklkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBXZSdsbCBzZXQgdGhpcyBhZnRlciB3ZSBrbm93IHRoZSB0b3RhbCBhdmFpbGFibGUgY291bnRcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSB1cGRhdGVkIGluIHByb2Nlc3NDb252ZXJzYXRpb25zXG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgcGhhc2U6ICd2YWxpZGF0aW9uJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ1ZhbGlkYXRpbmcgWklQIHN0cnVjdHVyZS4uLicsXG4gICAgICAgICAgICAgICAgZGV0YWlsOiAnQ2hlY2tpbmcgZmlsZSBmb3JtYXQgYW5kIGNvbnRlbnRzJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHppcCA9IGF3YWl0IHRoaXMudmFsaWRhdGVaaXBGaWxlKGZpbGUsIGZvcmNlZFByb3ZpZGVyKTtcblxuICAgICAgICAgICAgLy8gV2hlbiB1c2luZyBzaGFyZWQgcmVwb3J0IChuZXcgd29ya2Zsb3cpLCBza2lwIHRoZSBcImFscmVhZHkgaW1wb3J0ZWRcIiBjaGVja1xuICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGUgYW5hbHlzaXMgYWxyZWFkeSBkZXRlcm1pbmVkIHdoYXQgbmVlZHMgdG8gYmUgaW1wb3J0ZWRcbiAgICAgICAgICAgIGxldCBpc1JlcHJvY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGZpbGVIYXNoID0gXCJcIjtcblxuICAgICAgICAgICAgaWYgKCFpc1NoYXJlZFJlcG9ydCkge1xuICAgICAgICAgICAgICAgIC8vIExlZ2FjeSB3b3JrZmxvdzogY2hlY2sgaWYgZmlsZSB3YXMgYWxyZWFkeSBpbXBvcnRlZFxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICBwaGFzZTogJ3ZhbGlkYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1ZhbGlkYXRpbmcgZmlsZS4uLicsXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbDogJ0NoZWNraW5nIGZpbGUgaGFzaCBhbmQgaW1wb3J0IGhpc3RvcnknXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBmaWxlSGFzaCA9IGF3YWl0IGdldEZpbGVIYXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kQnlIYXNoID0gc3RvcmFnZS5pc0FyY2hpdmVJbXBvcnRlZChmaWxlSGFzaCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZm91bmRCeU5hbWUgPSBzdG9yYWdlLmlzQXJjaGl2ZUltcG9ydGVkKGZpbGUubmFtZSk7XG4gICAgICAgICAgICAgICAgaXNSZXByb2Nlc3MgPSBmb3VuZEJ5SGFzaCB8fCBmb3VuZEJ5TmFtZTtcblxuICAgICAgICAgICAgICAgIGlmIChpc1JlcHJvY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc01vZGFsLmNsb3NlKCk7IC8vIENsb3NlIHByb2dyZXNzIG1vZGFsIGZvciB1c2VyIGRpYWxvZ1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZFJlaW1wb3J0ID0gYXdhaXQgc2hvd0RpYWxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29uZmlybWF0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkFscmVhZHkgcHJvY2Vzc2VkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYEZpbGUgJHtmaWxlLm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gaW1wb3J0ZWQuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRG8geW91IHdhbnQgdG8gcmVwcm9jZXNzIGl0P2AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCoqTm90ZToqKiBUaGlzIHdpbGwgcmVjcmVhdGUgbm90ZXMgZnJvbSBiZWZvcmUgdjEuMS4wIHRvIGFkZCBhdHRhY2htZW50IHN1cHBvcnQuYFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgYnV0dG9uMTogXCJMZXQncyBkbyB0aGlzXCIsIGJ1dHRvbjI6IFwiU2tpcCB0aGlzIGZpbGVcIiB9XG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzaG91bGRSZWltcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgU2tpcHBpbmcgJHtmaWxlLm5hbWV9IChhbHJlYWR5IGltcG9ydGVkKS5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gU2tpcCB0aGlzIGZpbGUsIGJ1dCBkb24ndCBjYW5jZWwgdGhlIHdob2xlIG9wZXJhdGlvblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVvcGVuIHByb2dyZXNzIG1vZGFsIGZvciBjb250aW51ZWQgcHJvY2Vzc2luZ1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc01vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE5ldyB3b3JrZmxvdzogYWx3YXlzIGNvbXB1dGUgaGFzaCBmb3IgdHJhY2tpbmcsIGJ1dCBkb24ndCBjaGVjay9wcm9tcHRcbiAgICAgICAgICAgICAgICBmaWxlSGFzaCA9IGF3YWl0IGdldEZpbGVIYXNoKGZpbGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcm9jZXNzaW5nU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnByb2Nlc3NDb252ZXJzYXRpb25zKHppcCwgZmlsZSwgaXNSZXByb2Nlc3MsIGZvcmNlZFByb3ZpZGVyLCBwcm9ncmVzc0NhbGxiYWNrLCBzZWxlY3RlZENvbnZlcnNhdGlvbklkcywgcHJvZ3Jlc3NNb2RhbCk7XG5cbiAgICAgICAgICAgIC8vIFRyYWNrIGltcG9ydGVkIGFyY2hpdmVcbiAgICAgICAgICAgIHN0b3JhZ2UuYWRkSW1wb3J0ZWRBcmNoaXZlKGZpbGVIYXNoLCBmaWxlLm5hbWUpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soe1xuICAgICAgICAgICAgICAgIHBoYXNlOiAnY29tcGxldGUnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnSW1wb3J0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkhJyxcbiAgICAgICAgICAgICAgICBkZXRhaWw6IGBQcm9jZXNzZWQgJHt0aGlzLmNvbnZlcnNhdGlvblByb2Nlc3Nvci5nZXRDb3VudGVycygpLnRvdGFsTmV3Q29udmVyc2F0aW9uc1RvSW1wb3J0ICsgdGhpcy5jb252ZXJzYXRpb25Qcm9jZXNzb3IuZ2V0Q291bnRlcnMoKS50b3RhbEV4aXN0aW5nQ29udmVyc2F0aW9uc1RvVXBkYXRlfSBjb252ZXJzYXRpb25zYFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIE5leHVzQWlDaGF0SW1wb3J0ZXJFcnJvclxuICAgICAgICAgICAgICAgID8gZXJyb3IubWVzc2FnZVxuICAgICAgICAgICAgICAgIDogZXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICAgICAgICAgID8gZXJyb3IubWVzc2FnZVxuICAgICAgICAgICAgICAgIDogXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkXCI7XG5cbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci5lcnJvcihcIkVycm9yIGhhbmRsaW5nIHppcCBmaWxlXCIsIHsgbWVzc2FnZSB9KTtcblxuICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgcGhhc2U6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdJbXBvcnQgZmFpbGVkJyxcbiAgICAgICAgICAgICAgICBkZXRhaWw6IG1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBLZWVwIG1vZGFsIG9wZW4gZm9yIGVycm9yIHN0YXRlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHByb2dyZXNzTW9kYWwuY2xvc2UoKSwgNTAwMCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAvLyBPbmx5IHdyaXRlIHJlcG9ydCBpZiBwcm9jZXNzaW5nIGFjdHVhbGx5IHN0YXJ0ZWQgQU5EIHRoaXMgaXMgTk9UIGEgc2hhcmVkIHJlcG9ydFxuICAgICAgICAgICAgLy8gKHNoYXJlZCByZXBvcnRzIGFyZSB3cml0dGVuIGJ5IHRoZSBjYWxsZXIgYWZ0ZXIgYWxsIGZpbGVzIGFyZSBwcm9jZXNzZWQpXG4gICAgICAgICAgICBpZiAocHJvY2Vzc2luZ1N0YXJ0ZWQgJiYgIWlzU2hhcmVkUmVwb3J0KSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZUltcG9ydFJlcG9ydChmaWxlLm5hbWUpO1xuXG4gICAgICAgICAgICAgICAgLy8gT25seSBzaG93IG5vdGljZSBpZiBtb2RhbCB3YXMgY2xvc2VkIGR1ZSB0byBlcnJvciBvciBjb21wbGV0aW9uXG4gICAgICAgICAgICAgICAgaWYgKCFwcm9ncmVzc01vZGFsLmlzQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1wb3J0UmVwb3J0Lmhhc0Vycm9ycygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIkFuIGVycm9yIG9jY3VycmVkIGR1cmluZyBpbXBvcnQuIFBsZWFzZSBjaGVjayB0aGUgbG9nIGZpbGUgZm9yIGRldGFpbHMuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiSW1wb3J0IGNvbXBsZXRlZC4gTG9nIGZpbGUgY3JlYXRlZCBpbiB0aGUgYXJjaGl2ZSBmb2xkZXIuXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHZhbGlkYXRlWmlwRmlsZShmaWxlOiBGaWxlLCBmb3JjZWRQcm92aWRlcj86IHN0cmluZyk6IFByb21pc2U8SlNaaXA+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHppcCA9IG5ldyBKU1ppcCgpO1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHppcC5sb2FkQXN5bmMoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBmaWxlTmFtZXMgPSBPYmplY3Qua2V5cyhjb250ZW50LmZpbGVzKTtcblxuICAgICAgICAgICAgLy8gSWYgcHJvdmlkZXIgaXMgZm9yY2VkLCBza2lwIGZvcm1hdCB2YWxpZGF0aW9uXG4gICAgICAgICAgICBpZiAoZm9yY2VkUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBCYXNpYyB2YWxpZGF0aW9uOiBtdXN0IGhhdmUgY29udmVyc2F0aW9ucy5qc29uXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlTmFtZXMuaW5jbHVkZXMoXCJjb252ZXJzYXRpb25zLmpzb25cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5leHVzQWlDaGF0SW1wb3J0ZXJFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSW52YWxpZCBaSVAgc3RydWN0dXJlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBgTWlzc2luZyByZXF1aXJlZCBmaWxlOiBjb252ZXJzYXRpb25zLmpzb24gZm9yICR7Zm9yY2VkUHJvdmlkZXJ9IHByb3ZpZGVyLmBcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEF1dG8tZGV0ZWN0aW9uIG1vZGUgKGxlZ2FjeSBiZWhhdmlvcilcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNDb252ZXJzYXRpb25zSnNvbiA9IGZpbGVOYW1lcy5pbmNsdWRlcyhcImNvbnZlcnNhdGlvbnMuanNvblwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNVc2Vyc0pzb24gPSBmaWxlTmFtZXMuaW5jbHVkZXMoXCJ1c2Vycy5qc29uXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhc1Byb2plY3RzSnNvbiA9IGZpbGVOYW1lcy5pbmNsdWRlcyhcInByb2plY3RzLmpzb25cIik7XG5cbiAgICAgICAgICAgICAgICAvLyBDaGF0R1BUIGZvcm1hdDogY29udmVyc2F0aW9ucy5qc29uIG9ubHlcbiAgICAgICAgICAgICAgICBjb25zdCBpc0NoYXRHUFRGb3JtYXQgPSBoYXNDb252ZXJzYXRpb25zSnNvbiAmJiAhaGFzVXNlcnNKc29uICYmICFoYXNQcm9qZWN0c0pzb247XG5cbiAgICAgICAgICAgICAgICAvLyBDbGF1ZGUgZm9ybWF0OiBjb252ZXJzYXRpb25zLmpzb24gKyB1c2Vycy5qc29uIChwcm9qZWN0cy5qc29uIG9wdGlvbmFsIGZvciBsZWdhY3kpXG4gICAgICAgICAgICAgICAgY29uc3QgaXNDbGF1ZGVGb3JtYXQgPSBoYXNDb252ZXJzYXRpb25zSnNvbiAmJiBoYXNVc2Vyc0pzb247XG5cbiAgICAgICAgICAgICAgICBpZiAoIWlzQ2hhdEdQVEZvcm1hdCAmJiAhaXNDbGF1ZGVGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5leHVzQWlDaGF0SW1wb3J0ZXJFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSW52YWxpZCBaSVAgc3RydWN0dXJlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlRoaXMgWklQIGZpbGUgZG9lc24ndCBtYXRjaCBhbnkgc3VwcG9ydGVkIGNoYXQgZXhwb3J0IGZvcm1hdC4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJFeHBlY3RlZCBlaXRoZXIgQ2hhdEdQVCBmb3JtYXQgKGNvbnZlcnNhdGlvbnMuanNvbikgb3IgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJDbGF1ZGUgZm9ybWF0IChjb252ZXJzYXRpb25zLmpzb24gKyB1c2Vycy5qc29uKS5cIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHppcDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTmV4dXNBaUNoYXRJbXBvcnRlckVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOZXh1c0FpQ2hhdEltcG9ydGVyRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIFwiRXJyb3IgdmFsaWRhdGluZyB6aXAgZmlsZVwiLFxuICAgICAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJvY2Vzc0NvbnZlcnNhdGlvbnMoemlwOiBKU1ppcCwgZmlsZTogRmlsZSwgaXNSZXByb2Nlc3M6IGJvb2xlYW4sIGZvcmNlZFByb3ZpZGVyPzogc3RyaW5nLCBwcm9ncmVzc0NhbGxiYWNrPzogSW1wb3J0UHJvZ3Jlc3NDYWxsYmFjaywgc2VsZWN0ZWRDb252ZXJzYXRpb25JZHM/OiBzdHJpbmdbXSwgcHJvZ3Jlc3NNb2RhbD86IEltcG9ydFByb2dyZXNzTW9kYWwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2s/Lih7XG4gICAgICAgICAgICAgICAgcGhhc2U6ICdzY2FubmluZycsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdFeHRyYWN0aW5nIGNvbnZlcnNhdGlvbnMuLi4nLFxuICAgICAgICAgICAgICAgIGRldGFpbDogJ1JlYWRpbmcgY29udmVyc2F0aW9uIGRhdGEgZnJvbSBaSVAgZmlsZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBFeHRyYWN0IHJhdyBjb252ZXJzYXRpb24gZGF0YSAocHJvdmlkZXIgYWdub3N0aWMpXG4gICAgICAgICAgICBsZXQgcmF3Q29udmVyc2F0aW9ucyA9IGF3YWl0IHRoaXMuZXh0cmFjdFJhd0NvbnZlcnNhdGlvbnNGcm9tWmlwKHppcCk7XG5cbiAgICAgICAgICAgIC8vIEZpbHRlciBjb252ZXJzYXRpb25zIGlmIHNwZWNpZmljIElEcyBhcmUgc2VsZWN0ZWRcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZENvbnZlcnNhdGlvbklkcyAmJiBzZWxlY3RlZENvbnZlcnNhdGlvbklkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxDb3VudCA9IHJhd0NvbnZlcnNhdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHJhd0NvbnZlcnNhdGlvbnMgPSB0aGlzLmZpbHRlckNvbnZlcnNhdGlvbnNCeUlkcyhyYXdDb252ZXJzYXRpb25zLCBzZWxlY3RlZENvbnZlcnNhdGlvbklkcywgZm9yY2VkUHJvdmlkZXIpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2V0IHNlbGVjdGl2ZSBpbXBvcnQgbW9kZSBpbiBwcm9ncmVzcyBtb2RhbFxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc01vZGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWwuc2V0U2VsZWN0aXZlSW1wb3J0TW9kZShyYXdDb252ZXJzYXRpb25zLmxlbmd0aCwgb3JpZ2luYWxDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjaz8uKHtcbiAgICAgICAgICAgICAgICAgICAgcGhhc2U6ICdzY2FubmluZycsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRmlsdGVyaW5nIGNvbnZlcnNhdGlvbnMuLi4nLFxuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGBTZWxlY3RlZCAke3Jhd0NvbnZlcnNhdGlvbnMubGVuZ3RofSBvZiAke29yaWdpbmFsQ291bnR9IGNvbnZlcnNhdGlvbnMgZm9yIGltcG9ydGAsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiByYXdDb252ZXJzYXRpb25zLmxlbmd0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrPy4oe1xuICAgICAgICAgICAgICAgIHBoYXNlOiAnc2Nhbm5pbmcnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnU2Nhbm5pbmcgZXhpc3RpbmcgY29udmVyc2F0aW9ucy4uLicsXG4gICAgICAgICAgICAgICAgZGV0YWlsOiAnQ2hlY2tpbmcgdmF1bHQgZm9yIGV4aXN0aW5nIGNvbnZlcnNhdGlvbnMnLFxuICAgICAgICAgICAgICAgIHRvdGFsOiByYXdDb252ZXJzYXRpb25zLmxlbmd0aFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIHByb3ZpZGVyIGlmIGZvcmNlZFxuICAgICAgICAgICAgaWYgKGZvcmNlZFByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVByb3ZpZGVyTWF0Y2gocmF3Q29udmVyc2F0aW9ucywgZm9yY2VkUHJvdmlkZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrPy4oe1xuICAgICAgICAgICAgICAgIHBoYXNlOiAncHJvY2Vzc2luZycsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdQcm9jZXNzaW5nIGNvbnZlcnNhdGlvbnMuLi4nLFxuICAgICAgICAgICAgICAgIGRldGFpbDogJ0NvbnZlcnRpbmcgYW5kIGltcG9ydGluZyBjb252ZXJzYXRpb25zJyxcbiAgICAgICAgICAgICAgICBjdXJyZW50OiAwLFxuICAgICAgICAgICAgICAgIHRvdGFsOiByYXdDb252ZXJzYXRpb25zLmxlbmd0aFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFByb2Nlc3MgdGhyb3VnaCBjb252ZXJzYXRpb24gcHJvY2Vzc29yIChoYW5kbGVzIHByb3ZpZGVyIGRldGVjdGlvbi9jb252ZXJzaW9uKVxuICAgICAgICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdGhpcy5jb252ZXJzYXRpb25Qcm9jZXNzb3IucHJvY2Vzc1Jhd0NvbnZlcnNhdGlvbnMoXG4gICAgICAgICAgICAgICAgcmF3Q29udmVyc2F0aW9ucyxcbiAgICAgICAgICAgICAgICB0aGlzLmltcG9ydFJlcG9ydCxcbiAgICAgICAgICAgICAgICB6aXAsXG4gICAgICAgICAgICAgICAgaXNSZXByb2Nlc3MsXG4gICAgICAgICAgICAgICAgZm9yY2VkUHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFja1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5pbXBvcnRSZXBvcnQgPSByZXBvcnQ7XG4gICAgICAgICAgICB0aGlzLmltcG9ydFJlcG9ydC5zZXRGaWxlQ291bnRlcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5jb252ZXJzYXRpb25Qcm9jZXNzb3IuZ2V0Q291bnRlcnMoKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjaz8uKHtcbiAgICAgICAgICAgICAgICBwaGFzZTogJ3dyaXRpbmcnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnRmluYWxpemluZyBpbXBvcnQuLi4nLFxuICAgICAgICAgICAgICAgIGRldGFpbDogJ1NhdmluZyBzZXR0aW5ncyBhbmQgZ2VuZXJhdGluZyByZXBvcnQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIE5leHVzQWlDaGF0SW1wb3J0ZXJFcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci5lcnJvcihcIkVycm9yIHByb2Nlc3NpbmcgY29udmVyc2F0aW9uc1wiLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoXCJGdWxsIE5leHVzQWlDaGF0SW1wb3J0ZXJFcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoXCJHZW5lcmFsIGVycm9yIHByb2Nlc3NpbmcgY29udmVyc2F0aW9uc1wiLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoXCJGdWxsIEVycm9yOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ubG9nZ2VyLmVycm9yKFwiU3RhY2sgdHJhY2U6XCIsIGVycm9yLnN0YWNrKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ubG9nZ2VyLmVycm9yKFwiVW5rbm93biBlcnJvciBwcm9jZXNzaW5nIGNvbnZlcnNhdGlvbnNcIiwgXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci5lcnJvcihcIlVua25vd24gZXJyb3I6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlLXRocm93IHRoZSBlcnJvciBzbyBpdCBjYW4gYmUgY2F1Z2h0IGJ5IHRoZSBjYWxsZXJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdCByYXcgY29udmVyc2F0aW9uIGRhdGEgd2l0aG91dCBrbm93aW5nIHByb3ZpZGVyIHNwZWNpZmljc1xuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZXh0cmFjdFJhd0NvbnZlcnNhdGlvbnNGcm9tWmlwKHppcDogSlNaaXApOiBQcm9taXNlPGFueVtdPiB7XG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnNGaWxlID0gemlwLmZpbGUoXCJjb252ZXJzYXRpb25zLmpzb25cIik7XG4gICAgICAgIGlmICghY29udmVyc2F0aW9uc0ZpbGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOZXh1c0FpQ2hhdEltcG9ydGVyRXJyb3IoXG4gICAgICAgICAgICAgICAgXCJNaXNzaW5nIGNvbnZlcnNhdGlvbnMuanNvblwiLFxuICAgICAgICAgICAgICAgIFwiVGhlIFpJUCBmaWxlIGRvZXMgbm90IGNvbnRhaW4gYSBjb252ZXJzYXRpb25zLmpzb24gZmlsZVwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9uc0pzb24gPSBhd2FpdCBjb252ZXJzYXRpb25zRmlsZS5hc3luYyhcInN0cmluZ1wiKTtcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UoY29udmVyc2F0aW9uc0pzb24pO1xuXG4gICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgZGF0YSBzdHJ1Y3R1cmVzXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZERhdGEpKSB7XG4gICAgICAgICAgICAvLyBEaXJlY3QgYXJyYXkgb2YgY29udmVyc2F0aW9ucyAoQ2hhdEdQVCBmb3JtYXQpXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkRGF0YTtcbiAgICAgICAgfSBlbHNlIGlmIChwYXJzZWREYXRhLmNvbnZlcnNhdGlvbnMgJiYgQXJyYXkuaXNBcnJheShwYXJzZWREYXRhLmNvbnZlcnNhdGlvbnMpKSB7XG4gICAgICAgICAgICAvLyBOZXN0ZWQgc3RydWN0dXJlIChDbGF1ZGUgZm9ybWF0KVxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZERhdGEuY29udmVyc2F0aW9ucztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOZXh1c0FpQ2hhdEltcG9ydGVyRXJyb3IoXG4gICAgICAgICAgICAgICAgXCJJbnZhbGlkIGNvbnZlcnNhdGlvbnMuanNvbiBzdHJ1Y3R1cmVcIixcbiAgICAgICAgICAgICAgICBcIlRoZSBjb252ZXJzYXRpb25zLmpzb24gZmlsZSBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgY29udmVyc2F0aW9uIGFycmF5XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgY29udmVyc2F0aW9ucyBieSBzZWxlY3RlZCBJRHNcbiAgICAgKi9cbiAgICBwcml2YXRlIGZpbHRlckNvbnZlcnNhdGlvbnNCeUlkcyhyYXdDb252ZXJzYXRpb25zOiBhbnlbXSwgc2VsZWN0ZWRJZHM6IHN0cmluZ1tdLCBmb3JjZWRQcm92aWRlcj86IHN0cmluZyk6IGFueVtdIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRJZHNTZXQgPSBuZXcgU2V0KHNlbGVjdGVkSWRzKTtcblxuICAgICAgICByZXR1cm4gcmF3Q29udmVyc2F0aW9ucy5maWx0ZXIoY29udmVyc2F0aW9uID0+IHtcbiAgICAgICAgICAgIGxldCBjb252ZXJzYXRpb25JZDogc3RyaW5nO1xuXG4gICAgICAgICAgICAvLyBHZXQgY29udmVyc2F0aW9uIElEIGJhc2VkIG9uIHByb3ZpZGVyIGZvcm1hdFxuICAgICAgICAgICAgaWYgKGZvcmNlZFByb3ZpZGVyID09PSAnY2xhdWRlJyB8fCAoY29udmVyc2F0aW9uLnV1aWQgJiYgY29udmVyc2F0aW9uLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xhdWRlIGZvcm1hdFxuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkID0gY29udmVyc2F0aW9uLnV1aWQgfHwgXCJcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hhdEdQVCBmb3JtYXQgKGRlZmF1bHQpXG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQgPSBjb252ZXJzYXRpb24uaWQgfHwgXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkSWRzU2V0Lmhhcyhjb252ZXJzYXRpb25JZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIHRoYXQgdGhlIGZvcmNlZCBwcm92aWRlciBtYXRjaGVzIHRoZSBhY3R1YWwgY29udGVudCBzdHJ1Y3R1cmVcbiAgICAgKi9cbiAgICBwcml2YXRlIHZhbGlkYXRlUHJvdmlkZXJNYXRjaChyYXdDb252ZXJzYXRpb25zOiBhbnlbXSwgZm9yY2VkUHJvdmlkZXI6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAocmF3Q29udmVyc2F0aW9ucy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgICAgICBjb25zdCBmaXJzdENvbnZlcnNhdGlvbiA9IHJhd0NvbnZlcnNhdGlvbnNbMF07XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIENoYXRHUFQgc3RydWN0dXJlXG4gICAgICAgIGNvbnN0IGlzQ2hhdEdQVCA9IGZpcnN0Q29udmVyc2F0aW9uLm1hcHBpbmcgIT09IHVuZGVmaW5lZDtcblxuICAgICAgICAvLyBDaGVjayBmb3IgQ2xhdWRlIHN0cnVjdHVyZVxuICAgICAgICBjb25zdCBpc0NsYXVkZSA9IGZpcnN0Q29udmVyc2F0aW9uLmNoYXRfbWVzc2FnZXMgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb252ZXJzYXRpb24ubmFtZSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdENvbnZlcnNhdGlvbi5zdW1tYXJ5ICE9PSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKGZvcmNlZFByb3ZpZGVyID09PSAnY2hhdGdwdCcgJiYgIWlzQ2hhdEdQVCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5leHVzQWlDaGF0SW1wb3J0ZXJFcnJvcihcbiAgICAgICAgICAgICAgICBcIlByb3ZpZGVyIE1pc21hdGNoXCIsXG4gICAgICAgICAgICAgICAgXCJZb3Ugc2VsZWN0ZWQgQ2hhdEdQVCBidXQgdGhpcyBhcmNoaXZlIGFwcGVhcnMgdG8gYmUgZnJvbSBDbGF1ZGUuIFRoZSBzdHJ1Y3R1cmUgZG9lc24ndCBtYXRjaCBDaGF0R1BUIGV4cG9ydHMuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm9yY2VkUHJvdmlkZXIgPT09ICdjbGF1ZGUnICYmICFpc0NsYXVkZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5leHVzQWlDaGF0SW1wb3J0ZXJFcnJvcihcbiAgICAgICAgICAgICAgICBcIlByb3ZpZGVyIE1pc21hdGNoXCIsXG4gICAgICAgICAgICAgICAgXCJZb3Ugc2VsZWN0ZWQgQ2xhdWRlIGJ1dCB0aGlzIGFyY2hpdmUgYXBwZWFycyB0byBiZSBmcm9tIENoYXRHUFQuIFRoZSBzdHJ1Y3R1cmUgZG9lc24ndCBtYXRjaCBDbGF1ZGUgZXhwb3J0cy5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgd3JpdGVJbXBvcnRSZXBvcnQoemlwRmlsZU5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCByZXBvcnRXcml0ZXIgPSBuZXcgUmVwb3J0V3JpdGVyKHRoaXMucGx1Z2luLCB0aGlzLnByb3ZpZGVyUmVnaXN0cnkpO1xuICAgICAgICBjb25zdCBjdXJyZW50UHJvdmlkZXIgPSB0aGlzLmNvbnZlcnNhdGlvblByb2Nlc3Nvci5nZXRDdXJyZW50UHJvdmlkZXIoKTtcbiAgICAgICAgYXdhaXQgcmVwb3J0V3JpdGVyLndyaXRlUmVwb3J0KHRoaXMuaW1wb3J0UmVwb3J0LCB6aXBGaWxlTmFtZSwgY3VycmVudFByb3ZpZGVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWlsZCBhdHRhY2htZW50IG1hcCBmb3IgbXVsdGktWklQIGltcG9ydFxuICAgICAqIE9wZW5zIGFsbCBaSVBzIGFuZCBzY2FucyBmb3IgYXZhaWxhYmxlIGF0dGFjaG1lbnRzXG4gICAgICovXG4gICAgYXN5bmMgYnVpbGRBdHRhY2htZW50TWFwRm9yTXVsdGlaaXAoZmlsZXM6IEZpbGVbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQnVpbGQgdGhlIGF0dGFjaG1lbnQgbWFwXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRBdHRhY2htZW50TWFwID0gYXdhaXQgdGhpcy5hdHRhY2htZW50TWFwQnVpbGRlci5idWlsZEF0dGFjaG1lbnRNYXAoZmlsZXMpO1xuXG4gICAgICAgICAgICAvLyBPcGVuIGFsbCBaSVBzIGZvciBsYXRlciBhY2Nlc3NcbiAgICAgICAgICAgIGNvbnN0IEpTWmlwTW9kdWxlID0gKGF3YWl0IGltcG9ydCgnanN6aXAnKSkuZGVmYXVsdDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFppcHMgPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlc1tpXTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB6aXAgPSBuZXcgSlNaaXBNb2R1bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgemlwQ29udGVudCA9IGF3YWl0IHppcC5sb2FkQXN5bmMoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFppcHMucHVzaCh6aXBDb250ZW50KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBvcGVuIFpJUCBmb3IgYXR0YWNobWVudCBtYXA6ICR7ZmlsZS5uYW1lfWAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFBhc3MgdGhlIGF0dGFjaG1lbnQgbWFwIHRvIHRoZSBDaGF0R1BUIGFkYXB0ZXJcbiAgICAgICAgICAgIGNvbnN0IGNoYXRncHRBZGFwdGVyID0gdGhpcy5wcm92aWRlclJlZ2lzdHJ5LmdldEFkYXB0ZXIoJ2NoYXRncHQnKSBhcyBhbnk7XG4gICAgICAgICAgICBpZiAoY2hhdGdwdEFkYXB0ZXIgJiYgdGhpcy5jdXJyZW50QXR0YWNobWVudE1hcCkge1xuICAgICAgICAgICAgICAgIGNoYXRncHRBZGFwdGVyLnNldEF0dGFjaG1lbnRNYXAodGhpcy5jdXJyZW50QXR0YWNobWVudE1hcCwgdGhpcy5jdXJyZW50Wmlwcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoJ0Vycm9yIGJ1aWxkaW5nIGF0dGFjaG1lbnQgbWFwOicsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgYXR0YWNobWVudCBtYXAgYW5kIGNsb3NlIFpJUHMgYWZ0ZXIgaW1wb3J0IGNvbXBsZXRlc1xuICAgICAqL1xuICAgIGNsZWFyQXR0YWNobWVudE1hcCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jdXJyZW50QXR0YWNobWVudE1hcCA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VycmVudFppcHMgPSBbXTtcblxuICAgICAgICBjb25zdCBjaGF0Z3B0QWRhcHRlciA9IHRoaXMucHJvdmlkZXJSZWdpc3RyeS5nZXRBZGFwdGVyKCdjaGF0Z3B0JykgYXMgYW55O1xuICAgICAgICBpZiAoY2hhdGdwdEFkYXB0ZXIpIHtcbiAgICAgICAgICAgIGNoYXRncHRBZGFwdGVyLmNsZWFyQXR0YWNobWVudE1hcCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBSZXBvcnRXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luLCBwcml2YXRlIHByb3ZpZGVyUmVnaXN0cnk6IFByb3ZpZGVyUmVnaXN0cnkpIHt9XG5cbiAgICBhc3luYyB3cml0ZVJlcG9ydChyZXBvcnQ6IEltcG9ydFJlcG9ydCwgemlwRmlsZU5hbWU6IHN0cmluZywgcHJvdmlkZXI6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBTdGF0aWMgaW1wb3J0cyAtIG5vIGR5bmFtaWMgaW1wb3J0IG5lZWRlZFxuXG4gICAgICAgIC8vIEdldCBwcm92aWRlci1zcGVjaWZpYyBuYW1pbmcgc3RyYXRlZ3kgYW5kIHNldCBjb2x1bW4gaGVhZGVyXG4gICAgICAgIGNvbnN0IHJlcG9ydEluZm8gPSB0aGlzLmdldFJlcG9ydEdlbmVyYXRpb25JbmZvKHppcEZpbGVOYW1lLCBwcm92aWRlcik7XG4gICAgICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLnByb3ZpZGVyUmVnaXN0cnkuZ2V0QWRhcHRlcihwcm92aWRlcik7XG4gICAgICAgIGlmIChhZGFwdGVyKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJhdGVneSA9IGFkYXB0ZXIuZ2V0UmVwb3J0TmFtaW5nU3RyYXRlZ3koKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbkluZm8gPSBzdHJhdGVneS5nZXRQcm92aWRlclNwZWNpZmljQ29sdW1uKCk7XG4gICAgICAgICAgICByZXBvcnQuc2V0UHJvdmlkZXJTcGVjaWZpY0NvbHVtbkhlYWRlcihjb2x1bW5JbmZvLmhlYWRlcik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbnN1cmUgcHJvdmlkZXIgc3ViZm9sZGVyIGV4aXN0c1xuICAgICAgICBjb25zdCBmb2xkZXJSZXN1bHQgPSBhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHMocmVwb3J0SW5mby5mb2xkZXJQYXRoLCB0aGlzLnBsdWdpbi5hcHAudmF1bHQpO1xuICAgICAgICBpZiAoIWZvbGRlclJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgb3IgYWNjZXNzIGxvZyBmb2xkZXI6ICR7cmVwb3J0SW5mby5mb2xkZXJQYXRofWAsIGZvbGRlclJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGNyZWF0ZSBsb2cgZmlsZS4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgZmlsZW5hbWUgd2l0aCBjb3VudGVyIGlmIG5lZWRlZFxuICAgICAgICBsZXQgbG9nRmlsZVBhdGggPSBgJHtyZXBvcnRJbmZvLmZvbGRlclBhdGh9LyR7cmVwb3J0SW5mby5iYXNlRmlsZU5hbWV9YDtcbiAgICAgICAgbGV0IGNvdW50ZXIgPSAyO1xuICAgICAgICB3aGlsZSAoYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGxvZ0ZpbGVQYXRoKSkge1xuICAgICAgICAgICAgY29uc3QgYmFzZU5hbWUgPSByZXBvcnRJbmZvLmJhc2VGaWxlTmFtZS5yZXBsYWNlKCcgLSBpbXBvcnQgcmVwb3J0Lm1kJywgJycpO1xuICAgICAgICAgICAgbG9nRmlsZVBhdGggPSBgJHtyZXBvcnRJbmZvLmZvbGRlclBhdGh9LyR7YmFzZU5hbWV9LSR7Y291bnRlcn0gLSBpbXBvcnQgcmVwb3J0Lm1kYDtcbiAgICAgICAgICAgIGNvdW50ZXIrKztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVuaGFuY2VkIGZyb250bWF0dGVyIHdpdGggYm90aCBkYXRlcyAoSVNPIDg2MDEgZm9ybWF0IGZvciBjb25zaXN0ZW5jeSlcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGFyY2hpdmVEYXRlID0gdGhpcy5leHRyYWN0QXJjaGl2ZURhdGVGcm9tRmlsZW5hbWUoemlwRmlsZU5hbWUpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbG9nQ29udGVudCA9IGAtLS1cbmltcG9ydGRhdGU6ICR7Y3VycmVudERhdGV9XG5hcmNoaXZlZGF0ZTogJHthcmNoaXZlRGF0ZX1cbnppcEZpbGU6ICR7emlwRmlsZU5hbWV9XG5wcm92aWRlcjogJHtwcm92aWRlcn1cbnRvdGFsU3VjY2Vzc2Z1bEltcG9ydHM6ICR7cmVwb3J0LmdldENyZWF0ZWRDb3VudCgpfVxudG90YWxVcGRhdGVkSW1wb3J0czogJHtyZXBvcnQuZ2V0VXBkYXRlZENvdW50KCl9XG50b3RhbFNraXBwZWRJbXBvcnRzOiAke3JlcG9ydC5nZXRTa2lwcGVkQ291bnQoKX1cbi0tLVxuXG4ke3JlcG9ydC5nZW5lcmF0ZVJlcG9ydENvbnRlbnQoKX1cbmA7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jcmVhdGUobG9nRmlsZVBhdGgsIGxvZ0NvbnRlbnQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoYEZhaWxlZCB0byB3cml0ZSBpbXBvcnQgbG9nYCwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGNyZWF0ZSBsb2cgZmlsZS4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy5cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFJlcG9ydEdlbmVyYXRpb25JbmZvKHppcEZpbGVOYW1lOiBzdHJpbmcsIHByb3ZpZGVyOiBzdHJpbmcpOiB7IGZvbGRlclBhdGg6IHN0cmluZywgYmFzZUZpbGVOYW1lOiBzdHJpbmcgfSB7XG4gICAgICAgIGNvbnN0IHJlcG9ydEZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcG9ydEZvbGRlcjtcblxuICAgICAgICAvLyBUcnkgdG8gZ2V0IHByb3ZpZGVyLXNwZWNpZmljIG5hbWluZyBzdHJhdGVneVxuICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5wcm92aWRlclJlZ2lzdHJ5LmdldEFkYXB0ZXIocHJvdmlkZXIpO1xuICAgICAgICBpZiAoYWRhcHRlcikge1xuICAgICAgICAgICAgY29uc3Qgc3RyYXRlZ3kgPSBhZGFwdGVyLmdldFJlcG9ydE5hbWluZ1N0cmF0ZWd5KCk7XG4gICAgICAgICAgICBjb25zdCByZXBvcnRQcmVmaXggPSBzdHJhdGVneS5leHRyYWN0UmVwb3J0UHJlZml4KHppcEZpbGVOYW1lKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZm9sZGVyUGF0aDogYCR7cmVwb3J0Rm9sZGVyfS8ke3N0cmF0ZWd5LmdldFByb3ZpZGVyTmFtZSgpfWAsXG4gICAgICAgICAgICAgICAgYmFzZUZpbGVOYW1lOiBgJHtyZXBvcnRQcmVmaXh9IC0gaW1wb3J0IHJlcG9ydC5tZGBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGYWxsYmFjayBmb3IgdW5rbm93biBwcm92aWRlcnNcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgaW1wb3J0RGF0ZSA9IGAke25vdy5nZXRGdWxsWWVhcigpfS4ke1N0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9LiR7U3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbiAgICAgICAgY29uc3QgYXJjaGl2ZURhdGUgPSB0aGlzLmV4dHJhY3RBcmNoaXZlRGF0ZUZyb21GaWxlbmFtZSh6aXBGaWxlTmFtZSk7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrUHJlZml4ID0gYGltcG9ydGVkLSR7aW1wb3J0RGF0ZX0tYXJjaGl2ZS0ke2FyY2hpdmVEYXRlfWA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb2xkZXJQYXRoOiBgJHtyZXBvcnRGb2xkZXJ9YCxcbiAgICAgICAgICAgIGJhc2VGaWxlTmFtZTogYCR7ZmFsbGJhY2tQcmVmaXh9IC0gaW1wb3J0IHJlcG9ydC5tZGBcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGV4dHJhY3RBcmNoaXZlRGF0ZUZyb21GaWxlbmFtZSh6aXBGaWxlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZGF0ZVJlZ2V4ID0gLyhcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pLztcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB6aXBGaWxlTmFtZS5tYXRjaChkYXRlUmVnZXgpO1xuXG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgY29uc3QgWywgeWVhciwgbW9udGgsIGRheV0gPSBtYXRjaDtcbiAgICAgICAgICAgIHJldHVybiBgJHt5ZWFyfS4ke21vbnRofS4ke2RheX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmFsbGJhY2s6IHVzZSBjdXJyZW50IGRhdGVcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgcmV0dXJuIGAke25vdy5nZXRGdWxsWWVhcigpfS4ke1N0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9LiR7U3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbiAgICB9XG59IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy9tb2RlbHMvaW1wb3J0LXJlcG9ydC50c1xuaW1wb3J0IHsgQXR0YWNobWVudFN0YXRzIH0gZnJvbSBcIi4uL3R5cGVzL3BsdWdpblwiO1xuaW1wb3J0IHsgZm9ybWF0TWVzc2FnZVRpbWVzdGFtcCwgTWVzc2FnZVRpbWVzdGFtcEZvcm1hdCB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5pbnRlcmZhY2UgUmVwb3J0RW50cnkge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZmlsZVBhdGg6IHN0cmluZztcbiAgICBjcmVhdGVUaW1lOiBudW1iZXI7IC8vIFVuaXggdGltZXN0YW1wIChzZWNvbmRzKVxuICAgIHVwZGF0ZVRpbWU6IG51bWJlcjsgLy8gVW5peCB0aW1lc3RhbXAgKHNlY29uZHMpXG4gICAgbWVzc2FnZUNvdW50PzogbnVtYmVyO1xuICAgIG5ld01lc3NhZ2VDb3VudD86IG51bWJlcjsgLy8gRm9yIHVwZGF0ZXNcbiAgICBwcm92aWRlclNwZWNpZmljQ291bnQ/OiBudW1iZXI7IC8vIEZvciBwcm92aWRlci1zcGVjaWZpYyBjb2x1bW4gKGFydGlmYWN0cywgYXR0YWNobWVudHMsIGV0Yy4pXG4gICAgcmVhc29uPzogc3RyaW5nO1xuICAgIGVycm9yTWVzc2FnZT86IHN0cmluZztcbiAgICBhdHRhY2htZW50U3RhdHM/OiBBdHRhY2htZW50U3RhdHM7XG4gICAgc291cmNlRmlsZT86IHN0cmluZzsgLy8gVHJhY2sgd2hpY2ggWklQIGZpbGUgdGhpcyBlbnRyeSBjYW1lIGZyb21cbn1cblxuaW50ZXJmYWNlIFByb2Nlc3NpbmdDb3VudGVycyB7XG4gICAgdG90YWxDb252ZXJzYXRpb25zUHJvY2Vzc2VkOiBudW1iZXI7XG4gICAgdG90YWxOZXdDb252ZXJzYXRpb25zU3VjY2Vzc2Z1bGx5SW1wb3J0ZWQ6IG51bWJlcjtcbiAgICB0b3RhbENvbnZlcnNhdGlvbnNBY3R1YWxseVVwZGF0ZWQ6IG51bWJlcjtcbiAgICB0b3RhbE5vbkVtcHR5TWVzc2FnZXNBZGRlZDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgRmlsZVNlY3Rpb24ge1xuICAgIGZpbGVOYW1lOiBzdHJpbmc7XG4gICAgY3JlYXRlZDogUmVwb3J0RW50cnlbXTtcbiAgICB1cGRhdGVkOiBSZXBvcnRFbnRyeVtdO1xuICAgIHNraXBwZWQ6IFJlcG9ydEVudHJ5W107XG4gICAgZmFpbGVkOiBSZXBvcnRFbnRyeVtdO1xuICAgIGNvdW50ZXJzOiBQcm9jZXNzaW5nQ291bnRlcnM7XG59XG5cbmV4cG9ydCBjbGFzcyBJbXBvcnRSZXBvcnQge1xuICAgIHByaXZhdGUgZmlsZVNlY3Rpb25zOiBNYXA8c3RyaW5nLCBGaWxlU2VjdGlvbj4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBjdXJyZW50RmlsZU5hbWU6IHN0cmluZyA9IFwiXCI7XG4gICAgcHJpdmF0ZSBnbG9iYWxFcnJvcnM6IHsgbWVzc2FnZTogc3RyaW5nOyBkZXRhaWxzOiBzdHJpbmcgfVtdID0gW107XG4gICAgcHJpdmF0ZSBwcm92aWRlclNwZWNpZmljQ29sdW1uSGVhZGVyOiBzdHJpbmcgPSBcIkF0dGFjaG1lbnRzXCI7XG4gICAgcHJpdmF0ZSBvcGVyYXRpb25TdGFydFRpbWU6IG51bWJlciA9IERhdGUubm93KCk7XG4gICAgcHJpdmF0ZSBmaWxlU3RhdHM/OiBNYXA8c3RyaW5nLCBhbnk+OyAvLyBTdG9yZSBmaWxlIGFuYWx5c2lzIHN0YXRzIGZvciBkdXBsaWNhdGUgY291bnRpbmdcbiAgICBwcml2YXRlIGFuYWx5c2lzSW5mbz86IGFueTsgLy8gU3RvcmUgYW5hbHlzaXMgaW5mbyBmb3IgY29tcGxldGlvbiBzdGF0c1xuICAgIHByaXZhdGUgY3VzdG9tVGltZXN0YW1wRm9ybWF0PzogTWVzc2FnZVRpbWVzdGFtcEZvcm1hdDsgLy8gQ3VzdG9tIGZvcm1hdCBmb3IgcmVwb3J0IGRhdGVzXG5cbiAgICAvKipcbiAgICAgKiBTdGFydCBhIG5ldyBmaWxlIHNlY3Rpb24gZm9yIG11bHRpLWZpbGUgaW1wb3J0c1xuICAgICAqL1xuICAgIHN0YXJ0RmlsZVNlY3Rpb24oZmlsZU5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLmN1cnJlbnRGaWxlTmFtZSA9IGZpbGVOYW1lO1xuICAgICAgICBpZiAoIXRoaXMuZmlsZVNlY3Rpb25zLmhhcyhmaWxlTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZVNlY3Rpb25zLnNldChmaWxlTmFtZSwge1xuICAgICAgICAgICAgICAgIGZpbGVOYW1lLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IFtdLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWQ6IFtdLFxuICAgICAgICAgICAgICAgIHNraXBwZWQ6IFtdLFxuICAgICAgICAgICAgICAgIGZhaWxlZDogW10sXG4gICAgICAgICAgICAgICAgY291bnRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxDb252ZXJzYXRpb25zUHJvY2Vzc2VkOiAwLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbE5ld0NvbnZlcnNhdGlvbnNTdWNjZXNzZnVsbHlJbXBvcnRlZDogMCxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxDb252ZXJzYXRpb25zQWN0dWFsbHlVcGRhdGVkOiAwLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbE5vbkVtcHR5TWVzc2FnZXNBZGRlZDogMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGNvdW50ZXJzIGZvciB0aGUgY3VycmVudCBmaWxlIHNlY3Rpb25cbiAgICAgKi9cbiAgICBzZXRGaWxlQ291bnRlcnMoY291bnRlcnM6IFByb2Nlc3NpbmdDb3VudGVycykge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5nZXRDdXJyZW50U2VjdGlvbigpO1xuICAgICAgICBpZiAoc2VjdGlvbikge1xuICAgICAgICAgICAgc2VjdGlvbi5jb3VudGVycyA9IGNvdW50ZXJzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDdXJyZW50U2VjdGlvbigpOiBGaWxlU2VjdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbGVTZWN0aW9ucy5nZXQodGhpcy5jdXJyZW50RmlsZU5hbWUpO1xuICAgIH1cblxuICAgIHNldFByb3ZpZGVyU3BlY2lmaWNDb2x1bW5IZWFkZXIoaGVhZGVyOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5wcm92aWRlclNwZWNpZmljQ29sdW1uSGVhZGVyID0gaGVhZGVyO1xuICAgIH1cblxuICAgIHNldEN1c3RvbVRpbWVzdGFtcEZvcm1hdChmb3JtYXQ/OiBNZXNzYWdlVGltZXN0YW1wRm9ybWF0KSB7XG4gICAgICAgIHRoaXMuY3VzdG9tVGltZXN0YW1wRm9ybWF0ID0gZm9ybWF0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExlZ2FjeSBtZXRob2QgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgKHNpbmdsZSBmaWxlIGltcG9ydHMpXG4gICAgICovXG4gICAgYWRkU3VtbWFyeSh6aXBGaWxlTmFtZTogc3RyaW5nLCBjb3VudGVyczogUHJvY2Vzc2luZ0NvdW50ZXJzKSB7XG4gICAgICAgIC8vIEZvciBzaW5nbGUgZmlsZSBpbXBvcnRzLCBqdXN0IHN0YXJ0IGEgc2VjdGlvbiBhbmQgc2V0IGNvdW50ZXJzXG4gICAgICAgIHRoaXMuc3RhcnRGaWxlU2VjdGlvbih6aXBGaWxlTmFtZSk7XG4gICAgICAgIHRoaXMuc2V0RmlsZUNvdW50ZXJzKGNvdW50ZXJzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFRvdGFsQXR0YWNobWVudFN0YXRzKCk6IEF0dGFjaG1lbnRTdGF0cyB7XG4gICAgICAgIGNvbnN0IHRvdGFsID0geyB0b3RhbDogMCwgZm91bmQ6IDAsIG1pc3Npbmc6IDAsIGZhaWxlZDogMCB9O1xuXG4gICAgICAgIHRoaXMuZmlsZVNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiB7XG4gICAgICAgICAgICBbLi4uc2VjdGlvbi5jcmVhdGVkLCAuLi5zZWN0aW9uLnVwZGF0ZWRdLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIENvdW50IHJlZ3VsYXIgYXR0YWNobWVudHMgKHVwbG9hZGVkIGZpbGVzKVxuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRhY2htZW50U3RhdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdG90YWwudG90YWwgKz0gZW50cnkuYXR0YWNobWVudFN0YXRzLnRvdGFsO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbC5mb3VuZCArPSBlbnRyeS5hdHRhY2htZW50U3RhdHMuZm91bmQ7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsLm1pc3NpbmcgKz0gZW50cnkuYXR0YWNobWVudFN0YXRzLm1pc3Npbmc7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsLmZhaWxlZCArPSBlbnRyeS5hdHRhY2htZW50U3RhdHMuZmFpbGVkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENvdW50IGFydGlmYWN0cyBhcyBhdHRhY2htZW50cyAodGhleSBhcmUgc3RvcmVkIGluIGF0dGFjaG1lbnRGb2xkZXIpXG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LnByb3ZpZGVyU3BlY2lmaWNDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICB0b3RhbC50b3RhbCArPSBlbnRyeS5wcm92aWRlclNwZWNpZmljQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsLmZvdW5kICs9IGVudHJ5LnByb3ZpZGVyU3BlY2lmaWNDb3VudDsgLy8gQXJ0aWZhY3RzIGFyZSBhbHdheXMgc3VjY2Vzc2Z1bGx5IGNyZWF0ZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRvdGFsO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RmlsZVNlY3Rpb25BdHRhY2htZW50U3RhdHMoc2VjdGlvbjogRmlsZVNlY3Rpb24pOiBBdHRhY2htZW50U3RhdHMge1xuICAgICAgICBjb25zdCB0b3RhbCA9IHsgdG90YWw6IDAsIGZvdW5kOiAwLCBtaXNzaW5nOiAwLCBmYWlsZWQ6IDAgfTtcblxuICAgICAgICBbLi4uc2VjdGlvbi5jcmVhdGVkLCAuLi5zZWN0aW9uLnVwZGF0ZWRdLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICAgICAgLy8gQ291bnQgcmVndWxhciBhdHRhY2htZW50cyAodXBsb2FkZWQgZmlsZXMpXG4gICAgICAgICAgICBpZiAoZW50cnkuYXR0YWNobWVudFN0YXRzKSB7XG4gICAgICAgICAgICAgICAgdG90YWwudG90YWwgKz0gZW50cnkuYXR0YWNobWVudFN0YXRzLnRvdGFsO1xuICAgICAgICAgICAgICAgIHRvdGFsLmZvdW5kICs9IGVudHJ5LmF0dGFjaG1lbnRTdGF0cy5mb3VuZDtcbiAgICAgICAgICAgICAgICB0b3RhbC5taXNzaW5nICs9IGVudHJ5LmF0dGFjaG1lbnRTdGF0cy5taXNzaW5nO1xuICAgICAgICAgICAgICAgIHRvdGFsLmZhaWxlZCArPSBlbnRyeS5hdHRhY2htZW50U3RhdHMuZmFpbGVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb3VudCBhcnRpZmFjdHMgYXMgYXR0YWNobWVudHMgKHRoZXkgYXJlIHN0b3JlZCBpbiBhdHRhY2htZW50Rm9sZGVyKVxuICAgICAgICAgICAgaWYgKGVudHJ5LnByb3ZpZGVyU3BlY2lmaWNDb3VudCkge1xuICAgICAgICAgICAgICAgIHRvdGFsLnRvdGFsICs9IGVudHJ5LnByb3ZpZGVyU3BlY2lmaWNDb3VudDtcbiAgICAgICAgICAgICAgICB0b3RhbC5mb3VuZCArPSBlbnRyeS5wcm92aWRlclNwZWNpZmljQ291bnQ7IC8vIEFydGlmYWN0cyBhcmUgYWx3YXlzIHN1Y2Nlc3NmdWxseSBjcmVhdGVkXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0b3RhbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEdsb2JhbFN0YXRzKCkge1xuICAgICAgICBsZXQgY3JlYXRlZCA9IDA7XG4gICAgICAgIGxldCB1cGRhdGVkID0gMDtcbiAgICAgICAgbGV0IHNraXBwZWQgPSAwO1xuICAgICAgICBsZXQgZmFpbGVkID0gMDtcbiAgICAgICAgbGV0IHRvdGFsUHJvY2Vzc2VkID0gMDtcbiAgICAgICAgbGV0IG5ld01lc3NhZ2VzID0gMDtcblxuICAgICAgICB0aGlzLmZpbGVTZWN0aW9ucy5mb3JFYWNoKHNlY3Rpb24gPT4ge1xuICAgICAgICAgICAgY3JlYXRlZCArPSBzZWN0aW9uLmNyZWF0ZWQubGVuZ3RoO1xuICAgICAgICAgICAgdXBkYXRlZCArPSBzZWN0aW9uLnVwZGF0ZWQubGVuZ3RoO1xuICAgICAgICAgICAgc2tpcHBlZCArPSBzZWN0aW9uLnNraXBwZWQubGVuZ3RoO1xuICAgICAgICAgICAgZmFpbGVkICs9IHNlY3Rpb24uZmFpbGVkLmxlbmd0aDtcbiAgICAgICAgICAgIHRvdGFsUHJvY2Vzc2VkICs9IHNlY3Rpb24uY291bnRlcnMudG90YWxDb252ZXJzYXRpb25zUHJvY2Vzc2VkO1xuICAgICAgICAgICAgbmV3TWVzc2FnZXMgKz0gc2VjdGlvbi5jb3VudGVycy50b3RhbE5vbkVtcHR5TWVzc2FnZXNBZGRlZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHsgY3JlYXRlZCwgdXBkYXRlZCwgc2tpcHBlZCwgZmFpbGVkLCB0b3RhbFByb2Nlc3NlZCwgbmV3TWVzc2FnZXMgfTtcbiAgICB9XG5cbiAgICBhZGRDcmVhdGVkKHRpdGxlOiBzdHJpbmcsIGZpbGVQYXRoOiBzdHJpbmcsIGNyZWF0ZVRpbWU6IG51bWJlciwgdXBkYXRlVGltZTogbnVtYmVyLCBtZXNzYWdlQ291bnQ6IG51bWJlciwgYXR0YWNobWVudFN0YXRzPzogQXR0YWNobWVudFN0YXRzLCBwcm92aWRlclNwZWNpZmljQ291bnQ/OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuZ2V0Q3VycmVudFNlY3Rpb24oKTtcbiAgICAgICAgaWYgKHNlY3Rpb24pIHtcbiAgICAgICAgICAgIHNlY3Rpb24uY3JlYXRlZC5wdXNoKHsgdGl0bGUsIGZpbGVQYXRoLCBjcmVhdGVUaW1lLCB1cGRhdGVUaW1lLCBtZXNzYWdlQ291bnQsIGF0dGFjaG1lbnRTdGF0cywgcHJvdmlkZXJTcGVjaWZpY0NvdW50LCBzb3VyY2VGaWxlOiB0aGlzLmN1cnJlbnRGaWxlTmFtZSB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZFVwZGF0ZWQodGl0bGU6IHN0cmluZywgZmlsZVBhdGg6IHN0cmluZywgY3JlYXRlVGltZTogbnVtYmVyLCB1cGRhdGVUaW1lOiBudW1iZXIsIG5ld01lc3NhZ2VDb3VudDogbnVtYmVyLCBhdHRhY2htZW50U3RhdHM/OiBBdHRhY2htZW50U3RhdHMsIHByb3ZpZGVyU3BlY2lmaWNDb3VudD86IG51bWJlcikge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5nZXRDdXJyZW50U2VjdGlvbigpO1xuICAgICAgICBpZiAoc2VjdGlvbikge1xuICAgICAgICAgICAgc2VjdGlvbi51cGRhdGVkLnB1c2goeyB0aXRsZSwgZmlsZVBhdGgsIGNyZWF0ZVRpbWUsIHVwZGF0ZVRpbWUsIG5ld01lc3NhZ2VDb3VudCwgYXR0YWNobWVudFN0YXRzLCBwcm92aWRlclNwZWNpZmljQ291bnQsIHNvdXJjZUZpbGU6IHRoaXMuY3VycmVudEZpbGVOYW1lIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkU2tpcHBlZCh0aXRsZTogc3RyaW5nLCBmaWxlUGF0aDogc3RyaW5nLCBjcmVhdGVUaW1lOiBudW1iZXIsIHVwZGF0ZVRpbWU6IG51bWJlciwgbWVzc2FnZUNvdW50OiBudW1iZXIsIHJlYXNvbjogc3RyaW5nLCBhdHRhY2htZW50U3RhdHM/OiBBdHRhY2htZW50U3RhdHMsIHByb3ZpZGVyU3BlY2lmaWNDb3VudD86IG51bWJlcikge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5nZXRDdXJyZW50U2VjdGlvbigpO1xuICAgICAgICBpZiAoc2VjdGlvbikge1xuICAgICAgICAgICAgc2VjdGlvbi5za2lwcGVkLnB1c2goeyB0aXRsZSwgZmlsZVBhdGgsIGNyZWF0ZVRpbWUsIHVwZGF0ZVRpbWUsIG1lc3NhZ2VDb3VudCwgcmVhc29uLCBhdHRhY2htZW50U3RhdHMsIHByb3ZpZGVyU3BlY2lmaWNDb3VudCwgc291cmNlRmlsZTogdGhpcy5jdXJyZW50RmlsZU5hbWUgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRGYWlsZWQodGl0bGU6IHN0cmluZywgZmlsZVBhdGg6IHN0cmluZywgY3JlYXRlVGltZTogbnVtYmVyLCB1cGRhdGVUaW1lOiBudW1iZXIsIGVycm9yTWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLmdldEN1cnJlbnRTZWN0aW9uKCk7XG4gICAgICAgIGlmIChzZWN0aW9uKSB7XG4gICAgICAgICAgICBzZWN0aW9uLmZhaWxlZC5wdXNoKHsgdGl0bGUsIGZpbGVQYXRoLCBjcmVhdGVUaW1lLCB1cGRhdGVUaW1lLCBlcnJvck1lc3NhZ2UsIHNvdXJjZUZpbGU6IHRoaXMuY3VycmVudEZpbGVOYW1lIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkRXJyb3IobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5nbG9iYWxFcnJvcnMucHVzaCh7IG1lc3NhZ2UsIGRldGFpbHMgfSk7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVSZXBvcnRDb250ZW50KFxuICAgICAgICBhbGxGaWxlcz86IEZpbGVbXSxcbiAgICAgICAgcHJvY2Vzc2VkRmlsZXM/OiBzdHJpbmdbXSxcbiAgICAgICAgc2tpcHBlZEZpbGVzPzogc3RyaW5nW10sXG4gICAgICAgIGFuYWx5c2lzSW5mbz86IGFueSxcbiAgICAgICAgZmlsZVN0YXRzPzogTWFwPHN0cmluZywgYW55PixcbiAgICAgICAgaXNTZWxlY3RpdmVJbXBvcnQ/OiBib29sZWFuXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBcIiMgTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciBSZXBvcnRcXG5cXG5cIjtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBnbG9iYWwgc3VtbWFyeVxuICAgICAgICBjb250ZW50ICs9IHRoaXMuZ2VuZXJhdGVHbG9iYWxTdW1tYXJ5KGFsbEZpbGVzLCBwcm9jZXNzZWRGaWxlcywgc2tpcHBlZEZpbGVzLCBhbmFseXNpc0luZm8sIGZpbGVTdGF0cywgaXNTZWxlY3RpdmVJbXBvcnQpICsgXCJcXG5cXG5cIjtcblxuICAgICAgICAvLyBTaG93IHNraXBwZWQgZmlsZXMgc2VjdGlvbiBpZiBhbnlcbiAgICAgICAgaWYgKHNraXBwZWRGaWxlcyAmJiBza2lwcGVkRmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVudCArPSB0aGlzLmdlbmVyYXRlU2tpcHBlZEZpbGVzU2VjdGlvbihza2lwcGVkRmlsZXMsIGlzU2VsZWN0aXZlSW1wb3J0KSArIFwiXFxuXFxuXCI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZW5lcmF0ZSBzZWN0aW9uIGZvciBlYWNoIGZpbGVcbiAgICAgICAgY29uc3QgZmlsZU5hbWVzID0gQXJyYXkuZnJvbSh0aGlzLmZpbGVTZWN0aW9ucy5rZXlzKCkpO1xuXG4gICAgICAgIGlmIChmaWxlTmFtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBObyBmaWxlcyB3ZXJlIHByb2Nlc3NlZFxuICAgICAgICAgICAgY29udGVudCArPSBcIiMjIFJlc3VsdFxcblxcblwiO1xuICAgICAgICAgICAgY29udGVudCArPSBcIk5vIGNvbnZlcnNhdGlvbnMgd2VyZSBpbXBvcnRlZC4gQWxsIGNvbnZlcnNhdGlvbnMgYXJlIGFscmVhZHkgdXAgdG8gZGF0ZS5cXG5cXG5cIjtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlTmFtZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvLyBTaW5nbGUgZmlsZSBpbXBvcnQgLSB1c2Ugc2ltcGxpZmllZCBmb3JtYXRcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLmZpbGVTZWN0aW9ucy5nZXQoZmlsZU5hbWVzWzBdKSE7XG4gICAgICAgICAgICBjb250ZW50ICs9IHRoaXMuZ2VuZXJhdGVGaWxlQ29udGVudChzZWN0aW9uLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBNdWx0aS1maWxlIGltcG9ydCAtIGNoYXB0ZXJlZCBieSBmaWxlXG4gICAgICAgICAgICBjb250ZW50ICs9IFwiLS0tXFxuXFxuXCI7XG4gICAgICAgICAgICBjb250ZW50ICs9IFwiIyMgUHJvY2Vzc2VkIEZpbGVzXFxuXFxuXCI7XG4gICAgICAgICAgICBmaWxlTmFtZXMuZm9yRWFjaCgoZmlsZU5hbWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuZmlsZVNlY3Rpb25zLmdldChmaWxlTmFtZSkhO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCMjIyBGaWxlICR7aW5kZXggKyAxfTogJHtmaWxlTmFtZX1cXG5cXG5gO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gdGhpcy5nZW5lcmF0ZUZpbGVTdW1tYXJ5KHNlY3Rpb24pICsgXCJcXG5cXG5cIjtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IHRoaXMuZ2VuZXJhdGVGaWxlQ29udGVudChzZWN0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCBmaWxlTmFtZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9IFwiXFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHbG9iYWwgZXJyb3JzIGF0IHRoZSBlbmRcbiAgICAgICAgaWYgKHRoaXMuZ2xvYmFsRXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYC0tLVxcblxcbmA7XG4gICAgICAgICAgICBjb250ZW50ICs9IHRoaXMuZ2VuZXJhdGVFcnJvclRhYmxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXRlU2tpcHBlZEZpbGVzU2VjdGlvbihza2lwcGVkRmlsZXM6IHN0cmluZ1tdLCBpc1NlbGVjdGl2ZUltcG9ydD86IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB0aXRsZSA9IGlzU2VsZWN0aXZlSW1wb3J0XG4gICAgICAgICAgICA/IFwiXHUyM0VEXHVGRTBGIFNraXBwZWQgRmlsZXMgKE5vIFNlbGVjdGVkIENvbnZlcnNhdGlvbnMpXCJcbiAgICAgICAgICAgIDogXCJcdTIzRURcdUZFMEYgU2tpcHBlZCBGaWxlcyAoQWxyZWFkeSBVcCB0byBEYXRlKVwiO1xuXG4gICAgICAgIGNvbnN0IGV4cGxhbmF0aW9uID0gaXNTZWxlY3RpdmVJbXBvcnRcbiAgICAgICAgICAgID8gXCJGaWxlcyBub3QgcHJvY2Vzc2VkIGJlY2F1c2UgdGhleSBjb250YWluIG5vIHNlbGVjdGVkIGNvbnZlcnNhdGlvbnNcIlxuICAgICAgICAgICAgOiBcIkZpbGVzIGFuYWx5emVkIGJ1dCBub3QgcHJvY2Vzc2VkIGJlY2F1c2UgYWxsIGNvbnZlcnNhdGlvbnMgYXJlIGFscmVhZHkgdXAgdG8gZGF0ZVwiO1xuXG4gICAgICAgIGxldCBzZWN0aW9uID0gYD4gWyFub3RlXS0gJHt0aXRsZX1cXG5gO1xuICAgICAgICBzZWN0aW9uICs9IGA+ICR7ZXhwbGFuYXRpb259XFxuYDtcbiAgICAgICAgc2VjdGlvbiArPSBgPiBcXG5gO1xuICAgICAgICBzZWN0aW9uICs9IGA+ICoqVG90YWw6KiogJHtza2lwcGVkRmlsZXMubGVuZ3RofSBmaWxlc1xcbmA7XG4gICAgICAgIHNlY3Rpb24gKz0gYD4gXFxuYDtcbiAgICAgICAgc2VjdGlvbiArPSBgPiA8ZGV0YWlscz5cXG5gO1xuICAgICAgICBzZWN0aW9uICs9IGA+IDxzdW1tYXJ5PlZpZXcgZmlsZSBsaXN0PC9zdW1tYXJ5PlxcbmA7XG4gICAgICAgIHNlY3Rpb24gKz0gYD4gXFxuYDtcbiAgICAgICAgc2tpcHBlZEZpbGVzLmZvckVhY2goZmlsZU5hbWUgPT4ge1xuICAgICAgICAgICAgc2VjdGlvbiArPSBgPiAtIFxcYCR7ZmlsZU5hbWV9XFxgXFxuYDtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlY3Rpb24gKz0gYD4gXFxuYDtcbiAgICAgICAgc2VjdGlvbiArPSBgPiA8L2RldGFpbHM+XFxuYDtcblxuICAgICAgICByZXR1cm4gc2VjdGlvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXRlR2xvYmFsU3VtbWFyeShcbiAgICAgICAgYWxsRmlsZXM/OiBGaWxlW10sXG4gICAgICAgIHByb2Nlc3NlZEZpbGVzPzogc3RyaW5nW10sXG4gICAgICAgIHNraXBwZWRGaWxlcz86IHN0cmluZ1tdLFxuICAgICAgICBhbmFseXNpc0luZm8/OiBhbnksXG4gICAgICAgIGZpbGVTdGF0cz86IE1hcDxzdHJpbmcsIGFueT4sXG4gICAgICAgIGlzU2VsZWN0aXZlSW1wb3J0PzogYm9vbGVhblxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5nZXRHbG9iYWxTdGF0cygpO1xuICAgICAgICBjb25zdCB0b3RhbEF0dGFjaG1lbnRzID0gdGhpcy5nZXRUb3RhbEF0dGFjaG1lbnRTdGF0cygpO1xuICAgICAgICBjb25zdCBmaWxlQ291bnQgPSB0aGlzLmZpbGVTZWN0aW9ucy5zaXplO1xuICAgICAgICBjb25zdCB0b3RhbEZpbGVzQW5hbHl6ZWQgPSBhbGxGaWxlcyA/IGFsbEZpbGVzLmxlbmd0aCA6IGZpbGVDb3VudDtcbiAgICAgICAgY29uc3QgZmlsZXNTa2lwcGVkID0gc2tpcHBlZEZpbGVzID8gc2tpcHBlZEZpbGVzLmxlbmd0aCA6IDA7XG5cbiAgICAgICAgbGV0IHN1bW1hcnkgPSBgIyMgXHVEODNEXHVEQ0NBIEltcG9ydCBTdW1tYXJ5XFxuXFxuYDtcblxuICAgICAgICAvLyBGaWxlcyBhbmFseXplZCB0YWJsZSAtIHNob3cgYWxsIGZpbGVzIHdpdGggdGhlaXIgc3RhdHVzXG4gICAgICAgIGlmIChhbGxGaWxlcyAmJiBhbGxGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzdW1tYXJ5ICs9IGAjIyMgXHVEODNEXHVEQ0U2IEZpbGVzIEFuYWx5emVkXFxuXFxuYDtcbiAgICAgICAgICAgIHN1bW1hcnkgKz0gYHwgRmlsZSB8IENvbnZlcnNhdGlvbnMgfCBEdXBsaWNhdGVzIHwgU2tpcHBlZCB8IFNlbGVjdGVkIHwgQ3JlYXRlZCB8IFVwZGF0ZWQgfFxcbmA7XG4gICAgICAgICAgICBzdW1tYXJ5ICs9IGB8Oi0tLXwtLS06fC0tLTp8LS0tOnwtLS06fC0tLTp8LS0tOnxcXG5gO1xuXG4gICAgICAgICAgICAvLyBDb21iaW5lIGFsbCBmaWxlcyAocHJvY2Vzc2VkIGFuZCBza2lwcGVkKSB3aXRoIHRoZWlyIHN0YXRzXG4gICAgICAgICAgICBpbnRlcmZhY2UgRmlsZUluZm8ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgICAgICAgICBmaWxlPzogRmlsZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZmlsZUluZm9zOiBGaWxlSW5mb1tdID0gW107XG5cbiAgICAgICAgICAgIC8vIEFkZCBhbGwgZmlsZXNcbiAgICAgICAgICAgIGFsbEZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgZmlsZUluZm9zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGZpbGU6IGZpbGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBTb3J0IGJ5IGZpbGUgbGFzdE1vZGlmaWVkIGRhdGUgKG9sZGVzdCBmaXJzdClcbiAgICAgICAgICAgIGZpbGVJbmZvcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZUEgPSBhLmZpbGU/Lmxhc3RNb2RpZmllZCB8fCAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVCID0gYi5maWxlPy5sYXN0TW9kaWZpZWQgfHwgMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGltZUEgLSB0aW1lQjsgLy8gQXNjZW5kaW5nIG9yZGVyIChvbGRlc3QgZmlyc3QpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgdGFibGUgcm93cyB1c2luZyBmaWxlU3RhdHNcbiAgICAgICAgICAgIGZpbGVJbmZvcy5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gZmlsZVN0YXRzPy5nZXQoaW5mby5uYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5maWxlU2VjdGlvbnMuZ2V0KGluZm8ubmFtZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3RhdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIGFuYWx5c2lzIHN0YXRzIGZyb20gbWV0YWRhdGEgZXh0cmFjdGlvblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVkID0gc2VjdGlvbj8uY3JlYXRlZC5sZW5ndGggfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IHNlY3Rpb24/LnVwZGF0ZWQubGVuZ3RoIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNraXBwZWQgPSBzdGF0cy5za2lwcGVkQ29udmVyc2F0aW9ucyB8fCAwO1xuXG4gICAgICAgICAgICAgICAgICAgIHN1bW1hcnkgKz0gYHwgXFxgJHtpbmZvLm5hbWV9XFxgIHwgJHtzdGF0cy50b3RhbENvbnZlcnNhdGlvbnN9IHwgJHtzdGF0cy5kdXBsaWNhdGVzfSB8ICR7c2tpcHBlZH0gfCAke3N0YXRzLnNlbGVjdGVkRm9ySW1wb3J0fSB8ICR7Y3JlYXRlZH0gfCAke3VwZGF0ZWR9IHxcXG5gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbGUgd2FzIHNraXBwZWQgb3Igbm8gc3RhdHMgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgIHN1bW1hcnkgKz0gYHwgXFxgJHtpbmZvLm5hbWV9XFxgIHwgLSB8IC0gfCAtIHwgLSB8IDAgfCAwIHxcXG5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzdW1tYXJ5ICs9IGBcXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2xvYmFsIHN0YXRzIGNhbGxvdXQgLSBvbmx5IHNob3cgaWYgTk9UIHNlbGVjdGl2ZSBpbXBvcnRcbiAgICAgICAgaWYgKGFuYWx5c2lzSW5mbyAmJiAhaXNTZWxlY3RpdmVJbXBvcnQpIHtcbiAgICAgICAgICAgIHN1bW1hcnkgKz0gYD4gWyFpbmZvXS0gXHVEODNEXHVERDBEIEdsb2JhbCBTdGF0aXN0aWNzXFxuYDtcbiAgICAgICAgICAgIHN1bW1hcnkgKz0gYD4gXFxuYDtcbiAgICAgICAgICAgIHN1bW1hcnkgKz0gYD4gfCBNZXRyaWMgfCBDb3VudCB8XFxuYDtcbiAgICAgICAgICAgIHN1bW1hcnkgKz0gYD4gfDotLS18LS0tOnxcXG5gO1xuICAgICAgICAgICAgc3VtbWFyeSArPSBgPiB8IFRvdGFsIENvbnZlcnNhdGlvbnMgRm91bmQgfCAke2FuYWx5c2lzSW5mby50b3RhbENvbnZlcnNhdGlvbnNGb3VuZCB8fCAwfSB8XFxuYDtcbiAgICAgICAgICAgIHN1bW1hcnkgKz0gYD4gfCBVbmlxdWUgQ29udmVyc2F0aW9ucyB8ICR7YW5hbHlzaXNJbmZvLnVuaXF1ZUNvbnZlcnNhdGlvbnNLZXB0IHx8IDB9IHxcXG5gO1xuICAgICAgICAgICAgaWYgKGFuYWx5c2lzSW5mby5kdXBsaWNhdGVzUmVtb3ZlZCA+IDApIHtcbiAgICAgICAgICAgICAgICBzdW1tYXJ5ICs9IGA+IHwgRHVwbGljYXRlcyBSZW1vdmVkIHwgJHthbmFseXNpc0luZm8uZHVwbGljYXRlc1JlbW92ZWR9IHxcXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3VtbWFyeSArPSBgPiB8IE5ldyB8ICR7YW5hbHlzaXNJbmZvLmNvbnZlcnNhdGlvbnNOZXcgfHwgMH0gfFxcbmA7XG4gICAgICAgICAgICBzdW1tYXJ5ICs9IGA+IHwgVXBkYXRlZCB8ICR7YW5hbHlzaXNJbmZvLmNvbnZlcnNhdGlvbnNVcGRhdGVkIHx8IDB9IHxcXG5gO1xuICAgICAgICAgICAgc3VtbWFyeSArPSBgPiB8IFNraXBwZWQgfCAke2FuYWx5c2lzSW5mby5jb252ZXJzYXRpb25zSWdub3JlZCB8fCAwfSB8XFxuYDtcbiAgICAgICAgICAgIHN1bW1hcnkgKz0gYFxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbXBvcnQgcmVzdWx0cyBzdW1tYXJ5XG4gICAgICAgIHN1bW1hcnkgKz0gYCMjIyBcdUQ4M0RcdURDRTUgSW1wb3J0IFN1bW1hcnlcXG5cXG5gO1xuICAgICAgICBzdW1tYXJ5ICs9IGB8IENhdGVnb3J5IHwgQ291bnQgfFxcbmA7XG4gICAgICAgIHN1bW1hcnkgKz0gYHw6LS0tfC0tLTp8XFxuYDtcbiAgICAgICAgc3VtbWFyeSArPSBgfCAqKlRvdGFsIEltcG9ydGVkKiogfCAqKiR7c3RhdHMuY3JlYXRlZCArIHN0YXRzLnVwZGF0ZWR9KiogfFxcbmA7XG4gICAgICAgIHN1bW1hcnkgKz0gYHwgXHUyNzI4IENyZWF0ZWQgfCAke3N0YXRzLmNyZWF0ZWR9IHxcXG5gO1xuICAgICAgICBzdW1tYXJ5ICs9IGB8IFx1RDgzRFx1REQwNCBVcGRhdGVkIHwgJHtzdGF0cy51cGRhdGVkfWA7XG4gICAgICAgIGlmIChzdGF0cy5uZXdNZXNzYWdlcyA+IDApIHtcbiAgICAgICAgICAgIHN1bW1hcnkgKz0gYCAoJHtzdGF0cy5uZXdNZXNzYWdlc30gbmV3IG1lc3NhZ2VzKWA7XG4gICAgICAgIH1cbiAgICAgICAgc3VtbWFyeSArPSBgIHxcXG5gO1xuXG4gICAgICAgIGlmIChzdGF0cy5za2lwcGVkID4gMCkge1xuICAgICAgICAgICAgc3VtbWFyeSArPSBgfCBcdTIzRURcdUZFMEYgU2tpcHBlZCAodW5jaGFuZ2VkKSB8ICR7c3RhdHMuc2tpcHBlZH0gfFxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRzLmZhaWxlZCA+IDApIHtcbiAgICAgICAgICAgIHN1bW1hcnkgKz0gYHwgXHUyNzRDIEZhaWxlZCB8ICR7c3RhdHMuZmFpbGVkfSB8XFxuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5nbG9iYWxFcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc3VtbWFyeSArPSBgfCBcdTI2QTBcdUZFMEYgRXJyb3JzIHwgJHt0aGlzLmdsb2JhbEVycm9ycy5sZW5ndGh9IHxcXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRvdGFsQXR0YWNobWVudHMudG90YWwgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRhY2htZW50SWNvbiA9IHRvdGFsQXR0YWNobWVudHMuZm91bmQgPT09IHRvdGFsQXR0YWNobWVudHMudG90YWwgPyAnXHUyNzA1JyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQXR0YWNobWVudHMuZm91bmQgPT09IDAgPyAnXHUyNzRDJyA6ICdcdTI2QTBcdUZFMEYnO1xuICAgICAgICAgICAgc3VtbWFyeSArPSBgfCAke2F0dGFjaG1lbnRJY29ufSBBdHRhY2htZW50cyB8ICR7dG90YWxBdHRhY2htZW50cy5mb3VuZH0vJHt0b3RhbEF0dGFjaG1lbnRzLnRvdGFsfSB8XFxuYDtcbiAgICAgICAgICAgIGlmICh0b3RhbEF0dGFjaG1lbnRzLm1pc3NpbmcgPiAwIHx8IHRvdGFsQXR0YWNobWVudHMuZmFpbGVkID4gMCkge1xuICAgICAgICAgICAgICAgIHN1bW1hcnkgKz0gYHwgXHUyNTE0XHUyNTAwIE1pc3NpbmcgfCAke3RvdGFsQXR0YWNobWVudHMubWlzc2luZ30gfFxcbmA7XG4gICAgICAgICAgICAgICAgc3VtbWFyeSArPSBgfCBcdTI1MTRcdTI1MDAgRmFpbGVkIHwgJHt0b3RhbEF0dGFjaG1lbnRzLmZhaWxlZH0gfFxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VtbWFyeTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXRlRmlsZVN1bW1hcnkoc2VjdGlvbjogRmlsZVNlY3Rpb24pOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBhdHRhY2htZW50U3RhdHMgPSB0aGlzLmdldEZpbGVTZWN0aW9uQXR0YWNobWVudFN0YXRzKHNlY3Rpb24pO1xuICAgICAgICBjb25zdCBhdHRhY2htZW50U3VtbWFyeSA9IGF0dGFjaG1lbnRTdGF0cy50b3RhbCA+IDBcbiAgICAgICAgICAgID8gYFxcbi0gKipBdHRhY2htZW50cyoqOiAke2F0dGFjaG1lbnRTdGF0cy5mb3VuZH0vJHthdHRhY2htZW50U3RhdHMudG90YWx9IGV4dHJhY3RlZGBcbiAgICAgICAgICAgIDogXCJcIjtcblxuICAgICAgICByZXR1cm4gYCMjIyBTdGF0aXN0aWNzXG4tICoqQ3JlYXRlZCoqOiAke3NlY3Rpb24uY3JlYXRlZC5sZW5ndGh9XG4tICoqVXBkYXRlZCoqOiAke3NlY3Rpb24udXBkYXRlZC5sZW5ndGh9ICgke3NlY3Rpb24uY291bnRlcnMudG90YWxOb25FbXB0eU1lc3NhZ2VzQWRkZWR9IG5ldyBtZXNzYWdlcylcbi0gKipTa2lwcGVkKio6ICR7c2VjdGlvbi5za2lwcGVkLmxlbmd0aH1cbi0gKipGYWlsZWQqKjogJHtzZWN0aW9uLmZhaWxlZC5sZW5ndGh9JHthdHRhY2htZW50U3VtbWFyeX1gO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2VuZXJhdGVGaWxlQ29udGVudChzZWN0aW9uOiBGaWxlU2VjdGlvbiwgaXNNdWx0aUZpbGU6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgICAgICBsZXQgY29udGVudCA9IFwiXCI7XG5cbiAgICAgICAgaWYgKHNlY3Rpb24uY3JlYXRlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW50ICs9IHRoaXMuZ2VuZXJhdGVDcmVhdGVkVGFibGUoc2VjdGlvbi5jcmVhdGVkLCBpc011bHRpRmlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VjdGlvbi51cGRhdGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gdGhpcy5nZW5lcmF0ZVVwZGF0ZWRUYWJsZShzZWN0aW9uLnVwZGF0ZWQsIGlzTXVsdGlGaWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWN0aW9uLmZhaWxlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW50ICs9IHRoaXMuZ2VuZXJhdGVGYWlsZWRUYWJsZShzZWN0aW9uLmZhaWxlZCwgaXNNdWx0aUZpbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUNyZWF0ZWRUYWJsZShlbnRyaWVzOiBSZXBvcnRFbnRyeVtdLCBpc011bHRpRmlsZTogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGlzTXVsdGlGaWxlID8gXCIjIyMgXHUyNzI4IENyZWF0ZWQgTm90ZXNcIiA6IFwiIyMgXHUyNzI4IENyZWF0ZWQgTm90ZXNcIjtcbiAgICAgICAgbGV0IHRhYmxlID0gYCR7aGVhZGVyfVxcblxcbmA7XG4gICAgICAgIHRhYmxlICs9IGB8IHwgVGl0bGUgfCBDcmVhdGVkIHwgTWVzc2FnZXMgfCAke3RoaXMucHJvdmlkZXJTcGVjaWZpY0NvbHVtbkhlYWRlcn0gfFxcbmA7XG4gICAgICAgIHRhYmxlICs9IFwifDotLS06fDotLS18Oi0tLTp8Oi0tLTp8Oi0tLTp8XFxuXCI7XG5cbiAgICAgICAgLy8gU29ydCBieSBjcmVhdGVUaW1lIChvbGRlc3QgZmlyc3QsIG5ld2VzdCBhdCBib3R0b20pIC0gbnVtZXJpYyBzb3J0XG4gICAgICAgIGNvbnN0IHNvcnRlZEVudHJpZXMgPSBbLi4uZW50cmllc10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGEuY3JlYXRlVGltZSAtIGIuY3JlYXRlVGltZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc29ydGVkRW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2FuaXRpemVkVGl0bGUgPSBlbnRyeS50aXRsZS5yZXBsYWNlKC9cXG4vZywgXCIgXCIpLnRyaW0oKTtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlTGluayA9IGBbWyR7ZW50cnkuZmlsZVBhdGh9XFxcXHwke3Nhbml0aXplZFRpdGxlfV1dYDtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyU3BlY2lmaWNWYWx1ZSA9IGVudHJ5LnByb3ZpZGVyU3BlY2lmaWNDb3VudCB8fCAwO1xuXG4gICAgICAgICAgICAvLyBGb3JtYXQgdGltZXN0YW1wIHdpdGggY3VzdG9tIGZvcm1hdCBvciBkZWZhdWx0XG4gICAgICAgICAgICBjb25zdCBjcmVhdGVEYXRlID0gZm9ybWF0TWVzc2FnZVRpbWVzdGFtcChlbnRyeS5jcmVhdGVUaW1lLCB0aGlzLmN1c3RvbVRpbWVzdGFtcEZvcm1hdCk7XG5cbiAgICAgICAgICAgIC8vIEFkZCBncmVlbiBjaGVja21hcmsgZm9yIGFydGlmYWN0cy9hdHRhY2htZW50cyB3aGVuID4gMFxuICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJTcGVjaWZpY0Rpc3BsYXkgPSBwcm92aWRlclNwZWNpZmljVmFsdWUgPiAwID8gYFx1MjcwNSAke3Byb3ZpZGVyU3BlY2lmaWNWYWx1ZX1gIDogcHJvdmlkZXJTcGVjaWZpY1ZhbHVlO1xuXG4gICAgICAgICAgICB0YWJsZSArPSBgfCBcdTI3MjggfCAke3RpdGxlTGlua30gfCAke2NyZWF0ZURhdGV9IHwgJHtlbnRyeS5tZXNzYWdlQ291bnQgfHwgMH0gfCAke3Byb3ZpZGVyU3BlY2lmaWNEaXNwbGF5fSB8XFxuYDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRhYmxlICsgXCJcXG5cXG5cIjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXRlVXBkYXRlZFRhYmxlKGVudHJpZXM6IFJlcG9ydEVudHJ5W10sIGlzTXVsdGlGaWxlOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gaXNNdWx0aUZpbGUgPyBcIiMjIyBcdUQ4M0RcdUREMDQgVXBkYXRlZCBOb3Rlc1wiIDogXCIjIyBcdUQ4M0RcdUREMDQgVXBkYXRlZCBOb3Rlc1wiO1xuICAgICAgICBsZXQgdGFibGUgPSBgJHtoZWFkZXJ9XFxuXFxuYDtcbiAgICAgICAgdGFibGUgKz0gYHwgfCBUaXRsZSB8IFVwZGF0ZWQgfCBOZXcgTWVzc2FnZXMgfCBOZXcgJHt0aGlzLnByb3ZpZGVyU3BlY2lmaWNDb2x1bW5IZWFkZXJ9IHxcXG5gO1xuICAgICAgICB0YWJsZSArPSBcInw6LS0tOnw6LS0tfDotLS06fDotLS06fDotLS06fFxcblwiO1xuXG4gICAgICAgIC8vIFNvcnQgYnkgdXBkYXRlVGltZSAob2xkZXN0IGZpcnN0LCBuZXdlc3QgYXQgYm90dG9tKSAtIG51bWVyaWMgc29ydFxuICAgICAgICBjb25zdCBzb3J0ZWRFbnRyaWVzID0gWy4uLmVudHJpZXNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhLnVwZGF0ZVRpbWUgLSBiLnVwZGF0ZVRpbWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNvcnRlZEVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNhbml0aXplZFRpdGxlID0gZW50cnkudGl0bGUucmVwbGFjZSgvXFxuL2csIFwiIFwiKS50cmltKCk7XG4gICAgICAgICAgICBjb25zdCB0aXRsZUxpbmsgPSBgW1ske2VudHJ5LmZpbGVQYXRofVxcXFx8JHtzYW5pdGl6ZWRUaXRsZX1dXWA7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlclNwZWNpZmljVmFsdWUgPSBlbnRyeS5wcm92aWRlclNwZWNpZmljQ291bnQgfHwgMDtcblxuICAgICAgICAgICAgLy8gRm9ybWF0IHRpbWVzdGFtcCB3aXRoIGN1c3RvbSBmb3JtYXQgb3IgZGVmYXVsdFxuICAgICAgICAgICAgY29uc3QgdXBkYXRlRGF0ZSA9IGZvcm1hdE1lc3NhZ2VUaW1lc3RhbXAoZW50cnkudXBkYXRlVGltZSwgdGhpcy5jdXN0b21UaW1lc3RhbXBGb3JtYXQpO1xuXG4gICAgICAgICAgICAvLyBBZGQgZ3JlZW4gY2hlY2ttYXJrIGZvciBhcnRpZmFjdHMvYXR0YWNobWVudHMgd2hlbiA+IDBcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyU3BlY2lmaWNEaXNwbGF5ID0gcHJvdmlkZXJTcGVjaWZpY1ZhbHVlID4gMCA/IGBcdTI3MDUgJHtwcm92aWRlclNwZWNpZmljVmFsdWV9YCA6IHByb3ZpZGVyU3BlY2lmaWNWYWx1ZTtcblxuICAgICAgICAgICAgdGFibGUgKz0gYHwgXHVEODNEXHVERDA0IHwgJHt0aXRsZUxpbmt9IHwgJHt1cGRhdGVEYXRlfSB8ICR7ZW50cnkubmV3TWVzc2FnZUNvdW50IHx8IDB9IHwgJHtwcm92aWRlclNwZWNpZmljRGlzcGxheX0gfFxcbmA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0YWJsZSArIFwiXFxuXFxuXCI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUZhaWxlZFRhYmxlKGVudHJpZXM6IFJlcG9ydEVudHJ5W10sIGlzTXVsdGlGaWxlOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gaXNNdWx0aUZpbGUgPyBcIiMjIyBcdUQ4M0RcdURFQUIgRmFpbGVkIEltcG9ydHNcIiA6IFwiIyMgXHVEODNEXHVERUFCIEZhaWxlZCBJbXBvcnRzXCI7XG4gICAgICAgIGxldCB0YWJsZSA9IGAke2hlYWRlcn1cXG5cXG5gO1xuICAgICAgICB0YWJsZSArPSBcInwgfCBUaXRsZSB8IERhdGUgfCBFcnJvciB8XFxuXCI7XG4gICAgICAgIHRhYmxlICs9IFwifDotLS06fDotLS18Oi0tLTp8Oi0tLXxcXG5cIjtcblxuICAgICAgICAvLyBTb3J0IGJ5IGNyZWF0ZVRpbWUgKG9sZGVzdCBmaXJzdCwgbmV3ZXN0IGF0IGJvdHRvbSkgLSBudW1lcmljIHNvcnRcbiAgICAgICAgY29uc3Qgc29ydGVkRW50cmllcyA9IFsuLi5lbnRyaWVzXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYS5jcmVhdGVUaW1lIC0gYi5jcmVhdGVUaW1lO1xuICAgICAgICB9KTtcblxuICAgICAgICBzb3J0ZWRFbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWRUaXRsZSA9IGVudHJ5LnRpdGxlLnJlcGxhY2UoL1xcbi9nLCBcIiBcIikudHJpbSgpO1xuICAgICAgICAgICAgLy8gRm9ybWF0IHRpbWVzdGFtcCB3aXRoIGN1c3RvbSBmb3JtYXQgb3IgZGVmYXVsdFxuICAgICAgICAgICAgY29uc3QgY3JlYXRlRGF0ZSA9IGZvcm1hdE1lc3NhZ2VUaW1lc3RhbXAoZW50cnkuY3JlYXRlVGltZSwgdGhpcy5jdXN0b21UaW1lc3RhbXBGb3JtYXQpO1xuICAgICAgICAgICAgdGFibGUgKz0gYHwgXHVEODNEXHVERUFCIHwgJHtzYW5pdGl6ZWRUaXRsZX0gfCAke2NyZWF0ZURhdGV9IHwgJHtlbnRyeS5lcnJvck1lc3NhZ2UgfHwgXCJVbmtub3duIGVycm9yXCJ9IHxcXG5gO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGFibGUgKyBcIlxcblxcblwiO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2VuZXJhdGVFcnJvclRhYmxlKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCB0YWJsZSA9IGAjIyBcdTI2QTBcdUZFMEYgR2xvYmFsIEVycm9yc1xcblxcbmA7XG4gICAgICAgIHRhYmxlICs9IFwifCB8IEVycm9yIHwgRGV0YWlscyB8XFxuXCI7XG4gICAgICAgIHRhYmxlICs9IFwifDotLS06fDotLS18Oi0tLXxcXG5cIjtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZ2xvYmFsRXJyb3JzLmZvckVhY2goKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICB0YWJsZSArPSBgfCBcdTI2QTBcdUZFMEYgfCAke2VudHJ5Lm1lc3NhZ2V9IHwgJHtlbnRyeS5kZXRhaWxzfSB8XFxuYDtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGFibGUgKyBcIlxcblxcblwiO1xuICAgIH1cblxuICAgIHByaXZhdGUgZm9ybWF0QXR0YWNobWVudFN0YXR1cyhzdGF0cz86IEF0dGFjaG1lbnRTdGF0cyk6IHN0cmluZyB7XG4gICAgICAgIGlmICghc3RhdHMgfHwgc3RhdHMudG90YWwgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBcIjBcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgdG90YWwsIGZvdW5kLCBtaXNzaW5nLCBmYWlsZWQgfSA9IHN0YXRzO1xuICAgICAgICBcbiAgICAgICAgaWYgKGZvdW5kID09PSB0b3RhbCkge1xuICAgICAgICAgICAgcmV0dXJuIGBcdTI3MDUgJHtmb3VuZH1gO1xuICAgICAgICB9IGVsc2UgaWYgKGZvdW5kID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYFx1Mjc0QyAwLyR7dG90YWx9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBgXHUyNkEwXHVGRTBGICR7Zm91bmR9LyR7dG90YWx9YDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhc0Vycm9ycygpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGhhc0ZhaWxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZpbGVTZWN0aW9ucy5mb3JFYWNoKHNlY3Rpb24gPT4ge1xuICAgICAgICAgICAgaWYgKHNlY3Rpb24uZmFpbGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBoYXNGYWlsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGhhc0ZhaWxlZCB8fCB0aGlzLmdsb2JhbEVycm9ycy5sZW5ndGggPiAwO1xuICAgIH1cblxuICAgIGdldENyZWF0ZWRDb3VudCgpOiBudW1iZXIge1xuICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICB0aGlzLmZpbGVTZWN0aW9ucy5mb3JFYWNoKHNlY3Rpb24gPT4ge1xuICAgICAgICAgICAgY291bnQgKz0gc2VjdGlvbi5jcmVhdGVkLmxlbmd0aDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG5cbiAgICBnZXRVcGRhdGVkQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5maWxlU2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcbiAgICAgICAgICAgIGNvdW50ICs9IHNlY3Rpb24udXBkYXRlZC5sZW5ndGg7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuXG4gICAgZ2V0U2tpcHBlZENvdW50KCk6IG51bWJlciB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIHRoaXMuZmlsZVNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiB7XG4gICAgICAgICAgICBjb3VudCArPSBzZWN0aW9uLnNraXBwZWQubGVuZ3RoO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cblxuICAgIGdldEZhaWxlZENvdW50KCk6IG51bWJlciB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIHRoaXMuZmlsZVNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiB7XG4gICAgICAgICAgICBjb3VudCArPSBzZWN0aW9uLmZhaWxlZC5sZW5ndGg7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvcmUgZmlsZSBhbmFseXNpcyBzdGF0cyBmb3IgZHVwbGljYXRlIGNvdW50aW5nXG4gICAgICovXG4gICAgc2V0RmlsZVN0YXRzKGZpbGVTdGF0czogTWFwPHN0cmluZywgYW55Pikge1xuICAgICAgICB0aGlzLmZpbGVTdGF0cyA9IGZpbGVTdGF0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9yZSBhbmFseXNpcyBpbmZvIGZvciBjb21wbGV0aW9uIHN0YXRzXG4gICAgICovXG4gICAgc2V0QW5hbHlzaXNJbmZvKGFuYWx5c2lzSW5mbzogYW55KSB7XG4gICAgICAgIHRoaXMuYW5hbHlzaXNJbmZvID0gYW5hbHlzaXNJbmZvO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0b3RhbCBkdXBsaWNhdGVzIGZyb20gZmlsZSBzdGF0c1xuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0VG90YWxEdXBsaWNhdGVzKCk6IG51bWJlciB7XG4gICAgICAgIGlmICghdGhpcy5maWxlU3RhdHMpIHJldHVybiAwO1xuXG4gICAgICAgIGxldCB0b3RhbER1cGxpY2F0ZXMgPSAwO1xuICAgICAgICB0aGlzLmZpbGVTdGF0cy5mb3JFYWNoKHN0YXRzID0+IHtcbiAgICAgICAgICAgIHRvdGFsRHVwbGljYXRlcyArPSBzdGF0cy5kdXBsaWNhdGVzIHx8IDA7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdG90YWxEdXBsaWNhdGVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBzdGF0aXN0aWNzIGZvciB0aGUgY29tcGxldGlvbiBkaWFsb2dcbiAgICAgKi9cbiAgICBnZXRDb21wbGV0aW9uU3RhdHMoKSB7XG4gICAgICAgIGNvbnN0IGdsb2JhbFN0YXRzID0gdGhpcy5nZXRHbG9iYWxTdGF0cygpO1xuICAgICAgICBjb25zdCBhdHRhY2htZW50U3RhdHMgPSB0aGlzLmdldFRvdGFsQXR0YWNobWVudFN0YXRzKCk7XG5cbiAgICAgICAgLy8gVXNlIGFuYWx5c2lzSW5mbyBmb3IgYWNjdXJhdGUgY291bnRzIGlmIGF2YWlsYWJsZVxuICAgICAgICBjb25zdCB0b3RhbENvbnZlcnNhdGlvbnMgPSB0aGlzLmFuYWx5c2lzSW5mbz8udW5pcXVlQ29udmVyc2F0aW9uc0tlcHQgPz8gZ2xvYmFsU3RhdHMudG90YWxQcm9jZXNzZWQ7XG4gICAgICAgIGNvbnN0IGR1cGxpY2F0ZXMgPSB0aGlzLmFuYWx5c2lzSW5mbz8uZHVwbGljYXRlc1JlbW92ZWQgPz8gdGhpcy5nZXRUb3RhbER1cGxpY2F0ZXMoKTtcbiAgICAgICAgY29uc3Qgc2tpcHBlZCA9IHRoaXMuYW5hbHlzaXNJbmZvPy5jb252ZXJzYXRpb25zSWdub3JlZCA/PyBnbG9iYWxTdGF0cy5za2lwcGVkO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3RhbEZpbGVzOiB0aGlzLmZpbGVTZWN0aW9ucy5zaXplLFxuICAgICAgICAgICAgdG90YWxDb252ZXJzYXRpb25zOiB0b3RhbENvbnZlcnNhdGlvbnMsXG4gICAgICAgICAgICBkdXBsaWNhdGVzOiBkdXBsaWNhdGVzLFxuICAgICAgICAgICAgY3JlYXRlZDogZ2xvYmFsU3RhdHMuY3JlYXRlZCxcbiAgICAgICAgICAgIHVwZGF0ZWQ6IGdsb2JhbFN0YXRzLnVwZGF0ZWQsXG4gICAgICAgICAgICBza2lwcGVkOiBza2lwcGVkLFxuICAgICAgICAgICAgZmFpbGVkOiBnbG9iYWxTdGF0cy5mYWlsZWQsXG4gICAgICAgICAgICBhdHRhY2htZW50c0ZvdW5kOiBhdHRhY2htZW50U3RhdHMuZm91bmQsXG4gICAgICAgICAgICBhdHRhY2htZW50c1RvdGFsOiBhdHRhY2htZW50U3RhdHMudG90YWwsXG4gICAgICAgICAgICBhdHRhY2htZW50c01pc3Npbmc6IGF0dGFjaG1lbnRTdGF0cy5taXNzaW5nLFxuICAgICAgICAgICAgYXR0YWNobWVudHNGYWlsZWQ6IGF0dGFjaG1lbnRTdGF0cy5mYWlsZWRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBwcm9jZXNzZWQgZmlsZSBuYW1lc1xuICAgICAqL1xuICAgIGdldFByb2Nlc3NlZEZpbGVOYW1lcygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZmlsZVNlY3Rpb25zLmtleXMoKSk7XG4gICAgfVxufSIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuXG4vLyBzcmMvc2VydmljZXMvY29udmVyc2F0aW9uLXByb2Nlc3Nvci50c1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENvbnZlcnNhdGlvbkNhdGFsb2dFbnRyeSB9IGZyb20gXCIuLi90eXBlcy9wbHVnaW5cIjtcbmltcG9ydCB7IFN0YW5kYXJkQ29udmVyc2F0aW9uLCBTdGFuZGFyZE1lc3NhZ2UgfSBmcm9tIFwiLi4vdHlwZXMvc3RhbmRhcmRcIjtcbmltcG9ydCB7IEltcG9ydFJlcG9ydCB9IGZyb20gXCIuLi9tb2RlbHMvaW1wb3J0LXJlcG9ydFwiO1xuaW1wb3J0IHsgTWVzc2FnZUZvcm1hdHRlciB9IGZyb20gXCIuLi9mb3JtYXR0ZXJzL21lc3NhZ2UtZm9ybWF0dGVyXCI7XG5pbXBvcnQgeyBOb3RlRm9ybWF0dGVyIH0gZnJvbSBcIi4uL2Zvcm1hdHRlcnMvbm90ZS1mb3JtYXR0ZXJcIjtcbmltcG9ydCB7IEZpbGVTZXJ2aWNlIH0gZnJvbSBcIi4vZmlsZS1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBQcm92aWRlclJlZ2lzdHJ5IH0gZnJvbSBcIi4uL3Byb3ZpZGVycy9wcm92aWRlci1hZGFwdGVyXCI7XG5pbXBvcnQgeyBJbXBvcnRQcm9ncmVzc0NhbGxiYWNrIH0gZnJvbSBcIi4uL3VpL2ltcG9ydC1wcm9ncmVzcy1tb2RhbFwiO1xuaW1wb3J0IEpTWmlwIGZyb20gXCJqc3ppcFwiO1xuaW1wb3J0IHtcbiAgICBpc1ZhbGlkTWVzc2FnZSxcbiAgICBlbnN1cmVGb2xkZXJFeGlzdHMsXG4gICAgZG9lc0ZpbGVQYXRoRXhpc3QsXG4gICAgZ2VuZXJhdGVVbmlxdWVGaWxlTmFtZSxcbiAgICBnZW5lcmF0ZUNvbnZlcnNhdGlvbkZpbGVOYW1lLFxuICAgIGNvbXBhcmVUaW1lc3RhbXBzSWdub3JpbmdTZWNvbmRzXG59IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uUHJvY2Vzc29yIHtcbiAgICBwcml2YXRlIG1lc3NhZ2VGb3JtYXR0ZXI6IE1lc3NhZ2VGb3JtYXR0ZXI7XG4gICAgcHJpdmF0ZSBmaWxlU2VydmljZTogRmlsZVNlcnZpY2U7XG4gICAgcHJpdmF0ZSBub3RlRm9ybWF0dGVyOiBOb3RlRm9ybWF0dGVyO1xuICAgIHByaXZhdGUgcHJvdmlkZXJSZWdpc3RyeTogUHJvdmlkZXJSZWdpc3RyeTtcbiAgICBwcml2YXRlIGNvdW50ZXJzID0ge1xuICAgICAgICB0b3RhbEV4aXN0aW5nQ29udmVyc2F0aW9uczogMCxcbiAgICAgICAgdG90YWxOZXdDb252ZXJzYXRpb25zVG9JbXBvcnQ6IDAsXG4gICAgICAgIHRvdGFsRXhpc3RpbmdDb252ZXJzYXRpb25zVG9VcGRhdGU6IDAsXG4gICAgICAgIHRvdGFsTmV3Q29udmVyc2F0aW9uc1N1Y2Nlc3NmdWxseUltcG9ydGVkOiAwLFxuICAgICAgICB0b3RhbENvbnZlcnNhdGlvbnNBY3R1YWxseVVwZGF0ZWQ6IDAsXG4gICAgICAgIHRvdGFsQ29udmVyc2F0aW9uc1Byb2Nlc3NlZDogMCxcbiAgICAgICAgdG90YWxOb25FbXB0eU1lc3NhZ2VzVG9JbXBvcnQ6IDAsXG4gICAgICAgIHRvdGFsTm9uRW1wdHlNZXNzYWdlc1RvQWRkOiAwLFxuICAgICAgICB0b3RhbE5vbkVtcHR5TWVzc2FnZXNBZGRlZDogMCxcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4sIHByb3ZpZGVyUmVnaXN0cnk6IFByb3ZpZGVyUmVnaXN0cnkpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZUZvcm1hdHRlciA9IG5ldyBNZXNzYWdlRm9ybWF0dGVyKHBsdWdpbi5sb2dnZXIsIHBsdWdpbik7XG4gICAgICAgICAgICB0aGlzLmZpbGVTZXJ2aWNlID0gbmV3IEZpbGVTZXJ2aWNlKHBsdWdpbik7XG4gICAgICAgICAgICB0aGlzLm5vdGVGb3JtYXR0ZXIgPSBuZXcgTm90ZUZvcm1hdHRlcihwbHVnaW4ubG9nZ2VyLCBwbHVnaW4ubWFuaWZlc3QuaWQsIHBsdWdpbi5tYW5pZmVzdC52ZXJzaW9uLCBwbHVnaW4pO1xuICAgICAgICAgICAgdGhpcy5wcm92aWRlclJlZ2lzdHJ5ID0gcHJvdmlkZXJSZWdpc3RyeTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIHJhdyBjb252ZXJzYXRpb25zIChwcm92aWRlciBhZ25vc3RpYyBlbnRyeSBwb2ludClcbiAgICAgKi9cbiAgICBhc3luYyBwcm9jZXNzUmF3Q29udmVyc2F0aW9ucyhyYXdDb252ZXJzYXRpb25zOiBhbnlbXSwgaW1wb3J0UmVwb3J0OiBJbXBvcnRSZXBvcnQsIHppcD86IEpTWmlwLCBpc1JlcHJvY2VzczogYm9vbGVhbiA9IGZhbHNlLCBmb3JjZWRQcm92aWRlcj86IHN0cmluZywgcHJvZ3Jlc3NDYWxsYmFjaz86IEltcG9ydFByb2dyZXNzQ2FsbGJhY2spOiBQcm9taXNlPEltcG9ydFJlcG9ydD4ge1xuICAgICAgICAvLyBVc2UgZm9yY2VkIHByb3ZpZGVyIG9yIGRldGVjdCBmcm9tIHJhdyBkYXRhIHN0cnVjdHVyZVxuICAgICAgICBjb25zdCBwcm92aWRlciA9IGZvcmNlZFByb3ZpZGVyIHx8IHRoaXMucHJvdmlkZXJSZWdpc3RyeS5kZXRlY3RQcm92aWRlcihyYXdDb252ZXJzYXRpb25zKTtcblxuICAgICAgICBpZiAocHJvdmlkZXIgPT09ICd1bmtub3duJykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBmb3JjZWRQcm92aWRlclxuICAgICAgICAgICAgICAgID8gYEZvcmNlZCBwcm92aWRlciAnJHtmb3JjZWRQcm92aWRlcn0nIGlzIG5vdCBhdmFpbGFibGUgb3IgcmVnaXN0ZXJlZGBcbiAgICAgICAgICAgICAgICA6IGBDb3VsZCBub3QgZGV0ZWN0IGNvbnZlcnNhdGlvbiBwcm92aWRlciBmcm9tIGRhdGEgc3RydWN0dXJlYDtcbiAgICAgICAgICAgIGltcG9ydFJlcG9ydC5hZGRFcnJvcihcIlVua25vd24gcHJvdmlkZXJcIiwgZXJyb3JNc2cpO1xuICAgICAgICAgICAgcmV0dXJuIGltcG9ydFJlcG9ydDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NDb252ZXJzYXRpb25zV2l0aFByb3ZpZGVyKHByb3ZpZGVyLCByYXdDb252ZXJzYXRpb25zLCBpbXBvcnRSZXBvcnQsIHppcCwgaXNSZXByb2Nlc3MsIHByb2dyZXNzQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBwcm92aWRlciBuYW1lIGZvciBjdXJyZW50IHByb2Nlc3Npbmcgc2Vzc2lvblxuICAgICAqL1xuICAgIGdldEN1cnJlbnRQcm92aWRlcigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UHJvdmlkZXIgfHwgJ3Vua25vd24nO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3VycmVudFByb3ZpZGVyOiBzdHJpbmcgPSAndW5rbm93bic7XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGNvbnZlcnNhdGlvbnMgdXNpbmcgdGhlIGRldGVjdGVkIHByb3ZpZGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzQ29udmVyc2F0aW9uc1dpdGhQcm92aWRlcihcbiAgICAgICAgcHJvdmlkZXI6IHN0cmluZyxcbiAgICAgICAgcmF3Q29udmVyc2F0aW9uczogYW55W10sXG4gICAgICAgIGltcG9ydFJlcG9ydDogSW1wb3J0UmVwb3J0LFxuICAgICAgICB6aXA/OiBKU1ppcCxcbiAgICAgICAgaXNSZXByb2Nlc3M6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjaz86IEltcG9ydFByb2dyZXNzQ2FsbGJhY2tcbiAgICApOiBQcm9taXNlPEltcG9ydFJlcG9ydD4ge1xuICAgICAgICB0aGlzLmN1cnJlbnRQcm92aWRlciA9IHByb3ZpZGVyO1xuICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5wcm92aWRlclJlZ2lzdHJ5LmdldEFkYXB0ZXIocHJvdmlkZXIpO1xuXG4gICAgICAgIGlmICghYWRhcHRlcikge1xuICAgICAgICAgICAgaW1wb3J0UmVwb3J0LmFkZEVycm9yKFwiUHJvdmlkZXIgYWRhcHRlciBub3QgZm91bmRcIiwgYE5vIGFkYXB0ZXIgZm91bmQgZm9yIHByb3ZpZGVyOiAke3Byb3ZpZGVyfWApO1xuICAgICAgICAgICAgcmV0dXJuIGltcG9ydFJlcG9ydDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0b3JhZ2UgPSB0aGlzLnBsdWdpbi5nZXRTdG9yYWdlU2VydmljZSgpO1xuXG4gICAgICAgIC8vIFNjYW4gZXhpc3RpbmcgY29udmVyc2F0aW9ucyBmcm9tIHZhdWx0IGluc3RlYWQgb2YgbG9hZGluZyBjYXRhbG9nXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ29udmVyc2F0aW9uc01hcCA9IGF3YWl0IHN0b3JhZ2Uuc2NhbkV4aXN0aW5nQ29udmVyc2F0aW9ucygpO1xuICAgICAgICB0aGlzLmNvdW50ZXJzLnRvdGFsRXhpc3RpbmdDb252ZXJzYXRpb25zID0gZXhpc3RpbmdDb252ZXJzYXRpb25zTWFwLnNpemU7XG5cbiAgICAgICAgbGV0IHByb2Nlc3NlZENvdW50ID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBjaGF0IG9mIHJhd0NvbnZlcnNhdGlvbnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc1NpbmdsZUNoYXQoYWRhcHRlciwgY2hhdCwgZXhpc3RpbmdDb252ZXJzYXRpb25zTWFwLCBpbXBvcnRSZXBvcnQsIHppcCwgaXNSZXByb2Nlc3MpO1xuXG4gICAgICAgICAgICBwcm9jZXNzZWRDb3VudCsrO1xuICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjaz8uKHtcbiAgICAgICAgICAgICAgICBwaGFzZTogJ3Byb2Nlc3NpbmcnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnUHJvY2Vzc2luZyBjb252ZXJzYXRpb25zLi4uJyxcbiAgICAgICAgICAgICAgICBkZXRhaWw6IGBQcm9jZXNzaW5nIGNvbnZlcnNhdGlvbiAke3Byb2Nlc3NlZENvdW50fSBvZiAke3Jhd0NvbnZlcnNhdGlvbnMubGVuZ3RofWAsXG4gICAgICAgICAgICAgICAgY3VycmVudDogcHJvY2Vzc2VkQ291bnQsXG4gICAgICAgICAgICAgICAgdG90YWw6IHJhd0NvbnZlcnNhdGlvbnMubGVuZ3RoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbXBvcnRSZXBvcnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzU2luZ2xlQ2hhdChcbiAgICAgICAgYWRhcHRlcjogYW55LFxuICAgICAgICBjaGF0OiBhbnksXG4gICAgICAgIGV4aXN0aW5nQ29udmVyc2F0aW9uczogTWFwPHN0cmluZywgQ29udmVyc2F0aW9uQ2F0YWxvZ0VudHJ5PixcbiAgICAgICAgaW1wb3J0UmVwb3J0OiBJbXBvcnRSZXBvcnQsXG4gICAgICAgIHppcD86IEpTWmlwLFxuICAgICAgICBpc1JlcHJvY2VzczogYm9vbGVhbiA9IGZhbHNlXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjaGF0SWQgPSBhZGFwdGVyLmdldElkKGNoYXQpO1xuICAgICAgICAgICAgY29uc3QgY2hhdFRpdGxlID0gYWRhcHRlci5nZXRUaXRsZShjaGF0KSB8fCAnVW50aXRsZWQnO1xuXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBjb252ZXJzYXRpb24gaGFzIHJlcXVpcmVkIGZpZWxkc1xuICAgICAgICAgICAgaWYgKCFjaGF0SWQgfHwgY2hhdElkLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIud2FybihgU2tpcHBpbmcgY29udmVyc2F0aW9uIHdpdGggbWlzc2luZyBJRDogJHtjaGF0VGl0bGV9YCk7XG4gICAgICAgICAgICAgICAgaW1wb3J0UmVwb3J0LmFkZEZhaWxlZChjaGF0VGl0bGUsIFwiTi9BXCIsIDAsIDAsIFwiTWlzc2luZyBjb252ZXJzYXRpb24gSURcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0VudHJ5ID0gZXhpc3RpbmdDb252ZXJzYXRpb25zLmdldChjaGF0SWQpO1xuXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdFbnRyeSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlRXhpc3RpbmdDaGF0KGFkYXB0ZXIsIGNoYXQsIGV4aXN0aW5nRW50cnksIGltcG9ydFJlcG9ydCwgemlwLCBpc1JlcHJvY2Vzcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUZpbGVQYXRoRm9yQ2hhdChhZGFwdGVyLCBjaGF0KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZU5ld0NoYXQoYWRhcHRlciwgY2hhdCwgZmlsZVBhdGgsIGltcG9ydFJlcG9ydCwgemlwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY291bnRlcnMudG90YWxDb252ZXJzYXRpb25zUHJvY2Vzc2VkKys7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UgfHwgXCJVbmtub3duIGVycm9yIG9jY3VycmVkXCI7XG4gICAgICAgICAgICBjb25zdCBjaGF0VGl0bGUgPSBhZGFwdGVyLmdldFRpdGxlKGNoYXQpIHx8IFwiVW50aXRsZWRcIjtcbiAgICAgICAgICAgIGltcG9ydFJlcG9ydC5hZGRFcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBjaGF0OiAke2NoYXRUaXRsZX1gLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVFeGlzdGluZ0NoYXQoXG4gICAgICAgIGFkYXB0ZXI6IGFueSxcbiAgICAgICAgY2hhdDogYW55LFxuICAgICAgICBleGlzdGluZ1JlY29yZDogQ29udmVyc2F0aW9uQ2F0YWxvZ0VudHJ5LFxuICAgICAgICBpbXBvcnRSZXBvcnQ6IEltcG9ydFJlcG9ydCxcbiAgICAgICAgemlwPzogSlNaaXAsXG4gICAgICAgIGlzUmVwcm9jZXNzOiBib29sZWFuID0gZmFsc2VcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgY2hhdFRpdGxlID0gYWRhcHRlci5nZXRUaXRsZShjaGF0KTtcbiAgICAgICAgY29uc3QgY3JlYXRlVGltZSA9IGFkYXB0ZXIuZ2V0Q3JlYXRlVGltZShjaGF0KTtcbiAgICAgICAgY29uc3QgdXBkYXRlVGltZSA9IGFkYXB0ZXIuZ2V0VXBkYXRlVGltZShjaGF0KTtcblxuICAgICAgICAvLyBDb3VudCBtZXNzYWdlcyB1c2luZyBwcm92aWRlci1zcGVjaWZpYyBsb2dpY1xuICAgICAgICBjb25zdCB0b3RhbE1lc3NhZ2VDb3VudCA9IGF3YWl0IHRoaXMuY291bnRNZXNzYWdlcyhhZGFwdGVyLCBjaGF0KTtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZmlsZSBhY3R1YWxseSBleGlzdHNcbiAgICAgICAgY29uc3QgZmlsZUV4aXN0cyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhleGlzdGluZ1JlY29yZC5wYXRoKTtcblxuICAgICAgICBpZiAoIWZpbGVFeGlzdHMpIHtcbiAgICAgICAgICAgIC8vIEZpbGUgd2FzIGRlbGV0ZWQsIHJlY3JlYXRlIGl0XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZU5ld0NoYXQoYWRhcHRlciwgY2hhdCwgZXhpc3RpbmdSZWNvcmQucGF0aCwgaW1wb3J0UmVwb3J0LCB6aXApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUkVQUk9DRVNTIExPR0lDOiBGb3JjZSB1cGRhdGUgaWYgdGhpcyBpcyBhIHJlcHJvY2VzcyBvcGVyYXRpb25cbiAgICAgICAgaWYgKGlzUmVwcm9jZXNzKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXJzLnRvdGFsRXhpc3RpbmdDb252ZXJzYXRpb25zVG9VcGRhdGUrKztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRXhpc3RpbmdOb3RlKGFkYXB0ZXIsIGNoYXQsIGV4aXN0aW5nUmVjb3JkLnBhdGgsIHRvdGFsTWVzc2FnZUNvdW50LCBpbXBvcnRSZXBvcnQsIHppcCwgdHJ1ZSk7IC8vIEZvcmNlIHVwZGF0ZVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTm9ybWFsIGxvZ2ljOiBDaGVjayB0aW1lc3RhbXBzIChpZ25vcmluZyBzZWNvbmRzIGZvciB2MS4yLjAgXHUyMTkyIHYxLjMuMCBjb21wYXRpYmlsaXR5KVxuICAgICAgICBjb25zdCBjb21wYXJpc29uID0gY29tcGFyZVRpbWVzdGFtcHNJZ25vcmluZ1NlY29uZHModXBkYXRlVGltZSwgZXhpc3RpbmdSZWNvcmQudXBkYXRlVGltZSk7XG4gICAgICAgIGlmIChjb21wYXJpc29uIDw9IDApIHtcbiAgICAgICAgICAgIC8vIFpJUCBpcyBvbGRlciBvciBzYW1lIGFzIHZhdWx0IChpZ25vcmluZyBzZWNvbmRzKSBcdTIxOTIgU2tpcFxuICAgICAgICAgICAgaW1wb3J0UmVwb3J0LmFkZFNraXBwZWQoXG4gICAgICAgICAgICAgICAgY2hhdFRpdGxlLFxuICAgICAgICAgICAgICAgIGV4aXN0aW5nUmVjb3JkLnBhdGgsXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZSxcbiAgICAgICAgICAgICAgICB1cGRhdGVUaW1lLFxuICAgICAgICAgICAgICAgIHRvdGFsTWVzc2FnZUNvdW50LFxuICAgICAgICAgICAgICAgIFwiTm8gVXBkYXRlc1wiXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gWklQIGlzIG5ld2VyIHRoYW4gdmF1bHQgXHUyMTkyIFVwZGF0ZVxuICAgICAgICAgICAgdGhpcy5jb3VudGVycy50b3RhbEV4aXN0aW5nQ29udmVyc2F0aW9uc1RvVXBkYXRlKys7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUV4aXN0aW5nTm90ZShhZGFwdGVyLCBjaGF0LCBleGlzdGluZ1JlY29yZC5wYXRoLCB0b3RhbE1lc3NhZ2VDb3VudCwgaW1wb3J0UmVwb3J0LCB6aXApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVOZXdDaGF0KFxuICAgICAgICBhZGFwdGVyOiBhbnksXG4gICAgICAgIGNoYXQ6IGFueSxcbiAgICAgICAgZmlsZVBhdGg6IHN0cmluZyxcbiAgICAgICAgaW1wb3J0UmVwb3J0OiBJbXBvcnRSZXBvcnQsXG4gICAgICAgIHppcD86IEpTWmlwXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuY291bnRlcnMudG90YWxOZXdDb252ZXJzYXRpb25zVG9JbXBvcnQrKztcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVOZXdOb3RlKGFkYXB0ZXIsIGNoYXQsIGZpbGVQYXRoLCBpbXBvcnRSZXBvcnQsIHppcCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ291bnQgbWVzc2FnZXMgaW4gYSBjaGF0IHVzaW5nIHByb3ZpZGVyLXNwZWNpZmljIGxvZ2ljXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjb3VudE1lc3NhZ2VzKGFkYXB0ZXI6IGFueSwgY2hhdDogYW55KTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgLy8gVHJ5IHRvIGdldCBhIHN0YW5kYXJkIGNvbnZlcnNhdGlvbiBhbmQgY291bnQgaXRzIG1lc3NhZ2VzXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdGFuZGFyZENvbnZlcnNhdGlvbiA9IGF3YWl0IGFkYXB0ZXIuY29udmVydENoYXQoY2hhdCk7XG4gICAgICAgICAgICByZXR1cm4gc3RhbmRhcmRDb252ZXJzYXRpb24ubWVzc2FnZXM/Lmxlbmd0aCB8fCAwO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gRmFsbGJhY2s6IHRyeSBjb21tb24gcGF0dGVybnNcbiAgICAgICAgICAgIGlmIChjaGF0Lm1hcHBpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGF0R1BULXN0eWxlIG1hcHBpbmdcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhjaGF0Lm1hcHBpbmcpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKG1zZzogYW55KSA9PiBpc1ZhbGlkTWVzc2FnZShtc2cubWVzc2FnZSkpLmxlbmd0aDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhdC5tZXNzYWdlcykge1xuICAgICAgICAgICAgICAgIC8vIERpcmVjdCBtZXNzYWdlcyBhcnJheVxuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGNoYXQubWVzc2FnZXMpID8gY2hhdC5tZXNzYWdlcy5sZW5ndGggOiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgcHJvdmlkZXItc3BlY2lmaWMgY291bnQgKGFydGlmYWN0cyBmb3IgQ2xhdWRlLCBhdHRhY2htZW50cyBmb3IgQ2hhdEdQVClcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldFByb3ZpZGVyU3BlY2lmaWNDb3VudChhZGFwdGVyOiBhbnksIGNoYXQ6IGFueSk6IG51bWJlciB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdHJhdGVneSA9IGFkYXB0ZXIuZ2V0UmVwb3J0TmFtaW5nU3RyYXRlZ3koKTtcbiAgICAgICAgICAgIGlmIChzdHJhdGVneSAmJiBzdHJhdGVneS5nZXRQcm92aWRlclNwZWNpZmljQ29sdW1uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29sdW1uSW5mbyA9IHN0cmF0ZWd5LmdldFByb3ZpZGVyU3BlY2lmaWNDb2x1bW4oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uSW5mby5nZXRWYWx1ZShhZGFwdGVyLCBjaGF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIDAgaWYgcHJvdmlkZXIgZG9lc24ndCBzdXBwb3J0IHNwZWNpZmljIGNvdW50aW5nXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVFeGlzdGluZ05vdGUoXG4gICAgICAgIGFkYXB0ZXI6IGFueSxcbiAgICAgICAgY2hhdDogYW55LFxuICAgICAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgICAgICB0b3RhbE1lc3NhZ2VDb3VudDogbnVtYmVyLFxuICAgICAgICBpbXBvcnRSZXBvcnQ6IEltcG9ydFJlcG9ydCxcbiAgICAgICAgemlwPzogSlNaaXAsXG4gICAgICAgIGZvcmNlVXBkYXRlOiBib29sZWFuID0gZmFsc2VcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsQ29udGVudCA9IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjaGF0VXBkYXRlVGltZSA9IGFkYXB0ZXIuZ2V0VXBkYXRlVGltZShjaGF0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGF0Q3JlYXRlVGltZSA9IGFkYXB0ZXIuZ2V0Q3JlYXRlVGltZShjaGF0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGF0VGl0bGUgPSBhZGFwdGVyLmdldFRpdGxlKGNoYXQpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdNZXNzYWdlSWRzID0gdGhpcy5leHRyYWN0TWVzc2FnZVVJRHNGcm9tTm90ZShjb250ZW50KTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdNZXNzYWdlcyA9IGFkYXB0ZXIuZ2V0TmV3TWVzc2FnZXMoY2hhdCwgZXhpc3RpbmdNZXNzYWdlSWRzKTtcblxuICAgICAgICAgICAgICAgIGxldCBhdHRhY2htZW50U3RhdHM6IHsgdG90YWw6IG51bWJlcjsgZm91bmQ6IG51bWJlcjsgbWlzc2luZzogbnVtYmVyOyBmYWlsZWQ6IG51bWJlciB9IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgLy8gUkVQUk9DRVNTIExPR0lDOiBJZiBmb3JjZWQgdXBkYXRlLCByZWNyZWF0ZSB0aGUgZW50aXJlIG5vdGUgd2l0aCBhdHRhY2htZW50IHN1cHBvcnRcbiAgICAgICAgICAgICAgICBpZiAoZm9yY2VVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCBlbnRpcmUgY2hhdCB0byBzdGFuZGFyZCBmb3JtYXQgd2l0aCBhdHRhY2htZW50c1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3RhbmRhcmRDb252ZXJzYXRpb24gPSBhd2FpdCBhZGFwdGVyLmNvbnZlcnRDaGF0KGNoYXQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgYXR0YWNobWVudHMgaWYgWklQIHByb3ZpZGVkXG4gICAgICAgICAgICAgICAgICAgIGlmICh6aXAgJiYgYWRhcHRlci5wcm9jZXNzTWVzc2FnZUF0dGFjaG1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFuZGFyZENvbnZlcnNhdGlvbi5tZXNzYWdlcyA9IGF3YWl0IGFkYXB0ZXIucHJvY2Vzc01lc3NhZ2VBdHRhY2htZW50cyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFuZGFyZENvbnZlcnNhdGlvbi5tZXNzYWdlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLmdldElkKGNoYXQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppcFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGF0dGFjaG1lbnQgc3RhdHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRTdGF0cyA9IHRoaXMuY2FsY3VsYXRlQXR0YWNobWVudFN0YXRzKHN0YW5kYXJkQ29udmVyc2F0aW9uLm1lc3NhZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlZ2VuZXJhdGUgZW50aXJlIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IHRoaXMubm90ZUZvcm1hdHRlci5nZW5lcmF0ZU1hcmtkb3duQ29udGVudChzdGFuZGFyZENvbnZlcnNhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZVNlcnZpY2Uud3JpdGVUb0ZpbGUoZmlsZVBhdGgsIG5ld0NvbnRlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGltcG9ydFJlcG9ydC5hZGRVcGRhdGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhdFRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGF0Q3JlYXRlVGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRVcGRhdGVUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxNZXNzYWdlQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50U3RhdHNcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXJzLnRvdGFsQ29udmVyc2F0aW9uc0FjdHVhbGx5VXBkYXRlZCsrO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVW5pZmllZCB1cGRhdGUgbG9naWMgLSB1c2UgY29udmVydENoYXQgZm9yIGNvbnNpc3RlbmN5XG4gICAgICAgICAgICAgICAgaWYgKG5ld01lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIG1ldGFkYXRhIG9ubHkgd2hlbiB0aGVyZSBhcmUgbmV3IG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLnVwZGF0ZU1ldGFkYXRhKGNvbnRlbnQsIGNoYXRVcGRhdGVUaW1lKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGZ1bGwgY29udmVyc2F0aW9uIHRvIGdldCBjb25zaXN0ZW50IHByb2Nlc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YW5kYXJkQ29udmVyc2F0aW9uID0gYXdhaXQgYWRhcHRlci5jb252ZXJ0Q2hhdChjaGF0KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb25seSBuZXcgbWVzc2FnZXMgZm9yIGZvcm1hdHRpbmdcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3U3RhbmRhcmRNZXNzYWdlcyA9IHN0YW5kYXJkQ29udmVyc2F0aW9uLm1lc3NhZ2VzLmZpbHRlcigobXNnOiBTdGFuZGFyZE1lc3NhZ2UpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdNZXNzYWdlcy5zb21lKChuZXdNc2c6IFN0YW5kYXJkTWVzc2FnZSkgPT4gbmV3TXNnLmlkID09PSBtc2cuaWQpXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBhdHRhY2htZW50cyBvbiBuZXcgbWVzc2FnZXMgb25seVxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvY2Vzc2VkTmV3TWVzc2FnZXMgPSBuZXdTdGFuZGFyZE1lc3NhZ2VzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoemlwICYmIGFkYXB0ZXIucHJvY2Vzc01lc3NhZ2VBdHRhY2htZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkTmV3TWVzc2FnZXMgPSBhd2FpdCBhZGFwdGVyLnByb2Nlc3NNZXNzYWdlQXR0YWNobWVudHMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RhbmRhcmRNZXNzYWdlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLmdldElkKGNoYXQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppcFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBjYWxjdWxhdGUgYXR0YWNobWVudCBzdGF0cyAoZXZlbiBpZiBub3QgcHJvY2Vzc2VkKVxuICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50U3RhdHMgPSB0aGlzLmNhbGN1bGF0ZUF0dGFjaG1lbnRTdGF0cyhwcm9jZXNzZWROZXdNZXNzYWdlcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBcIlxcblxcblwiICsgdGhpcy5tZXNzYWdlRm9ybWF0dGVyLmZvcm1hdE1lc3NhZ2VzKHByb2Nlc3NlZE5ld01lc3NhZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudGVycy50b3RhbENvbnZlcnNhdGlvbnNBY3R1YWxseVVwZGF0ZWQrKztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudGVycy50b3RhbE5vbkVtcHR5TWVzc2FnZXNBZGRlZCArPSBuZXdNZXNzYWdlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgIT09IG9yaWdpbmFsQ29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmZpbGVTZXJ2aWNlLndyaXRlVG9GaWxlKGZpbGVQYXRoLCBjb250ZW50KTtcblxuICAgICAgICAgICAgICAgICAgICBpbXBvcnRSZXBvcnQuYWRkVXBkYXRlZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRUaXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhdENyZWF0ZVRpbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGF0VXBkYXRlVGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld01lc3NhZ2VzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRTdGF0c1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGltcG9ydFJlcG9ydC5hZGRTa2lwcGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhdFRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGF0Q3JlYXRlVGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRVcGRhdGVUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxNZXNzYWdlQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIk5vIGNoYW5nZXMgbmVlZGVkXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci5lcnJvcihcIkVycm9yIHVwZGF0aW5nIG5vdGVcIiwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZU5ld05vdGUoXG4gICAgICAgIGFkYXB0ZXI6IGFueSxcbiAgICAgICAgY2hhdDogYW55LFxuICAgICAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgICAgICBpbXBvcnRSZXBvcnQ6IEltcG9ydFJlcG9ydCxcbiAgICAgICAgemlwPzogSlNaaXBcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUgZm9sZGVyIGV4aXN0cyAoaW4gY2FzZSBpdCB3YXMgZGVsZXRlZClcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBmaWxlUGF0aC5zdWJzdHJpbmcoMCwgZmlsZVBhdGgubGFzdEluZGV4T2YoJy8nKSk7XG4gICAgICAgICAgICBjb25zdCBmb2xkZXJSZXN1bHQgPSBhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHMoZm9sZGVyUGF0aCwgdGhpcy5wbHVnaW4uYXBwLnZhdWx0KTtcbiAgICAgICAgICAgIGlmICghZm9sZGVyUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZm9sZGVyUmVzdWx0LmVycm9yIHx8IFwiRmFpbGVkIHRvIGVuc3VyZSBmb2xkZXIgZXhpc3RzLlwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29udmVydCB0byBzdGFuZGFyZCBmb3JtYXRcbiAgICAgICAgICAgIGxldCBzdGFuZGFyZENvbnZlcnNhdGlvbiA9IGF3YWl0IGFkYXB0ZXIuY29udmVydENoYXQoY2hhdCk7XG5cbiAgICAgICAgICAgIC8vIFByb2Nlc3MgYXR0YWNobWVudHMgaWYgWklQIHByb3ZpZGVkXG4gICAgICAgICAgICBsZXQgYXR0YWNobWVudFN0YXRzID0geyB0b3RhbDogMCwgZm91bmQ6IDAsIG1pc3Npbmc6IDAsIGZhaWxlZDogMCB9O1xuICAgICAgICAgICAgaWYgKHppcCAmJiBhZGFwdGVyLnByb2Nlc3NNZXNzYWdlQXR0YWNobWVudHMpIHtcbiAgICAgICAgICAgICAgICBzdGFuZGFyZENvbnZlcnNhdGlvbi5tZXNzYWdlcyA9IGF3YWl0IGFkYXB0ZXIucHJvY2Vzc01lc3NhZ2VBdHRhY2htZW50cyhcbiAgICAgICAgICAgICAgICAgICAgc3RhbmRhcmRDb252ZXJzYXRpb24ubWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgICAgIGFkYXB0ZXIuZ2V0SWQoY2hhdCksXG4gICAgICAgICAgICAgICAgICAgIHppcFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgYXR0YWNobWVudCBzdGF0c1xuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRTdGF0cyA9IHRoaXMuY2FsY3VsYXRlQXR0YWNobWVudFN0YXRzKHN0YW5kYXJkQ29udmVyc2F0aW9uLm1lc3NhZ2VzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHRoaXMubm90ZUZvcm1hdHRlci5nZW5lcmF0ZU1hcmtkb3duQ29udGVudChzdGFuZGFyZENvbnZlcnNhdGlvbik7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZVNlcnZpY2Uud3JpdGVUb0ZpbGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlQ291bnQgPSBhd2FpdCB0aGlzLmNvdW50TWVzc2FnZXMoYWRhcHRlciwgY2hhdCk7XG4gICAgICAgICAgICBjb25zdCBjcmVhdGVUaW1lID0gYWRhcHRlci5nZXRDcmVhdGVUaW1lKGNoYXQpO1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlVGltZSA9IGFkYXB0ZXIuZ2V0VXBkYXRlVGltZShjaGF0KTtcbiAgICAgICAgICAgIGNvbnN0IGNoYXRUaXRsZSA9IGFkYXB0ZXIuZ2V0VGl0bGUoY2hhdCk7XG5cbiAgICAgICAgICAgIC8vIEdldCBwcm92aWRlci1zcGVjaWZpYyBjb3VudCAoYXJ0aWZhY3RzIGZvciBDbGF1ZGUsIGF0dGFjaG1lbnRzIGZvciBDaGF0R1BUKVxuICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJTcGVjaWZpY0NvdW50ID0gdGhpcy5nZXRQcm92aWRlclNwZWNpZmljQ291bnQoYWRhcHRlciwgY2hhdCk7XG5cbiAgICAgICAgICAgIGltcG9ydFJlcG9ydC5hZGRDcmVhdGVkKFxuICAgICAgICAgICAgICAgIGNoYXRUaXRsZSxcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCxcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lLFxuICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZUNvdW50LFxuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRTdGF0cyxcbiAgICAgICAgICAgICAgICBwcm92aWRlclNwZWNpZmljQ291bnRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMuY291bnRlcnMudG90YWxOZXdDb252ZXJzYXRpb25zU3VjY2Vzc2Z1bGx5SW1wb3J0ZWQrKztcbiAgICAgICAgICAgIHRoaXMuY291bnRlcnMudG90YWxOb25FbXB0eU1lc3NhZ2VzVG9JbXBvcnQgKz0gbWVzc2FnZUNvdW50O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci5lcnJvcihcIkVycm9yIGNyZWF0aW5nIG5ldyBub3RlXCIsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc3QgY3JlYXRlVGltZSA9IGFkYXB0ZXIuZ2V0Q3JlYXRlVGltZShjaGF0KTtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVRpbWUgPSBhZGFwdGVyLmdldFVwZGF0ZVRpbWUoY2hhdCk7XG4gICAgICAgICAgICBjb25zdCBjaGF0VGl0bGUgPSBhZGFwdGVyLmdldFRpdGxlKGNoYXQpO1xuXG4gICAgICAgICAgICBpbXBvcnRSZXBvcnQuYWRkRmFpbGVkKFxuICAgICAgICAgICAgICAgIGNoYXRUaXRsZSxcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCxcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lLFxuICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUsXG4gICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgdXBkYXRlTWV0YWRhdGEoY29udGVudDogc3RyaW5nLCB1cGRhdGVUaW1lOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICAvLyBVc2UgSVNPIDg2MDEgZm9ybWF0IGZvciBmcm9udG1hdHRlciAoY29uc2lzdGVudCB3aXRoIGNyZWF0ZV90aW1lKVxuICAgICAgICBjb25zdCB1cGRhdGVUaW1lU3RyID0gbmV3IERhdGUodXBkYXRlVGltZSAqIDEwMDApLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL151cGRhdGVfdGltZTogLiokL20sIGB1cGRhdGVfdGltZTogJHt1cGRhdGVUaW1lU3RyfWApO1xuXG4gICAgICAgIC8vIE5vdGU6IFwiTGFzdCBVcGRhdGVkXCIgZmllbGQgaXMgbm90IHVzZWQgaW4gY3VycmVudCBub3RlIGZvcm1hdCwgYnV0IGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXkxhc3QgVXBkYXRlZDogLiokL20sIGBMYXN0IFVwZGF0ZWQ6ICR7dXBkYXRlVGltZVN0cn1gKTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgZXh0cmFjdE1lc3NhZ2VVSURzRnJvbU5vdGUoY29udGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCB1aWRSZWdleCA9IC88IS0tIFVJRDogKC4qPykgLS0+L2c7XG4gICAgICAgIGNvbnN0IHVpZHMgPSBbXTtcbiAgICAgICAgbGV0IG1hdGNoO1xuICAgICAgICB3aGlsZSAoKG1hdGNoID0gdWlkUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHVpZHMucHVzaChtYXRjaFsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVpZHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUZpbGVQYXRoRm9yQ2hhdChhZGFwdGVyOiBhbnksIGNoYXQ6IGFueSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVRpbWUgPSBhZGFwdGVyLmdldENyZWF0ZVRpbWUoY2hhdCk7XG4gICAgICAgIGNvbnN0IGNoYXRUaXRsZSA9IGFkYXB0ZXIuZ2V0VGl0bGUoY2hhdCk7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyTmFtZSA9IGFkYXB0ZXIuZ2V0UHJvdmlkZXJOYW1lKCk7XG5cbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGNyZWF0ZVRpbWUgKiAxMDAwKTtcbiAgICAgICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXG4gICAgICAgIC8vIE5ldyBzdHJ1Y3R1cmU6IDxjb252ZXJzYXRpb25Gb2xkZXI+Lzxwcm92aWRlcj4vPHllYXI+Lzxtb250aD4vXG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb252ZXJzYXRpb25Gb2xkZXJ9LyR7cHJvdmlkZXJOYW1lfS8ke3llYXJ9LyR7bW9udGh9YDtcblxuICAgICAgICBjb25zdCBmb2xkZXJSZXN1bHQgPSBhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHMoZm9sZGVyUGF0aCwgdGhpcy5wbHVnaW4uYXBwLnZhdWx0KTtcbiAgICAgICAgaWYgKCFmb2xkZXJSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvbGRlclJlc3VsdC5lcnJvciB8fCBcIkZhaWxlZCB0byBlbnN1cmUgZm9sZGVyIGV4aXN0cy5cIik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZmlsZU5hbWUgPSBnZW5lcmF0ZUNvbnZlcnNhdGlvbkZpbGVOYW1lKFxuICAgICAgICAgICAgY2hhdFRpdGxlLFxuICAgICAgICAgICAgY3JlYXRlVGltZSxcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFkZERhdGVQcmVmaXgsXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0XG4gICAgICAgICkgKyBcIi5tZFwiO1xuXG4gICAgICAgIGxldCBmaWxlUGF0aCA9IGAke2ZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDtcbiAgICAgICAgaWYgKGF3YWl0IGRvZXNGaWxlUGF0aEV4aXN0KGZpbGVQYXRoLCB0aGlzLnBsdWdpbi5hcHAudmF1bHQpKSB7XG4gICAgICAgICAgICBmaWxlUGF0aCA9IGF3YWl0IGdlbmVyYXRlVW5pcXVlRmlsZU5hbWUoZmlsZVBhdGgsIHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmaWxlUGF0aDtcbiAgICB9XG5cbiAgICBnZXRDb3VudGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY291bnRlcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgY291bnRlcnMgZm9yIHByb2Nlc3NpbmcgYSBuZXcgZmlsZVxuICAgICAqL1xuICAgIHJlc2V0Q291bnRlcnMoKSB7XG4gICAgICAgIHRoaXMuY291bnRlcnMgPSB7XG4gICAgICAgICAgICB0b3RhbEV4aXN0aW5nQ29udmVyc2F0aW9uczogMCxcbiAgICAgICAgICAgIHRvdGFsTmV3Q29udmVyc2F0aW9uc1RvSW1wb3J0OiAwLFxuICAgICAgICAgICAgdG90YWxFeGlzdGluZ0NvbnZlcnNhdGlvbnNUb1VwZGF0ZTogMCxcbiAgICAgICAgICAgIHRvdGFsTmV3Q29udmVyc2F0aW9uc1N1Y2Nlc3NmdWxseUltcG9ydGVkOiAwLFxuICAgICAgICAgICAgdG90YWxDb252ZXJzYXRpb25zQWN0dWFsbHlVcGRhdGVkOiAwLFxuICAgICAgICAgICAgdG90YWxDb252ZXJzYXRpb25zUHJvY2Vzc2VkOiAwLFxuICAgICAgICAgICAgdG90YWxOb25FbXB0eU1lc3NhZ2VzVG9JbXBvcnQ6IDAsXG4gICAgICAgICAgICB0b3RhbE5vbkVtcHR5TWVzc2FnZXNUb0FkZDogMCxcbiAgICAgICAgICAgIHRvdGFsTm9uRW1wdHlNZXNzYWdlc0FkZGVkOiAwLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBhdHRhY2htZW50IHN0YXRpc3RpY3MgZnJvbSBwcm9jZXNzZWQgbWVzc2FnZXNcbiAgICAgKi9cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUF0dGFjaG1lbnRTdGF0cyhtZXNzYWdlczogU3RhbmRhcmRNZXNzYWdlW10pOiB7IHRvdGFsOiBudW1iZXI7IGZvdW5kOiBudW1iZXI7IG1pc3Npbmc6IG51bWJlcjsgZmFpbGVkOiBudW1iZXIgfSB7XG4gICAgICAgIGNvbnN0IHN0YXRzID0geyB0b3RhbDogMCwgZm91bmQ6IDAsIG1pc3Npbmc6IDAsIGZhaWxlZDogMCB9O1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5hdHRhY2htZW50cykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0YWNobWVudCBvZiBtZXNzYWdlLmF0dGFjaG1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRzLnRvdGFsKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRhY2htZW50LnN0YXR1cz8uZm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLmZvdW5kKys7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXR0YWNobWVudC5zdGF0dXM/LnJlYXNvbiA9PT0gJ21pc3NpbmdfZnJvbV9leHBvcnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5taXNzaW5nKys7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXR0YWNobWVudC5zdGF0dXM/LnJlYXNvbiA9PT0gJ2V4dHJhY3Rpb25fZmFpbGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMuZmFpbGVkKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzdGF0cztcbiAgICB9XG59IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy9mb3JtYXR0ZXJzL21lc3NhZ2UtZm9ybWF0dGVyLnRzXG5pbXBvcnQgeyBTdGFuZGFyZE1lc3NhZ2UsIFN0YW5kYXJkQXR0YWNobWVudCB9IGZyb20gXCIuLi90eXBlcy9zdGFuZGFyZFwiO1xuaW1wb3J0IHsgZm9ybWF0TWVzc2FnZVRpbWVzdGFtcCB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ2dlclwiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuXG5leHBvcnQgY2xhc3MgTWVzc2FnZUZvcm1hdHRlciB7XG4gICAgLy8gTmV4dXMgY3VzdG9tIGNhbGxvdXRzIHdpdGggaWNvbnNcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDQUxMT1VUUyA9IHtcbiAgICAgICAgVVNFUjogJ25leHVzX3VzZXInLCAgICAgICAgIC8vIFx1RDgzRFx1REM2NCBVc2VyIG1lc3NhZ2VzXG4gICAgICAgIEFHRU5UOiAnbmV4dXNfYWdlbnQnLCAgICAgICAvLyBcdUQ4M0VcdUREMTYgQXNzaXN0YW50L0FnZW50IG1lc3NhZ2VzXG4gICAgICAgIEFUVEFDSE1FTlQ6ICduZXh1c19hdHRhY2htZW50JywgLy8gXHVEODNEXHVEQ0NFIEF0dGFjaG1lbnRzXG4gICAgICAgIEFSVElGQUNUOiAnbmV4dXNfYXJ0aWZhY3QnLCAgICAgLy8gXHVEODNEXHVERUUwXHVGRTBGIENsYXVkZSBhcnRpZmFjdHNcbiAgICAgICAgUFJPTVBUOiAnbmV4dXNfcHJvbXB0JyAgICAgICAgICAvLyBcdUQ4M0RcdURDQUQgU3lzdGVtIHByb21wdHNcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgbG9nZ2VyOiBMb2dnZXIsXG4gICAgICAgIHByaXZhdGUgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luXG4gICAgKSB7fVxuXG4gICAgZm9ybWF0TWVzc2FnZXMobWVzc2FnZXM6IFN0YW5kYXJkTWVzc2FnZVtdKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzXG4gICAgICAgICAgICAuZmlsdGVyKG1lc3NhZ2UgPT4gbWVzc2FnZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgLm1hcChtZXNzYWdlID0+IHRoaXMuZm9ybWF0TWVzc2FnZShtZXNzYWdlKSlcbiAgICAgICAgICAgIC5maWx0ZXIoZm9ybWF0dGVkTWVzc2FnZSA9PiBmb3JtYXR0ZWRNZXNzYWdlICE9PSBcIlwiKVxuICAgICAgICAgICAgLmpvaW4oXCJcXG5cIik7XG4gICAgfVxuXG4gICAgZm9ybWF0TWVzc2FnZShtZXNzYWdlOiBTdGFuZGFyZE1lc3NhZ2UpOiBzdHJpbmcge1xuICAgICAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiTWVzc2FnZSBpcyBudWxsIG9yIHVuZGVmaW5lZDpcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCBjdXN0b20gZm9ybWF0IGlmIGVuYWJsZWRcbiAgICAgICAgY29uc3QgY3VzdG9tRm9ybWF0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlQ3VzdG9tTWVzc2FnZVRpbWVzdGFtcEZvcm1hdFxuICAgICAgICAgICAgPyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXNzYWdlVGltZXN0YW1wRm9ybWF0XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICBjb25zdCBtZXNzYWdlVGltZSA9IGZvcm1hdE1lc3NhZ2VUaW1lc3RhbXAobWVzc2FnZS50aW1lc3RhbXAsIGN1c3RvbUZvcm1hdCk7XG5cbiAgICAgICAgY29uc3QgYXV0aG9yTmFtZSA9IG1lc3NhZ2Uucm9sZSA9PT0gXCJ1c2VyXCIgPyBcIlVzZXJcIiA6IFwiQXNzaXN0YW50XCI7XG4gICAgICAgIGNvbnN0IGNhbGxvdXRUeXBlID0gbWVzc2FnZS5yb2xlID09PSBcInVzZXJcIiA/IE1lc3NhZ2VGb3JtYXR0ZXIuQ0FMTE9VVFMuVVNFUiA6IE1lc3NhZ2VGb3JtYXR0ZXIuQ0FMTE9VVFMuQUdFTlQ7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGNhbGxvdXQgd2l0aCB0aW1lc3RhbXAgYW5kIGNvbnRlbnRcbiAgICAgICAgbGV0IG1lc3NhZ2VDb250ZW50ID0gYD5bISR7Y2FsbG91dFR5cGV9XSAqKiR7YXV0aG9yTmFtZX0qKiAtICR7bWVzc2FnZVRpbWV9XFxuYDtcblxuICAgICAgICAvLyBGb3JtYXQgbWFpbiBtZXNzYWdlIGNvbnRlbnRcbiAgICAgICAgaWYgKG1lc3NhZ2UuY29udGVudCkge1xuICAgICAgICAgICAgLy8gQWRkIGNvbnRlbnQgaW5zaWRlIHRoZSBjYWxsb3V0IChubyBuZWVkIGZvciBxdW90ZSBjaGFycylcbiAgICAgICAgICAgIG1lc3NhZ2VDb250ZW50ICs9IGA+ICR7bWVzc2FnZS5jb250ZW50LnNwbGl0KFwiXFxuXCIpLmpvaW4oXCJcXG4+IFwiKX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZUNvbnRlbnQgKz0gYD4gW05vIGNvbnRlbnQgZm91bmRdYDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvcm1hdCBhdHRhY2htZW50cyBpZiBhbnlcbiAgICAgICAgaWYgKG1lc3NhZ2UuYXR0YWNobWVudHMgJiYgbWVzc2FnZS5hdHRhY2htZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtZXNzYWdlQ29udGVudCArPSBcIlxcblwiICsgdGhpcy5mb3JtYXRBdHRhY2htZW50cyhtZXNzYWdlLmF0dGFjaG1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBVSUQgZm9yIHVwZGF0ZSB0cmFja2luZ1xuICAgICAgICBtZXNzYWdlQ29udGVudCArPSBgXFxuPCEtLSBVSUQ6ICR7bWVzc2FnZS5pZH0gLS0+YDtcblxuICAgICAgICAvLyBBZGQgc2VwYXJhdG9yIGZvciBhc3Npc3RhbnQgbWVzc2FnZXNcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9sZSA9PT0gXCJhc3Npc3RhbnRcIikge1xuICAgICAgICAgICAgbWVzc2FnZUNvbnRlbnQgKz0gXCJcXG5cXG4tLS1cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtZXNzYWdlQ29udGVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdEF0dGFjaG1lbnRzKGF0dGFjaG1lbnRzOiBTdGFuZGFyZEF0dGFjaG1lbnRbXSk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBhdHRhY2htZW50cy5tYXAoYXR0YWNobWVudCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRTaW5nbGVBdHRhY2htZW50KGF0dGFjaG1lbnQpO1xuICAgICAgICB9KS5qb2luKFwiXFxuXFxuXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBzaW5nbGUgYXR0YWNobWVudCB3aXRoIE5leHVzIGNhbGxvdXQgc3R5bGluZ1xuICAgICAqXG4gICAgICogUHJvdmlkZXItZm9ybWF0dGVkIGF0dGFjaG1lbnRzICh3aXRoIGV4dHJhY3RlZENvbnRlbnQpIGFyZSBkaXNwbGF5ZWQgYXMtaXMuXG4gICAgICogR2VuZXJpYyBhdHRhY2htZW50cyBnZXQgYmFzaWMgZm9ybWF0dGluZy5cbiAgICAgKi9cbiAgICBwcml2YXRlIGZvcm1hdFNpbmdsZUF0dGFjaG1lbnQoYXR0YWNobWVudDogU3RhbmRhcmRBdHRhY2htZW50KTogc3RyaW5nIHtcbiAgICAgICAgLy8gSWYgZXh0cmFjdGVkQ29udGVudCBleGlzdHMsIGRpc3BsYXkgaXQgYXMtaXMgKGFscmVhZHkgZm9ybWF0dGVkIGJ5IHByb3ZpZGVyKVxuICAgICAgICBpZiAoYXR0YWNobWVudC5leHRyYWN0ZWRDb250ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudC5leHRyYWN0ZWRDb250ZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2VuZXJpYyBmb3JtYXR0aW5nIGZvciBhdHRhY2htZW50cyB3aXRob3V0IGV4dHJhY3RlZENvbnRlbnQgKG5lc3RlZCBpbiBtZXNzYWdlIGNhbGxvdXQpXG4gICAgICAgIGxldCBjb250ZW50ID0gYD4+WyEke01lc3NhZ2VGb3JtYXR0ZXIuQ0FMTE9VVFMuQVRUQUNITUVOVH1dIGA7XG5cbiAgICAgICAgLy8gU3RhdHVzLWF3YXJlIGhlYWRlclxuICAgICAgICBpZiAoYXR0YWNobWVudC5zdGF0dXM/LmZvdW5kKSB7XG4gICAgICAgICAgICBjb250ZW50ICs9IGAqKiR7YXR0YWNobWVudC5maWxlTmFtZX0qKmA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZW50ICs9IGAqKiR7YXR0YWNobWVudC5maWxlTmFtZX0qKiAqKG1pc3NpbmcpKmA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgZmlsZSBtZXRhZGF0YVxuICAgICAgICBpZiAoYXR0YWNobWVudC5maWxlVHlwZSkge1xuICAgICAgICAgICAgY29udGVudCArPSBgICgke2F0dGFjaG1lbnQuZmlsZVR5cGV9KWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXR0YWNobWVudC5maWxlU2l6ZSkge1xuICAgICAgICAgICAgY29udGVudCArPSBgIC0gJHt0aGlzLmZvcm1hdEZpbGVTaXplKGF0dGFjaG1lbnQuZmlsZVNpemUpfWA7XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZW50ICs9ICdcXG4nO1xuXG4gICAgICAgIC8vIEhhbmRsZSBzdWNjZXNzZnVsIGV4dHJhY3Rpb25cbiAgICAgICAgaWYgKGF0dGFjaG1lbnQuc3RhdHVzPy5mb3VuZCAmJiBhdHRhY2htZW50LnVybCkge1xuICAgICAgICAgICAgLy8gU2tpcCBzYW5kYm94Oi8vIFVSTHMgLSB0aGV5IGRvbid0IHdvcmsgaW4gT2JzaWRpYW5cbiAgICAgICAgICAgIGlmICghYXR0YWNobWVudC51cmwuc3RhcnRzV2l0aCgnc2FuZGJveDovLycpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNJbWFnZUZpbGUoYXR0YWNobWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgPj4gIVtbJHthdHRhY2htZW50LnVybH1dXWA7IC8vIEVtYmVkIGltYWdlc1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYD4+IFtbJHthdHRhY2htZW50LnVybH1dXWA7IC8vIExpbmsgZG9jdW1lbnRzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTYW5kYm94IFVSTCAtIGV4cGxhaW4gdG8gdXNlclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYD4+IFx1MjZBMFx1RkUwRiBGaWxlIG5vdCBhdmFpbGFibGUgaW4gYXJjaGl2ZS4gVmlzaXQgdGhlIG9yaWdpbmFsIGNvbnZlcnNhdGlvbiB0byBhY2Nlc3MgaXRgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGFuZGxlIG1pc3NpbmcvZmFpbGVkIGF0dGFjaG1lbnRzIHdpdGggaW5mb3JtYXRpdmUgbm90ZXNcbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC5zdGF0dXMgJiYgIWF0dGFjaG1lbnQuc3RhdHVzLmZvdW5kKSB7XG4gICAgICAgICAgICBjb250ZW50ICs9IGA+PiBcdTI2QTBcdUZFMEYgJHt0aGlzLmdldFN0YXR1c01lc3NhZ2UoYXR0YWNobWVudC5zdGF0dXMucmVhc29uKX1gO1xuXG4gICAgICAgICAgICBpZiAoYXR0YWNobWVudC5zdGF0dXMubm90ZSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYFxcbj4+ICoqTm90ZToqKiAke2F0dGFjaG1lbnQuc3RhdHVzLm5vdGV9YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIGxpbmsgdG8gb3JpZ2luYWwgY29udmVyc2F0aW9uIGZvciBtaXNzaW5nIGF0dGFjaG1lbnRzXG4gICAgICAgICAgICBpZiAoYXR0YWNobWVudC5zdGF0dXMucmVhc29uID09PSAnbWlzc2luZ19mcm9tX2V4cG9ydCcpIHtcbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZXh0cmFjdCBjb252ZXJzYXRpb24gVVJMIGZyb20gYXR0YWNobWVudCBvciB1c2UgZ2VuZXJpYyBwcm92aWRlciBsaW5rXG4gICAgICAgICAgICAgICAgaWYgKGF0dGFjaG1lbnQudXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYFxcbj4+IFtPcGVuIG9yaWdpbmFsIGNvbnZlcnNhdGlvbl0oJHthdHRhY2htZW50LnVybH0pYDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9IGBcXG4+PiBPcmlnaW5hbCBjb252ZXJzYXRpb24gbGluayBub3QgYXZhaWxhYmxlYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgcmF3IGNvbnRlbnQgZm9yIHRleHQgZmlsZXNcbiAgICAgICAgZWxzZSBpZiAoYXR0YWNobWVudC5jb250ZW50KSB7XG4gICAgICAgICAgICBjb250ZW50ICs9IGA+PiAke2F0dGFjaG1lbnQuY29udGVudH1gO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHVzZXItZnJpZW5kbHkgc3RhdHVzIG1lc3NhZ2VcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldFN0YXR1c01lc3NhZ2UocmVhc29uPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgc3dpdGNoIChyZWFzb24pIHtcbiAgICAgICAgICAgIGNhc2UgJ21pc3NpbmdfZnJvbV9leHBvcnQnOlxuICAgICAgICAgICAgICAgIHJldHVybiAnTm90IGluY2x1ZGVkIGluIGV4cG9ydCc7XG4gICAgICAgICAgICBjYXNlICdleHRyYWN0aW9uX2ZhaWxlZCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdFeHRyYWN0aW9uIGZhaWxlZCc7XG4gICAgICAgICAgICBjYXNlICdjb3JydXB0ZWQnOlxuICAgICAgICAgICAgICAgIHJldHVybiAnRmlsZSBhcHBlYXJzIGNvcnJ1cHRlZCc7XG4gICAgICAgICAgICBjYXNlICd1bnN1cHBvcnRlZF9mb3JtYXQnOlxuICAgICAgICAgICAgICAgIHJldHVybiAnVW5zdXBwb3J0ZWQgZmlsZSBmb3JtYXQnO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1Byb2Nlc3NpbmcgaXNzdWUnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYXR0YWNobWVudCBpcyBhbiBpbWFnZSBmaWxlIGZvciBlbWJlZGRpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzSW1hZ2VGaWxlKGF0dGFjaG1lbnQ6IFN0YW5kYXJkQXR0YWNobWVudCk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBDaGVjayBNSU1FIHR5cGUgZmlyc3QgKG1vc3QgcmVsaWFibGUpXG4gICAgICAgIGlmIChhdHRhY2htZW50LmZpbGVUeXBlPy5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEZhbGwgYmFjayB0byBmaWxlIGV4dGVuc2lvblxuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGF0dGFjaG1lbnQuZmlsZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgaW1hZ2VFeHRlbnNpb25zID0gWycucG5nJywgJy5qcGcnLCAnLmpwZWcnLCAnLmdpZicsICcud2VicCcsICcuc3ZnJywgJy5ibXAnLCAnLnRpZmYnXTtcbiAgICAgICAgcmV0dXJuIGltYWdlRXh0ZW5zaW9ucy5zb21lKGV4dCA9PiBmaWxlTmFtZS5lbmRzV2l0aChleHQpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdEZpbGVTaXplKGJ5dGVzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBzaXplcyA9IFsnQnl0ZXMnLCAnS0InLCAnTUInLCAnR0InXTtcbiAgICAgICAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQnl0ZXMnO1xuICAgICAgICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZygxMDI0KSk7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGJ5dGVzIC8gTWF0aC5wb3coMTAyNCwgaSkgKiAxMDApIC8gMTAwICsgJyAnICsgc2l6ZXNbaV07XG4gICAgfVxufSIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuXG4vLyBzcmMvZm9ybWF0dGVycy9ub3RlLWZvcm1hdHRlci50c1xuaW1wb3J0IHsgU3RhbmRhcmRDb252ZXJzYXRpb24gfSBmcm9tIFwiLi4vdHlwZXMvc3RhbmRhcmRcIjtcbmltcG9ydCB7IGZvcm1hdFRpbWVzdGFtcCwgZ2VuZXJhdGVTYWZlQWxpYXMgfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCB7IE1lc3NhZ2VGb3JtYXR0ZXIgfSBmcm9tIFwiLi9tZXNzYWdlLWZvcm1hdHRlclwiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ2dlclwiO1xuaW1wb3J0IHsgVVJMX0dFTkVSQVRPUlMgfSBmcm9tIFwiLi4vdHlwZXMvc3RhbmRhcmRcIjtcbmltcG9ydCB0eXBlIE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcblxuZXhwb3J0IGNsYXNzIE5vdGVGb3JtYXR0ZXIge1xuICAgIHByaXZhdGUgbWVzc2FnZUZvcm1hdHRlcjogTWVzc2FnZUZvcm1hdHRlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICBwcml2YXRlIHBsdWdpbklkOiBzdHJpbmcsXG4gICAgICAgIHByaXZhdGUgcGx1Z2luVmVyc2lvbjogc3RyaW5nLFxuICAgICAgICBwcml2YXRlIHBsdWdpbjogTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpblxuICAgICkge1xuICAgICAgICB0aGlzLm1lc3NhZ2VGb3JtYXR0ZXIgPSBuZXcgTWVzc2FnZUZvcm1hdHRlcihsb2dnZXIsIHBsdWdpbik7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVNYXJrZG93bkNvbnRlbnQoY29udmVyc2F0aW9uOiBTdGFuZGFyZENvbnZlcnNhdGlvbik6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHNhZmVUaXRsZSA9IGdlbmVyYXRlU2FmZUFsaWFzKGNvbnZlcnNhdGlvbi50aXRsZSk7XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgSVNPIDg2MDEgdGltZXN0YW1wcyBmb3IgZnJvbnRtYXR0ZXIgKHYxLjMuMCspXG4gICAgICAgIGNvbnN0IGNyZWF0ZVRpbWVTdHIgPSBuZXcgRGF0ZShjb252ZXJzYXRpb24uY3JlYXRlVGltZSAqIDEwMDApLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZVRpbWVTdHIgPSBuZXcgRGF0ZShjb252ZXJzYXRpb24udXBkYXRlVGltZSAqIDEwMDApLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgdXNlci1mcmllbmRseSB0aW1lc3RhbXBzIGZvciBub3RlIGJvZHlcbiAgICAgICAgY29uc3QgY3JlYXRlVGltZURpc3BsYXkgPSBgJHtmb3JtYXRUaW1lc3RhbXAoY29udmVyc2F0aW9uLmNyZWF0ZVRpbWUsIFwiZGF0ZVwiKX0gYXQgJHtmb3JtYXRUaW1lc3RhbXAoY29udmVyc2F0aW9uLmNyZWF0ZVRpbWUsIFwidGltZVwiKX1gO1xuICAgICAgICBjb25zdCB1cGRhdGVUaW1lRGlzcGxheSA9IGAke2Zvcm1hdFRpbWVzdGFtcChjb252ZXJzYXRpb24udXBkYXRlVGltZSwgXCJkYXRlXCIpfSBhdCAke2Zvcm1hdFRpbWVzdGFtcChjb252ZXJzYXRpb24udXBkYXRlVGltZSwgXCJ0aW1lXCIpfWA7XG5cbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLmdlbmVyYXRlSGVhZGVyKHNhZmVUaXRsZSwgY29udmVyc2F0aW9uLmlkLCBjcmVhdGVUaW1lU3RyLCB1cGRhdGVUaW1lU3RyLCBjcmVhdGVUaW1lRGlzcGxheSwgdXBkYXRlVGltZURpc3BsYXksIGNvbnZlcnNhdGlvbik7XG4gICAgICAgIGNvbnRlbnQgKz0gdGhpcy5nZW5lcmF0ZU1lc3NhZ2VzQ29udGVudChjb252ZXJzYXRpb24pO1xuXG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2VuZXJhdGVIZWFkZXIoXG4gICAgICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgICAgIGNvbnZlcnNhdGlvbklkOiBzdHJpbmcsXG4gICAgICAgIGNyZWF0ZVRpbWVTdHI6IHN0cmluZyxcbiAgICAgICAgdXBkYXRlVGltZVN0cjogc3RyaW5nLFxuICAgICAgICBjcmVhdGVUaW1lRGlzcGxheTogc3RyaW5nLFxuICAgICAgICB1cGRhdGVUaW1lRGlzcGxheTogc3RyaW5nLFxuICAgICAgICBjb252ZXJzYXRpb246IFN0YW5kYXJkQ29udmVyc2F0aW9uXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgLy8gR2VuZXJhdGUgY2hhdCBVUkxcbiAgICAgICAgbGV0IGNoYXRVcmwgPSBjb252ZXJzYXRpb24uY2hhdFVybDtcbiAgICAgICAgaWYgKCFjaGF0VXJsICYmIFVSTF9HRU5FUkFUT1JTW2NvbnZlcnNhdGlvbi5wcm92aWRlcl0pIHtcbiAgICAgICAgICAgIGNoYXRVcmwgPSBVUkxfR0VORVJBVE9SU1tjb252ZXJzYXRpb24ucHJvdmlkZXJdLmdlbmVyYXRlQ2hhdFVybChjb252ZXJzYXRpb25JZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCdWlsZCBmcm9udG1hdHRlciB3aXRoIHBsdWdpbl92ZXJzaW9uIGFmdGVyIG5leHVzXG4gICAgICAgIC8vIFRpbWVzdGFtcHMgaW4gSVNPIDg2MDEgZm9ybWF0ICh2MS4zLjArKVxuICAgICAgICBsZXQgZnJvbnRtYXR0ZXIgPSBgLS0tXG5uZXh1czogJHt0aGlzLnBsdWdpbklkfVxucGx1Z2luX3ZlcnNpb246IFwiJHt0aGlzLnBsdWdpblZlcnNpb259XCJcbnByb3ZpZGVyOiAke2NvbnZlcnNhdGlvbi5wcm92aWRlcn1cbmFsaWFzZXM6ICR7dGl0bGV9XG5jb252ZXJzYXRpb25faWQ6ICR7Y29udmVyc2F0aW9uSWR9XG5jcmVhdGVfdGltZTogJHtjcmVhdGVUaW1lU3RyfVxudXBkYXRlX3RpbWU6ICR7dXBkYXRlVGltZVN0cn1cbi0tLVxuXG5gO1xuXG4gICAgICAgIC8vIEJ1aWxkIGhlYWRlciBjb250ZW50IC0gdXNlIG9yaWdpbmFsIHRpdGxlIGZvciBkaXNwbGF5LCBzYWZlIHRpdGxlIGZvciBmcm9udG1hdHRlclxuICAgICAgICAvLyBEaXNwbGF5IHRpbWVzdGFtcHMgaW4gdXNlci1mcmllbmRseSBmb3JtYXRcbiAgICAgICAgbGV0IGhlYWRlciA9IGAjIFRpdGxlOiAke2NvbnZlcnNhdGlvbi50aXRsZX1cXG5cXG5gO1xuICAgICAgICBoZWFkZXIgKz0gYENyZWF0ZWQ6ICR7Y3JlYXRlVGltZURpc3BsYXl9XFxuYDtcbiAgICAgICAgaGVhZGVyICs9IGBMYXN0IFVwZGF0ZWQ6ICR7dXBkYXRlVGltZURpc3BsYXl9XFxuYDtcblxuICAgICAgICBpZiAoY2hhdFVybCkge1xuICAgICAgICAgICAgaGVhZGVyICs9IGBDaGF0IFVSTDogJHtjaGF0VXJsfVxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICBoZWFkZXIgKz0gJ1xcblxcbic7XG5cbiAgICAgICAgcmV0dXJuIGZyb250bWF0dGVyICsgaGVhZGVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2VuZXJhdGVNZXNzYWdlc0NvbnRlbnQoY29udmVyc2F0aW9uOiBTdGFuZGFyZENvbnZlcnNhdGlvbik6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VGb3JtYXR0ZXIuZm9ybWF0TWVzc2FnZXMoY29udmVyc2F0aW9uLm1lc3NhZ2VzKTtcbiAgICB9XG59IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy90eXBlcy9zdGFuZGFyZC50c1xuXG4vKipcbiAqIEF0dGFjaG1lbnQgcHJvY2Vzc2luZyBzdGF0dXNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBdHRhY2htZW50U3RhdHVzIHtcbiAgICBwcm9jZXNzZWQ6IGJvb2xlYW47XG4gICAgZm91bmQ6IGJvb2xlYW47XG4gICAgbG9jYWxQYXRoPzogc3RyaW5nO1xuICAgIHJlYXNvbj86ICdtaXNzaW5nX2Zyb21fZXhwb3J0JyB8ICdjb3JydXB0ZWQnIHwgJ3Vuc3VwcG9ydGVkX2Zvcm1hdCcgfCAnZXh0cmFjdGlvbl9mYWlsZWQnO1xuICAgIG5vdGU/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogQXR0YWNobWVudCB0eXBlIGVudW1lcmF0aW9uIGZvciBwcm92aWRlci1hZ25vc3RpYyBjbGFzc2lmaWNhdGlvblxuICovXG5leHBvcnQgdHlwZSBBdHRhY2htZW50VHlwZSA9XG4gICAgfCAnZmlsZScgICAgICAgICAgICAgIC8vIEZpbGUgdXBsb2FkZWQgYnkgdXNlclxuICAgIHwgJ2dlbmVyYXRlZF9pbWFnZScgICAvLyBHZW5lcmF0ZWQgaW1hZ2UgKERBTEwtRSwgTWlkam91cm5leSwgZXRjLilcbiAgICB8ICdhcnRpZmFjdCcgICAgICAgICAgLy8gR2VuZXJhdGVkIGNvZGUvZG9jdW1lbnQgKENsYXVkZSBhcnRpZmFjdHMsIGV0Yy4pXG4gICAgfCAndHJhbnNjcmlwdGlvbicgICAgIC8vIEF1ZGlvL3ZpZGVvIHRyYW5zY3JpcHRpb25cbiAgICB8ICdhbmFseXNpcycgICAgICAgICAgLy8gRG9jdW1lbnQvaW1hZ2UgYW5hbHlzaXNcbiAgICB8ICdhdWRpbycgICAgICAgICAgICAgLy8gQXVkaW8gZmlsZXMgKHZvaWNlIGNvbnZlcnNhdGlvbnMpXG4gICAgfCAnbGluayc7ICAgICAgICAgICAgIC8vIEV4dGVybmFsIGxpbmtcblxuLyoqXG4gKiBQcm92aWRlci1hZ25vc3RpYyBhdHRhY2htZW50IGludGVyZmFjZSB3aXRoIHN0YXR1cyB0cmFja2luZ1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0YW5kYXJkQXR0YWNobWVudCB7XG4gICAgZmlsZU5hbWU6IHN0cmluZztcbiAgICBmaWxlU2l6ZT86IG51bWJlcjtcbiAgICBmaWxlVHlwZT86IHN0cmluZztcbiAgICBjb250ZW50Pzogc3RyaW5nOyAvLyBGb3IgdGV4dCBmaWxlcywgY29kZSwgZXRjLlxuICAgIGV4dHJhY3RlZENvbnRlbnQ/OiBzdHJpbmc7IC8vIEZvciBwcm9jZXNzZWQgY29udGVudCAoT0NSLCB0cmFuc2NyaXB0aW9ucylcbiAgICB1cmw/OiBzdHJpbmc7IC8vIEZvciBsaW5rZWQgYXR0YWNobWVudHNcbiAgICBmaWxlSWQ/OiBzdHJpbmc7IC8vIFByb3ZpZGVyLXNwZWNpZmljIGZpbGUgSUQgKGZvciBaSVAgbG9va3VwKVxuXG4gICAgLy8gQXR0YWNobWVudCBwcm9jZXNzaW5nIHN0YXR1c1xuICAgIHN0YXR1cz86IEF0dGFjaG1lbnRTdGF0dXM7XG5cbiAgICAvLyBQcm92aWRlci1hZ25vc3RpYyBtZXRhZGF0YVxuICAgIGF0dGFjaG1lbnRUeXBlPzogQXR0YWNobWVudFR5cGU7XG4gICAgZ2VuZXJhdGlvblByb21wdD86IHN0cmluZzsgLy8gRm9yIGdlbmVyYXRlZCBjb250ZW50IChpbWFnZXMsIGFydGlmYWN0cywgZXRjLilcbiAgICBwcm92aWRlck1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PjsgLy8gUHJvdmlkZXItc3BlY2lmaWMgZGF0YVxufVxuXG4vKipcbiAqIFByb3ZpZGVyLWFnbm9zdGljIG1lc3NhZ2UgaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RhbmRhcmRNZXNzYWdlIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICB0aW1lc3RhbXA6IG51bWJlcjsgLy8gVW5peCB0aW1lc3RhbXBcbiAgICBhdHRhY2htZW50cz86IFN0YW5kYXJkQXR0YWNobWVudFtdO1xufVxuXG4vKipcbiAqIFByb3ZpZGVyLWFnbm9zdGljIGNvbnZlcnNhdGlvbiBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdGFuZGFyZENvbnZlcnNhdGlvbiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7IC8vICdjaGF0Z3B0JywgJ2NsYXVkZScsIGV0Yy5cbiAgICBjcmVhdGVUaW1lOiBudW1iZXI7IC8vIFVuaXggdGltZXN0YW1wXG4gICAgdXBkYXRlVGltZTogbnVtYmVyOyAvLyBVbml4IHRpbWVzdGFtcFxuICAgIG1lc3NhZ2VzOiBTdGFuZGFyZE1lc3NhZ2VbXTtcbiAgICBjaGF0VXJsPzogc3RyaW5nOyAvLyBQcm92aWRlci1zcGVjaWZpYyBVUkxcbiAgICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47IC8vIFByb3ZpZGVyLXNwZWNpZmljIGV4dHJhIGRhdGFcbiAgICBwbHVnaW5fdmVyc2lvbj86IHN0cmluZzsgLy8gVmVyc2lvbiBvZiBwbHVnaW4gdGhhdCBjcmVhdGVkL2xhc3QgbW9kaWZpZWQgdGhpcyBjb252ZXJzYXRpb25cbn1cblxuLyoqXG4gKiBVUkwgZ2VuZXJhdG9yIGludGVyZmFjZSAtIHByb3ZpZGVycyBpbXBsZW1lbnQgdGhpc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFVybEdlbmVyYXRvciB7XG4gICAgZ2VuZXJhdGVDaGF0VXJsKGNvbnZlcnNhdGlvbklkOiBzdHJpbmcpOiBzdHJpbmc7XG59XG5cbi8qKlxuICogQnVpbHQtaW4gVVJMIGdlbmVyYXRvcnMgZm9yIGNvbW1vbiBwcm92aWRlcnNcbiAqL1xuZXhwb3J0IGNvbnN0IFVSTF9HRU5FUkFUT1JTOiBSZWNvcmQ8c3RyaW5nLCBVcmxHZW5lcmF0b3I+ID0ge1xuICAgIGNoYXRncHQ6IHtcbiAgICAgICAgZ2VuZXJhdGVDaGF0VXJsOiAoaWQ6IHN0cmluZykgPT4gYGh0dHBzOi8vY2hhdGdwdC5jb20vYy8ke2lkfWBcbiAgICB9LFxuICAgIGNsYXVkZToge1xuICAgICAgICBnZW5lcmF0ZUNoYXRVcmw6IChpZDogc3RyaW5nKSA9PiBgaHR0cHM6Ly9jbGF1ZGUuYWkvY2hhdC8ke2lkfWBcbiAgICB9XG59O1xuXG4vKipcbiAqIFByb3ZpZGVyLXNwZWNpZmljIHJlcG9ydCBuYW1pbmcgc3RyYXRlZ3lcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXBvcnROYW1pbmdTdHJhdGVneSB7XG4gICAgLyoqXG4gICAgICogRXh0cmFjdCByZXBvcnQgcHJlZml4IGZyb20gYXJjaGl2ZSBmaWxlbmFtZVxuICAgICAqIEBwYXJhbSB6aXBGaWxlTmFtZSAtIE5hbWUgb2YgdGhlIGltcG9ydGVkIFpJUCBmaWxlXG4gICAgICogQHJldHVybnMgcHJlZml4IGZvciByZXBvcnQgbmFtaW5nIChlLmcuLCBcIjIwMjUuMDQuMjVcIilcbiAgICAgKi9cbiAgICBleHRyYWN0UmVwb3J0UHJlZml4KHppcEZpbGVOYW1lOiBzdHJpbmcpOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBHZXQgcHJvdmlkZXIgbmFtZSBmb3IgZm9sZGVyIG9yZ2FuaXphdGlvblxuICAgICAqIEByZXR1cm5zIHByb3ZpZGVyIG5hbWUgKGUuZy4sIFwiY2hhdGdwdFwiLCBcImNsYXVkZVwiKVxuICAgICAqL1xuICAgIGdldFByb3ZpZGVyTmFtZSgpOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBHZXQgcHJvdmlkZXItc3BlY2lmaWMgY29sdW1uIGluZm8gZm9yIHJlcG9ydHNcbiAgICAgKiBAcmV0dXJucyBjb2x1bW4gaGVhZGVyIGFuZCB2YWx1ZSBleHRyYWN0b3JcbiAgICAgKi9cbiAgICBnZXRQcm92aWRlclNwZWNpZmljQ29sdW1uKCk6IHtcbiAgICAgICAgaGVhZGVyOiBzdHJpbmc7XG4gICAgICAgIGdldFZhbHVlOiAoYWRhcHRlcjogYW55LCBjaGF0OiBhbnkpID0+IG51bWJlcjtcbiAgICB9O1xufVxuXG4vKipcbiAqIFJlcG9ydCBnZW5lcmF0aW9uIGluZm8gcmV0dXJuZWQgYnkgcHJvdmlkZXJzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVwb3J0R2VuZXJhdGlvbkluZm8ge1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG4gICAgcHJlZml4OiBzdHJpbmc7XG4gICAgZm9sZGVyUGF0aDogc3RyaW5nOyAgLy8gZS5nLiwgXCJSZXBvcnRzL2NoYXRncHRcIlxuICAgIGJhc2VGaWxlTmFtZTogc3RyaW5nOyAvLyBlLmcuLCBcIjIwMjUuMDQuMjUgLSBpbXBvcnQgcmVwb3J0Lm1kXCJcbn0iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3NlcnZpY2VzL2ZpbGUtc2VydmljZS50c1xuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENvbnZlcnNhdGlvbkNhdGFsb2dFbnRyeSB9IGZyb20gXCIuLi90eXBlcy9wbHVnaW5cIjtcbmltcG9ydCB0eXBlIE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcblxuZXhwb3J0IGNsYXNzIEZpbGVTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbikge31cblxuICAgIGFzeW5jIHdyaXRlVG9GaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCB3cml0ZSB0byAnJHtmaWxlUGF0aH0nOyBpdCBpcyBhIGZvbGRlci5gKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci5lcnJvcihgRXJyb3IgY3JlYXRpbmcgb3IgbW9kaWZ5aW5nIGZpbGUgJyR7ZmlsZVBhdGh9J2AsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVDb252ZXJzYXRpb25GaWxlRGVsZXRpb24oZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBOZXh1cyBjb252ZXJzYXRpb24gZmlsZVxuICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuXG4gICAgICAgICAgICBpZiAoIWZyb250bWF0dGVyPy5jb252ZXJzYXRpb25faWQgfHwgZnJvbnRtYXR0ZXI/Lm5leHVzICE9PSB0aGlzLnBsdWdpbi5tYW5pZmVzdC5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gTm90IGEgTmV4dXMgY29udmVyc2F0aW9uIGZpbGVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTm8gYWN0aW9uIG5lZWRlZCAtIGNvbnZlcnNhdGlvbnMgYXJlIHRyYWNrZWQgdmlhIGZyb250bWF0dGVyIGluIHZhdWx0XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoXCJFcnJvciBoYW5kbGluZyBjb252ZXJzYXRpb24gZmlsZSBkZWxldGlvbjpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGZpbGUgZXh0ZW5zaW9uIGZyb20gZmlsZW5hbWUgKHByb3ZpZGVyLWFnbm9zdGljIHV0aWxpdHkpXG4gICAgICovXG4gICAgZ2V0RmlsZUV4dGVuc2lvbihmaWxlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgbGFzdERvdCA9IGZpbGVOYW1lLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICAgIHJldHVybiBsYXN0RG90ID09PSAtMSA/ICcnIDogZmlsZU5hbWUuc3Vic3RyaW5nKGxhc3REb3QgKyAxKS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IEZ1dHVyZSBlbmhhbmNlbWVudCAtIGRlbGV0ZSBjb252ZXJzYXRpb24gYXR0YWNobWVudHNcbiAgICAvLyBhc3luYyBkZWxldGVDb252ZXJzYXRpb25BdHRhY2htZW50cyhjb252ZXJzYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gICAgIC8vIEltcGxlbWVudGF0aW9uIGZvciBkZWxldGluZyBhdHRhY2htZW50cyB3aGVuIGNvbnZlcnNhdGlvbiBpcyBkZWxldGVkXG4gICAgLy8gfVxufSIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuXG4vLyBzcmMvbW9kZWxzL2Vycm9ycy50c1xuZXhwb3J0IGNsYXNzIE5leHVzQWlDaGF0SW1wb3J0ZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHB1YmxpYyBkZXRhaWxzPzogYW55KSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIk5leHVzQWlDaGF0SW1wb3J0ZXJFcnJvclwiO1xuICAgIH1cbn0iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3Byb3ZpZGVycy9wcm92aWRlci1hZGFwdGVyLnRzXG5pbXBvcnQgSlNaaXAgZnJvbSBcImpzemlwXCI7XG5pbXBvcnQgeyBSZXBvcnROYW1pbmdTdHJhdGVneSwgU3RhbmRhcmRDb252ZXJzYXRpb24sIFN0YW5kYXJkTWVzc2FnZSwgU3RhbmRhcmRBdHRhY2htZW50IH0gZnJvbSBcIi4uL3R5cGVzL3N0YW5kYXJkXCI7XG5cbi8vIE1pbmltYWwgcHJvdmlkZXItYWdub3N0aWMgYWRhcHRlciBjb250cmFjdFxuZXhwb3J0IGludGVyZmFjZSBQcm92aWRlckFkYXB0ZXI8VENoYXQgPSBhbnk+IHtcbiAgLy8gSWRlbnRpZnkgcHJvdmlkZXIgZnJvbSByYXcgY29udmVyc2F0aW9uIHNhbXBsZVxuICBkZXRlY3QocmF3Q29udmVyc2F0aW9uczogYW55W10pOiBib29sZWFuO1xuXG4gIC8vIEJhc2ljIGNoYXQgYWNjZXNzb3JzXG4gIGdldElkKGNoYXQ6IFRDaGF0KTogc3RyaW5nO1xuICBnZXRUaXRsZShjaGF0OiBUQ2hhdCk6IHN0cmluZztcbiAgZ2V0Q3JlYXRlVGltZShjaGF0OiBUQ2hhdCk6IG51bWJlcjsgLy8gdW5peCBzZWNvbmRzXG4gIGdldFVwZGF0ZVRpbWUoY2hhdDogVENoYXQpOiBudW1iZXI7IC8vIHVuaXggc2Vjb25kc1xuXG4gIC8vIENvbnZlcnNpb25cbiAgY29udmVydENoYXQoY2hhdDogVENoYXQpOiBTdGFuZGFyZENvbnZlcnNhdGlvbiB8IFByb21pc2U8U3RhbmRhcmRDb252ZXJzYXRpb24+O1xuXG4gIC8vIERldGVybWluZSB3aGljaCBwcm92aWRlciBuYW1lIHRvIHNldCBpbiBTdGFuZGFyZENvbnZlcnNhdGlvblxuICBnZXRQcm92aWRlck5hbWUoKTogc3RyaW5nOyAvLyBlLmcuLCAnY2hhdGdwdCcsICdjbGF1ZGUnXG5cbiAgLy8gTmV3IG1lc3NhZ2VzIGRldGVjdGlvbiBnaXZlbiBleGlzdGluZyBtZXNzYWdlIElEcyBleHRyYWN0ZWQgZnJvbSBub3RlXG4gIGdldE5ld01lc3NhZ2VzKGNoYXQ6IFRDaGF0LCBleGlzdGluZ01lc3NhZ2VJZHM6IHN0cmluZ1tdKTogYW55W107XG5cbiAgLy8gQXR0YWNobWVudCBwcm9jZXNzaW5nIChiZXN0LWVmZm9ydCk7IHJldHVybiBtZXNzYWdlcyB3aXRoIHVwZGF0ZWQgYXR0YWNobWVudHNcbiAgcHJvY2Vzc01lc3NhZ2VBdHRhY2htZW50cz8oXG4gICAgbWVzc2FnZXM6IFN0YW5kYXJkTWVzc2FnZVtdLFxuICAgIGNvbnZlcnNhdGlvbklkOiBzdHJpbmcsXG4gICAgemlwOiBKU1ppcFxuICApOiBQcm9taXNlPFN0YW5kYXJkTWVzc2FnZVtdPjtcblxuICAvLyBSZXBvcnQgbmFtaW5nIHN0cmF0ZWd5IGZvciB0aGlzIHByb3ZpZGVyXG4gIGdldFJlcG9ydE5hbWluZ1N0cmF0ZWd5KCk6IFJlcG9ydE5hbWluZ1N0cmF0ZWd5O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb3ZpZGVyUmVnaXN0cnkge1xuICAvLyBSZXR1cm4gYWRhcHRlciBmb3IgYSBwcm92aWRlciBuYW1lXG4gIGdldEFkYXB0ZXIocHJvdmlkZXI6IHN0cmluZyk6IFByb3ZpZGVyQWRhcHRlciB8IHVuZGVmaW5lZDtcblxuICAvLyBEZXRlY3Qgd2hpY2ggYWRhcHRlciBtYXRjaGVzIHJhdyBkYXRhOyByZXR1cm4gcHJvdmlkZXIgbmFtZVxuICBkZXRlY3RQcm92aWRlcihyYXdDb252ZXJzYXRpb25zOiBhbnlbXSk6IHN0cmluZyB8ICd1bmtub3duJztcbn1cblxuZXhwb3J0IGNsYXNzIERlZmF1bHRQcm92aWRlclJlZ2lzdHJ5IGltcGxlbWVudHMgUHJvdmlkZXJSZWdpc3RyeSB7XG4gIHByaXZhdGUgYWRhcHRlcnM6IFJlY29yZDxzdHJpbmcsIFByb3ZpZGVyQWRhcHRlcj4gPSB7fTtcblxuICByZWdpc3Rlcihwcm92aWRlck5hbWU6IHN0cmluZywgYWRhcHRlcjogUHJvdmlkZXJBZGFwdGVyKSB7XG4gICAgdGhpcy5hZGFwdGVyc1twcm92aWRlck5hbWVdID0gYWRhcHRlcjtcbiAgfVxuXG4gIGdldEFkYXB0ZXIocHJvdmlkZXI6IHN0cmluZyk6IFByb3ZpZGVyQWRhcHRlciB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuYWRhcHRlcnNbcHJvdmlkZXJdO1xuICB9XG5cbiAgZGV0ZWN0UHJvdmlkZXIocmF3Q29udmVyc2F0aW9uczogYW55W10pOiBzdHJpbmcgfCAndW5rbm93bicge1xuICAgIGZvciAoY29uc3QgW25hbWUsIGFkYXB0ZXJdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYWRhcHRlcnMpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoYWRhcHRlci5kZXRlY3QocmF3Q29udmVyc2F0aW9ucykpIHJldHVybiBuYW1lO1xuICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAvLyBpZ25vcmUgYW5kIGNvbnRpbnVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cbn1cblxuIiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy9wcm92aWRlcnMvY2hhdGdwdC9jaGF0Z3B0LWRhbGxlLXByb2Nlc3Nvci50c1xuaW1wb3J0IHsgQ2hhdCwgQ2hhdE1lc3NhZ2UgfSBmcm9tIFwiLi9jaGF0Z3B0LXR5cGVzXCI7XG5pbXBvcnQgeyBTdGFuZGFyZE1lc3NhZ2UsIFN0YW5kYXJkQXR0YWNobWVudCB9IGZyb20gXCIuLi8uLi90eXBlcy9zdGFuZGFyZFwiO1xuXG4vKipcbiAqIENlbnRyYWxpemVkIHByb2Nlc3NvciBmb3IgQ2hhdEdQVCBEQUxMLUUgaW1hZ2UgZ2VuZXJhdGlvbiBoYW5kbGluZ1xuICogTWFuYWdlcyBwcm9tcHQgYXNzb2NpYXRpb24sIGltYWdlIGRldGVjdGlvbiwgYW5kIGF0dGFjaG1lbnQgY3JlYXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIENoYXRHUFREYWxsZVByb2Nlc3NvciB7XG4gICAgLyoqXG4gICAgICogRXh0cmFjdCBEQUxMLUUgcHJvbXB0cyBmcm9tIGNoYXQgbWFwcGluZyB1c2luZyByZWN1cnNpdmUgZGVzY2VuZGFudCBzZWFyY2hcbiAgICAgKiBSZXR1cm5zIGJvdGggbWF0Y2hlZCBwcm9tcHRzIChpbWFnZSBmb3VuZCkgYW5kIG9ycGhhbmVkIHByb21wdHMgKG5vIGltYWdlIGZvdW5kKVxuICAgICAqL1xuICAgIHN0YXRpYyBleHRyYWN0RGFsbGVQcm9tcHRzRnJvbU1hcHBpbmcoY2hhdDogQ2hhdCk6IHtcbiAgICAgICAgaW1hZ2VQcm9tcHRzOiBNYXA8c3RyaW5nLCB7IHByb21wdDogc3RyaW5nOyB0aW1lc3RhbXA6IG51bWJlciB9PjtcbiAgICAgICAgb3JwaGFuZWRQcm9tcHRzOiBNYXA8c3RyaW5nLCBzdHJpbmc+O1xuICAgIH0ge1xuICAgICAgICBjb25zdCBpbWFnZVByb21wdHMgPSBuZXcgTWFwPHN0cmluZywgeyBwcm9tcHQ6IHN0cmluZzsgdGltZXN0YW1wOiBudW1iZXIgfT4oKTtcbiAgICAgICAgY29uc3Qgb3JwaGFuZWRQcm9tcHRzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuICAgICAgICBsZXQgcHJvbXB0TWVzc2FnZXNGb3VuZCA9IDA7XG4gICAgICAgIGxldCBwcm9tcHRzV2l0aEltYWdlcyA9IDA7XG4gICAgICAgIGxldCBvcnBoYW5lZFByb21wdHNDb3VudCA9IDA7XG5cbiAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlT2JqIG9mIE9iamVjdC52YWx1ZXMoY2hhdC5tYXBwaW5nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IG1lc3NhZ2VPYmo/Lm1lc3NhZ2U7XG4gICAgICAgICAgICBpZiAoIW1lc3NhZ2UgfHwgbWVzc2FnZS5hdXRob3I/LnJvbGUgIT09IFwiYXNzaXN0YW50XCIpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pc0RhbGxlUHJvbXB0TWVzc2FnZShtZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgIHByb21wdE1lc3NhZ2VzRm91bmQrKztcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHQgPSB0aGlzLmV4dHJhY3RQcm9tcHRGcm9tSnNvbihtZXNzYWdlKTtcblxuXG4gICAgICAgICAgICAgICAgaWYgKHByb21wdCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZWN1cnNpdmUgc2VhcmNoIGluIGRlc2NlbmRhbnRzIHVudGlsIHdlIGZpbmQgaW1hZ2Ugb3IgaGl0IHVzZXIgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZU1lc3NhZ2VJZCA9IHRoaXMuZmluZERhbGxlSW1hZ2VJbkRlc2NlbmRhbnRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhdC5tYXBwaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZU9iai5pZCB8fCBcIlwiXG4gICAgICAgICAgICAgICAgICAgICk7XG5cblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VNZXNzYWdlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdHNXaXRoSW1hZ2VzKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSBwcm9tcHQgd2l0aCB0aW1lc3RhbXAgZnJvbSBwcm9tcHQgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VQcm9tcHRzLnNldChpbWFnZU1lc3NhZ2VJZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG1lc3NhZ2UuY3JlYXRlX3RpbWUgfHwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcnBoYW5lZFByb21wdHNDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gaW1hZ2UgZm91bmQgLSBzdG9yZSBhcyBvcnBoYW5lZCBwcm9tcHRcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ycGhhbmVkUHJvbXB0cy5zZXQobWVzc2FnZU9iai5pZCB8fCBcIlwiLCBwcm9tcHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBpbWFnZVByb21wdHMsIG9ycGhhbmVkUHJvbXB0cyB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlY3Vyc2l2ZWx5IHNlYXJjaCBmb3IgREFMTC1FIGltYWdlIGluIGRlc2NlbmRhbnRzXG4gICAgICogU3RvcHMgYXQgZmlyc3QgdXNlciBtZXNzYWdlIGVuY291bnRlcmVkIChsaW1pdCB0byBwcmV2ZW50IGdvaW5nIHRvbyBmYXIpXG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluZERhbGxlSW1hZ2VJbkRlc2NlbmRhbnRzKFxuICAgICAgICBtYXBwaW5nOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgICAgICBzdGFydElkOiBzdHJpbmdcbiAgICApOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgcXVldWUgPSBbc3RhcnRJZF07XG4gICAgICAgIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudElkID0gcXVldWUuc2hpZnQoKSE7XG5cbiAgICAgICAgICAgIGlmICh2aXNpdGVkLmhhcyhjdXJyZW50SWQpKSBjb250aW51ZTtcbiAgICAgICAgICAgIHZpc2l0ZWQuYWRkKGN1cnJlbnRJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPYmogPSBtYXBwaW5nW2N1cnJlbnRJZF07XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRPYmopIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gY3VycmVudE9iai5tZXNzYWdlO1xuXG4gICAgICAgICAgICAvLyBMSU1JVDogU3RvcCBpZiB3ZSBlbmNvdW50ZXIgYSB1c2VyIG1lc3NhZ2VcbiAgICAgICAgICAgIGlmIChtZXNzYWdlPy5hdXRob3I/LnJvbGUgPT09IFwidXNlclwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBEQUxMLUUgaW1hZ2VcbiAgICAgICAgICAgIGlmIChtZXNzYWdlPy5hdXRob3I/LnJvbGUgPT09IFwidG9vbFwiICYmIHRoaXMuaGFzUmVhbERhbGxlSW1hZ2UobWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudElkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb250aW51ZSB3aXRoIGNoaWxkcmVuXG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGN1cnJlbnRPYmouY2hpbGRyZW4gfHwgW107XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKC4uLmNoaWxkcmVuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIG1lc3NhZ2UgaXMgYSBEQUxMLUUgSlNPTiBwcm9tcHQgbWVzc2FnZVxuICAgICAqIEhhbmRsZXMgYm90aCBmb3JtYXRzOlxuICAgICAqIC0gY29udGVudF90eXBlOiBcInRleHRcIiB3aXRoIHBhcnRzWzBdIGNvbnRhaW5pbmcgSlNPTlxuICAgICAqIC0gY29udGVudF90eXBlOiBcImNvZGVcIiB3aXRoIHRleHQgY29udGFpbmluZyBKU09OXG4gICAgICovXG4gICAgc3RhdGljIGlzRGFsbGVQcm9tcHRNZXNzYWdlKG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChtZXNzYWdlLmF1dGhvcj8ucm9sZSAhPT0gXCJhc3Npc3RhbnRcIikgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIC8vIEZvcm1hdCAxOiBjb250ZW50X3R5cGUgXCJ0ZXh0XCIgd2l0aCBwYXJ0cyBhcnJheVxuICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50Py5wYXJ0cyAmJlxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShtZXNzYWdlLmNvbnRlbnQucGFydHMpICYmXG4gICAgICAgICAgICBtZXNzYWdlLmNvbnRlbnQucGFydHMubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgICB0eXBlb2YgbWVzc2FnZS5jb250ZW50LnBhcnRzWzBdID09PSBcInN0cmluZ1wiKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBtZXNzYWdlLmNvbnRlbnQucGFydHNbMF0udHJpbSgpO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3RhcnRzV2l0aCgneycpICYmIGNvbnRlbnQuaW5jbHVkZXMoJ1wicHJvbXB0XCInKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9ybWF0IDI6IGNvbnRlbnRfdHlwZSBcImNvZGVcIiB3aXRoIHRleHQgZmllbGQgKE9wZW5BSSBpbmNvbnNpc3RlbmN5KVxuICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50Py5jb250ZW50X3R5cGUgPT09IFwiY29kZVwiICYmXG4gICAgICAgICAgICBtZXNzYWdlLmNvbnRlbnQ/LnRleHQgJiZcbiAgICAgICAgICAgIHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQudGV4dCA9PT0gXCJzdHJpbmdcIikge1xuXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gbWVzc2FnZS5jb250ZW50LnRleHQudHJpbSgpO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3RhcnRzV2l0aCgneycpICYmIGNvbnRlbnQuaW5jbHVkZXMoJ1wicHJvbXB0XCInKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3QgcHJvbXB0IGZyb20gREFMTC1FIEpTT04gbWVzc2FnZVxuICAgICAqIEhhbmRsZXMgYm90aCBmb3JtYXRzOlxuICAgICAqIC0gY29udGVudF90eXBlOiBcInRleHRcIiB3aXRoIHBhcnRzWzBdIGNvbnRhaW5pbmcgSlNPTlxuICAgICAqIC0gY29udGVudF90eXBlOiBcImNvZGVcIiB3aXRoIHRleHQgY29udGFpbmluZyBKU09OXG4gICAgICovXG4gICAgc3RhdGljIGV4dHJhY3RQcm9tcHRGcm9tSnNvbihtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGpzb25TdHI6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgICAgICAgICAvLyBGb3JtYXQgMTogY29udGVudF90eXBlIFwidGV4dFwiIHdpdGggcGFydHMgYXJyYXlcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbnRlbnQ/LnBhcnRzICYmIG1lc3NhZ2UuY29udGVudC5wYXJ0c1swXSkge1xuICAgICAgICAgICAgICAgIGpzb25TdHIgPSBtZXNzYWdlLmNvbnRlbnQucGFydHNbMF0gYXMgc3RyaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRm9ybWF0IDI6IGNvbnRlbnRfdHlwZSBcImNvZGVcIiB3aXRoIHRleHQgZmllbGRcbiAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2UuY29udGVudD8uY29udGVudF90eXBlID09PSBcImNvZGVcIiAmJiBtZXNzYWdlLmNvbnRlbnQ/LnRleHQpIHtcbiAgICAgICAgICAgICAgICBqc29uU3RyID0gbWVzc2FnZS5jb250ZW50LnRleHQgYXMgc3RyaW5nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoanNvblN0cikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoanNvblN0cik7XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0cmFjdGVkUHJvbXB0ID0gcGFyc2VkLnByb21wdCB8fCBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBleHRyYWN0ZWRQcm9tcHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgbWVzc2FnZSBjb250YWlucyBSRUFMIERBTEwtRSBpbWFnZSAobm90IHVzZXIgdXBsb2FkKVxuICAgICAqL1xuICAgIHN0YXRpYyBoYXNSZWFsRGFsbGVJbWFnZShtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIW1lc3NhZ2UuY29udGVudD8ucGFydHMgfHwgIUFycmF5LmlzQXJyYXkobWVzc2FnZS5jb250ZW50LnBhcnRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbWVzc2FnZS5jb250ZW50LnBhcnRzLnNvbWUocGFydCA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcnQgIT09IFwib2JqZWN0XCIgfHwgcGFydCA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjb250ZW50UGFydCA9IHBhcnQgYXMgYW55O1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnRQYXJ0LmNvbnRlbnRfdHlwZSA9PT0gXCJpbWFnZV9hc3NldF9wb2ludGVyXCIgJiYgXG4gICAgICAgICAgICAgICAgICAgY29udGVudFBhcnQuYXNzZXRfcG9pbnRlciAmJlxuICAgICAgICAgICAgICAgICAgIGNvbnRlbnRQYXJ0Lm1ldGFkYXRhPy5kYWxsZSAmJiBcbiAgICAgICAgICAgICAgICAgICBjb250ZW50UGFydC5tZXRhZGF0YS5kYWxsZSAhPT0gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIFN0YW5kYXJkQXR0YWNobWVudCBmb3IgREFMTC1FIGltYWdlIHdpdGggcHJvdmlkZXItYWdub3N0aWMgbWV0YWRhdGFcbiAgICAgKiBUaGUgcHJvbXB0IHdpbGwgYmUgZW1iZWRkZWQgaW4gZXh0cmFjdGVkQ29udGVudCBmb3IgZGlzcGxheVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVEYWxsZUF0dGFjaG1lbnQoY29udGVudFBhcnQ6IGFueSwgYXNzb2NpYXRlZFByb21wdD86IHN0cmluZywgaGFzSW1hZ2U6IGJvb2xlYW4gPSB0cnVlKTogU3RhbmRhcmRBdHRhY2htZW50IHtcbiAgICAgICAgY29uc3QgZmlsZUlkID0gY29udGVudFBhcnQuYXNzZXRfcG9pbnRlci5pbmNsdWRlcygnOi8vJylcbiAgICAgICAgICAgID8gY29udGVudFBhcnQuYXNzZXRfcG9pbnRlci5zcGxpdCgnOi8vJylbMV1cbiAgICAgICAgICAgIDogY29udGVudFBhcnQuYXNzZXRfcG9pbnRlcjtcblxuICAgICAgICBjb25zdCBnZW5JZCA9IGNvbnRlbnRQYXJ0Lm1ldGFkYXRhLmRhbGxlLmdlbl9pZCB8fCAndW5rbm93bic7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gY29udGVudFBhcnQud2lkdGggfHwgMTAyNDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gY29udGVudFBhcnQuaGVpZ2h0IHx8IDEwMjQ7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYGRhbGxlXyR7Z2VuSWR9XyR7d2lkdGh9eCR7aGVpZ2h0fS5wbmdgO1xuXG4gICAgICAgIGNvbnN0IHByb21wdCA9IGFzc29jaWF0ZWRQcm9tcHQgfHwgY29udGVudFBhcnQubWV0YWRhdGEuZGFsbGUucHJvbXB0O1xuXG5cbiAgICAgICAgLy8gQ3JlYXRlIGV4dHJhY3RlZCBjb250ZW50IHdpdGggcHJvbXB0ICsgaW1hZ2UgY2FsbG91dHMgKHByb3ZpZGVyLWZvcm1hdHRlZClcbiAgICAgICAgbGV0IGV4dHJhY3RlZENvbnRlbnQgPSAnJztcblxuICAgICAgICBpZiAocHJvbXB0KSB7XG4gICAgICAgICAgICAvLyBGb3JtYXQgcHJvbXB0IGluIGNvZGUgYmxvY2sgd2l0aCBuZXN0ZWQgY2FsbG91dFxuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkUHJvbXB0ID0gcHJvbXB0LnNwbGl0KCdcXG4nKS5qb2luKCdcXG4+PiAnKTtcbiAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQgPSBgPj5bIW5leHVzX3Byb21wdF0gKipEQUxMLUUgUHJvbXB0Kipcbj4+IFxcYFxcYFxcYFxuPj4gJHtmb3JtYXR0ZWRQcm9tcHR9XG4+PiBcXGBcXGBcXGBcbj5cbj4+WyFuZXh1c19hdHRhY2htZW50XSAqKnt7RklMRU5BTUV9fSoqICh7e0ZJTEVUWVBFfX0pIC0ge3tGSUxFU0laRX19XG4+PiAhW1t7e1VSTH19XV1gO1xuXG4gICAgICAgICAgICBpZiAoIWhhc0ltYWdlKSB7XG4gICAgICAgICAgICAgICAgLy8gSW1hZ2Ugbm90IGZvdW5kIC0gcmVwbGFjZSBpbWFnZSBjYWxsb3V0IHdpdGggd2FybmluZ1xuICAgICAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQgPSBgPj5bIW5leHVzX3Byb21wdF0gKipEQUxMLUUgUHJvbXB0Kipcbj4+IFxcYFxcYFxcYFxuPj4gJHtmb3JtYXR0ZWRQcm9tcHR9XG4+PiBcXGBcXGBcXGBcbj5cbj4+WyFuZXh1c19hdHRhY2htZW50XSAqKkltYWdlIE5vdCBGb3VuZCoqXG4+PiBcdTI2QTBcdUZFMEYgSW1hZ2UgY291bGQgbm90IGJlIGZvdW5kLiBQZXJoYXBzIGl0IHdhcyBub3QgZ2VuZXJhdGVkIG9yIGlzIG1pc3NpbmcgZnJvbSB0aGUgYXJjaGl2ZS5gO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgICAgICBmaWxlU2l6ZTogY29udGVudFBhcnQuc2l6ZV9ieXRlcyxcbiAgICAgICAgICAgIGZpbGVUeXBlOiBcImltYWdlL3BuZ1wiLCAvLyBXaWxsIGJlIGNvcnJlY3RlZCBkeW5hbWljYWxseSBieSBleHRyYWN0b3JcbiAgICAgICAgICAgIGZpbGVJZCxcbiAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQsXG5cbiAgICAgICAgICAgIC8vIFByb3ZpZGVyLWFnbm9zdGljIG1ldGFkYXRhXG4gICAgICAgICAgICBhdHRhY2htZW50VHlwZTogJ2dlbmVyYXRlZF9pbWFnZScsXG4gICAgICAgICAgICBnZW5lcmF0aW9uUHJvbXB0OiBwcm9tcHQsXG5cbiAgICAgICAgICAgIC8vIFByb3ZpZGVyLXNwZWNpZmljIG1ldGFkYXRhXG4gICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgZGFsbGU6IHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuX2lkOiBjb250ZW50UGFydC5tZXRhZGF0YS5kYWxsZS5nZW5faWQsXG4gICAgICAgICAgICAgICAgICAgIHNlZWQ6IGNvbnRlbnRQYXJ0Lm1ldGFkYXRhLmRhbGxlLnNlZWQsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudF9nZW5faWQ6IGNvbnRlbnRQYXJ0Lm1ldGFkYXRhLmRhbGxlLnBhcmVudF9nZW5faWQsXG4gICAgICAgICAgICAgICAgICAgIGVkaXRfb3A6IGNvbnRlbnRQYXJ0Lm1ldGFkYXRhLmRhbGxlLmVkaXRfb3BcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIEFzc2lzdGFudCAoREFMTC1FKSBtZXNzYWdlIGZyb20gdG9vbCBtZXNzYWdlIHdpdGggYXNzb2NpYXRlZCBwcm9tcHRcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlRGFsbGVBc3Npc3RhbnRNZXNzYWdlKFxuICAgICAgICB0b29sTWVzc2FnZTogQ2hhdE1lc3NhZ2UsXG4gICAgICAgIGFzc29jaWF0ZWRQcm9tcHQ/OiBzdHJpbmcsXG4gICAgICAgIHByb21wdFRpbWVzdGFtcD86IG51bWJlclxuICAgICk6IFN0YW5kYXJkTWVzc2FnZSB8IG51bGwge1xuXG4gICAgICAgIGlmICghdG9vbE1lc3NhZ2UuY29udGVudD8ucGFydHMgfHwgIUFycmF5LmlzQXJyYXkodG9vbE1lc3NhZ2UuY29udGVudC5wYXJ0cykpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYXR0YWNobWVudHM6IFN0YW5kYXJkQXR0YWNobWVudFtdID0gW107XG5cbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHRvb2xNZXNzYWdlLmNvbnRlbnQucGFydHMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFydCA9PT0gXCJvYmplY3RcIiAmJiBwYXJ0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudFBhcnQgPSBwYXJ0IGFzIGFueTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudFBhcnQuY29udGVudF90eXBlID09PSBcImltYWdlX2Fzc2V0X3BvaW50ZXJcIiAmJlxuICAgICAgICAgICAgICAgICAgICBjb250ZW50UGFydC5hc3NldF9wb2ludGVyICYmXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRQYXJ0Lm1ldGFkYXRhPy5kYWxsZSAmJlxuICAgICAgICAgICAgICAgICAgICBjb250ZW50UGFydC5tZXRhZGF0YS5kYWxsZSAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhbGxlQXR0YWNobWVudCA9IHRoaXMuY3JlYXRlRGFsbGVBdHRhY2htZW50KGNvbnRlbnRQYXJ0LCBhc3NvY2lhdGVkUHJvbXB0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudHMucHVzaChkYWxsZUF0dGFjaG1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhdHRhY2htZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB0b29sTWVzc2FnZS5pZCB8fCBcIlwiLFxuICAgICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiREFMTC1FIEdlbmVyYXRlZCBJbWFnZVwiLFxuICAgICAgICAgICAgLy8gVXNlIHByb21wdCB0aW1lc3RhbXAgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIHRvb2wgbWVzc2FnZSB0aW1lc3RhbXBcbiAgICAgICAgICAgIHRpbWVzdGFtcDogcHJvbXB0VGltZXN0YW1wIHx8IHRvb2xNZXNzYWdlLmNyZWF0ZV90aW1lIHx8IDAsXG4gICAgICAgICAgICBhdHRhY2htZW50czogYXR0YWNobWVudHNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgaW5mb3JtYXRpb25hbCBtZXNzYWdlIGZvciBvcnBoYW5lZCBEQUxMLUUgcHJvbXB0IChubyBpbWFnZSBmb3VuZClcbiAgICAgKiBDcmVhdGVzIGEgXCJwaGFudG9tXCIgYXR0YWNobWVudCB3aXRoIHRoZSBwcm9tcHQgYW5kIHdhcm5pbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlT3JwaGFuZWRQcm9tcHRNZXNzYWdlKHByb21wdE1lc3NhZ2U6IENoYXRNZXNzYWdlLCBwcm9tcHQ6IHN0cmluZyk6IFN0YW5kYXJkTWVzc2FnZSB7XG4gICAgICAgIC8vIEZvcm1hdCBwcm9tcHQgd2l0aCBuZXN0ZWQgY2FsbG91dHMgKHByb3ZpZGVyLWZvcm1hdHRlZClcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkUHJvbXB0ID0gcHJvbXB0LnNwbGl0KCdcXG4nKS5qb2luKCdcXG4+PiAnKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBwaGFudG9tIGF0dGFjaG1lbnQgd2l0aCBwcm9tcHQgYW5kIHdhcm5pbmdcbiAgICAgICAgY29uc3QgcGhhbnRvbUF0dGFjaG1lbnQ6IFN0YW5kYXJkQXR0YWNobWVudCA9IHtcbiAgICAgICAgICAgIGZpbGVOYW1lOiAnZGFsbGVfaW1hZ2Vfbm90X2ZvdW5kLnBuZycsXG4gICAgICAgICAgICBmaWxlVHlwZTogJ2ltYWdlL3BuZycsXG4gICAgICAgICAgICBhdHRhY2htZW50VHlwZTogJ2dlbmVyYXRlZF9pbWFnZScsXG4gICAgICAgICAgICBnZW5lcmF0aW9uUHJvbXB0OiBwcm9tcHQsXG4gICAgICAgICAgICBleHRyYWN0ZWRDb250ZW50OiBgPj5bIW5leHVzX3Byb21wdF0gKipEQUxMLUUgUHJvbXB0KiogKEltYWdlIEdlbmVyYXRpb24gRmFpbGVkIG9yIEludGVycnVwdGVkKVxuPj4gXFxgXFxgXFxgXG4+PiAke2Zvcm1hdHRlZFByb21wdH1cbj4+IFxcYFxcYFxcYFxuPlxuPj5bIW5leHVzX2F0dGFjaG1lbnRdICoqSW1hZ2UgTm90IEZvdW5kKipcbj4+IFx1MjZBMFx1RkUwRiBJbWFnZSBnZW5lcmF0aW9uIG1heSBoYXZlIGZhaWxlZCBvciBiZWVuIGludGVycnVwdGVkLiBUaGUgcHJvbXB0IHdhcyBzYXZlZCBidXQgbm8gaW1hZ2Ugd2FzIGZvdW5kIGluIHRoZSBleHBvcnQuYCxcbiAgICAgICAgICAgIHN0YXR1czoge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmb3VuZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVhc29uOiAnbWlzc2luZ19mcm9tX2V4cG9ydCcsXG4gICAgICAgICAgICAgICAgbm90ZTogJ0RBTEwtRSBnZW5lcmF0aW9uIHdhcyByZXF1ZXN0ZWQgYnV0IHRoZSBpbWFnZSB3YXMgbm90IGZvdW5kIGluIHRoZSBhcmNoaXZlJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogcHJvbXB0TWVzc2FnZS5pZCB8fCBcIlwiLFxuICAgICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiREFMTC1FIEltYWdlIEdlbmVyYXRpb24gKEZhaWxlZC9JbnRlcnJ1cHRlZClcIixcbiAgICAgICAgICAgIHRpbWVzdGFtcDogcHJvbXB0TWVzc2FnZS5jcmVhdGVfdGltZSB8fCAwLFxuICAgICAgICAgICAgYXR0YWNobWVudHM6IFtwaGFudG9tQXR0YWNobWVudF1cbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3Byb3ZpZGVycy9jaGF0Z3B0L2NoYXRncHQtbWVzc2FnZS1maWx0ZXIudHNcbmltcG9ydCB7IENoYXRNZXNzYWdlIH0gZnJvbSBcIi4vY2hhdGdwdC10eXBlc1wiO1xuaW1wb3J0IHsgQ2hhdEdQVERhbGxlUHJvY2Vzc29yIH0gZnJvbSBcIi4vY2hhdGdwdC1kYWxsZS1wcm9jZXNzb3JcIjtcbmltcG9ydCB7IGlzVmFsaWRNZXNzYWdlIH0gZnJvbSBcIi4uLy4uL3V0aWxzXCI7XG5cbi8qKlxuICogQ2VudHJhbGl6ZWQgbWVzc2FnZSBmaWx0ZXJpbmcgbG9naWMgZm9yIENoYXRHUFQgY29udmVyc2F0aW9uc1xuICogRGV0ZXJtaW5lcyB3aGljaCBtZXNzYWdlcyBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIGZpbmFsIG91dHB1dFxuICovXG5leHBvcnQgY2xhc3MgQ2hhdEdQVE1lc3NhZ2VGaWx0ZXIge1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSBpZiBhIG1lc3NhZ2Ugc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBjb252ZXJzYXRpb25cbiAgICAgKi9cbiAgICBzdGF0aWMgc2hvdWxkSW5jbHVkZU1lc3NhZ2UobWVzc2FnZTogQ2hhdE1lc3NhZ2UpOiBib29sZWFuIHtcbiAgICAgICAgLy8gU2FmZXR5IGNoZWNrXG4gICAgICAgIGlmICghbWVzc2FnZSB8fCAhbWVzc2FnZS5hdXRob3IpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gPT09PT0gU1RSSUNUIEVYQ0xVU0lPTlMgPT09PT1cbiAgICAgICAgXG4gICAgICAgIC8vIFNraXAgQUxMIHN5c3RlbSBtZXNzYWdlc1xuICAgICAgICBpZiAobWVzc2FnZS5hdXRob3Iucm9sZSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTa2lwIEFMTCB0b29sIG1lc3NhZ2VzXG4gICAgICAgIGlmIChtZXNzYWdlLmF1dGhvci5yb2xlID09PSBcInRvb2xcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTa2lwIGhpZGRlbiBtZXNzYWdlc1xuICAgICAgICBpZiAobWVzc2FnZS5tZXRhZGF0YT8uaXNfdmlzdWFsbHlfaGlkZGVuX2Zyb21fY29udmVyc2F0aW9uID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNraXAgdXNlciBzeXN0ZW0gbWVzc2FnZXNcbiAgICAgICAgaWYgKG1lc3NhZ2UubWV0YWRhdGE/LmlzX3VzZXJfc3lzdGVtX21lc3NhZ2UgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2tpcCB1c2VyX2VkaXRhYmxlX2NvbnRleHQgY29udGVudCB0eXBlXG4gICAgICAgIGlmIChtZXNzYWdlLmNvbnRlbnQ/LmNvbnRlbnRfdHlwZSA9PT0gXCJ1c2VyX2VkaXRhYmxlX2NvbnRleHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyA9PT09PSBBU1NJU1RBTlQgTUVTU0FHRSBGSUxURVJJTkcgPT09PT1cbiAgICAgICAgXG4gICAgICAgIGlmIChtZXNzYWdlLmF1dGhvci5yb2xlID09PSBcImFzc2lzdGFudFwiKSB7XG4gICAgICAgICAgICAvLyBTa2lwIGVtcHR5IGFzc2lzdGFudCBtZXNzYWdlc1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29udGVudD8ucGFydHMgJiYgXG4gICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShtZXNzYWdlLmNvbnRlbnQucGFydHMpICYmXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jb250ZW50LnBhcnRzLmV2ZXJ5KChwYXJ0OiBhbnkpID0+IFxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcGFydCA9PT0gXCJzdHJpbmdcIiAmJiBwYXJ0LnRyaW0oKSA9PT0gXCJcIlxuICAgICAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNraXAgREFMTC1FIEpTT04gcHJvbXB0IG1lc3NhZ2VzIChoYW5kbGVkIHNlcGFyYXRlbHkpXG4gICAgICAgICAgICBpZiAoQ2hhdEdQVERhbGxlUHJvY2Vzc29yLmlzRGFsbGVQcm9tcHRNZXNzYWdlKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTa2lwIHZhcmlvdXMgdGVjaG5pY2FsIGNvbnRlbnQgdHlwZXNcbiAgICAgICAgICAgIGNvbnN0IGV4Y2x1ZGVkQ29udGVudFR5cGVzID0gW1wiY29kZVwiLCBcInN5c3RlbV9lcnJvclwiLCBcImV4ZWN1dGlvbl9vdXRwdXRcIl07XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50Py5jb250ZW50X3R5cGUgJiYgZXhjbHVkZWRDb250ZW50VHlwZXMuaW5jbHVkZXMobWVzc2FnZS5jb250ZW50LmNvbnRlbnRfdHlwZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZvciBtdWx0aW1vZGFsX3RleHQsIGNoZWNrIGlmIGl0IGhhcyBhY3R1YWwgdGV4dCBjb250ZW50XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50Py5jb250ZW50X3R5cGUgPT09IFwibXVsdGltb2RhbF90ZXh0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50Py5wYXJ0cyAmJiBBcnJheS5pc0FycmF5KG1lc3NhZ2UuY29udGVudC5wYXJ0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzVGV4dENvbnRlbnQgPSBtZXNzYWdlLmNvbnRlbnQucGFydHMuc29tZSgocGFydDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhcnQgPT09IFwic3RyaW5nXCIgJiYgcGFydC50cmltKCkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGFydCA9PT0gXCJvYmplY3RcIiAmJiBwYXJ0ICE9PSBudWxsICYmICd0ZXh0JyBpbiBwYXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBwYXJ0LnRleHQgPT09IFwic3RyaW5nXCIgJiYgcGFydC50ZXh0LnRyaW0oKSAhPT0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc1RleHRDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vID09PT09IFVTRVIgTUVTU0FHRSBGSUxURVJJTkcgPT09PT1cbiAgICAgICAgXG4gICAgICAgIGlmIChtZXNzYWdlLmF1dGhvci5yb2xlID09PSBcInVzZXJcIikge1xuICAgICAgICAgICAgY29uc3QgZXhjbHVkZWRDb250ZW50VHlwZXMgPSBbXCJ1c2VyX2VkaXRhYmxlX2NvbnRleHRcIl07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbnRlbnQ/LmNvbnRlbnRfdHlwZSAmJiBleGNsdWRlZENvbnRlbnRUeXBlcy5pbmNsdWRlcyhtZXNzYWdlLmNvbnRlbnQuY29udGVudF90eXBlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRmluYWwgdmFsaWRhdGlvbiB1c2luZyBleGlzdGluZyBmdW5jdGlvblxuICAgICAgICByZXR1cm4gaXNWYWxpZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxufVxuIiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy9wcm92aWRlcnMvY2hhdGdwdC9jaGF0Z3B0LWNvbnZlcnRlci50c1xuaW1wb3J0IHsgQ2hhdCwgQ2hhdE1lc3NhZ2UgfSBmcm9tIFwiLi9jaGF0Z3B0LXR5cGVzXCI7XG5pbXBvcnQgeyBTdGFuZGFyZENvbnZlcnNhdGlvbiwgU3RhbmRhcmRNZXNzYWdlLCBTdGFuZGFyZEF0dGFjaG1lbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXMvc3RhbmRhcmRcIjtcbmltcG9ydCB7IENoYXRHUFREYWxsZVByb2Nlc3NvciB9IGZyb20gXCIuL2NoYXRncHQtZGFsbGUtcHJvY2Vzc29yXCI7XG5pbXBvcnQgeyBDaGF0R1BUTWVzc2FnZUZpbHRlciB9IGZyb20gXCIuL2NoYXRncHQtbWVzc2FnZS1maWx0ZXJcIjtcblxuZXhwb3J0IGNsYXNzIENoYXRHUFRDb252ZXJ0ZXIge1xuICAgIC8qKlxuICAgICAqIENvbnZlcnQgQ2hhdEdQVCBDaGF0IHRvIFN0YW5kYXJkQ29udmVyc2F0aW9uXG4gICAgICovXG4gICAgc3RhdGljIGNvbnZlcnRDaGF0KGNoYXQ6IENoYXQpOiBTdGFuZGFyZENvbnZlcnNhdGlvbiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gdGhpcy5leHRyYWN0TWVzc2FnZXNGcm9tTWFwcGluZyhjaGF0KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogY2hhdC5pZCB8fCBcIlwiLFxuICAgICAgICAgICAgdGl0bGU6IGNoYXQudGl0bGUgfHwgXCJVbnRpdGxlZFwiLFxuICAgICAgICAgICAgcHJvdmlkZXI6IFwiY2hhdGdwdFwiLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogY2hhdC5jcmVhdGVfdGltZSB8fCAwLFxuICAgICAgICAgICAgdXBkYXRlVGltZTogY2hhdC51cGRhdGVfdGltZSB8fCAwLFxuICAgICAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25fdGVtcGxhdGVfaWQ6IGNoYXQuY29udmVyc2F0aW9uX3RlbXBsYXRlX2lkLFxuICAgICAgICAgICAgICAgIGdpem1vX2lkOiBjaGF0Lmdpem1vX2lkLFxuICAgICAgICAgICAgICAgIGdpem1vX3R5cGU6IGNoYXQuZ2l6bW9fdHlwZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0X21vZGVsX3NsdWc6IGNoYXQuZGVmYXVsdF9tb2RlbF9zbHVnLFxuICAgICAgICAgICAgICAgIGlzX2FyY2hpdmVkOiBjaGF0LmlzX2FyY2hpdmVkLFxuICAgICAgICAgICAgICAgIGlzX3N0YXJyZWQ6IGNoYXQuaXNfc3RhcnJlZCxcbiAgICAgICAgICAgICAgICBjdXJyZW50X25vZGU6IGNoYXQuY3VycmVudF9ub2RlLFxuICAgICAgICAgICAgICAgIG1lbW9yeV9zY29wZTogY2hhdC5tZW1vcnlfc2NvcGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogQ29udmVydCBzaW5nbGUgQ2hhdEdQVCBDaGF0TWVzc2FnZSB0byBTdGFuZGFyZE1lc3NhZ2VcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBjb252ZXJ0TWVzc2FnZShjaGF0TWVzc2FnZTogQ2hhdE1lc3NhZ2UsIGNvbnZlcnNhdGlvbklkPzogc3RyaW5nKTogU3RhbmRhcmRNZXNzYWdlIHtcbiAgICAgICAgY29uc3QgY29udGVudFJlc3VsdCA9IHRoaXMuZXh0cmFjdENvbnRlbnQoY2hhdE1lc3NhZ2UsIGNvbnZlcnNhdGlvbklkKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IGNoYXRNZXNzYWdlLmlkIHx8IFwiXCIsXG4gICAgICAgICAgICByb2xlOiBjaGF0TWVzc2FnZS5hdXRob3I/LnJvbGUgPT09IFwidXNlclwiID8gXCJ1c2VyXCIgOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgICAgY29udGVudDogY29udGVudFJlc3VsdC5jb250ZW50LFxuICAgICAgICAgICAgdGltZXN0YW1wOiBjaGF0TWVzc2FnZS5jcmVhdGVfdGltZSB8fCAwLFxuICAgICAgICAgICAgYXR0YWNobWVudHM6IGNvbnRlbnRSZXN1bHQuYXR0YWNobWVudHMgfHwgW11cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0IG1lc3NhZ2VzIGZyb20gQ2hhdEdQVCBtYXBwaW5nIHN0cnVjdHVyZSB3aXRoIERBTEwtRSBwcm9tcHQgYXNzb2NpYXRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBleHRyYWN0TWVzc2FnZXNGcm9tTWFwcGluZyhjaGF0OiBDaGF0KTogU3RhbmRhcmRNZXNzYWdlW10ge1xuICAgICAgICBjb25zdCBtZXNzYWdlczogU3RhbmRhcmRNZXNzYWdlW10gPSBbXTtcbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9uSWQgPSBjaGF0LmlkOyAvLyBQYXNzIGNvbnZlcnNhdGlvbiBJRCBmb3Igc21hcnQgbGlua2luZ1xuXG4gICAgICAgIC8vIEV4dHJhY3QgREFMTC1FIHByb21wdHMgdXNpbmcgY2VudHJhbGl6ZWQgcHJvY2Vzc29yICh3aXRoIG9ycGhhbmVkIHByb21wdHMgc3VwcG9ydClcbiAgICAgICAgY29uc3QgeyBpbWFnZVByb21wdHMsIG9ycGhhbmVkUHJvbXB0cyB9ID0gQ2hhdEdQVERhbGxlUHJvY2Vzc29yLmV4dHJhY3REYWxsZVByb21wdHNGcm9tTWFwcGluZyhjaGF0KTtcblxuICAgICAgICAvLyBQcm9jZXNzIGFsbCBtZXNzYWdlc1xuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2VPYmogb2YgT2JqZWN0LnZhbHVlcyhjaGF0Lm1hcHBpbmcpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gbWVzc2FnZU9iaj8ubWVzc2FnZTtcbiAgICAgICAgICAgIGlmICghbWVzc2FnZSkgY29udGludWU7XG5cbiAgICAgICAgICAgIC8vIEhhbmRsZSBEQUxMLUUgdG9vbCBtZXNzYWdlcyB3aXRoIGltYWdlcyB1c2luZyBwcm9jZXNzb3JcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmF1dGhvcj8ucm9sZSA9PT0gXCJ0b29sXCIgJiYgQ2hhdEdQVERhbGxlUHJvY2Vzc29yLmhhc1JlYWxEYWxsZUltYWdlKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbXB0RGF0YSA9IGltYWdlUHJvbXB0cy5nZXQobWVzc2FnZU9iai5pZCB8fCBcIlwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYWxsZU1lc3NhZ2UgPSBDaGF0R1BURGFsbGVQcm9jZXNzb3IuY3JlYXRlRGFsbGVBc3Npc3RhbnRNZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBwcm9tcHREYXRhPy5wcm9tcHQsXG4gICAgICAgICAgICAgICAgICAgIHByb21wdERhdGE/LnRpbWVzdGFtcFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGRhbGxlTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlcy5wdXNoKGRhbGxlTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSGFuZGxlIG9ycGhhbmVkIERBTEwtRSBwcm9tcHRzIChubyBpbWFnZSBmb3VuZClcbiAgICAgICAgICAgIGVsc2UgaWYgKG9ycGhhbmVkUHJvbXB0cy5oYXMobWVzc2FnZU9iai5pZCB8fCBcIlwiKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IG9ycGhhbmVkUHJvbXB0cy5nZXQobWVzc2FnZU9iai5pZCB8fCBcIlwiKTtcbiAgICAgICAgICAgICAgICBpZiAocHJvbXB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9ycGhhbmVkTWVzc2FnZSA9IENoYXRHUFREYWxsZVByb2Nlc3Nvci5jcmVhdGVPcnBoYW5lZFByb21wdE1lc3NhZ2UobWVzc2FnZSwgcHJvbXB0KTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChvcnBoYW5lZE1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEhhbmRsZSByZWd1bGFyIG1lc3NhZ2VzIChidXQgc2tpcCBEQUxMLUUgSlNPTiBwcm9tcHRzKVxuICAgICAgICAgICAgZWxzZSBpZiAoQ2hhdEdQVE1lc3NhZ2VGaWx0ZXIuc2hvdWxkSW5jbHVkZU1lc3NhZ2UobWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHRoaXMuY29udmVydE1lc3NhZ2UobWVzc2FnZSwgY29udmVyc2F0aW9uSWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNvcnQgYnkgdGltZXN0YW1wIHdpdGggSUQgYXMgc2Vjb25kYXJ5IHNvcnQgZm9yIGNocm9ub2xvZ2ljYWwgb3JkZXJcbiAgICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA8PSAxKSByZXR1cm4gbWVzc2FnZXM7XG5cbiAgICAgICAgLy8gVXNlIG5hdGl2ZSBzb3J0IHdpdGggcHJvcGVyIGNvbXBhcmlzb24gZnVuY3Rpb25cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIC8vIFByaW1hcnkgc29ydDogdGltZXN0YW1wXG4gICAgICAgICAgICBpZiAoYS50aW1lc3RhbXAgIT09IGIudGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEudGltZXN0YW1wIC0gYi50aW1lc3RhbXA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNlY29uZGFyeSBzb3J0OiBJRCAobGV4aWNvZ3JhcGhpYyBvcmRlciBmb3Igc2FtZSB0aW1lc3RhbXApXG4gICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgY29uc2lzdGVudCBvcmRlcmluZyB3aGVuIG1lc3NhZ2VzIGhhdmUgaWRlbnRpY2FsIHRpbWVzdGFtcHNcbiAgICAgICAgICAgIHJldHVybiBhLmlkLmxvY2FsZUNvbXBhcmUoYi5pZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cblxuXG5cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3QgY29udGVudCBhbmQgYXR0YWNobWVudHMgZnJvbSBDaGF0R1BUIG1lc3NhZ2UgcGFydHNcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBleHRyYWN0Q29udGVudChjaGF0TWVzc2FnZTogQ2hhdE1lc3NhZ2UsIGNvbnZlcnNhdGlvbklkPzogc3RyaW5nKToge2NvbnRlbnQ6IHN0cmluZywgYXR0YWNobWVudHM/OiBTdGFuZGFyZEF0dGFjaG1lbnRbXX0ge1xuICAgICAgICBpZiAoIWNoYXRNZXNzYWdlLmNvbnRlbnQ/LnBhcnRzIHx8ICFBcnJheS5pc0FycmF5KGNoYXRNZXNzYWdlLmNvbnRlbnQucGFydHMpKSB7XG4gICAgICAgICAgICByZXR1cm4geyBjb250ZW50OiBcIlwiIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb250ZW50UGFydHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGNvbnN0IGF0dGFjaG1lbnRzOiBTdGFuZGFyZEF0dGFjaG1lbnRbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIGNoYXRNZXNzYWdlLmNvbnRlbnQucGFydHMpIHtcbiAgICAgICAgICAgIGxldCB0ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFydCA9PT0gXCJzdHJpbmdcIiAmJiBwYXJ0LnRyaW0oKSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIC8vIEZJWEVEOiBDaGVjayBpZiBzdHJpbmcgY29udGFpbnMgSlNPTiB3aXRoIHR5cGUvY29udGVudCBzdHJ1Y3R1cmVcbiAgICAgICAgICAgICAgICBpZiAocGFydC50cmltKCkuc3RhcnRzV2l0aCgneycpICYmIHBhcnQudHJpbSgpLmVuZHNXaXRoKCd9JykpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocGFydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgJiYgcGFyc2VkLmNvbnRlbnQgJiYgdHlwZW9mIHBhcnNlZC5jb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZGVUeXBlID0gcGFyc2VkLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29kZUNvbnRlbnQgPSBwYXJzZWQuY29udGVudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2RlQ29udGVudC50cmltKCkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBsYW5ndWFnZSBmcm9tIHR5cGUgKGUuZy4sIFwiY29kZS9tYXJrZG93blwiIC0+IFwibWFya2Rvd25cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSBjb2RlVHlwZS5pbmNsdWRlcygnLycpID8gY29kZVR5cGUuc3BsaXQoJy8nKVsxXSA6IGNvZGVUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29udGVudCA9IGBcXGBcXGBcXGAke2xhbmd1YWdlfVxcbiR7Y29kZUNvbnRlbnR9XFxuXFxgXFxgXFxgYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEpTT04gd2l0aG91dCB0eXBlL2NvbnRlbnQsIHRyZWF0IGFzIG5vcm1hbCB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbnRlbnQgPSBwYXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgdmFsaWQgSlNPTiwgdHJlYXQgYXMgbm9ybWFsIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50ID0gcGFydDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vcm1hbCBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgdGV4dENvbnRlbnQgPSBwYXJ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHBhcnQgPT09IFwib2JqZWN0XCIgJiYgcGFydCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBjb2RlIGJsb2NrcyB3aXRoIHR5cGUgYW5kIGNvbnRlbnQgc3RydWN0dXJlIChDaGF0R1BUIGFydGlmYWN0cylcbiAgICAgICAgICAgICAgICBpZiAoJ3R5cGUnIGluIHBhcnQgJiYgJ2NvbnRlbnQnIGluIHBhcnQgJiYgdHlwZW9mIHBhcnQuY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29kZVR5cGUgPSBwYXJ0LnR5cGUgYXMgc3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2RlQ29udGVudCA9IHBhcnQuY29udGVudCBhcyBzdHJpbmc7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGVDb250ZW50LnRyaW0oKSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBsYW5ndWFnZSBmcm9tIHR5cGUgKGUuZy4sIFwiY29kZS9tYXJrZG93blwiIC0+IFwibWFya2Rvd25cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhbmd1YWdlID0gY29kZVR5cGUuaW5jbHVkZXMoJy8nKSA/IGNvZGVUeXBlLnNwbGl0KCcvJylbMV0gOiBjb2RlVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50ID0gYFxcYFxcYFxcYCR7bGFuZ3VhZ2V9XFxuJHtjb2RlQ29udGVudH1cXG5cXGBcXGBcXGBgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgY29udGVudCB0eXBlcyB3aXRoIHByb3BlciB0eXBlIGNoZWNraW5nXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2NvbnRlbnRfdHlwZScgaW4gcGFydCAmJiAndGV4dCcgaW4gcGFydCAmJiB0eXBlb2YgcGFydC50ZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFydC5jb250ZW50X3R5cGUgPT09IFwiYXVkaW9fdHJhbnNjcmlwdGlvblwiICYmIHBhcnQudGV4dC50cmltKCkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50ID0gcGFydC50ZXh0O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQuY29udGVudF90eXBlID09PSBcInRleHRcIiAmJiBwYXJ0LnRleHQudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29udGVudCA9IHBhcnQudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0LmNvbnRlbnRfdHlwZSA9PT0gXCJtdWx0aW1vZGFsX3RleHRcIiAmJiBwYXJ0LnRleHQudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29udGVudCA9IHBhcnQudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgaW1hZ2VfYXNzZXRfcG9pbnRlciBjb250ZW50IHR5cGVzIGFzIGF0dGFjaG1lbnRzXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2NvbnRlbnRfdHlwZScgaW4gcGFydCAmJiBwYXJ0LmNvbnRlbnRfdHlwZSA9PT0gJ2ltYWdlX2Fzc2V0X3BvaW50ZXInICYmICdhc3NldF9wb2ludGVyJyBpbiBwYXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dGFjaG1lbnQgPSB0aGlzLmV4dHJhY3RJbWFnZUF0dGFjaG1lbnQocGFydCwgY29udmVyc2F0aW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0YWNobWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudHMucHVzaChhdHRhY2htZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgQ2hhdEdQVCBjb250cm9sIGNoYXJhY3RlcnMgYW5kIGZvcm1hdHRpbmcgYXJ0aWZhY3RzXG4gICAgICAgICAgICBpZiAodGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB0ZXh0Q29udGVudCA9IHRoaXMuY2xlYW5DaGF0R1BUQXJ0aWZhY3RzKHRleHRDb250ZW50LCBjb252ZXJzYXRpb25JZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRleHRDb250ZW50LnRyaW0oKSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50UGFydHMucHVzaCh0ZXh0Q29udGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmluYWxDb250ZW50ID0gY29udGVudFBhcnRzLmpvaW4oXCJcXG5cIik7XG5cbiAgICAgICAgLy8gRXh0cmFjdCBhdHRhY2htZW50cyBmcm9tIG1lc3NhZ2UgbWV0YWRhdGEgaWYgYXZhaWxhYmxlXG4gICAgICAgIGlmIChjaGF0TWVzc2FnZS5hdHRhY2htZW50cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBhdHQgb2YgY2hhdE1lc3NhZ2UuYXR0YWNobWVudHMpIHtcbiAgICAgICAgICAgICAgICBhdHRhY2htZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWU6IGF0dC5maWxlX25hbWUsXG4gICAgICAgICAgICAgICAgICAgIGZpbGVUeXBlOiBhdHQuZmlsZV90eXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLFxuICAgICAgICAgICAgICAgICAgICBmaWxlU2l6ZTogYXR0LmZpbGVfc2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudDogYXR0LmV4dHJhY3RlZF9jb250ZW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGVudDogZmluYWxDb250ZW50LFxuICAgICAgICAgICAgYXR0YWNobWVudHM6IGF0dGFjaG1lbnRzLmxlbmd0aCA+IDAgPyBhdHRhY2htZW50cyA6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3QgaW1hZ2UgYXR0YWNobWVudCBmcm9tIGNvbnRlbnQgcGFydFxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGV4dHJhY3RJbWFnZUF0dGFjaG1lbnQocGFydDogYW55LCBjb252ZXJzYXRpb25JZD86IHN0cmluZyk6IFN0YW5kYXJkQXR0YWNobWVudCB8IG51bGwge1xuICAgICAgICBpZiAoIXBhcnQuYXNzZXRfcG9pbnRlcikgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgLy8gRXh0cmFjdCBmaWxlIElEIGZyb20gYXNzZXQgcG9pbnRlclxuICAgICAgICBsZXQgZmlsZUlkID0gcGFydC5hc3NldF9wb2ludGVyO1xuICAgICAgICBpZiAoZmlsZUlkLmluY2x1ZGVzKCc6Ly8nKSkge1xuICAgICAgICAgICAgZmlsZUlkID0gZmlsZUlkLnNwbGl0KCc6Ly8nKVsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdlbmVyYXRlIGZpbGVuYW1lIGJhc2VkIG9uIG1ldGFkYXRhXG4gICAgICAgIGxldCBmaWxlTmFtZSA9IGBpbWFnZV8ke2ZpbGVJZH1gO1xuICAgICAgICBpZiAocGFydC53aWR0aCAmJiBwYXJ0LmhlaWdodCkge1xuICAgICAgICAgICAgZmlsZU5hbWUgPSBgaW1hZ2VfJHtmaWxlSWR9XyR7cGFydC53aWR0aH14JHtwYXJ0LmhlaWdodH1gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIGZpbGUgZXh0ZW5zaW9uIGZyb20gbWV0YWRhdGEgb3IgZGVmYXVsdCB0byBwbmdcbiAgICAgICAgY29uc3QgZmlsZVR5cGUgPSBwYXJ0Lm1ldGFkYXRhPy5taW1lX3R5cGUgfHwgJ2ltYWdlL3BuZyc7XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGVUeXBlLnNwbGl0KCcvJylbMV0gfHwgJ3BuZyc7XG4gICAgICAgIGZpbGVOYW1lICs9IGAuJHtleHRlbnNpb259YDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgICAgICBmaWxlVHlwZSxcbiAgICAgICAgICAgIGZpbGVTaXplOiBwYXJ0LnNpemVfYnl0ZXMsXG4gICAgICAgICAgICBmaWxlSWRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBQcmUtY29tcGlsZWQgcmVnZXggcGF0dGVybnMgZm9yIHBlcmZvcm1hbmNlXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQ0xFQU5VUF9QQVRURVJOUyA9IFtcbiAgICAgICAgLy8gU01BUlQ6IFJlcGxhY2Ugc2FuZGJveCBsaW5rcyB3aXRoIGFjdHVhbCBsaW5rcyB0byBvcmlnaW5hbCBjb252ZXJzYXRpb25cbiAgICAgICAgeyBwYXR0ZXJuOiAvXHVEODNEXHVEQ0M0IFxcWyhbXlxcXV0rKVxcXVxcKHNhbmRib3g6XFwvW14pXStcXCkvZywgcmVwbGFjZW1lbnQ6IChjaGF0VXJsOiBzdHJpbmcpID0+IGBcdUQ4M0RcdURDQzQgWyQxXSgke2NoYXRVcmx9KSAqKHZpc2l0IG9yaWdpbmFsIGNvbnZlcnNhdGlvbiB0byBkb3dubG9hZCkqYCB9LFxuICAgICAgICB7IHBhdHRlcm46IC9cdUQ4M0RcdURDQzQgKFteLVxcbl0rKSAtIEZpbGUgbm90IGF2YWlsYWJsZSBpbiBhcmNoaXZlL2csIHJlcGxhY2VtZW50OiAoY2hhdFVybDogc3RyaW5nKSA9PiBgXHVEODNEXHVEQ0M0IFskMV0oJHtjaGF0VXJsfSkgKih2aXNpdCBvcmlnaW5hbCBjb252ZXJzYXRpb24gdG8gZG93bmxvYWQpKmAgfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAvXFxbKFteXFxdXSspXFxdXFwoc2FuZGJveDpcXC9bXildK1xcKS9nLCByZXBsYWNlbWVudDogKGNoYXRVcmw6IHN0cmluZykgPT4gYFskMV0oJHtjaGF0VXJsfSkgKih2aXNpdCBvcmlnaW5hbCBjb252ZXJzYXRpb24gdG8gZG93bmxvYWQpKmAgfSxcbiAgICAgICAgeyBwYXR0ZXJuOiAvKFteLVxcbl0rKSAtIEZpbGUgbm90IGF2YWlsYWJsZSBpbiBhcmNoaXZlXFwuIFZpc2l0IHRoZSBvcmlnaW5hbCBjb252ZXJzYXRpb24gdG8gYWNjZXNzIGl0L2csIHJlcGxhY2VtZW50OiAoY2hhdFVybDogc3RyaW5nKSA9PiBgWyQxXSgke2NoYXRVcmx9KSAqKHZpc2l0IG9yaWdpbmFsIGNvbnZlcnNhdGlvbiB0byBkb3dubG9hZCkqYCB9LFxuICAgICAgICAvLyBSZW1vdmUgcGF0dGVybnMgKHN0YXRpYyByZXBsYWNlbWVudHMpXG4gICAgICAgIHsgcGF0dGVybjogL2NpdGVbYS16QS1aMC05X1xcLV0rL2csIHJlcGxhY2VtZW50OiAoKSA9PiBcIlwiIH0sXG4gICAgICAgIHsgcGF0dGVybjogL2xpbmtbYS16QS1aMC05X1xcLV0rL2csIHJlcGxhY2VtZW50OiAoKSA9PiBcIlwiIH0sXG4gICAgICAgIHsgcGF0dGVybjogL3R1cm5cXGQrc2VhcmNoXFxkKy9nLCByZXBsYWNlbWVudDogKCkgPT4gXCJcIiB9LFxuICAgICAgICB7IHBhdHRlcm46IC9bXFx1RTAwMC1cXHVGOEZGXS9nLCByZXBsYWNlbWVudDogKCkgPT4gXCJcIiB9LCAvLyBVbmljb2RlIGNvbnRyb2wgY2hhcmFjdGVyc1xuICAgICAgICB7IHBhdHRlcm46IC8gezIsfS9nLCByZXBsYWNlbWVudDogKCkgPT4gXCIgXCIgfSwgLy8gTXVsdGlwbGUgc3BhY2VzXG4gICAgICAgIHsgcGF0dGVybjogL1xcbnszLH0vZywgcmVwbGFjZW1lbnQ6ICgpID0+IFwiXFxuXFxuXCIgfSAvLyBNdWx0aXBsZSBuZXdsaW5lc1xuICAgIF07XG5cbiAgICAvKipcbiAgICAgKiBDbGVhbiBDaGF0R1BUIGFydGlmYWN0cywgY2l0YXRpb25zLCBhbmQgY29udHJvbCBjaGFyYWN0ZXJzIC0gU01BUlQgTElOS0lOR1xuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGNsZWFuQ2hhdEdQVEFydGlmYWN0cyh0ZXh0OiBzdHJpbmcsIGNvbnZlcnNhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKCF0ZXh0IHx8IHR5cGVvZiB0ZXh0ICE9PSAnc3RyaW5nJykgcmV0dXJuICcnO1xuXG4gICAgICAgIGNvbnN0IGNoYXRVcmwgPSBjb252ZXJzYXRpb25JZCA/IGBodHRwczovL2NoYXRncHQuY29tL2MvJHtjb252ZXJzYXRpb25JZH1gIDogXCJodHRwczovL2NoYXRncHQuY29tXCI7XG5cbiAgICAgICAgbGV0IGNsZWFuVGV4dCA9IHRleHQ7XG5cbiAgICAgICAgLy8gQXBwbHkgYWxsIGNsZWFudXAgcGF0dGVybnMgZWZmaWNpZW50bHlcbiAgICAgICAgZm9yIChjb25zdCB7IHBhdHRlcm4sIHJlcGxhY2VtZW50IH0gb2YgdGhpcy5DTEVBTlVQX1BBVFRFUk5TKSB7XG4gICAgICAgICAgICBjbGVhblRleHQgPSBjbGVhblRleHQucmVwbGFjZShwYXR0ZXJuLCByZXBsYWNlbWVudChjaGF0VXJsKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2xlYW5UZXh0LnRyaW0oKTtcbiAgICB9XG59IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy9wcm92aWRlcnMvY2hhdGdwdC9jaGF0Z3B0LWF0dGFjaG1lbnQtZXh0cmFjdG9yLnRzXG5pbXBvcnQgSlNaaXAgZnJvbSBcImpzemlwXCI7XG5pbXBvcnQgeyBTdGFuZGFyZEF0dGFjaG1lbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXMvc3RhbmRhcmRcIjtcbmltcG9ydCB7IGVuc3VyZUZvbGRlckV4aXN0cyB9IGZyb20gXCIuLi8uLi91dGlsc1wiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uLy4uL2xvZ2dlclwiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vLi4vbWFpblwiO1xuaW1wb3J0IHsgQXR0YWNobWVudE1hcCwgQXR0YWNobWVudExvY2F0aW9uIH0gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL2F0dGFjaG1lbnQtbWFwLWJ1aWxkZXJcIjtcblxuXG5leHBvcnQgY2xhc3MgQ2hhdEdQVEF0dGFjaG1lbnRFeHRyYWN0b3Ige1xuICAgIHByaXZhdGUgemlwRmlsZUNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIEpTWmlwLkpTWmlwT2JqZWN0IHwgbnVsbD4oKTsgLy8gQ2FjaGUgZm9yIFpJUCBmaWxlIGxvb2t1cHNcbiAgICBwcml2YXRlIGF0dGFjaG1lbnRNYXA6IEF0dGFjaG1lbnRNYXAgfCBudWxsID0gbnVsbDsgLy8gTXVsdGktWklQIGF0dGFjaG1lbnQgbWFwXG4gICAgcHJpdmF0ZSBhbGxaaXBzOiBKU1ppcFtdID0gW107IC8vIEFsbCBvcGVuZWQgWklQcyBmb3IgbXVsdGktWklQIGZhbGxiYWNrXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiwgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcikge31cblxuICAgIC8qKlxuICAgICAqIFNldCBhdHRhY2htZW50IG1hcCBmb3IgbXVsdGktWklQIHN1cHBvcnRcbiAgICAgKiBUaGlzIGVuYWJsZXMgZmFsbGJhY2sgdG8gb2xkZXIgWklQcyB3aGVuIGZpbGVzIGFyZSBtaXNzaW5nIGluIHJlY2VudCBleHBvcnRzXG4gICAgICovXG4gICAgc2V0QXR0YWNobWVudE1hcChhdHRhY2htZW50TWFwOiBBdHRhY2htZW50TWFwLCBhbGxaaXBzOiBKU1ppcFtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYXR0YWNobWVudE1hcCA9IGF0dGFjaG1lbnRNYXA7XG4gICAgICAgIHRoaXMuYWxsWmlwcyA9IGFsbFppcHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgYXR0YWNobWVudCBtYXAgYW5kIFpJUHMgKGNhbGwgYWZ0ZXIgaW1wb3J0IGNvbXBsZXRlcylcbiAgICAgKi9cbiAgICBjbGVhckF0dGFjaG1lbnRNYXAoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYXR0YWNobWVudE1hcCA9IG51bGw7XG4gICAgICAgIHRoaXMuYWxsWmlwcyA9IFtdO1xuICAgICAgICB0aGlzLnppcEZpbGVDYWNoZS5jbGVhcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3QgYW5kIHNhdmUgQ2hhdEdQVCBhdHRhY2htZW50cyB1c2luZyBcImJlc3QgZWZmb3J0XCIgc3RyYXRlZ3lcbiAgICAgKiAtIElmIGZpbGUgZXhpc3RzIGluIFpJUDogZXh0cmFjdCBhbmQgbGlua1xuICAgICAqIC0gSWYgZmlsZSBtaXNzaW5nOiBjcmVhdGUgaW5mb3JtYXRpdmUgbm90ZVxuICAgICAqL1xuICAgIGFzeW5jIGV4dHJhY3RBdHRhY2htZW50cyhcbiAgICAgICAgemlwOiBKU1ppcCxcbiAgICAgICAgY29udmVyc2F0aW9uSWQ6IHN0cmluZyxcbiAgICAgICAgYXR0YWNobWVudHM6IFN0YW5kYXJkQXR0YWNobWVudFtdLFxuICAgICAgICBtZXNzYWdlSWQ/OiBzdHJpbmdcbiAgICApOiBQcm9taXNlPFN0YW5kYXJkQXR0YWNobWVudFtdPiB7XG4gICAgICAgIGlmIChhdHRhY2htZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2htZW50cy5tYXAoYXR0ID0+ICh7IC4uLmF0dCwgc3RhdHVzOiB7IHByb2Nlc3NlZDogZmFsc2UsIGZvdW5kOiBmYWxzZSB9IH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZEF0dGFjaG1lbnRzOiBTdGFuZGFyZEF0dGFjaG1lbnRbXSA9IFtdO1xuXG4gICAgICAgIGZvciAoY29uc3QgYXR0YWNobWVudCBvZiBhdHRhY2htZW50cykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnByb2Nlc3NBdHRhY2htZW50QmVzdEVmZm9ydCh6aXAsIGNvbnZlcnNhdGlvbklkLCBhdHRhY2htZW50LCBtZXNzYWdlSWQpO1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZEF0dGFjaG1lbnRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBtZXNzYWdlSWRcbiAgICAgICAgICAgICAgICAgICAgPyBgY29udmVyc2F0aW9uOiAke2NvbnZlcnNhdGlvbklkfSwgbWVzc2FnZTogJHttZXNzYWdlSWR9YFxuICAgICAgICAgICAgICAgICAgICA6IGBjb252ZXJzYXRpb246ICR7Y29udmVyc2F0aW9uSWR9YDtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgRmFpbGVkIHRvIHByb2Nlc3MgQ2hhdEdQVCBhdHRhY2htZW50OiAke2F0dGFjaG1lbnQuZmlsZU5hbWV9ICgke2NvbnRleHR9KWAsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgLy8gRXZlbiBpZiBwcm9jZXNzaW5nIGZhaWxzLCByZXR1cm4gYXR0YWNobWVudCB3aXRoIGVycm9yIHN0YXR1c1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZEF0dGFjaG1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAuLi5hdHRhY2htZW50LFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb246ICdleHRyYWN0aW9uX2ZhaWxlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RlOiBgUHJvY2Vzc2luZyBmYWlsZWQ6ICR7ZXJyb3JNZXNzYWdlfWBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHByb2Nlc3NlZEF0dGFjaG1lbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3Mgc2luZ2xlIGF0dGFjaG1lbnQgd2l0aCBiZXN0IGVmZm9ydCBzdHJhdGVneVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcHJvY2Vzc0F0dGFjaG1lbnRCZXN0RWZmb3J0KFxuICAgICAgICB6aXA6IEpTWmlwLFxuICAgICAgICBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxuICAgICAgICBhdHRhY2htZW50OiBTdGFuZGFyZEF0dGFjaG1lbnQsXG4gICAgICAgIG1lc3NhZ2VJZD86IHN0cmluZ1xuICAgICk6IFByb21pc2U8U3RhbmRhcmRBdHRhY2htZW50PiB7XG4gICAgICAgIC8vIFRyeSB0byBmaW5kIGZpbGUgaW4gWklQXG4gICAgICAgIGNvbnN0IHppcEZpbGUgPSBhd2FpdCB0aGlzLmZpbmRDaGF0R1BURmlsZUJ5SWQoemlwLCBhdHRhY2htZW50LCBjb252ZXJzYXRpb25JZCwgbWVzc2FnZUlkKTtcblxuICAgICAgICBpZiAoIXppcEZpbGUpIHtcbiAgICAgICAgICAgIC8vIEZpbGUgbm90IGZvdW5kIC0gaGFuZGxlIERBTEwtRSBpbWFnZXMgc3BlY2lhbGx5XG4gICAgICAgICAgICBsZXQgZmluYWxFeHRyYWN0ZWRDb250ZW50ID0gYXR0YWNobWVudC5leHRyYWN0ZWRDb250ZW50O1xuXG4gICAgICAgICAgICBpZiAoYXR0YWNobWVudC5hdHRhY2htZW50VHlwZSA9PT0gJ2dlbmVyYXRlZF9pbWFnZScgJiYgYXR0YWNobWVudC5leHRyYWN0ZWRDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgYXR0YWNobWVudCBjYWxsb3V0IHdpdGggXCJJbWFnZSBOb3QgRm91bmRcIiBtZXNzYWdlXG4gICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgcHJvbXB0IGNhbGxvdXQgaW50YWN0LCBvbmx5IHJlcGxhY2UgdGhlIGF0dGFjaG1lbnQgcGFydFxuICAgICAgICAgICAgICAgIGZpbmFsRXh0cmFjdGVkQ29udGVudCA9IGF0dGFjaG1lbnQuZXh0cmFjdGVkQ29udGVudC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAvPj5cXFshbmV4dXNfYXR0YWNobWVudFxcXSBcXCpcXCpcXHtcXHtGSUxFTkFNRVxcfVxcfVxcKlxcKiBcXChcXHtcXHtGSUxFVFlQRVxcfVxcfVxcKSAtIFxce1xce0ZJTEVTSVpFXFx9XFx9XFxuPj4gIVxcW1xcW1xce1xce1VSTFxcfVxcfVxcXVxcXS8sXG4gICAgICAgICAgICAgICAgICAgICc+PlshbmV4dXNfYXR0YWNobWVudF0gKipJbWFnZSBOb3QgRm91bmQqKlxcbj4+IFx1MjZBMFx1RkUwRiBJbWFnZSBjb3VsZCBub3QgYmUgZm91bmQuIFBlcmhhcHMgaXQgd2FzIG5vdCBnZW5lcmF0ZWQgb3IgaXMgbWlzc2luZyBmcm9tIHRoZSBhcmNoaXZlLidcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmF0dGFjaG1lbnQsXG4gICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudDogZmluYWxFeHRyYWN0ZWRDb250ZW50LFxuICAgICAgICAgICAgICAgIHN0YXR1czoge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAnbWlzc2luZ19mcm9tX2V4cG9ydCcsXG4gICAgICAgICAgICAgICAgICAgIG5vdGU6ICdUaGlzIGZpbGUgd2FzIHJlZmVyZW5jZWQgaW4gdGhlIGNvbnZlcnNhdGlvbiBidXQgbm90IGluY2x1ZGVkIGluIHRoZSBDaGF0R1BUIGV4cG9ydC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdUaGlzIGNhbiBoYXBwZW4gd2l0aCBvbGRlciBjb252ZXJzYXRpb25zIG9yIGNlcnRhaW4gZmlsZSB0eXBlcy4nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbGUgZm91bmQgLSB0cnkgdG8gZXh0cmFjdCBpdFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXh0cmFjdFJlc3VsdCA9IGF3YWl0IHRoaXMuZXh0cmFjdFNpbmdsZUF0dGFjaG1lbnQoemlwLCBjb252ZXJzYXRpb25JZCwgYXR0YWNobWVudCwgemlwRmlsZSk7XG5cbiAgICAgICAgICAgIGlmIChleHRyYWN0UmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIGdlbmVyYXRlZCBpbWFnZXMgd2l0aCBleHRyYWN0ZWRDb250ZW50LCByZXBsYWNlIHBsYWNlaG9sZGVyc1xuICAgICAgICAgICAgICAgIGxldCBmaW5hbEV4dHJhY3RlZENvbnRlbnQgPSBhdHRhY2htZW50LmV4dHJhY3RlZENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGF0dGFjaG1lbnQuYXR0YWNobWVudFR5cGUgPT09ICdnZW5lcmF0ZWRfaW1hZ2UnICYmIGF0dGFjaG1lbnQuZXh0cmFjdGVkQ29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBmaW5hbEV4dHJhY3RlZENvbnRlbnQgPSBhdHRhY2htZW50LmV4dHJhY3RlZENvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7e0ZJTEVOQU1FfX0nLCBleHRyYWN0UmVzdWx0LmZpbmFsRmlsZU5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne3tGSUxFVFlQRX19JywgZXh0cmFjdFJlc3VsdC5hY3R1YWxGaWxlVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7e0ZJTEVTSVpFfX0nLCB0aGlzLmZvcm1hdEZpbGVTaXplKGF0dGFjaG1lbnQuZmlsZVNpemUgfHwgMCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne3tVUkx9fScsIGV4dHJhY3RSZXN1bHQubG9jYWxQYXRoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5hdHRhY2htZW50LFxuICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogZXh0cmFjdFJlc3VsdC5maW5hbEZpbGVOYW1lLCAvLyBVcGRhdGUgd2l0aCBhY3R1YWwgZXh0cmFjdGVkIGZpbGVuYW1lXG4gICAgICAgICAgICAgICAgICAgIGZpbGVUeXBlOiBleHRyYWN0UmVzdWx0LmFjdHVhbEZpbGVUeXBlLCAvLyBVcGRhdGUgd2l0aCBkZXRlY3RlZCBmaWxlIHR5cGVcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBleHRyYWN0UmVzdWx0LmxvY2FsUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudDogZmluYWxFeHRyYWN0ZWRDb250ZW50LCAvLyBVcGRhdGUgd2l0aCByZXBsYWNlZCBwbGFjZWhvbGRlcnNcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsUGF0aDogZXh0cmFjdFJlc3VsdC5sb2NhbFBhdGhcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEV4dHJhY3Rpb24gZmFpbGVkIC0gaGFuZGxlIERBTEwtRSBpbWFnZXMgc3BlY2lhbGx5XG4gICAgICAgICAgICAgICAgbGV0IGZpbmFsRXh0cmFjdGVkQ29udGVudCA9IGF0dGFjaG1lbnQuZXh0cmFjdGVkQ29udGVudDtcblxuICAgICAgICAgICAgICAgIGlmIChhdHRhY2htZW50LmF0dGFjaG1lbnRUeXBlID09PSAnZ2VuZXJhdGVkX2ltYWdlJyAmJiBhdHRhY2htZW50LmV4dHJhY3RlZENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgYXR0YWNobWVudCBjYWxsb3V0IHdpdGggXCJJbWFnZSBOb3QgRm91bmRcIiBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsRXh0cmFjdGVkQ29udGVudCA9IGF0dGFjaG1lbnQuZXh0cmFjdGVkQ29udGVudC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgLz4+XFxbIW5leHVzX2F0dGFjaG1lbnRcXF0gXFwqXFwqXFx7XFx7RklMRU5BTUVcXH1cXH1cXCpcXCogXFwoXFx7XFx7RklMRVRZUEVcXH1cXH1cXCkgLSBcXHtcXHtGSUxFU0laRVxcfVxcfVxcbj4+ICFcXFtcXFtcXHtcXHtVUkxcXH1cXH1cXF1cXF0vLFxuICAgICAgICAgICAgICAgICAgICAgICAgJz4+WyFuZXh1c19hdHRhY2htZW50XSAqKkltYWdlIE5vdCBGb3VuZCoqXFxuPj4gXHUyNkEwXHVGRTBGIEZpbGUgd2FzIGZvdW5kIGluIGV4cG9ydCBidXQgY291bGQgbm90IGJlIGV4dHJhY3RlZCB0byBkaXNrLidcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5hdHRhY2htZW50LFxuICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWRDb250ZW50OiBmaW5hbEV4dHJhY3RlZENvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAnZXh0cmFjdGlvbl9mYWlsZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogJ0ZpbGUgd2FzIGZvdW5kIGluIGV4cG9ydCBidXQgY291bGQgbm90IGJlIGV4dHJhY3RlZCB0byBkaXNrLidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gbWVzc2FnZUlkXG4gICAgICAgICAgICAgICAgPyBgY29udmVyc2F0aW9uOiAke2NvbnZlcnNhdGlvbklkfSwgbWVzc2FnZTogJHttZXNzYWdlSWR9YFxuICAgICAgICAgICAgICAgIDogYGNvbnZlcnNhdGlvbjogJHtjb252ZXJzYXRpb25JZH1gO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEVycm9yIGV4dHJhY3RpbmcgQ2hhdEdQVCBhdHRhY2htZW50OiAke2F0dGFjaG1lbnQuZmlsZU5hbWV9ICgke2NvbnRleHR9KWAsIGVycm9yTWVzc2FnZSk7XG5cbiAgICAgICAgICAgIC8vIEhhbmRsZSBEQUxMLUUgaW1hZ2VzIHNwZWNpYWxseVxuICAgICAgICAgICAgbGV0IGZpbmFsRXh0cmFjdGVkQ29udGVudCA9IGF0dGFjaG1lbnQuZXh0cmFjdGVkQ29udGVudDtcblxuICAgICAgICAgICAgaWYgKGF0dGFjaG1lbnQuYXR0YWNobWVudFR5cGUgPT09ICdnZW5lcmF0ZWRfaW1hZ2UnICYmIGF0dGFjaG1lbnQuZXh0cmFjdGVkQ29udGVudCkge1xuICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIGF0dGFjaG1lbnQgY2FsbG91dCB3aXRoIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICBmaW5hbEV4dHJhY3RlZENvbnRlbnQgPSBhdHRhY2htZW50LmV4dHJhY3RlZENvbnRlbnQucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgLz4+XFxbIW5leHVzX2F0dGFjaG1lbnRcXF0gXFwqXFwqXFx7XFx7RklMRU5BTUVcXH1cXH1cXCpcXCogXFwoXFx7XFx7RklMRVRZUEVcXH1cXH1cXCkgLSBcXHtcXHtGSUxFU0laRVxcfVxcfVxcbj4+ICFcXFtcXFtcXHtcXHtVUkxcXH1cXH1cXF1cXF0vLFxuICAgICAgICAgICAgICAgICAgICBgPj5bIW5leHVzX2F0dGFjaG1lbnRdICoqRXh0cmFjdGlvbiBGYWlsZWQqKlxcbj4+IFx1MjZBMFx1RkUwRiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5hdHRhY2htZW50LFxuICAgICAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQ6IGZpbmFsRXh0cmFjdGVkQ29udGVudCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBmb3VuZDogdHJ1ZSwgLy8gRmlsZSBleGlzdHMgYnV0IGV4dHJhY3Rpb24gZmFpbGVkXG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogJ2V4dHJhY3Rpb25fZmFpbGVkJyxcbiAgICAgICAgICAgICAgICAgICAgbm90ZTogYEV4dHJhY3Rpb24gZmFpbGVkOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3Qgc2luZ2xlIGF0dGFjaG1lbnQgdG8gZGlzayB3aXRoIGNvbmZsaWN0IHJlc29sdXRpb24gYW5kIGZvcm1hdCBkZXRlY3Rpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGV4dHJhY3RTaW5nbGVBdHRhY2htZW50KFxuICAgICAgICB6aXA6IEpTWmlwLFxuICAgICAgICBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxuICAgICAgICBhdHRhY2htZW50OiBTdGFuZGFyZEF0dGFjaG1lbnQsXG4gICAgICAgIHppcEZpbGU6IEpTWmlwLkpTWmlwT2JqZWN0XG4gICAgKTogUHJvbWlzZTx7bG9jYWxQYXRoOiBzdHJpbmcsIGZpbmFsRmlsZU5hbWU6IHN0cmluZywgYWN0dWFsRmlsZVR5cGU6IHN0cmluZ30gfCBudWxsPiB7XG4gICAgICAgIC8vIEdldCBmaWxlIGNvbnRlbnQgZm9yIGZvcm1hdCBkZXRlY3Rpb25cbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB6aXBGaWxlLmFzeW5jKFwidWludDhhcnJheVwiKTtcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVjdCBhY3R1YWwgZmlsZSBmb3JtYXQgKGVzcGVjaWFsbHkgZm9yIC5kYXQgZmlsZXMpXG4gICAgICAgIGNvbnN0IGZvcm1hdEluZm8gPSB0aGlzLmRldGVjdEZpbGVGb3JtYXQoZmlsZUNvbnRlbnQpO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGZpbGVuYW1lIHdpdGggY29ycmVjdCBleHRlbnNpb24gaWYgbmVlZGVkIChmb3IgYWxsIGdlbmVyYXRlZCBpbWFnZXMpXG4gICAgICAgIGxldCBmaW5hbEZpbGVOYW1lID0gYXR0YWNobWVudC5maWxlTmFtZTtcbiAgICAgICAgbGV0IGZpbmFsRmlsZVR5cGUgPSBhdHRhY2htZW50LmZpbGVUeXBlO1xuXG4gICAgICAgIGlmIChhdHRhY2htZW50LmF0dGFjaG1lbnRUeXBlID09PSAnZ2VuZXJhdGVkX2ltYWdlJyAmJiBmb3JtYXRJbmZvLmV4dGVuc2lvbikge1xuICAgICAgICAgICAgLy8gQ29ycmVjdCBleHRlbnNpb24gZm9yIGdlbmVyYXRlZCBpbWFnZXMgKGhhbmRsZXMgLmRhdCwgLndlYnAsIC5qcGcsIC5wbmcpXG4gICAgICAgICAgICBjb25zdCBiYXNlTmFtZSA9IGF0dGFjaG1lbnQuZmlsZU5hbWUucmVwbGFjZSgvXFwuKGRhdHxwbmd8anBnfGpwZWd8Z2lmfHdlYnApJC9pLCAnJyk7XG4gICAgICAgICAgICBmaW5hbEZpbGVOYW1lID0gYCR7YmFzZU5hbWV9LiR7Zm9ybWF0SW5mby5leHRlbnNpb259YDtcbiAgICAgICAgICAgIGZpbmFsRmlsZVR5cGUgPSBmb3JtYXRJbmZvLm1pbWVUeXBlIHx8IGF0dGFjaG1lbnQuZmlsZVR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEdlbmVyYXRlIHRhcmdldCBwYXRoIGZvciBzYXZpbmdcbiAgICAgICAgbGV0IHRhcmdldFBhdGggPSB0aGlzLmdlbmVyYXRlTG9jYWxQYXRoKGNvbnZlcnNhdGlvbklkLCB7XG4gICAgICAgICAgICAuLi5hdHRhY2htZW50LFxuICAgICAgICAgICAgZmlsZU5hbWU6IGZpbmFsRmlsZU5hbWUsXG4gICAgICAgICAgICBmaWxlVHlwZTogZmluYWxGaWxlVHlwZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFbnN1cmUgZm9sZGVyIGV4aXN0c1xuICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gdGFyZ2V0UGF0aC5zdWJzdHJpbmcoMCwgdGFyZ2V0UGF0aC5sYXN0SW5kZXhPZignLycpKTtcbiAgICAgICAgY29uc3QgZm9sZGVyUmVzdWx0ID0gYXdhaXQgZW5zdXJlRm9sZGVyRXhpc3RzKGZvbGRlclBhdGgsIHRoaXMucGx1Z2luLmFwcC52YXVsdCk7XG4gICAgICAgIGlmICghZm9sZGVyUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBDaGF0R1BUIGF0dGFjaG1lbnQgZm9sZGVyOiAke2ZvbGRlclJlc3VsdC5lcnJvcn1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSBmaWxlIGNvbmZsaWN0cyBieSBhZGRpbmcgc3VmZml4IGlmIG5lZWRlZFxuICAgICAgICB0YXJnZXRQYXRoID0gYXdhaXQgdGhpcy5yZXNvbHZlRmlsZUNvbmZsaWN0KHRhcmdldFBhdGgpO1xuXG4gICAgICAgIC8vIFNhdmUgZmlsZVxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci53cml0ZUJpbmFyeSh0YXJnZXRQYXRoLCBmaWxlQ29udGVudC5idWZmZXIgYXMgQXJyYXlCdWZmZXIpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsb2NhbFBhdGg6IHRhcmdldFBhdGgsXG4gICAgICAgICAgICBmaW5hbEZpbGVOYW1lOiBmaW5hbEZpbGVOYW1lLFxuICAgICAgICAgICAgYWN0dWFsRmlsZVR5cGU6IGZpbmFsRmlsZVR5cGUgfHwgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSdcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgZmlsZSBmb3JtYXQgZnJvbSBtYWdpYyBieXRlcyAoZXNwZWNpYWxseSBmb3IgLmRhdCBmaWxlcylcbiAgICAgKi9cbiAgICBwcml2YXRlIGRldGVjdEZpbGVGb3JtYXQoZmlsZUNvbnRlbnQ6IFVpbnQ4QXJyYXkpOiB7ZXh0ZW5zaW9uOiBzdHJpbmcgfCBudWxsLCBtaW1lVHlwZTogc3RyaW5nIHwgbnVsbH0ge1xuICAgICAgICBpZiAoZmlsZUNvbnRlbnQubGVuZ3RoIDwgNCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybignRmlsZSB0b28gc21hbGwgZm9yIGZvcm1hdCBkZXRlY3Rpb24nKTtcbiAgICAgICAgICAgIHJldHVybiB7ZXh0ZW5zaW9uOiBudWxsLCBtaW1lVHlwZTogbnVsbH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBtYWdpYyBieXRlc1xuICAgICAgICBjb25zdCBoZWFkZXIgPSBBcnJheS5mcm9tKGZpbGVDb250ZW50LnNsaWNlKDAsIDEyKSkubWFwKGIgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBQTkc6IDg5IDUwIDRFIDQ3IDBEIDBBIDFBIDBBXG4gICAgICAgIGlmIChoZWFkZXIuc3RhcnRzV2l0aCgnODk1MDRlNDcnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtleHRlbnNpb246ICdwbmcnLCBtaW1lVHlwZTogJ2ltYWdlL3BuZyd9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBKUEVHOiBGRiBEOCBGRlxuICAgICAgICBpZiAoaGVhZGVyLnN0YXJ0c1dpdGgoJ2ZmZDhmZicpKSB7XG4gICAgICAgICAgICByZXR1cm4ge2V4dGVuc2lvbjogJ2pwZycsIG1pbWVUeXBlOiAnaW1hZ2UvanBlZyd9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBHSUY6IDQ3IDQ5IDQ2IDM4XG4gICAgICAgIGlmIChoZWFkZXIuc3RhcnRzV2l0aCgnNDc0OTQ2MzgnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtleHRlbnNpb246ICdnaWYnLCBtaW1lVHlwZTogJ2ltYWdlL2dpZid9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBXZWJQOiA1MiA0OSA0NiA0NiBbNCBieXRlc10gNTcgNDUgNDIgNTBcbiAgICAgICAgaWYgKGhlYWRlci5zdGFydHNXaXRoKCc1MjQ5NDY0NicpICYmIGhlYWRlci5zdWJzdHJpbmcoMTYsIDI0KSA9PT0gJzU3NDU0MjUwJykge1xuICAgICAgICAgICAgcmV0dXJuIHtleHRlbnNpb246ICd3ZWJwJywgbWltZVR5cGU6ICdpbWFnZS93ZWJwJ307XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFJJRkYgKGNvdWxkIGJlIFdlYlAgb3Igb3RoZXIgZm9ybWF0cylcbiAgICAgICAgaWYgKGhlYWRlci5zdGFydHNXaXRoKCc1MjQ5NDY0NicpKSB7XG4gICAgICAgICAgICByZXR1cm4ge2V4dGVuc2lvbjogJ3dlYnAnLCBtaW1lVHlwZTogJ2ltYWdlL3dlYnAnfTsgLy8gQXNzdW1lIFdlYlAgZm9yIFJJRkYgaW4gREFMTC1FIGNvbnRleHRcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7ZXh0ZW5zaW9uOiBudWxsLCBtaW1lVHlwZTogbnVsbH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzb2x2ZSBmaWxlIGNvbmZsaWN0cyBieSBhZGRpbmcgbnVtZXJpYyBzdWZmaXhcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHJlc29sdmVGaWxlQ29uZmxpY3Qob3JpZ2luYWxQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBsZXQgZmluYWxQYXRoID0gb3JpZ2luYWxQYXRoO1xuICAgICAgICBsZXQgY291bnRlciA9IDE7XG5cbiAgICAgICAgd2hpbGUgKGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaW5hbFBhdGgpKSB7XG4gICAgICAgICAgICAvLyBGaWxlIGV4aXN0cywgdHJ5IHdpdGggc3VmZml4XG4gICAgICAgICAgICBjb25zdCBsYXN0RG90ID0gb3JpZ2luYWxQYXRoLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICAgICAgICBpZiAobGFzdERvdCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBmaW5hbFBhdGggPSBgJHtvcmlnaW5hbFBhdGh9XyR7Y291bnRlcn1gO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lV2l0aG91dEV4dCA9IG9yaWdpbmFsUGF0aC5zdWJzdHJpbmcoMCwgbGFzdERvdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gb3JpZ2luYWxQYXRoLnN1YnN0cmluZyhsYXN0RG90KTtcbiAgICAgICAgICAgICAgICBmaW5hbFBhdGggPSBgJHtuYW1lV2l0aG91dEV4dH1fJHtjb3VudGVyfSR7ZXh0ZW5zaW9ufWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmluYWxQYXRoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgZmlsZSBpbiBaSVAgLSBFTkhBTkNFRCBXSVRIIE1VTFRJLVpJUCBGQUxMQkFDSyArIENPTVBSRUhFTlNJVkUgU0VBUkNIICsgQ0FDSElOR1xuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZmluZENoYXRHUFRGaWxlQnlJZChcbiAgICAgICAgemlwOiBKU1ppcCxcbiAgICAgICAgYXR0YWNobWVudDogU3RhbmRhcmRBdHRhY2htZW50LFxuICAgICAgICBjb252ZXJzYXRpb25JZD86IHN0cmluZyxcbiAgICAgICAgbWVzc2FnZUlkPzogc3RyaW5nXG4gICAgKTogUHJvbWlzZTxKU1ppcC5KU1ppcE9iamVjdCB8IG51bGw+IHtcbiAgICAgICAgaWYgKCFhdHRhY2htZW50LmZpbGVJZCkge1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IGNvbnZlcnNhdGlvbklkICYmIG1lc3NhZ2VJZFxuICAgICAgICAgICAgICAgID8gYGNvbnZlcnNhdGlvbjogJHtjb252ZXJzYXRpb25JZH0sIG1lc3NhZ2U6ICR7bWVzc2FnZUlkfWBcbiAgICAgICAgICAgICAgICA6IGNvbnZlcnNhdGlvbklkXG4gICAgICAgICAgICAgICAgPyBgY29udmVyc2F0aW9uOiAke2NvbnZlcnNhdGlvbklkfWBcbiAgICAgICAgICAgICAgICA6ICd1bmtub3duIGNvbnRleHQnO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgTm8gZmlsZUlkIHByb3ZpZGVkIGZvciBhdHRhY2htZW50OiAke2F0dGFjaG1lbnQuZmlsZU5hbWV9ICgke2NvbnRleHR9KWApO1xuXG4gICAgICAgICAgICAvLyBGYWxsYmFjazogdHJ5IHRvIGZpbmQgYnkgZmlsZW5hbWUgb25seVxuICAgICAgICAgICAgY29uc3QgemlwRmlsZSA9IHppcC5maWxlKGF0dGFjaG1lbnQuZmlsZU5hbWUpO1xuICAgICAgICAgICAgaWYgKHppcEZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gemlwRmlsZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBjYWNoZSBmaXJzdFxuICAgICAgICBjb25zdCBjYWNoZUtleSA9IGAke2F0dGFjaG1lbnQuZmlsZUlkfV8ke2F0dGFjaG1lbnQuZmlsZU5hbWV9YDtcbiAgICAgICAgaWYgKHRoaXMuemlwRmlsZUNhY2hlLmhhcyhjYWNoZUtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnppcEZpbGVDYWNoZS5nZXQoY2FjaGVLZXkpITtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5FVzogSWYgYXR0YWNobWVudCBtYXAgaXMgYXZhaWxhYmxlLCB1c2UgaXQgZm9yIG11bHRpLVpJUCBmYWxsYmFja1xuICAgICAgICBpZiAodGhpcy5hdHRhY2htZW50TWFwICYmIHRoaXMuYWxsWmlwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmZpbmRGaWxlVXNpbmdBdHRhY2htZW50TWFwKGF0dGFjaG1lbnQsIGNvbnZlcnNhdGlvbklkLCBtZXNzYWdlSWQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuemlwRmlsZUNhY2hlLnNldChjYWNoZUtleSwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RyYXRlZ3kgMTogVHJ5IGV4YWN0IGZpbGVuYW1lIG1hdGNoIGZpcnN0XG4gICAgICAgIGxldCB6aXBGaWxlID0gemlwLmZpbGUoYXR0YWNobWVudC5maWxlTmFtZSk7XG4gICAgICAgIGlmICh6aXBGaWxlKSB7XG4gICAgICAgICAgICB0aGlzLnppcEZpbGVDYWNoZS5zZXQoY2FjaGVLZXksIHppcEZpbGUpO1xuICAgICAgICAgICAgcmV0dXJuIHppcEZpbGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdHJhdGVneSAyOiBEQUxMLUUgU3RyYXRlZ3kgLSBDaGVjayBkYWxsZS1nZW5lcmF0aW9ucy8gZm9sZGVyIGZpcnN0IChyZXN0b3JlZCBmcm9tIHYxLjIuMClcbiAgICAgICAgaWYgKGF0dGFjaG1lbnQuZmlsZU5hbWUuc3RhcnRzV2l0aCgnZGFsbGVfJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhbGxlRmlsZXMgPSBhd2FpdCB0aGlzLnNlYXJjaERhbGxlR2VuZXJhdGlvbnMoemlwLCBhdHRhY2htZW50LmZpbGVJZCk7XG4gICAgICAgICAgICBpZiAoZGFsbGVGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy56aXBGaWxlQ2FjaGUuc2V0KGNhY2hlS2V5LCBkYWxsZUZpbGVzWzBdKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGFsbGVGaWxlc1swXTsgLy8gUmV0dXJuIGZpcnN0IG1hdGNoXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdHJhdGVneSAzOiBSZWd1bGFyIGZpbGUgSUQgcGF0dGVybnMgKHJlc3RvcmVkIGZyb20gdjEuMi4wKVxuICAgICAgICBjb25zdCBmaWxlSWRQYXR0ZXJuID0gYCR7YXR0YWNobWVudC5maWxlSWR9LSR7YXR0YWNobWVudC5maWxlTmFtZX1gO1xuICAgICAgICB6aXBGaWxlID0gemlwLmZpbGUoZmlsZUlkUGF0dGVybik7XG4gICAgICAgIGlmICh6aXBGaWxlKSB7XG4gICAgICAgICAgICB0aGlzLnppcEZpbGVDYWNoZS5zZXQoY2FjaGVLZXksIHppcEZpbGUpO1xuICAgICAgICAgICAgcmV0dXJuIHppcEZpbGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdHJhdGVneSA0OiBQYXR0ZXJuIGZpbGUte0lEfS57ZXh0fSAocmVzdG9yZWQgZnJvbSB2MS4yLjApXG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IHRoaXMuZ2V0RmlsZUV4dGVuc2lvbihhdHRhY2htZW50LmZpbGVOYW1lKTtcbiAgICAgICAgaWYgKGV4dGVuc2lvbikge1xuICAgICAgICAgICAgY29uc3QgZmlsZUlkRXh0UGF0dGVybiA9IGAke2F0dGFjaG1lbnQuZmlsZUlkfS4ke2V4dGVuc2lvbn1gO1xuICAgICAgICAgICAgemlwRmlsZSA9IHppcC5maWxlKGZpbGVJZEV4dFBhdHRlcm4pO1xuICAgICAgICAgICAgaWYgKHppcEZpbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnppcEZpbGVDYWNoZS5zZXQoY2FjaGVLZXksIHppcEZpbGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB6aXBGaWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RyYXRlZ3kgNTogQ29tcHJlaGVuc2l2ZSBzZWFyY2ggYnkgZmlsZSBJRCBpbiBlbnRpcmUgWklQXG4gICAgICAgIGNvbnN0IGZvdW5kRmlsZSA9IGF3YWl0IHRoaXMuc2VhcmNoWmlwQnlGaWxlSWQoemlwLCBhdHRhY2htZW50LmZpbGVJZCk7XG5cbiAgICAgICAgLy8gQ2FjaGUgcmVzdWx0IChldmVuIGlmIG51bGwpXG4gICAgICAgIHRoaXMuemlwRmlsZUNhY2hlLnNldChjYWNoZUtleSwgZm91bmRGaWxlKTtcblxuICAgICAgICByZXR1cm4gZm91bmRGaWxlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBlbnRpcmUgWklQIGZvciBmaWxlIGJ5IGV4YWN0IElEIHdpdGggZW5oYW5jZWQgREFMTC1FIHN1cHBvcnRcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHNlYXJjaFppcEJ5RmlsZUlkKHppcDogSlNaaXAsIGZpbGVJZDogc3RyaW5nKTogUHJvbWlzZTxKU1ppcC5KU1ppcE9iamVjdCB8IG51bGw+IHtcbiAgICAgICAgLy8gU2VhcmNoIHRocm91Z2ggYWxsIGZpbGVzIGluIFpJUCBmb3IgZXhhY3QgbWF0Y2hcbiAgICAgICAgZm9yIChjb25zdCBbcGF0aCwgZmlsZV0gb2YgT2JqZWN0LmVudHJpZXMoemlwLmZpbGVzKSkge1xuICAgICAgICAgICAgaWYgKGZpbGUuZGlyKSBjb250aW51ZTtcblxuICAgICAgICAgICAgLy8gU3RyYXRlZ3kgMTogQ2hlY2sgaWYgcGF0aCBjb250YWlucyB0aGUgZXhhY3QgZmlsZSBJRFxuICAgICAgICAgICAgaWYgKHBhdGguaW5jbHVkZXMoZmlsZUlkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTdHJhdGVneSAyOiBGb3IgREFMTC1FIGZpbGVzLCBhbHNvIGNoZWNrIGNvbW1vbiBwYXR0ZXJuc1xuICAgICAgICAgICAgLy8gREFMTC1FIGZpbGVzIG1pZ2h0IGJlIHN0b3JlZCBhczpcbiAgICAgICAgICAgIC8vIC0gZGFsbGUvZmlsZS17ZmlsZUlkfS5wbmdcbiAgICAgICAgICAgIC8vIC0gaW1hZ2VzL3tmaWxlSWR9LmRhdFxuICAgICAgICAgICAgLy8gLSBhdHRhY2htZW50cy97ZmlsZUlkfVxuICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBwYXRoLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XG4gICAgICAgICAgICBpZiAoZmlsZU5hbWUuaW5jbHVkZXMoZmlsZUlkKSB8fFxuICAgICAgICAgICAgICAgIGZpbGVOYW1lLnN0YXJ0c1dpdGgoYGZpbGUtJHtmaWxlSWR9YCkgfHxcbiAgICAgICAgICAgICAgICBmaWxlTmFtZS5zdGFydHNXaXRoKGZpbGVJZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgZmlsZSB1c2luZyBhdHRhY2htZW50IG1hcCAobXVsdGktWklQIGZhbGxiYWNrKVxuICAgICAqIFRyaWVzIHRvIGZpbmQgdGhlIGZpbGUgaW4gYW55IG9mIHRoZSBhdmFpbGFibGUgWklQcywgcHJlZmVycmluZyBuZXdlciBleHBvcnRzXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBmaW5kRmlsZVVzaW5nQXR0YWNobWVudE1hcChcbiAgICAgICAgYXR0YWNobWVudDogU3RhbmRhcmRBdHRhY2htZW50LFxuICAgICAgICBjb252ZXJzYXRpb25JZD86IHN0cmluZyxcbiAgICAgICAgbWVzc2FnZUlkPzogc3RyaW5nXG4gICAgKTogUHJvbWlzZTxKU1ppcC5KU1ppcE9iamVjdCB8IG51bGw+IHtcbiAgICAgICAgaWYgKCF0aGlzLmF0dGFjaG1lbnRNYXAgfHwgdGhpcy5hbGxaaXBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb250ZXh0ID0gY29udmVyc2F0aW9uSWQgJiYgbWVzc2FnZUlkXG4gICAgICAgICAgICA/IGBjb252ZXJzYXRpb246ICR7Y29udmVyc2F0aW9uSWR9LCBtZXNzYWdlOiAke21lc3NhZ2VJZH1gXG4gICAgICAgICAgICA6IGNvbnZlcnNhdGlvbklkXG4gICAgICAgICAgICA/IGBjb252ZXJzYXRpb246ICR7Y29udmVyc2F0aW9uSWR9YFxuICAgICAgICAgICAgOiAndW5rbm93biBjb250ZXh0JztcblxuICAgICAgICAvLyBUcnkgdG8gZmluZCB0aGUgZmlsZSBpbiB0aGUgYXR0YWNobWVudCBtYXBcbiAgICAgICAgLy8gVGhlIG1hcCBjb250YWlucyBhbGwgcG9zc2libGUgZmlsZSBJRHMgZXh0cmFjdGVkIGZyb20gZmlsZW5hbWVzXG4gICAgICAgIGNvbnN0IGZpbGVJZCA9IGF0dGFjaG1lbnQuZmlsZUlkIHx8ICcnO1xuICAgICAgICBpZiAoIWZpbGVJZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLmF0dGFjaG1lbnRNYXAuZ2V0KGZpbGVJZCk7XG5cbiAgICAgICAgaWYgKCFsb2NhdGlvbnMgfHwgbG9jYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gVHJ5IGFsdGVybmF0aXZlIGZpbGUgSUQgZm9ybWF0c1xuICAgICAgICAgICAgY29uc3QgYWx0ZXJuYXRpdmVJZHMgPSB0aGlzLmdldEFsdGVybmF0aXZlRmlsZUlkcyhmaWxlSWQpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBhbHRJZCBvZiBhbHRlcm5hdGl2ZUlkcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFsdExvY2F0aW9ucyA9IHRoaXMuYXR0YWNobWVudE1hcC5nZXQoYWx0SWQpO1xuICAgICAgICAgICAgICAgIGlmIChhbHRMb2NhdGlvbnMgJiYgYWx0TG9jYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmlsZUZyb21Mb2NhdGlvbihhbHRMb2NhdGlvbnNbYWx0TG9jYXRpb25zLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVzZSB0aGUgbmV3ZXN0IGxvY2F0aW9uIChsYXN0IGluIGFycmF5KVxuICAgICAgICBjb25zdCBiZXN0TG9jYXRpb24gPSBsb2NhdGlvbnNbbG9jYXRpb25zLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpbGVGcm9tTG9jYXRpb24oYmVzdExvY2F0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWx0ZXJuYXRpdmUgZmlsZSBJRCBmb3JtYXRzIGZvciBmYWxsYmFjayBtYXRjaGluZ1xuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0QWx0ZXJuYXRpdmVGaWxlSWRzKGZpbGVJZDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCBhbHRlcm5hdGl2ZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgLy8gSWYgZmlsZUlkIHN0YXJ0cyB3aXRoIFwiZmlsZV9cIiwgYWxzbyB0cnkgd2l0aG91dCBwcmVmaXhcbiAgICAgICAgaWYgKGZpbGVJZC5zdGFydHNXaXRoKCdmaWxlXycpKSB7XG4gICAgICAgICAgICBhbHRlcm5hdGl2ZXMucHVzaChmaWxlSWQuc3Vic3RyaW5nKDUpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBmaWxlSWQgZG9lc24ndCBoYXZlIHByZWZpeCwgdHJ5IHdpdGggXCJmaWxlX1wiIHByZWZpeFxuICAgICAgICBlbHNlIGlmICghZmlsZUlkLnN0YXJ0c1dpdGgoJ2ZpbGUtJykpIHtcbiAgICAgICAgICAgIGFsdGVybmF0aXZlcy5wdXNoKGBmaWxlXyR7ZmlsZUlkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWxzbyB0cnkgd2l0aCBkYXNoIGluc3RlYWQgb2YgdW5kZXJzY29yZVxuICAgICAgICBpZiAoZmlsZUlkLmluY2x1ZGVzKCdfJykpIHtcbiAgICAgICAgICAgIGFsdGVybmF0aXZlcy5wdXNoKGZpbGVJZC5yZXBsYWNlKC9fL2csICctJykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWxlSWQuaW5jbHVkZXMoJy0nKSkge1xuICAgICAgICAgICAgYWx0ZXJuYXRpdmVzLnB1c2goZmlsZUlkLnJlcGxhY2UoLy0vZywgJ18nKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWx0ZXJuYXRpdmVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBKU1ppcCBmaWxlIG9iamVjdCBmcm9tIGF0dGFjaG1lbnQgbG9jYXRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEZpbGVGcm9tTG9jYXRpb24obG9jYXRpb246IEF0dGFjaG1lbnRMb2NhdGlvbik6IEpTWmlwLkpTWmlwT2JqZWN0IHwgbnVsbCB7XG4gICAgICAgIGlmIChsb2NhdGlvbi56aXBJbmRleCA+PSB0aGlzLmFsbFppcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgSW52YWxpZCBaSVAgaW5kZXggJHtsb2NhdGlvbi56aXBJbmRleH0gKG9ubHkgJHt0aGlzLmFsbFppcHMubGVuZ3RofSBaSVBzIGF2YWlsYWJsZSlgKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgemlwID0gdGhpcy5hbGxaaXBzW2xvY2F0aW9uLnppcEluZGV4XTtcbiAgICAgICAgY29uc3QgemlwRmlsZSA9IHppcC5maWxlKGxvY2F0aW9uLnBhdGgpO1xuXG4gICAgICAgIGlmICghemlwRmlsZSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEZpbGUgbm90IGZvdW5kIGluIFpJUCAke2xvY2F0aW9uLnppcEluZGV4fTogJHtsb2NhdGlvbi5wYXRofWApO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gemlwRmlsZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggc3BlY2lmaWNhbGx5IGluIGRhbGxlLWdlbmVyYXRpb25zLyBmb2xkZXIgKHJlc3RvcmVkIGZyb20gdjEuMi4wKVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgc2VhcmNoRGFsbGVHZW5lcmF0aW9ucyh6aXA6IEpTWmlwLCBmaWxlSWQ6IHN0cmluZyk6IFByb21pc2U8SlNaaXAuSlNaaXBPYmplY3RbXT4ge1xuICAgICAgICBjb25zdCBtYXRjaGVzOiBKU1ppcC5KU1ppcE9iamVjdFtdID0gW107XG5cbiAgICAgICAgZm9yIChjb25zdCBbcGF0aCwgZmlsZV0gb2YgT2JqZWN0LmVudHJpZXMoemlwLmZpbGVzKSkge1xuICAgICAgICAgICAgaWYgKCFmaWxlLmRpciAmJiBwYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2RhbGxlJykpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayB2YXJpb3VzIHBhdHRlcm5zIGZvciBEQUxMLUUgZmlsZXNcbiAgICAgICAgICAgICAgICBpZiAocGF0aC5pbmNsdWRlcyhmaWxlSWQpIHx8XG4gICAgICAgICAgICAgICAgICAgIHBhdGguaW5jbHVkZXMoZmlsZUlkLnJlcGxhY2UoJ2ZpbGVfJywgJycpKSB8fFxuICAgICAgICAgICAgICAgICAgICBwYXRoLmluY2x1ZGVzKGZpbGVJZC5yZXBsYWNlKCdmaWxlLScsICcnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXRjaGVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBmaWxlIGV4dGVuc2lvbiBmcm9tIGZpbGVuYW1lIChyZXN0b3JlZCBmcm9tIHYxLjIuMClcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEZpbGVFeHRlbnNpb24oZmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGxhc3REb3QgPSBmaWxlTmFtZS5sYXN0SW5kZXhPZignLicpO1xuICAgICAgICByZXR1cm4gbGFzdERvdCA9PT0gLTEgPyAnJyA6IGZpbGVOYW1lLnN1YnN0cmluZyhsYXN0RG90ICsgMSkudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBsb2NhbCBwYXRoIGZvciBDaGF0R1BUIGF0dGFjaG1lbnQgdXNpbmcgYXR0YWNobWVudEZvbGRlciBzZXR0aW5nXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUxvY2FsUGF0aChjb252ZXJzYXRpb25JZDogc3RyaW5nLCBhdHRhY2htZW50OiBTdGFuZGFyZEF0dGFjaG1lbnQpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBjYXRlZ29yeSA9IHRoaXMuY2F0ZWdvcml6ZUZpbGUoYXR0YWNobWVudCk7XG5cbiAgICAgICAgLy8gQ2xlYW4gZmlsZW5hbWUgZm9yIGZpbGVzeXN0ZW0gLSBrZWVwIG9yaWdpbmFsIG5hbWUgc2luY2UgaXQgc2hvdWxkIGJlIHVuaXF1ZVxuICAgICAgICBjb25zdCBzYWZlRmlsZU5hbWUgPSB0aGlzLnNhbml0aXplRmlsZU5hbWUoYXR0YWNobWVudC5maWxlTmFtZSk7XG5cbiAgICAgICAgLy8gVXNlIGF0dGFjaG1lbnRGb2xkZXIgc2V0dGluZzogPGF0dGFjaG1lbnRGb2xkZXI+L2NoYXRncHQvPGNhdGVnb3J5Pi9maWxlbmFtZS5qcGdcbiAgICAgICAgcmV0dXJuIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnRGb2xkZXJ9L2NoYXRncHQvJHtjYXRlZ29yeX0vJHtzYWZlRmlsZU5hbWV9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYXRlZ29yaXplIGZpbGUgYmFzZWQgb24gTUlNRSB0eXBlIG9yIGV4dGVuc2lvblxuICAgICAqL1xuICAgIHByaXZhdGUgY2F0ZWdvcml6ZUZpbGUoYXR0YWNobWVudDogU3RhbmRhcmRBdHRhY2htZW50KTogc3RyaW5nIHtcbiAgICAgICAgLy8gVXNlIE1JTUUgdHlwZSBpZiBhdmFpbGFibGVcbiAgICAgICAgaWYgKGF0dGFjaG1lbnQuZmlsZVR5cGUpIHtcbiAgICAgICAgICAgIGlmIChhdHRhY2htZW50LmZpbGVUeXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSByZXR1cm4gJ2ltYWdlcyc7XG4gICAgICAgICAgICBpZiAoYXR0YWNobWVudC5maWxlVHlwZS5zdGFydHNXaXRoKCdhdWRpby8nKSkgcmV0dXJuICdhdWRpbyc7XG4gICAgICAgICAgICBpZiAoYXR0YWNobWVudC5maWxlVHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSkgcmV0dXJuICd2aWRlbyc7XG4gICAgICAgICAgICBpZiAoYXR0YWNobWVudC5maWxlVHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3BkZicpIHJldHVybiAnZG9jdW1lbnRzJztcbiAgICAgICAgICAgIGlmIChhdHRhY2htZW50LmZpbGVUeXBlLmluY2x1ZGVzKCd0ZXh0LycpIHx8IGF0dGFjaG1lbnQuZmlsZVR5cGUuaW5jbHVkZXMoJ21hcmtkb3duJykpIHJldHVybiAnZG9jdW1lbnRzJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZhbGwgYmFjayB0byBmaWxlIGV4dGVuc2lvbiB1c2luZyBGaWxlU2VydmljZVxuICAgICAgICBjb25zdCBleHQgPSB0aGlzLnBsdWdpbi5nZXRGaWxlU2VydmljZSgpLmdldEZpbGVFeHRlbnNpb24oYXR0YWNobWVudC5maWxlTmFtZSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhdWRpb0V4dHMgPSBbJ3dhdicsICdtcDMnLCAnb2dnJywgJ200YScsICdmbGFjJ107XG4gICAgICAgIGNvbnN0IGltYWdlRXh0cyA9IFsncG5nJywgJ2pwZycsICdqcGVnJywgJ2dpZicsICd3ZWJwJywgJ3N2ZyddO1xuICAgICAgICBjb25zdCBkb2NFeHRzID0gWydwZGYnLCAnZG9jJywgJ2RvY3gnLCAndHh0JywgJ21kJywgJ3J0ZiddO1xuICAgICAgICBjb25zdCB2aWRlb0V4dHMgPSBbJ21wNCcsICdhdmknLCAnbW92JywgJ21rdiddO1xuXG4gICAgICAgIGlmIChhdWRpb0V4dHMuaW5jbHVkZXMoZXh0KSkgcmV0dXJuICdhdWRpbyc7XG4gICAgICAgIGlmIChpbWFnZUV4dHMuaW5jbHVkZXMoZXh0KSkgcmV0dXJuICdpbWFnZXMnO1xuICAgICAgICBpZiAoZG9jRXh0cy5pbmNsdWRlcyhleHQpKSByZXR1cm4gJ2RvY3VtZW50cyc7XG4gICAgICAgIGlmICh2aWRlb0V4dHMuaW5jbHVkZXMoZXh0KSkgcmV0dXJuICd2aWRlbyc7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gJ2ZpbGVzJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYW5pdGl6ZSBmaWxlbmFtZSBhbmQgaGFuZGxlIHBvdGVudGlhbCBjb25mbGljdHNcbiAgICAgKi9cbiAgICBwcml2YXRlIHNhbml0aXplRmlsZU5hbWUoZmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCBjbGVhbk5hbWUgPSBmaWxlTmFtZVxuICAgICAgICAgICAgLnJlcGxhY2UoL1s8PjpcIlxcL1xcXFx8PypdL2csICdfJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csICdfJylcbiAgICAgICAgICAgIC50cmltKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgLy8gSWYgZmlsZW5hbWUgY29uZmxpY3RzIG1pZ2h0IG9jY3VyLCB3ZSBjb3VsZCBhZGQgYSB0aW1lc3RhbXAgcHJlZml4XG4gICAgICAgIC8vIGJ1dCBmb3Igbm93LCBDaGF0R1BUIGZpbGUgSURzIHNob3VsZCBtYWtlIG5hbWVzIHVuaXF1ZSBlbm91Z2hcbiAgICAgICAgcmV0dXJuIGNsZWFuTmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JtYXQgZmlsZSBzaXplIGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgICAqL1xuICAgIHByaXZhdGUgZm9ybWF0RmlsZVNpemUoYnl0ZXM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHNpemVzID0gWydCeXRlcycsICdLQicsICdNQicsICdHQiddO1xuICAgICAgICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCeXRlcyc7XG4gICAgICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKDEwMjQpKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoYnl0ZXMgLyBNYXRoLnBvdygxMDI0LCBpKSAqIDEwMCkgLyAxMDAgKyAnICcgKyBzaXplc1tpXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhciBaSVAgZmlsZSBjYWNoZSAoY2FsbCBiZXR3ZWVuIGRpZmZlcmVudCBaSVAgZmlsZXMpXG4gICAgICovXG4gICAgY2xlYXJDYWNoZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy56aXBGaWxlQ2FjaGUuY2xlYXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYXR0YWNobWVudCBwcm9jZXNzaW5nIHN0YXRpc3RpY3NcbiAgICAgKi9cbiAgICBnZXRTdGF0aXN0aWNzKGF0dGFjaG1lbnRzOiBTdGFuZGFyZEF0dGFjaG1lbnRbXSk6IHtcbiAgICAgICAgdG90YWw6IG51bWJlcjtcbiAgICAgICAgZm91bmQ6IG51bWJlcjtcbiAgICAgICAgbWlzc2luZzogbnVtYmVyO1xuICAgICAgICBmYWlsZWQ6IG51bWJlcjtcbiAgICB9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvdGFsOiBhdHRhY2htZW50cy5sZW5ndGgsXG4gICAgICAgICAgICBmb3VuZDogYXR0YWNobWVudHMuZmlsdGVyKGEgPT4gYS5zdGF0dXM/LmZvdW5kICYmIGEuc3RhdHVzPy5wcm9jZXNzZWQpLmxlbmd0aCxcbiAgICAgICAgICAgIG1pc3Npbmc6IGF0dGFjaG1lbnRzLmZpbHRlcihhID0+ICFhLnN0YXR1cz8uZm91bmQgJiYgYS5zdGF0dXM/LnJlYXNvbiA9PT0gJ21pc3NpbmdfZnJvbV9leHBvcnQnKS5sZW5ndGgsXG4gICAgICAgICAgICBmYWlsZWQ6IGF0dGFjaG1lbnRzLmZpbHRlcihhID0+IGEuc3RhdHVzPy5yZWFzb24gPT09ICdleHRyYWN0aW9uX2ZhaWxlZCcpLmxlbmd0aFxuICAgICAgICB9O1xuICAgIH1cbn0iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3Byb3ZpZGVycy9jaGF0Z3B0L2NoYXRncHQtcmVwb3J0LW5hbWluZy50c1xuaW1wb3J0IHsgUmVwb3J0TmFtaW5nU3RyYXRlZ3kgfSBmcm9tIFwiLi4vLi4vdHlwZXMvc3RhbmRhcmRcIjtcblxuZXhwb3J0IGNsYXNzIENoYXRHUFRSZXBvcnROYW1pbmdTdHJhdGVneSBpbXBsZW1lbnRzIFJlcG9ydE5hbWluZ1N0cmF0ZWd5IHtcbiAgICBcbiAgICAvKipcbiAgICAgKiBFeHRyYWN0IGRhdGUgcHJlZml4IGZyb20gQ2hhdEdQVCBaSVAgZmlsZW5hbWVcbiAgICAgKiBFeGFtcGxlczpcbiAgICAgKiAtIFwiM2IwMGFiYWZiOTIyMmE5NTgwYWE3Y2JiMTk4MTY2ZWQwYzYxNjM0MjIyY2NlOTU3MWJiMDc5YTI4ODZhZWVkNS0yMDI1LTA0LTI1LTE0LTQwLTQyLWZmMTljMmZkODk4ZDQ0ZDliYzU5NDVlZTgwYzE5OWNhLnppcFwiXG4gICAgICogLSBcImNoYXRncHQtZXhwb3J0LTIwMjUtMDQtMjUuemlwXCJcbiAgICAgKiAtIFwiY29udmVyc2F0aW9ucy0yMDI1LTA0LTI1LTE0LTQwLTQyLnppcFwiXG4gICAgICovXG4gICAgZXh0cmFjdFJlcG9ydFByZWZpeCh6aXBGaWxlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgLy8gR2V0IGN1cnJlbnQgaW1wb3J0IGRhdGVcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgaW1wb3J0WWVhciA9IG5vdy5nZXRGdWxsWWVhcigpO1xuICAgICAgICBjb25zdCBpbXBvcnRNb250aCA9IFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgIGNvbnN0IGltcG9ydERheSA9IFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBpbXBvcnREYXRlID0gYCR7aW1wb3J0WWVhcn0uJHtpbXBvcnRNb250aH0uJHtpbXBvcnREYXl9YDtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSB0byBleHRyYWN0IGFyY2hpdmUgZGF0ZSBpbiBmb3JtYXQgWVlZWS1NTS1ERCBmcm9tIGZpbGVuYW1lXG4gICAgICAgIGNvbnN0IGRhdGVSZWdleCA9IC8oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KS87XG4gICAgICAgIGNvbnN0IG1hdGNoID0gemlwRmlsZU5hbWUubWF0Y2goZGF0ZVJlZ2V4KTtcbiAgICAgICAgXG4gICAgICAgIGxldCBhcmNoaXZlRGF0ZTogc3RyaW5nO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGNvbnN0IFssIHllYXIsIG1vbnRoLCBkYXldID0gbWF0Y2g7XG4gICAgICAgICAgICBhcmNoaXZlRGF0ZSA9IGAke3llYXJ9LiR7bW9udGh9LiR7ZGF5fWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGYWxsYmFjazogdXNlIGN1cnJlbnQgZGF0ZSBpZiBubyBkYXRlIGZvdW5kIGluIGZpbGVuYW1lXG4gICAgICAgICAgICBhcmNoaXZlRGF0ZSA9IGltcG9ydERhdGU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEZvcm1hdDogaW1wb3J0ZWQtWVlZWS5NTS5ERC1hcmNoaXZlLVlZWVkuTU0uRERcbiAgICAgICAgcmV0dXJuIGBpbXBvcnRlZC0ke2ltcG9ydERhdGV9LWFyY2hpdmUtJHthcmNoaXZlRGF0ZX1gO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBHZXQgQ2hhdEdQVCBwcm92aWRlciBuYW1lXG4gICAgICovXG4gICAgZ2V0UHJvdmlkZXJOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcImNoYXRncHRcIjtcbiAgICB9XG5cbiAgICBnZXRQcm92aWRlclNwZWNpZmljQ29sdW1uKCk6IHsgaGVhZGVyOiBzdHJpbmc7IGdldFZhbHVlOiAoYWRhcHRlcjogYW55LCBjaGF0OiBhbnkpID0+IG51bWJlciB9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhlYWRlcjogXCJBdHRhY2htZW50c1wiLFxuICAgICAgICAgICAgZ2V0VmFsdWU6IChhZGFwdGVyOiBhbnksIGNoYXQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIENvdW50IGF0dGFjaG1lbnRzIGluIENoYXRHUFQgY29udmVyc2F0aW9uXG4gICAgICAgICAgICAgICAgbGV0IGF0dGFjaG1lbnRDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGNoYXQubWFwcGluZykge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKGNoYXQubWFwcGluZykuZm9yRWFjaCgobm9kZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCByZWd1bGFyIGF0dGFjaG1lbnRzICh1c2VyIHVwbG9hZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5tZXNzYWdlPy5tZXRhZGF0YT8uYXR0YWNobWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50Q291bnQgKz0gbm9kZS5tZXNzYWdlLm1ldGFkYXRhLmF0dGFjaG1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291bnQgREFMTC1FIGltYWdlcyAoZ2VuZXJhdGVkIGltYWdlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlLm1lc3NhZ2U/LmNvbnRlbnQ/LnBhcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5tZXNzYWdlLmNvbnRlbnQucGFydHMuZm9yRWFjaCgocGFydDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LmNvbnRlbnRfdHlwZSA9PT0gXCJpbWFnZV9hc3NldF9wb2ludGVyXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuYXNzZXRfcG9pbnRlciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5tZXRhZGF0YT8uZGFsbGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQubWV0YWRhdGEuZGFsbGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudENvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn0iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3Byb3ZpZGVycy9jaGF0Z3B0L2NoYXRncHQtYWRhcHRlci50c1xuaW1wb3J0IEpTWmlwIGZyb20gXCJqc3ppcFwiO1xuaW1wb3J0IHsgUHJvdmlkZXJBZGFwdGVyIH0gZnJvbSBcIi4uL3Byb3ZpZGVyLWFkYXB0ZXJcIjtcbmltcG9ydCB7IFN0YW5kYXJkQ29udmVyc2F0aW9uLCBTdGFuZGFyZE1lc3NhZ2UgfSBmcm9tIFwiLi4vLi4vdHlwZXMvc3RhbmRhcmRcIjtcbmltcG9ydCB7IENoYXRHUFRDb252ZXJ0ZXIgfSBmcm9tIFwiLi9jaGF0Z3B0LWNvbnZlcnRlclwiO1xuaW1wb3J0IHsgQ2hhdEdQVEF0dGFjaG1lbnRFeHRyYWN0b3IgfSBmcm9tIFwiLi9jaGF0Z3B0LWF0dGFjaG1lbnQtZXh0cmFjdG9yXCI7XG5pbXBvcnQgeyBDaGF0R1BUUmVwb3J0TmFtaW5nU3RyYXRlZ3kgfSBmcm9tIFwiLi9jaGF0Z3B0LXJlcG9ydC1uYW1pbmdcIjtcbmltcG9ydCB7IENoYXRHUFREYWxsZVByb2Nlc3NvciB9IGZyb20gXCIuL2NoYXRncHQtZGFsbGUtcHJvY2Vzc29yXCI7XG5pbXBvcnQgeyBDaGF0R1BUTWVzc2FnZUZpbHRlciB9IGZyb20gXCIuL2NoYXRncHQtbWVzc2FnZS1maWx0ZXJcIjtcbmltcG9ydCB7IENoYXQsIENoYXRNZXNzYWdlIH0gZnJvbSBcIi4vY2hhdGdwdC10eXBlc1wiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vLi4vbWFpblwiO1xuXG5leHBvcnQgY2xhc3MgQ2hhdEdQVEFkYXB0ZXIgaW1wbGVtZW50cyBQcm92aWRlckFkYXB0ZXI8Q2hhdD4ge1xuICAgIHByaXZhdGUgYXR0YWNobWVudEV4dHJhY3RvcjogQ2hhdEdQVEF0dGFjaG1lbnRFeHRyYWN0b3I7XG4gICAgcHJpdmF0ZSByZXBvcnROYW1pbmdTdHJhdGVneTogQ2hhdEdQVFJlcG9ydE5hbWluZ1N0cmF0ZWd5O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5hdHRhY2htZW50RXh0cmFjdG9yID0gbmV3IENoYXRHUFRBdHRhY2htZW50RXh0cmFjdG9yKHBsdWdpbiwgcGx1Z2luLmxvZ2dlcik7XG4gICAgICAgIHRoaXMucmVwb3J0TmFtaW5nU3RyYXRlZ3kgPSBuZXcgQ2hhdEdQVFJlcG9ydE5hbWluZ1N0cmF0ZWd5KCk7XG4gICAgfVxuXG4gICAgZGV0ZWN0KHJhd0NvbnZlcnNhdGlvbnM6IGFueVtdKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChyYXdDb252ZXJzYXRpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2FtcGxlID0gcmF3Q29udmVyc2F0aW9uc1swXTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoYXRHUFQgZGV0ZWN0aW9uOiBoYXMgbWFwcGluZyBwcm9wZXJ0eSBhbmQgdHlwaWNhbCBzdHJ1Y3R1cmVcbiAgICAgICAgcmV0dXJuICEhKHNhbXBsZS5tYXBwaW5nICYmIHNhbXBsZS5jcmVhdGVfdGltZSAmJiBzYW1wbGUudXBkYXRlX3RpbWUgJiYgc2FtcGxlLnRpdGxlKTtcbiAgICB9XG5cbiAgICBnZXRJZChjaGF0OiBDaGF0KTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGNoYXQuaWQgfHwgXCJcIjtcbiAgICB9XG5cbiAgICBnZXRUaXRsZShjaGF0OiBDaGF0KTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGNoYXQudGl0bGUgfHwgXCJVbnRpdGxlZFwiO1xuICAgIH1cblxuICAgIGdldENyZWF0ZVRpbWUoY2hhdDogQ2hhdCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBjaGF0LmNyZWF0ZV90aW1lIHx8IDA7XG4gICAgfVxuXG4gICAgZ2V0VXBkYXRlVGltZShjaGF0OiBDaGF0KTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGNoYXQudXBkYXRlX3RpbWUgfHwgMDtcbiAgICB9XG5cbiAgICBjb252ZXJ0Q2hhdChjaGF0OiBDaGF0KTogU3RhbmRhcmRDb252ZXJzYXRpb24ge1xuICAgICAgICByZXR1cm4gQ2hhdEdQVENvbnZlcnRlci5jb252ZXJ0Q2hhdChjaGF0KTtcbiAgICB9XG5cblxuXG4gICAgZ2V0UHJvdmlkZXJOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcImNoYXRncHRcIjtcbiAgICB9XG5cbiAgICBnZXROZXdNZXNzYWdlcyhjaGF0OiBDaGF0LCBleGlzdGluZ01lc3NhZ2VJZHM6IHN0cmluZ1tdKTogQ2hhdE1lc3NhZ2VbXSB7XG4gICAgICAgIGNvbnN0IG5ld01lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdID0gW107XG5cbiAgICAgICAgLy8gRXh0cmFjdCBEQUxMLUUgcHJvbXB0cyB1c2luZyBjZW50cmFsaXplZCBwcm9jZXNzb3IgKHdpdGggb3JwaGFuZWQgcHJvbXB0cyBzdXBwb3J0KVxuICAgICAgICBjb25zdCB7IGltYWdlUHJvbXB0cywgb3JwaGFuZWRQcm9tcHRzIH0gPSBDaGF0R1BURGFsbGVQcm9jZXNzb3IuZXh0cmFjdERhbGxlUHJvbXB0c0Zyb21NYXBwaW5nKGNoYXQpO1xuXG4gICAgICAgIGZvciAoY29uc3QgbWVzc2FnZU9iaiBvZiBPYmplY3QudmFsdWVzKGNoYXQubWFwcGluZykpIHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlT2JqPy5pZCAmJiAhZXhpc3RpbmdNZXNzYWdlSWRzLmluY2x1ZGVzKG1lc3NhZ2VPYmouaWQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IG1lc3NhZ2VPYmoubWVzc2FnZTtcbiAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2UpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIERBTEwtRSB0b29sIG1lc3NhZ2VzIHdpdGggaW1hZ2VzIHVzaW5nIHByb2Nlc3NvclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmF1dGhvcj8ucm9sZSA9PT0gXCJ0b29sXCIgJiYgQ2hhdEdQVERhbGxlUHJvY2Vzc29yLmhhc1JlYWxEYWxsZUltYWdlKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb21wdERhdGEgPSBpbWFnZVByb21wdHMuZ2V0KG1lc3NhZ2VPYmouaWQgfHwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhbGxlTWVzc2FnZSA9IENoYXRHUFREYWxsZVByb2Nlc3Nvci5jcmVhdGVEYWxsZUFzc2lzdGFudE1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0RGF0YT8ucHJvbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0RGF0YT8udGltZXN0YW1wXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYWxsZU1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgU3RhbmRhcmRNZXNzYWdlIGJhY2sgdG8gQ2hhdE1lc3NhZ2UgZm9yIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXRNZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZGFsbGVNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcjogeyByb2xlOiBkYWxsZU1lc3NhZ2Uucm9sZSBhcyBhbnkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7IHBhcnRzOiBbZGFsbGVNZXNzYWdlLmNvbnRlbnRdIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlX3RpbWU6IGRhbGxlTWVzc2FnZS50aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudHM6IGRhbGxlTWVzc2FnZS5hdHRhY2htZW50cz8ubWFwKGF0dCA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlX25hbWU6IGF0dC5maWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9zaXplOiBhdHQuZmlsZVNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVfdHlwZTogYXR0LmZpbGVUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWRfY29udGVudDogYXR0LmV4dHJhY3RlZENvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdNZXNzYWdlcy5wdXNoKGNoYXRNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgb3JwaGFuZWQgREFMTC1FIHByb21wdHMgKG5vIGltYWdlIGZvdW5kKVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9ycGhhbmVkUHJvbXB0cy5oYXMobWVzc2FnZU9iai5pZCB8fCBcIlwiKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHQgPSBvcnBoYW5lZFByb21wdHMuZ2V0KG1lc3NhZ2VPYmouaWQgfHwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9tcHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9ycGhhbmVkTWVzc2FnZSA9IENoYXRHUFREYWxsZVByb2Nlc3Nvci5jcmVhdGVPcnBoYW5lZFByb21wdE1lc3NhZ2UobWVzc2FnZSwgcHJvbXB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXRNZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogb3JwaGFuZWRNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcjogeyByb2xlOiBvcnBoYW5lZE1lc3NhZ2Uucm9sZSBhcyBhbnkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7IHBhcnRzOiBbb3JwaGFuZWRNZXNzYWdlLmNvbnRlbnRdIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlX3RpbWU6IG9ycGhhbmVkTWVzc2FnZS50aW1lc3RhbXBcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdNZXNzYWdlcy5wdXNoKGNoYXRNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBSZWd1bGFyIHVzZXIvYXNzaXN0YW50IG1lc3NhZ2VzIHdpdGggZW5oYW5jZWQgZmlsdGVyaW5nXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoQ2hhdEdQVE1lc3NhZ2VGaWx0ZXIuc2hvdWxkSW5jbHVkZU1lc3NhZ2UobWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3TWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3TWVzc2FnZXM7XG4gICAgfVxuXG4gICAgYXN5bmMgcHJvY2Vzc01lc3NhZ2VBdHRhY2htZW50cyhcbiAgICAgICAgbWVzc2FnZXM6IFN0YW5kYXJkTWVzc2FnZVtdLFxuICAgICAgICBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxuICAgICAgICB6aXA6IEpTWmlwXG4gICAgKTogUHJvbWlzZTxTdGFuZGFyZE1lc3NhZ2VbXT4ge1xuICAgICAgICBjb25zdCBwcm9jZXNzZWRNZXNzYWdlczogU3RhbmRhcmRNZXNzYWdlW10gPSBbXTtcblxuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmF0dGFjaG1lbnRzICYmIG1lc3NhZ2UuYXR0YWNobWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZEF0dGFjaG1lbnRzID0gYXdhaXQgdGhpcy5hdHRhY2htZW50RXh0cmFjdG9yLmV4dHJhY3RBdHRhY2htZW50cyhcbiAgICAgICAgICAgICAgICAgICAgemlwLFxuICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hdHRhY2htZW50cyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pZCAvLyBQYXNzIG1lc3NhZ2UgSUQgZm9yIGJldHRlciBsb2dnaW5nXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZE1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAuLi5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50czogcHJvY2Vzc2VkQXR0YWNobWVudHNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkTWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwcm9jZXNzZWRNZXNzYWdlcztcbiAgICB9XG5cbiAgICBnZXRSZXBvcnROYW1pbmdTdHJhdGVneSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwb3J0TmFtaW5nU3RyYXRlZ3k7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGF0dGFjaG1lbnQgbWFwIGZvciBtdWx0aS1aSVAgc3VwcG9ydFxuICAgICAqL1xuICAgIHNldEF0dGFjaG1lbnRNYXAoYXR0YWNobWVudE1hcDogYW55LCBhbGxaaXBzOiBhbnlbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLmF0dGFjaG1lbnRFeHRyYWN0b3Iuc2V0QXR0YWNobWVudE1hcChhdHRhY2htZW50TWFwLCBhbGxaaXBzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGVhciBhdHRhY2htZW50IG1hcCBhZnRlciBpbXBvcnQgY29tcGxldGVzXG4gICAgICovXG4gICAgY2xlYXJBdHRhY2htZW50TWFwKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmF0dGFjaG1lbnRFeHRyYWN0b3IuY2xlYXJBdHRhY2htZW50TWFwKCk7XG4gICAgfVxufVxuIiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy9wcm92aWRlcnMvY2xhdWRlL2NsYXVkZS1jb252ZXJ0ZXIudHNcbmltcG9ydCB7IFN0YW5kYXJkQ29udmVyc2F0aW9uLCBTdGFuZGFyZE1lc3NhZ2UsIFN0YW5kYXJkQXR0YWNobWVudCB9IGZyb20gXCIuLi8uLi90eXBlcy9zdGFuZGFyZFwiO1xuaW1wb3J0IHsgQ2xhdWRlQ29udmVyc2F0aW9uLCBDbGF1ZGVNZXNzYWdlLCBDbGF1ZGVDb250ZW50QmxvY2sgfSBmcm9tIFwiLi9jbGF1ZGUtdHlwZXNcIjtcbmltcG9ydCB7IGdlbmVyYXRlU2FmZUFsaWFzIH0gZnJvbSBcIi4uLy4uL3V0aWxzXCI7XG5pbXBvcnQgdHlwZSBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luIGZyb20gXCIuLi8uLi9tYWluXCI7XG5cbmV4cG9ydCBjbGFzcyBDbGF1ZGVDb252ZXJ0ZXIge1xuICAgIHByaXZhdGUgc3RhdGljIHBsdWdpbjogTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbjtcblxuICAgIC8vIE5leHVzIGN1c3RvbSBjYWxsb3V0cyB3aXRoIGljb25zXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQ0FMTE9VVFMgPSB7XG4gICAgICAgIFVTRVI6ICduZXh1c191c2VyJywgICAgICAvLyBcdUQ4M0RcdURDNjQgVXNlciBtZXNzYWdlc1xuICAgICAgICBBR0VOVDogJ25leHVzX2FnZW50JywgICAgLy8gXHVEODNFXHVERDE2IEFzc2lzdGFudC9BZ2VudCBtZXNzYWdlc1xuICAgICAgICBBVFRBQ0hNRU5UOiAnbmV4dXNfYXR0YWNobWVudCcsIC8vIFx1RDgzRFx1RENDRSBBdHRhY2htZW50c1xuICAgICAgICBBUlRJRkFDVDogJ25leHVzX2FydGlmYWN0JywgICAgIC8vIFx1RDgzRFx1REVFMFx1RkUwRiBDbGF1ZGUgYXJ0aWZhY3RzXG4gICAgICAgIFBST01QVDogJ25leHVzX3Byb21wdCcgICAgICAgICAgLy8gXHVEODNEXHVEQ0FEIFN5c3RlbSBwcm9tcHRzXG4gICAgfTtcblxuICAgIHN0YXRpYyBzZXRQbHVnaW4ocGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIHN0YXRpYyBhc3luYyBjb252ZXJ0Q2hhdChjaGF0OiBDbGF1ZGVDb252ZXJzYXRpb24pOiBQcm9taXNlPFN0YW5kYXJkQ29udmVyc2F0aW9uPiB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVRpbWUgPSBjaGF0LmNyZWF0ZWRfYXQgPyBNYXRoLmZsb29yKG5ldyBEYXRlKGNoYXQuY3JlYXRlZF9hdCkuZ2V0VGltZSgpIC8gMTAwMCkgOiAwO1xuICAgICAgICAvLyBOb3JtYWxpemUgdGl0bGUgdG8gXCJVbnRpdGxlZFwiIGlmIG1pc3NpbmcgKGZpeCBmb3IgYXJ0aWZhY3QgY29udmVyc2F0aW9uIGxpbmtzKVxuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25UaXRsZSA9IGNoYXQubmFtZSB8fCBcIlVudGl0bGVkXCI7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgdGhpcy5jb252ZXJ0TWVzc2FnZXMoY2hhdC5jaGF0X21lc3NhZ2VzLCBjaGF0LnV1aWQsIGNvbnZlcnNhdGlvblRpdGxlLCBjcmVhdGVUaW1lKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IGNoYXQudXVpZCxcbiAgICAgICAgICAgIHRpdGxlOiBjb252ZXJzYXRpb25UaXRsZSxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IGNoYXQuY3JlYXRlZF9hdCA/IE1hdGguZmxvb3IobmV3IERhdGUoY2hhdC5jcmVhdGVkX2F0KS5nZXRUaW1lKCkgLyAxMDAwKSA6IDAsXG4gICAgICAgICAgICB1cGRhdGVUaW1lOiBjaGF0LnVwZGF0ZWRfYXQgPyBNYXRoLmZsb29yKG5ldyBEYXRlKGNoYXQudXBkYXRlZF9hdCkuZ2V0VGltZSgpIC8gMTAwMCkgOiAwLFxuICAgICAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzLFxuICAgICAgICAgICAgcHJvdmlkZXI6IFwiY2xhdWRlXCIsXG4gICAgICAgICAgICBjaGF0VXJsOiBgaHR0cHM6Ly9jbGF1ZGUuYWkvY2hhdC8ke2NoYXQudXVpZH1gLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogY2hhdC5tb2RlbCB8fCBcImNsYXVkZS0zXCIsXG4gICAgICAgICAgICAgICAgc3VtbWFyeTogY2hhdC5zdW1tYXJ5IHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgaXNfc3RhcnJlZDogY2hhdC5pc19zdGFycmVkLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRfbGVhZl9tZXNzYWdlX3V1aWQ6IGNoYXQuY3VycmVudF9sZWFmX21lc3NhZ2VfdXVpZCxcbiAgICAgICAgICAgICAgICBwcm9qZWN0X3V1aWQ6IGNoYXQucHJvamVjdF91dWlkXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIGFzeW5jIGNvbnZlcnRNZXNzYWdlcyhtZXNzYWdlczogQ2xhdWRlTWVzc2FnZVtdLCBjb252ZXJzYXRpb25JZD86IHN0cmluZywgY29udmVyc2F0aW9uVGl0bGU/OiBzdHJpbmcsIGNvbnZlcnNhdGlvbkNyZWF0ZVRpbWU/OiBudW1iZXIpOiBQcm9taXNlPFN0YW5kYXJkTWVzc2FnZVtdPiB7XG4gICAgICAgIGNvbnN0IHN0YW5kYXJkTWVzc2FnZXM6IFN0YW5kYXJkTWVzc2FnZVtdID0gW107XG5cbiAgICAgICAgaWYgKCFtZXNzYWdlcyB8fCBtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBzdGFuZGFyZE1lc3NhZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUEhBU0UgMTogQ29sbGVjdCBBTEwgYXJ0aWZhY3RzIGZyb20gZW50aXJlIGNvbnZlcnNhdGlvbiB3aXRoIG1lc3NhZ2UgdGltZXN0YW1wc1xuICAgICAgICBjb25zdCBhbGxBcnRpZmFjdHM6IEFycmF5PHthcnRpZmFjdDogYW55LCBtZXNzYWdlSW5kZXg6IG51bWJlciwgYmxvY2tJbmRleDogbnVtYmVyLCBtZXNzYWdlVGltZXN0YW1wOiBudW1iZXJ9PiA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IG1zZ0luZGV4ID0gMDsgbXNnSW5kZXggPCBtZXNzYWdlcy5sZW5ndGg7IG1zZ0luZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBtZXNzYWdlc1ttc2dJbmRleF07XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYmxvY2tJbmRleCA9IDA7IGJsb2NrSW5kZXggPCBtZXNzYWdlLmNvbnRlbnQubGVuZ3RoOyBibG9ja0luZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2sgPSBtZXNzYWdlLmNvbnRlbnRbYmxvY2tJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9jay50eXBlID09PSAndG9vbF91c2UnICYmIGJsb2NrLm5hbWUgPT09ICdhcnRpZmFjdHMnICYmIGJsb2NrLmlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tYW5kID0gYmxvY2suaW5wdXQuY29tbWFuZCB8fCAnY3JlYXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNpb25VdWlkID0gYmxvY2suaW5wdXQudmVyc2lvbl91dWlkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIHZpZXcgY29tbWFuZHMgb25seVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQgIT09ICd2aWV3JyAmJiB2ZXJzaW9uVXVpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCBtZXNzYWdlIHRpbWVzdGFtcCAoY29udmVydCBJU08gc3RyaW5nIHRvIFVuaXggdGltZXN0YW1wKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VUaW1lc3RhbXAgPSBtZXNzYWdlLmNyZWF0ZWRfYXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBNYXRoLmZsb29yKG5ldyBEYXRlKG1lc3NhZ2UuY3JlYXRlZF9hdCkuZ2V0VGltZSgpIC8gMTAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsQXJ0aWZhY3RzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnRpZmFjdDogYmxvY2suaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJbmRleDogbXNnSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrSW5kZXg6IGJsb2NrSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VUaW1lc3RhbXA6IG1lc3NhZ2VUaW1lc3RhbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBIQVNFIDI6IFByb2Nlc3MgQUxMIGFydGlmYWN0cyBhbmQgY3JlYXRlIGZpbGVzXG4gICAgICAgIGNvbnN0IGFydGlmYWN0VmVyc2lvbk1hcCA9IGF3YWl0IHRoaXMucHJvY2Vzc0FsbEFydGlmYWN0cyhhbGxBcnRpZmFjdHMsIGNvbnZlcnNhdGlvbklkLCBjb252ZXJzYXRpb25UaXRsZSwgY29udmVyc2F0aW9uQ3JlYXRlVGltZSk7XG5cbiAgICAgICAgLy8gUEhBU0UgMzogUHJvY2VzcyBtZXNzYWdlcyBhbmQgcmVwbGFjZSBhcnRpZmFjdHMgd2l0aCBsaW5rc1xuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zaG91bGRJbmNsdWRlTWVzc2FnZShtZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGNvbnRlbnQgYmxvY2tzIHRvIGNyZWF0ZSBtZXNzYWdlIHRleHQgYW5kIGF0dGFjaG1lbnRzXG4gICAgICAgICAgICBjb25zdCB7IHRleHQsIGF0dGFjaG1lbnRzIH0gPSBhd2FpdCB0aGlzLnByb2Nlc3NDb250ZW50QmxvY2tzRm9yRGlzcGxheShcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgYXJ0aWZhY3RWZXJzaW9uTWFwLFxuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvblRpdGxlLFxuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbkNyZWF0ZVRpbWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFkZCBmaWxlIGF0dGFjaG1lbnRzXG4gICAgICAgICAgICBjb25zdCBmaWxlQXR0YWNobWVudHMgPSB0aGlzLnByb2Nlc3NGaWxlQXR0YWNobWVudHMobWVzc2FnZS5maWxlcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHN0YW5kYXJkTWVzc2FnZTogU3RhbmRhcmRNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIGlkOiBtZXNzYWdlLnV1aWQsXG4gICAgICAgICAgICAgICAgcm9sZTogbWVzc2FnZS5zZW5kZXIgPT09ICdodW1hbicgPyAndXNlcicgOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0ZXh0IHx8IG1lc3NhZ2UudGV4dCB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogTWF0aC5mbG9vcihuZXcgRGF0ZShtZXNzYWdlLmNyZWF0ZWRfYXQpLmdldFRpbWUoKSAvIDEwMDApLFxuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRzOiBbLi4uYXR0YWNobWVudHMsIC4uLmZpbGVBdHRhY2htZW50c11cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHN0YW5kYXJkTWVzc2FnZXMucHVzaChzdGFuZGFyZE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU29ydCBtZXNzYWdlcyBieSB0aW1lc3RhbXAgdG8gbWFpbnRhaW4gY2hyb25vbG9naWNhbCBvcmRlclxuICAgICAgICByZXR1cm4gdGhpcy5zb3J0TWVzc2FnZXNCeVRpbWVzdGFtcChzdGFuZGFyZE1lc3NhZ2VzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBzaG91bGRJbmNsdWRlTWVzc2FnZShtZXNzYWdlOiBDbGF1ZGVNZXNzYWdlKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIEluY2x1ZGUgYWxsIGh1bWFuIGFuZCBhc3Npc3RhbnQgbWVzc2FnZXNcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VuZGVyID09PSAnaHVtYW4nIHx8IG1lc3NhZ2Uuc2VuZGVyID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgLy8gU2tpcCBlbXB0eSBtZXNzYWdlc1xuICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnRleHQgJiYgKCFtZXNzYWdlLmNvbnRlbnQgfHwgbWVzc2FnZS5jb250ZW50Lmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNvcnQgbWVzc2FnZXMgYnkgdGltZXN0YW1wIHdpdGggVVVJRCBhcyBzZWNvbmRhcnkgc29ydCBmb3IgY2hyb25vbG9naWNhbCBvcmRlclxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIHNvcnRNZXNzYWdlc0J5VGltZXN0YW1wKG1lc3NhZ2VzOiBTdGFuZGFyZE1lc3NhZ2VbXSk6IFN0YW5kYXJkTWVzc2FnZVtdIHtcbiAgICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA8PSAxKSByZXR1cm4gbWVzc2FnZXM7XG5cbiAgICAgICAgLy8gVXNlIG5hdGl2ZSBzb3J0IHdpdGggcHJvcGVyIGNvbXBhcmlzb24gZnVuY3Rpb25cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIC8vIFByaW1hcnkgc29ydDogdGltZXN0YW1wXG4gICAgICAgICAgICBpZiAoYS50aW1lc3RhbXAgIT09IGIudGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEudGltZXN0YW1wIC0gYi50aW1lc3RhbXA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNlY29uZGFyeSBzb3J0OiBVVUlEIChsZXhpY29ncmFwaGljIG9yZGVyIGZvciBzYW1lIHRpbWVzdGFtcClcbiAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IG9yZGVyaW5nIHdoZW4gbWVzc2FnZXMgaGF2ZSBpZGVudGljYWwgdGltZXN0YW1wc1xuICAgICAgICAgICAgcmV0dXJuIGEuaWQubG9jYWxlQ29tcGFyZShiLmlkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2VzcyBBTEwgYXJ0aWZhY3RzIGZyb20gZW50aXJlIGNvbnZlcnNhdGlvbiBhbmQgY3JlYXRlIGZpbGVzXG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgcHJvY2Vzc0FsbEFydGlmYWN0cyhcbiAgICAgICAgYWxsQXJ0aWZhY3RzOiBBcnJheTx7YXJ0aWZhY3Q6IGFueSwgbWVzc2FnZUluZGV4OiBudW1iZXIsIGJsb2NrSW5kZXg6IG51bWJlciwgbWVzc2FnZVRpbWVzdGFtcDogbnVtYmVyfT4sXG4gICAgICAgIGNvbnZlcnNhdGlvbklkPzogc3RyaW5nLFxuICAgICAgICBjb252ZXJzYXRpb25UaXRsZT86IHN0cmluZyxcbiAgICAgICAgY29udmVyc2F0aW9uQ3JlYXRlVGltZT86IG51bWJlclxuICAgICk6IFByb21pc2U8TWFwPHN0cmluZywge3ZlcnNpb25OdW1iZXI6IG51bWJlciwgdGl0bGU6IHN0cmluZ30+PiB7XG5cbiAgICAgICAgY29uc3QgYXJ0aWZhY3RWZXJzaW9uTWFwID0gbmV3IE1hcDxzdHJpbmcsIHt2ZXJzaW9uTnVtYmVyOiBudW1iZXIsIHRpdGxlOiBzdHJpbmd9PigpO1xuICAgICAgICBjb25zdCB2ZXJzaW9uQ291bnRlcnMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICAgICAgICBjb25zdCBhcnRpZmFjdENvbnRlbnRzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcbiAgICAgICAgY29uc3QgYXJ0aWZhY3RMYW5ndWFnZXMgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpOyAvLyBUcmFjayBsYW5ndWFnZSBwZXIgYXJ0aWZhY3QgSURcblxuICAgICAgICBmb3IgKGNvbnN0IHthcnRpZmFjdCwgbWVzc2FnZVRpbWVzdGFtcH0gb2YgYWxsQXJ0aWZhY3RzKSB7XG4gICAgICAgICAgICBjb25zdCBhcnRpZmFjdElkID0gYXJ0aWZhY3QuaWQgfHwgJ3Vua25vd24nO1xuICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IGFydGlmYWN0LmNvbW1hbmQgfHwgJ2NyZWF0ZSc7XG5cbiAgICAgICAgICAgIC8vIEluY3JlbWVudCB2ZXJzaW9uIG51bWJlciBmb3IgdGhpcyBhcnRpZmFjdCBJRFxuICAgICAgICAgICAgY29uc3QgY3VycmVudFZlcnNpb24gPSAodmVyc2lvbkNvdW50ZXJzLmdldChhcnRpZmFjdElkKSB8fCAwKSArIDE7XG4gICAgICAgICAgICB2ZXJzaW9uQ291bnRlcnMuc2V0KGFydGlmYWN0SWQsIGN1cnJlbnRWZXJzaW9uKTtcblxuICAgICAgICAgICAgbGV0IGZpbmFsQ29udGVudCA9ICcnO1xuXG4gICAgICAgICAgICBpZiAoY29tbWFuZCA9PT0gJ2NyZWF0ZScgfHwgY29tbWFuZCA9PT0gJ3Jld3JpdGUnKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29tcGxldGUgY29udGVudCBwcm92aWRlZCAtIFJFU0VUIGN1bXVsYXRpdmUgY29udGVudFxuICAgICAgICAgICAgICAgIGZpbmFsQ29udGVudCA9IGFydGlmYWN0LmNvbnRlbnQgfHwgJyc7XG4gICAgICAgICAgICAgICAgYXJ0aWZhY3RDb250ZW50cy5zZXQoYXJ0aWZhY3RJZCwgZmluYWxDb250ZW50KTtcblxuICAgICAgICAgICAgICAgIC8vIEZvciBjcmVhdGUvcmV3cml0ZTogZGV0ZWN0IGFuZCBzdG9yZSB0aGUgbGFuZ3VhZ2VcbiAgICAgICAgICAgICAgICBjb25zdCBkZXRlY3RlZExhbmd1YWdlID0gdGhpcy5kZXRlY3RMYW5ndWFnZUZyb21Db250ZW50KGZpbmFsQ29udGVudCwgYXJ0aWZhY3QudHlwZSk7XG4gICAgICAgICAgICAgICAgYXJ0aWZhY3RMYW5ndWFnZXMuc2V0KGFydGlmYWN0SWQsIGRldGVjdGVkTGFuZ3VhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kID09PSAndXBkYXRlJykge1xuICAgICAgICAgICAgICAgIC8vIEFwcGx5IHVwZGF0ZSB0byBQUkVWSU9VUyBjb250ZW50XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNDb250ZW50ID0gYXJ0aWZhY3RDb250ZW50cy5nZXQoYXJ0aWZhY3RJZCkgfHwgJyc7XG5cbiAgICAgICAgICAgICAgICBpZiAoYXJ0aWZhY3Qub2xkX3N0ciAmJiBhcnRpZmFjdC5uZXdfc3RyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNlZC1saWtlIHJlcGxhY2VtZW50IG9uIHByZXZpb3VzIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDb250ZW50ID0gcHJldmlvdXNDb250ZW50LnJlcGxhY2UoYXJ0aWZhY3Qub2xkX3N0ciwgYXJ0aWZhY3QubmV3X3N0cik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcnRpZmFjdC5jb250ZW50ICYmIGFydGlmYWN0LmNvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb21wbGV0ZSB1cGRhdGVkIGNvbnRlbnQgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDb250ZW50ID0gYXJ0aWZhY3QuY29udGVudDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBFbXB0eSB1cGRhdGUgLSBrZWVwIHByZXZpb3VzIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDb250ZW50ID0gcHJldmlvdXNDb250ZW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjdW11bGF0aXZlIGNvbnRlbnQgZm9yIG5leHQgdmVyc2lvblxuICAgICAgICAgICAgICAgIGFydGlmYWN0Q29udGVudHMuc2V0KGFydGlmYWN0SWQsIGZpbmFsQ29udGVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IHN0b3JlZCBsYW5ndWFnZSAoZnJvbSBjcmVhdGUvcmV3cml0ZSkgb3IgZGV0ZWN0IGZvciB0aGlzIHZlcnNpb25cbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZWRMYW5ndWFnZSA9IGFydGlmYWN0TGFuZ3VhZ2VzLmdldChhcnRpZmFjdElkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYW5ndWFnZVRvVXNlID0gc3RvcmVkTGFuZ3VhZ2UgfHwgdGhpcy5kZXRlY3RMYW5ndWFnZUZyb21Db250ZW50KGZpbmFsQ29udGVudCwgYXJ0aWZhY3QudHlwZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBTYXZlIHRoaXMgc3BlY2lmaWMgdmVyc2lvbiB3aXRoIG1lc3NhZ2UgdGltZXN0YW1wXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2luZ2xlQXJ0aWZhY3RWZXJzaW9uV2l0aENvbnRlbnQoXG4gICAgICAgICAgICAgICAgICAgIGFydGlmYWN0SWQsXG4gICAgICAgICAgICAgICAgICAgIGFydGlmYWN0LFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uVGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbkNyZWF0ZVRpbWUsXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlVG9Vc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VUaW1lc3RhbXBcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJhY2sgdmVyc2lvbiBpbmZvIGZvciBsaW5raW5nXG4gICAgICAgICAgICAgICAgYXJ0aWZhY3RWZXJzaW9uTWFwLnNldChhcnRpZmFjdC52ZXJzaW9uX3V1aWQsIHtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbk51bWJlcjogY3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBhcnRpZmFjdC50aXRsZSB8fCBhcnRpZmFjdElkXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBGYWlsZWQgdG8gc2F2ZSAke2FydGlmYWN0SWR9IHYke2N1cnJlbnRWZXJzaW9ufTpgLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXJ0aWZhY3RWZXJzaW9uTWFwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgY29udGVudCBibG9ja3MgZm9yIGRpc3BsYXkgKHdpdGggYXJ0aWZhY3QgbGlua3MpXG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgcHJvY2Vzc0NvbnRlbnRCbG9ja3NGb3JEaXNwbGF5KFxuICAgICAgICBjb250ZW50QmxvY2tzOiBDbGF1ZGVDb250ZW50QmxvY2tbXSxcbiAgICAgICAgYXJ0aWZhY3RWZXJzaW9uTWFwOiBNYXA8c3RyaW5nLCB7dmVyc2lvbk51bWJlcjogbnVtYmVyLCB0aXRsZTogc3RyaW5nfT4sXG4gICAgICAgIGNvbnZlcnNhdGlvbklkPzogc3RyaW5nLFxuICAgICAgICBjb252ZXJzYXRpb25UaXRsZT86IHN0cmluZyxcbiAgICAgICAgY29udmVyc2F0aW9uQ3JlYXRlVGltZT86IG51bWJlclxuICAgICk6IFByb21pc2U8eyB0ZXh0OiBzdHJpbmc7IGF0dGFjaG1lbnRzOiBTdGFuZGFyZEF0dGFjaG1lbnRbXSB9PiB7XG4gICAgICAgIGNvbnN0IHRleHRQYXJ0czogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3QgYXR0YWNobWVudHM6IFN0YW5kYXJkQXR0YWNobWVudFtdID0gW107XG5cbiAgICAgICAgLy8gSGFuZGxlIGVtcHR5IG9yIG51bGwgY29udGVudCBibG9ja3NcbiAgICAgICAgaWYgKCFjb250ZW50QmxvY2tzIHx8IGNvbnRlbnRCbG9ja3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4geyB0ZXh0OiBcIlwiLCBhdHRhY2htZW50czogW10gfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByb2Nlc3MgY29udGVudCBibG9ja3MgZm9yIGRpc3BsYXlcbiAgICAgICAgZm9yIChjb25zdCBibG9jayBvZiBjb250ZW50QmxvY2tzKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGJsb2NrLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrLnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRQYXJ0cy5wdXNoKGJsb2NrLnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAndGhpbmtpbmcnOlxuICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IHRoaW5raW5nIGJsb2NrcyAtIG5vdCB1c2VmdWwgZm9yIHVzZXJzXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAndG9vbF91c2UnOlxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgc3BlY2lmaWMgYXJ0aWZhY3QgbGlua3NcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrLm5hbWUgPT09ICdhcnRpZmFjdHMnICYmIGJsb2NrLmlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tYW5kID0gYmxvY2suaW5wdXQuY29tbWFuZCB8fCAnY3JlYXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNpb25VdWlkID0gYmxvY2suaW5wdXQudmVyc2lvbl91dWlkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIHZpZXcgY29tbWFuZHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21tYW5kID09PSAndmlldycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlcnNpb25VdWlkICYmIGFydGlmYWN0VmVyc2lvbk1hcC5oYXModmVyc2lvblV1aWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVyc2lvbkluZm8gPSBhcnRpZmFjdFZlcnNpb25NYXAuZ2V0KHZlcnNpb25VdWlkKSE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJ0aWZhY3RJZCA9IGJsb2NrLmlucHV0LmlkIHx8ICd1bmtub3duJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25Gb2xkZXIgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdHRhY2htZW50Rm9sZGVyfS9jbGF1ZGUvYXJ0aWZhY3RzLyR7Y29udmVyc2F0aW9uSWR9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uRmlsZSA9IGAke2NvbnZlcnNhdGlvbkZvbGRlcn0vJHthcnRpZmFjdElkfV92JHt2ZXJzaW9uSW5mby52ZXJzaW9uTnVtYmVyfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlY2lmaWNMaW5rID0gYD5bISR7dGhpcy5DQUxMT1VUUy5BUlRJRkFDVH1dICoqJHt2ZXJzaW9uSW5mby50aXRsZX0qKiB2JHt2ZXJzaW9uSW5mby52ZXJzaW9uTnVtYmVyfVxcbj4gXHVEODNDXHVERkE4IFtbJHt2ZXJzaW9uRmlsZX18VmlldyBBcnRpZmFjdF1dYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0UGFydHMucHVzaChzcGVjaWZpY0xpbmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm5hbWUgPT09ICd3ZWJfc2VhcmNoJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCB3ZWJfc2VhcmNoIHRvb2xzIC0gbm90IHVzZWZ1bCBmb3IgdXNlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm5hbWUgJiYgYmxvY2suaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyIHRvb2xzIChrZWVwIGZvciBub3csIGNhbiBiZSBmaWx0ZXJlZCBsYXRlciBpZiBuZWVkZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2RlID0gYmxvY2suaW5wdXQuY29kZSB8fCBKU09OLnN0cmluZ2lmeShibG9jay5pbnB1dCwgbnVsbCwgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0UGFydHMucHVzaChgKipbVG9vbDogJHtibG9jay5uYW1lfV0qKlxcblxcYFxcYFxcYFxcbiR7Y29kZX1cXG5cXGBcXGBcXGBgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3Rvb2xfcmVzdWx0JzpcbiAgICAgICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBhbGwgdG9vbCByZXN1bHRzIC0gbm90IHVzZWZ1bCBmb3IgdXNlcnNcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGV4dDogdGV4dFBhcnRzLmpvaW4oJ1xcblxcbicpLFxuICAgICAgICAgICAgYXR0YWNobWVudHM6IGF0dGFjaG1lbnRzXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgcHJvY2Vzc0NvbnRlbnRCbG9ja3MoXG4gICAgICAgIGNvbnRlbnRCbG9ja3M6IENsYXVkZUNvbnRlbnRCbG9ja1tdLFxuICAgICAgICBjb252ZXJzYXRpb25JZD86IHN0cmluZyxcbiAgICAgICAgY29udmVyc2F0aW9uVGl0bGU/OiBzdHJpbmcsXG4gICAgICAgIGNvbnZlcnNhdGlvbkNyZWF0ZVRpbWU/OiBudW1iZXIsXG4gICAgICAgIHZlcnNpb25Db3VudGVycz86IE1hcDxzdHJpbmcsIG51bWJlcj4sXG4gICAgICAgIGFydGlmYWN0U3VtbWFyaWVzPzogTWFwPHN0cmluZywgYW55PlxuICAgICk6IFByb21pc2U8eyB0ZXh0OiBzdHJpbmc7IGF0dGFjaG1lbnRzOiBTdGFuZGFyZEF0dGFjaG1lbnRbXSB9PiB7XG4gICAgICAgIGNvbnN0IHRleHRQYXJ0czogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3QgYXR0YWNobWVudHM6IFN0YW5kYXJkQXR0YWNobWVudFtdID0gW107XG4gICAgICAgIGNvbnN0IGFydGlmYWN0VmVyc2lvbnNNYXAgPSBuZXcgTWFwPHN0cmluZywgYW55W10+KCk7IC8vIFRyYWNrIGFsbCB2ZXJzaW9ucyBieSBhcnRpZmFjdCBJRFxuXG4gICAgICAgIC8vIEhhbmRsZSBlbXB0eSBvciBudWxsIGNvbnRlbnQgYmxvY2tzXG4gICAgICAgIGlmICghY29udGVudEJsb2NrcyB8fCBjb250ZW50QmxvY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdGV4dDogXCJcIiwgYXR0YWNobWVudHM6IFtdIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaXJzdCBwYXNzOiBjb2xsZWN0IEFMTCBzaWduaWZpY2FudCBhcnRpZmFjdCB2ZXJzaW9uc1xuICAgICAgICBmb3IgKGNvbnN0IGJsb2NrIG9mIGNvbnRlbnRCbG9ja3MpIHtcbiAgICAgICAgICAgIGlmIChibG9jay50eXBlID09PSAndG9vbF91c2UnICYmIGJsb2NrLm5hbWUgPT09ICdhcnRpZmFjdHMnICYmIGJsb2NrLmlucHV0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJ0aWZhY3RJZCA9IGJsb2NrLmlucHV0LmlkIHx8ICd1bmtub3duJztcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYmxvY2suaW5wdXQuY29udGVudCB8fCAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBjb21tYW5kID0gYmxvY2suaW5wdXQuY29tbWFuZCB8fCAnY3JlYXRlJztcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uVXVpZCA9IGJsb2NrLmlucHV0LnZlcnNpb25fdXVpZDtcblxuICAgICAgICAgICAgICAgIC8vIFNraXAgZW1wdHkgdXBkYXRlcyBhbmQgdmlldyBjb21tYW5kcyAtIHRoZXkncmUganVzdCBVSSB1cGRhdGVzIHdpdGhvdXQgY29udGVudFxuICAgICAgICAgICAgICAgIGlmICgoY29tbWFuZCA9PT0gJ3VwZGF0ZScgJiYgY29udGVudC5sZW5ndGggPT09IDApIHx8IGNvbW1hbmQgPT09ICd2aWV3Jykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBPbmx5IGtlZXAgc2lnbmlmaWNhbnQgdmVyc2lvbnMgKGNyZWF0ZSwgcmV3cml0ZSwgb3Igc3Vic3RhbnRpYWwgdXBkYXRlcylcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NpZ25pZmljYW50ID0gY29tbWFuZCA9PT0gJ2NyZWF0ZScgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQgPT09ICdyZXdyaXRlJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNvbW1hbmQgPT09ICd1cGRhdGUnICYmIGNvbnRlbnQubGVuZ3RoID4gMTAwKTtcblxuICAgICAgICAgICAgICAgIGlmIChpc1NpZ25pZmljYW50ICYmIHZlcnNpb25VdWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJ0aWZhY3RWZXJzaW9uc01hcC5oYXMoYXJ0aWZhY3RJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFydGlmYWN0VmVyc2lvbnNNYXAuc2V0KGFydGlmYWN0SWQsIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhcnRpZmFjdFZlcnNpb25zTWFwLmdldChhcnRpZmFjdElkKSEucHVzaChibG9jay5pbnB1dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2Vjb25kIHBhc3M6IHByb2Nlc3MgYXJ0aWZhY3RzIGluIG1lc3NhZ2VzIGFuZCBjcmVhdGUgc3BlY2lmaWMgbGlua3NcbiAgICAgICAgLy8gVXNlIHByb3ZpZGVkIGNvdW50ZXJzIG9yIGNyZWF0ZSBuZXcgb25lcyAoZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXG4gICAgICAgIGlmICghdmVyc2lvbkNvdW50ZXJzKSB2ZXJzaW9uQ291bnRlcnMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICAgICAgICBpZiAoIWFydGlmYWN0U3VtbWFyaWVzKSBhcnRpZmFjdFN1bW1hcmllcyA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XG5cbiAgICAgICAgLy8gR2xvYmFsIGFydGlmYWN0IGNvbnRlbnQgdHJhY2tpbmcgZm9yIGN1bXVsYXRpdmUgdXBkYXRlc1xuICAgICAgICBjb25zdCBhcnRpZmFjdENvbnRlbnRzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuICAgICAgICAvLyBUaGlyZCBwYXNzOiBwcm9jZXNzIG5vbi1hcnRpZmFjdCBjb250ZW50IGJsb2Nrc1xuICAgICAgICBmb3IgKGNvbnN0IGJsb2NrIG9mIGNvbnRlbnRCbG9ja3MpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoYmxvY2sudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RleHQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2sudGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFBhcnRzLnB1c2goYmxvY2sudGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICd0aGlua2luZyc6XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgdGhpbmtpbmcgYmxvY2tzIC0gbm90IHVzZWZ1bCBmb3IgdXNlcnNcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICd0b29sX3VzZSc6XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgaW50ZXJuYWwgdG9vbCB1c2FnZSAobGlrZSBbVG9vbDogcmVwbF0pIC0gbm90IHZhbHVhYmxlIGZvciB1c2Vyc1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2submFtZSA9PT0gJ3JlcGwnIHx8IGJsb2NrLm5hbWUgPT09ICdzdHJfcmVwbGFjZV9lZGl0b3InIHx8IGJsb2NrLm5hbWUgPT09ICdiYXNoJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBpbnRlcm5hbCB0b29sIHVzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBhcnRpZmFjdHMgc3BlY2lmaWNhbGx5XG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9jay5uYW1lID09PSAnYXJ0aWZhY3RzJyAmJiBibG9jay5pbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJ0aWZhY3RJZCA9IGJsb2NrLmlucHV0LmlkIHx8ICd1bmtub3duJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBibG9jay5pbnB1dC5jb21tYW5kIHx8ICdjcmVhdGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVyc2lvblV1aWQgPSBibG9jay5pbnB1dC52ZXJzaW9uX3V1aWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNraXAgdmlldyBjb21tYW5kc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQgPT09ICd2aWV3Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVyc2lvblV1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmNyZW1lbnQgdmVyc2lvbiBudW1iZXIgZm9yIHRoaXMgYXJ0aWZhY3QgSURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VmVyc2lvbiA9ICh2ZXJzaW9uQ291bnRlcnMuZ2V0KGFydGlmYWN0SWQpIHx8IDApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uQ291bnRlcnMuc2V0KGFydGlmYWN0SWQsIGN1cnJlbnRWZXJzaW9uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbENvbnRlbnQgPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21tYW5kID09PSAnY3JlYXRlJyB8fCBjb21tYW5kID09PSAncmV3cml0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGxldGUgY29udGVudCBwcm92aWRlZCAtIFJFU0VUIGN1bXVsYXRpdmUgY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbENvbnRlbnQgPSBibG9jay5pbnB1dC5jb250ZW50IHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnRpZmFjdENvbnRlbnRzLnNldChhcnRpZmFjdElkLCBmaW5hbENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgdXBkYXRlIHRvIFBSRVZJT1VTIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNDb250ZW50ID0gYXJ0aWZhY3RDb250ZW50cy5nZXQoYXJ0aWZhY3RJZCkgfHwgJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrLmlucHV0Lm9sZF9zdHIgJiYgYmxvY2suaW5wdXQubmV3X3N0cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VkLWxpa2UgcmVwbGFjZW1lbnQgb24gcHJldmlvdXMgY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxDb250ZW50ID0gcHJldmlvdXNDb250ZW50LnJlcGxhY2UoYmxvY2suaW5wdXQub2xkX3N0ciwgYmxvY2suaW5wdXQubmV3X3N0cik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmxvY2suaW5wdXQuY29udGVudCAmJiBibG9jay5pbnB1dC5jb250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBsZXRlIHVwZGF0ZWQgY29udGVudCBwcm92aWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxDb250ZW50ID0gYmxvY2suaW5wdXQuY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVtcHR5IHVwZGF0ZSAtIGtlZXAgcHJldmlvdXMgY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxDb250ZW50ID0gcHJldmlvdXNDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGN1bXVsYXRpdmUgY29udGVudCBmb3IgbmV4dCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFydGlmYWN0Q29udGVudHMuc2V0KGFydGlmYWN0SWQsIGZpbmFsQ29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGlzIHNwZWNpZmljIHZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2luZ2xlQXJ0aWZhY3RWZXJzaW9uV2l0aENvbnRlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnRpZmFjdElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uVGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25DcmVhdGVUaW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHNwZWNpZmljIGxpbmsgZm9yIFRISVMgdmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IGJsb2NrLmlucHV0LnRpdGxlIHx8IGFydGlmYWN0SWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZvbGRlciA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnRGb2xkZXJ9L2NsYXVkZS9hcnRpZmFjdHMvJHtjb252ZXJzYXRpb25JZH1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uRmlsZSA9IGAke2NvbnZlcnNhdGlvbkZvbGRlcn0vJHthcnRpZmFjdElkfV92JHtjdXJyZW50VmVyc2lvbn1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVjaWZpY0xpbmsgPSBgPlshJHt0aGlzLkNBTExPVVRTLkFSVElGQUNUfV0gKioke3RpdGxlfSoqIHYke2N1cnJlbnRWZXJzaW9ufVxcbj4gXHVEODNDXHVERkE4IFtbJHt2ZXJzaW9uRmlsZX18VmlldyBBcnRpZmFjdF1dYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFBhcnRzLnB1c2goc3BlY2lmaWNMaW5rKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRmFpbGVkIHRvIHNhdmUgJHthcnRpZmFjdElkfSB2JHtjdXJyZW50VmVyc2lvbn06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0UGFydHMucHVzaChgPlshJHt0aGlzLkNBTExPVVRTLkFSVElGQUNUfV0gKioke2Jsb2NrLmlucHV0LnRpdGxlIHx8IGFydGlmYWN0SWR9KiogdiR7Y3VycmVudFZlcnNpb259XFxuPiBcdTI3NEMgRXJyb3Igc2F2aW5nIGFydGlmYWN0YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm5hbWUgPT09ICd3ZWJfc2VhcmNoJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCB3ZWJfc2VhcmNoIHRvb2xzIC0gbm90IHVzZWZ1bCBmb3IgdXNlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm5hbWUgJiYgYmxvY2suaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyIHRvb2xzIChrZWVwIGZvciBub3csIGNhbiBiZSBmaWx0ZXJlZCBsYXRlciBpZiBuZWVkZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2RlID0gYmxvY2suaW5wdXQuY29kZSB8fCBKU09OLnN0cmluZ2lmeShibG9jay5pbnB1dCwgbnVsbCwgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0UGFydHMucHVzaChgKipbVG9vbDogJHtibG9jay5uYW1lfV0qKlxcblxcYFxcYFxcYFxcbiR7Y29kZX1cXG5cXGBcXGBcXGBgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ3Rvb2xfcmVzdWx0JzpcbiAgICAgICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBhbGwgdG9vbCByZXN1bHRzIC0gbm90IHVzZWZ1bCBmb3IgdXNlcnNcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGV4dDogdGV4dFBhcnRzLmpvaW4oJ1xcblxcbicpLFxuICAgICAgICAgICAgYXR0YWNobWVudHNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBwcm9jZXNzRmlsZUF0dGFjaG1lbnRzKGZpbGVzOiBhbnlbXSk6IFN0YW5kYXJkQXR0YWNobWVudFtdIHtcbiAgICAgICAgY29uc3QgYXR0YWNobWVudHM6IFN0YW5kYXJkQXR0YWNobWVudFtdID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgZW1wdHkgb3IgbnVsbCBmaWxlcyBhcnJheVxuICAgICAgICBpZiAoIWZpbGVzIHx8IGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGF0dGFjaG1lbnRzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGlmIChmaWxlICYmIGZpbGUuZmlsZV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgYXR0YWNobWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlLmZpbGVfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZVNpemU6IDAsIC8vIFNpemUgbm90IHByb3ZpZGVkIGluIENsYXVkZSBleHBvcnRcbiAgICAgICAgICAgICAgICAgICAgZmlsZVR5cGU6IHRoaXMuZ2V0RmlsZVR5cGVGcm9tTmFtZShmaWxlLmZpbGVfbmFtZSksXG4gICAgICAgICAgICAgICAgICAgIGZpbGVJZDogZmlsZS5maWxlX25hbWUsIC8vIFVzZSBmaWxlbmFtZSBhcyBJRFxuICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWRDb250ZW50OiBcIlwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBhdHRhY2htZW50cztcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBnZXRGaWxlVHlwZUZyb21OYW1lKGZpbGVOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBleHRlbnNpb24gPSBmaWxlTmFtZS5zcGxpdCgnLicpLnBvcCgpPy50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHN3aXRjaCAoZXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICBjYXNlICdwbmcnOlxuICAgICAgICAgICAgY2FzZSAnanBnJzpcbiAgICAgICAgICAgIGNhc2UgJ2pwZWcnOlxuICAgICAgICAgICAgY2FzZSAnZ2lmJzpcbiAgICAgICAgICAgIGNhc2UgJ3dlYnAnOlxuICAgICAgICAgICAgICAgIHJldHVybiBgaW1hZ2UvJHtleHRlbnNpb259YDtcbiAgICAgICAgICAgIGNhc2UgJ3BkZic6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdhcHBsaWNhdGlvbi9wZGYnO1xuICAgICAgICAgICAgY2FzZSAndHh0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3RleHQvcGxhaW4nO1xuICAgICAgICAgICAgY2FzZSAnbWQnOlxuICAgICAgICAgICAgICAgIHJldHVybiAndGV4dC9tYXJrZG93bic7XG4gICAgICAgICAgICBjYXNlICdqc29uJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlIGEgc2luZ2xlIGFydGlmYWN0IHZlcnNpb24gd2l0aCBjb21wdXRlZCBjb250ZW50XG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgc2F2ZVNpbmdsZUFydGlmYWN0VmVyc2lvbldpdGhDb250ZW50KFxuICAgICAgICBhcnRpZmFjdElkOiBzdHJpbmcsXG4gICAgICAgIGFydGlmYWN0RGF0YTogYW55LFxuICAgICAgICB2ZXJzaW9uTnVtYmVyOiBudW1iZXIsXG4gICAgICAgIGZpbmFsQ29udGVudDogc3RyaW5nLFxuICAgICAgICBjb252ZXJzYXRpb25JZD86IHN0cmluZyxcbiAgICAgICAgY29udmVyc2F0aW9uVGl0bGU/OiBzdHJpbmcsXG4gICAgICAgIGNvbnZlcnNhdGlvbkNyZWF0ZVRpbWU/OiBudW1iZXIsXG4gICAgICAgIGZvcmNlZExhbmd1YWdlPzogc3RyaW5nLFxuICAgICAgICBtZXNzYWdlVGltZXN0YW1wPzogbnVtYmVyXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGx1Z2luIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgZW5zdXJlRm9sZGVyRXhpc3RzIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi8uLi91dGlsc1wiKTtcblxuICAgICAgICAvLyBDcmVhdGUgY29udmVyc2F0aW9uLXNwZWNpZmljIGFydGlmYWN0IGZvbGRlclxuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25Gb2xkZXIgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdHRhY2htZW50Rm9sZGVyfS9jbGF1ZGUvYXJ0aWZhY3RzLyR7Y29udmVyc2F0aW9uSWR9YDtcbiAgICAgICAgY29uc3QgZm9sZGVyUmVzdWx0ID0gYXdhaXQgZW5zdXJlRm9sZGVyRXhpc3RzKGNvbnZlcnNhdGlvbkZvbGRlciwgdGhpcy5wbHVnaW4uYXBwLnZhdWx0KTtcbiAgICAgICAgaWYgKCFmb2xkZXJSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGFydGlmYWN0cyBmb2xkZXI6ICR7Zm9sZGVyUmVzdWx0LmVycm9yfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2FuaXRpemUgYXJ0aWZhY3RJZCB0byBhdm9pZCBmaWxlc3lzdGVtIGlzc3Vlc1xuICAgICAgICBjb25zdCBzYWZlQXJ0aWZhY3RJZCA9IGFydGlmYWN0SWQucmVwbGFjZSgvW1xcL1xcXFw6Kj9cIjw+fF0vZywgJ18nKTtcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtzYWZlQXJ0aWZhY3RJZH1fdiR7dmVyc2lvbk51bWJlcn0ubWRgO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke2NvbnZlcnNhdGlvbkZvbGRlcn0vJHtmaWxlTmFtZX1gO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGNvbnN0IHNob3VsZFNraXAgPSBhd2FpdCB0aGlzLnNob3VsZFNraXBBcnRpZmFjdFZlcnNpb24oZmlsZVBhdGgsIGFydGlmYWN0RGF0YS52ZXJzaW9uX3V1aWQpO1xuICAgICAgICBpZiAoc2hvdWxkU2tpcCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlSW5kaXZpZHVhbEFydGlmYWN0VmVyc2lvbihcbiAgICAgICAgICAgIGFydGlmYWN0RGF0YSxcbiAgICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgICAgdmVyc2lvbk51bWJlcixcbiAgICAgICAgICAgIGZpbmFsQ29udGVudCxcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgY29udmVyc2F0aW9uVGl0bGUsXG4gICAgICAgICAgICBjb252ZXJzYXRpb25DcmVhdGVUaW1lLFxuICAgICAgICAgICAgZm9yY2VkTGFuZ3VhZ2UsXG4gICAgICAgICAgICBtZXNzYWdlVGltZXN0YW1wXG4gICAgICAgICk7XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhcnRpZmFjdCBzdW1tYXJ5IGZvciBjb252ZXJzYXRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBjcmVhdGVBcnRpZmFjdFN1bW1hcnkoYXJ0aWZhY3RJZDogc3RyaW5nLCBpbmZvOiBhbnksIGNvbnZlcnNhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBpbmZvLnRpdGxlIHx8IGFydGlmYWN0SWQ7XG4gICAgICAgIGNvbnN0IHRvdGFsVmVyc2lvbnMgPSBpbmZvLnRvdGFsVmVyc2lvbnMgfHwgMTtcbiAgICAgICAgY29uc3QgbGF0ZXN0VmVyc2lvbiA9IGluZm8ubGF0ZXN0VmVyc2lvbiB8fCAxO1xuXG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZvbGRlciA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnRGb2xkZXJ9L2NsYXVkZS9hcnRpZmFjdHMvJHtjb252ZXJzYXRpb25JZH1gO1xuICAgICAgICBjb25zdCBsYXRlc3RGaWxlID0gYCR7Y29udmVyc2F0aW9uRm9sZGVyfS8ke2FydGlmYWN0SWR9X3Yke2xhdGVzdFZlcnNpb259YDtcblxuICAgICAgICBsZXQgc3VtbWFyeSA9IGA8ZGl2IGNsYXNzPVwibmV4dXMtYXJ0aWZhY3QtYm94XCI+KipcdUQ4M0NcdURGQTggQXJ0aWZhY3Q6ICR7dGl0bGV9KipgO1xuXG4gICAgICAgIGlmICh0b3RhbFZlcnNpb25zID4gMSkge1xuICAgICAgICAgICAgc3VtbWFyeSArPSBgICgke3RvdGFsVmVyc2lvbnN9IHZlcnNpb25zKWA7XG4gICAgICAgIH1cblxuICAgICAgICBzdW1tYXJ5ICs9IGBcXG5cXG5cdUQ4M0RcdURDQ0UgKipbWyR7bGF0ZXN0RmlsZX18VmlldyBMYXRlc3QgVmVyc2lvbl1dKipgO1xuXG4gICAgICAgIGlmICh0b3RhbFZlcnNpb25zID4gMSkge1xuICAgICAgICAgICAgc3VtbWFyeSArPSBgIHwgKipbWyR7Y29udmVyc2F0aW9uRm9sZGVyfS98QWxsIFZlcnNpb25zXV0qKmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdW1tYXJ5ICs9IGA8L2Rpdj5gO1xuICAgICAgICByZXR1cm4gc3VtbWFyeTtcbiAgICB9XG5cblxuXG5cblxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBhcnRpZmFjdCBzdW1tYXJ5IGZvciBjb252ZXJzYXRpb24gZGlzcGxheVxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGZvcm1hdEFydGlmYWN0U3VtbWFyeShmaXJzdFZlcnNpb246IGFueSwgc2F2ZWRWZXJzaW9uczogc3RyaW5nW10sIGxhdGVzdFZlcnNpb246IHN0cmluZywgY29udmVyc2F0aW9uRm9sZGVyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB0aXRsZSA9IGZpcnN0VmVyc2lvbj8udGl0bGUgfHwgJ1VudGl0bGVkIEFydGlmYWN0JztcbiAgICAgICAgY29uc3QgdmVyc2lvbkNvdW50ID0gc2F2ZWRWZXJzaW9ucy5sZW5ndGg7XG5cbiAgICAgICAgaWYgKCFsYXRlc3RWZXJzaW9uKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0NsYXVkZSBjb252ZXJ0ZXI6IE5vIGxhdGVzdCB2ZXJzaW9uIGF2YWlsYWJsZSBmb3IgYXJ0aWZhY3Qgc3VtbWFyeScpO1xuICAgICAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwibmV4dXMtYXJ0aWZhY3QtYm94XCI+KipcdUQ4M0NcdURGQTggQXJ0aWZhY3Q6ICR7dGl0bGV9KiogKEVycm9yOiBObyBhY2Nlc3NpYmxlIHZlcnNpb24pPC9kaXY+YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmb3JtYXR0ZWRDb250ZW50ID0gYDxkaXYgY2xhc3M9XCJuZXh1cy1hcnRpZmFjdC1ib3hcIj4qKlx1RDgzQ1x1REZBOCBBcnRpZmFjdDogJHt0aXRsZX0qKmA7XG5cbiAgICAgICAgaWYgKHZlcnNpb25Db3VudCA+IDEpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZENvbnRlbnQgKz0gYCAoJHt2ZXJzaW9uQ291bnR9IHZlcnNpb25zKWA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVc2UgdmF1bHQtcmVsYXRpdmUgcGF0aHMgZm9yIE9ic2lkaWFuIGxpbmtzIChyZW1vdmUgLm1kIGV4dGVuc2lvbiBmb3IgbGlua3MpXG4gICAgICAgIGNvbnN0IGxhdGVzdFZlcnNpb25MaW5rID0gbGF0ZXN0VmVyc2lvbi5yZXBsYWNlKC9cXC5tZCQvLCAnJyk7XG4gICAgICAgIGZvcm1hdHRlZENvbnRlbnQgKz0gYFxcblxcblx1RDgzRFx1RENDRSAqKltbJHtsYXRlc3RWZXJzaW9uTGlua318VmlldyBMYXRlc3QgVmVyc2lvbl1dKipgO1xuXG4gICAgICAgIGlmICh2ZXJzaW9uQ291bnQgPiAxKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRDb250ZW50ICs9IGAgfCAqKltbJHtjb252ZXJzYXRpb25Gb2xkZXJ9L3xBbGwgVmVyc2lvbnNdXSoqYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1hdHRlZENvbnRlbnQgKz0gYDwvZGl2PmA7XG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWRDb250ZW50O1xuICAgIH1cblxuXG5cbiAgICAvKipcbiAgICAgKiBTYXZlIGEgc2luZ2xlIGFydGlmYWN0IHZlcnNpb24gd2l0aCBzcGVjaWZpYyBjb250ZW50XG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgc2F2ZUluZGl2aWR1YWxBcnRpZmFjdFZlcnNpb24oXG4gICAgICAgIGFydGlmYWN0SW5wdXQ6IGFueSxcbiAgICAgICAgZmlsZVBhdGg6IHN0cmluZyxcbiAgICAgICAgdmVyc2lvbk51bWJlcjogbnVtYmVyLFxuICAgICAgICB2ZXJzaW9uQ29udGVudDogc3RyaW5nLFxuICAgICAgICBjb252ZXJzYXRpb25JZD86IHN0cmluZyxcbiAgICAgICAgY29udmVyc2F0aW9uVGl0bGU/OiBzdHJpbmcsXG4gICAgICAgIGNvbnZlcnNhdGlvbkNyZWF0ZVRpbWU/OiBudW1iZXIsXG4gICAgICAgIGZvcmNlZExhbmd1YWdlPzogc3RyaW5nLFxuICAgICAgICBtZXNzYWdlVGltZXN0YW1wPzogbnVtYmVyXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gYXJ0aWZhY3RJbnB1dC50aXRsZSB8fCAnVW50aXRsZWQgQXJ0aWZhY3QnO1xuICAgICAgICBsZXQgbGFuZ3VhZ2UgPSBhcnRpZmFjdElucHV0Lmxhbmd1YWdlIHx8ICd0ZXh0JztcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IGFydGlmYWN0SW5wdXQuY29tbWFuZCB8fCAnY3JlYXRlJztcbiAgICAgICAgY29uc3QgYXJ0aWZhY3RJZCA9IGFydGlmYWN0SW5wdXQuaWQgfHwgJ3Vua25vd24nO1xuICAgICAgICBjb25zdCB2ZXJzaW9uVXVpZCA9IGFydGlmYWN0SW5wdXQudmVyc2lvbl91dWlkO1xuXG4gICAgICAgIC8vIFVzZSBmb3JjZWQgbGFuZ3VhZ2UgKGZyb20gY3JlYXRlL3Jld3JpdGUpIG9yIGF1dG8tZGV0ZWN0XG4gICAgICAgIGlmIChmb3JjZWRMYW5ndWFnZSkge1xuICAgICAgICAgICAgbGFuZ3VhZ2UgPSBmb3JjZWRMYW5ndWFnZTtcbiAgICAgICAgfSBlbHNlIGlmICgobGFuZ3VhZ2UudG9Mb3dlckNhc2UoKSA9PT0gJ3RleHQnIHx8ICFsYW5ndWFnZSB8fCBsYW5ndWFnZSA9PT0gJ3VuZGVmaW5lZCcpICYmIHZlcnNpb25Db250ZW50KSB7XG4gICAgICAgICAgICBjb25zdCBkZXRlY3RlZExhbmd1YWdlID0gdGhpcy5kZXRlY3RMYW5ndWFnZUZyb21Db250ZW50KHZlcnNpb25Db250ZW50LCBhcnRpZmFjdElucHV0LnR5cGUpO1xuICAgICAgICAgICAgaWYgKGRldGVjdGVkTGFuZ3VhZ2UgIT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gZGV0ZWN0ZWRMYW5ndWFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdlbmVyYXRlIGNvbnZlcnNhdGlvbiBsaW5rIHdpdGggcHJvcGVyIHBhdGggaWYgY29udmVyc2F0aW9uSWQgYW5kIHRpdGxlIGFyZSBwcm92aWRlZFxuICAgICAgICBsZXQgY29udmVyc2F0aW9uTGluayA9ICcnO1xuICAgICAgICBpZiAoY29udmVyc2F0aW9uSWQgJiYgY29udmVyc2F0aW9uVGl0bGUgJiYgY29udmVyc2F0aW9uQ3JlYXRlVGltZSkge1xuICAgICAgICAgICAgY29uc3QgY3JlYXRlRGF0ZSA9IG5ldyBEYXRlKGNvbnZlcnNhdGlvbkNyZWF0ZVRpbWUgKiAxMDAwKTtcbiAgICAgICAgICAgIGNvbnN0IHllYXIgPSBjcmVhdGVEYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICBjb25zdCBtb250aCA9IFN0cmluZyhjcmVhdGVEYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuXG4gICAgICAgICAgICAvLyBJbXBvcnQgdXRpbGl0aWVzXG4gICAgICAgICAgICBjb25zdCB7IGdlbmVyYXRlQ29udmVyc2F0aW9uRmlsZU5hbWUgfSA9IGF3YWl0IGltcG9ydChcIi4uLy4uL3V0aWxzXCIpO1xuXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSB0aGUgZXhhY3QgZmlsZW5hbWUgdGhhdCB3b3VsZCBiZSB1c2VkIGZvciB0aGUgY29udmVyc2F0aW9uXG4gICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGdlbmVyYXRlQ29udmVyc2F0aW9uRmlsZU5hbWUoXG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uVGl0bGUsXG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uQ3JlYXRlVGltZSxcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZGREYXRlUHJlZml4LFxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRhdGVGb3JtYXRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFVzZSBhYnNvbHV0ZSBwYXRoIGZyb20gdmF1bHQgcm9vdCAod2l0aG91dCAubWQgZXh0ZW5zaW9uIGZvciBsaW5rcylcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvblBhdGggPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb252ZXJzYXRpb25Gb2xkZXJ9L2NsYXVkZS8ke3llYXJ9LyR7bW9udGh9LyR7ZmlsZU5hbWV9YDtcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbkxpbmsgPSBgW1ske2NvbnZlcnNhdGlvblBhdGh9fCR7Y29udmVyc2F0aW9uVGl0bGV9XV1gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgc2FmZSBhbGlhc2VzIGZvciBmcm9udG1hdHRlclxuICAgICAgICBjb25zdCBzYWZlQXJ0aWZhY3RUaXRsZSA9IGdlbmVyYXRlU2FmZUFsaWFzKHRpdGxlKTtcbiAgICAgICAgY29uc3Qgc2FmZUFydGlmYWN0QWxpYXMgPSBnZW5lcmF0ZVNhZmVBbGlhcyhgJHthcnRpZmFjdElkfV92JHt2ZXJzaW9uTnVtYmVyfWApO1xuXG4gICAgICAgIC8vIEdlbmVyYXRlIElTTyA4NjAxIHRpbWVzdGFtcCBmb3IgYXJ0aWZhY3QgY3JlYXRpb24gKGZyb20gbWVzc2FnZSB0aW1lc3RhbXAgb3IgY29udmVyc2F0aW9uIHRpbWVzdGFtcClcbiAgICAgICAgY29uc3QgYXJ0aWZhY3RDcmVhdGVUaW1lID0gbWVzc2FnZVRpbWVzdGFtcCB8fCBjb252ZXJzYXRpb25DcmVhdGVUaW1lIHx8IDA7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVRpbWVTdHIgPSBhcnRpZmFjdENyZWF0ZVRpbWUgPiAwID8gbmV3IERhdGUoYXJ0aWZhY3RDcmVhdGVUaW1lICogMTAwMCkudG9JU09TdHJpbmcoKSA6ICd1bmtub3duJztcblxuICAgICAgICAvLyBDcmVhdGUgbWFya2Rvd24gY29udGVudCB3aXRoIGVuaGFuY2VkIGZyb250bWF0dGVyXG4gICAgICAgIGxldCBtYXJrZG93bkNvbnRlbnQgPSBgLS0tXG5uZXh1czogbmV4dXMtYWktY2hhdC1pbXBvcnRlclxucGx1Z2luX3ZlcnNpb246IFwiJHt0aGlzLnBsdWdpbi5tYW5pZmVzdC52ZXJzaW9ufVwiXG5wcm92aWRlcjogY2xhdWRlXG5hcnRpZmFjdF9pZDogJHthcnRpZmFjdElkfVxudmVyc2lvbl91dWlkOiAke3ZlcnNpb25VdWlkfVxudmVyc2lvbl9udW1iZXI6ICR7dmVyc2lvbk51bWJlcn1cbmNvbW1hbmQ6ICR7Y29tbWFuZH1cbmNvbnZlcnNhdGlvbl9pZDogJHtjb252ZXJzYXRpb25JZCB8fCAndW5rbm93bid9XG5jcmVhdGVfdGltZTogJHtjcmVhdGVUaW1lU3RyfVxuZm9ybWF0OiAke2xhbmd1YWdlfVxuYWxpYXNlczogWyR7c2FmZUFydGlmYWN0VGl0bGV9LCAke3NhZmVBcnRpZmFjdEFsaWFzfV1cbi0tLVxuXG4jICR7dGl0bGV9IChWZXJzaW9uICR7dmVyc2lvbk51bWJlcn0pXG5gO1xuXG4gICAgICAgIC8vIEFkZCBjb252ZXJzYXRpb24gbGluayBpZiBhdmFpbGFibGUgKHNpbXBsaWZpZWQgaGVhZGVyIC0gcmVtb3ZlZCBUeXBlL0xhbmd1YWdlL0NvbW1hbmQvVmVyc2lvbi9JRC9VVUlEKVxuICAgICAgICBpZiAoY29udmVyc2F0aW9uTGluaykge1xuICAgICAgICAgICAgbWFya2Rvd25Db250ZW50ICs9IGBcbioqQ29udmVyc2F0aW9uOioqICR7Y29udmVyc2F0aW9uTGlua31cblxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIG1hcmtkb3duQ29udGVudCArPSBgIyMgQ29udGVudFxcblxcbmA7XG5cbiAgICAgICAgLy8gQWRkIGNvbnRlbnQgYmFzZWQgb24gbGFuZ3VhZ2VcbiAgICAgICAgaWYgKGxhbmd1YWdlLnRvTG93ZXJDYXNlKCkgPT09ICdtYXJrZG93bicpIHtcbiAgICAgICAgICAgIC8vIEZvciBtYXJrZG93biwgaW5jbHVkZSBjb250ZW50IGRpcmVjdGx5XG4gICAgICAgICAgICBtYXJrZG93bkNvbnRlbnQgKz0gdmVyc2lvbkNvbnRlbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3Igb3RoZXIgbGFuZ3VhZ2VzLCB1c2UgY29kZSBibG9ja3NcbiAgICAgICAgICAgIG1hcmtkb3duQ29udGVudCArPSBgXFxgXFxgXFxgJHtsYW5ndWFnZX1cXG4ke3ZlcnNpb25Db250ZW50fVxcblxcYFxcYFxcYGA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTYXZlIHRoZSBhcnRpZmFjdCBhcyBtYXJrZG93blxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgbWFya2Rvd25Db250ZW50KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBhcnRpZmFjdCBmaWxlICR7ZmlsZVBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB3ZSBzaG91bGQgc2tpcCBzYXZpbmcgdGhpcyBhcnRpZmFjdCB2ZXJzaW9uIChhbHJlYWR5IGV4aXN0cylcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBzaG91bGRTa2lwQXJ0aWZhY3RWZXJzaW9uKGZpbGVQYXRoOiBzdHJpbmcsIHZlcnNpb25VdWlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKCFleGlzdGluZ0ZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEZpbGUgZG9lc24ndCBleGlzdCwgZG9uJ3Qgc2tpcFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0NvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChleGlzdGluZ0ZpbGUgYXMgYW55KTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHZlcnNpb25fdXVpZCBtYXRjaGVzIChzYW1lIHZlcnNpb24pXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdDb250ZW50LmluY2x1ZGVzKGB2ZXJzaW9uX3V1aWQ6ICR7dmVyc2lvblV1aWR9YCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gU2FtZSB2ZXJzaW9uLCBza2lwXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERpZmZlcmVudCB2ZXJzaW9uX3V1aWQgYnV0IHNhbWUgZmlsZSBwYXRoIC0gdGhpcyBzaG91bGRuJ3QgaGFwcGVuIGluIG5vcm1hbCBjYXNlc1xuICAgICAgICAgICAgLy8gYnV0IGNvdWxkIGhhcHBlbiBpZiB0aGVyZSBhcmUgY29uZmxpY3RzLiBMZXQncyB1cGRhdGUgdGhlIGZpbGUuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBjYW4ndCByZWFkIHRoZSBmaWxlLCBkb24ndCBza2lwICh0cnkgdG8gY3JlYXRlL3VwZGF0ZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZSBpZiB3ZSBzaG91bGQgcmVwbGFjZSB0aGUgY3VycmVudCBhcnRpZmFjdCB3aXRoIGEgbmV3IG9uZVxuICAgICAqIFByaW9yaXR5OiBjcmVhdGUgPiByZXdyaXRlID4gdXBkYXRlICh3aXRoIGNvbnRlbnQpID4gdmlld1xuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIHNob3VsZFJlcGxhY2VBcnRpZmFjdChjdXJyZW50OiBhbnksIGNhbmRpZGF0ZTogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb21tYW5kID0gY3VycmVudC5jb21tYW5kIHx8ICdjcmVhdGUnO1xuICAgICAgICBjb25zdCBjYW5kaWRhdGVDb21tYW5kID0gY2FuZGlkYXRlLmNvbW1hbmQgfHwgJ2NyZWF0ZSc7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb250ZW50ID0gKGN1cnJlbnQuY29udGVudCB8fCAnJykubGVuZ3RoO1xuICAgICAgICBjb25zdCBjYW5kaWRhdGVDb250ZW50ID0gKGNhbmRpZGF0ZS5jb250ZW50IHx8ICcnKS5sZW5ndGg7XG5cbiAgICAgICAgLy8gQ29tbWFuZCBwcmlvcml0eSBzY29yZXNcbiAgICAgICAgY29uc3QgY29tbWFuZFByaW9yaXR5OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuICAgICAgICAgICAgJ2NyZWF0ZSc6IDQsXG4gICAgICAgICAgICAncmV3cml0ZSc6IDMsXG4gICAgICAgICAgICAndXBkYXRlJzogMixcbiAgICAgICAgICAgICd2aWV3JzogMVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGN1cnJlbnRQcmlvcml0eSA9IGNvbW1hbmRQcmlvcml0eVtjdXJyZW50Q29tbWFuZCBhcyBzdHJpbmddIHx8IDE7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZVByaW9yaXR5ID0gY29tbWFuZFByaW9yaXR5W2NhbmRpZGF0ZUNvbW1hbmQgYXMgc3RyaW5nXSB8fCAxO1xuXG4gICAgICAgIC8vIEhpZ2hlciBwcmlvcml0eSBjb21tYW5kIHdpbnNcbiAgICAgICAgaWYgKGNhbmRpZGF0ZVByaW9yaXR5ID4gY3VycmVudFByaW9yaXR5KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNhbWUgcHJpb3JpdHk6IGxvbmdlciBjb250ZW50IHdpbnNcbiAgICAgICAgaWYgKGNhbmRpZGF0ZVByaW9yaXR5ID09PSBjdXJyZW50UHJpb3JpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBjYW5kaWRhdGVDb250ZW50ID4gY3VycmVudENvbnRlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXV0by1kZXRlY3QgbGFuZ3VhZ2UgZnJvbSBjb250ZW50IGFuZCBhcnRpZmFjdCB0eXBlXG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgZGV0ZWN0TGFuZ3VhZ2VGcm9tQ29udGVudChjb250ZW50OiBzdHJpbmcsIGFydGlmYWN0VHlwZT86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGlmICghY29udGVudCB8fCBjb250ZW50LnRyaW0oKS5sZW5ndGggPT09IDApIHJldHVybiAndGV4dCc7XG5cbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgYXJ0aWZhY3QgdHlwZSBmb3IgaGludHNcbiAgICAgICAgaWYgKGFydGlmYWN0VHlwZSkge1xuICAgICAgICAgICAgaWYgKGFydGlmYWN0VHlwZS5pbmNsdWRlcygncmVhY3QnKSB8fCBhcnRpZmFjdFR5cGUuaW5jbHVkZXMoJ2pzeCcpKSByZXR1cm4gJ2pzeCc7XG4gICAgICAgICAgICBpZiAoYXJ0aWZhY3RUeXBlLmluY2x1ZGVzKCd2dWUnKSkgcmV0dXJuICd2dWUnO1xuICAgICAgICAgICAgaWYgKGFydGlmYWN0VHlwZS5pbmNsdWRlcygnc3ZlbHRlJykpIHJldHVybiAnc3ZlbHRlJztcbiAgICAgICAgICAgIGlmIChhcnRpZmFjdFR5cGUuaW5jbHVkZXMoJ2h0bWwnKSkgcmV0dXJuICdodG1sJztcbiAgICAgICAgICAgIGlmIChhcnRpZmFjdFR5cGUuaW5jbHVkZXMoJ2NzcycpKSByZXR1cm4gJ2Nzcyc7XG4gICAgICAgICAgICBpZiAoYXJ0aWZhY3RUeXBlLmluY2x1ZGVzKCdqc29uJykpIHJldHVybiAnanNvbic7XG4gICAgICAgICAgICBpZiAoYXJ0aWZhY3RUeXBlLmluY2x1ZGVzKCd4bWwnKSkgcmV0dXJuICd4bWwnO1xuICAgICAgICAgICAgaWYgKGFydGlmYWN0VHlwZS5pbmNsdWRlcygnc3ZnJykpIHJldHVybiAneG1sJztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRyaW1tZWRDb250ZW50ID0gY29udGVudC50cmltKCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIHNwZWNpZmljIGZpbGUgdHlwZSBwYXR0ZXJuc1xuICAgICAgICBpZiAodHJpbW1lZENvbnRlbnQuc3RhcnRzV2l0aCgnPD9waHAnKSkgcmV0dXJuICdwaHAnO1xuICAgICAgICBpZiAodHJpbW1lZENvbnRlbnQuc3RhcnRzV2l0aCgnIyEvYmluL2Jhc2gnKSB8fCB0cmltbWVkQ29udGVudC5zdGFydHNXaXRoKCcjIS9iaW4vc2gnKSkgcmV0dXJuICdiYXNoJztcbiAgICAgICAgaWYgKHRyaW1tZWRDb250ZW50LnN0YXJ0c1dpdGgoJzwhRE9DVFlQRSBodG1sJykgfHwgdHJpbW1lZENvbnRlbnQuaW5jbHVkZXMoJzxodG1sJykpIHJldHVybiAnaHRtbCc7XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIFJlYWN0L0pTWCBwYXR0ZXJuc1xuICAgICAgICBpZiAodHJpbW1lZENvbnRlbnQuaW5jbHVkZXMoJ2ltcG9ydCBSZWFjdCcpIHx8IHRyaW1tZWRDb250ZW50LmluY2x1ZGVzKCdmcm9tIFwicmVhY3RcIicpIHx8XG4gICAgICAgICAgICB0cmltbWVkQ29udGVudC5pbmNsdWRlcygndXNlU3RhdGUnKSB8fCB0cmltbWVkQ29udGVudC5pbmNsdWRlcygndXNlRWZmZWN0JykgfHxcbiAgICAgICAgICAgIHRyaW1tZWRDb250ZW50LmluY2x1ZGVzKCdjbGFzc05hbWU9JykgfHwgdHJpbW1lZENvbnRlbnQuaW5jbHVkZXMoJ2pzeCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2pzeCc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBmb3IgSlNPTlxuICAgICAgICBpZiAodHJpbW1lZENvbnRlbnQuc3RhcnRzV2l0aCgneycpICYmIHRyaW1tZWRDb250ZW50LmVuZHNXaXRoKCd9JykpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgSlNPTi5wYXJzZSh0cmltbWVkQ29udGVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdqc29uJztcbiAgICAgICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGZvciBTVkcvWE1MXG4gICAgICAgIGlmICh0cmltbWVkQ29udGVudC5zdGFydHNXaXRoKCc8c3ZnJykgfHwgdHJpbW1lZENvbnRlbnQuaW5jbHVkZXMoJ3htbG5zJykpIHtcbiAgICAgICAgICAgIHJldHVybiAneG1sJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGZvciBtYXJrZG93biBwYXR0ZXJuc1xuICAgICAgICBpZiAodHJpbW1lZENvbnRlbnQuaW5jbHVkZXMoJyMgJykgfHwgdHJpbW1lZENvbnRlbnQuaW5jbHVkZXMoJyMjICcpIHx8XG4gICAgICAgICAgICB0cmltbWVkQ29udGVudC5pbmNsdWRlcygnKionKSB8fCB0cmltbWVkQ29udGVudC5pbmNsdWRlcygnYGBgJykpIHtcbiAgICAgICAgICAgIHJldHVybiAnbWFya2Rvd24nO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIFB5dGhvbiBwYXR0ZXJuc1xuICAgICAgICBpZiAodHJpbW1lZENvbnRlbnQuaW5jbHVkZXMoJ2RlZiAnKSB8fCB0cmltbWVkQ29udGVudC5pbmNsdWRlcygnaW1wb3J0ICcpIHx8XG4gICAgICAgICAgICB0cmltbWVkQ29udGVudC5pbmNsdWRlcygnZnJvbSAnKSB8fCB0cmltbWVkQ29udGVudC5pbmNsdWRlcygnY2xhc3MgJykpIHtcbiAgICAgICAgICAgIHJldHVybiAncHl0aG9uJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGZvciBKYXZhU2NyaXB0IHBhdHRlcm5zXG4gICAgICAgIGlmICh0cmltbWVkQ29udGVudC5pbmNsdWRlcygnZnVuY3Rpb24gJykgfHwgdHJpbW1lZENvbnRlbnQuaW5jbHVkZXMoJ2NvbnN0ICcpIHx8XG4gICAgICAgICAgICB0cmltbWVkQ29udGVudC5pbmNsdWRlcygnbGV0ICcpIHx8IHRyaW1tZWRDb250ZW50LmluY2x1ZGVzKCd2YXIgJykgfHxcbiAgICAgICAgICAgIHRyaW1tZWRDb250ZW50LmluY2x1ZGVzKCc9PicpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2phdmFzY3JpcHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIENTUyBwYXR0ZXJuc1xuICAgICAgICBpZiAodHJpbW1lZENvbnRlbnQuaW5jbHVkZXMoJ3snKSAmJiB0cmltbWVkQ29udGVudC5pbmNsdWRlcygnOicpICYmXG4gICAgICAgICAgICB0cmltbWVkQ29udGVudC5pbmNsdWRlcygnOycpICYmIHRyaW1tZWRDb250ZW50LmluY2x1ZGVzKCd9JykpIHtcbiAgICAgICAgICAgIHJldHVybiAnY3NzJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGZvciBTUUwgcGF0dGVybnNcbiAgICAgICAgaWYgKHRyaW1tZWRDb250ZW50LnRvVXBwZXJDYXNlKCkuaW5jbHVkZXMoJ1NFTEVDVCAnKSB8fFxuICAgICAgICAgICAgdHJpbW1lZENvbnRlbnQudG9VcHBlckNhc2UoKS5pbmNsdWRlcygnSU5TRVJUICcpIHx8XG4gICAgICAgICAgICB0cmltbWVkQ29udGVudC50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKCdVUERBVEUgJykgfHxcbiAgICAgICAgICAgIHRyaW1tZWRDb250ZW50LnRvVXBwZXJDYXNlKCkuaW5jbHVkZXMoJ0NSRUFURSBUQUJMRScpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3NxbCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBmaWxlIGV4dGVuc2lvbiBmcm9tIGxhbmd1YWdlXG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0RXh0ZW5zaW9uRnJvbUxhbmd1YWdlKGxhbmd1YWdlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBzd2l0Y2ggKGxhbmd1YWdlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgJ3B5dGhvbic6IHJldHVybiAncHknO1xuICAgICAgICAgICAgY2FzZSAnamF2YXNjcmlwdCc6IHJldHVybiAnanMnO1xuICAgICAgICAgICAgY2FzZSAndHlwZXNjcmlwdCc6IHJldHVybiAndHMnO1xuICAgICAgICAgICAgY2FzZSAnaHRtbCc6IHJldHVybiAnaHRtbCc7XG4gICAgICAgICAgICBjYXNlICdjc3MnOiByZXR1cm4gJ2Nzcyc7XG4gICAgICAgICAgICBjYXNlICdtYXJrZG93bic6IHJldHVybiAnbWQnO1xuICAgICAgICAgICAgY2FzZSAnanNvbic6IHJldHVybiAnanNvbic7XG4gICAgICAgICAgICBjYXNlICd5YW1sJzogcmV0dXJuICd5bWwnO1xuICAgICAgICAgICAgY2FzZSAneG1sJzogcmV0dXJuICd4bWwnO1xuICAgICAgICAgICAgY2FzZSAnc3FsJzogcmV0dXJuICdzcWwnO1xuICAgICAgICAgICAgY2FzZSAnYmFzaCc6IHJldHVybiAnc2gnO1xuICAgICAgICAgICAgY2FzZSAnc2hlbGwnOiByZXR1cm4gJ3NoJztcbiAgICAgICAgICAgIGNhc2UgJ3BocCc6IHJldHVybiAncGhwJztcbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiAndHh0JztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvdW50IHVuaXF1ZSBhcnRpZmFjdHMgaW4gYSBjb252ZXJzYXRpb24gKGJ5IGFydGlmYWN0IElELCBub3QgdmVyc2lvbnMpXG4gICAgICovXG4gICAgc3RhdGljIGNvdW50QXJ0aWZhY3RzKGNoYXQ6IENsYXVkZUNvbnZlcnNhdGlvbik6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHVuaXF1ZUFydGlmYWN0cyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBjaGF0LmNoYXRfbWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJsb2NrIG9mIG1lc3NhZ2UuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2sudHlwZSA9PT0gJ3Rvb2xfdXNlJyAmJiBibG9jay5uYW1lID09PSAnYXJ0aWZhY3RzJyAmJiBibG9jay5pbnB1dD8uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZUFydGlmYWN0cy5hZGQoYmxvY2suaW5wdXQuaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuaXF1ZUFydGlmYWN0cy5zaXplO1xuICAgIH1cbn1cbiIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuXG4vLyBzcmMvcHJvdmlkZXJzL2NsYXVkZS9jbGF1ZGUtYXR0YWNobWVudC1leHRyYWN0b3IudHNcbmltcG9ydCBKU1ppcCBmcm9tIFwianN6aXBcIjtcbmltcG9ydCB7IFN0YW5kYXJkQXR0YWNobWVudCB9IGZyb20gXCIuLi8uLi90eXBlcy9zdGFuZGFyZFwiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3BsdWdpblwiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vLi4vbWFpblwiO1xuXG5leHBvcnQgY2xhc3MgQ2xhdWRlQXR0YWNobWVudEV4dHJhY3RvciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luLFxuICAgICAgICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyXG4gICAgKSB7fVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdCBhdHRhY2htZW50cyBmcm9tIENsYXVkZSBaSVAgYXJjaGl2ZVxuICAgICAqIE5PVEU6IENsYXVkZSBleHBvcnRzIHR5cGljYWxseSBkbyBOT1QgaW5jbHVkZSB0aGUgYWN0dWFsIGZpbGVzLCBvbmx5IHJlZmVyZW5jZXNcbiAgICAgKiBUaGlzIG1ldGhvZCBoYW5kbGVzIHRoZSBcImZpbGVzIG5vdCBmb3VuZFwiIGNhc2UgZ3JhY2VmdWxseVxuICAgICAqL1xuICAgIGFzeW5jIGV4dHJhY3RBdHRhY2htZW50cyhcbiAgICAgICAgemlwOiBKU1ppcCxcbiAgICAgICAgY29udmVyc2F0aW9uSWQ6IHN0cmluZyxcbiAgICAgICAgYXR0YWNobWVudHM6IFN0YW5kYXJkQXR0YWNobWVudFtdXG4gICAgKTogUHJvbWlzZTxTdGFuZGFyZEF0dGFjaG1lbnRbXT4ge1xuICAgICAgICBpZiAoYXR0YWNobWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYXR0YWNobWVudHMubWFwKGF0dCA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLmF0dCxcbiAgICAgICAgICAgICAgICBleHRyYWN0ZWRDb250ZW50OiBgRmlsZTogJHthdHQuZmlsZU5hbWV9IChubyBhdHRhY2htZW50cyB0byBwcm9jZXNzKWBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZEF0dGFjaG1lbnRzOiBTdGFuZGFyZEF0dGFjaG1lbnRbXSA9IFtdO1xuXG4gICAgICAgIGZvciAoY29uc3QgYXR0YWNobWVudCBvZiBhdHRhY2htZW50cykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRBdHRhY2htZW50ID0gYXdhaXQgdGhpcy5wcm9jZXNzQXR0YWNobWVudCh6aXAsIGNvbnZlcnNhdGlvbklkLCBhdHRhY2htZW50KTtcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWRBdHRhY2htZW50cy5wdXNoKHByb2Nlc3NlZEF0dGFjaG1lbnQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgRmFpbGVkIHRvIHByb2Nlc3MgQ2xhdWRlIGF0dGFjaG1lbnQgJHthdHRhY2htZW50LmZpbGVOYW1lfTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBhdHRhY2htZW50IHdpdGggZXJyb3Igc3RhdHVzXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkQXR0YWNobWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIC4uLmF0dGFjaG1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQ6IGBcdTI3NEMgKipGaWxlOiAke2F0dGFjaG1lbnQuZmlsZU5hbWV9KipcXG5cXG5FcnJvciBwcm9jZXNzaW5nIGF0dGFjaG1lbnQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHByb2Nlc3NlZEF0dGFjaG1lbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgYSBzaW5nbGUgQ2xhdWRlIGF0dGFjaG1lbnRcbiAgICAgKiBDbGF1ZGUgZXhwb3J0cyB0eXBpY2FsbHkgZG9uJ3QgaW5jbHVkZSBmaWxlcywgc28gd2UgY3JlYXRlIGluZm9ybWF0aXZlIHBsYWNlaG9sZGVyc1xuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcHJvY2Vzc0F0dGFjaG1lbnQoXG4gICAgICAgIHppcDogSlNaaXAsXG4gICAgICAgIGNvbnZlcnNhdGlvbklkOiBzdHJpbmcsXG4gICAgICAgIGF0dGFjaG1lbnQ6IFN0YW5kYXJkQXR0YWNobWVudFxuICAgICk6IFByb21pc2U8U3RhbmRhcmRBdHRhY2htZW50PiB7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYXR0YWNobWVudC5maWxlTmFtZTtcblxuICAgICAgICAvLyBUcnkgdG8gZmluZCB0aGUgZmlsZSBpbiB0aGUgWklQICh1bmxpa2VseSBmb3IgQ2xhdWRlIGV4cG9ydHMpXG4gICAgICAgIGNvbnN0IHppcEZpbGUgPSB0aGlzLmZpbmRGaWxlSW5aaXAoemlwLCBmaWxlTmFtZSk7XG5cbiAgICAgICAgaWYgKCF6aXBGaWxlKSB7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBub3JtYWwgY2FzZSBmb3IgQ2xhdWRlIC0gZmlsZXMgYXJlIG5vdCBpbmNsdWRlZCBpbiBleHBvcnRcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUZpbGVOb3RGb3VuZFBsYWNlaG9sZGVyKGF0dGFjaG1lbnQsIGNvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGZpbGUgaXMgZm91bmQgKHJhcmUpLCBleHRyYWN0IGl0XG4gICAgICAgIGlmICh0aGlzLmlzSW1hZ2VGaWxlKGZpbGVOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2Vzc0ltYWdlQXR0YWNobWVudCh6aXBGaWxlLCBhdHRhY2htZW50LCBjb252ZXJzYXRpb25JZCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1RleHRGaWxlKGZpbGVOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2Vzc1RleHRBdHRhY2htZW50KHppcEZpbGUsIGF0dGFjaG1lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2Vzc0JpbmFyeUF0dGFjaG1lbnQoemlwRmlsZSwgYXR0YWNobWVudCwgY29udmVyc2F0aW9uSWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHNpbXBsZSBwbGFjZWhvbGRlciBmb3IgbWlzc2luZyBmaWxlcyAobm9ybWFsIGZvciBDbGF1ZGUpXG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVGaWxlTm90Rm91bmRQbGFjZWhvbGRlcihhdHRhY2htZW50OiBTdGFuZGFyZEF0dGFjaG1lbnQsIGNvbnZlcnNhdGlvbklkOiBzdHJpbmcpOiBTdGFuZGFyZEF0dGFjaG1lbnQge1xuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGF0dGFjaG1lbnQuZmlsZU5hbWU7XG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvblVybCA9IGBodHRwczovL2NsYXVkZS5haS9jaGF0LyR7Y29udmVyc2F0aW9uSWR9YDtcbiAgICAgICAgY29uc3QgZmlsZVR5cGUgPSB0aGlzLmdldEZpbGVUeXBlRnJvbUV4dGVuc2lvbihmaWxlTmFtZSk7XG5cbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBgPj5bIW5leHVzX2F0dGFjaG1lbnRdICoqJHtmaWxlTmFtZX0qKiAoJHtmaWxlVHlwZX0pXFxuPj4gXHUyNkEwXHVGRTBGIE5vdCBpbmNsdWRlZCBpbiBhcmNoaXZlLiBbT3BlbiBvcmlnaW5hbCBjb252ZXJzYXRpb25dKCR7Y29udmVyc2F0aW9uVXJsfSlgO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5hdHRhY2htZW50LFxuICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudDogcGxhY2Vob2xkZXJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgZmlsZSB0eXBlIGZyb20gZXh0ZW5zaW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRGaWxlVHlwZUZyb21FeHRlbnNpb24oZmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGVOYW1lLnNwbGl0KCcuJykucG9wKCk/LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgc3dpdGNoIChleHRlbnNpb24pIHtcbiAgICAgICAgICAgIGNhc2UgJ3BuZyc6XG4gICAgICAgICAgICBjYXNlICdqcGcnOlxuICAgICAgICAgICAgY2FzZSAnanBlZyc6XG4gICAgICAgICAgICBjYXNlICdnaWYnOlxuICAgICAgICAgICAgY2FzZSAnd2VicCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBpbWFnZS8ke2V4dGVuc2lvbn1gO1xuICAgICAgICAgICAgY2FzZSAncGRmJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FwcGxpY2F0aW9uL3BkZic7XG4gICAgICAgICAgICBjYXNlICd0eHQnOlxuICAgICAgICAgICAgICAgIHJldHVybiAndGV4dC9wbGFpbic7XG4gICAgICAgICAgICBjYXNlICdtZCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd0ZXh0L21hcmtkb3duJztcbiAgICAgICAgICAgIGNhc2UgJ2pzb24nOlxuICAgICAgICAgICAgICAgIHJldHVybiAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgYSBmaWxlIGluIHRoZSBaSVAgYXJjaGl2ZVxuICAgICAqIENsYXVkZSBmaWxlcyBtaWdodCBiZSBpbiByb290IG9yIGluIHN1YmRpcmVjdG9yaWVzXG4gICAgICovXG4gICAgcHJpdmF0ZSBmaW5kRmlsZUluWmlwKHppcDogSlNaaXAsIGZpbGVOYW1lOiBzdHJpbmcpOiBKU1ppcC5KU1ppcE9iamVjdCB8IG51bGwge1xuICAgICAgICAvLyBUcnkgZXhhY3QgbWF0Y2ggZmlyc3RcbiAgICAgICAgbGV0IGZpbGUgPSB6aXAuZmlsZShmaWxlTmFtZSk7XG4gICAgICAgIGlmIChmaWxlKSByZXR1cm4gZmlsZTtcblxuICAgICAgICAvLyBUcnkgaW4gY29tbW9uIHN1YmRpcmVjdG9yaWVzXG4gICAgICAgIGNvbnN0IGNvbW1vblBhdGhzID0gWydhdHRhY2htZW50cy8nLCAnZmlsZXMvJywgJ3VwbG9hZHMvJ107XG4gICAgICAgIGZvciAoY29uc3QgcGF0aCBvZiBjb21tb25QYXRocykge1xuICAgICAgICAgICAgZmlsZSA9IHppcC5maWxlKHBhdGggKyBmaWxlTmFtZSk7XG4gICAgICAgICAgICBpZiAoZmlsZSkgcmV0dXJuIGZpbGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZWFyY2ggdGhyb3VnaCBhbGwgZmlsZXMgZm9yIGEgbWF0Y2hcbiAgICAgICAgY29uc3QgYWxsRmlsZXMgPSBPYmplY3Qua2V5cyh6aXAuZmlsZXMpO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIGFsbEZpbGVzKSB7XG4gICAgICAgICAgICBpZiAoZmlsZVBhdGguZW5kc1dpdGgoZmlsZU5hbWUpIHx8IGZpbGVQYXRoLmluY2x1ZGVzKGZpbGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB6aXAuZmlsZShmaWxlUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGltYWdlIGF0dGFjaG1lbnRcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHByb2Nlc3NJbWFnZUF0dGFjaG1lbnQoXG4gICAgICAgIHppcEZpbGU6IEpTWmlwLkpTWmlwT2JqZWN0LFxuICAgICAgICBhdHRhY2htZW50OiBTdGFuZGFyZEF0dGFjaG1lbnQsXG4gICAgICAgIGNvbnZlcnNhdGlvbklkOiBzdHJpbmdcbiAgICApOiBQcm9taXNlPFN0YW5kYXJkQXR0YWNobWVudD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gYXdhaXQgemlwRmlsZS5hc3luYyhcImJhc2U2NFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZVVuaXF1ZUZpbGVOYW1lKGF0dGFjaG1lbnQuZmlsZU5hbWUsIGNvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2F2ZSB0byB2YXVsdCAoYWx3YXlzIGVuYWJsZWQpXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuc2F2ZUF0dGFjaG1lbnRUb1ZhdWx0KGZpbGVOYW1lLCBpbWFnZURhdGEsIHRydWUsIFwiaW1hZ2VzXCIpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmF0dGFjaG1lbnQsXG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGVOYW1lLFxuICAgICAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQ6IGAhWyR7YXR0YWNobWVudC5maWxlTmFtZX1dKCR7ZmlsZVBhdGh9KWBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBDbGF1ZGUgaW1hZ2UgJHthdHRhY2htZW50LmZpbGVOYW1lfTpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmF0dGFjaG1lbnQsXG4gICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudDogYEVycm9yIHByb2Nlc3NpbmcgaW1hZ2U6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgdGV4dCBhdHRhY2htZW50XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzVGV4dEF0dGFjaG1lbnQoXG4gICAgICAgIHppcEZpbGU6IEpTWmlwLkpTWmlwT2JqZWN0LFxuICAgICAgICBhdHRhY2htZW50OiBTdGFuZGFyZEF0dGFjaG1lbnRcbiAgICApOiBQcm9taXNlPFN0YW5kYXJkQXR0YWNobWVudD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGV4dENvbnRlbnQgPSBhd2FpdCB6aXBGaWxlLmFzeW5jKFwic3RyaW5nXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmF0dGFjaG1lbnQsXG4gICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudDogYFxcYFxcYFxcYFxcbiR7dGV4dENvbnRlbnR9XFxuXFxgXFxgXFxgYFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIENsYXVkZSB0ZXh0IGZpbGUgJHthdHRhY2htZW50LmZpbGVOYW1lfTpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmF0dGFjaG1lbnQsXG4gICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudDogYEVycm9yIHJlYWRpbmcgdGV4dCBmaWxlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGJpbmFyeSBhdHRhY2htZW50XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzQmluYXJ5QXR0YWNobWVudChcbiAgICAgICAgemlwRmlsZTogSlNaaXAuSlNaaXBPYmplY3QsXG4gICAgICAgIGF0dGFjaG1lbnQ6IFN0YW5kYXJkQXR0YWNobWVudCxcbiAgICAgICAgY29udmVyc2F0aW9uSWQ6IHN0cmluZ1xuICAgICk6IFByb21pc2U8U3RhbmRhcmRBdHRhY2htZW50PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiaW5hcnlEYXRhID0gYXdhaXQgemlwRmlsZS5hc3luYyhcImJhc2U2NFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZVVuaXF1ZUZpbGVOYW1lKGF0dGFjaG1lbnQuZmlsZU5hbWUsIGNvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5zYXZlQXR0YWNobWVudFRvVmF1bHQoZmlsZU5hbWUsIGJpbmFyeURhdGEsIHRydWUsIFwiZG9jdW1lbnRzXCIpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmF0dGFjaG1lbnQsXG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGVOYW1lLFxuICAgICAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQ6IGBbJHthdHRhY2htZW50LmZpbGVOYW1lfV0oJHtmaWxlUGF0aH0pYFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIENsYXVkZSBiaW5hcnkgZmlsZSAke2F0dGFjaG1lbnQuZmlsZU5hbWV9OmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uYXR0YWNobWVudCxcbiAgICAgICAgICAgICAgICBleHRyYWN0ZWRDb250ZW50OiBgRXJyb3IgcHJvY2Vzc2luZyBmaWxlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBmaWxlIGlzIGFuIGltYWdlXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc0ltYWdlRmlsZShmaWxlTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGltYWdlRXh0ZW5zaW9ucyA9IFsnLnBuZycsICcuanBnJywgJy5qcGVnJywgJy5naWYnLCAnLndlYnAnLCAnLnN2ZycsICcuYm1wJ107XG4gICAgICAgIHJldHVybiBpbWFnZUV4dGVuc2lvbnMuc29tZShleHQgPT4gZmlsZU5hbWUudG9Mb3dlckNhc2UoKS5lbmRzV2l0aChleHQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBmaWxlIGlzIGEgdGV4dCBmaWxlXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc1RleHRGaWxlKGZpbGVOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgdGV4dEV4dGVuc2lvbnMgPSBbJy50eHQnLCAnLm1kJywgJy5qc29uJywgJy5jc3YnLCAnLnhtbCcsICcuaHRtbCcsICcuY3NzJywgJy5qcycsICcudHMnLCAnLnB5JywgJy5qYXZhJywgJy5jcHAnLCAnLmMnLCAnLmgnXTtcbiAgICAgICAgcmV0dXJuIHRleHRFeHRlbnNpb25zLnNvbWUoZXh0ID0+IGZpbGVOYW1lLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoZXh0KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgdW5pcXVlIGZpbGVuYW1lIHRvIGF2b2lkIGNvbmZsaWN0c1xuICAgICAqL1xuICAgIHByaXZhdGUgZ2VuZXJhdGVVbmlxdWVGaWxlTmFtZShvcmlnaW5hbEZpbGVOYW1lOiBzdHJpbmcsIGNvbnZlcnNhdGlvbklkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBzaG9ydENvbnZlcnNhdGlvbklkID0gY29udmVyc2F0aW9uSWQuc3Vic3RyaW5nKDAsIDgpO1xuICAgICAgICBjb25zdCBleHRlbnNpb24gPSBvcmlnaW5hbEZpbGVOYW1lLmluY2x1ZGVzKCcuJykgPyBvcmlnaW5hbEZpbGVOYW1lLnNwbGl0KCcuJykucG9wKCkgOiAnJztcbiAgICAgICAgY29uc3QgYmFzZU5hbWUgPSBvcmlnaW5hbEZpbGVOYW1lLnJlcGxhY2UoL1xcLlteLy5dKyQvLCBcIlwiKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBleHRlbnNpb24gXG4gICAgICAgICAgICA/IGBjbGF1ZGVfJHtzaG9ydENvbnZlcnNhdGlvbklkfV8ke3RpbWVzdGFtcH1fJHtiYXNlTmFtZX0uJHtleHRlbnNpb259YFxuICAgICAgICAgICAgOiBgY2xhdWRlXyR7c2hvcnRDb252ZXJzYXRpb25JZH1fJHt0aW1lc3RhbXB9XyR7YmFzZU5hbWV9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlIGF0dGFjaG1lbnQgdG8gdmF1bHQgdXNpbmcgYXR0YWNobWVudEZvbGRlciBzZXR0aW5nXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlQXR0YWNobWVudFRvVmF1bHQoZmlsZU5hbWU6IHN0cmluZywgZGF0YTogc3RyaW5nLCBpc0Jhc2U2NDogYm9vbGVhbiwgY2F0ZWdvcnk6IHN0cmluZyA9IFwiZmlsZXNcIik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGF0dGFjaG1lbnRGb2xkZXIgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdHRhY2htZW50Rm9sZGVyfS9jbGF1ZGUvJHtjYXRlZ29yeX1gO1xuXG4gICAgICAgIC8vIEVuc3VyZSBmb2xkZXIgZXhpc3RzXG4gICAgICAgIGNvbnN0IHsgZW5zdXJlRm9sZGVyRXhpc3RzIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi8uLi91dGlsc1wiKTtcbiAgICAgICAgY29uc3QgZm9sZGVyUmVzdWx0ID0gYXdhaXQgZW5zdXJlRm9sZGVyRXhpc3RzKGF0dGFjaG1lbnRGb2xkZXIsIHRoaXMucGx1Z2luLmFwcC52YXVsdCk7XG4gICAgICAgIGlmICghZm9sZGVyUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBDbGF1ZGUgYXR0YWNobWVudCBmb2xkZXI6ICR7Zm9sZGVyUmVzdWx0LmVycm9yfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHthdHRhY2htZW50Rm9sZGVyfS8ke2ZpbGVOYW1lfWA7XG5cbiAgICAgICAgaWYgKGlzQmFzZTY0KSB7XG4gICAgICAgICAgICAvLyBDb252ZXJ0IGJhc2U2NCB0byBhcnJheSBidWZmZXIgZm9yIGJpbmFyeSBmaWxlc1xuICAgICAgICAgICAgY29uc3QgYmluYXJ5U3RyaW5nID0gYXRvYihkYXRhKTtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5U3RyaW5nLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeVN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlQmluYXJ5KGZpbGVQYXRoLCBieXRlcy5idWZmZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmlsZVBhdGg7XG4gICAgfVxufVxuIiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy9wcm92aWRlcnMvY2xhdWRlL2NsYXVkZS1yZXBvcnQtbmFtaW5nLnRzXG5pbXBvcnQgeyBSZXBvcnROYW1pbmdTdHJhdGVneSB9IGZyb20gXCIuLi8uLi90eXBlcy9zdGFuZGFyZFwiO1xuXG5leHBvcnQgY2xhc3MgQ2xhdWRlUmVwb3J0TmFtaW5nU3RyYXRlZ3kgaW1wbGVtZW50cyBSZXBvcnROYW1pbmdTdHJhdGVneSB7XG4gICAgZ2V0UHJvdmlkZXJOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcImNsYXVkZVwiO1xuICAgIH1cblxuICAgIGV4dHJhY3RSZXBvcnRQcmVmaXgoemlwRmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIC8vIEdldCBjdXJyZW50IGltcG9ydCBkYXRlXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IGltcG9ydFllYXIgPSBub3cuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgaW1wb3J0TW9udGggPSBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBpbXBvcnREYXkgPSBTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgaW1wb3J0RGF0ZSA9IGAke2ltcG9ydFllYXJ9LiR7aW1wb3J0TW9udGh9LiR7aW1wb3J0RGF5fWA7XG5cbiAgICAgICAgLy8gVHJ5IHRvIGV4dHJhY3QgYXJjaGl2ZSBkYXRlIGZyb20gQ2xhdWRlIGZpbGVuYW1lIHBhdHRlcm5zXG4gICAgICAgIC8vIFBhdHRlcm4gMTogZGF0YS1ZWVlZLU1NLURELUhILU1NLVNTLWJhdGNoLU5OTk4uemlwXG4gICAgICAgIGNvbnN0IGNsYXVkZUJhdGNoUGF0dGVybiA9IC9kYXRhLShcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pLVxcZHsyfS1cXGR7Mn0tXFxkezJ9LWJhdGNoLVxcZHs0fS87XG4gICAgICAgIGNvbnN0IGJhdGNoTWF0Y2ggPSB6aXBGaWxlTmFtZS5tYXRjaChjbGF1ZGVCYXRjaFBhdHRlcm4pO1xuXG4gICAgICAgIGlmIChiYXRjaE1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBbLCB5ZWFyLCBtb250aCwgZGF5XSA9IGJhdGNoTWF0Y2g7XG4gICAgICAgICAgICBjb25zdCBhcmNoaXZlRGF0ZSA9IGAke3llYXJ9LiR7bW9udGh9LiR7ZGF5fWA7XG4gICAgICAgICAgICByZXR1cm4gYGltcG9ydGVkLSR7aW1wb3J0RGF0ZX0tYXJjaGl2ZS0ke2FyY2hpdmVEYXRlfWA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQYXR0ZXJuIDI6IExlZ2FjeSBDbGF1ZGUgZm9ybWF0IChubyBiYXRjaCBzdWZmaXgpXG4gICAgICAgIGNvbnN0IGxlZ2FjeVBhdHRlcm4gPSAvKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSkvO1xuICAgICAgICBjb25zdCBsZWdhY3lNYXRjaCA9IHppcEZpbGVOYW1lLm1hdGNoKGxlZ2FjeVBhdHRlcm4pO1xuXG4gICAgICAgIGlmIChsZWdhY3lNYXRjaCkge1xuICAgICAgICAgICAgY29uc3QgWywgeWVhciwgbW9udGgsIGRheV0gPSBsZWdhY3lNYXRjaDtcbiAgICAgICAgICAgIGNvbnN0IGFyY2hpdmVEYXRlID0gYCR7eWVhcn0uJHttb250aH0uJHtkYXl9YDtcbiAgICAgICAgICAgIHJldHVybiBgaW1wb3J0ZWQtJHtpbXBvcnREYXRlfS1hcmNoaXZlLSR7YXJjaGl2ZURhdGV9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZhbGxiYWNrOiB1c2UgY3VycmVudCBkYXRlIGlmIG5vIGRhdGUgZm91bmQgaW4gZmlsZW5hbWVcbiAgICAgICAgcmV0dXJuIGBpbXBvcnRlZC0ke2ltcG9ydERhdGV9LWFyY2hpdmUtJHtpbXBvcnREYXRlfWA7XG4gICAgfVxuXG4gICAgZ2V0UHJvdmlkZXJTcGVjaWZpY0NvbHVtbigpOiB7IGhlYWRlcjogc3RyaW5nOyBnZXRWYWx1ZTogKGFkYXB0ZXI6IGFueSwgY2hhdDogYW55KSA9PiBudW1iZXIgfSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoZWFkZXI6IFwiQXJ0aWZhY3RzXCIsXG4gICAgICAgICAgICBnZXRWYWx1ZTogKGFkYXB0ZXI6IGFueSwgY2hhdDogYW55KSA9PiBhZGFwdGVyLmNvdW50QXJ0aWZhY3RzID8gYWRhcHRlci5jb3VudEFydGlmYWN0cyhjaGF0KSA6IDBcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3Byb3ZpZGVycy9jbGF1ZGUvY2xhdWRlLWFkYXB0ZXIudHNcbmltcG9ydCBKU1ppcCBmcm9tIFwianN6aXBcIjtcbmltcG9ydCB7IFByb3ZpZGVyQWRhcHRlciB9IGZyb20gXCIuLi9wcm92aWRlci1hZGFwdGVyXCI7XG5pbXBvcnQgeyBTdGFuZGFyZENvbnZlcnNhdGlvbiwgU3RhbmRhcmRNZXNzYWdlIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3N0YW5kYXJkXCI7XG5pbXBvcnQgeyBDbGF1ZGVDb252ZXJ0ZXIgfSBmcm9tIFwiLi9jbGF1ZGUtY29udmVydGVyXCI7XG5pbXBvcnQgeyBDbGF1ZGVBdHRhY2htZW50RXh0cmFjdG9yIH0gZnJvbSBcIi4vY2xhdWRlLWF0dGFjaG1lbnQtZXh0cmFjdG9yXCI7XG5pbXBvcnQgeyBDbGF1ZGVSZXBvcnROYW1pbmdTdHJhdGVneSB9IGZyb20gXCIuL2NsYXVkZS1yZXBvcnQtbmFtaW5nXCI7XG5pbXBvcnQgeyBDbGF1ZGVDb252ZXJzYXRpb24sIENsYXVkZU1lc3NhZ2UgfSBmcm9tIFwiLi9jbGF1ZGUtdHlwZXNcIjtcbmltcG9ydCB0eXBlIE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcblxuZXhwb3J0IGNsYXNzIENsYXVkZUFkYXB0ZXIgaW1wbGVtZW50cyBQcm92aWRlckFkYXB0ZXI8Q2xhdWRlQ29udmVyc2F0aW9uPiB7XG4gICAgcHJpdmF0ZSBhdHRhY2htZW50RXh0cmFjdG9yOiBDbGF1ZGVBdHRhY2htZW50RXh0cmFjdG9yO1xuICAgIHByaXZhdGUgcmVwb3J0TmFtaW5nU3RyYXRlZ3k6IENsYXVkZVJlcG9ydE5hbWluZ1N0cmF0ZWd5O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5hdHRhY2htZW50RXh0cmFjdG9yID0gbmV3IENsYXVkZUF0dGFjaG1lbnRFeHRyYWN0b3IocGx1Z2luLCBwbHVnaW4ubG9nZ2VyKTtcbiAgICAgICAgdGhpcy5yZXBvcnROYW1pbmdTdHJhdGVneSA9IG5ldyBDbGF1ZGVSZXBvcnROYW1pbmdTdHJhdGVneSgpO1xuICAgIH1cblxuICAgIGRldGVjdChyYXdDb252ZXJzYXRpb25zOiBhbnlbXSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAocmF3Q29udmVyc2F0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcblxuICAgICAgICBjb25zdCBzYW1wbGUgPSByYXdDb252ZXJzYXRpb25zWzBdO1xuXG4gICAgICAgIC8vIENsYXVkZSBkZXRlY3Rpb246IGhhcyB1dWlkLCBuYW1lIGZpZWxkLCBjaGF0X21lc3NhZ2VzIGFycmF5LCBjcmVhdGVkX2F0L3VwZGF0ZWRfYXRcbiAgICAgICAgLy8gTm90ZTogJ2FjY291bnQnIGZpZWxkIGlzIG9wdGlvbmFsIChub3QgcHJlc2VudCBpbiBvbGRlciBDbGF1ZGUgZXhwb3J0cylcbiAgICAgICAgcmV0dXJuICEhKHNhbXBsZS51dWlkICYmICduYW1lJyBpbiBzYW1wbGUgJiYgc2FtcGxlLmNoYXRfbWVzc2FnZXMgJiZcbiAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShzYW1wbGUuY2hhdF9tZXNzYWdlcykgJiYgc2FtcGxlLmNyZWF0ZWRfYXQgJiYgc2FtcGxlLnVwZGF0ZWRfYXQpO1xuICAgIH1cblxuICAgIGdldElkKGNoYXQ6IENsYXVkZUNvbnZlcnNhdGlvbik6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBjaGF0LnV1aWQgfHwgXCJcIjtcbiAgICB9XG5cbiAgICBnZXRUaXRsZShjaGF0OiBDbGF1ZGVDb252ZXJzYXRpb24pOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gY2hhdC5uYW1lIHx8IFwiVW50aXRsZWRcIjtcbiAgICB9XG5cbiAgICBnZXRDcmVhdGVUaW1lKGNoYXQ6IENsYXVkZUNvbnZlcnNhdGlvbik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBjaGF0LmNyZWF0ZWRfYXQgPyBNYXRoLmZsb29yKG5ldyBEYXRlKGNoYXQuY3JlYXRlZF9hdCkuZ2V0VGltZSgpIC8gMTAwMCkgOiAwO1xuICAgIH1cblxuICAgIGdldFVwZGF0ZVRpbWUoY2hhdDogQ2xhdWRlQ29udmVyc2F0aW9uKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGNoYXQudXBkYXRlZF9hdCA/IE1hdGguZmxvb3IobmV3IERhdGUoY2hhdC51cGRhdGVkX2F0KS5nZXRUaW1lKCkgLyAxMDAwKSA6IDA7XG4gICAgfVxuXG4gICAgYXN5bmMgY29udmVydENoYXQoY2hhdDogQ2xhdWRlQ29udmVyc2F0aW9uKTogUHJvbWlzZTxTdGFuZGFyZENvbnZlcnNhdGlvbj4ge1xuICAgICAgICAvLyBTZXQgcGx1Z2luIGluc3RhbmNlIGZvciBhcnRpZmFjdCBzYXZpbmdcbiAgICAgICAgQ2xhdWRlQ29udmVydGVyLnNldFBsdWdpbih0aGlzLnBsdWdpbik7XG4gICAgICAgIHJldHVybiBhd2FpdCBDbGF1ZGVDb252ZXJ0ZXIuY29udmVydENoYXQoY2hhdCk7XG4gICAgfVxuXG4gICAgYXN5bmMgY29udmVydE1lc3NhZ2VzKG1lc3NhZ2VzOiBDbGF1ZGVNZXNzYWdlW10sIGNvbnZlcnNhdGlvbklkPzogc3RyaW5nLCBjb252ZXJzYXRpb25UaXRsZT86IHN0cmluZywgY29udmVyc2F0aW9uQ3JlYXRlVGltZT86IG51bWJlcik6IFByb21pc2U8U3RhbmRhcmRNZXNzYWdlW10+IHtcbiAgICAgICAgLy8gU2V0IHBsdWdpbiBpbnN0YW5jZSBmb3IgYXJ0aWZhY3Qgc2F2aW5nXG4gICAgICAgIENsYXVkZUNvbnZlcnRlci5zZXRQbHVnaW4odGhpcy5wbHVnaW4pO1xuICAgICAgICByZXR1cm4gYXdhaXQgQ2xhdWRlQ29udmVydGVyLmNvbnZlcnRNZXNzYWdlcyhtZXNzYWdlcywgY29udmVyc2F0aW9uSWQsIGNvbnZlcnNhdGlvblRpdGxlLCBjb252ZXJzYXRpb25DcmVhdGVUaW1lKTtcbiAgICB9XG5cbiAgICBnZXRQcm92aWRlck5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiY2xhdWRlXCI7XG4gICAgfVxuXG4gICAgZ2V0TmV3TWVzc2FnZXMoY2hhdDogQ2xhdWRlQ29udmVyc2F0aW9uLCBleGlzdGluZ01lc3NhZ2VJZHM6IHN0cmluZ1tdKTogQ2xhdWRlTWVzc2FnZVtdIHtcbiAgICAgICAgY29uc3QgbmV3TWVzc2FnZXM6IENsYXVkZU1lc3NhZ2VbXSA9IFtdO1xuXG4gICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBjaGF0LmNoYXRfbWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnV1aWQgJiYgIWV4aXN0aW5nTWVzc2FnZUlkcy5pbmNsdWRlcyhtZXNzYWdlLnV1aWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkSW5jbHVkZU1lc3NhZ2UobWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3TWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3TWVzc2FnZXM7XG4gICAgfVxuXG4gICAgYXN5bmMgcHJvY2Vzc01lc3NhZ2VBdHRhY2htZW50cyhcbiAgICAgICAgbWVzc2FnZXM6IFN0YW5kYXJkTWVzc2FnZVtdLFxuICAgICAgICBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxuICAgICAgICB6aXA6IEpTWmlwXG4gICAgKTogUHJvbWlzZTxTdGFuZGFyZE1lc3NhZ2VbXT4ge1xuICAgICAgICBjb25zdCBwcm9jZXNzZWRNZXNzYWdlczogU3RhbmRhcmRNZXNzYWdlW10gPSBbXTtcblxuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmF0dGFjaG1lbnRzICYmIG1lc3NhZ2UuYXR0YWNobWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZEF0dGFjaG1lbnRzID0gYXdhaXQgdGhpcy5hdHRhY2htZW50RXh0cmFjdG9yLmV4dHJhY3RBdHRhY2htZW50cyhcbiAgICAgICAgICAgICAgICAgICAgemlwLFxuICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hdHRhY2htZW50c1xuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBwcm9jZXNzZWRNZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgLi4ubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudHM6IHByb2Nlc3NlZEF0dGFjaG1lbnRzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZE1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcHJvY2Vzc2VkTWVzc2FnZXM7XG4gICAgfVxuXG4gICAgZ2V0UmVwb3J0TmFtaW5nU3RyYXRlZ3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcG9ydE5hbWluZ1N0cmF0ZWd5O1xuICAgIH1cblxuICAgIGdldFByb3ZpZGVyTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJjbGF1ZGVcIjtcbiAgICB9XG5cbiAgICBjb3VudEFydGlmYWN0cyhjaGF0OiBDbGF1ZGVDb252ZXJzYXRpb24pOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gQ2xhdWRlQ29udmVydGVyLmNvdW50QXJ0aWZhY3RzKGNoYXQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2hvdWxkSW5jbHVkZU1lc3NhZ2UobWVzc2FnZTogQ2xhdWRlTWVzc2FnZSk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBJbmNsdWRlIGFsbCBodW1hbiBhbmQgYXNzaXN0YW50IG1lc3NhZ2VzXG4gICAgICAgIGlmIChtZXNzYWdlLnNlbmRlciA9PT0gJ2h1bWFuJyB8fCBtZXNzYWdlLnNlbmRlciA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgICAgIC8vIFNraXAgZW1wdHkgbWVzc2FnZXNcbiAgICAgICAgICAgIGlmICghbWVzc2FnZS50ZXh0ICYmICghbWVzc2FnZS5jb250ZW50IHx8IG1lc3NhZ2UuY29udGVudC5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy9wcm92aWRlcnMvcHJvdmlkZXItcmVnaXN0cnkudHNcbmltcG9ydCB7IERlZmF1bHRQcm92aWRlclJlZ2lzdHJ5IH0gZnJvbSBcIi4vcHJvdmlkZXItYWRhcHRlclwiO1xuaW1wb3J0IHsgQ2hhdEdQVEFkYXB0ZXIgfSBmcm9tIFwiLi9jaGF0Z3B0L2NoYXRncHQtYWRhcHRlclwiO1xuaW1wb3J0IHsgQ2xhdWRlQWRhcHRlciB9IGZyb20gXCIuL2NsYXVkZS9jbGF1ZGUtYWRhcHRlclwiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuXG4vKipcbiAqIENyZWF0ZSBhbmQgY29uZmlndXJlIHRoZSBwcm92aWRlciByZWdpc3RyeSB3aXRoIGFsbCBhdmFpbGFibGUgcHJvdmlkZXJzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm92aWRlclJlZ2lzdHJ5KHBsdWdpbjogTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbik6IERlZmF1bHRQcm92aWRlclJlZ2lzdHJ5IHtcbiAgICBjb25zdCByZWdpc3RyeSA9IG5ldyBEZWZhdWx0UHJvdmlkZXJSZWdpc3RyeSgpO1xuXG4gICAgLy8gUmVnaXN0ZXIgQ2hhdEdQVCBwcm92aWRlclxuICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKFwiY2hhdGdwdFwiLCBuZXcgQ2hhdEdQVEFkYXB0ZXIocGx1Z2luKSk7XG5cbiAgICAvLyBSZWdpc3RlciBDbGF1ZGUgcHJvdmlkZXJcbiAgICByZWdpc3RyeS5yZWdpc3RlcihcImNsYXVkZVwiLCBuZXcgQ2xhdWRlQWRhcHRlcihwbHVnaW4pKTtcblxuICAgIC8vIEZ1dHVyZSBwcm92aWRlcnMgd2lsbCBiZSByZWdpc3RlcmVkIGhlcmU6XG4gICAgLy8gcmVnaXN0cnkucmVnaXN0ZXIoXCJnZW1pbmlcIiwgbmV3IEdlbWluaUFkYXB0ZXIocGx1Z2luKSk7XG5cbiAgICByZXR1cm4gcmVnaXN0cnk7XG59XG4iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL3VpL2ltcG9ydC1wcm9ncmVzcy1tb2RhbC50c1xuaW1wb3J0IHsgTW9kYWwsIEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEltcG9ydFByb2dyZXNzU3RlcCB7XG4gICAgcGhhc2U6ICd2YWxpZGF0aW9uJyB8ICdzY2FubmluZycgfCAncHJvY2Vzc2luZycgfCAnd3JpdGluZycgfCAnY29tcGxldGUnIHwgJ2Vycm9yJztcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRldGFpbD86IHN0cmluZztcbiAgICBjdXJyZW50PzogbnVtYmVyO1xuICAgIHRvdGFsPzogbnVtYmVyO1xuICAgIHBlcmNlbnRhZ2U/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1wb3J0UHJvZ3Jlc3NDYWxsYmFjayB7XG4gICAgKHN0ZXA6IEltcG9ydFByb2dyZXNzU3RlcCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBJbXBvcnRQcm9ncmVzc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgZmlsZU5hbWU6IHN0cmluZztcbiAgICBwcml2YXRlIHRvdGFsQ29udmVyc2F0aW9uczogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIGN1cnJlbnRDb252ZXJzYXRpb246IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBpc1NlbGVjdGl2ZUltcG9ydDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgc2VsZWN0ZWRDb3VudDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIHRvdGFsQXZhaWxhYmxlOiBudW1iZXIgPSAwO1xuXG4gICAgcHJpdmF0ZSBtb2RhbFRpdGxlRWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgcGhhc2VFbDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBwcm9ncmVzc0JhckVsOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHN0YXR1c0VsOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGRldGFpbEVsOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGNvbnZlcnNhdGlvbkNvdW50RWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgaW1wb3J0TW9kZUVsOiBIVE1MRWxlbWVudDtcbiAgICBwdWJsaWMgaXNDb21wbGV0ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGZpbGVOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5maWxlTmFtZSA9IGZpbGVOYW1lO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcyhcIm5leHVzLWltcG9ydC1wcm9ncmVzcy1tb2RhbFwiKTtcblxuICAgICAgICAvLyBUaXRsZVxuICAgICAgICB0aGlzLm1vZGFsVGl0bGVFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgXG4gICAgICAgICAgICB0ZXh0OiBgSW1wb3J0aW5nICR7dGhpcy5maWxlTmFtZX1gLCBcbiAgICAgICAgICAgIGNsczogXCJtb2RhbC10aXRsZVwiIFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjb250ZW50Q29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1jb250ZW50XCIgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBQaGFzZSBpbmRpY2F0b3JcbiAgICAgICAgdGhpcy5waGFzZUVsID0gY29udGVudENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJpbXBvcnQtcGhhc2VcIiB9KTtcbiAgICAgICAgdGhpcy5waGFzZUVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxLjFlbTtcbiAgICAgICAgYDtcblxuICAgICAgICAvLyBJbXBvcnQgbW9kZSBpbmRpY2F0b3JcbiAgICAgICAgdGhpcy5pbXBvcnRNb2RlRWwgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcImltcG9ydC1tb2RlXCIgfSk7XG4gICAgICAgIHRoaXMuaW1wb3J0TW9kZUVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBtYXJnaW46IDVweCAwIDEwcHggMDtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgYDtcblxuICAgICAgICAvLyBDb252ZXJzYXRpb24gY291bnRlclxuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbkNvdW50RWwgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcImNvbnZlcnNhdGlvbi1jb3VudGVyXCIgfSk7XG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uQ291bnRFbC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgbWFyZ2luOiA1cHggMCAxNXB4IDA7XG4gICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gUHJvZ3Jlc3MgYmFyIGNvbnRhaW5lclxuICAgICAgICBjb25zdCBwcm9ncmVzc0NvbnRhaW5lciA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInByb2dyZXNzLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICBwcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgICAgcGFkZGluZzogNHB4O1xuICAgICAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gUHJvZ3Jlc3MgYmFyXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXJFbCA9IHByb2dyZXNzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJwcm9ncmVzcy1iYXJcIiB9KTtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhckVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCksIHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3ZlcikpO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgd2lkdGg6IDAlO1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogd2lkdGggMC4zcyBlYXNlO1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBgO1xuXG4gICAgICAgIC8vIFN0YXR1cyB0ZXh0XG4gICAgICAgIHRoaXMuc3RhdHVzRWwgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInN0YXR1cy10ZXh0XCIgfSk7XG4gICAgICAgIHRoaXMuc3RhdHVzRWwuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gRGV0YWlsIHRleHRcbiAgICAgICAgdGhpcy5kZXRhaWxFbCA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwiZGV0YWlsLXRleHRcIiB9KTtcbiAgICAgICAgdGhpcy5kZXRhaWxFbC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgbWFyZ2luOiA1cHggMDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgbWluLWhlaWdodDogMS4yZW07XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gSW5pdGlhbCBzdGF0ZVxuICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzKHtcbiAgICAgICAgICAgIHBoYXNlOiAndmFsaWRhdGlvbicsXG4gICAgICAgICAgICB0aXRsZTogJ1ByZXBhcmluZyBpbXBvcnQuLi4nLFxuICAgICAgICAgICAgZGV0YWlsOiAnVmFsaWRhdGluZyBaSVAgZmlsZSBzdHJ1Y3R1cmUnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBwcm9ncmVzcyB3aXRoIHN0ZXAgaW5mb3JtYXRpb25cbiAgICAgKi9cbiAgICB1cGRhdGVQcm9ncmVzcyhzdGVwOiBJbXBvcnRQcm9ncmVzc1N0ZXApIHtcbiAgICAgICAgLy8gVXBkYXRlIHBoYXNlXG4gICAgICAgIGNvbnN0IHBoYXNlTGFiZWxzID0ge1xuICAgICAgICAgICAgJ3ZhbGlkYXRpb24nOiAnXHVEODNEXHVERDBEIFZhbGlkYXRpb24nLFxuICAgICAgICAgICAgJ3NjYW5uaW5nJzogJ1x1RDgzRFx1RENDQiBTY2FubmluZycsXG4gICAgICAgICAgICAncHJvY2Vzc2luZyc6ICdcdTI2OTlcdUZFMEYgUHJvY2Vzc2luZycsXG4gICAgICAgICAgICAnd3JpdGluZyc6ICdcdUQ4M0RcdURDQkUgV3JpdGluZycsXG4gICAgICAgICAgICAnY29tcGxldGUnOiAnXHUyNzA1IENvbXBsZXRlJyxcbiAgICAgICAgICAgICdlcnJvcic6ICdcdTI3NEMgRXJyb3InXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLnBoYXNlRWwudGV4dENvbnRlbnQgPSBwaGFzZUxhYmVsc1tzdGVwLnBoYXNlXSB8fCBzdGVwLnBoYXNlO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBjb252ZXJzYXRpb24gY291bnQgaWYgcHJvdmlkZWRcbiAgICAgICAgaWYgKHN0ZXAudG90YWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy50b3RhbENvbnZlcnNhdGlvbnMgPSBzdGVwLnRvdGFsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGVwLmN1cnJlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uID0gc3RlcC5jdXJyZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIGNvbnZlcnNhdGlvbiBjb3VudGVyIGRpc3BsYXlcbiAgICAgICAgaWYgKHRoaXMudG90YWxDb252ZXJzYXRpb25zID4gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTZWxlY3RpdmVJbXBvcnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbkNvdW50RWwudGV4dENvbnRlbnQgPSBgJHt0aGlzLmN1cnJlbnRDb252ZXJzYXRpb259LyR7dGhpcy50b3RhbENvbnZlcnNhdGlvbnN9IHNlbGVjdGVkIGNvbnZlcnNhdGlvbnNgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbkNvdW50RWwudGV4dENvbnRlbnQgPSBgJHt0aGlzLmN1cnJlbnRDb252ZXJzYXRpb259LyR7dGhpcy50b3RhbENvbnZlcnNhdGlvbnN9IGNvbnZlcnNhdGlvbnNgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb252ZXJzYXRpb25Db3VudEVsLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxjdWxhdGUgYW5kIHVwZGF0ZSBwcm9ncmVzcyBiYXJcbiAgICAgICAgbGV0IHBlcmNlbnRhZ2UgPSAwO1xuICAgICAgICBpZiAoc3RlcC5wZXJjZW50YWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSBzdGVwLnBlcmNlbnRhZ2U7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50b3RhbENvbnZlcnNhdGlvbnMgPiAwICYmIHN0ZXAucGhhc2UgPT09ICdwcm9jZXNzaW5nJykge1xuICAgICAgICAgICAgcGVyY2VudGFnZSA9IE1hdGgucm91bmQoKHRoaXMuY3VycmVudENvbnZlcnNhdGlvbiAvIHRoaXMudG90YWxDb252ZXJzYXRpb25zKSAqIDEwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBQaGFzZS1iYXNlZCBwcm9ncmVzc1xuICAgICAgICAgICAgY29uc3QgcGhhc2VQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgICAgICAndmFsaWRhdGlvbic6IDEwLFxuICAgICAgICAgICAgICAgICdzY2FubmluZyc6IDIwLFxuICAgICAgICAgICAgICAgICdwcm9jZXNzaW5nJzogODAsXG4gICAgICAgICAgICAgICAgJ3dyaXRpbmcnOiA5NSxcbiAgICAgICAgICAgICAgICAnY29tcGxldGUnOiAxMDAsXG4gICAgICAgICAgICAgICAgJ2Vycm9yJzogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSBwaGFzZVByb2dyZXNzW3N0ZXAucGhhc2VdIHx8IDA7XG4gICAgICAgIH1cblxuICAgICAgICBwZXJjZW50YWdlID0gTWF0aC5taW4oMTAwLCBNYXRoLm1heCgwLCBwZXJjZW50YWdlKSk7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXJFbC5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnRhZ2V9JWA7XG5cbiAgICAgICAgLy8gVXBkYXRlIHN0YXR1cyBhbmQgZGV0YWlsXG4gICAgICAgIHRoaXMuc3RhdHVzRWwudGV4dENvbnRlbnQgPSBzdGVwLnRpdGxlO1xuICAgICAgICB0aGlzLmRldGFpbEVsLnRleHRDb250ZW50ID0gc3RlcC5kZXRhaWwgfHwgXCJcIjtcblxuICAgICAgICAvLyBIYW5kbGUgY29tcGxldGlvblxuICAgICAgICBpZiAoc3RlcC5waGFzZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICAgICAgdGhpcy5zaG93Q29tcGxldGUoc3RlcC50aXRsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RlcC5waGFzZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgdGhpcy5zaG93RXJyb3Ioc3RlcC50aXRsZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IGNvbXBsZXRpb24gc3RhdGVcbiAgICAgKi9cbiAgICBzaG93Q29tcGxldGUobWVzc2FnZTogc3RyaW5nID0gXCJJbXBvcnQgY29tcGxldGVkIHN1Y2Nlc3NmdWxseVwiKSB7XG4gICAgICAgIHRoaXMuaXNDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXJFbC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgICB0aGlzLnByb2dyZXNzQmFyRWwuc3R5bGUuYmFja2dyb3VuZCA9IFwidmFyKC0tdGV4dC1zdWNjZXNzKVwiO1xuICAgICAgICB0aGlzLnN0YXR1c0VsLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5kZXRhaWxFbC50ZXh0Q29udGVudCA9IFwiWW91IGNhbiBjbG9zZSB0aGlzIGRpYWxvZ1wiO1xuICAgICAgICBcbiAgICAgICAgLy8gQXV0by1jbG9zZSBhZnRlciBkZWxheVxuICAgICAgICB0aGlzLmNsb3NlQWZ0ZXJEZWxheSgzMDAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IGVycm9yIHN0YXRlXG4gICAgICovXG4gICAgc2hvd0Vycm9yKG1lc3NhZ2U6IHN0cmluZyA9IFwiQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIGltcG9ydFwiKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXJFbC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJ2YXIoLS10ZXh0LWVycm9yKVwiO1xuICAgICAgICB0aGlzLnN0YXR1c0VsLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5kZXRhaWxFbC50ZXh0Q29udGVudCA9IFwiQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlsc1wiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsb3NlIGFmdGVyIGRlbGF5XG4gICAgICovXG4gICAgY2xvc2VBZnRlckRlbGF5KGRlbGF5OiBudW1iZXIgPSAyMDAwKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZGVsYXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBzZWxlY3RpdmUgaW1wb3J0IG1vZGVcbiAgICAgKi9cbiAgICBzZXRTZWxlY3RpdmVJbXBvcnRNb2RlKHNlbGVjdGVkQ291bnQ6IG51bWJlciwgdG90YWxBdmFpbGFibGU6IG51bWJlcikge1xuICAgICAgICB0aGlzLmlzU2VsZWN0aXZlSW1wb3J0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENvdW50ID0gc2VsZWN0ZWRDb3VudDtcbiAgICAgICAgdGhpcy50b3RhbEF2YWlsYWJsZSA9IHRvdGFsQXZhaWxhYmxlO1xuXG4gICAgICAgIC8vIFNob3cgaW1wb3J0IG1vZGUgaW5kaWNhdG9yXG4gICAgICAgIHRoaXMuaW1wb3J0TW9kZUVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB0aGlzLmltcG9ydE1vZGVFbC50ZXh0Q29udGVudCA9IGBcdUQ4M0RcdURDQ0IgU2VsZWN0aXZlIEltcG9ydDogJHtzZWxlY3RlZENvdW50fSBvZiAke3RvdGFsQXZhaWxhYmxlfSBjb252ZXJzYXRpb25zYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgcHJvZ3Jlc3MgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBnZXRQcm9ncmVzc0NhbGxiYWNrKCk6IEltcG9ydFByb2dyZXNzQ2FsbGJhY2sge1xuICAgICAgICByZXR1cm4gKHN0ZXA6IEltcG9ydFByb2dyZXNzU3RlcCkgPT4ge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9ncmVzcyhzdGVwKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuIiwgImltcG9ydCBKU1ppcCBmcm9tIFwianN6aXBcIjtcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9sb2dnZXJcIjtcblxuLyoqXG4gKiBJbmZvcm1hdGlvbiBhYm91dCB3aGVyZSBhbiBhdHRhY2htZW50IGZpbGUgaXMgbG9jYXRlZCBhY3Jvc3MgbXVsdGlwbGUgWklQc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIEF0dGFjaG1lbnRMb2NhdGlvbiB7XG4gICAgLyoqIEluZGV4IG9mIHRoZSBaSVAgZmlsZSBpbiB0aGUgZmlsZXMgYXJyYXkgKi9cbiAgICB6aXBJbmRleDogbnVtYmVyO1xuICAgIC8qKiBQYXRoIG9mIHRoZSBmaWxlIHdpdGhpbiB0aGUgWklQICovXG4gICAgcGF0aDogc3RyaW5nO1xuICAgIC8qKiBTaXplIG9mIHRoZSBmaWxlIGluIGJ5dGVzICovXG4gICAgc2l6ZTogbnVtYmVyO1xuICAgIC8qKiBOYW1lIG9mIHRoZSBzb3VyY2UgWklQIGZpbGUgKi9cbiAgICB6aXBGaWxlTmFtZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIE1hcCBvZiBmaWxlIElEcyB0byB0aGVpciBsb2NhdGlvbnMgYWNyb3NzIG11bHRpcGxlIFpJUHNcbiAqIEtleTogZmlsZUlkIChleHRyYWN0ZWQgZnJvbSBmaWxlbmFtZSBvciBhc3NldF9wb2ludGVyKVxuICogVmFsdWU6IEFycmF5IG9mIGxvY2F0aW9ucyAobmV3ZXN0IGZpcnN0LCBmb3IgZmFsbGJhY2spXG4gKi9cbmV4cG9ydCB0eXBlIEF0dGFjaG1lbnRNYXAgPSBNYXA8c3RyaW5nLCBBdHRhY2htZW50TG9jYXRpb25bXT47XG5cbi8qKlxuICogU2VydmljZSB0byBidWlsZCBhIG1hcCBvZiBhdHRhY2htZW50IGF2YWlsYWJpbGl0eSBhY3Jvc3MgbXVsdGlwbGUgWklQIGZpbGVzXG4gKiBUaGlzIGVuYWJsZXMgZmFsbGJhY2sgdG8gb2xkZXIgWklQcyB3aGVuIHJlY2VudCBleHBvcnRzIGFyZSBtaXNzaW5nIGZpbGVzXG4gKi9cbmV4cG9ydCBjbGFzcyBBdHRhY2htZW50TWFwQnVpbGRlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBsb2dnZXI6IExvZ2dlcikge31cblxuICAgIC8qKlxuICAgICAqIFNjYW4gYWxsIFpJUCBmaWxlcyBhbmQgYnVpbGQgYSBtYXAgb2YgYXZhaWxhYmxlIGF0dGFjaG1lbnRzXG4gICAgICogUHJvY2Vzc2VzIFpJUHMgaW4gb3JkZXIgKG9sZGVzdCB0byBuZXdlc3QpIHNvIG5ld2VyIHZlcnNpb25zIGFyZSBhdCB0aGUgZW5kXG4gICAgICovXG4gICAgYXN5bmMgYnVpbGRBdHRhY2htZW50TWFwKGZpbGVzOiBGaWxlW10pOiBQcm9taXNlPEF0dGFjaG1lbnRNYXA+IHtcbiAgICAgICAgY29uc3QgYXR0YWNobWVudE1hcDogQXR0YWNobWVudE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgSlNaaXBNb2R1bGUgPSAoYXdhaXQgaW1wb3J0KCdqc3ppcCcpKS5kZWZhdWx0O1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlc1tpXTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB6aXAgPSBuZXcgSlNaaXBNb2R1bGUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB6aXBDb250ZW50ID0gYXdhaXQgemlwLmxvYWRBc3luYyhmaWxlKTtcblxuICAgICAgICAgICAgICAgIC8vIFNjYW4gYWxsIGZpbGVzIGluIHRoZSBaSVBcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtwYXRoLCB6aXBGaWxlXSBvZiBPYmplY3QuZW50cmllcyh6aXBDb250ZW50LmZpbGVzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoemlwRmlsZS5kaXIpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgcG90ZW50aWFsIGZpbGUgSURzIGZyb20gdGhlIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUlkcyA9IHRoaXMuZXh0cmFjdEZpbGVJZHMocGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlSWQgb2YgZmlsZUlkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhdHRhY2htZW50TWFwLmhhcyhmaWxlSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudE1hcC5zZXQoZmlsZUlkLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IGF0dGFjaG1lbnRNYXAuZ2V0KGZpbGVJZCkhO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhpcyBsb2NhdGlvbiAod2lsbCBiZSBpbiBjaHJvbm9sb2dpY2FsIG9yZGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppcEluZGV4OiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogemlwRmlsZS5fZGF0YT8udW5jb21wcmVzc2VkU2l6ZSB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppcEZpbGVOYW1lOiBmaWxlLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgRmFpbGVkIHRvIHNjYW4gYXR0YWNobWVudHMgaW4gJHtmaWxlLm5hbWV9OmAsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhdHRhY2htZW50TWFwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3QgYWxsIHBvc3NpYmxlIGZpbGUgSURzIGZyb20gYSBmaWxlIHBhdGhcbiAgICAgKiBIYW5kbGVzIHZhcmlvdXMgQ2hhdEdQVCBleHBvcnQgZm9ybWF0czpcbiAgICAgKiAtIGZpbGVfWFhYWFguZGF0IFx1MjE5MiBbXCJmaWxlX1hYWFhYXCIsIFwiWFhYWFhcIl1cbiAgICAgKiAtIHVzZXIteHh4L2ZpbGVfWFhYWFgtdXVpZC5wbmcgXHUyMTkyIFtcImZpbGVfWFhYWFhcIiwgXCJYWFhYWFwiXVxuICAgICAqIC0gZGFsbGUtZ2VuZXJhdGlvbnMveHh4LnBuZyBcdTIxOTIgW1wieHh4XCJdXG4gICAgICovXG4gICAgcHJpdmF0ZSBleHRyYWN0RmlsZUlkcyhwYXRoOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgICAgIGNvbnN0IGZpbGVJZHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gcGF0aC5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xuXG4gICAgICAgIC8vIFBhdHRlcm4gMTogZmlsZV9YWFhYWC5kYXQgb3IgZmlsZV9YWFhYWC11dWlkLmV4dFxuICAgICAgICBjb25zdCBmaWxlUGF0dGVybiA9IC9maWxlXyhbYS1mMC05XSspL2k7XG4gICAgICAgIGNvbnN0IGZpbGVNYXRjaCA9IGZpbGVOYW1lLm1hdGNoKGZpbGVQYXR0ZXJuKTtcbiAgICAgICAgaWYgKGZpbGVNYXRjaCkge1xuICAgICAgICAgICAgZmlsZUlkcy5wdXNoKGBmaWxlXyR7ZmlsZU1hdGNoWzFdfWApOyAvLyBGdWxsIElEIHdpdGggcHJlZml4XG4gICAgICAgICAgICBmaWxlSWRzLnB1c2goZmlsZU1hdGNoWzFdKTsgLy8gSUQgd2l0aG91dCBwcmVmaXhcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBhdHRlcm4gMjogWFhYWFguZGF0IChqdXN0IHRoZSBoYXNoKVxuICAgICAgICBjb25zdCBoYXNoUGF0dGVybiA9IC9eKFthLWYwLTldezMyLH0pKD86Wy0uXXwkKS9pO1xuICAgICAgICBjb25zdCBoYXNoTWF0Y2ggPSBmaWxlTmFtZS5tYXRjaChoYXNoUGF0dGVybik7XG4gICAgICAgIGlmIChoYXNoTWF0Y2ggJiYgIWZpbGVNYXRjaCkgeyAvLyBEb24ndCBkdXBsaWNhdGUgaWYgYWxyZWFkeSBtYXRjaGVkIGFib3ZlXG4gICAgICAgICAgICBmaWxlSWRzLnB1c2goaGFzaE1hdGNoWzFdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBhdHRlcm4gMzogRnVsbCBmaWxlbmFtZSBhcyBJRCAoZm9yIGV4YWN0IG1hdGNoZXMpXG4gICAgICAgIGNvbnN0IGJhc2VGaWxlTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLihkYXR8cG5nfGpwZ3xqcGVnfGdpZnx3ZWJwKSQvaSwgJycpO1xuICAgICAgICBpZiAoYmFzZUZpbGVOYW1lICYmICFmaWxlSWRzLmluY2x1ZGVzKGJhc2VGaWxlTmFtZSkpIHtcbiAgICAgICAgICAgIGZpbGVJZHMucHVzaChiYXNlRmlsZU5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZpbGVJZHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZCB0aGUgYmVzdCBsb2NhdGlvbiBmb3IgYSBmaWxlIElEXG4gICAgICogUmV0dXJucyB0aGUgTkVXRVNUIGF2YWlsYWJsZSBsb2NhdGlvbiAobGFzdCBpbiBhcnJheSlcbiAgICAgKiBGYWxscyBiYWNrIHRvIG9sZGVyIGxvY2F0aW9ucyBpZiBuZWVkZWRcbiAgICAgKi9cbiAgICBmaW5kQmVzdExvY2F0aW9uKGF0dGFjaG1lbnRNYXA6IEF0dGFjaG1lbnRNYXAsIGZpbGVJZDogc3RyaW5nKTogQXR0YWNobWVudExvY2F0aW9uIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IGF0dGFjaG1lbnRNYXAuZ2V0KGZpbGVJZCk7XG4gICAgICAgIGlmICghbG9jYXRpb25zIHx8IGxvY2F0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBuZXdlc3QgbG9jYXRpb24gKGxhc3QgaW4gY2hyb25vbG9naWNhbCBvcmRlcilcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uc1tsb2NhdGlvbnMubGVuZ3RoIC0gMV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZCBhbGwgbG9jYXRpb25zIGZvciBhIGZpbGUgSUQgKGZvciBkZWJ1Z2dpbmcvbG9nZ2luZylcbiAgICAgKi9cbiAgICBmaW5kQWxsTG9jYXRpb25zKGF0dGFjaG1lbnRNYXA6IEF0dGFjaG1lbnRNYXAsIGZpbGVJZDogc3RyaW5nKTogQXR0YWNobWVudExvY2F0aW9uW10ge1xuICAgICAgICByZXR1cm4gYXR0YWNobWVudE1hcC5nZXQoZmlsZUlkKSB8fCBbXTtcbiAgICB9XG59XG5cbiIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuXG4vLyBzcmMvc2VydmljZXMvc3RvcmFnZS1zZXJ2aWNlLnRzXG5pbXBvcnQgeyBDb252ZXJzYXRpb25DYXRhbG9nRW50cnkgfSBmcm9tIFwiLi4vdHlwZXMvcGx1Z2luXCI7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgTmV4dXNBaUNoYXRJbXBvcnRlclBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHsgRGF0ZVBhcnNlciB9IGZyb20gXCIuLi91dGlscy9kYXRlLXBhcnNlclwiO1xuXG5leHBvcnQgY2xhc3MgU3RvcmFnZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgaW1wb3J0ZWRBcmNoaXZlczogUmVjb3JkPHN0cmluZywgeyBmaWxlTmFtZTogc3RyaW5nOyBkYXRlOiBzdHJpbmcgfT4gPSB7fTtcbiAgICBwcml2YXRlIGlzRGlydHkgPSBmYWxzZTtcbiAgICBwcml2YXRlIHNhdmVUaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luKSB7fVxuXG4gICAgYXN5bmMgbG9hZERhdGEoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKTtcbiAgICAgICAgICAgIHRoaXMuaW1wb3J0ZWRBcmNoaXZlcyA9IGRhdGE/LmltcG9ydGVkQXJjaGl2ZXMgfHwge307XG4gICAgICAgICAgICB0aGlzLmlzRGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTWlncmF0aW9uOiBJZiBvbGQgY2F0YWxvZyBleGlzdHMsIHdlIGlnbm9yZSBpdCAobWlncmF0aW9uIGhhbmRsZWQgaW4gdXBncmFkZS50cylcbiAgICAgICAgICAgIC8vIE9sZCBjYXRhbG9nIGlzIG5vIGxvbmdlciB1c2VkXG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci5lcnJvcihcImxvYWREYXRhIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzYXZlRGF0YShkYXRhOiBhbnkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5pc0RpcnR5ID0gZmFsc2U7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoXCJzYXZlRGF0YSBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZGVib3VuY2VkU2F2ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2F2ZVRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNhdmVUaW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zYXZlVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGlydHkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwMCk7XG4gICAgfVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIEFSQ0hJVkUgVFJBQ0tJTkcgLSBIWUJSSUQgREVURUNUSU9OICgxLjAueCArIDEuMS4wKVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBcbiAgICBnZXRJbXBvcnRlZEFyY2hpdmVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbXBvcnRlZEFyY2hpdmVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhZQlJJRCBkZXRlY3Rpb246IFdvcmtzIHdpdGggYm90aCAxLjAueCAoZmlsZW5hbWUgYXMga2V5KSBhbmQgMS4xLjAgKGhhc2ggYXMga2V5KVxuICAgICAqIEZJWEVEOiBIYW5kbGUgYm90aCBvbGQgZm9ybWF0IChzdHJpbmcgdmFsdWVzKSBhbmQgbmV3IGZvcm1hdCAob2JqZWN0IHZhbHVlcylcbiAgICAgKi9cbiAgICBpc0FyY2hpdmVJbXBvcnRlZChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBNZXRob2QgMTogRGlyZWN0IGtleSBsb29rdXAgKHdvcmtzIGZvciBib3RoIGhhc2ggYW5kIGZpbGVuYW1lIGtleXMpXG4gICAgICAgIGlmICh0aGlzLmltcG9ydGVkQXJjaGl2ZXNba2V5XSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1ldGhvZCAyOiBTZWFyY2ggYnkgZmlsZW5hbWUgaW4gdmFsdWVzIChmb3IgMS4wLnggXHUyMTkyIDEuMS4wIG1pZ3JhdGlvbilcbiAgICAgICAgLy8gQ1JJVElDQUwgRklYOiBIYW5kbGUgYm90aCBvbGQgZm9ybWF0IChzdHJpbmcpIGFuZCBuZXcgZm9ybWF0IChvYmplY3QpXG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMuaW1wb3J0ZWRBcmNoaXZlcykuc29tZShhcmNoaXZlID0+IHtcbiAgICAgICAgICAgIC8vIE5ldyBmb3JtYXQgMS4xLjA6IGFyY2hpdmUgPSB7ZmlsZU5hbWU6IFwiZmlsZS56aXBcIiwgZGF0ZTogXCIyMDI0LTAxLTAxXCJ9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyY2hpdmUgPT09ICdvYmplY3QnICYmIGFyY2hpdmUgIT09IG51bGwgJiYgYXJjaGl2ZS5maWxlTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcmNoaXZlLmZpbGVOYW1lID09PSBrZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE9sZCBmb3JtYXQgMS4wLng6IGFyY2hpdmUgPSBcIjIwMjQtMDEtMDFcIiAoc3RyaW5nIGRhdGUpXG4gICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UsIHdlIGNhbid0IG1hdGNoIGJ5IGZpbGVuYW1lIHNpbmNlIHdlIGRvbid0IGhhdmUgaXRcbiAgICAgICAgICAgIC8vIEJ1dCB0aGUga2V5IG1pZ2h0IGJlIHRoZSBmaWxlbmFtZSBpdHNlbGYsIHdoaWNoIHdlIGFscmVhZHkgY2hlY2tlZCBpbiBNZXRob2QgMVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRJbXBvcnRlZEFyY2hpdmUoZmlsZUhhc2g6IHN0cmluZywgZmlsZU5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLmltcG9ydGVkQXJjaGl2ZXNbZmlsZUhhc2hdID0ge1xuICAgICAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kZWJvdW5jZWRTYXZlKCk7XG4gICAgfVxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIE5FVzogVkFVTFQtQkFTRUQgQ09OVkVSU0FUSU9OIERJU0NPVkVSWSAoSFlCUklEKVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8qKlxuICAgICAqIFNjYW4gdmF1bHQgZm9yIGV4aXN0aW5nIE5leHVzIGNvbnZlcnNhdGlvbnMgdXNpbmcgSFlCUklEIGFwcHJvYWNoOlxuICAgICAqIDEuIFdhaXQgZm9yIGNhY2hlIHRvIGJlIGNsZWFuIChmYXN0KVxuICAgICAqIDIuIFVzZSBtZXRhZGF0YUNhY2hlIChvcHRpbWFsIHBlcmZvcm1hbmNlKSAgXG4gICAgICogMy4gRmFsbGJhY2sgdG8gbWFudWFsIHBhcnNpbmcgZm9yIHByb2JsZW1hdGljIGZpbGVzXG4gICAgICovXG4gICAgYXN5bmMgc2NhbkV4aXN0aW5nQ29udmVyc2F0aW9ucygpOiBQcm9taXNlPE1hcDxzdHJpbmcsIENvbnZlcnNhdGlvbkNhdGFsb2dFbnRyeT4+IHtcbiAgICAgICAgLy8gU3RlcCAxOiBXYWl0IGZvciBjYWNoZSB0byBiZSBjbGVhbiAod2l0aCB0aW1lb3V0KVxuICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JDYWNoZUNsZWFuKDEwMDApOyAvLyBNYXggMSBzZWNvbmQgd2FpdFxuXG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnMgPSBuZXcgTWFwPHN0cmluZywgQ29udmVyc2F0aW9uQ2F0YWxvZ0VudHJ5PigpO1xuXG4gICAgICAgIC8vIEdldCBjb252ZXJzYXRpb24gZm9sZGVyIHdpdGggZmFsbGJhY2sgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9uRm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udmVyc2F0aW9uRm9sZGVyIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXJjaGl2ZUZvbGRlciB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiTmV4dXMvQ29udmVyc2F0aW9uc1wiO1xuXG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgICAgICAvLyBGaWx0ZXIgY29udmVyc2F0aW9uIGZpbGVzIChleGNsdWRlIFJlcG9ydHMvQXR0YWNobWVudHMpXG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFmaWxlLnBhdGguc3RhcnRzV2l0aChjb252ZXJzYXRpb25Gb2xkZXIpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGZpbGUucGF0aC5zdWJzdHJpbmcoY29udmVyc2F0aW9uRm9sZGVyLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgaWYgKHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdSZXBvcnRzLycpIHx8XG4gICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ0F0dGFjaG1lbnRzLycpIHx8XG4gICAgICAgICAgICAgICAgcmVsYXRpdmVQYXRoLnN0YXJ0c1dpdGgoJ3JlcG9ydHMvJykgfHxcbiAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnYXR0YWNobWVudHMvJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgcHJvY2Vzc2VkID0gMDtcbiAgICAgICAgbGV0IGZvdW5kVmlhQ2FjaGUgPSAwO1xuICAgICAgICBsZXQgZm91bmRWaWFNYW51YWwgPSAwO1xuICAgICAgICBsZXQgZXJyb3JzID0gMDtcblxuICAgICAgICAvLyBQcm9jZXNzIGZpbGVzIGluIGJhdGNoZXNcbiAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gMTAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnZlcnNhdGlvbkZpbGVzLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoID0gY29udmVyc2F0aW9uRmlsZXMuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBiYXRjaCkge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCsrO1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IG1ldGFkYXRhQ2FjaGUgZmlyc3QgKGZhc3QpXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbnRyeSA9IGF3YWl0IHRoaXMucGFyc2VXaXRoQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9ucy5zZXQoZW50cnkuY29udmVyc2F0aW9uSWQsIGVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kVmlhQ2FjaGUrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gbWFudWFsIHBhcnNpbmdcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBhd2FpdCB0aGlzLnBhcnNlQ29udmVyc2F0aW9uRmlsZU1hbnVhbGx5KGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbnMuc2V0KGVudHJ5LmNvbnZlcnNhdGlvbklkLCBlbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZFZpYU1hbnVhbCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcnMrKztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ubG9nZ2VyLndhcm4oYEVycm9yIHBhcnNpbmcgY29udmVyc2F0aW9uIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNtYWxsIGRlbGF5IGJldHdlZW4gbGFyZ2UgYmF0Y2hlc1xuICAgICAgICAgICAgaWYgKGkgKyBiYXRjaFNpemUgPCBjb252ZXJzYXRpb25GaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbnZlcnNhdGlvbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2FpdCBmb3IgbWV0YWRhdGEgY2FjaGUgdG8gYmUgY2xlYW4gd2l0aCB0aW1lb3V0XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyB3YWl0Rm9yQ2FjaGVDbGVhbihtYXhXYWl0TXM6IG51bWJlciA9IDEwMDApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFR5cGUgYXNzZXJ0aW9uIGZvciB1bmRvY3VtZW50ZWQgT2JzaWRpYW4gQVBJXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhQ2FjaGUgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZSBhcyBhbnk7XG4gICAgICAgIFxuICAgICAgICB3aGlsZSAoIW1ldGFkYXRhQ2FjaGUuaXNDYWNoZUNsZWFuKCkpIHtcbiAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gc3RhcnRUaW1lID4gbWF4V2FpdE1zKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlIGNvbnZlcnNhdGlvbiB1c2luZyBtZXRhZGF0YUNhY2hlIChmYXN0IGJ1dCBwb3RlbnRpYWxseSB1bnJlbGlhYmxlKVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcGFyc2VXaXRoQ2FjaGUoZmlsZTogVEZpbGUpOiBQcm9taXNlPENvbnZlcnNhdGlvbkNhdGFsb2dFbnRyeSB8IG51bGw+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcblxuICAgICAgICAgICAgaWYgKCFmcm9udG1hdHRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci53YXJuKGBbcGFyc2VXaXRoQ2FjaGVdIE5vIGZyb250bWF0dGVyIGZvdW5kIGZvciAke2ZpbGUucGF0aH1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFmcm9udG1hdHRlci5uZXh1cyB8fCBmcm9udG1hdHRlci5uZXh1cyAhPT0gdGhpcy5wbHVnaW4ubWFuaWZlc3QuaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIud2FybihgW3BhcnNlV2l0aENhY2hlXSBXcm9uZyBuZXh1cyBJRCBmb3IgJHtmaWxlLnBhdGh9OiAke2Zyb250bWF0dGVyLm5leHVzfSB2cyAke3RoaXMucGx1Z2luLm1hbmlmZXN0LmlkfWApO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWZyb250bWF0dGVyLmNvbnZlcnNhdGlvbl9pZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci53YXJuKGBbcGFyc2VXaXRoQ2FjaGVdIE5vIGNvbnZlcnNhdGlvbl9pZCBmb3IgJHtmaWxlLnBhdGh9YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZVRpbWUgPSB0aGlzLnBhcnNlVGltZVN0cmluZyhmcm9udG1hdHRlci5jcmVhdGVfdGltZSk7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVUaW1lID0gdGhpcy5wYXJzZVRpbWVTdHJpbmcoZnJvbnRtYXR0ZXIudXBkYXRlX3RpbWUpO1xuXG4gICAgICAgICAgICBpZiAoY3JlYXRlVGltZSA9PT0gMCB8fCB1cGRhdGVUaW1lID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ubG9nZ2VyLndhcm4oYFtwYXJzZVdpdGhDYWNoZV0gRmFpbGVkIHRvIHBhcnNlIHRpbWVzdGFtcHMgZm9yICR7ZmlsZS5wYXRofTogY3JlYXRlPSR7ZnJvbnRtYXR0ZXIuY3JlYXRlX3RpbWV9ICgke2NyZWF0ZVRpbWV9KSwgdXBkYXRlPSR7ZnJvbnRtYXR0ZXIudXBkYXRlX3RpbWV9ICgke3VwZGF0ZVRpbWV9KWApO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBmcm9udG1hdHRlci5jb252ZXJzYXRpb25faWQsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IGZyb250bWF0dGVyLnByb3ZpZGVyIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZTogdXBkYXRlVGltZSxcbiAgICAgICAgICAgICAgICBjcmVhdGVfdGltZTogY3JlYXRlVGltZSxcbiAgICAgICAgICAgICAgICB1cGRhdGVfdGltZTogdXBkYXRlVGltZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4ubG9nZ2VyLndhcm4oYFtwYXJzZVdpdGhDYWNoZV0gRXhjZXB0aW9uIHBhcnNpbmcgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2Ugc2luZ2xlIGNvbnZlcnNhdGlvbiBmaWxlIG1hbnVhbGx5IChyb2J1c3QgZmFsbGJhY2spXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBwYXJzZUNvbnZlcnNhdGlvbkZpbGVNYW51YWxseShmaWxlOiBURmlsZSk6IFByb21pc2U8Q29udmVyc2F0aW9uQ2F0YWxvZ0VudHJ5IHwgbnVsbD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFeHRyYWN0IGZyb250bWF0dGVyIG1hbnVhbGx5XG4gICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXJDb250ZW50ID0gZnJvbnRtYXR0ZXJNYXRjaFsxXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUGFyc2UgZnJvbnRtYXR0ZXIgbGluZXMgbWFudWFsbHlcbiAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyRGF0YTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbGluZXMgPSBmcm9udG1hdHRlckNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xvbkluZGV4ID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbG9uSW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGxpbmUuc3Vic3RyaW5nKDAsIGNvbG9uSW5kZXgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gbGluZS5zdWJzdHJpbmcoY29sb25JbmRleCArIDEpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdW90ZXMgaWYgcHJlc2VudFxuICAgICAgICAgICAgICAgICAgICBpZiAoKHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdmFsdWUuZW5kc1dpdGgoJ1wiJykpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgKHZhbHVlLnN0YXJ0c1dpdGgoXCInXCIpICYmIHZhbHVlLmVuZHNXaXRoKFwiJ1wiKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSwgLTEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlckRhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIE5leHVzIGNvbnZlcnNhdGlvbiBmaWxlXG4gICAgICAgICAgICBjb25zdCBuZXh1c0lkID0gdGhpcy5wbHVnaW4ubWFuaWZlc3QuaWQ7XG4gICAgICAgICAgICBpZiAoZnJvbnRtYXR0ZXJEYXRhLm5leHVzICE9PSBuZXh1c0lkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZnJvbnRtYXR0ZXJEYXRhLmNvbnZlcnNhdGlvbl9pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjcmVhdGVUaW1lID0gdGhpcy5wYXJzZVRpbWVTdHJpbmcoZnJvbnRtYXR0ZXJEYXRhLmNyZWF0ZV90aW1lKTtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVRpbWUgPSB0aGlzLnBhcnNlVGltZVN0cmluZyhmcm9udG1hdHRlckRhdGEudXBkYXRlX3RpbWUpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBmcm9udG1hdHRlckRhdGEuY29udmVyc2F0aW9uX2lkLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBmcm9udG1hdHRlckRhdGEucHJvdmlkZXIgfHwgJ3Vua25vd24nLFxuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICB1cGRhdGVUaW1lOiB1cGRhdGVUaW1lLFxuICAgICAgICAgICAgICAgIGNyZWF0ZV90aW1lOiBjcmVhdGVUaW1lLFxuICAgICAgICAgICAgICAgIHVwZGF0ZV90aW1lOiB1cGRhdGVUaW1lXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIuZXJyb3IoYEVycm9yIG1hbnVhbGx5IHBhcnNpbmcgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2UgdGltZSBzdHJpbmcgZnJvbSBmcm9udG1hdHRlciAoaGFuZGxlIG11bHRpcGxlIGZvcm1hdHMpXG4gICAgICogU3VwcG9ydHMgYWxsIGZvcm1hdHM6IElTTyA4NjAxLCBVUywgRVUsIERFLCBKUCwgYW5kIGxvY2FsZS1iYXNlZFxuICAgICAqIFVzZXMgaW50ZWxsaWdlbnQgZm9ybWF0IGRldGVjdGlvbiBmcm9tIERhdGVQYXJzZXIgdXRpbGl0eVxuICAgICAqL1xuICAgIHByaXZhdGUgcGFyc2VUaW1lU3RyaW5nKHRpbWVTdHI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IERhdGVQYXJzZXIucGFyc2VEYXRlKHRpbWVTdHIpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIud2FybihgW3BhcnNlVGltZVN0cmluZ10gRmFpbGVkIHRvIHBhcnNlOiBcIiR7dGltZVN0cn1cImApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmFzdCBjaGVjayBpZiBhIHNwZWNpZmljIGNvbnZlcnNhdGlvbiBleGlzdHNcbiAgICAgKi9cbiAgICBhc3luYyBjb252ZXJzYXRpb25FeGlzdHMoY29udmVyc2F0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25zID0gYXdhaXQgdGhpcy5zY2FuRXhpc3RpbmdDb252ZXJzYXRpb25zKCk7XG4gICAgICAgIHJldHVybiBjb252ZXJzYXRpb25zLmhhcyhjb252ZXJzYXRpb25JZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNvbnZlcnNhdGlvbiBlbnRyeSBieSBJRCAoc2luZ2xlIGxvb2t1cClcbiAgICAgKi9cbiAgICBhc3luYyBnZXRDb252ZXJzYXRpb25CeUlkKGNvbnZlcnNhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPENvbnZlcnNhdGlvbkNhdGFsb2dFbnRyeSB8IG51bGw+IHtcbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9ucyA9IGF3YWl0IHRoaXMuc2NhbkV4aXN0aW5nQ29udmVyc2F0aW9ucygpO1xuICAgICAgICByZXR1cm4gY29udmVyc2F0aW9ucy5nZXQoY29udmVyc2F0aW9uSWQpIHx8IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNvbnZlcnNhdGlvbnMgYnkgcHJvdmlkZXIgKGZvciByZXBvcnRpbmcvc3RhdHMpXG4gICAgICovXG4gICAgYXN5bmMgZ2V0Q29udmVyc2F0aW9uc0J5UHJvdmlkZXIocHJvdmlkZXI6IHN0cmluZyk6IFByb21pc2U8Q29udmVyc2F0aW9uQ2F0YWxvZ0VudHJ5W10+IHtcbiAgICAgICAgY29uc3QgYWxsQ29udmVyc2F0aW9ucyA9IGF3YWl0IHRoaXMuc2NhbkV4aXN0aW5nQ29udmVyc2F0aW9ucygpO1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShhbGxDb252ZXJzYXRpb25zLnZhbHVlcygpKS5maWx0ZXIoZW50cnkgPT4gZW50cnkucHJvdmlkZXIgPT09IHByb3ZpZGVyKTtcbiAgICB9XG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gTEVHQUNZIFNVUFBPUlQgJiBDTEVBTlVQXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgYXN5bmMgcmVzZXRDYXRhbG9ncygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuaW1wb3J0ZWRBcmNoaXZlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5pc0RpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLnNhdmVUaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2F2ZVRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMucGx1Z2luLnNldHRpbmdzXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogTm8gY29udmVyc2F0aW9uIGNhdGFsb2cgdG8gcmVzZXQgLSBpdCdzIG5vdyB2YXVsdC1iYXNlZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci5lcnJvcihcInJlc2V0Q2F0YWxvZ3MgZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdGF0aXN0aWNzIGZvciBkZWJ1Z2dpbmdcbiAgICBnZXRTdGF0cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvdGFsQXJjaGl2ZXM6IE9iamVjdC5rZXlzKHRoaXMuaW1wb3J0ZWRBcmNoaXZlcykubGVuZ3RoLFxuICAgICAgICAgICAgaXNEaXJ0eTogdGhpcy5pc0RpcnR5LFxuICAgICAgICAgICAgaGFzUGVuZGluZ1NhdmU6IHRoaXMuc2F2ZVRpbWVvdXQgIT09IG51bGwsXG4gICAgICAgICAgICBjYXRhbG9nTWV0aG9kOiAndmF1bHQtYmFzZWQtaHlicmlkJyxcbiAgICAgICAgICAgIHRyYWNraW5nTWV0aG9kOiAnaHlicmlkLWhhc2gtZmlsZW5hbWUnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgZm9yY2VTYXZlKCkge1xuICAgICAgICBpZiAodGhpcy5zYXZlVGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2F2ZVRpbWVvdXQpO1xuICAgICAgICAgICAgdGhpcy5zYXZlVGltZW91dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNEaXJ0eSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gREVQUkVDQVRFRCBNRVRIT0RTIChGb3IgQ29tcGF0aWJpbGl0eSlcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Ugc2NhbkV4aXN0aW5nQ29udmVyc2F0aW9ucygpIGluc3RlYWRcbiAgICAgKi9cbiAgICBnZXRDb252ZXJzYXRpb25DYXRhbG9nKCk6IFJlY29yZDxzdHJpbmcsIENvbnZlcnNhdGlvbkNhdGFsb2dFbnRyeT4ge1xuICAgICAgICB0aGlzLnBsdWdpbi5sb2dnZXIud2FybihcImdldENvbnZlcnNhdGlvbkNhdGFsb2coKSBpcyBkZXByZWNhdGVkIC0gdXNlIHNjYW5FeGlzdGluZ0NvbnZlcnNhdGlvbnMoKVwiKTtcbiAgICAgICAgcmV0dXJuIHt9OyAvLyBSZXR1cm4gZW1wdHkgLSBmb3JjZXMgdXNlIG9mIG5ldyBzY2FuIG1ldGhvZFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIENvbnZlcnNhdGlvbnMgYXJlIG5vdyB0cmFja2VkIHZpYSB2YXVsdCBmcm9udG1hdHRlclxuICAgICAqL1xuICAgIHVwZGF0ZUNvbnZlcnNhdGlvbkNhdGFsb2coX2lkOiBzdHJpbmcsIF9lbnRyeTogQ29udmVyc2F0aW9uQ2F0YWxvZ0VudHJ5KSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmxvZ2dlci53YXJuKFwidXBkYXRlQ29udmVyc2F0aW9uQ2F0YWxvZygpIGlzIGRlcHJlY2F0ZWQgLSBjb252ZXJzYXRpb25zIHRyYWNrZWQgdmlhIGZyb250bWF0dGVyXCIpO1xuICAgICAgICAvLyBOby1vcCAtIGZyb250bWF0dGVyIGlzIHRoZSBzb3VyY2Ugb2YgdHJ1dGggbm93XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgQ29udmVyc2F0aW9ucyBhcmUgbm93IHRyYWNrZWQgdmlhIHZhdWx0IGZyb250bWF0dGVyXG4gICAgICovXG4gICAgZGVsZXRlRnJvbUNvbnZlcnNhdGlvbkNhdGFsb2coX2lkOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4ubG9nZ2VyLndhcm4oXCJkZWxldGVGcm9tQ29udmVyc2F0aW9uQ2F0YWxvZygpIGlzIGRlcHJlY2F0ZWQgLSBmaWxlcyB0cmFja2VkIHZpYSB2YXVsdFwiKTtcbiAgICAgICAgLy8gTm8tb3AgLSBmaWxlIGRlbGV0aW9uIGlzIGhhbmRsZWQgYnkgZXZlbnQgaGFuZGxlcnNcbiAgICB9XG59IiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy91cGdyYWRlL2luY3JlbWVudGFsLXVwZ3JhZGUtbWFuYWdlci50c1xuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBWZXJzaW9uVXBncmFkZSwgVXBncmFkZUNvbnRleHQgfSBmcm9tIFwiLi91cGdyYWRlLWludGVyZmFjZVwiO1xuaW1wb3J0IHsgVmVyc2lvblV0aWxzIH0gZnJvbSBcIi4vdXRpbHMvdmVyc2lvbi11dGlsc1wiO1xuaW1wb3J0IHsgc2hvd0RpYWxvZyB9IGZyb20gXCIuLi9kaWFsb2dzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5pbXBvcnQgeyBHSVRIVUIgfSBmcm9tIFwiLi4vY29uZmlnL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTXVsdGlPcGVyYXRpb25Qcm9ncmVzc01vZGFsLCBPcGVyYXRpb25TdGF0dXMgfSBmcm9tIFwiLi91dGlscy9tdWx0aS1vcGVyYXRpb24tcHJvZ3Jlc3MtbW9kYWxcIjtcbmltcG9ydCB0eXBlIE5leHVzQWlDaGF0SW1wb3J0ZXJQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7IGVuc3VyZUZvbGRlckV4aXN0cyB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5jcmVtZW50YWxVcGdyYWRlUmVzdWx0IHtcbiAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgIHVwZ3JhZGVzRXhlY3V0ZWQ6IG51bWJlcjtcbiAgICB1cGdyYWRlc1NraXBwZWQ6IG51bWJlcjtcbiAgICB1cGdyYWRlc0ZhaWxlZDogbnVtYmVyO1xuICAgIGlzRnJlc2hJbnN0YWxsPzogYm9vbGVhbjsgLy8gRmxhZyB0byBpbmRpY2F0ZSBpZiB0aGlzIGlzIGEgZnJlc2ggaW5zdGFsbGF0aW9uXG4gICAgcmVzdWx0czogQXJyYXk8e1xuICAgICAgICB2ZXJzaW9uOiBzdHJpbmc7XG4gICAgICAgIGF1dG9tYXRpY1Jlc3VsdHM6IGFueTtcbiAgICAgICAgbWFudWFsUmVzdWx0czogYW55O1xuICAgIH0+O1xufVxuXG5leHBvcnQgY2xhc3MgSW5jcmVtZW50YWxVcGdyYWRlTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBhdmFpbGFibGVVcGdyYWRlczogVmVyc2lvblVwZ3JhZGVbXSA9IFtdO1xuICAgIHByaXZhdGUgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyVXBncmFkZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhbGwgYXZhaWxhYmxlIHZlcnNpb24gdXBncmFkZXNcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlZ2lzdGVyVXBncmFkZXMoKTogdm9pZCB7XG4gICAgICAgIC8vIEltcG9ydCBhbmQgcmVnaXN0ZXIgdXBncmFkZXNcbiAgICAgICAgY29uc3QgeyBVcGdyYWRlMTEwIH0gPSByZXF1aXJlKFwiLi92ZXJzaW9ucy91cGdyYWRlLTEuMS4wXCIpO1xuICAgICAgICBjb25zdCB7IFVwZ3JhZGUxMjAgfSA9IHJlcXVpcmUoXCIuL3ZlcnNpb25zL3VwZ3JhZGUtMS4yLjBcIik7XG4gICAgICAgIGNvbnN0IHsgVXBncmFkZTEzMCB9ID0gcmVxdWlyZShcIi4vdmVyc2lvbnMvdXBncmFkZS0xLjMuMFwiKTtcblxuICAgICAgICB0aGlzLmF2YWlsYWJsZVVwZ3JhZGVzID0gW1xuICAgICAgICAgICAgbmV3IFVwZ3JhZGUxMTAoKSxcbiAgICAgICAgICAgIG5ldyBVcGdyYWRlMTIwKCksXG4gICAgICAgICAgICBuZXcgVXBncmFkZTEzMCgpLFxuICAgICAgICAgICAgLy8gRnV0dXJlOiBuZXcgVXBncmFkZTEzMSgpLCBuZXcgVXBncmFkZTE0MCgpLCBldGMuXG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gU29ydCBieSB2ZXJzaW9uIGZvciBpbmNyZW1lbnRhbCBleGVjdXRpb25cbiAgICAgICAgdGhpcy5hdmFpbGFibGVVcGdyYWRlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gVmVyc2lvblV0aWxzLmNvbXBhcmVWZXJzaW9ucyhhLnZlcnNpb24sIGIudmVyc2lvbik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1haW4gaW5jcmVtZW50YWwgdXBncmFkZSBjaGVjayBhbmQgZXhlY3V0aW9uXG4gICAgICovXG4gICAgYXN5bmMgY2hlY2tBbmRQZXJmb3JtVXBncmFkZSgpOiBQcm9taXNlPEluY3JlbWVudGFsVXBncmFkZVJlc3VsdCB8IG51bGw+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWZXJzaW9uID0gdGhpcy5wbHVnaW4ubWFuaWZlc3QudmVyc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzVmVyc2lvbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByZXZpb3VzVmVyc2lvbjsgLy8gXHUyMTkwIFVzZSBzZXR0aW5ncyBpbnN0ZWFkIG9mIGRhdGFcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBjb21wbGV0ZWQgdXBncmFkZSB0byB0aGlzIHZlcnNpb24gdXNpbmcgbmV3IHN0cnVjdHVyZVxuICAgICAgICAgICAgLy8gVGhpcyBjaGVjayBNVVNUIGNvbWUgQkVGT1JFIGZyZXNoIGluc3RhbGwgZGV0ZWN0aW9uIHRvIHByZXZlbnQgd2VsY29tZSBkaWFsb2cgb24gcmVsb2FkXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKTtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25LZXkgPSBjdXJyZW50VmVyc2lvbi5yZXBsYWNlKC9cXC4vZywgJ18nKTtcbiAgICAgICAgICAgIGNvbnN0IGhhc0NvbXBsZXRlZFRoaXNVcGdyYWRlID0gZGF0YT8udXBncmFkZUhpc3Rvcnk/LmNvbXBsZXRlZFVwZ3JhZGVzPy5bdmVyc2lvbktleV0/LmNvbXBsZXRlZDtcblxuICAgICAgICAgICAgaWYgKGhhc0NvbXBsZXRlZFRoaXNVcGdyYWRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEZSRVNIIElOU1RBTEwgREVURUNUSU9OIC0gQ2hlY2sgQUZURVIgdXBncmFkZSBjb21wbGV0aW9uIGNoZWNrXG4gICAgICAgICAgICBjb25zdCBpc0ZyZXNoSW5zdGFsbCA9IGF3YWl0IHRoaXMuZGV0ZWN0RnJlc2hJbnN0YWxsKCk7XG5cbiAgICAgICAgICAgIGlmIChpc0ZyZXNoSW5zdGFsbCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubWFya1VwZ3JhZGVDb21wbGV0ZShjdXJyZW50VmVyc2lvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZXNFeGVjdXRlZDogMCxcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZXNTa2lwcGVkOiAwLFxuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlc0ZhaWxlZDogMCxcbiAgICAgICAgICAgICAgICAgICAgaXNGcmVzaEluc3RhbGw6IHRydWUsIC8vIEZsYWcgZm9yIHNob3dpbmcgaW5zdGFsbGF0aW9uIHdlbGNvbWUgZGlhbG9nXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2tpcCBpZiBubyB2ZXJzaW9uIGNoYW5nZVxuICAgICAgICAgICAgaWYgKHByZXZpb3VzVmVyc2lvbiA9PT0gY3VycmVudFZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2V0IHVwZ3JhZGUgY2hhaW46IGFsbCB1cGdyYWRlcyBiZXR3ZWVuIHByZXZpb3VzVmVyc2lvbiBhbmQgY3VycmVudFZlcnNpb25cbiAgICAgICAgICAgIGNvbnN0IHVwZ3JhZGVDaGFpbiA9IHRoaXMuZ2V0VXBncmFkZUNoYWluKHByZXZpb3VzVmVyc2lvbiwgY3VycmVudFZlcnNpb24pO1xuXG4gICAgICAgICAgICBpZiAodXBncmFkZUNoYWluLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubWFya1VwZ3JhZGVDb21wbGV0ZShjdXJyZW50VmVyc2lvbik7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zaG93VXBncmFkZURpYWxvZyhjdXJyZW50VmVyc2lvbiwgcHJldmlvdXNWZXJzaW9uLCBbXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZXNFeGVjdXRlZDogMCxcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZXNTa2lwcGVkOiAwLFxuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlc0ZhaWxlZDogMCxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0czogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8vIFBIQVNFIDE6IEV4ZWN1dGUgbWlncmF0aW9ucyBkaXJlY3RseSAobm8gZGlhbG9nIGJlZm9yZSlcbiAgICAgICAgICAgIC8vIFNob3cgcHJvZ3Jlc3MgbW9kYWwgYXV0b21hdGljYWxseVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlVXBncmFkZUNoYWluV2l0aE1vZGFsKHVwZ3JhZGVDaGFpbiwgcHJldmlvdXNWZXJzaW9uLCBjdXJyZW50VmVyc2lvbik7XG5cbiAgICAgICAgICAgIC8vIE1hcmsgb3ZlcmFsbCB1cGdyYWRlIGNvbXBsZXRlIC0gQUxXQVlTIChldmVuIGlmIHNvbWUgb3BlcmF0aW9ucyB3ZXJlIFwibm8tb3BcIilcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWFya1VwZ3JhZGVDb21wbGV0ZShjdXJyZW50VmVyc2lvbik7XG5cbiAgICAgICAgICAgIC8vIFdyaXRlIGNvbnNvbGlkYXRlZCB1cGdyYWRlIHJlcG9ydFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlVXBncmFkZVJlcG9ydChwcmV2aW91c1ZlcnNpb24sIGN1cnJlbnRWZXJzaW9uLCB1cGdyYWRlQ2hhaW4sIHJlc3VsdCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIHdyaXRlIHVwZ3JhZGUgcmVwb3J0OlwiLCBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUEhBU0UgMjogU2hvdyBjb21wbGV0aW9uIGRpYWxvZyBBRlRFUiBtaWdyYXRpb25zXG4gICAgICAgICAgICAvLyBEaXNwbGF5IEtvLWZpICsgV2hhdCdzIE5ldyArIEltcHJvdmVtZW50cyArIEJ1ZyBGaXhlc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zaG93VXBncmFkZUNvbXBsZXRlRGlhbG9nKGN1cnJlbnRWZXJzaW9uKTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcblxuXG5cblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiSW5jcmVtZW50YWwgdXBncmFkZSBmYWlsZWQ6XCIsIGVycm9yKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBjYW5jZWxsZWRcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UgPT09IFwiVXNlciBjYW5jZWxsZWQgdXBncmFkZVwiKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk1pZ3JhdGlvbiBjYW5jZWxsZWQuIFBsZWFzZSBjb21wbGV0ZSB0aGUgbWlncmF0aW9uIGJlZm9yZSBpbXBvcnRpbmcuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlc0V4ZWN1dGVkOiAwLFxuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlc1NraXBwZWQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIHVwZ3JhZGVzRmFpbGVkOiAwLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE90aGVyIGVycm9yc1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZHVyaW5nIGluY3JlbWVudGFsIHVwZ3JhZGU6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJVcGdyYWRlIGZhaWxlZCAtIHNlZSBjb25zb2xlIGZvciBkZXRhaWxzXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB1cGdyYWRlc0V4ZWN1dGVkOiAwLFxuICAgICAgICAgICAgICAgIHVwZ3JhZGVzU2tpcHBlZDogMCxcbiAgICAgICAgICAgICAgICB1cGdyYWRlc0ZhaWxlZDogMSxcbiAgICAgICAgICAgICAgICByZXN1bHRzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVjdCBpZiB0aGlzIGlzIGEgZnJlc2ggaW5zdGFsbGF0aW9uIHdpdGggbm8gZXhpc3RpbmcgZGF0YVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZGV0ZWN0RnJlc2hJbnN0YWxsKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgMTogTm8gcGx1Z2luIGRhdGEgb3IgdmVyeSBtaW5pbWFsIGRhdGFcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnBsdWdpbi5sb2FkRGF0YSgpO1xuICAgICAgICAgICAgY29uc3QgaGFzTGVnYWN5RGF0YSA9ICEhKGRhdGE/LmNvbnZlcnNhdGlvbkNhdGFsb2cgJiYgT2JqZWN0LmtleXMoZGF0YS5jb252ZXJzYXRpb25DYXRhbG9nKS5sZW5ndGggPiAwKTtcbiAgICAgICAgICAgIGNvbnN0IGhhc0ltcG9ydGVkQXJjaGl2ZXMgPSAhIShkYXRhPy5pbXBvcnRlZEFyY2hpdmVzICYmIE9iamVjdC5rZXlzKGRhdGEuaW1wb3J0ZWRBcmNoaXZlcykubGVuZ3RoID4gMCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIDI6IE5vIGV4aXN0aW5nIGNvbnZlcnNhdGlvbnMgaW4gdmF1bHRcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnZlcnNhdGlvbkZvbGRlcjtcbiAgICAgICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDb252ZXJzYXRpb25zID0gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZmlsZS5wYXRoLnN0YXJ0c1dpdGgoY29udmVyc2F0aW9uRm9sZGVyKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gRXhjbHVkZSBSZXBvcnRzIGFuZCBBdHRhY2htZW50cyBmb2xkZXJzXG4gICAgICAgICAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gZmlsZS5wYXRoLnN1YnN0cmluZyhjb252ZXJzYXRpb25Gb2xkZXIubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdSZXBvcnRzLycpIHx8XG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKCdBdHRhY2htZW50cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgncmVwb3J0cy8nKSB8fFxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnYXR0YWNobWVudHMvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSBOZXh1cyBjb252ZXJzYXRpb24gZmlsZVxuICAgICAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbnRtYXR0ZXI/Lm5leHVzID09PSB0aGlzLnBsdWdpbi5tYW5pZmVzdC5pZDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBoYXNFeGlzdGluZ0NvbnZlcnNhdGlvbnMgPSBleGlzdGluZ0NvbnZlcnNhdGlvbnMubGVuZ3RoID4gMDtcblxuICAgICAgICAgICAgLy8gRnJlc2ggaW5zdGFsbCBjcml0ZXJpYTogbm8gbGVnYWN5IGRhdGEgQU5EIG5vIGltcG9ydGVkIGFyY2hpdmVzIEFORCBubyBleGlzdGluZyBjb252ZXJzYXRpb25zXG4gICAgICAgICAgICBjb25zdCBpc0ZyZXNoSW5zdGFsbCA9ICFoYXNMZWdhY3lEYXRhICYmICFoYXNJbXBvcnRlZEFyY2hpdmVzICYmICFoYXNFeGlzdGluZ0NvbnZlcnNhdGlvbnM7XG5cbiAgICAgICAgICAgIHJldHVybiBpc0ZyZXNoSW5zdGFsbDtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZGV0ZWN0aW5nIGZyZXNoIGluc3RhbGw6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIElmIHdlIGNhbid0IGRldGVybWluZSwgYXNzdW1lIGl0J3Mgbm90IGZyZXNoIChzYWZlciB0byBydW4gdXBncmFkZXMpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY2hhaW4gb2YgdXBncmFkZXMgdG8gZXhlY3V0ZSBpbmNyZW1lbnRhbGx5XG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRVcGdyYWRlQ2hhaW4oZnJvbVZlcnNpb246IHN0cmluZywgdG9WZXJzaW9uOiBzdHJpbmcpOiBWZXJzaW9uVXBncmFkZVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXZhaWxhYmxlVXBncmFkZXMuZmlsdGVyKHVwZ3JhZGUgPT5cbiAgICAgICAgICAgIHVwZ3JhZGUuc2hvdWxkUnVuKGZyb21WZXJzaW9uLCB0b1ZlcnNpb24pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSB1cGdyYWRlIGNoYWluIHdpdGggbW9kYWwgcHJvZ3Jlc3MgdHJhY2tpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVVcGdyYWRlQ2hhaW5XaXRoTW9kYWwoXG4gICAgICAgIHVwZ3JhZGVDaGFpbjogVmVyc2lvblVwZ3JhZGVbXSxcbiAgICAgICAgZnJvbVZlcnNpb246IHN0cmluZyxcbiAgICAgICAgdG9WZXJzaW9uOiBzdHJpbmdcbiAgICApOiBQcm9taXNlPEluY3JlbWVudGFsVXBncmFkZVJlc3VsdD4ge1xuXG4gICAgICAgIC8vIENvbGxlY3QgYWxsIG9wZXJhdGlvbnMgZnJvbSBhbGwgdXBncmFkZXNcbiAgICAgICAgY29uc3QgYWxsT3BlcmF0aW9uczogT3BlcmF0aW9uU3RhdHVzW10gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB1cGdyYWRlIG9mIHVwZ3JhZGVDaGFpbikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcGVyYXRpb24gb2YgdXBncmFkZS5hdXRvbWF0aWNPcGVyYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgYWxsT3BlcmF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGAke3VwZ3JhZGUudmVyc2lvbn1fJHtvcGVyYXRpb24uaWR9YCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogb3BlcmF0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYW5kIHNob3cgbW9kYWxcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NNb2RhbCA9IG5ldyBNdWx0aU9wZXJhdGlvblByb2dyZXNzTW9kYWwoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAsXG4gICAgICAgICAgICBgVXBncmFkaW5nIHRvIHYke3RvVmVyc2lvbn1gLFxuICAgICAgICAgICAgYWxsT3BlcmF0aW9uc1xuICAgICAgICApO1xuICAgICAgICBwcm9ncmVzc01vZGFsLm9wZW4oKTtcblxuICAgICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICAgIGxldCB1cGdyYWRlc0V4ZWN1dGVkID0gMDtcbiAgICAgICAgbGV0IHVwZ3JhZGVzU2tpcHBlZCA9IDA7XG4gICAgICAgIGxldCB1cGdyYWRlc0ZhaWxlZCA9IDA7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdXBncmFkZSBvZiB1cGdyYWRlQ2hhaW4pIHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCB0aGlzLmNyZWF0ZVVwZ3JhZGVDb250ZXh0KHVwZ3JhZGUsIGZyb21WZXJzaW9uLCB0b1ZlcnNpb24pO1xuXG4gICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSBhdXRvbWF0aWMgb3BlcmF0aW9ucyB3aXRoIHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRvbWF0aWNSZXN1bHRzID0gYXdhaXQgdGhpcy5leGVjdXRlT3BlcmF0aW9uc1dpdGhQcm9ncmVzcyhcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZS5hdXRvbWF0aWNPcGVyYXRpb25zLFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlLnZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWxcbiAgICAgICAgICAgICAgICApO1xuXG5cbiAgICAgICAgICAgICAgICAvLyBNYW51YWwgb3BlcmF0aW9ucyB3aWxsIGJlIGhhbmRsZWQgc2VwYXJhdGVseSBpZiBhbnkgZXhpc3RcbiAgICAgICAgICAgICAgICBjb25zdCBtYW51YWxSZXN1bHRzID0geyBzdWNjZXNzOiB0cnVlLCByZXN1bHRzOiBbXSB9O1xuXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogdXBncmFkZS52ZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICBhdXRvbWF0aWNSZXN1bHRzLFxuICAgICAgICAgICAgICAgICAgICBtYW51YWxSZXN1bHRzXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDb3VudCBhcyBzdWNjZXNzIGV2ZW4gaWYgc29tZSBvcGVyYXRpb25zIHdlcmUgXCJuby1vcFwiIChzbWFydCBzdWNjZXNzIGxvZ2ljKVxuICAgICAgICAgICAgICAgIHVwZ3JhZGVzRXhlY3V0ZWQrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgb3ZlcmFsbFN1Y2Nlc3MgPSB0cnVlOyAvLyBBbHdheXMgc3VjY2VzcyBmb3IgYXV0b21hdGljIG9wZXJhdGlvbnNcblxuICAgICAgICAgICAgcHJvZ3Jlc3NNb2RhbC5tYXJrQ29tcGxldGUoYEFsbCBvcGVyYXRpb25zIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkhYCk7XG4gICAgICAgICAgICAvLyBObyBOb3RpY2UgaGVyZSAtIGNvbXBsZXRpb24gZGlhbG9nIHdpbGwgYmUgc2hvd24gYWZ0ZXJcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBvdmVyYWxsU3VjY2VzcyxcbiAgICAgICAgICAgICAgICB1cGdyYWRlc0V4ZWN1dGVkLFxuICAgICAgICAgICAgICAgIHVwZ3JhZGVzU2tpcHBlZCxcbiAgICAgICAgICAgICAgICB1cGdyYWRlc0ZhaWxlZCxcbiAgICAgICAgICAgICAgICByZXN1bHRzXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJNb2RhbCB1cGdyYWRlIGV4ZWN1dGlvbiBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHByb2dyZXNzTW9kYWwuc2hvd0Vycm9yKGBVcGdyYWRlIGZhaWxlZDogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBvcGVyYXRpb25zIHdpdGggcHJvZ3Jlc3MgdXBkYXRlcyB0byBtb2RhbFxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZXhlY3V0ZU9wZXJhdGlvbnNXaXRoUHJvZ3Jlc3MoXG4gICAgICAgIG9wZXJhdGlvbnM6IGFueVtdLFxuICAgICAgICBjb250ZXh0OiBVcGdyYWRlQ29udGV4dCxcbiAgICAgICAgdmVyc2lvbjogc3RyaW5nLFxuICAgICAgICBwcm9ncmVzc01vZGFsOiBNdWx0aU9wZXJhdGlvblByb2dyZXNzTW9kYWxcbiAgICApOiBQcm9taXNlPGFueT4ge1xuICAgICAgICBjb25zdCByZXN1bHRzOiBBcnJheTx7b3BlcmF0aW9uSWQ6IHN0cmluZzsgcmVzdWx0OiBhbnl9PiA9IFtdO1xuICAgICAgICBsZXQgY3JpdGljYWxGYWlsdXJlcyA9IDA7IC8vIE9ubHkgY291bnQgYWN0dWFsIGNyaXRpY2FsIGZhaWx1cmVzXG5cbiAgICAgICAgZm9yIChjb25zdCBvcGVyYXRpb24gb2Ygb3BlcmF0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgbW9kYWxPcGVyYXRpb25JZCA9IGAke3ZlcnNpb259XyR7b3BlcmF0aW9uLmlkfWA7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBjb21wbGV0ZWRcbiAgICAgICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5pc09wZXJhdGlvbkNvbXBsZXRlZChvcGVyYXRpb24uaWQsIHZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWwudXBkYXRlT3BlcmF0aW9uKG1vZGFsT3BlcmF0aW9uSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogMTAwXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uSWQ6IG9wZXJhdGlvbi5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogeyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBcIkFscmVhZHkgY29tcGxldGVkXCIgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gTWFyayBhcyBydW5uaW5nXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NNb2RhbC51cGRhdGVPcGVyYXRpb24obW9kYWxPcGVyYXRpb25JZCwge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdydW5uaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IDBcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNhbiBydW5cbiAgICAgICAgICAgICAgICBpZiAoIShhd2FpdCBvcGVyYXRpb24uY2FuUnVuKGNvbnRleHQpKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBOT1QgYSBjcml0aWNhbCBmYWlsdXJlIC0ganVzdCBtZWFucyBub3RoaW5nIHRvIGRvXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWwudXBkYXRlT3BlcmF0aW9uKG1vZGFsT3BlcmF0aW9uSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogMTAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERldGFpbDogXCJOb3RoaW5nIHRvIHByb2Nlc3NcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbklkOiBvcGVyYXRpb24uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogXCJQcmVyZXF1aXNpdGVzIG5vdCBtZXQgLSBub3RoaW5nIHRvIHByb2Nlc3NcIiB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIG9wZXJhdGlvbiB3aXRoIHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVPcGVyYXRpb25XaXRoUHJvZ3Jlc3MoXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxPcGVyYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NNb2RhbFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goeyBvcGVyYXRpb25JZDogb3BlcmF0aW9uLmlkLCByZXN1bHQgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tYXJrT3BlcmF0aW9uQ29tcGxldGVkKG9wZXJhdGlvbi5pZCwgdmVyc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWwudXBkYXRlT3BlcmF0aW9uKG1vZGFsT3BlcmF0aW9uSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogMTAwXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgY291bnQgYXMgY3JpdGljYWwgZmFpbHVyZSBpZiBpdCdzIGFjdHVhbGx5IGNyaXRpY2FsXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQ3JpdGljYWwgPSB0aGlzLmlzQ3JpdGljYWxGYWlsdXJlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0NyaXRpY2FsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcml0aWNhbEZhaWx1cmVzKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc01vZGFsLnVwZGF0ZU9wZXJhdGlvbihtb2RhbE9wZXJhdGlvbklkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogcmVzdWx0Lm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJlYXQgYXMgY29tcGxldGVkIHdpdGggd2FybmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NNb2RhbC51cGRhdGVPcGVyYXRpb24obW9kYWxPcGVyYXRpb25JZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGV0YWlsOiBcIkNvbXBsZXRlZCB3aXRoIHdhcm5pbmdzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yUmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYE9wZXJhdGlvbiBmYWlsZWQ6ICR7ZXJyb3J9YCxcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogeyBlcnJvcjogU3RyaW5nKGVycm9yKSB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goeyBvcGVyYXRpb25JZDogb3BlcmF0aW9uLmlkLCByZXN1bHQ6IGVycm9yUmVzdWx0IH0pO1xuICAgICAgICAgICAgICAgIHByb2dyZXNzTW9kYWwudXBkYXRlT3BlcmF0aW9uKG1vZGFsT3BlcmF0aW9uSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFN0cmluZyhlcnJvcilcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjcml0aWNhbEZhaWx1cmVzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBjcml0aWNhbEZhaWx1cmVzID09PSAwLCByZXN1bHRzIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIGFuIG9wZXJhdGlvbiBmYWlsdXJlIGlzIGNyaXRpY2FsXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc0NyaXRpY2FsRmFpbHVyZShyZXN1bHQ6IGFueSk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBGb3Igbm93LCBubyBmYWlsdXJlcyBhcmUgY3JpdGljYWwgZm9yIHVwZ3JhZGUgb3BlcmF0aW9uc1xuICAgICAgICAvLyBUaGV5J3JlIGVpdGhlciBzdWNjZXNzZnVsIG9yIFwibm90aGluZyB0byBkb1wiXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIHNpbmdsZSBvcGVyYXRpb24gd2l0aCBwcm9ncmVzcyBjYWxsYmFja3NcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVPcGVyYXRpb25XaXRoUHJvZ3Jlc3MoXG4gICAgICAgIG9wZXJhdGlvbjogYW55LFxuICAgICAgICBjb250ZXh0OiBVcGdyYWRlQ29udGV4dCxcbiAgICAgICAgbW9kYWxPcGVyYXRpb25JZDogc3RyaW5nLFxuICAgICAgICBwcm9ncmVzc01vZGFsOiBNdWx0aU9wZXJhdGlvblByb2dyZXNzTW9kYWxcbiAgICApOiBQcm9taXNlPGFueT4ge1xuICAgICAgICAvLyBFeGVjdXRlIHRoZSBvcGVyYXRpb25cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3BlcmF0aW9uLmV4ZWN1dGUoY29udGV4dCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHByb2dyZXNzIHRvIDEwMCUgd2hlbiBjb21wbGV0ZVxuICAgICAgICBwcm9ncmVzc01vZGFsLnVwZGF0ZU9wZXJhdGlvbihtb2RhbE9wZXJhdGlvbklkLCB7XG4gICAgICAgICAgICBzdGF0dXM6ICdydW5uaW5nJyxcbiAgICAgICAgICAgIHByb2dyZXNzOiAxMDBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdXBncmFkZSBjb250ZXh0XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVVcGdyYWRlQ29udGV4dChcbiAgICAgICAgdXBncmFkZTogVmVyc2lvblVwZ3JhZGUsXG4gICAgICAgIGZyb21WZXJzaW9uOiBzdHJpbmcsXG4gICAgICAgIHRvVmVyc2lvbjogc3RyaW5nXG4gICAgKTogUHJvbWlzZTxVcGdyYWRlQ29udGV4dD4ge1xuICAgICAgICBjb25zdCBwbHVnaW5EYXRhID0gYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGx1Z2luOiB0aGlzLnBsdWdpbixcbiAgICAgICAgICAgIGZyb21WZXJzaW9uLFxuICAgICAgICAgICAgdG9WZXJzaW9uLFxuICAgICAgICAgICAgcGx1Z2luRGF0YVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1hcmsgb3ZlcmFsbCB1cGdyYWRlIGFzIGNvbXBsZXRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBtYXJrVXBncmFkZUNvbXBsZXRlKHZlcnNpb246IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKSB8fCB7fTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHVwZ3JhZGUgaGlzdG9yeSBzdHJ1Y3R1cmUgaWYgbmVlZGVkXG4gICAgICAgIGlmICghZGF0YS51cGdyYWRlSGlzdG9yeSkge1xuICAgICAgICAgICAgZGF0YS51cGdyYWRlSGlzdG9yeSA9IHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWRVcGdyYWRlczoge30sXG4gICAgICAgICAgICAgICAgY29tcGxldGVkT3BlcmF0aW9uczoge31cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNYXJrIHVwZ3JhZGUgYXMgY29tcGxldGVkIGluIHN0cnVjdHVyZWQgZm9ybWF0XG4gICAgICAgIGNvbnN0IHZlcnNpb25LZXkgPSB2ZXJzaW9uLnJlcGxhY2UoL1xcLi9nLCAnXycpO1xuICAgICAgICBkYXRhLnVwZ3JhZGVIaXN0b3J5LmNvbXBsZXRlZFVwZ3JhZGVzW3ZlcnNpb25LZXldID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogdmVyc2lvbixcbiAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGNvbXBsZXRlZDogdHJ1ZVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIExlZ2FjeSBmaWVsZHMgZm9yIGNvbXBhdGliaWxpdHkgKGNhbiBiZSByZW1vdmVkIGluIGZ1dHVyZSB2ZXJzaW9ucylcbiAgICAgICAgZGF0YS5sYXN0VmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgIGRhdGEuaGFzQ29tcGxldGVkVXBncmFkZSA9IHRydWU7XG4gICAgICAgIGRhdGEudXBncmFkZURhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgICAgLy8gVmVyc2lvbiB0cmFja2luZ1xuICAgICAgICBpZiAoVmVyc2lvblV0aWxzLmNvbXBhcmVWZXJzaW9ucyh2ZXJzaW9uLCBcIjEuMS4wXCIpID49IDApIHtcbiAgICAgICAgICAgIGRhdGEudmVyc2lvblRyYWNraW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YShkYXRhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcml0ZSBhIGNvbnNvbGlkYXRlZCB1cGdyYWRlIHJlcG9ydCBwZXIgcnVuXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyB3cml0ZVVwZ3JhZGVSZXBvcnQoXG4gICAgICAgIGZyb21WZXJzaW9uOiBzdHJpbmcsXG4gICAgICAgIHRvVmVyc2lvbjogc3RyaW5nLFxuICAgICAgICB1cGdyYWRlQ2hhaW46IFZlcnNpb25VcGdyYWRlW10sXG4gICAgICAgIHJlc3VsdDogSW5jcmVtZW50YWxVcGdyYWRlUmVzdWx0XG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG5cbiAgICAgICAgY29uc3QgcmVwb3J0Um9vdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcG9ydEZvbGRlciB8fCBcIk5leHVzL1JlcG9ydHNcIjtcblxuICAgICAgICBjb25zdCB1cGdyYWRlc0ZvbGRlciA9IGAke3JlcG9ydFJvb3R9L1VwZ3JhZGVzYDtcblxuICAgICAgICBjb25zdCBmb2xkZXJSZXN1bHQgPSBhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHModXBncmFkZXNGb2xkZXIsIHRoaXMucGx1Z2luLmFwcC52YXVsdCk7XG5cbiAgICAgICAgaWYgKCFmb2xkZXJSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBcdTI3NEMgRmFpbGVkIHRvIGNyZWF0ZSBmb2xkZXI6ICR7Zm9sZGVyUmVzdWx0LmVycm9yfWApO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIHVwZ3JhZGVzIGZvbGRlcjogJHtmb2xkZXJSZXN1bHQuZXJyb3J9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBwYWQgPSAobjogbnVtYmVyKSA9PiBuLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgdHMgPSBgJHtub3cuZ2V0RnVsbFllYXIoKX0ke3BhZChub3cuZ2V0TW9udGgoKSsxKX0ke3BhZChub3cuZ2V0RGF0ZSgpKX0tJHtwYWQobm93LmdldEhvdXJzKCkpfSR7cGFkKG5vdy5nZXRNaW51dGVzKCkpfSR7cGFkKG5vdy5nZXRTZWNvbmRzKCkpfWA7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7dHN9IC0gVXBncmFkZSB0byAke3RvVmVyc2lvbn0ubWRgO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke3VwZ3JhZGVzRm9sZGVyfS8ke2ZpbGVOYW1lfWA7XG5cbiAgICAgICAgLy8gQnVpbGQgYSBtYXAgdG8gcmVzb2x2ZSBvcGVyYXRpb24gbmFtZXMgcGVyIHZlcnNpb25cbiAgICAgICAgY29uc3Qgb3BzQnlWZXJzaW9uOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHVwIG9mIHVwZ3JhZGVDaGFpbikge1xuICAgICAgICAgICAgb3BzQnlWZXJzaW9uW3VwLnZlcnNpb25dID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wIG9mIHVwLmF1dG9tYXRpY09wZXJhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBvcHNCeVZlcnNpb25bdXAudmVyc2lvbl1bb3AuaWRdID0gb3AubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE92ZXJ2aWV3XG4gICAgICAgIGNvbnN0IHJlYWRtZVVybCA9IGAke0dJVEhVQi5SRVBPX0JBU0V9I3JlYWRtZWA7XG4gICAgICAgIGNvbnN0IGlzc3Vlc1VybCA9IGAke0dJVEhVQi5SRVBPX0JBU0V9L2lzc3Vlc2A7XG5cbiAgICAgICAgY29uc3QgdG90YWxWZXJzaW9ucyA9IHJlc3VsdC5yZXN1bHRzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdG90YWxPcHMgPSByZXN1bHQucmVzdWx0cy5yZWR1Y2UoKGFjYywgdikgPT4gYWNjICsgKHYuYXV0b21hdGljUmVzdWx0cz8ucmVzdWx0cz8ubGVuZ3RoIHx8IDApLCAwKTtcblxuICAgICAgICBsZXQgbWQgPSBgIyBVcGdyYWRlIHRvIHYke3RvVmVyc2lvbn1cXG5cXG5gO1xuICAgICAgICBtZCArPSBgRnJvbSB2JHtmcm9tVmVyc2lvbn0gXHUyMTkyIHYke3RvVmVyc2lvbn1cXG5cXG5gO1xuICAgICAgICBtZCArPSBgLSBWZXJzaW9ucyBwcm9jZXNzZWQ6ICR7dG90YWxWZXJzaW9uc31cXG5gO1xuICAgICAgICBtZCArPSBgLSBPcGVyYXRpb25zIGV4ZWN1dGVkOiAke3RvdGFsT3BzfVxcblxcbmA7XG4gICAgICAgIG1kICs9IGBTZWUgdGhlIGxhdGVzdCBSRUFETUUgYW5kIHJlbGVhc2Ugbm90ZXM6ICR7cmVhZG1lVXJsfVxcblxcbmA7XG4gICAgICAgIG1kICs9IGBSZXBvcnQgb3IgcmV2aWV3IGlzc3VlczogJHtpc3N1ZXNVcmx9XFxuXFxuYDtcblxuICAgICAgICAvLyBTZWN0aW9ucyBwZXIgdXBncmFkZSB2ZXJzaW9uIGFuZCBvcGVyYXRpb25cbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiByZXN1bHQucmVzdWx0cykge1xuICAgICAgICAgICAgbWQgKz0gYCMjICR7ZW50cnkudmVyc2lvbn1cXG5cXG5gO1xuICAgICAgICAgICAgY29uc3Qgb3BzID0gZW50cnkuYXV0b21hdGljUmVzdWx0cz8ucmVzdWx0cyB8fCBbXTtcblxuICAgICAgICAgICAgaWYgKCFvcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbWQgKz0gYC0gTm8gYXV0b21hdGljIG9wZXJhdGlvbnNcXG5cXG5gO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBvcFJlcyBvZiBvcHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcElkID0gb3BSZXMub3BlcmF0aW9uSWQ7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3BOYW1lID0gb3BzQnlWZXJzaW9uW2VudHJ5LnZlcnNpb25dPy5bb3BJZF0gfHwgb3BJZDtcbiAgICAgICAgICAgICAgICBjb25zdCBvayA9IG9wUmVzLnJlc3VsdD8uc3VjY2VzcyA9PT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBvayA/ICdcdTI3MDUnIDogJ1x1MjZBMFx1RkUwRic7XG4gICAgICAgICAgICAgICAgY29uc3QgbXNnID0gb3BSZXMucmVzdWx0Py5tZXNzYWdlIHx8ICcnO1xuICAgICAgICAgICAgICAgIG1kICs9IGAjIyMgJHtvcE5hbWV9ICR7c3RhdHVzfVxcblxcbmA7XG4gICAgICAgICAgICAgICAgaWYgKG1zZykgbWQgKz0gYCR7bXNnfVxcblxcbmA7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxzID0gb3BSZXMucmVzdWx0Py5kZXRhaWxzO1xuICAgICAgICAgICAgICAgIGlmIChkZXRhaWxzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCBkZXRhaWxzIGJhc2VkIG9uIHR5cGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGV0YWlscykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFycmF5IG9mIHN0cmluZ3MgKGUuZy4sIG1pZ3JhdGlvbiByZXN1bHRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRldGFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkZXRhaWxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1kICs9IGAke2l0ZW19XFxuYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZCArPSBgXFxuYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGV0YWlscyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9iamVjdCB3aXRoIGtleS12YWx1ZSBwYWlycyAoZS5nLiwgc3RhdGlzdGljcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhkZXRhaWxzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlzLmxlbmd0aCA+IDAgJiYgIWtleXMuZXZlcnkoayA9PiAvXlxcZCskLy50ZXN0KGspKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgc2hvdyBpZiBub3QgYXJyYXktbGlrZSBrZXlzICgwLCAxLCAyLi4uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1kICs9IGAqKlN0YXRpc3RpY3M6KipcXG5cXG5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBkZXRhaWxzW2tleSBhcyBrZXlvZiB0eXBlb2YgZGV0YWlsc107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1kICs9IGAtICR7a2V5fTogJHtTdHJpbmcodmFsdWUpfVxcbmA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1kICs9IGBcXG5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgbWQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBcdTI3NEMgRmFpbGVkIHRvIHdyaXRlIHJlcG9ydCBmaWxlOmAsIGVycm9yKTtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgZGV0YWlsczpgLCB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRMZW5ndGg6IG1kLmxlbmd0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgdXBncmFkZSBjb21wbGV0ZSBkaWFsb2cgQUZURVIgbWlncmF0aW9uc1xuICAgICAqIERpc3BsYXlzIEtvLWZpICsgV2hhdCdzIE5ldyArIEltcHJvdmVtZW50cyArIEJ1ZyBGaXhlc1xuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgc2hvd1VwZ3JhZGVDb21wbGV0ZURpYWxvZyh2ZXJzaW9uOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgdjEuMy4wIG9yIGxhdGVyIC0gdXNlIG5ldyBjb21wbGV0aW9uIG1vZGFsXG4gICAgICAgICAgICBjb25zdCBpc1YxMzBPckxhdGVyID0gdGhpcy5jb21wYXJlVmVyc2lvbnModmVyc2lvbiwgXCIxLjMuMFwiKSA+PSAwO1xuXG4gICAgICAgICAgICBpZiAoaXNWMTMwT3JMYXRlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgVXBncmFkZUNvbXBsZXRlTW9kYWwgfSA9IGF3YWl0IGltcG9ydChcIi4uL2RpYWxvZ3MvdXBncmFkZS1jb21wbGV0ZS1tb2RhbFwiKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBVcGdyYWRlQ29tcGxldGVNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIHRoaXMucGx1Z2luLCB2ZXJzaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwub25DbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGb3Igb2xkZXIgdmVyc2lvbnMsIGp1c3Qgc2hvdyBhIHNpbXBsZSBub3RpY2VcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBVcGdyYWRlZCB0byBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIHYke3ZlcnNpb259YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBzaG93aW5nIHVwZ3JhZGUgY29tcGxldGUgZGlhbG9nOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBVcGdyYWRlZCB0byBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIHYke3ZlcnNpb259YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IHVwZ3JhZGUgZGlhbG9nIC0gSU5GT1JNQVRJT04gT05MWSAobm8gY2FuY2VsKVxuICAgICAqIEBkZXByZWNhdGVkIC0gTm8gbG9uZ2VyIHVzZWQgaW4gdjEuMy4wKywga2VwdCBmb3IgY29tcGF0aWJpbGl0eVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgc2hvd1VwZ3JhZGVEaWFsb2coY3VycmVudFZlcnNpb246IHN0cmluZywgbGFzdFZlcnNpb246IHN0cmluZywgdXBncmFkZUNoYWluOiBWZXJzaW9uVXBncmFkZVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgb3ZlcnZpZXcgY29udGVudFxuICAgICAgICAgICAgY29uc3Qgb3ZlcnZpZXcgPSBhd2FpdCB0aGlzLmZldGNoUmVsZWFzZU92ZXJ2aWV3KGN1cnJlbnRWZXJzaW9uKTtcbiAgICAgICAgICAgIGNvbnN0IGJhc2VNZXNzYWdlID0gb3ZlcnZpZXcgfHwgYE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgaGFzIGJlZW4gdXBncmFkZWQgdG8gdmVyc2lvbiAke2N1cnJlbnRWZXJzaW9ufS5gO1xuXG4gICAgICAgICAgICAvLyBCdWlsZCBwYXJhZ3JhcGhzIGFycmF5IHdpdGggcHJvcGVyIHNwYWNpbmdcbiAgICAgICAgICAgIGNvbnN0IHBhcmFncmFwaHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAgIC8vIE92ZXJ2aWV3IHNlY3Rpb25cbiAgICAgICAgICAgIHBhcmFncmFwaHMucHVzaChiYXNlTWVzc2FnZSk7XG4gICAgICAgICAgICBwYXJhZ3JhcGhzLnB1c2godGhpcy5nZXREb2NMaW5rcyhjdXJyZW50VmVyc2lvbikpO1xuXG4gICAgICAgICAgICBpZiAodXBncmFkZUNoYWluLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgaW5mb3JtYXRpb24gYWJvdXQgb3BlcmF0aW9ucyB0aGF0IHdpbGwgcnVuXG4gICAgICAgICAgICAgICAgcGFyYWdyYXBocy5wdXNoKFwiXCIpOyAvLyBFbXB0eSBwYXJhZ3JhcGggZm9yIHNwYWNpbmdcbiAgICAgICAgICAgICAgICBwYXJhZ3JhcGhzLnB1c2goXCIqKlVwZ3JhZGUgT3BlcmF0aW9ucyBSZXF1aXJlZCoqXCIpO1xuICAgICAgICAgICAgICAgIHBhcmFncmFwaHMucHVzaChcIlRoZSBmb2xsb3dpbmcgb3BlcmF0aW9ucyB3aWxsIGJlIHBlcmZvcm1lZCBhdXRvbWF0aWNhbGx5OlwiKTtcbiAgICAgICAgICAgICAgICBwYXJhZ3JhcGhzLnB1c2goXCJcIik7IC8vIEVtcHR5IHBhcmFncmFwaCBmb3Igc3BhY2luZ1xuXG4gICAgICAgICAgICAgICAgLy8gTGlzdCBvcGVyYXRpb25zIGZyb20gYWxsIHVwZ3JhZGVzXG4gICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9uc0xpc3Q6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB1cGdyYWRlIG9mIHVwZ3JhZGVDaGFpbikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG9wZXJhdGlvbiBvZiB1cGdyYWRlLmF1dG9tYXRpY09wZXJhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbnNMaXN0LnB1c2goYFx1MjAyMiAqKiR7b3BlcmF0aW9uLm5hbWV9Kio6ICR7b3BlcmF0aW9uLmRlc2NyaXB0aW9ufWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcmFncmFwaHMucHVzaChvcGVyYXRpb25zTGlzdC5qb2luKCdcXG4nKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE5vIG9wZXJhdGlvbnMgbmVlZGVkXG4gICAgICAgICAgICAgICAgcGFyYWdyYXBocy5wdXNoKFwiXCIpOyAvLyBFbXB0eSBwYXJhZ3JhcGggZm9yIHNwYWNpbmdcbiAgICAgICAgICAgICAgICBwYXJhZ3JhcGhzLnB1c2goXCJBbGwgc3lzdGVtcyBhcmUgdXAgdG8gZGF0ZS4gTm8gb3BlcmF0aW9ucyByZXF1aXJlZC5cIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElORk9STUFUSU9OIERJQUxPRyAtIG5vIGNhbmNlbCBvcHRpb25cbiAgICAgICAgICAgIGlmICh1cGdyYWRlQ2hhaW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgdGhlIHYxLjIuMCBvciB2MS4zLjAgdXBncmFkZSAtIHVzZSBiZWF1dGlmdWwgbW9kYWxcbiAgICAgICAgICAgICAgICBjb25zdCBpc1YxMjBVcGdyYWRlID0gdXBncmFkZUNoYWluLnNvbWUodXBncmFkZSA9PiB1cGdyYWRlLnZlcnNpb24gPT09IFwiMS4yLjBcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNWMTMwVXBncmFkZSA9IHVwZ3JhZGVDaGFpbi5zb21lKHVwZ3JhZGUgPT4gdXBncmFkZS52ZXJzaW9uID09PSBcIjEuMy4wXCIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzVjEzMFVwZ3JhZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIGJlYXV0aWZ1bCB1cGdyYWRlIG1vZGFsIGZvciB2MS4zLjBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBOZXh1c1VwZ3JhZGVNb2RhbDEzMCB9ID0gYXdhaXQgaW1wb3J0KFwiLi4vZGlhbG9ncy91cGdyYWRlLW1vZGFsLTEuMy4wXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyQ2hvaWNlID0gYXdhaXQgbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5leHVzVXBncmFkZU1vZGFsMTMwKHRoaXMucGx1Z2luLmFwcCwgdGhpcy5wbHVnaW4sIFwiMS4zLjBcIiwgcmVzb2x2ZSkub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB1c2VyIGNhbmNlbGxlZC9jbG9zZWQgZGlhbG9nLCB0aHJvdyBlcnJvciB0byBhYm9ydCB1cGdyYWRlXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VyQ2hvaWNlICE9PSBcIm9rXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgY2FuY2VsbGVkIHVwZ3JhZGVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzVjEyMFVwZ3JhZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIGJlYXV0aWZ1bCB1cGdyYWRlIG1vZGFsIGZvciB2MS4yLjBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBOZXh1c1VwZ3JhZGVNb2RhbCB9ID0gcmVxdWlyZShcIi4vdmVyc2lvbnMvdXBncmFkZS0xLjIuMFwiKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOZXh1c1VwZ3JhZGVNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIHRoaXMucGx1Z2luLCBcIjEuMi4wXCIsIHJlc29sdmUpLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHN0YW5kYXJkIGRpYWxvZyBmb3Igb3RoZXIgdXBncmFkZXNcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2hvd0RpYWxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaW5mb3JtYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGBVcGdyYWRlIHRvICR7VmVyc2lvblV0aWxzLmZvcm1hdFZlcnNpb24oY3VycmVudFZlcnNpb24pfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhZ3JhcGhzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG91bGRTaG93VXBncmFkZVdhcm5pbmcobGFzdFZlcnNpb24pID8gdGhpcy5nZXRVcGdyYWRlV2FybmluZygpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBidXR0b24xOiBcIlByb2NlZWQgd2l0aCBVcGdyYWRlXCIgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gUmllbiBcdTAwRTAgZmFpcmVcbiAgICAgICAgICAgICAgICBhd2FpdCBzaG93RGlhbG9nKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAsXG4gICAgICAgICAgICAgICAgICAgIFwiaW5mb3JtYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgYFVwZ3JhZGUgdG8gJHtWZXJzaW9uVXRpbHMuZm9ybWF0VmVyc2lvbihjdXJyZW50VmVyc2lvbil9YCxcbiAgICAgICAgICAgICAgICAgICAgcGFyYWdyYXBocyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG91bGRTaG93VXBncmFkZVdhcm5pbmcobGFzdFZlcnNpb24pID8gdGhpcy5nZXRVcGdyYWRlV2FybmluZygpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICB7IGJ1dHRvbjE6IFwiR290IGl0IVwiIH0gIC8vIFx1MjE5MCBKdXN0ZSBpbmZvcm1hdGlmXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIHNob3dpbmcgdXBncmFkZSBkaWFsb2c6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFVwZ3JhZGVkIHRvIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgdiR7Y3VycmVudFZlcnNpb259YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBvcGVyYXRpb24gd2FzIGNvbXBsZXRlZCB1c2luZyBuZXcgdXBncmFkZSBoaXN0b3J5IHN0cnVjdHVyZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaXNPcGVyYXRpb25Db21wbGV0ZWQob3BlcmF0aW9uSWQ6IHN0cmluZywgdmVyc2lvbjogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnBsdWdpbi5sb2FkRGF0YSgpO1xuICAgICAgICBjb25zdCBvcGVyYXRpb25LZXkgPSBgb3BlcmF0aW9uXyR7dmVyc2lvbi5yZXBsYWNlKC9cXC4vZywgJ18nKX1fJHtvcGVyYXRpb25JZH1gO1xuICAgICAgICByZXR1cm4gZGF0YT8udXBncmFkZUhpc3Rvcnk/LmNvbXBsZXRlZE9wZXJhdGlvbnM/LltvcGVyYXRpb25LZXldPy5jb21wbGV0ZWQgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFyayBvcGVyYXRpb24gYXMgY29tcGxldGVkIHVzaW5nIHN0cnVjdHVyZWQgdXBncmFkZSBoaXN0b3J5XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBtYXJrT3BlcmF0aW9uQ29tcGxldGVkKG9wZXJhdGlvbklkOiBzdHJpbmcsIHZlcnNpb246IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKSB8fCB7fTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHVwZ3JhZGUgaGlzdG9yeSBzdHJ1Y3R1cmUgaWYgbmVlZGVkXG4gICAgICAgIGlmICghZGF0YS51cGdyYWRlSGlzdG9yeSkge1xuICAgICAgICAgICAgZGF0YS51cGdyYWRlSGlzdG9yeSA9IHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWRVcGdyYWRlczoge30sXG4gICAgICAgICAgICAgICAgY29tcGxldGVkT3BlcmF0aW9uczoge31cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNYXJrIG9wZXJhdGlvbiBhcyBjb21wbGV0ZWQgaW4gc3RydWN0dXJlZCBmb3JtYXRcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uS2V5ID0gYG9wZXJhdGlvbl8ke3ZlcnNpb24ucmVwbGFjZSgvXFwuL2csICdfJyl9XyR7b3BlcmF0aW9uSWR9YDtcbiAgICAgICAgZGF0YS51cGdyYWRlSGlzdG9yeS5jb21wbGV0ZWRPcGVyYXRpb25zW29wZXJhdGlvbktleV0gPSB7XG4gICAgICAgICAgICBvcGVyYXRpb25JZDogb3BlcmF0aW9uSWQsXG4gICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uLFxuICAgICAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgY29tcGxldGVkOiB0cnVlXG4gICAgICAgIH07XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEoZGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGRvY3VtZW50YXRpb24gbGlua3NcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldERvY0xpbmtzKHZlcnNpb246IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgKipSZXNvdXJjZXM6Kipcblx1MjAyMiBbRnVsbCBSZWxlYXNlIE5vdGVzXSgke0dJVEhVQi5SRVBPX0JBU0V9L2Jsb2IvJHt2ZXJzaW9ufS9SRUxFQVNFX05PVEVTLm1kKVxuXHUyMDIyIFtEb2N1bWVudGF0aW9uXSgke0dJVEhVQi5SRVBPX0JBU0V9L2Jsb2IvJHt2ZXJzaW9ufS9SRUFETUUubWQpYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBzaG91bGQgc2hvdyB1cGdyYWRlIHdhcm5pbmcgZm9yIHZlcnkgb2xkIHZlcnNpb25zXG4gICAgICovXG4gICAgcHJpdmF0ZSBzaG91bGRTaG93VXBncmFkZVdhcm5pbmcobGFzdFZlcnNpb246IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gVmVyc2lvblV0aWxzLmNvbXBhcmVWZXJzaW9ucyhsYXN0VmVyc2lvbiwgXCIxLjAuMlwiKSA8IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHVwZ3JhZGUgd2FybmluZyBmb3IgdmVyeSBvbGQgdmVyc2lvbnNcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldFVwZ3JhZGVXYXJuaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgXHUyNkEwXHVGRTBGICoqSW1wb3J0YW50IGZvciB1c2VycyB1cGdyYWRpbmcgZnJvbSB2ZXJzaW9ucyBwcmlvciB0byB2MS4wLjI6KipcblxuVmVyc2lvbiAxLjAuMiBpbnRyb2R1Y2VkIG5ldyBtZXRhZGF0YSBwYXJhbWV0ZXJzIHJlcXVpcmVkIGZvciBjZXJ0YWluIGZlYXR1cmVzLiBGb3Igb3B0aW1hbCBwZXJmb3JtYW5jZSBhbmQgZmVhdHVyZSBjb21wYXRpYmlsaXR5LCBpdCdzIHJlY29tbWVuZGVkIHRvIGRlbGV0ZSBvbGQgZGF0YSBhbmQgcmUtaW1wb3J0IGNvbnZlcnNhdGlvbnMgd2l0aCB0aGlzIG5ldyB2ZXJzaW9uLmA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmV0Y2ggcmVsZWFzZSBvdmVydmlldyBmcm9tIEdpdEh1YlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZmV0Y2hSZWxlYXNlT3ZlcnZpZXcodmVyc2lvbjogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IHJlcXVlc3RVcmwgfSA9IHJlcXVpcmUoXCJvYnNpZGlhblwiKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgdXJsOiBgJHtHSVRIVUIuUkFXX0JBU0V9LyR7dmVyc2lvbn0vUkVMRUFTRV9OT1RFUy5tZGAsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IG92ZXJ2aWV3UmVnZXggPSAvIyMgT3ZlcnZpZXdcXHMrKC4qPykoPz0jI3wkKS9zO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSByZXNwb25zZS50ZXh0Lm1hdGNoKG92ZXJ2aWV3UmVnZXgpO1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0udHJpbSgpIDogbnVsbDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKFwiQ291bGQgbm90IGZldGNoIHJlbGVhc2Ugb3ZlcnZpZXc6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGFyZSB0d28gdmVyc2lvbiBzdHJpbmdzXG4gICAgICogUmV0dXJuczogLTEgaWYgdjEgPCB2MiwgMCBpZiBlcXVhbCwgMSBpZiB2MSA+IHYyXG4gICAgICovXG4gICAgcHJpdmF0ZSBjb21wYXJlVmVyc2lvbnModjE6IHN0cmluZywgdjI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHBhcnRzMSA9IHYxLnNwbGl0KCcuJykubWFwKE51bWJlcik7XG4gICAgICAgIGNvbnN0IHBhcnRzMiA9IHYyLnNwbGl0KCcuJykubWFwKE51bWJlcik7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1heChwYXJ0czEubGVuZ3RoLCBwYXJ0czIubGVuZ3RoKTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBudW0xID0gcGFydHMxW2ldIHx8IDA7XG4gICAgICAgICAgICBjb25zdCBudW0yID0gcGFydHMyW2ldIHx8IDA7XG5cbiAgICAgICAgICAgIGlmIChudW0xIDwgbnVtMikgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKG51bTEgPiBudW0yKSByZXR1cm4gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBtYW51YWwgb3BlcmF0aW9ucyBzdGF0dXMgZm9yIHNldHRpbmdzIFVJXG4gICAgICovXG4gICAgYXN5bmMgZ2V0TWFudWFsT3BlcmF0aW9uc0ZvclNldHRpbmdzKCk6IFByb21pc2U8QXJyYXk8e1xuICAgICAgICB2ZXJzaW9uOiBzdHJpbmc7XG4gICAgICAgIG9wZXJhdGlvbnM6IEFycmF5PHtcbiAgICAgICAgICAgIGlkOiBzdHJpbmc7XG4gICAgICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgICAgICAgICAgY29tcGxldGVkOiBib29sZWFuO1xuICAgICAgICAgICAgY2FuUnVuOiBib29sZWFuO1xuICAgICAgICB9PjtcbiAgICB9Pj4ge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gW107XG5cbiAgICAgICAgZm9yIChjb25zdCB1cGdyYWRlIG9mIHRoaXMuYXZhaWxhYmxlVXBncmFkZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCB0aGlzLmNyZWF0ZVVwZ3JhZGVDb250ZXh0KHVwZ3JhZGUsIFwiMC4wLjBcIiwgdGhpcy5wbHVnaW4ubWFuaWZlc3QudmVyc2lvbik7XG4gICAgICAgICAgICBjb25zdCBvcGVyYXRpb25zU3RhdHVzID0gYXdhaXQgdXBncmFkZS5nZXRNYW51YWxPcGVyYXRpb25zU3RhdHVzKGNvbnRleHQpO1xuXG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uc1N0YXR1cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogdXBncmFkZS52ZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25zOiBvcGVyYXRpb25zU3RhdHVzLm1hcChzdGF0dXMgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzdGF0dXMub3BlcmF0aW9uLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RhdHVzLm9wZXJhdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHN0YXR1cy5vcGVyYXRpb24uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IHN0YXR1cy5jb21wbGV0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5SdW46IHN0YXR1cy5jYW5SdW5cbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIHNpbmdsZSBtYW51YWwgb3BlcmF0aW9uIGZyb20gc2V0dGluZ3NcbiAgICAgKi9cbiAgICBhc3luYyBleGVjdXRlTWFudWFsT3BlcmF0aW9uKHZlcnNpb246IHN0cmluZywgb3BlcmF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8e3N1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZ30+IHtcbiAgICAgICAgY29uc3QgdXBncmFkZSA9IHRoaXMuYXZhaWxhYmxlVXBncmFkZXMuZmluZCh1ID0+IHUudmVyc2lvbiA9PT0gdmVyc2lvbik7XG4gICAgICAgIGlmICghdXBncmFkZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiVXBncmFkZSB2ZXJzaW9uIG5vdCBmb3VuZFwiIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb250ZXh0ID0gYXdhaXQgdGhpcy5jcmVhdGVVcGdyYWRlQ29udGV4dCh1cGdyYWRlLCBcIjAuMC4wXCIsIHRoaXMucGx1Z2luLm1hbmlmZXN0LnZlcnNpb24pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGdyYWRlLmV4ZWN1dGVNYW51YWxPcGVyYXRpb24ob3BlcmF0aW9uSWQsIGNvbnRleHQpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiByZXN1bHQuc3VjY2VzcyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXG4gICAgICAgIH07XG4gICAgfVxufSIsICIvKipcbiAqIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIgLSBPYnNpZGlhbiBQbHVnaW5cbiAqIENvcHlyaWdodCAoQykgMjAyNCBBa2ltIFNpc3Nhb3VpXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKiBcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKiBcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuXG4vLyBzcmMvdXBncmFkZS91dGlscy9tdWx0aS1vcGVyYXRpb24tcHJvZ3Jlc3MtbW9kYWwudHNcbmltcG9ydCB7IE1vZGFsLCBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSBPcGVyYXRpb25TdGF0dXMge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHN0YXR1czogJ3BlbmRpbmcnIHwgJ3J1bm5pbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZmFpbGVkJztcbiAgICBwcm9ncmVzcz86IG51bWJlcjsgLy8gMC0xMDBcbiAgICBjdXJyZW50RGV0YWlsPzogc3RyaW5nOyAvLyBDdXJyZW50IGZpbGUgYmVpbmcgcHJvY2Vzc2VkLCBldGMuXG4gICAgZXJyb3I/OiBzdHJpbmc7IC8vIEVycm9yIG1lc3NhZ2UgaWYgZmFpbGVkXG59XG5cbmV4cG9ydCBjbGFzcyBNdWx0aU9wZXJhdGlvblByb2dyZXNzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSB0aXRsZTogc3RyaW5nO1xuICAgIHByaXZhdGUgb3BlcmF0aW9uczogT3BlcmF0aW9uU3RhdHVzW107XG4gICAgcHJpdmF0ZSBjYW5DbG9zZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIFxuICAgIHByaXZhdGUgbW9kYWxUaXRsZUVsITogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBvcGVyYXRpb25zQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBvdmVyYWxsUHJvZ3Jlc3NFbCE6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgY2xvc2VCdXR0b25FbD86IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRpdGxlOiBzdHJpbmcsIG9wZXJhdGlvbnM6IE9wZXJhdGlvblN0YXR1c1tdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zID0gWy4uLm9wZXJhdGlvbnNdOyAvLyBDb3B5IGFycmF5XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKFwibmV4dXMtYWktY2hhdC1pbXBvcnRlci1tb2RhbFwiKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKFwibXVsdGktb3BlcmF0aW9uLXByb2dyZXNzLW1vZGFsXCIpO1xuXG4gICAgICAgIC8vIFRpdGxlXG4gICAgICAgIHRoaXMubW9kYWxUaXRsZUVsID0gY29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyBcbiAgICAgICAgICAgIHRleHQ6IHRoaXMudGl0bGUsIFxuICAgICAgICAgICAgY2xzOiBcIm1vZGFsLXRpdGxlXCIgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWNvbnRlbnRcIiB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIE9wZXJhdGlvbnMgY29udGFpbmVyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uc0NvbnRhaW5lciA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm9wZXJhdGlvbnMtY29udGFpbmVyXCIgfSk7XG4gICAgICAgIHRoaXMub3BlcmF0aW9uc0NvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgICAgICBtYXgtaGVpZ2h0OiAzMDBweDtcbiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gT3ZlcmFsbCBwcm9ncmVzc1xuICAgICAgICB0aGlzLm92ZXJhbGxQcm9ncmVzc0VsID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwib3ZlcmFsbC1wcm9ncmVzc1wiIH0pO1xuICAgICAgICB0aGlzLm92ZXJhbGxQcm9ncmVzc0VsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gSW5pdGlhbCByZW5kZXJcbiAgICAgICAgdGhpcy5yZW5kZXJPcGVyYXRpb25zKCk7XG4gICAgICAgIHRoaXMudXBkYXRlT3ZlcmFsbFByb2dyZXNzKCk7XG5cbiAgICAgICAgLy8gT3ZlcnJpZGUgY2xvc2UgYmVoYXZpb3JcbiAgICAgICAgdGhpcy5tb2RhbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJyAmJiAhdGhpcy5jYW5DbG9zZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgb3BlcmF0aW9uIHN0YXR1c1xuICAgICAqL1xuICAgIHVwZGF0ZU9wZXJhdGlvbihvcGVyYXRpb25JZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPE9wZXJhdGlvblN0YXR1cz4pIHtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gdGhpcy5vcGVyYXRpb25zLmZpbmQob3AgPT4gb3AuaWQgPT09IG9wZXJhdGlvbklkKTtcbiAgICAgICAgaWYgKG9wZXJhdGlvbikge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvcGVyYXRpb24sIHVwZGF0ZXMpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJPcGVyYXRpb25zKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU92ZXJhbGxQcm9ncmVzcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFyayBhbGwgb3BlcmF0aW9ucyBhcyBjb21wbGV0ZSBhbmQgYWxsb3cgY2xvc2luZ1xuICAgICAqL1xuICAgIG1hcmtDb21wbGV0ZShtZXNzYWdlOiBzdHJpbmcgPSBcIkFsbCBvcGVyYXRpb25zIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHlcIikge1xuICAgICAgICB0aGlzLmNhbkNsb3NlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vdmVyYWxsUHJvZ3Jlc3NFbC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMub3ZlcmFsbFByb2dyZXNzRWwuc3R5bGUuY29sb3IgPSBcInZhcigtLXRleHQtc3VjY2VzcylcIjtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBjbG9zZSBidXR0b25cbiAgICAgICAgaWYgKCF0aGlzLmNsb3NlQnV0dG9uRWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQnV0dG9uRWwgPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIkNvbXBsZXRlXCIsXG4gICAgICAgICAgICAgICAgY2xzOiBcIm1vZC1jdGFcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IGVycm9yIHN0YXRlXG4gICAgICovXG4gICAgc2hvd0Vycm9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICB0aGlzLmNhbkNsb3NlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vdmVyYWxsUHJvZ3Jlc3NFbC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMub3ZlcmFsbFByb2dyZXNzRWwuc3R5bGUuY29sb3IgPSBcInZhcigtLXRleHQtZXJyb3IpXCI7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgY2xvc2UgYnV0dG9uXG4gICAgICAgIGlmICghdGhpcy5jbG9zZUJ1dHRvbkVsKSB7XG4gICAgICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICAgICAgdGhpcy5jbG9zZUJ1dHRvbkVsID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG4gICAgICAgICAgICAgICAgdGV4dDogXCJDbG9zZVwiLFxuICAgICAgICAgICAgICAgIGNsczogXCJtb2Qtd2FybmluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VCdXR0b25FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlciBhbGwgb3BlcmF0aW9uc1xuICAgICAqL1xuICAgIHByaXZhdGUgcmVuZGVyT3BlcmF0aW9ucygpIHtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zQ29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBvcGVyYXRpb24gb2YgdGhpcy5vcGVyYXRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBvcGVyYXRpb25FbCA9IHRoaXMub3BlcmF0aW9uc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwib3BlcmF0aW9uLWl0ZW1cIiB9KTtcbiAgICAgICAgICAgIG9wZXJhdGlvbkVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgYDtcblxuICAgICAgICAgICAgLy8gU3RhdHVzIGljb25cbiAgICAgICAgICAgIGNvbnN0IGljb25FbCA9IG9wZXJhdGlvbkVsLmNyZWF0ZURpdih7IGNsczogXCJvcGVyYXRpb24taWNvblwiIH0pO1xuICAgICAgICAgICAgaWNvbkVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMTJweDtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgICAgYDtcblxuICAgICAgICAgICAgc3dpdGNoIChvcGVyYXRpb24uc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAncGVuZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIGljb25FbC50ZXh0Q29udGVudCA9ICdcdTI1Q0InO1xuICAgICAgICAgICAgICAgICAgICBpY29uRWwuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdydW5uaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgaWNvbkVsLnRleHRDb250ZW50ID0gJ1x1MjZBMCc7XG4gICAgICAgICAgICAgICAgICAgIGljb25FbC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LWFjY2VudCknO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjb21wbGV0ZWQnOlxuICAgICAgICAgICAgICAgICAgICBpY29uRWwudGV4dENvbnRlbnQgPSAnXHUyNzEzJztcbiAgICAgICAgICAgICAgICAgICAgaWNvbkVsLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtc3VjY2VzcyknO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmYWlsZWQnOlxuICAgICAgICAgICAgICAgICAgICBpY29uRWwudGV4dENvbnRlbnQgPSAnXHUyNzE3JztcbiAgICAgICAgICAgICAgICAgICAgaWNvbkVsLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtZXJyb3IpJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbnRlbnQgY29udGFpbmVyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50RWwgPSBvcGVyYXRpb25FbC5jcmVhdGVEaXYoeyBjbHM6IFwib3BlcmF0aW9uLWNvbnRlbnRcIiB9KTtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5zdHlsZS5jc3NUZXh0ID0gYGZsZXg6IDE7IG1pbi13aWR0aDogMDtgO1xuXG4gICAgICAgICAgICAvLyBPcGVyYXRpb24gbmFtZVxuICAgICAgICAgICAgY29uc3QgbmFtZUVsID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJvcGVyYXRpb24tbmFtZVwiIH0pO1xuICAgICAgICAgICAgbmFtZUVsLnRleHRDb250ZW50ID0gb3BlcmF0aW9uLm5hbWU7XG4gICAgICAgICAgICBuYW1lRWwuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgICAgYDtcblxuICAgICAgICAgICAgLy8gUHJvZ3Jlc3MgYmFyIChpZiBvcGVyYXRpb24gaXMgcnVubmluZyBvciBoYXMgcHJvZ3Jlc3MpXG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uLnN0YXR1cyA9PT0gJ3J1bm5pbmcnIHx8IChvcGVyYXRpb24ucHJvZ3Jlc3MgIT09IHVuZGVmaW5lZCAmJiBvcGVyYXRpb24ucHJvZ3Jlc3MgPiAwKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJwcm9ncmVzcy1jb250YWluZXJcIiB9KTtcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA4cHg7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogNXB4IDA7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgYDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gcHJvZ3Jlc3NDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInByb2dyZXNzLWJhclwiIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gb3BlcmF0aW9uLnByb2dyZXNzIHx8IDA7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXIuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJHtwcm9ncmVzc30lO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjNzIGVhc2U7XG4gICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ3VycmVudCBkZXRhaWwgKGlmIHByb3ZpZGVkKVxuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5jdXJyZW50RGV0YWlsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGV0YWlsRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm9wZXJhdGlvbi1kZXRhaWxcIiB9KTtcbiAgICAgICAgICAgICAgICBkZXRhaWxFbC50ZXh0Q29udGVudCA9IHRoaXMudHJ1bmNhdGVEZXRhaWwob3BlcmF0aW9uLmN1cnJlbnREZXRhaWwpO1xuICAgICAgICAgICAgICAgIGRldGFpbEVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAzcHg7XG4gICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRXJyb3IgbWVzc2FnZSAoaWYgZmFpbGVkKVxuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5zdGF0dXMgPT09ICdmYWlsZWQnICYmIG9wZXJhdGlvbi5lcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm9wZXJhdGlvbi1lcnJvclwiIH0pO1xuICAgICAgICAgICAgICAgIGVycm9yRWwudGV4dENvbnRlbnQgPSBvcGVyYXRpb24uZXJyb3I7XG4gICAgICAgICAgICAgICAgZXJyb3JFbC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDNweDtcbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIG92ZXJhbGwgcHJvZ3Jlc3MgZGlzcGxheVxuICAgICAqL1xuICAgIHByaXZhdGUgdXBkYXRlT3ZlcmFsbFByb2dyZXNzKCkge1xuICAgICAgICBjb25zdCBjb21wbGV0ZWQgPSB0aGlzLm9wZXJhdGlvbnMuZmlsdGVyKG9wID0+IG9wLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgZmFpbGVkID0gdGhpcy5vcGVyYXRpb25zLmZpbHRlcihvcCA9PiBvcC5zdGF0dXMgPT09ICdmYWlsZWQnKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy5vcGVyYXRpb25zLmxlbmd0aDtcblxuICAgICAgICBpZiAoZmFpbGVkID4gMCkge1xuICAgICAgICAgICAgdGhpcy5vdmVyYWxsUHJvZ3Jlc3NFbC50ZXh0Q29udGVudCA9IGBQcm9ncmVzczogJHtjb21wbGV0ZWR9LyR7dG90YWx9IG9wZXJhdGlvbnMgKCR7ZmFpbGVkfSBmYWlsZWQpYDtcbiAgICAgICAgICAgIHRoaXMub3ZlcmFsbFByb2dyZXNzRWwuc3R5bGUuY29sb3IgPSBcInZhcigtLXRleHQtZXJyb3IpXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoY29tcGxldGVkID09PSB0b3RhbCkge1xuICAgICAgICAgICAgdGhpcy5vdmVyYWxsUHJvZ3Jlc3NFbC50ZXh0Q29udGVudCA9IGBBbGwgJHt0b3RhbH0gb3BlcmF0aW9ucyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5YDtcbiAgICAgICAgICAgIHRoaXMub3ZlcmFsbFByb2dyZXNzRWwuc3R5bGUuY29sb3IgPSBcInZhcigtLXRleHQtc3VjY2VzcylcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmFsbFByb2dyZXNzRWwudGV4dENvbnRlbnQgPSBgUHJvZ3Jlc3M6ICR7Y29tcGxldGVkfS8ke3RvdGFsfSBvcGVyYXRpb25zYDtcbiAgICAgICAgICAgIHRoaXMub3ZlcmFsbFByb2dyZXNzRWwuc3R5bGUuY29sb3IgPSBcInZhcigtLXRleHQtbm9ybWFsKVwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJ1bmNhdGUgZGV0YWlsIHRleHQgdG8gZml0IGluIG1vZGFsXG4gICAgICovXG4gICAgcHJpdmF0ZSB0cnVuY2F0ZURldGFpbChkZXRhaWw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG1heExlbmd0aCA9IDUwO1xuICAgICAgICBpZiAoZGV0YWlsLmxlbmd0aCA8PSBtYXhMZW5ndGgpIHJldHVybiBkZXRhaWw7XG4gICAgICAgIHJldHVybiAnLi4uJyArIGRldGFpbC5zbGljZSgtbWF4TGVuZ3RoICsgMyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGUgY2xvc2UgdG8gcmVzcGVjdCBjYW5DbG9zZSBmbGFnXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbkNsb3NlKSB7XG4gICAgICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn0iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL2RpYWxvZ3MvcHJvdmlkZXItc2VsZWN0aW9uLWRpYWxvZy50c1xuaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgUHJvdmlkZXJSZWdpc3RyeSB9IGZyb20gXCIuLi9wcm92aWRlcnMvcHJvdmlkZXItYWRhcHRlclwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb3ZpZGVySW5mbyB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBmaWxlRm9ybWF0czogc3RyaW5nW107XG59XG5cbmV4cG9ydCBjbGFzcyBQcm92aWRlclNlbGVjdGlvbkRpYWxvZyBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIHNlbGVjdGVkUHJvdmlkZXI6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgb25Qcm92aWRlclNlbGVjdGVkOiAocHJvdmlkZXI6IHN0cmluZykgPT4gdm9pZDtcbiAgICBwcml2YXRlIHByb3ZpZGVyczogUHJvdmlkZXJJbmZvW107XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYXBwOiBBcHAsIFxuICAgICAgICBwcm92aWRlclJlZ2lzdHJ5OiBQcm92aWRlclJlZ2lzdHJ5LFxuICAgICAgICBvblByb3ZpZGVyU2VsZWN0ZWQ6IChwcm92aWRlcjogc3RyaW5nKSA9PiB2b2lkXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMub25Qcm92aWRlclNlbGVjdGVkID0gb25Qcm92aWRlclNlbGVjdGVkO1xuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IHRoaXMuZ2V0QXZhaWxhYmxlUHJvdmlkZXJzKHByb3ZpZGVyUmVnaXN0cnkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QXZhaWxhYmxlUHJvdmlkZXJzKHJlZ2lzdHJ5OiBQcm92aWRlclJlZ2lzdHJ5KTogUHJvdmlkZXJJbmZvW10ge1xuICAgICAgICAvLyBHZXQgYXZhaWxhYmxlIHByb3ZpZGVycyBmcm9tIHJlZ2lzdHJ5XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyczogUHJvdmlkZXJJbmZvW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoYXRHUFRcbiAgICAgICAgaWYgKHJlZ2lzdHJ5LmdldEFkYXB0ZXIoXCJjaGF0Z3B0XCIpKSB7XG4gICAgICAgICAgICBwcm92aWRlcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IFwiY2hhdGdwdFwiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiQ2hhdEdQVFwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIk9wZW5BSSBDaGF0R1BUIGNvbnZlcnNhdGlvbiBleHBvcnRzXCIsXG4gICAgICAgICAgICAgICAgZmlsZUZvcm1hdHM6IFtcImNvbnZlcnNhdGlvbnMuanNvbiBvbmx5XCJdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ2xhdWRlXG4gICAgICAgIGlmIChyZWdpc3RyeS5nZXRBZGFwdGVyKFwiY2xhdWRlXCIpKSB7XG4gICAgICAgICAgICBwcm92aWRlcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IFwiY2xhdWRlXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJDbGF1ZGVcIixcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJBbnRocm9waWMgQ2xhdWRlIGNvbnZlcnNhdGlvbiBleHBvcnRzXCIsXG4gICAgICAgICAgICAgICAgZmlsZUZvcm1hdHM6IFtcImNvbnZlcnNhdGlvbnMuanNvbiArIHVzZXJzLmpzb25cIiwgXCJwcm9qZWN0cy5qc29uIChvcHRpb25hbClcIl1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcHJvdmlkZXJzO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIC8vIFRpdGxlXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJTZWxlY3QgQXJjaGl2ZSBQcm92aWRlclwiIH0pO1xuXG4gICAgICAgIC8vIFByb3ZpZGVyIHNlbGVjdGlvblxuICAgICAgICB0aGlzLnByb3ZpZGVycy5mb3JFYWNoKHByb3ZpZGVyID0+IHtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShwcm92aWRlci5uYW1lKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKHRoaXMuY3JlYXRlUHJvdmlkZXJEZXNjcmlwdGlvbihwcm92aWRlcikpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiU2VsZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUHJvdmlkZXIgPSBwcm92aWRlci5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByb3ZpZGVyU2VsZWN0ZWQocHJvdmlkZXIuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENhbmNlbCBidXR0b25cbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9IFwiMjBweFwiO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KTtcbiAgICAgICAgY2FuY2VsQnV0dG9uLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCIxMHB4XCI7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUHJvdmlkZXJEZXNjcmlwdGlvbihwcm92aWRlcjogUHJvdmlkZXJJbmZvKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyLmRlc2NyaXB0aW9uO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL2RpYWxvZ3MvZW5oYW5jZWQtZmlsZS1zZWxlY3Rpb24tZGlhbG9nLnRzXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBGaWxlU2VsZWN0aW9uUmVzdWx0LCBJbXBvcnRNb2RlIH0gZnJvbSBcIi4uL3R5cGVzL2NvbnZlcnNhdGlvbi1zZWxlY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIEVuaGFuY2VkRmlsZVNlbGVjdGlvbkRpYWxvZyBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIHNlbGVjdGVkRmlsZXM6IEZpbGVbXSA9IFtdO1xuICAgIHByaXZhdGUgaW1wb3J0TW9kZTogSW1wb3J0TW9kZSA9ICdhbGwnO1xuICAgIHByaXZhdGUgcHJvdmlkZXI6IHN0cmluZztcbiAgICBwcml2YXRlIG9uRmlsZVNlbGVjdGlvbkNvbXBsZXRlOiAocmVzdWx0OiBGaWxlU2VsZWN0aW9uUmVzdWx0KSA9PiB2b2lkO1xuICAgIHByaXZhdGUgZHJhZ0NvdW50ZXIgPSAwO1xuICAgIHByaXZhdGUgbGFzdEltcG9ydE1vZGU6IEltcG9ydE1vZGUgfCBudWxsID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhcHA6IEFwcCxcbiAgICAgICAgcHJvdmlkZXI6IHN0cmluZyxcbiAgICAgICAgb25GaWxlU2VsZWN0aW9uQ29tcGxldGU6IChyZXN1bHQ6IEZpbGVTZWxlY3Rpb25SZXN1bHQpID0+IHZvaWQsXG4gICAgICAgIHByaXZhdGUgcGx1Z2luPzogYW55IC8vIFBsdWdpbiBpbnN0YW5jZSB0byBhY2Nlc3Mgc2V0dGluZ3NcbiAgICApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xuICAgICAgICB0aGlzLm9uRmlsZVNlbGVjdGlvbkNvbXBsZXRlID0gb25GaWxlU2VsZWN0aW9uQ29tcGxldGU7XG5cbiAgICAgICAgLy8gU2V0IGluaXRpYWwgaW1wb3J0IG1vZGUgYmFzZWQgb24gc2V0dGluZ3NcbiAgICAgICAgdGhpcy5zZXRJbml0aWFsSW1wb3J0TW9kZSgpO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwsIG1vZGFsRWwsIHRpdGxlRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIC8vIEFkZCBjbGFzcyB0byBib3RoIG1vZGFsIGFuZCBjb250ZW50XG4gICAgICAgIG1vZGFsRWwuYWRkQ2xhc3MoJ25leHVzLWZpbGUtc2VsZWN0aW9uLWRpYWxvZycpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ25leHVzLWZpbGUtc2VsZWN0aW9uLWRpYWxvZycpO1xuXG4gICAgICAgIC8vIFNldCB0aXRsZSBpbiBtb2RhbCB0aXRsZSBiYXJcbiAgICAgICAgdGl0bGVFbC5zZXRUZXh0KGBJbXBvcnQgJHt0aGlzLnByb3ZpZGVyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhpcy5wcm92aWRlci5zbGljZSgxKX0gQ29udmVyc2F0aW9uc2ApO1xuXG4gICAgICAgIC8vIEltcG9ydCBtb2RlIHNlbGVjdGlvblxuICAgICAgICB0aGlzLmNyZWF0ZUltcG9ydE1vZGVTZWN0aW9uKGNvbnRlbnRFbCk7XG5cbiAgICAgICAgLy8gRmlsZSBzZWxlY3Rpb24gYXJlYVxuICAgICAgICB0aGlzLmNyZWF0ZUZpbGVTZWxlY3Rpb25BcmVhKGNvbnRlbnRFbCk7XG5cbiAgICAgICAgLy8gU2VsZWN0ZWQgZmlsZXMgcHJldmlld1xuICAgICAgICB0aGlzLmNyZWF0ZUZpbGVQcmV2aWV3QXJlYShjb250ZW50RWwpO1xuXG4gICAgICAgIC8vIEFjdGlvbiBidXR0b25zXG4gICAgICAgIHRoaXMuY3JlYXRlQWN0aW9uQnV0dG9ucyhjb250ZW50RWwpO1xuXG4gICAgICAgIC8vIEFkZCBjdXN0b20gc3R5bGVzXG4gICAgICAgIHRoaXMuYWRkQ3VzdG9tU3R5bGVzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVJbXBvcnRNb2RlU2VjdGlvbihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KCdpbXBvcnQtbW9kZS1zZWN0aW9uJyk7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUubWFyZ2luQm90dG9tID0gXCIyMHB4XCI7XG5cbiAgICAgICAgY29uc3Qgc2VjdGlvblRpdGxlID0gc2VjdGlvbi5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJJbXBvcnQgTW9kZVwiIH0pO1xuICAgICAgICBzZWN0aW9uVGl0bGUuc3R5bGUubWFyZ2luVG9wID0gXCIwXCI7XG4gICAgICAgIHNlY3Rpb25UaXRsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjEycHhcIjtcbiAgICAgICAgc2VjdGlvblRpdGxlLnN0eWxlLmZvbnRTaXplID0gXCIxZW1cIjtcblxuICAgICAgICAvLyBUd28gb3B0aW9ucyBzaWRlIGJ5IHNpZGUgLSBjbGVhbiBhbmQgcmVhZGFibGVcbiAgICAgICAgY29uc3Qgb3B0aW9uc0NvbnRhaW5lciA9IHNlY3Rpb24uY3JlYXRlRGl2KCdpbXBvcnQtb3B0aW9ucy1jb250YWluZXInKTtcbiAgICAgICAgb3B0aW9uc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJncmlkXCI7XG4gICAgICAgIG9wdGlvbnNDb250YWluZXIuc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9IFwiMWZyIDFmclwiO1xuICAgICAgICBvcHRpb25zQ29udGFpbmVyLnN0eWxlLmdhcCA9IFwiMTJweFwiO1xuXG4gICAgICAgIC8vIEltcG9ydCBBbGwgb3B0aW9uXG4gICAgICAgIGNvbnN0IGFsbE9wdGlvbiA9IG9wdGlvbnNDb250YWluZXIuY3JlYXRlRGl2KCdpbXBvcnQtb3B0aW9uLWJveCcpO1xuICAgICAgICBhbGxPcHRpb24uc3R5bGUucGFkZGluZyA9IFwiMTRweCAxNnB4XCI7XG4gICAgICAgIGFsbE9wdGlvbi5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcbiAgICAgICAgYWxsT3B0aW9uLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNnB4XCI7XG4gICAgICAgIGFsbE9wdGlvbi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICAgICAgYWxsT3B0aW9uLnN0eWxlLnRyYW5zaXRpb24gPSBcImFsbCAwLjJzXCI7XG4gICAgICAgIGFsbE9wdGlvbi5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIGFsbE9wdGlvbi5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcbiAgICAgICAgYWxsT3B0aW9uLnN0eWxlLmdhcCA9IFwiMTBweFwiO1xuICAgICAgICBhbGxPcHRpb24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpXCI7XG5cbiAgICAgICAgaWYgKHRoaXMuaW1wb3J0TW9kZSA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAgIGFsbE9wdGlvbi5zdHlsZS5ib3JkZXJDb2xvciA9IFwidmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KVwiO1xuICAgICAgICAgICAgYWxsT3B0aW9uLnN0eWxlLmJvcmRlcldpZHRoID0gXCIycHhcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFsbFJhZGlvID0gYWxsT3B0aW9uLmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInJhZGlvXCIgfSk7XG4gICAgICAgIGFsbFJhZGlvLm5hbWUgPSBcImltcG9ydE1vZGVcIjtcbiAgICAgICAgYWxsUmFkaW8udmFsdWUgPSBcImFsbFwiO1xuICAgICAgICBhbGxSYWRpby5jaGVja2VkID0gdGhpcy5pbXBvcnRNb2RlID09PSAnYWxsJztcbiAgICAgICAgYWxsUmFkaW8uaWQgPSBcImltcG9ydC1hbGxcIjtcbiAgICAgICAgYWxsUmFkaW8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pbXBvcnRNb2RlID0gJ2FsbCc7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUltcG9ydE1vZGVEZXNjcmlwdGlvbigpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbXBvcnRNb2RlQm94ZXMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYWxsQ29udGVudCA9IGFsbE9wdGlvbi5jcmVhdGVEaXYoKTtcbiAgICAgICAgYWxsQ29udGVudC5zdHlsZS5mbGV4ID0gXCIxXCI7XG5cbiAgICAgICAgY29uc3QgYWxsTGFiZWwgPSBhbGxDb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIik7XG4gICAgICAgIGFsbExhYmVsLmh0bWxGb3IgPSBcImltcG9ydC1hbGxcIjtcbiAgICAgICAgYWxsTGFiZWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgYWxsTGFiZWwuc3R5bGUuZm9udFdlaWdodCA9IFwiNTAwXCI7XG4gICAgICAgIGFsbExhYmVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiNHB4XCI7XG4gICAgICAgIGFsbExhYmVsLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICBhbGxMYWJlbC5zdHlsZS5jb2xvciA9IFwidmFyKC0tdGV4dC1ub3JtYWwpXCI7XG4gICAgICAgIGFsbExhYmVsLnRleHRDb250ZW50ID0gXCJJbXBvcnQgQWxsXCI7XG5cbiAgICAgICAgY29uc3QgYWxsRGVzYyA9IGFsbENvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgIGFsbERlc2Muc3R5bGUuZm9udFNpemUgPSBcIjAuODVlbVwiO1xuICAgICAgICBhbGxEZXNjLnN0eWxlLmNvbG9yID0gXCJ2YXIoLS10ZXh0LW11dGVkKVwiO1xuICAgICAgICBhbGxEZXNjLnRleHRDb250ZW50ID0gXCJJbXBvcnQgYWxsIGNvbnZlcnNhdGlvbnMgKGZhc3RlcilcIjtcblxuICAgICAgICBhbGxPcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBhbGxSYWRpby5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaW1wb3J0TW9kZSA9ICdhbGwnO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbXBvcnRNb2RlRGVzY3JpcHRpb24oKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW1wb3J0TW9kZUJveGVzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNlbGVjdCBTcGVjaWZpYyBvcHRpb25cbiAgICAgICAgY29uc3Qgc2VsZWN0T3B0aW9uID0gb3B0aW9uc0NvbnRhaW5lci5jcmVhdGVEaXYoJ2ltcG9ydC1vcHRpb24tYm94Jyk7XG4gICAgICAgIHNlbGVjdE9wdGlvbi5zdHlsZS5wYWRkaW5nID0gXCIxNHB4IDE2cHhcIjtcbiAgICAgICAgc2VsZWN0T3B0aW9uLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKVwiO1xuICAgICAgICBzZWxlY3RPcHRpb24uc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI2cHhcIjtcbiAgICAgICAgc2VsZWN0T3B0aW9uLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICBzZWxlY3RPcHRpb24uc3R5bGUudHJhbnNpdGlvbiA9IFwiYWxsIDAuMnNcIjtcbiAgICAgICAgc2VsZWN0T3B0aW9uLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgc2VsZWN0T3B0aW9uLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuICAgICAgICBzZWxlY3RPcHRpb24uc3R5bGUuZ2FwID0gXCIxMHB4XCI7XG4gICAgICAgIHNlbGVjdE9wdGlvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInZhcigtLWJhY2tncm91bmQtcHJpbWFyeSlcIjtcblxuICAgICAgICBpZiAodGhpcy5pbXBvcnRNb2RlID09PSAnc2VsZWN0aXZlJykge1xuICAgICAgICAgICAgc2VsZWN0T3B0aW9uLnN0eWxlLmJvcmRlckNvbG9yID0gXCJ2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpXCI7XG4gICAgICAgICAgICBzZWxlY3RPcHRpb24uc3R5bGUuYm9yZGVyV2lkdGggPSBcIjJweFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0UmFkaW8gPSBzZWxlY3RPcHRpb24uY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwicmFkaW9cIiB9KTtcbiAgICAgICAgc2VsZWN0UmFkaW8ubmFtZSA9IFwiaW1wb3J0TW9kZVwiO1xuICAgICAgICBzZWxlY3RSYWRpby52YWx1ZSA9IFwic2VsZWN0aXZlXCI7XG4gICAgICAgIHNlbGVjdFJhZGlvLmNoZWNrZWQgPSB0aGlzLmltcG9ydE1vZGUgPT09ICdzZWxlY3RpdmUnO1xuICAgICAgICBzZWxlY3RSYWRpby5pZCA9IFwiaW1wb3J0LXNlbGVjdGl2ZVwiO1xuICAgICAgICBzZWxlY3RSYWRpby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmltcG9ydE1vZGUgPSAnc2VsZWN0aXZlJztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW1wb3J0TW9kZURlc2NyaXB0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUltcG9ydE1vZGVCb3hlcygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzZWxlY3RDb250ZW50ID0gc2VsZWN0T3B0aW9uLmNyZWF0ZURpdigpO1xuICAgICAgICBzZWxlY3RDb250ZW50LnN0eWxlLmZsZXggPSBcIjFcIjtcblxuICAgICAgICBjb25zdCBzZWxlY3RMYWJlbCA9IHNlbGVjdENvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiKTtcbiAgICAgICAgc2VsZWN0TGFiZWwuaHRtbEZvciA9IFwiaW1wb3J0LXNlbGVjdGl2ZVwiO1xuICAgICAgICBzZWxlY3RMYWJlbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBzZWxlY3RMYWJlbC5zdHlsZS5mb250V2VpZ2h0ID0gXCI1MDBcIjtcbiAgICAgICAgc2VsZWN0TGFiZWwuc3R5bGUubWFyZ2luQm90dG9tID0gXCI0cHhcIjtcbiAgICAgICAgc2VsZWN0TGFiZWwuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgIHNlbGVjdExhYmVsLnN0eWxlLmNvbG9yID0gXCJ2YXIoLS10ZXh0LW5vcm1hbClcIjtcbiAgICAgICAgc2VsZWN0TGFiZWwudGV4dENvbnRlbnQgPSBcIlNlbGVjdCBTcGVjaWZpY1wiO1xuXG4gICAgICAgIGNvbnN0IHNlbGVjdERlc2MgPSBzZWxlY3RDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICBzZWxlY3REZXNjLnN0eWxlLmZvbnRTaXplID0gXCIwLjg1ZW1cIjtcbiAgICAgICAgc2VsZWN0RGVzYy5zdHlsZS5jb2xvciA9IFwidmFyKC0tdGV4dC1tdXRlZClcIjtcbiAgICAgICAgc2VsZWN0RGVzYy50ZXh0Q29udGVudCA9IFwiUHJldmlldyBhbmQgY2hvb3NlIGNvbnZlcnNhdGlvbnNcIjtcblxuICAgICAgICBzZWxlY3RPcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxlY3RSYWRpby5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaW1wb3J0TW9kZSA9ICdzZWxlY3RpdmUnO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbXBvcnRNb2RlRGVzY3JpcHRpb24oKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW1wb3J0TW9kZUJveGVzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlSW1wb3J0TW9kZUJveGVzKCkge1xuICAgICAgICBjb25zdCBib3hlcyA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbXBvcnQtb3B0aW9uLWJveCcpO1xuICAgICAgICBib3hlcy5mb3JFYWNoKChib3g6IEhUTUxFbGVtZW50LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gKGluZGV4ID09PSAwICYmIHRoaXMuaW1wb3J0TW9kZSA9PT0gJ2FsbCcpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleCA9PT0gMSAmJiB0aGlzLmltcG9ydE1vZGUgPT09ICdzZWxlY3RpdmUnKTtcblxuICAgICAgICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBib3guc3R5bGUuYm9yZGVyQ29sb3IgPSBcInZhcigtLWludGVyYWN0aXZlLWFjY2VudClcIjtcbiAgICAgICAgICAgICAgICBib3guc3R5bGUuYm9yZGVyV2lkdGggPSBcIjJweFwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBib3guc3R5bGUuYm9yZGVyQ29sb3IgPSBcInZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKVwiO1xuICAgICAgICAgICAgICAgIGJveC5zdHlsZS5ib3JkZXJXaWR0aCA9IFwiMXB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlRmlsZVNlbGVjdGlvbkFyZWEoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdignZmlsZS1zZWxlY3Rpb24tc2VjdGlvbicpO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMjBweFwiO1xuXG4gICAgICAgIGNvbnN0IHNlY3Rpb25UaXRsZSA9IHNlY3Rpb24uY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiU2VsZWN0IEZpbGVzXCIgfSk7XG4gICAgICAgIHNlY3Rpb25UaXRsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjEwcHhcIjtcbiAgICAgICAgc2VjdGlvblRpdGxlLnN0eWxlLmZvbnRTaXplID0gXCIxZW1cIjtcblxuICAgICAgICAvLyBEcm9wIHpvbmUgLSBtb3JlIGNvbXBhY3RcbiAgICAgICAgY29uc3QgZHJvcFpvbmUgPSBzZWN0aW9uLmNyZWF0ZURpdignZHJvcC16b25lJyk7XG4gICAgICAgIGRyb3Bab25lLnN0eWxlLmJvcmRlciA9IFwiMnB4IGRhc2hlZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcbiAgICAgICAgZHJvcFpvbmUuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI4cHhcIjtcbiAgICAgICAgZHJvcFpvbmUuc3R5bGUucGFkZGluZyA9IFwiMjRweCAyMHB4XCI7XG4gICAgICAgIGRyb3Bab25lLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgICAgIGRyb3Bab25lLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICBkcm9wWm9uZS5zdHlsZS50cmFuc2l0aW9uID0gXCJhbGwgMC4ycyBlYXNlXCI7XG5cbiAgICAgICAgY29uc3QgZHJvcEljb24gPSBkcm9wWm9uZS5jcmVhdGVFbChcImRpdlwiKTtcbiAgICAgICAgZHJvcEljb24uc3R5bGUuZm9udFNpemUgPSBcIjQ4cHhcIjtcbiAgICAgICAgZHJvcEljb24uc3R5bGUubWFyZ2luQm90dG9tID0gXCIxNXB4XCI7XG4gICAgICAgIGRyb3BJY29uLnRleHRDb250ZW50ID0gXCJcdUQ4M0RcdURDQzFcIjtcblxuICAgICAgICBjb25zdCBkcm9wVGV4dCA9IGRyb3Bab25lLmNyZWF0ZUVsKFwiZGl2XCIpO1xuICAgICAgICBkcm9wVGV4dC5zdHlsZS5mb250U2l6ZSA9IFwiMTZweFwiO1xuICAgICAgICBkcm9wVGV4dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjEwcHhcIjtcbiAgICAgICAgZHJvcFRleHQudGV4dENvbnRlbnQgPSBcIkRyb3AgWklQIGZpbGVzIGhlcmUgb3IgY2xpY2sgdG8gYnJvd3NlXCI7XG5cbiAgICAgICAgY29uc3QgZHJvcFN1YnRleHQgPSBkcm9wWm9uZS5jcmVhdGVFbChcImRpdlwiKTtcbiAgICAgICAgZHJvcFN1YnRleHQuc3R5bGUuZm9udFNpemUgPSBcIjE0cHhcIjtcbiAgICAgICAgZHJvcFN1YnRleHQuc3R5bGUuY29sb3IgPSBcInZhcigtLXRleHQtbXV0ZWQpXCI7XG4gICAgICAgIGRyb3BTdWJ0ZXh0LnRleHRDb250ZW50ID0gXCJTdXBwb3J0cyBtdWx0aXBsZSBmaWxlIHNlbGVjdGlvblwiO1xuXG4gICAgICAgIC8vIEZpbGUgaW5wdXQgKGhpZGRlbilcbiAgICAgICAgY29uc3QgZmlsZUlucHV0ID0gc2VjdGlvbi5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJmaWxlXCIgfSk7XG4gICAgICAgIGZpbGVJbnB1dC5hY2NlcHQgPSBcIi56aXBcIjtcbiAgICAgICAgZmlsZUlucHV0Lm11bHRpcGxlID0gdHJ1ZTtcbiAgICAgICAgZmlsZUlucHV0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgICAvLyBFdmVudCBoYW5kbGVyc1xuICAgICAgICBkcm9wWm9uZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGZpbGVJbnB1dC5jbGljaygpKTtcbiAgICAgICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB0aGlzLmhhbmRsZUZpbGVTZWxlY3Rpb24oZSkpO1xuXG4gICAgICAgIC8vIERyYWcgYW5kIGRyb3AgaGFuZGxlcnNcbiAgICAgICAgZHJvcFpvbmUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAoZSkgPT4gdGhpcy5oYW5kbGVEcmFnT3ZlcihlLCBkcm9wWm9uZSkpO1xuICAgICAgICBkcm9wWm9uZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCAoZSkgPT4gdGhpcy5oYW5kbGVEcmFnRW50ZXIoZSwgZHJvcFpvbmUpKTtcbiAgICAgICAgZHJvcFpvbmUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgKGUpID0+IHRoaXMuaGFuZGxlRHJhZ0xlYXZlKGUsIGRyb3Bab25lKSk7XG4gICAgICAgIGRyb3Bab25lLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCAoZSkgPT4gdGhpcy5oYW5kbGVEcm9wKGUsIGRyb3Bab25lKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVGaWxlUHJldmlld0FyZWEoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdignZmlsZS1wcmV2aWV3LXNlY3Rpb24nKTtcbiAgICAgICAgc2VjdGlvbi5pZCA9ICdmaWxlLXByZXZpZXctc2VjdGlvbic7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUubWFyZ2luQm90dG9tID0gXCIyMHB4XCI7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyAvLyBIaWRkZW4gaW5pdGlhbGx5XG5cbiAgICAgICAgY29uc3Qgc2VjdGlvblRpdGxlID0gc2VjdGlvbi5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJTZWxlY3RlZCBGaWxlc1wiIH0pO1xuICAgICAgICBzZWN0aW9uVGl0bGUuc3R5bGUubWFyZ2luQm90dG9tID0gXCIxNXB4XCI7XG5cbiAgICAgICAgLy8gU2Nyb2xsYWJsZSBjb250YWluZXIgZm9yIGZpbGUgbGlzdFxuICAgICAgICBjb25zdCBmaWxlTGlzdENvbnRhaW5lciA9IHNlY3Rpb24uY3JlYXRlRGl2KCdmaWxlLWxpc3QtY29udGFpbmVyJyk7XG4gICAgICAgIGZpbGVMaXN0Q29udGFpbmVyLnN0eWxlLm1heEhlaWdodCA9IFwiMzAwcHhcIjtcbiAgICAgICAgZmlsZUxpc3RDb250YWluZXIuc3R5bGUub3ZlcmZsb3dZID0gXCJhdXRvXCI7XG4gICAgICAgIGZpbGVMaXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKVwiO1xuICAgICAgICBmaWxlTGlzdENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjZweFwiO1xuICAgICAgICBmaWxlTGlzdENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gXCI4cHhcIjtcblxuICAgICAgICBjb25zdCBmaWxlTGlzdCA9IGZpbGVMaXN0Q29udGFpbmVyLmNyZWF0ZURpdignZmlsZS1saXN0Jyk7XG4gICAgICAgIGZpbGVMaXN0LmlkID0gJ2ZpbGUtbGlzdCc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVBY3Rpb25CdXR0b25zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdignYWN0aW9uLWJ1dHRvbnMnKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LWVuZFwiO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gXCIxMHB4XCI7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSBcIjIwcHhcIjtcblxuICAgICAgICAvLyBDYW5jZWwgYnV0dG9uXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gXCI4cHggMTZweFwiO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgICAgIC8vIEltcG9ydCBidXR0b25cbiAgICAgICAgY29uc3QgaW1wb3J0QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDb250aW51ZVwiIH0pO1xuICAgICAgICBpbXBvcnRCdXR0b24uaWQgPSAnaW1wb3J0LWJ1dHRvbic7XG4gICAgICAgIGltcG9ydEJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gXCI4cHggMTZweFwiO1xuICAgICAgICBpbXBvcnRCdXR0b24uY2xhc3NMaXN0LmFkZCgnbW9kLWN0YScpO1xuICAgICAgICBpbXBvcnRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBpbXBvcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhhbmRsZUltcG9ydCgpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUZpbGVTZWxlY3Rpb24oZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIGlmIChpbnB1dC5maWxlcykge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGVzID0gQXJyYXkuZnJvbShpbnB1dC5maWxlcyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbGVQcmV2aWV3KCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUltcG9ydEJ1dHRvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVEcmFnT3ZlcihldmVudDogRHJhZ0V2ZW50LCBkcm9wWm9uZTogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZHJvcFpvbmUuc3R5bGUuYm9yZGVyQ29sb3IgPSBcInZhcigtLWludGVyYWN0aXZlLWFjY2VudClcIjtcbiAgICAgICAgZHJvcFpvbmUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKVwiO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRHJhZ0VudGVyKGV2ZW50OiBEcmFnRXZlbnQsIGRyb3Bab25lOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmRyYWdDb3VudGVyKys7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVEcmFnTGVhdmUoZXZlbnQ6IERyYWdFdmVudCwgZHJvcFpvbmU6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuZHJhZ0NvdW50ZXItLTtcbiAgICAgICAgaWYgKHRoaXMuZHJhZ0NvdW50ZXIgPT09IDApIHtcbiAgICAgICAgICAgIGRyb3Bab25lLnN0eWxlLmJvcmRlckNvbG9yID0gXCJ2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcbiAgICAgICAgICAgIGRyb3Bab25lLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidHJhbnNwYXJlbnRcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRHJvcChldmVudDogRHJhZ0V2ZW50LCBkcm9wWm9uZTogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5kcmFnQ291bnRlciA9IDA7XG4gICAgICAgIGRyb3Bab25lLnN0eWxlLmJvcmRlckNvbG9yID0gXCJ2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcbiAgICAgICAgZHJvcFpvbmUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xuXG4gICAgICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXI/LmZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IEFycmF5LmZyb20oZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzKS5maWx0ZXIoZmlsZSA9PiBcbiAgICAgICAgICAgICAgICBmaWxlLm5hbWUudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLnppcCcpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZXMgPSBmaWxlcztcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbXBvcnRCdXR0b24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlRmlsZVByZXZpZXcoKSB7XG4gICAgICAgIGNvbnN0IHByZXZpZXdTZWN0aW9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignI2ZpbGUtcHJldmlldy1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGZpbGVMaXN0ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignI2ZpbGUtbGlzdCcpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcHJldmlld1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIGZpbGVMaXN0LmVtcHR5KCk7XG5cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlcy5mb3JFYWNoKChmaWxlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVJdGVtID0gZmlsZUxpc3QuY3JlYXRlRGl2KCdmaWxlLWl0ZW0nKTtcbiAgICAgICAgICAgICAgICBmaWxlSXRlbS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgICAgICAgICAgZmlsZUl0ZW0uc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcInNwYWNlLWJldHdlZW5cIjtcbiAgICAgICAgICAgICAgICBmaWxlSXRlbS5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgICBmaWxlSXRlbS5zdHlsZS5wYWRkaW5nID0gXCI4cHggMTJweFwiO1xuICAgICAgICAgICAgICAgIGZpbGVJdGVtLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKVwiO1xuICAgICAgICAgICAgICAgIGZpbGVJdGVtLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG4gICAgICAgICAgICAgICAgZmlsZUl0ZW0uc3R5bGUubWFyZ2luQm90dG9tID0gXCI4cHhcIjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVJbmZvID0gZmlsZUl0ZW0uY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgZmlsZUluZm8uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICAgICAgICAgIGZpbGVJbmZvLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBmaWxlSW5mby5jcmVhdGVFbChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgZmlsZU5hbWUudGV4dENvbnRlbnQgPSBmaWxlLm5hbWU7XG4gICAgICAgICAgICAgICAgZmlsZU5hbWUuc3R5bGUuZm9udFdlaWdodCA9IFwiNTAwXCI7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlU2l6ZSA9IGZpbGVJbmZvLmNyZWF0ZUVsKFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICBmaWxlU2l6ZS50ZXh0Q29udGVudCA9IHRoaXMuZm9ybWF0RmlsZVNpemUoZmlsZS5zaXplKTtcbiAgICAgICAgICAgICAgICBmaWxlU2l6ZS5zdHlsZS5mb250U2l6ZSA9IFwiMC45ZW1cIjtcbiAgICAgICAgICAgICAgICBmaWxlU2l6ZS5zdHlsZS5jb2xvciA9IFwidmFyKC0tdGV4dC1tdXRlZClcIjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbiA9IGZpbGVJdGVtLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJSZW1vdmVcIiB9KTtcbiAgICAgICAgICAgICAgICByZW1vdmVCdXR0b24uc3R5bGUucGFkZGluZyA9IFwiNHB4IDhweFwiO1xuICAgICAgICAgICAgICAgIHJlbW92ZUJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9IFwiMC45ZW1cIjtcbiAgICAgICAgICAgICAgICByZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnJlbW92ZUZpbGUoaW5kZXgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJldmlld1NlY3Rpb24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW1vdmVGaWxlKGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlRmlsZVByZXZpZXcoKTtcbiAgICAgICAgdGhpcy51cGRhdGVJbXBvcnRCdXR0b24oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUltcG9ydEJ1dHRvbigpIHtcbiAgICAgICAgY29uc3QgaW1wb3J0QnV0dG9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignI2ltcG9ydC1idXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgaW1wb3J0QnV0dG9uLmRpc2FibGVkID0gdGhpcy5zZWxlY3RlZEZpbGVzLmxlbmd0aCA9PT0gMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUltcG9ydE1vZGVEZXNjcmlwdGlvbigpIHtcbiAgICAgICAgLy8gQ291bGQgYWRkIGR5bmFtaWMgZGVzY3JpcHRpb24gdXBkYXRlcyBoZXJlIGlmIG5lZWRlZFxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlSW1wb3J0KCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFNhdmUgbGFzdCBpbXBvcnQgbW9kZSBpZiBzZXR0aW5nIGlzIGVuYWJsZWRcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbj8uc2V0dGluZ3M/LnJlbWVtYmVyTGFzdEltcG9ydE1vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0SW1wb3J0TW9kZSA9IHRoaXMuaW1wb3J0TW9kZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0OiBGaWxlU2VsZWN0aW9uUmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgIGZpbGVzOiB0aGlzLnNlbGVjdGVkRmlsZXMsXG4gICAgICAgICAgICAgICAgbW9kZTogdGhpcy5pbXBvcnRNb2RlLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiB0aGlzLnByb3ZpZGVyXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5vbkZpbGVTZWxlY3Rpb25Db21wbGV0ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRJbml0aWFsSW1wb3J0TW9kZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbj8uc2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuaW1wb3J0TW9kZSA9ICdhbGwnO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXNlIHJlbWVtYmVyZWQgbGFzdCBjaG9pY2UgaWYgZW5hYmxlZCwgb3RoZXJ3aXNlIHVzZSBkZWZhdWx0XG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1lbWJlckxhc3RJbXBvcnRNb2RlICYmIHRoaXMubGFzdEltcG9ydE1vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuaW1wb3J0TW9kZSA9IHRoaXMubGFzdEltcG9ydE1vZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmltcG9ydE1vZGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0SW1wb3J0TW9kZSB8fCAnYWxsJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZm9ybWF0RmlsZVNpemUoYnl0ZXM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGlmIChieXRlcyA9PT0gMCkgcmV0dXJuICcwIEJ5dGVzJztcbiAgICAgICAgY29uc3QgayA9IDEwMjQ7XG4gICAgICAgIGNvbnN0IHNpemVzID0gWydCeXRlcycsICdLQicsICdNQicsICdHQiddO1xuICAgICAgICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSk7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KChieXRlcyAvIE1hdGgucG93KGssIGkpKS50b0ZpeGVkKDIpKSArICcgJyArIHNpemVzW2ldO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkQ3VzdG9tU3R5bGVzKCkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gYFxuICAgICAgICAgICAgLyogTW9kYWwgc2l6aW5nIC0gd2lkZXIgYW5kIHJlc3BvbnNpdmUgKi9cbiAgICAgICAgICAgIC5tb2RhbC5uZXh1cy1maWxlLXNlbGVjdGlvbi1kaWFsb2cge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogbWluKDgwMHB4LCA5MHZ3KSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIHdpZHRoOiBtaW4oODAwcHgsIDkwdncpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBNb2RhbCB0aXRsZSBzcGFjaW5nICovXG4gICAgICAgICAgICAubW9kYWwubmV4dXMtZmlsZS1zZWxlY3Rpb24tZGlhbG9nIC5tb2RhbC10aXRsZSB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTZweCAyNHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5tb2RhbC5uZXh1cy1maWxlLXNlbGVjdGlvbi1kaWFsb2cgLm1vZGFsLWNvbnRlbnQge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgbWF4LWhlaWdodDogODV2aDtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4IDI0cHggMjRweCAyNHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBJbXBvcnQgbW9kZSBib3hlcyBob3ZlciBlZmZlY3QgKi9cbiAgICAgICAgICAgIC5uZXh1cy1maWxlLXNlbGVjdGlvbi1kaWFsb2cgLmltcG9ydC1vcHRpb24tYm94OmhvdmVyIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogRHJvcCB6b25lIGhvdmVyIGVmZmVjdCAqL1xuICAgICAgICAgICAgLm5leHVzLWZpbGUtc2VsZWN0aW9uLWRpYWxvZyAuZHJvcC16b25lOmhvdmVyIHtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIEZpbGUgbGlzdCBjb250YWluZXIgd2l0aCBjdXN0b20gc2Nyb2xsYmFyICovXG4gICAgICAgICAgICAubmV4dXMtZmlsZS1zZWxlY3Rpb24tZGlhbG9nIC5maWxlLWxpc3QtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxiYXItd2lkdGg6IHRoaW47XG4gICAgICAgICAgICAgICAgc2Nyb2xsYmFyLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcikgdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1maWxlLXNlbGVjdGlvbi1kaWFsb2cgLmZpbGUtbGlzdC1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTBweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLWZpbGUtc2VsZWN0aW9uLWRpYWxvZyAuZmlsZS1saXN0LWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtZmlsZS1zZWxlY3Rpb24tZGlhbG9nIC5maWxlLWxpc3QtY29udGFpbmVyOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLWZpbGUtc2VsZWN0aW9uLWRpYWxvZyAuZmlsZS1saXN0LWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuIiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy9kaWFsb2dzL2NvbnZlcnNhdGlvbi1zZWxlY3Rpb24tZGlhbG9nLnRzXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25NZXRhZGF0YSwgQW5hbHlzaXNJbmZvIH0gZnJvbSBcIi4uL3NlcnZpY2VzL2NvbnZlcnNhdGlvbi1tZXRhZGF0YS1leHRyYWN0b3JcIjtcbmltcG9ydCB7XG4gICAgQ29udmVyc2F0aW9uU2VsZWN0aW9uUmVzdWx0LFxuICAgIENvbnZlcnNhdGlvblNlbGVjdGlvblN0YXRlLFxuICAgIFBhZ2luYXRpb25TZXR0aW5ncyxcbiAgICBTb3J0T3B0aW9ucyxcbiAgICBGaWx0ZXJPcHRpb25zXG59IGZyb20gXCIuLi90eXBlcy9jb252ZXJzYXRpb24tc2VsZWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25TZWxlY3Rpb25EaWFsb2cgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBzdGF0ZTogQ29udmVyc2F0aW9uU2VsZWN0aW9uU3RhdGU7XG4gICAgcHJpdmF0ZSBvblNlbGVjdGlvbkNvbXBsZXRlOiAocmVzdWx0OiBDb252ZXJzYXRpb25TZWxlY3Rpb25SZXN1bHQpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBwbHVnaW4/OiBhbnk7IC8vIFBsdWdpbiBpbnN0YW5jZSB0byBhY2Nlc3Mgc2V0dGluZ3NcbiAgICBwcml2YXRlIGFuYWx5c2lzSW5mbz86IEFuYWx5c2lzSW5mbzsgLy8gSW5mb3JtYXRpb24gYWJvdXQgYW5hbHlzaXMgYW5kIGZpbHRlcmluZ1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGFwcDogQXBwLFxuICAgICAgICBjb252ZXJzYXRpb25zOiBDb252ZXJzYXRpb25NZXRhZGF0YVtdLFxuICAgICAgICBvblNlbGVjdGlvbkNvbXBsZXRlOiAocmVzdWx0OiBDb252ZXJzYXRpb25TZWxlY3Rpb25SZXN1bHQpID0+IHZvaWQsXG4gICAgICAgIHBsdWdpbj86IGFueSxcbiAgICAgICAgYW5hbHlzaXNJbmZvPzogQW5hbHlzaXNJbmZvXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMub25TZWxlY3Rpb25Db21wbGV0ZSA9IG9uU2VsZWN0aW9uQ29tcGxldGU7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFuYWx5c2lzSW5mbyA9IGFuYWx5c2lzSW5mbztcblxuICAgICAgICAvLyBHZXQgcGFnZSBzaXplIGZyb20gc2V0dGluZ3MgKGF1dG9tYXRpY2FsbHkgbWVtb3JpemVkIGZyb20gbGFzdCB1c2UpXG4gICAgICAgIGNvbnN0IHBhZ2VTaXplID0gcGx1Z2luPy5zZXR0aW5ncz8ubGFzdENvbnZlcnNhdGlvbnNQZXJQYWdlIHx8IDUwO1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgc3RhdGVcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGFsbENvbnZlcnNhdGlvbnM6IGNvbnZlcnNhdGlvbnMsXG4gICAgICAgICAgICBmaWx0ZXJlZENvbnZlcnNhdGlvbnM6IGNvbnZlcnNhdGlvbnMsXG4gICAgICAgICAgICBzZWxlY3RlZElkczogbmV3IFNldCgpLFxuICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICAgIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLFxuICAgICAgICAgICAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbChjb252ZXJzYXRpb25zLmxlbmd0aCAvIHBhZ2VTaXplKSxcbiAgICAgICAgICAgICAgICB0b3RhbEl0ZW1zOiBjb252ZXJzYXRpb25zLmxlbmd0aFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNvcnQ6IHtcbiAgICAgICAgICAgICAgICBmaWVsZDogJ3VwZGF0ZVRpbWUnLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ2Rlc2MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgZXhpc3RlbmNlU3RhdHVzOiAnYWxsJyAvLyBEZWZhdWx0IHRvIHNob3cgYWxsIGNvbnZlcnNhdGlvbnNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQXV0by1zZWxlY3QgYWxsIGlmIHNldHRpbmcgaXMgZW5hYmxlZFxuICAgICAgICBpZiAocGx1Z2luPy5zZXR0aW5ncz8uYXV0b1NlbGVjdEFsbE9uT3Blbikge1xuICAgICAgICAgICAgY29udmVyc2F0aW9ucy5mb3JFYWNoKGNvbnYgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRJZHMuYWRkKGNvbnYuaWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFNvcnQoKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsLCBtb2RhbEVsLCB0aXRsZUVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICAvLyBBZGQgY2xhc3MgdG8gYm90aCBtb2RhbCBhbmQgY29udGVudCBmb3IgcHJvcGVyIHN0eWxpbmdcbiAgICAgICAgbW9kYWxFbC5hZGRDbGFzcygnbmV4dXMtY29udmVyc2F0aW9uLXNlbGVjdGlvbi1kaWFsb2cnKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCduZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZycpO1xuXG4gICAgICAgIC8vIFNldCB0aXRsZSBpbiBtb2RhbCB0aXRsZSBiYXIgKG5vdCBpbiBjb250ZW50KVxuICAgICAgICB0aXRsZUVsLnNldFRleHQoXCJTZWxlY3QgQ29udmVyc2F0aW9ucyB0byBJbXBvcnRcIik7XG5cbiAgICAgICAgLy8gU3VtbWFyeSAoNCBjYXJ0b3VjaGVzKVxuICAgICAgICB0aGlzLmNyZWF0ZVN1bW1hcnlTZWN0aW9uKGNvbnRlbnRFbCk7XG5cbiAgICAgICAgLy8gQ29udHJvbHMgKHNpbmdsZSBsaW5lOiBTZWxlY3QgQWxsLCBTZWxlY3QgTm9uZSwgU2VhcmNoLCBTaG93KVxuICAgICAgICB0aGlzLmNyZWF0ZUNvbnRyb2xzU2VjdGlvbihjb250ZW50RWwpO1xuXG4gICAgICAgIC8vIENvbnZlcnNhdGlvbiBsaXN0IHdpdGggc29ydGFibGUgaGVhZGVyc1xuICAgICAgICB0aGlzLmNyZWF0ZUNvbnZlcnNhdGlvbkxpc3RTZWN0aW9uKGNvbnRlbnRFbCk7XG5cbiAgICAgICAgLy8gUGFnaW5hdGlvblxuICAgICAgICB0aGlzLmNyZWF0ZVBhZ2luYXRpb25TZWN0aW9uKGNvbnRlbnRFbCk7XG5cbiAgICAgICAgLy8gQWN0aW9uIGJ1dHRvbnNcbiAgICAgICAgdGhpcy5jcmVhdGVBY3Rpb25CdXR0b25zKGNvbnRlbnRFbCk7XG5cbiAgICAgICAgLy8gQWRkIGN1c3RvbSBzdHlsZXNcbiAgICAgICAgdGhpcy5hZGRDdXN0b21TdHlsZXMoKTtcblxuICAgICAgICAvLyBJbml0aWFsIHJlbmRlclxuICAgICAgICB0aGlzLnJlbmRlckNvbnZlcnNhdGlvbkxpc3QoKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdW1tYXJ5KCk7XG4gICAgICAgIHRoaXMudXBkYXRlUGFnaW5hdGlvbigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlU3VtbWFyeVNlY3Rpb24oY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdignc3VtbWFyeS1zZWN0aW9uJyk7XG4gICAgICAgIHNlY3Rpb24uaWQgPSAnY29udmVyc2F0aW9uLXN1bW1hcnknO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMjBweFwiO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSBcImdyaWRcIjtcbiAgICAgICAgc2VjdGlvbi5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gXCJyZXBlYXQoNCwgMWZyKVwiO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLmdhcCA9IFwiMTJweFwiO1xuICAgICAgICAvLyBDb250ZW50IHdpbGwgYmUgdXBkYXRlZCBieSB1cGRhdGVTdW1tYXJ5KClcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUNvbnRyb2xzU2VjdGlvbihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KCdjb250cm9scy1zZWN0aW9uJyk7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUubWFyZ2luQm90dG9tID0gXCIyMHB4XCI7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLmdhcCA9IFwiMTJweFwiO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuXG4gICAgICAgIC8vIFNlbGVjdCBBbGwgYnV0dG9uXG4gICAgICAgIGNvbnN0IHNlbGVjdEFsbEJ0biA9IHNlY3Rpb24uY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNlbGVjdCBBbGxcIiB9KTtcbiAgICAgICAgc2VsZWN0QWxsQnRuLnN0eWxlLnBhZGRpbmcgPSBcIjhweCAxNnB4XCI7XG4gICAgICAgIHNlbGVjdEFsbEJ0bi5zdHlsZS53aGl0ZVNwYWNlID0gXCJub3dyYXBcIjtcbiAgICAgICAgc2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5maWx0ZXJlZENvbnZlcnNhdGlvbnMuZm9yRWFjaChjb252ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkSWRzLmFkZChjb252LmlkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDb252ZXJzYXRpb25MaXN0KCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN1bW1hcnkoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2VsZWN0IE5vbmUgYnV0dG9uXG4gICAgICAgIGNvbnN0IHNlbGVjdE5vbmVCdG4gPSBzZWN0aW9uLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTZWxlY3QgTm9uZVwiIH0pO1xuICAgICAgICBzZWxlY3ROb25lQnRuLnN0eWxlLnBhZGRpbmcgPSBcIjhweCAxNnB4XCI7XG4gICAgICAgIHNlbGVjdE5vbmVCdG4uc3R5bGUud2hpdGVTcGFjZSA9IFwibm93cmFwXCI7XG4gICAgICAgIHNlbGVjdE5vbmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkSWRzLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckNvbnZlcnNhdGlvbkxpc3QoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3VtbWFyeSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTZWFyY2ggaW5wdXRcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzZWN0aW9uLmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiB9KTtcbiAgICAgICAgc2VhcmNoSW5wdXQucGxhY2Vob2xkZXIgPSBcIlNlYXJjaCBjb252ZXJzYXRpb25zLi4uXCI7XG4gICAgICAgIHNlYXJjaElucHV0LnN0eWxlLmZsZXggPSBcIjFcIjtcbiAgICAgICAgc2VhcmNoSW5wdXQuc3R5bGUubWluV2lkdGggPSBcIjIwMHB4XCI7XG4gICAgICAgIHNlYXJjaElucHV0LnN0eWxlLnBhZGRpbmcgPSBcIjhweCAxMnB4XCI7XG4gICAgICAgIHNlYXJjaElucHV0LnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKVwiO1xuICAgICAgICBzZWFyY2hJbnB1dC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjRweFwiO1xuICAgICAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5maWx0ZXIuc2VhcmNoVGVybSA9IHRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlGaWx0ZXJzQW5kU29ydCgpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDb252ZXJzYXRpb25MaXN0KCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN1bW1hcnkoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGFnaW5hdGlvbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBGaWx0ZXIgYnkgc3RhdHVzIGRyb3Bkb3duXG4gICAgICAgIGNvbnN0IHN0YXR1c0xhYmVsID0gc2VjdGlvbi5jcmVhdGVFbChcImxhYmVsXCIpO1xuICAgICAgICBzdGF0dXNMYWJlbC50ZXh0Q29udGVudCA9IFwiU3RhdHVzOlwiO1xuICAgICAgICBzdGF0dXNMYWJlbC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiNHB4XCI7XG4gICAgICAgIHN0YXR1c0xhYmVsLnN0eWxlLmZvbnRTaXplID0gXCIxNHB4XCI7XG4gICAgICAgIHN0YXR1c0xhYmVsLnN0eWxlLndoaXRlU3BhY2UgPSBcIm5vd3JhcFwiO1xuXG4gICAgICAgIGNvbnN0IHN0YXR1c1NlbGVjdCA9IHNlY3Rpb24uY3JlYXRlRWwoXCJzZWxlY3RcIik7XG4gICAgICAgIHN0YXR1c1NlbGVjdC5zdHlsZS5wYWRkaW5nID0gXCI4cHggMTJweFwiO1xuICAgICAgICBzdGF0dXNTZWxlY3Quc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCIyOHB4XCI7XG4gICAgICAgIHN0YXR1c1NlbGVjdC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcbiAgICAgICAgc3RhdHVzU2VsZWN0LnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG4gICAgICAgIHN0YXR1c1NlbGVjdC5zdHlsZS5mb250U2l6ZSA9IFwiMTRweFwiO1xuICAgICAgICBzdGF0dXNTZWxlY3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpXCI7XG4gICAgICAgIHN0YXR1c1NlbGVjdC5zdHlsZS5jb2xvciA9IFwidmFyKC0tdGV4dC1ub3JtYWwpXCI7XG4gICAgICAgIHN0YXR1c1NlbGVjdC5jbGFzc0xpc3QuYWRkKCduZXh1cy1jdXN0b20tc2VsZWN0Jyk7XG5cbiAgICAgICAgY29uc3Qgc3RhdHVzT3B0aW9ucyA9IFtcbiAgICAgICAgICAgIHsgdmFsdWU6ICdhbGwnLCB0ZXh0OiAnQWxsJyB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ25ldycsIHRleHQ6ICdOZXcnIH0sXG4gICAgICAgICAgICB7IHZhbHVlOiAndXBkYXRlZCcsIHRleHQ6ICdVcGRhdGVkJyB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ3VuY2hhbmdlZCcsIHRleHQ6ICdVbmNoYW5nZWQnIH1cbiAgICAgICAgXTtcblxuICAgICAgICBzdGF0dXNPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsID0gc3RhdHVzU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIpO1xuICAgICAgICAgICAgb3B0aW9uRWwudmFsdWUgPSBvcHRpb24udmFsdWU7XG4gICAgICAgICAgICBvcHRpb25FbC50ZXh0Q29udGVudCA9IG9wdGlvbi50ZXh0O1xuICAgICAgICB9KTtcblxuICAgICAgICBzdGF0dXNTZWxlY3QudmFsdWUgPSB0aGlzLnN0YXRlLmZpbHRlci5leGlzdGVuY2VTdGF0dXMgfHwgJ2FsbCc7XG4gICAgICAgIHN0YXR1c1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmZpbHRlci5leGlzdGVuY2VTdGF0dXMgPSB0YXJnZXQudmFsdWUgYXMgRmlsdGVyT3B0aW9uc1snZXhpc3RlbmNlU3RhdHVzJ107XG4gICAgICAgICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFNvcnQoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udmVyc2F0aW9uTGlzdCgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdW1tYXJ5KCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBhZ2luYXRpb24oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUGFnZSBzaXplIGRyb3Bkb3duXG4gICAgICAgIGNvbnN0IHBhZ2VTaXplTGFiZWwgPSBzZWN0aW9uLmNyZWF0ZUVsKFwibGFiZWxcIik7XG4gICAgICAgIHBhZ2VTaXplTGFiZWwudGV4dENvbnRlbnQgPSBcIlNob3c6XCI7XG4gICAgICAgIHBhZ2VTaXplTGFiZWwuc3R5bGUubWFyZ2luUmlnaHQgPSBcIjRweFwiO1xuICAgICAgICBwYWdlU2l6ZUxhYmVsLnN0eWxlLmZvbnRTaXplID0gXCIxNHB4XCI7XG4gICAgICAgIHBhZ2VTaXplTGFiZWwuc3R5bGUud2hpdGVTcGFjZSA9IFwibm93cmFwXCI7XG5cbiAgICAgICAgY29uc3QgcGFnZVNpemVTZWxlY3QgPSBzZWN0aW9uLmNyZWF0ZUVsKFwic2VsZWN0XCIpO1xuICAgICAgICBwYWdlU2l6ZVNlbGVjdC5zdHlsZS5wYWRkaW5nID0gXCI4cHggMTJweFwiO1xuICAgICAgICBwYWdlU2l6ZVNlbGVjdC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjI4cHhcIjtcbiAgICAgICAgcGFnZVNpemVTZWxlY3Quc3R5bGUuYm9yZGVyID0gXCIxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpXCI7XG4gICAgICAgIHBhZ2VTaXplU2VsZWN0LnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG4gICAgICAgIHBhZ2VTaXplU2VsZWN0LnN0eWxlLmZvbnRTaXplID0gXCIxNHB4XCI7XG4gICAgICAgIHBhZ2VTaXplU2VsZWN0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KVwiO1xuICAgICAgICBwYWdlU2l6ZVNlbGVjdC5zdHlsZS5jb2xvciA9IFwidmFyKC0tdGV4dC1ub3JtYWwpXCI7XG4gICAgICAgIHBhZ2VTaXplU2VsZWN0LmNsYXNzTGlzdC5hZGQoJ25leHVzLWN1c3RvbS1zZWxlY3QnKTtcblxuICAgICAgICBjb25zdCBwYWdlU2l6ZU9wdGlvbnMgPSBbMTAsIDIwLCA1MCwgMTAwXTtcbiAgICAgICAgcGFnZVNpemVPcHRpb25zLmZvckVhY2goc2l6ZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25FbCA9IHBhZ2VTaXplU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIpO1xuICAgICAgICAgICAgb3B0aW9uRWwudmFsdWUgPSBzaXplLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBvcHRpb25FbC50ZXh0Q29udGVudCA9IHNpemUudG9TdHJpbmcoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcGFnZVNpemVTZWxlY3QudmFsdWUgPSB0aGlzLnN0YXRlLnBhZ2luYXRpb24ucGFnZVNpemUudG9TdHJpbmcoKTtcbiAgICAgICAgcGFnZVNpemVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgbmV3UGFnZVNpemUgPSBwYXJzZUludCh0YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5wYWdpbmF0aW9uLnBhZ2VTaXplID0gbmV3UGFnZVNpemU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnBhZ2luYXRpb24uY3VycmVudFBhZ2UgPSAxO1xuXG4gICAgICAgICAgICAvLyBBdXRvbWF0aWNhbGx5IHNhdmUgdG8gc2V0dGluZ3MgKG1lbW9yaXplIHVzZXIncyBwcmVmZXJlbmNlKVxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdENvbnZlcnNhdGlvbnNQZXJQYWdlID0gbmV3UGFnZVNpemU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGFnaW5hdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDb252ZXJzYXRpb25MaXN0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGNyZWF0ZUNvbnZlcnNhdGlvbkxpc3RTZWN0aW9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2NvbnZlcnNhdGlvbi1saXN0LXNlY3Rpb24nKTtcbiAgICAgICAgc2VjdGlvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjIwcHhcIjtcblxuICAgICAgICAvLyBUYWJsZSBjb250YWluZXIgd2l0aCBzY3JvbGxcbiAgICAgICAgY29uc3QgdGFibGVDb250YWluZXIgPSBzZWN0aW9uLmNyZWF0ZURpdigndGFibGUtY29udGFpbmVyJyk7XG4gICAgICAgIHRhYmxlQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ25leHVzLXRhYmxlLWNvbnRhaW5lcicpO1xuXG4gICAgICAgIC8vIFRhYmxlXG4gICAgICAgIGNvbnN0IHRhYmxlID0gdGFibGVDb250YWluZXIuY3JlYXRlRWwoXCJ0YWJsZVwiKTtcbiAgICAgICAgdGFibGUuaWQgPSAnY29udmVyc2F0aW9uLXRhYmxlJztcbiAgICAgICAgdGFibGUuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgdGFibGUuc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSBcImNvbGxhcHNlXCI7XG5cbiAgICAgICAgLy8gVGFibGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IHRoZWFkID0gdGFibGUuY3JlYXRlRWwoXCJ0aGVhZFwiKTtcbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuY3JlYXRlRWwoXCJ0clwiKTtcbiAgICAgICAgaGVhZGVyUm93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpXCI7XG4gICAgICAgIGhlYWRlclJvdy5zdHlsZS5wb3NpdGlvbiA9IFwic3RpY2t5XCI7XG4gICAgICAgIGhlYWRlclJvdy5zdHlsZS50b3AgPSBcIjBcIjtcbiAgICAgICAgaGVhZGVyUm93LnN0eWxlLnpJbmRleCA9IFwiMTBcIjtcblxuICAgICAgICBjb25zdCBoZWFkZXJzID0gW1xuICAgICAgICAgICAgeyB0ZXh0OiBcIlwiLCB3aWR0aDogXCI0MHB4XCIsIHNvcnRGaWVsZDogbnVsbCB9LCAvLyBDaGVja2JveCAtIHBsdXMgY29tcGFjdFxuICAgICAgICAgICAgeyB0ZXh0OiBcIlRpdGxlXCIsIHdpZHRoOiBcIjQ1JVwiLCBzb3J0RmllbGQ6ICd0aXRsZScgYXMgY29uc3QgfSwgLy8gUGx1cyBkJ2VzcGFjZVxuICAgICAgICAgICAgeyB0ZXh0OiBcIkNyZWF0ZWRcIiwgd2lkdGg6IFwiMTEwcHhcIiwgc29ydEZpZWxkOiAnY3JlYXRlVGltZScgYXMgY29uc3QgfSwgLy8gUlx1MDBFOWR1aXRcbiAgICAgICAgICAgIHsgdGV4dDogXCJVcGRhdGVkXCIsIHdpZHRoOiBcIjExMHB4XCIsIHNvcnRGaWVsZDogJ3VwZGF0ZVRpbWUnIGFzIGNvbnN0IH0sIC8vIFJcdTAwRTlkdWl0XG4gICAgICAgICAgICB7IHRleHQ6IFwiTWVzc2FnZXNcIiwgd2lkdGg6IFwiODBweFwiLCBzb3J0RmllbGQ6ICdtZXNzYWdlQ291bnQnIGFzIGNvbnN0IH0sIC8vIFJcdTAwRTlkdWl0XG4gICAgICAgICAgICB7IHRleHQ6IFwiU3RhdHVzXCIsIHdpZHRoOiBcIjEwMHB4XCIsIHNvcnRGaWVsZDogbnVsbCB9IC8vIFJcdTAwRTlkdWl0XG4gICAgICAgIF07XG5cbiAgICAgICAgaGVhZGVycy5mb3JFYWNoKGhlYWRlciA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aCA9IGhlYWRlclJvdy5jcmVhdGVFbChcInRoXCIpO1xuICAgICAgICAgICAgdGguc3R5bGUucGFkZGluZyA9IFwiMTJweCA4cHhcIjtcbiAgICAgICAgICAgIHRoLnN0eWxlLnRleHRBbGlnbiA9IFwibGVmdFwiO1xuICAgICAgICAgICAgdGguc3R5bGUuYm9yZGVyQm90dG9tID0gXCIycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpXCI7XG4gICAgICAgICAgICB0aC5zdHlsZS5mb250V2VpZ2h0ID0gXCI2MDBcIjtcbiAgICAgICAgICAgIHRoLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpXCI7XG4gICAgICAgICAgICB0aC5zdHlsZS51c2VyU2VsZWN0ID0gXCJub25lXCI7XG4gICAgICAgICAgICBpZiAoaGVhZGVyLndpZHRoICE9PSBcImF1dG9cIikge1xuICAgICAgICAgICAgICAgIHRoLnN0eWxlLndpZHRoID0gaGVhZGVyLndpZHRoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBNYWtlIHNvcnRhYmxlIGhlYWRlcnMgY2xpY2thYmxlXG4gICAgICAgICAgICBpZiAoaGVhZGVyLnNvcnRGaWVsZCkge1xuICAgICAgICAgICAgICAgIHRoLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICAgICAgICAgIHRoLmNsYXNzTGlzdC5hZGQoJ3NvcnRhYmxlLWhlYWRlcicpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGhlYWRlciBjb250ZW50IHdpdGggc29ydCBpbmRpY2F0b3JcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gdGguY3JlYXRlU3BhbigpO1xuICAgICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQudGV4dENvbnRlbnQgPSBoZWFkZXIudGV4dDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRJbmRpY2F0b3IgPSB0aC5jcmVhdGVTcGFuKCk7XG4gICAgICAgICAgICAgICAgc29ydEluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdzb3J0LWluZGljYXRvcicpO1xuICAgICAgICAgICAgICAgIHNvcnRJbmRpY2F0b3Iuc3R5bGUubWFyZ2luTGVmdCA9IFwiNnB4XCI7XG4gICAgICAgICAgICAgICAgc29ydEluZGljYXRvci5zdHlsZS5mb250U2l6ZSA9IFwiMC44ZW1cIjtcbiAgICAgICAgICAgICAgICBzb3J0SW5kaWNhdG9yLnN0eWxlLm9wYWNpdHkgPSBcIjAuNVwiO1xuXG4gICAgICAgICAgICAgICAgLy8gU2hvdyBjdXJyZW50IHNvcnQgc3RhdGVcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5zb3J0LmZpZWxkID09PSBoZWFkZXIuc29ydEZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvcnRJbmRpY2F0b3IudGV4dENvbnRlbnQgPSB0aGlzLnN0YXRlLnNvcnQuZGlyZWN0aW9uID09PSAnYXNjJyA/ICdcdTI1QjInIDogJ1x1MjVCQyc7XG4gICAgICAgICAgICAgICAgICAgIHNvcnRJbmRpY2F0b3Iuc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNvcnRJbmRpY2F0b3IudGV4dENvbnRlbnQgPSAnXHUyNUJDJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDbGljayBoYW5kbGVyIGZvciBzb3J0aW5nXG4gICAgICAgICAgICAgICAgdGguYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnNvcnQuZmllbGQgPT09IGhlYWRlci5zb3J0RmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvZ2dsZSBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc29ydC5kaXJlY3Rpb24gPSB0aGlzLnN0YXRlLnNvcnQuZGlyZWN0aW9uID09PSAnYXNjJyA/ICdkZXNjJyA6ICdhc2MnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV3IGZpZWxkLCBkZWZhdWx0IHRvIGRlc2NcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc29ydC5maWVsZCA9IGhlYWRlci5zb3J0RmllbGQhO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zb3J0LmRpcmVjdGlvbiA9ICdkZXNjJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFNvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb252ZXJzYXRpb25MaXN0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoLnRleHRDb250ZW50ID0gaGVhZGVyLnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRhYmxlIGJvZHlcbiAgICAgICAgY29uc3QgdGJvZHkgPSB0YWJsZS5jcmVhdGVFbChcInRib2R5XCIpO1xuICAgICAgICB0Ym9keS5pZCA9ICdjb252ZXJzYXRpb24tdGFibGUtYm9keSc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVQYWdpbmF0aW9uU2VjdGlvbihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KCdwYWdpbmF0aW9uLXNlY3Rpb24nKTtcbiAgICAgICAgc2VjdGlvbi5pZCA9ICdwYWdpbmF0aW9uLXNlY3Rpb24nO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMjBweFwiO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgc2VjdGlvbi5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwic3BhY2UtYmV0d2VlblwiO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuXG4gICAgICAgIC8vIFBhZ2UgaW5mb1xuICAgICAgICBjb25zdCBwYWdlSW5mbyA9IHNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICAgIHBhZ2VJbmZvLmlkID0gJ3BhZ2UtaW5mbyc7XG4gICAgICAgIHBhZ2VJbmZvLnN0eWxlLmZvbnRTaXplID0gXCIwLjllbVwiO1xuICAgICAgICBwYWdlSW5mby5zdHlsZS5jb2xvciA9IFwidmFyKC0tdGV4dC1tdXRlZClcIjtcblxuICAgICAgICAvLyBQYWdlIGNvbnRyb2xzXG4gICAgICAgIGNvbnN0IHBhZ2VDb250cm9scyA9IHNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICAgIHBhZ2VDb250cm9scy5pZCA9ICdwYWdlLWNvbnRyb2xzJztcbiAgICAgICAgcGFnZUNvbnRyb2xzLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgcGFnZUNvbnRyb2xzLnN0eWxlLmdhcCA9IFwiOHB4XCI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVBY3Rpb25CdXR0b25zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdignYWN0aW9uLWJ1dHRvbnMnKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LWVuZFwiO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gXCIxMHB4XCI7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSBcIjIwcHhcIjtcblxuICAgICAgICAvLyBDYW5jZWwgYnV0dG9uXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gXCI4cHggMTZweFwiO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgICAgIC8vIEltcG9ydCBidXR0b25cbiAgICAgICAgY29uc3QgaW1wb3J0QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJJbXBvcnQgU2VsZWN0ZWRcIiB9KTtcbiAgICAgICAgaW1wb3J0QnV0dG9uLmlkID0gJ2ltcG9ydC1zZWxlY3RlZC1idXR0b24nO1xuICAgICAgICBpbXBvcnRCdXR0b24uc3R5bGUucGFkZGluZyA9IFwiOHB4IDE2cHhcIjtcbiAgICAgICAgaW1wb3J0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ21vZC1jdGEnKTtcbiAgICAgICAgaW1wb3J0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oYW5kbGVJbXBvcnRTZWxlY3RlZCgpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFwcGx5RmlsdGVyc0FuZFNvcnQoKSB7XG4gICAgICAgIGxldCBmaWx0ZXJlZCA9IFsuLi50aGlzLnN0YXRlLmFsbENvbnZlcnNhdGlvbnNdO1xuXG4gICAgICAgIC8vIEFwcGx5IHNlYXJjaCBmaWx0ZXJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZmlsdGVyLnNlYXJjaFRlcm0pIHtcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSB0aGlzLnN0YXRlLmZpbHRlci5zZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcihjb252ID0+XG4gICAgICAgICAgICAgICAgY29udi50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXBwbHkgZXhpc3RlbmNlIHN0YXR1cyBmaWx0ZXJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZmlsdGVyLmV4aXN0ZW5jZVN0YXR1cyAmJiB0aGlzLnN0YXRlLmZpbHRlci5leGlzdGVuY2VTdGF0dXMgIT09ICdhbGwnKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcihjb252ID0+XG4gICAgICAgICAgICAgICAgY29udi5leGlzdGVuY2VTdGF0dXMgPT09IHRoaXMuc3RhdGUuZmlsdGVyLmV4aXN0ZW5jZVN0YXR1c1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFwcGx5IHNvcnRpbmdcbiAgICAgICAgZmlsdGVyZWQuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBmaWVsZCwgZGlyZWN0aW9uIH0gPSB0aGlzLnN0YXRlLnNvcnQ7XG4gICAgICAgICAgICBsZXQgYVZhbDogYW55ID0gYVtmaWVsZF07XG4gICAgICAgICAgICBsZXQgYlZhbDogYW55ID0gYltmaWVsZF07XG5cbiAgICAgICAgICAgIGlmIChmaWVsZCA9PT0gJ3RpdGxlJykge1xuICAgICAgICAgICAgICAgIGFWYWwgPSBhVmFsLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgYlZhbCA9IGJWYWwudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFWYWwgPCBiVmFsKSByZXR1cm4gZGlyZWN0aW9uID09PSAnYXNjJyA/IC0xIDogMTtcbiAgICAgICAgICAgIGlmIChhVmFsID4gYlZhbCkgcmV0dXJuIGRpcmVjdGlvbiA9PT0gJ2FzYycgPyAxIDogLTE7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZS5maWx0ZXJlZENvbnZlcnNhdGlvbnMgPSBmaWx0ZXJlZDtcbiAgICAgICAgdGhpcy51cGRhdGVQYWdpbmF0aW9uKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVQYWdpbmF0aW9uKCkge1xuICAgICAgICBjb25zdCB0b3RhbEl0ZW1zID0gdGhpcy5zdGF0ZS5maWx0ZXJlZENvbnZlcnNhdGlvbnMubGVuZ3RoO1xuICAgICAgICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsSXRlbXMgLyB0aGlzLnN0YXRlLnBhZ2luYXRpb24ucGFnZVNpemUpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zdGF0ZS5wYWdpbmF0aW9uID0ge1xuICAgICAgICAgICAgLi4udGhpcy5zdGF0ZS5wYWdpbmF0aW9uLFxuICAgICAgICAgICAgdG90YWxJdGVtcyxcbiAgICAgICAgICAgIHRvdGFsUGFnZXMsXG4gICAgICAgICAgICBjdXJyZW50UGFnZTogTWF0aC5taW4odGhpcy5zdGF0ZS5wYWdpbmF0aW9uLmN1cnJlbnRQYWdlLCB0b3RhbFBhZ2VzIHx8IDEpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJDb252ZXJzYXRpb25MaXN0KCkge1xuICAgICAgICBjb25zdCB0Ym9keSA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJyNjb252ZXJzYXRpb24tdGFibGUtYm9keScpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAoIXRib2R5KSByZXR1cm47XG5cbiAgICAgICAgdGJvZHkuZW1wdHkoKTtcblxuICAgICAgICBjb25zdCB7IGN1cnJlbnRQYWdlLCBwYWdlU2l6ZSB9ID0gdGhpcy5zdGF0ZS5wYWdpbmF0aW9uO1xuICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gKGN1cnJlbnRQYWdlIC0gMSkgKiBwYWdlU2l6ZTtcbiAgICAgICAgY29uc3QgZW5kSW5kZXggPSBzdGFydEluZGV4ICsgcGFnZVNpemU7XG4gICAgICAgIGNvbnN0IHBhZ2VDb252ZXJzYXRpb25zID0gdGhpcy5zdGF0ZS5maWx0ZXJlZENvbnZlcnNhdGlvbnMuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xuXG4gICAgICAgIHBhZ2VDb252ZXJzYXRpb25zLmZvckVhY2goY29udmVyc2F0aW9uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRib2R5LmNyZWF0ZUVsKFwidHJcIik7XG5cbiAgICAgICAgICAgIC8vIENoZWNrYm94IGNlbGxcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94Q2VsbCA9IHJvdy5jcmVhdGVFbChcInRkXCIpO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBjaGVja2JveENlbGwuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwiY2hlY2tib3hcIiB9KTtcbiAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnN0YXRlLnNlbGVjdGVkSWRzLmhhcyhjb252ZXJzYXRpb24uaWQpO1xuICAgICAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRJZHMuYWRkKGNvbnZlcnNhdGlvbi5pZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZElkcy5kZWxldGUoY29udmVyc2F0aW9uLmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdW1tYXJ5KCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gVGl0bGUgY2VsbFxuICAgICAgICAgICAgY29uc3QgdGl0bGVDZWxsID0gcm93LmNyZWF0ZUVsKFwidGRcIik7XG4gICAgICAgICAgICB0aXRsZUNlbGwuc3R5bGUuZm9udFdlaWdodCA9IFwiNTAwXCI7XG4gICAgICAgICAgICB0aXRsZUNlbGwudGV4dENvbnRlbnQgPSBjb252ZXJzYXRpb24udGl0bGU7XG5cbiAgICAgICAgICAgIC8vIEFkZCBzb3VyY2UgZmlsZSBpbmZvIGZvciBtdWx0aS1maWxlIGltcG9ydHNcbiAgICAgICAgICAgIGlmIChjb252ZXJzYXRpb24uc291cmNlRmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZUluZm8gPSB0aXRsZUNlbGwuY3JlYXRlRWwoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgc291cmNlSW5mby5zdHlsZS5mb250U2l6ZSA9IFwiMC44ZW1cIjtcbiAgICAgICAgICAgICAgICBzb3VyY2VJbmZvLnN0eWxlLmNvbG9yID0gXCJ2YXIoLS10ZXh0LW11dGVkKVwiO1xuICAgICAgICAgICAgICAgIHNvdXJjZUluZm8uc3R5bGUubWFyZ2luVG9wID0gXCI0cHhcIjtcbiAgICAgICAgICAgICAgICBzb3VyY2VJbmZvLnRleHRDb250ZW50ID0gYFx1RDgzRFx1RENDMSAke2NvbnZlcnNhdGlvbi5zb3VyY2VGaWxlfWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZWQgY2VsbFxuICAgICAgICAgICAgY29uc3QgY3JlYXRlZENlbGwgPSByb3cuY3JlYXRlRWwoXCJ0ZFwiKTtcbiAgICAgICAgICAgIGNyZWF0ZWRDZWxsLnN0eWxlLmZvbnRTaXplID0gXCIwLjllbVwiO1xuICAgICAgICAgICAgY3JlYXRlZENlbGwudGV4dENvbnRlbnQgPSB0aGlzLmZvcm1hdERhdGUoY29udmVyc2F0aW9uLmNyZWF0ZVRpbWUpO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGVkIGNlbGxcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRDZWxsID0gcm93LmNyZWF0ZUVsKFwidGRcIik7XG4gICAgICAgICAgICB1cGRhdGVkQ2VsbC5zdHlsZS5mb250U2l6ZSA9IFwiMC45ZW1cIjtcbiAgICAgICAgICAgIHVwZGF0ZWRDZWxsLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXREYXRlKGNvbnZlcnNhdGlvbi51cGRhdGVUaW1lKTtcblxuICAgICAgICAgICAgLy8gTWVzc2FnZXMgY2VsbFxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXNDZWxsID0gcm93LmNyZWF0ZUVsKFwidGRcIik7XG4gICAgICAgICAgICBtZXNzYWdlc0NlbGwuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgIG1lc3NhZ2VzQ2VsbC50ZXh0Q29udGVudCA9IGNvbnZlcnNhdGlvbi5tZXNzYWdlQ291bnQudG9TdHJpbmcoKTtcblxuICAgICAgICAgICAgLy8gU3RhdHVzIGNlbGwgd2l0aCBiYWRnZVxuICAgICAgICAgICAgY29uc3Qgc3RhdHVzQ2VsbCA9IHJvdy5jcmVhdGVFbChcInRkXCIpO1xuICAgICAgICAgICAgc3RhdHVzQ2VsbC5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzQmFkZ2UgPSB0aGlzLmNyZWF0ZVN0YXR1c0JhZGdlKGNvbnZlcnNhdGlvbik7XG4gICAgICAgICAgICBzdGF0dXNDZWxsLmFwcGVuZENoaWxkKHN0YXR1c0JhZGdlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJQYWdpbmF0aW9uQ29udHJvbHMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVN0YXR1c0JhZGdlKGNvbnZlcnNhdGlvbjogQ29udmVyc2F0aW9uTWV0YWRhdGEpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGJhZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIGJhZGdlLmNsYXNzTGlzdC5hZGQoJ3N0YXR1cy1iYWRnZScpO1xuXG4gICAgICAgIHN3aXRjaCAoY29udmVyc2F0aW9uLmV4aXN0ZW5jZVN0YXR1cykge1xuICAgICAgICAgICAgY2FzZSAnbmV3JzpcbiAgICAgICAgICAgICAgICBiYWRnZS50ZXh0Q29udGVudCA9IFwiTmV3XCI7XG4gICAgICAgICAgICAgICAgYmFkZ2UuY2xhc3NMaXN0LmFkZCgnc3RhdHVzLW5ldycpO1xuICAgICAgICAgICAgICAgIGJhZGdlLnRpdGxlID0gXCJUaGlzIGNvbnZlcnNhdGlvbiBpcyBub3QgaW4geW91ciB2YXVsdFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndXBkYXRlZCc6XG4gICAgICAgICAgICAgICAgYmFkZ2UudGV4dENvbnRlbnQgPSBcIlVwZGF0ZWRcIjtcbiAgICAgICAgICAgICAgICBiYWRnZS5jbGFzc0xpc3QuYWRkKCdzdGF0dXMtdXBkYXRlZCcpO1xuICAgICAgICAgICAgICAgIGJhZGdlLnRpdGxlID0gYFRoaXMgY29udmVyc2F0aW9uIGhhcyBuZXdlciBjb250ZW50IHRoYW4geW91ciB2YXVsdCAoJHt0aGlzLmZvcm1hdERhdGUoY29udmVyc2F0aW9uLmV4aXN0aW5nVXBkYXRlVGltZSB8fCAwKX0gXHUyMTkyICR7dGhpcy5mb3JtYXREYXRlKGNvbnZlcnNhdGlvbi51cGRhdGVUaW1lKX0pYDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3VuY2hhbmdlZCc6XG4gICAgICAgICAgICAgICAgYmFkZ2UudGV4dENvbnRlbnQgPSBcIlVuY2hhbmdlZFwiO1xuICAgICAgICAgICAgICAgIGJhZGdlLmNsYXNzTGlzdC5hZGQoJ3N0YXR1cy11bmNoYW5nZWQnKTtcbiAgICAgICAgICAgICAgICBiYWRnZS50aXRsZSA9IFwiVGhpcyBjb252ZXJzYXRpb24gaXMgdGhlIHNhbWUgYXMgaW4geW91ciB2YXVsdFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBiYWRnZS50ZXh0Q29udGVudCA9IFwiVW5rbm93blwiO1xuICAgICAgICAgICAgICAgIGJhZGdlLmNsYXNzTGlzdC5hZGQoJ3N0YXR1cy11bmNoYW5nZWQnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBiYWRnZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclBhZ2luYXRpb25Db250cm9scygpIHtcbiAgICAgICAgY29uc3QgcGFnZUluZm8gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcjcGFnZS1pbmZvJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHBhZ2VDb250cm9scyA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJyNwYWdlLWNvbnRyb2xzJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXBhZ2VJbmZvIHx8ICFwYWdlQ29udHJvbHMpIHJldHVybjtcblxuICAgICAgICBjb25zdCB7IGN1cnJlbnRQYWdlLCB0b3RhbFBhZ2VzLCB0b3RhbEl0ZW1zLCBwYWdlU2l6ZSB9ID0gdGhpcy5zdGF0ZS5wYWdpbmF0aW9uO1xuICAgICAgICBjb25zdCBzdGFydEl0ZW0gPSAoY3VycmVudFBhZ2UgLSAxKSAqIHBhZ2VTaXplICsgMTtcbiAgICAgICAgY29uc3QgZW5kSXRlbSA9IE1hdGgubWluKGN1cnJlbnRQYWdlICogcGFnZVNpemUsIHRvdGFsSXRlbXMpO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBwYWdlIGluZm9cbiAgICAgICAgcGFnZUluZm8udGV4dENvbnRlbnQgPSBgU2hvd2luZyAke3N0YXJ0SXRlbX0tJHtlbmRJdGVtfSBvZiAke3RvdGFsSXRlbXN9IGNvbnZlcnNhdGlvbnNgO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBwYWdlIGNvbnRyb2xzXG4gICAgICAgIHBhZ2VDb250cm9scy5lbXB0eSgpO1xuXG4gICAgICAgIC8vIFByZXZpb3VzIGJ1dHRvblxuICAgICAgICBjb25zdCBwcmV2QnRuID0gcGFnZUNvbnRyb2xzLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJQcmV2aW91c1wiIH0pO1xuICAgICAgICBwcmV2QnRuLmRpc2FibGVkID0gY3VycmVudFBhZ2UgPD0gMTtcbiAgICAgICAgcHJldkJ0bi5zdHlsZS5wYWRkaW5nID0gXCI2cHggMTJweFwiO1xuICAgICAgICBwcmV2QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWdlID4gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucGFnaW5hdGlvbi5jdXJyZW50UGFnZS0tO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udmVyc2F0aW9uTGlzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQYWdlIG51bWJlcnMgKHNpbXBsaWZpZWQgLSBqdXN0IHNob3cgY3VycmVudCBwYWdlKVxuICAgICAgICBjb25zdCBwYWdlU3BhbiA9IHBhZ2VDb250cm9scy5jcmVhdGVFbChcInNwYW5cIik7XG4gICAgICAgIHBhZ2VTcGFuLnRleHRDb250ZW50ID0gYFBhZ2UgJHtjdXJyZW50UGFnZX0gb2YgJHt0b3RhbFBhZ2VzfWA7XG4gICAgICAgIHBhZ2VTcGFuLnN0eWxlLnBhZGRpbmcgPSBcIjZweCAxMnB4XCI7XG5cbiAgICAgICAgLy8gTmV4dCBidXR0b25cbiAgICAgICAgY29uc3QgbmV4dEJ0biA9IHBhZ2VDb250cm9scy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiTmV4dFwiIH0pO1xuICAgICAgICBuZXh0QnRuLmRpc2FibGVkID0gY3VycmVudFBhZ2UgPj0gdG90YWxQYWdlcztcbiAgICAgICAgbmV4dEJ0bi5zdHlsZS5wYWRkaW5nID0gXCI2cHggMTJweFwiO1xuICAgICAgICBuZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWdlIDwgdG90YWxQYWdlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucGFnaW5hdGlvbi5jdXJyZW50UGFnZSsrO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29udmVyc2F0aW9uTGlzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVN1bW1hcnkoKSB7XG4gICAgICAgIGNvbnN0IHN1bW1hcnkgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcjY29udmVyc2F0aW9uLXN1bW1hcnknKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKCFzdW1tYXJ5KSByZXR1cm47XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRDb3VudCA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRJZHMuc2l6ZTtcbiAgICAgICAgY29uc3QgdG90YWxDb3VudCA9IHRoaXMuc3RhdGUuZmlsdGVyZWRDb252ZXJzYXRpb25zLmxlbmd0aDtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgc3RhdHVzIGNvdW50cyBmcm9tIGZpbHRlcmVkIGNvbnZlcnNhdGlvbnMgKHdoYXQncyBjdXJyZW50bHkgc2hvd24pXG4gICAgICAgIGNvbnN0IHN0YXR1c0NvdW50cyA9IHtcbiAgICAgICAgICAgIG5ldzogMCxcbiAgICAgICAgICAgIHVwZGF0ZWQ6IDAsXG4gICAgICAgICAgICB1bmNoYW5nZWQ6IDAsXG4gICAgICAgICAgICB1bmtub3duOiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zdGF0ZS5maWx0ZXJlZENvbnZlcnNhdGlvbnMuZm9yRWFjaChjb252ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGNvbnYuZXhpc3RlbmNlU3RhdHVzIHx8ICd1bmtub3duJztcbiAgICAgICAgICAgIHN0YXR1c0NvdW50c1tzdGF0dXNdKys7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJ1aWxkIHRoZSBjb21wcmVoZW5zaXZlIHN1bW1hcnlcbiAgICAgICAgc3VtbWFyeS5pbm5lckhUTUwgPSB0aGlzLmJ1aWxkQ29tcHJlaGVuc2l2ZVN1bW1hcnkoc2VsZWN0ZWRDb3VudCwgdG90YWxDb3VudCwgc3RhdHVzQ291bnRzKTtcblxuICAgICAgICAvLyBVcGRhdGUgaW1wb3J0IGJ1dHRvbiBzdGF0ZVxuICAgICAgICBjb25zdCBpbXBvcnRCdXR0b24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcjaW1wb3J0LXNlbGVjdGVkLWJ1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICBpZiAoaW1wb3J0QnV0dG9uKSB7XG4gICAgICAgICAgICBpbXBvcnRCdXR0b24uZGlzYWJsZWQgPSBzZWxlY3RlZENvdW50ID09PSAwO1xuICAgICAgICAgICAgaW1wb3J0QnV0dG9uLnRleHRDb250ZW50ID0gc2VsZWN0ZWRDb3VudCA+IDAgPyBgSW1wb3J0ICR7c2VsZWN0ZWRDb3VudH0gU2VsZWN0ZWRgIDogJ0ltcG9ydCBTZWxlY3RlZCc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkQ29tcHJlaGVuc2l2ZVN1bW1hcnkoc2VsZWN0ZWRDb3VudDogbnVtYmVyLCB0b3RhbENvdW50OiBudW1iZXIsIHN0YXR1c0NvdW50czogYW55KTogc3RyaW5nIHtcbiAgICAgICAgLy8gNCBjYXJ0b3VjaGVzIGNvbXBhY3RzXG4gICAgICAgIGlmICh0aGlzLmFuYWx5c2lzSW5mbykge1xuICAgICAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuYW5hbHlzaXNJbmZvO1xuICAgICAgICAgICAgY29uc3QgdW5pcXVlQ291bnQgPSBpbmZvLnVuaXF1ZUNvbnZlcnNhdGlvbnNLZXB0O1xuXG4gICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDEycHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtd2VpZ2h0OiA2MDA7IGZvbnQtc2l6ZTogMS40ZW07IGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XCI+JHt1bmlxdWVDb3VudH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgZm9udC1zaXplOiAwLjg1ZW07IG1hcmdpbi10b3A6IDRweDtcIj5VbmlxdWUgQ29udmVyc2F0aW9uczwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDEycHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtd2VpZ2h0OiA2MDA7IGZvbnQtc2l6ZTogMS40ZW07IGNvbG9yOiB2YXIoLS1jb2xvci1ncmVlbik7XCI+JHtpbmZvLmNvbnZlcnNhdGlvbnNOZXd9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IGZvbnQtc2l6ZTogMC44NWVtOyBtYXJnaW4tdG9wOiA0cHg7XCI+TmV3PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMTJweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC13ZWlnaHQ6IDYwMDsgZm9udC1zaXplOiAxLjRlbTsgY29sb3I6IHZhcigtLWNvbG9yLW9yYW5nZSk7XCI+JHtpbmZvLmNvbnZlcnNhdGlvbnNVcGRhdGVkfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOyBmb250LXNpemU6IDAuODVlbTsgbWFyZ2luLXRvcDogNHB4O1wiPlVwZGF0ZWQ8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAxMnB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpOyBib3JkZXItcmFkaXVzOiA4cHg7IGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LXdlaWdodDogNjAwOyBmb250LXNpemU6IDEuNGVtOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XCI+JHtpbmZvLmNvbnZlcnNhdGlvbnNJZ25vcmVkfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOyBmb250LXNpemU6IDAuODVlbTsgbWFyZ2luLXRvcDogNHB4O1wiPlVuY2hhbmdlZDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZhbGxiYWNrIHNpIHBhcyBkJ2FuYWx5c2lzSW5mb1xuICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMTJweDtcIj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPiR7c2VsZWN0ZWRDb3VudH08L3N0cm9uZz4gb2YgPHN0cm9uZz4ke3RvdGFsQ291bnR9PC9zdHJvbmc+IHNlbGVjdGVkXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUltcG9ydFNlbGVjdGVkKCkge1xuICAgICAgICBjb25zdCBzZWxlY3RlZElkcyA9IEFycmF5LmZyb20odGhpcy5zdGF0ZS5zZWxlY3RlZElkcyk7XG4gICAgICAgIGlmIChzZWxlY3RlZElkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdDogQ29udmVyc2F0aW9uU2VsZWN0aW9uUmVzdWx0ID0ge1xuICAgICAgICAgICAgc2VsZWN0ZWRJZHMsXG4gICAgICAgICAgICB0b3RhbEF2YWlsYWJsZTogdGhpcy5zdGF0ZS5hbGxDb252ZXJzYXRpb25zLmxlbmd0aCxcbiAgICAgICAgICAgIG1vZGU6ICdzZWxlY3RpdmUnXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLm9uU2VsZWN0aW9uQ29tcGxldGUocmVzdWx0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdERhdGUodGltZXN0YW1wOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBpZiAoIXRpbWVzdGFtcCkgcmV0dXJuICdVbmtub3duJztcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCAqIDEwMDApO1xuICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZEN1c3RvbVN0eWxlcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgICAgIC8qIE1vZGFsIHNpemluZyAtIENSSVRJQ0FMOiBPdmVycmlkZSBPYnNpZGlhbidzIGRlZmF1bHQgY29uc3RyYWludHMgKi9cbiAgICAgICAgICAgIC5tb2RhbC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyB7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBtaW4oMTAwMHB4LCA5MHZ3KSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIHdpZHRoOiBtaW4oMTAwMHB4LCA5MHZ3KSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIGhlaWdodDogYXV0byAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogTW9kYWwgdGl0bGUgc3BhY2luZyAqL1xuICAgICAgICAgICAgLm1vZGFsLm5leHVzLWNvbnZlcnNhdGlvbi1zZWxlY3Rpb24tZGlhbG9nIC5tb2RhbC10aXRsZSB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTZweCAyNHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5tb2RhbC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyAubW9kYWwtY29udGVudCB7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiA4NXZoO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93LXk6IHZpc2libGU7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3cteDogdmlzaWJsZTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMjBweCAyNHB4IDI0cHggMjRweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogVGFibGUgY29udGFpbmVyIHdpdGggaW5kZXBlbmRlbnQgc2Nyb2xsICovXG4gICAgICAgICAgICAubmV4dXMtY29udmVyc2F0aW9uLXNlbGVjdGlvbi1kaWFsb2cgLm5leHVzLXRhYmxlLWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgbWF4LWhlaWdodDogNDUwcHg7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy14OiBhdXRvO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBUYWJsZSBzdHlsaW5nICovXG4gICAgICAgICAgICAubmV4dXMtY29udmVyc2F0aW9uLXNlbGVjdGlvbi1kaWFsb2cgdGFibGUge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiA5MDBweDtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBUYWJsZSBoZWFkZXIgLSBzdGlja3kgKi9cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyB0aGVhZCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHN0aWNreTtcbiAgICAgICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICAgICAgei1pbmRleDogMTA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyB0aCB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogc3RpY2t5O1xuICAgICAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogU29ydGFibGUgaGVhZGVycyAqL1xuICAgICAgICAgICAgLm5leHVzLWNvbnZlcnNhdGlvbi1zZWxlY3Rpb24tZGlhbG9nIHRoLnNvcnRhYmxlLWhlYWRlciB7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLWNvbnZlcnNhdGlvbi1zZWxlY3Rpb24tZGlhbG9nIHRoLnNvcnRhYmxlLWhlYWRlcjpob3ZlciB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyAuc29ydC1pbmRpY2F0b3Ige1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBUYWJsZSBjZWxscyAqL1xuICAgICAgICAgICAgLm5leHVzLWNvbnZlcnNhdGlvbi1zZWxlY3Rpb24tZGlhbG9nIHRkIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDhweDtcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFRpdGxlIGNvbHVtbiAtIGFsbG93IHdyYXBwaW5nICovXG4gICAgICAgICAgICAubmV4dXMtY29udmVyc2F0aW9uLXNlbGVjdGlvbi1kaWFsb2cgdGg6bnRoLWNoaWxkKDIpLFxuICAgICAgICAgICAgLm5leHVzLWNvbnZlcnNhdGlvbi1zZWxlY3Rpb24tZGlhbG9nIHRkOm50aC1jaGlsZCgyKSB7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiA1MDBweDtcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICAgICAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBPdGhlciBjb2x1bW5zIC0gbm8gd3JhcHBpbmcgKi9cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyB0aDpub3QoOm50aC1jaGlsZCgyKSksXG4gICAgICAgICAgICAubmV4dXMtY29udmVyc2F0aW9uLXNlbGVjdGlvbi1kaWFsb2cgdGQ6bm90KDpudGgtY2hpbGQoMikpIHtcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFJvdyBob3ZlciBlZmZlY3QgKi9cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyB0Ym9keSB0cjpob3ZlciB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBDaGVja2JveCBjb2x1bW4gKi9cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyB0ZDpmaXJzdC1jaGlsZCB7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBTdGF0dXMgYmFkZ2VzICovXG4gICAgICAgICAgICAubmV4dXMtY29udmVyc2F0aW9uLXNlbGVjdGlvbi1kaWFsb2cgLnN0YXR1cy1iYWRnZSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMHB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyAuc3RhdHVzLW5ldyB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtY29udmVyc2F0aW9uLXNlbGVjdGlvbi1kaWFsb2cgLnN0YXR1cy11cGRhdGVkIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10ZXh0LXdhcm5pbmcpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyAuc3RhdHVzLXVuY2hhbmdlZCB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogU2VsZWN0IGRyb3Bkb3ducyAqL1xuICAgICAgICAgICAgLm5leHVzLWNvbnZlcnNhdGlvbi1zZWxlY3Rpb24tZGlhbG9nIHNlbGVjdCB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDM2cHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LWludGVyZmFjZSk7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyBzZWxlY3Qgb3B0aW9uIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIEN1c3RvbSBzZWxlY3QgZHJvcGRvd25zIHdpdGggdGhlbWUtYXdhcmUgYXJyb3dzICovXG4gICAgICAgICAgICAubmV4dXMtY29udmVyc2F0aW9uLXNlbGVjdGlvbi1kaWFsb2cgLm5leHVzLWN1c3RvbS1zZWxlY3Qge1xuICAgICAgICAgICAgICAgIGFwcGVhcmFuY2U6IG5vbmU7XG4gICAgICAgICAgICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAgICAgICAgICAgICAgIC1tb3otYXBwZWFyYW5jZTogbm9uZTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAzMnB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg0NWRlZywgdHJhbnNwYXJlbnQgNTAlLCB2YXIoLS10ZXh0LW11dGVkKSA1MCUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHZhcigtLXRleHQtbXV0ZWQpIDUwJSwgdHJhbnNwYXJlbnQgNTAlKTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjYWxjKDEwMCUgLSAxNHB4KSBjYWxjKDUwJSAtIDJweCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsYygxMDAlIC0gMTBweCkgY2FsYyg1MCUgLSAycHgpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogNHB4IDRweCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDRweCA0cHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogQnV0dG9ucyAqL1xuICAgICAgICAgICAgLm5leHVzLWNvbnZlcnNhdGlvbi1zZWxlY3Rpb24tZGlhbG9nIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyBidXR0b246aG92ZXIge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBTdW1tYXJ5IHNlY3Rpb24gKi9cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyAuc3VtbWFyeS1zZWN0aW9uIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTJweCAxNnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBDb250cm9scyBzZWN0aW9uICovXG4gICAgICAgICAgICAubmV4dXMtY29udmVyc2F0aW9uLXNlbGVjdGlvbi1kaWFsb2cgLmNvbnRyb2xzLXNlY3Rpb24ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBTY3JvbGxiYXIgc3R5bGluZyBmb3IgdGFibGUgY29udGFpbmVyICovXG4gICAgICAgICAgICAubmV4dXMtY29udmVyc2F0aW9uLXNlbGVjdGlvbi1kaWFsb2cgLm5leHVzLXRhYmxlLWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMHB4O1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTBweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm5leHVzLWNvbnZlcnNhdGlvbi1zZWxlY3Rpb24tZGlhbG9nIC5uZXh1cy10YWJsZS1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubmV4dXMtY29udmVyc2F0aW9uLXNlbGVjdGlvbi1kaWFsb2cgLm5leHVzLXRhYmxlLWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1jb252ZXJzYXRpb24tc2VsZWN0aW9uLWRpYWxvZyAubmV4dXMtdGFibGUtY29udGFpbmVyOjotd2Via2l0LXNjcm9sbGJhci10aHVtYjpob3ZlciB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgY3JlYXRlS29maVN1cHBvcnRCb3ggfSBmcm9tIFwiLi4vdWkvY29tcG9uZW50cy9rb2ZpLXN1cHBvcnQtYm94XCI7XG5cbi8qKlxuICogV2VsY29tZSBkaWFsb2cgc2hvd24gb24gZmlyc3QgaW5zdGFsbGF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnN0YWxsYXRpb25XZWxjb21lRGlhbG9nIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgdmVyc2lvbjogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHZlcnNpb246IHN0cmluZykge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwsIG1vZGFsRWwsIHRpdGxlRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIC8vIEFkZCBjbGFzcyB0byBtb2RhbFxuICAgICAgICBtb2RhbEVsLmFkZENsYXNzKCduZXh1cy1pbnN0YWxsYXRpb24td2VsY29tZS1kaWFsb2cnKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCduZXh1cy1pbnN0YWxsYXRpb24td2VsY29tZS1kaWFsb2cnKTtcblxuICAgICAgICAvLyBTZXQgbW9kYWwgd2lkdGhcbiAgICAgICAgbW9kYWxFbC5zdHlsZS53aWR0aCA9ICc2MDBweCc7XG4gICAgICAgIG1vZGFsRWwuc3R5bGUubWF4V2lkdGggPSAnOTB2dyc7XG5cbiAgICAgICAgLy8gU2V0IHRpdGxlXG4gICAgICAgIHRpdGxlRWwuc2V0VGV4dChgTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAke3RoaXMudmVyc2lvbn1gKTtcblxuICAgICAgICAvLyBXZWxjb21lIG1lc3NhZ2VcbiAgICAgICAgY29uc3Qgd2VsY29tZVNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRGl2KCd3ZWxjb21lLXNlY3Rpb24nKTtcbiAgICAgICAgd2VsY29tZVNlY3Rpb24uc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI0cHg7XG4gICAgICAgIGA7XG5cbiAgICAgICAgY29uc3Qgd2VsY29tZUljb24gPSB3ZWxjb21lU2VjdGlvbi5jcmVhdGVEaXYoKTtcbiAgICAgICAgd2VsY29tZUljb24uaW5uZXJIVE1MID0gJ1x1RDgzQ1x1REY4OSc7XG4gICAgICAgIHdlbGNvbWVJY29uLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICBmb250LXNpemU6IDQ4cHg7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgICBgO1xuXG4gICAgICAgIGNvbnN0IHdlbGNvbWVUaXRsZSA9IHdlbGNvbWVTZWN0aW9uLmNyZWF0ZUVsKCdoMicpO1xuICAgICAgICB3ZWxjb21lVGl0bGUudGV4dENvbnRlbnQgPSAnVGhhbmsgeW91IGZvciBpbnN0YWxsaW5nIE5leHVzIEFJIENoYXQgSW1wb3J0ZXIhJztcbiAgICAgICAgd2VsY29tZVRpdGxlLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICBtYXJnaW46IDAgMCAxMnB4IDA7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBgO1xuXG4gICAgICAgIGNvbnN0IHdlbGNvbWVUZXh0ID0gd2VsY29tZVNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICAgIHdlbGNvbWVUZXh0LnRleHRDb250ZW50ID0gJ0ltcG9ydCBhbmQgbWFuYWdlIHlvdXIgQ2hhdEdQVCBhbmQgQ2xhdWRlIGNvbnZlcnNhdGlvbnMgZGlyZWN0bHkgaW4geW91ciBPYnNpZGlhbiB2YXVsdC4nO1xuICAgICAgICB3ZWxjb21lVGV4dC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4wNWVtO1xuICAgICAgICBgO1xuXG4gICAgICAgIC8vIEtvLWZpIHN1cHBvcnQgYm94ICh1c2luZyByZXVzYWJsZSBjb21wb25lbnQpXG4gICAgICAgIGNyZWF0ZUtvZmlTdXBwb3J0Qm94KGNvbnRlbnRFbCk7XG5cbiAgICAgICAgLy8gUmVzb3VyY2VzIHNlY3Rpb25cbiAgICAgICAgY29uc3QgcmVzb3VyY2VzU2VjdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ3Jlc291cmNlcy1zZWN0aW9uJyk7XG4gICAgICAgIHJlc291cmNlc1NlY3Rpb24uc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDI0cHg7XG4gICAgICAgIGA7XG5cbiAgICAgICAgY29uc3QgcmVzb3VyY2VzVGl0bGUgPSByZXNvdXJjZXNTZWN0aW9uLmNyZWF0ZUVsKCdoMycpO1xuICAgICAgICByZXNvdXJjZXNUaXRsZS50ZXh0Q29udGVudCA9ICdSZXNvdXJjZXMnO1xuICAgICAgICByZXNvdXJjZXNUaXRsZS5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgbWFyZ2luOiAwIDAgMTZweCAwO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gUmVzb3VyY2VzIGdyaWRcbiAgICAgICAgY29uc3QgcmVzb3VyY2VzR3JpZCA9IHJlc291cmNlc1NlY3Rpb24uY3JlYXRlRGl2KCdyZXNvdXJjZXMtZ3JpZCcpO1xuICAgICAgICByZXNvdXJjZXNHcmlkLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTtcbiAgICAgICAgICAgIGdhcDogMTJweDtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI0cHg7XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gUmVzb3VyY2UgbGlua3NcbiAgICAgICAgY29uc3QgcmVzb3VyY2VzID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGljb246ICdcdUQ4M0RcdURDRDYnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnRG9jdW1lbnRhdGlvbicsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBob3cgdG8gdXNlIHRoZSBwbHVnaW4nLFxuICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vZ2l0aHViLmNvbS9zdXBlcmtpa2ltL25leHVzLWFpLWNoYXQtaW1wb3J0ZXIvYmxvYi8xLjMuMC9SRUFETUUubWQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGljb246ICdcdUQ4M0RcdURDREQnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnUmVsZWFzZSBOb3RlcycsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdXaGF0XFwncyBuZXcgaW4gdGhpcyB2ZXJzaW9uJyxcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2dpdGh1Yi5jb20vc3VwZXJraWtpbS9uZXh1cy1haS1jaGF0LWltcG9ydGVyL2Jsb2IvMS4zLjAvUkVMRUFTRV9OT1RFUy5tZCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWNvbjogJ1x1RDgzRFx1REMxQicsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdSZXBvcnQgSXNzdWVzJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0ZvdW5kIGEgYnVnPyBMZXQgdXMga25vdycsXG4gICAgICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9naXRodWIuY29tL3N1cGVya2lraW0vbmV4dXMtYWktY2hhdC1pbXBvcnRlci9pc3N1ZXMnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGljb246ICdcdUQ4M0RcdURDQUMnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnQ29tbXVuaXR5IEZvcnVtJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0pvaW4gdGhlIGRpc2N1c3Npb24nLFxuICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vZm9ydW0ub2JzaWRpYW4ubWQvdC9wbHVnaW4tbmV4dXMtYWktY2hhdC1pbXBvcnRlci1pbXBvcnQtY2hhdGdwdC1hbmQtY2xhdWRlLWNvbnZlcnNhdGlvbnMtdG8teW91ci12YXVsdC83MTY2NCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcblxuICAgICAgICByZXNvdXJjZXMuZm9yRWFjaChyZXNvdXJjZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYXJkID0gdGhpcy5jcmVhdGVSZXNvdXJjZUNhcmQocmVzb3VyY2VzR3JpZCwgcmVzb3VyY2UpO1xuICAgICAgICAgICAgcmVzb3VyY2VzR3JpZC5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ2xvc2UgYnV0dG9uXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2J1dHRvbi1jb250YWluZXInKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAyNHB4O1xuICAgICAgICBgO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnR2V0IFN0YXJ0ZWQnXG4gICAgICAgIH0pO1xuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRDbGFzcygnbW9kLWN0YScpO1xuICAgICAgICBjbG9zZUJ1dHRvbi5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgcGFkZGluZzogMTBweCAzMnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxLjA1ZW07XG4gICAgICAgIGA7XG5cbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHJlc291cmNlIGNhcmRcbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZVJlc291cmNlQ2FyZChjb250YWluZXI6IEhUTUxFbGVtZW50LCByZXNvdXJjZToge1xuICAgICAgICBpY29uOiBzdHJpbmc7XG4gICAgICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgICAgIHVybDogc3RyaW5nO1xuICAgIH0pOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBjb250YWluZXIuY3JlYXRlRWwoJ2EnLCB7XG4gICAgICAgICAgICBocmVmOiByZXNvdXJjZS51cmxcbiAgICAgICAgfSk7XG4gICAgICAgIGNhcmQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYDtcblxuICAgICAgICAvLyBIb3ZlciBlZmZlY3RcbiAgICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgY2FyZC5zdHlsZS5ib3JkZXJDb2xvciA9ICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJztcbiAgICAgICAgICAgIGNhcmQuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTJweCknO1xuICAgICAgICAgICAgY2FyZC5zdHlsZS5ib3hTaGFkb3cgPSAnMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMSknO1xuICAgICAgICB9KTtcblxuICAgICAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICBjYXJkLnN0eWxlLmJvcmRlckNvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG4gICAgICAgICAgICBjYXJkLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApJztcbiAgICAgICAgICAgIGNhcmQuc3R5bGUuYm94U2hhZG93ID0gJ25vbmUnO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBJY29uXG4gICAgICAgIGNvbnN0IGljb24gPSBjYXJkLmNyZWF0ZURpdigpO1xuICAgICAgICBpY29uLmlubmVySFRNTCA9IHJlc291cmNlLmljb247XG4gICAgICAgIGljb24uc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgYDtcblxuICAgICAgICAvLyBUaXRsZVxuICAgICAgICBjb25zdCB0aXRsZSA9IGNhcmQuY3JlYXRlRGl2KCk7XG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gcmVzb3VyY2UudGl0bGU7XG4gICAgICAgIHRpdGxlLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgYDtcblxuICAgICAgICAvLyBEZXNjcmlwdGlvblxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGNhcmQuY3JlYXRlRGl2KCk7XG4gICAgICAgIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gcmVzb3VyY2UuZGVzY3JpcHRpb247XG4gICAgICAgIGRlc2NyaXB0aW9uLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICAgICAgYDtcblxuICAgICAgICAvLyBPcGVuIGluIGV4dGVybmFsIGJyb3dzZXJcbiAgICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB3aW5kb3cub3BlbihyZXNvdXJjZS51cmwsICdfYmxhbmsnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNhcmQ7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuIiwgIi8qKlxuICogTmV4dXMgQUkgQ2hhdCBJbXBvcnRlciAtIE9ic2lkaWFuIFBsdWdpblxuICogQ29weXJpZ2h0IChDKSAyMDI0IEFraW0gU2lzc2FvdWlcbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqIFxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqIFxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcbiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8vIHNyYy9zZXJ2aWNlcy9jb252ZXJzYXRpb24tbWV0YWRhdGEtZXh0cmFjdG9yLnRzXG5pbXBvcnQgSlNaaXAgZnJvbSBcImpzemlwXCI7XG5pbXBvcnQgeyBQcm92aWRlclJlZ2lzdHJ5IH0gZnJvbSBcIi4uL3Byb3ZpZGVycy9wcm92aWRlci1hZGFwdGVyXCI7XG5pbXBvcnQgeyBDaGF0IH0gZnJvbSBcIi4uL3Byb3ZpZGVycy9jaGF0Z3B0L2NoYXRncHQtdHlwZXNcIjtcbmltcG9ydCB7IENsYXVkZUNvbnZlcnNhdGlvbiwgQ2xhdWRlRXhwb3J0RGF0YSB9IGZyb20gXCIuLi9wcm92aWRlcnMvY2xhdWRlL2NsYXVkZS10eXBlc1wiO1xuaW1wb3J0IHsgaXNWYWxpZE1lc3NhZ2UsIGNvbXBhcmVUaW1lc3RhbXBzSWdub3JpbmdTZWNvbmRzIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgdHlwZSBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5cbi8qKlxuICogQ29udmVyc2F0aW9uIGV4aXN0ZW5jZSBzdGF0dXMgZm9yIGltcG9ydCBwcmV2aWV3XG4gKi9cbmV4cG9ydCB0eXBlIENvbnZlcnNhdGlvbkV4aXN0ZW5jZVN0YXR1cyA9ICduZXcnIHwgJ3VwZGF0ZWQnIHwgJ3VuY2hhbmdlZCcgfCAndW5rbm93bic7XG5cbi8qKlxuICogQW5hbHlzaXMgaW5mb3JtYXRpb24gZm9yIHVzZXIgZGlzcGxheVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEFuYWx5c2lzSW5mbyB7XG4gICAgdG90YWxDb252ZXJzYXRpb25zRm91bmQ6IG51bWJlcjtcbiAgICB1bmlxdWVDb252ZXJzYXRpb25zS2VwdDogbnVtYmVyO1xuICAgIGR1cGxpY2F0ZXNSZW1vdmVkOiBudW1iZXI7XG4gICAgaGFzTXVsdGlwbGVGaWxlczogYm9vbGVhbjtcblxuICAgIC8vIERldGFpbGVkIGJyZWFrZG93biBmb3Igc2VsZWN0aW9uXG4gICAgY29udmVyc2F0aW9uc05ldzogbnVtYmVyO1xuICAgIGNvbnZlcnNhdGlvbnNVcGRhdGVkOiBudW1iZXI7XG4gICAgY29udmVyc2F0aW9uc0lnbm9yZWQ6IG51bWJlcjsgLy8gdW5jaGFuZ2VkIGNvbnZlcnNhdGlvbnMgZmlsdGVyZWQgb3V0XG59XG5cbi8qKlxuICogTGlnaHR3ZWlnaHQgY29udmVyc2F0aW9uIG1ldGFkYXRhIGZvciBwcmV2aWV3IHB1cnBvc2VzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29udmVyc2F0aW9uTWV0YWRhdGEge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBjcmVhdGVUaW1lOiBudW1iZXI7IC8vIFVuaXggdGltZXN0YW1wXG4gICAgdXBkYXRlVGltZTogbnVtYmVyOyAvLyBVbml4IHRpbWVzdGFtcFxuICAgIG1lc3NhZ2VDb3VudDogbnVtYmVyO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG4gICAgaXNTdGFycmVkPzogYm9vbGVhbjtcbiAgICBpc0FyY2hpdmVkPzogYm9vbGVhbjtcblxuICAgIC8vIE11bHRpLWZpbGUgaW1wb3J0IHN1cHBvcnRcbiAgICBzb3VyY2VGaWxlPzogc3RyaW5nOyAvLyBPcmlnaW5hbCBaSVAgZmlsZW5hbWVcbiAgICBzb3VyY2VGaWxlSW5kZXg/OiBudW1iZXI7IC8vIEluZGV4IGluIGZpbGUgYXJyYXkgZm9yIHByb2Nlc3Npbmcgb3JkZXJcblxuICAgIC8vIEV4aXN0ZW5jZSBzdGF0dXMgZm9yIGltcG9ydCBwcmV2aWV3XG4gICAgZXhpc3RlbmNlU3RhdHVzPzogQ29udmVyc2F0aW9uRXhpc3RlbmNlU3RhdHVzO1xuICAgIGV4aXN0aW5nVXBkYXRlVGltZT86IG51bWJlcjsgLy8gVXBkYXRlIHRpbWUgb2YgZXhpc3RpbmcgY29udmVyc2F0aW9uIChpZiBhbnkpXG4gICAgaGFzTmV3ZXJDb250ZW50PzogYm9vbGVhbjsgLy8gVHJ1ZSBpZiBaSVAgdmVyc2lvbiBpcyBuZXdlciB0aGFuIGV4aXN0aW5nXG59XG5cbi8qKlxuICogU3RhdGlzdGljcyBmb3IgYSBzaW5nbGUgZmlsZSBkdXJpbmcgYW5hbHlzaXNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWxlQW5hbHlzaXNTdGF0cyB7XG4gICAgZmlsZU5hbWU6IHN0cmluZztcbiAgICB0b3RhbENvbnZlcnNhdGlvbnM6IG51bWJlcjsgICAgICAgIC8vIFRvdGFsIGluIHRoaXMgZmlsZVxuICAgIGR1cGxpY2F0ZXM6IG51bWJlcjsgICAgICAgICAgICAgICAgIC8vIER1cGxpY2F0ZXMgKGFscmVhZHkgc2VlbiBpbiBwcmV2aW91cyBmaWxlcylcbiAgICB1bmlxdWVDb250cmlidXRlZDogbnVtYmVyOyAgICAgICAgICAvLyBVbmlxdWUgY29udmVyc2F0aW9ucyBmcm9tIHRoaXMgZmlsZVxuICAgIHNlbGVjdGVkRm9ySW1wb3J0OiBudW1iZXI7ICAgICAgICAgIC8vIFNlbGVjdGVkIGZvciBpbXBvcnQgKG5ldyArIHVwZGF0ZWQpXG4gICAgbmV3Q29udmVyc2F0aW9uczogbnVtYmVyOyAgICAgICAgICAgLy8gTmV3IChub3QgaW4gdmF1bHQpXG4gICAgdXBkYXRlZENvbnZlcnNhdGlvbnM6IG51bWJlcjsgICAgICAgLy8gVXBkYXRlZCAobmV3ZXIgdGhhbiB2YXVsdClcbiAgICBza2lwcGVkQ29udmVyc2F0aW9uczogbnVtYmVyOyAgICAgICAvLyBTa2lwcGVkICh1bmNoYW5nZWQgaW4gdmF1bHQpXG59XG5cbi8qKlxuICogUmVzdWx0IG9mIG1ldGFkYXRhIGV4dHJhY3Rpb24gd2l0aCBhbmFseXNpcyBpbmZvXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWV0YWRhdGFFeHRyYWN0aW9uUmVzdWx0IHtcbiAgICBjb252ZXJzYXRpb25zOiBDb252ZXJzYXRpb25NZXRhZGF0YVtdO1xuICAgIGFuYWx5c2lzSW5mbz86IEFuYWx5c2lzSW5mbztcbiAgICBmaWxlU3RhdHM/OiBNYXA8c3RyaW5nLCBGaWxlQW5hbHlzaXNTdGF0cz47XG59XG5cbi8qKlxuICogU2VydmljZSBmb3IgZXh0cmFjdGluZyBjb252ZXJzYXRpb24gbWV0YWRhdGEgd2l0aG91dCBmdWxsIHByb2Nlc3NpbmdcbiAqIFVzZWQgZm9yIGNvbnZlcnNhdGlvbiBzZWxlY3Rpb24gcHJldmlld1xuICovXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uTWV0YWRhdGFFeHRyYWN0b3Ige1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHByb3ZpZGVyUmVnaXN0cnk6IFByb3ZpZGVyUmVnaXN0cnksXG4gICAgICAgIHByaXZhdGUgcGx1Z2luOiBOZXh1c0FpQ2hhdEltcG9ydGVyUGx1Z2luXG4gICAgKSB7fVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdCBjb252ZXJzYXRpb24gbWV0YWRhdGEgZnJvbSBaSVAgZmlsZVxuICAgICAqL1xuICAgIGFzeW5jIGV4dHJhY3RNZXRhZGF0YUZyb21aaXAoXG4gICAgICAgIHppcDogSlNaaXAsXG4gICAgICAgIGZvcmNlZFByb3ZpZGVyPzogc3RyaW5nLFxuICAgICAgICBzb3VyY2VGaWxlTmFtZT86IHN0cmluZyxcbiAgICAgICAgc291cmNlRmlsZUluZGV4PzogbnVtYmVyLFxuICAgICAgICBleGlzdGluZ0NvbnZlcnNhdGlvbnM/OiBNYXA8c3RyaW5nLCBhbnk+XG4gICAgKTogUHJvbWlzZTxDb252ZXJzYXRpb25NZXRhZGF0YVtdPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBFeHRyYWN0IHJhdyBjb252ZXJzYXRpb24gZGF0YVxuICAgICAgICAgICAgY29uc3QgcmF3Q29udmVyc2F0aW9ucyA9IGF3YWl0IHRoaXMuZXh0cmFjdFJhd0NvbnZlcnNhdGlvbnNGcm9tWmlwKHppcCk7XG5cbiAgICAgICAgICAgIGlmIChyYXdDb252ZXJzYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRGV0ZWN0IHByb3ZpZGVyIGlmIG5vdCBmb3JjZWRcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gZm9yY2VkUHJvdmlkZXIgfHwgdGhpcy5wcm92aWRlclJlZ2lzdHJ5LmRldGVjdFByb3ZpZGVyKHJhd0NvbnZlcnNhdGlvbnMpO1xuXG4gICAgICAgICAgICBpZiAocHJvdmlkZXIgPT09ICd1bmtub3duJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGRldGVjdCBjb252ZXJzYXRpb24gcHJvdmlkZXIgZnJvbSBkYXRhIHN0cnVjdHVyZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBFeHRyYWN0IG1ldGFkYXRhIGJhc2VkIG9uIHByb3ZpZGVyXG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuZXh0cmFjdE1ldGFkYXRhQnlQcm92aWRlcihyYXdDb252ZXJzYXRpb25zLCBwcm92aWRlcik7XG5cbiAgICAgICAgICAgIC8vIEFkZCBzb3VyY2UgZmlsZSBpbmZvcm1hdGlvbiBhbmQgZXhpc3RlbmNlIHN0YXR1c1xuICAgICAgICAgICAgcmV0dXJuIG1ldGFkYXRhLm1hcChjb252ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmhhbmNlZDogQ29udmVyc2F0aW9uTWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNvbnYsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUZpbGU6IHNvdXJjZUZpbGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VGaWxlSW5kZXg6IHNvdXJjZUZpbGVJbmRleFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBleGlzdGVuY2Ugc3RhdHVzIGlmIGV4aXN0aW5nIGNvbnZlcnNhdGlvbnMgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdDb252ZXJzYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZXhpc3RpbmdDb252ZXJzYXRpb25zLmdldChjb252LmlkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmhhbmNlZC5leGlzdGluZ1VwZGF0ZVRpbWUgPSBleGlzdGluZy51cGRhdGVUaW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSB0aW1lc3RhbXBzIGlnbm9yaW5nIHNlY29uZHMgKHYxLjIuMCBcdTIxOTIgdjEuMy4wIGNvbXBhdGliaWxpdHkpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wYXJpc29uID0gY29tcGFyZVRpbWVzdGFtcHNJZ25vcmluZ1NlY29uZHMoY29udi51cGRhdGVUaW1lLCBleGlzdGluZy51cGRhdGVUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21wYXJpc29uID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuaGFuY2VkLmV4aXN0ZW5jZVN0YXR1cyA9ICd1cGRhdGVkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmhhbmNlZC5oYXNOZXdlckNvbnRlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmhhbmNlZC5leGlzdGVuY2VTdGF0dXMgPSAndW5jaGFuZ2VkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmhhbmNlZC5oYXNOZXdlckNvbnRlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuaGFuY2VkLmV4aXN0ZW5jZVN0YXR1cyA9ICduZXcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5oYW5jZWQuaGFzTmV3ZXJDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVuaGFuY2VkLmV4aXN0ZW5jZVN0YXR1cyA9ICd1bmtub3duJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZW5oYW5jZWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGV4dHJhY3QgY29udmVyc2F0aW9uIG1ldGFkYXRhOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3QgcmF3IGNvbnZlcnNhdGlvbiBkYXRhIGZyb20gWklQIChwcm92aWRlci1hZ25vc3RpYylcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGV4dHJhY3RSYXdDb252ZXJzYXRpb25zRnJvbVppcCh6aXA6IEpTWmlwKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25zRmlsZSA9IHppcC5maWxlKFwiY29udmVyc2F0aW9ucy5qc29uXCIpO1xuICAgICAgICBpZiAoIWNvbnZlcnNhdGlvbnNGaWxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGNvbnZlcnNhdGlvbnMuanNvbiBmaWxlIGluIFpJUCBhcmNoaXZlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9uc0pzb24gPSBhd2FpdCBjb252ZXJzYXRpb25zRmlsZS5hc3luYyhcInN0cmluZ1wiKTtcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UoY29udmVyc2F0aW9uc0pzb24pO1xuXG4gICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgZGF0YSBzdHJ1Y3R1cmVzXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZERhdGEpKSB7XG4gICAgICAgICAgICAvLyBEaXJlY3QgYXJyYXkgb2YgY29udmVyc2F0aW9ucyAoQ2hhdEdQVCBmb3JtYXQpXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkRGF0YTtcbiAgICAgICAgfSBlbHNlIGlmIChwYXJzZWREYXRhLmNvbnZlcnNhdGlvbnMgJiYgQXJyYXkuaXNBcnJheShwYXJzZWREYXRhLmNvbnZlcnNhdGlvbnMpKSB7XG4gICAgICAgICAgICAvLyBOZXN0ZWQgc3RydWN0dXJlIChDbGF1ZGUgZm9ybWF0KVxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZERhdGEuY29udmVyc2F0aW9ucztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29udmVyc2F0aW9ucy5qc29uIHN0cnVjdHVyZVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3QgbWV0YWRhdGEgYmFzZWQgb24gZGV0ZWN0ZWQgcHJvdmlkZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIGV4dHJhY3RNZXRhZGF0YUJ5UHJvdmlkZXIocmF3Q29udmVyc2F0aW9uczogYW55W10sIHByb3ZpZGVyOiBzdHJpbmcpOiBDb252ZXJzYXRpb25NZXRhZGF0YVtdIHtcbiAgICAgICAgc3dpdGNoIChwcm92aWRlcikge1xuICAgICAgICAgICAgY2FzZSAnY2hhdGdwdCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdENoYXRHUFRNZXRhZGF0YShyYXdDb252ZXJzYXRpb25zKTtcbiAgICAgICAgICAgIGNhc2UgJ2NsYXVkZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdENsYXVkZU1ldGFkYXRhKHJhd0NvbnZlcnNhdGlvbnMpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHByb3ZpZGVyOiAke3Byb3ZpZGVyfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdCBtZXRhZGF0YSBmcm9tIENoYXRHUFQgY29udmVyc2F0aW9uc1xuICAgICAqL1xuICAgIHByaXZhdGUgZXh0cmFjdENoYXRHUFRNZXRhZGF0YShjb252ZXJzYXRpb25zOiBDaGF0W10pOiBDb252ZXJzYXRpb25NZXRhZGF0YVtdIHtcbiAgICAgICAgcmV0dXJuIGNvbnZlcnNhdGlvbnNcbiAgICAgICAgICAgIC5maWx0ZXIoY2hhdCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBpbnZhbGlkIGNvbnZlcnNhdGlvbnMgKG1pc3NpbmcgSUQgb3IgdGltZXN0YW1wcylcbiAgICAgICAgICAgICAgICBpZiAoIWNoYXQuaWQgfHwgY2hhdC5pZC50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdTa2lwcGluZyBDaGF0R1BUIGNvbnZlcnNhdGlvbiB3aXRoIG1pc3NpbmcgSUQ6JywgY2hhdC50aXRsZSB8fCAnVW50aXRsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWNoYXQuY3JlYXRlX3RpbWUgfHwgIWNoYXQudXBkYXRlX3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1NraXBwaW5nIENoYXRHUFQgY29udmVyc2F0aW9uIHdpdGggbWlzc2luZyB0aW1lc3RhbXBzOicsIGNoYXQuaWQsIGNoYXQudGl0bGUgfHwgJ1VudGl0bGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm1hcChjaGF0ID0+ICh7XG4gICAgICAgICAgICAgICAgaWQ6IGNoYXQuaWQsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGNoYXQudGl0bGUgfHwgXCJVbnRpdGxlZFwiLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IGNoYXQuY3JlYXRlX3RpbWUsXG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZTogY2hhdC51cGRhdGVfdGltZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlQ291bnQ6IHRoaXMuY291bnRDaGF0R1BUTWVzc2FnZXMoY2hhdCksXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IFwiY2hhdGdwdFwiLFxuICAgICAgICAgICAgICAgIGlzU3RhcnJlZDogY2hhdC5pc19zdGFycmVkIHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzQXJjaGl2ZWQ6IGNoYXQuaXNfYXJjaGl2ZWQgfHwgZmFsc2VcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmZpbHRlcihtZXRhZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBlbXB0eSBjb252ZXJzYXRpb25zICgwIG1lc3NhZ2VzKVxuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YS5tZXNzYWdlQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3QgbWV0YWRhdGEgZnJvbSBDbGF1ZGUgY29udmVyc2F0aW9uc1xuICAgICAqL1xuICAgIHByaXZhdGUgZXh0cmFjdENsYXVkZU1ldGFkYXRhKGNvbnZlcnNhdGlvbnM6IENsYXVkZUNvbnZlcnNhdGlvbltdKTogQ29udmVyc2F0aW9uTWV0YWRhdGFbXSB7XG4gICAgICAgIHJldHVybiBjb252ZXJzYXRpb25zXG4gICAgICAgICAgICAuZmlsdGVyKGNoYXQgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgaW52YWxpZCBjb252ZXJzYXRpb25zIChtaXNzaW5nIElEIG9yIHRpbWVzdGFtcHMpXG4gICAgICAgICAgICAgICAgaWYgKCFjaGF0LnV1aWQgfHwgY2hhdC51dWlkLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1NraXBwaW5nIENsYXVkZSBjb252ZXJzYXRpb24gd2l0aCBtaXNzaW5nIFVVSUQ6JywgY2hhdC5uYW1lIHx8ICdVbnRpdGxlZCcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghY2hhdC5jcmVhdGVkX2F0IHx8ICFjaGF0LnVwZGF0ZWRfYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1NraXBwaW5nIENsYXVkZSBjb252ZXJzYXRpb24gd2l0aCBtaXNzaW5nIHRpbWVzdGFtcHM6JywgY2hhdC51dWlkLCBjaGF0Lm5hbWUgfHwgJ1VudGl0bGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm1hcChjaGF0ID0+ICh7XG4gICAgICAgICAgICAgICAgaWQ6IGNoYXQudXVpZCxcbiAgICAgICAgICAgICAgICB0aXRsZTogY2hhdC5uYW1lIHx8IFwiVW50aXRsZWRcIixcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBNYXRoLmZsb29yKG5ldyBEYXRlKGNoYXQuY3JlYXRlZF9hdCkuZ2V0VGltZSgpIC8gMTAwMCksXG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZTogTWF0aC5mbG9vcihuZXcgRGF0ZShjaGF0LnVwZGF0ZWRfYXQpLmdldFRpbWUoKSAvIDEwMDApLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VDb3VudDogdGhpcy5jb3VudENsYXVkZU1lc3NhZ2VzKGNoYXQpLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBcImNsYXVkZVwiLFxuICAgICAgICAgICAgICAgIGlzU3RhcnJlZDogY2hhdC5pc19zdGFycmVkIHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzQXJjaGl2ZWQ6IGZhbHNlIC8vIENsYXVkZSBkb2Vzbid0IGhhdmUgYXJjaGl2ZWQgc3RhdHVzXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5maWx0ZXIobWV0YWRhdGEgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgZW1wdHkgY29udmVyc2F0aW9ucyAoMCBtZXNzYWdlcylcbiAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEubWVzc2FnZUNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3VudCBtZXNzYWdlcyBpbiBDaGF0R1BUIGNvbnZlcnNhdGlvbiAobGlnaHR3ZWlnaHQgdmVyc2lvbilcbiAgICAgKi9cbiAgICBwcml2YXRlIGNvdW50Q2hhdEdQVE1lc3NhZ2VzKGNoYXQ6IENoYXQpOiBudW1iZXIge1xuICAgICAgICBpZiAoIWNoYXQubWFwcGluZykge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2VPYmogb2YgT2JqZWN0LnZhbHVlcyhjaGF0Lm1hcHBpbmcpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gbWVzc2FnZU9iaj8ubWVzc2FnZTtcbiAgICAgICAgICAgIGlmICghbWVzc2FnZSkgY29udGludWU7XG5cbiAgICAgICAgICAgIC8vIFVzZSBzYW1lIGZpbHRlcmluZyBsb2dpYyBhcyBDaGF0R1BUQ29udmVydGVyIGJ1dCB3aXRob3V0IGZ1bGwgcHJvY2Vzc2luZ1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkSW5jbHVkZUNoYXRHUFRNZXNzYWdlKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3VudCBtZXNzYWdlcyBpbiBDbGF1ZGUgY29udmVyc2F0aW9uIChsaWdodHdlaWdodCB2ZXJzaW9uKVxuICAgICAqL1xuICAgIHByaXZhdGUgY291bnRDbGF1ZGVNZXNzYWdlcyhjaGF0OiBDbGF1ZGVDb252ZXJzYXRpb24pOiBudW1iZXIge1xuICAgICAgICBpZiAoIWNoYXQuY2hhdF9tZXNzYWdlcyB8fCAhQXJyYXkuaXNBcnJheShjaGF0LmNoYXRfbWVzc2FnZXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBjaGF0LmNoYXRfbWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZEluY2x1ZGVDbGF1ZGVNZXNzYWdlKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaWdodHdlaWdodCB2ZXJzaW9uIG9mIENoYXRHUFQgbWVzc2FnZSBmaWx0ZXJpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIHNob3VsZEluY2x1ZGVDaGF0R1BUTWVzc2FnZShtZXNzYWdlOiBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCFtZXNzYWdlIHx8ICFtZXNzYWdlLmF1dGhvcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2tpcCBzeXN0ZW0gYW5kIHRvb2wgbWVzc2FnZXMgKHNhbWUgbG9naWMgYXMgQ2hhdEdQVENvbnZlcnRlcilcbiAgICAgICAgaWYgKG1lc3NhZ2UuYXV0aG9yLnJvbGUgPT09IFwic3lzdGVtXCIgfHwgbWVzc2FnZS5hdXRob3Iucm9sZSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNraXAgaGlkZGVuIG1lc3NhZ2VzXG4gICAgICAgIGlmIChtZXNzYWdlLm1ldGFkYXRhPy5pc192aXN1YWxseV9oaWRkZW5fZnJvbV9jb252ZXJzYXRpb24gPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVzZSBleGlzdGluZyB2YWxpZGF0aW9uXG4gICAgICAgIHJldHVybiBpc1ZhbGlkTWVzc2FnZShtZXNzYWdlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaWdodHdlaWdodCB2ZXJzaW9uIG9mIENsYXVkZSBtZXNzYWdlIGZpbHRlcmluZ1xuICAgICAqL1xuICAgIHByaXZhdGUgc2hvdWxkSW5jbHVkZUNsYXVkZU1lc3NhZ2UobWVzc2FnZTogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghbWVzc2FnZSB8fCAhbWVzc2FnZS51dWlkIHx8ICFtZXNzYWdlLnNlbmRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5jbHVkZSBib3RoIGh1bWFuIGFuZCBhc3Npc3RhbnQgbWVzc2FnZXNcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2Uuc2VuZGVyID09PSAnaHVtYW4nIHx8IG1lc3NhZ2Uuc2VuZGVyID09PSAnYXNzaXN0YW50JztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0IG1ldGFkYXRhIGZyb20gbXVsdGlwbGUgWklQIGZpbGVzIChmb3IgbXVsdGktZmlsZSBzZWxlY3RpdmUgaW1wb3J0KVxuICAgICAqIEZvbGxvd3MgdGhlIHNhbWUgbG9naWMgYXMgdGhlIHdvcmtpbmcgaW1wb3J0IHByb2Nlc3M6XG4gICAgICogMS4gUHJvY2VzcyBmaWxlcyBjaHJvbm9sb2dpY2FsbHlcbiAgICAgKiAyLiBCdWlsZCBtYXAgb2YgYmVzdCB2ZXJzaW9ucyBwZXIgY29udmVyc2F0aW9uIElEXG4gICAgICogMy4gQ29tcGFyZSB3aXRoIHZhdWx0IGFuZCBmaWx0ZXIgb3V0IHVuY2hhbmdlZCBjb252ZXJzYXRpb25zXG4gICAgICogNC4gT25seSByZXR1cm4gTkVXIGFuZCBVUERBVEVEIGNvbnZlcnNhdGlvbnMgZm9yIHNlbGVjdGlvblxuICAgICAqL1xuICAgIGFzeW5jIGV4dHJhY3RNZXRhZGF0YUZyb21NdWx0aXBsZVppcHMoXG4gICAgICAgIGZpbGVzOiBGaWxlW10sXG4gICAgICAgIGZvcmNlZFByb3ZpZGVyPzogc3RyaW5nLFxuICAgICAgICBleGlzdGluZ0NvbnZlcnNhdGlvbnM/OiBNYXA8c3RyaW5nLCBhbnk+XG4gICAgKTogUHJvbWlzZTxNZXRhZGF0YUV4dHJhY3Rpb25SZXN1bHQ+IHtcbiAgICAgICAgLy8gU3RlcCAxOiBQcm9jZXNzIGZpbGVzIGNocm9ub2xvZ2ljYWxseSBhbmQgYnVpbGQgY29udmVyc2F0aW9uIG1hcFxuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25NYXAgPSBuZXcgTWFwPHN0cmluZywgQ29udmVyc2F0aW9uTWV0YWRhdGE+KCk7XG4gICAgICAgIGNvbnN0IGFsbENvbnZlcnNhdGlvbnNGb3VuZDogQ29udmVyc2F0aW9uTWV0YWRhdGFbXSA9IFtdO1xuICAgICAgICBjb25zdCBmaWxlU3RhdHNNYXAgPSBuZXcgTWFwPHN0cmluZywgRmlsZUFuYWx5c2lzU3RhdHM+KCk7XG5cbiAgICAgICAgLy8gVHJhY2sgd2hpY2ggZmlsZSBjb250cmlidXRlZCBlYWNoIGNvbnZlcnNhdGlvbiB0byB0aGUgZmluYWwgbWFwXG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvblRvRmlsZU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7IC8vIGNvbnZlcnNhdGlvbklkIFx1MjE5MiBmaWxlTmFtZVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlc1tpXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gTG9hZCBaSVBcbiAgICAgICAgICAgICAgICBjb25zdCBKU1ppcCA9IChhd2FpdCBpbXBvcnQoJ2pzemlwJykpLmRlZmF1bHQ7XG4gICAgICAgICAgICAgICAgY29uc3QgemlwID0gbmV3IEpTWmlwKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgemlwQ29udGVudCA9IGF3YWl0IHppcC5sb2FkQXN5bmMoZmlsZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IG1ldGFkYXRhIFdJVEhPVVQgdmF1bHQgY29tcGFyaXNvbiAod2UnbGwgZG8gdGhhdCBsYXRlcilcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMuZXh0cmFjdE1ldGFkYXRhRnJvbVppcChcbiAgICAgICAgICAgICAgICAgICAgemlwQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgZm9yY2VkUHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgICAgIGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaSxcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkIC8vIERvbid0IGNvbXBhcmUgd2l0aCB2YXVsdCB5ZXRcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgLy8gVHJhY2sgYWxsIGNvbnZlcnNhdGlvbnMgZm91bmQgZm9yIGRlZHVwbGljYXRpb24gc3RhdHNcbiAgICAgICAgICAgICAgICBhbGxDb252ZXJzYXRpb25zRm91bmQucHVzaCguLi5tZXRhZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIHN0YXRzIGZvciB0aGlzIGZpbGVcbiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEluRmlsZSA9IG1ldGFkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBsZXQgZHVwbGljYXRlc0luRmlsZSA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IHVuaXF1ZUZyb21GaWxlID0gMDtcblxuICAgICAgICAgICAgICAgIC8vIFN0ZXAgMjogQnVpbGQgbWFwIG9mIGJlc3QgdmVyc2lvbnMgKHNhbWUgbG9naWMgYXMgd29ya2luZyBpbXBvcnQpXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb252ZXJzYXRpb24gb2YgbWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBjb252ZXJzYXRpb25NYXAuZ2V0KGNvbnZlcnNhdGlvbi5pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyc3Qgb2NjdXJyZW5jZSBvZiB0aGlzIGNvbnZlcnNhdGlvbiBJRFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlRnJvbUZpbGUrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbk1hcC5zZXQoY29udmVyc2F0aW9uLmlkLCBjb252ZXJzYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uVG9GaWxlTWFwLnNldChjb252ZXJzYXRpb24uaWQsIGZpbGUubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEdXBsaWNhdGUgZm91bmQgLSBkZXRlcm1pbmUgd2hpY2ggdmVyc2lvbiB0byBrZWVwXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2hvdWxkUmVwbGFjZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlIHRpbWVzdGFtcHMgaWdub3Jpbmcgc2Vjb25kcyAodjEuMi4wIFx1MjE5MiB2MS4zLjAgY29tcGF0aWJpbGl0eSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBhcmlzb24gPSBjb21wYXJlVGltZXN0YW1wc0lnbm9yaW5nU2Vjb25kcyhjb252ZXJzYXRpb24udXBkYXRlVGltZSwgZXhpc3RpbmcudXBkYXRlVGltZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21wYXJpc29uID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgY29udmVyc2F0aW9uIGlzIG5ld2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkUmVwbGFjZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBhcmlzb24gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTYW1lIHVwZGF0ZVRpbWUgKGlnbm9yaW5nIHNlY29uZHMpIC0gcHJlZmVyIHRoZSBvbmUgZnJvbSBsYXRlciBmaWxlIChoaWdoZXIgc291cmNlRmlsZUluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlSW5kZXggPSBjb252ZXJzYXRpb24uc291cmNlRmlsZUluZGV4IHx8IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlSW5kZXggPSBleGlzdGluZy5zb3VyY2VGaWxlSW5kZXggfHwgMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RmlsZUluZGV4ID4gZXhpc3RpbmdGaWxlSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkUmVwbGFjZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkUmVwbGFjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgaXMgbmV3ZXIgLSBpdCByZXBsYWNlcyB0aGUgb2xkIG9uZVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHN0YXRzIGZvciBPTEQgZmlsZSAoaXRzIHZlcnNpb24gaXMgbm93IGEgZHVwbGljYXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZEZpbGVOYW1lID0gY29udmVyc2F0aW9uVG9GaWxlTWFwLmdldChjb252ZXJzYXRpb24uaWQpITtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRGaWxlU3RhdHMgPSBmaWxlU3RhdHNNYXAuZ2V0KG9sZEZpbGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkRmlsZVN0YXRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZEZpbGVTdGF0cy51bmlxdWVDb250cmlidXRlZC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRGaWxlU3RhdHMuZHVwbGljYXRlcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzdGF0cyBmb3IgQ1VSUkVOVCBmaWxlIChpdCdzIG5vdyB1bmlxdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlRnJvbUZpbGUrKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgaW4gbWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uTWFwLnNldChjb252ZXJzYXRpb24uaWQsIGNvbnZlcnNhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uVG9GaWxlTWFwLnNldChjb252ZXJzYXRpb24uaWQsIGZpbGUubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgaXMgb2xkZXIgb3Igc2FtZSBwcmlvcml0eSAtIGl0J3MgYSBkdXBsaWNhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXBsaWNhdGVzSW5GaWxlKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTdG9yZSBzdGF0cyBmb3IgdGhpcyBmaWxlICh3aWxsIGNvbXBsZXRlIHNlbGVjdGVkL25ldy91cGRhdGVkL3NraXBwZWQgYWZ0ZXIgZmlsdGVyaW5nKVxuICAgICAgICAgICAgICAgIGZpbGVTdGF0c01hcC5zZXQoZmlsZS5uYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQ29udmVyc2F0aW9uczogdG90YWxJbkZpbGUsXG4gICAgICAgICAgICAgICAgICAgIGR1cGxpY2F0ZXM6IGR1cGxpY2F0ZXNJbkZpbGUsXG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZUNvbnRyaWJ1dGVkOiB1bmlxdWVGcm9tRmlsZSxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRGb3JJbXBvcnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbnZlcnNhdGlvbnM6IDAsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRDb252ZXJzYXRpb25zOiAwLFxuICAgICAgICAgICAgICAgICAgICBza2lwcGVkQ29udmVyc2F0aW9uczogMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGV4dHJhY3RpbmcgbWV0YWRhdGEgZnJvbSAke2ZpbGUubmFtZX06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIHdpdGggb3RoZXIgZmlsZXMgZXZlbiBpZiBvbmUgZmFpbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0ZXAgMzogQ29tcGFyZSBiZXN0IHZlcnNpb25zIHdpdGggdmF1bHQgYW5kIGZpbHRlciAoc2FtZSBsb2dpYyBhcyB3b3JraW5nIGltcG9ydClcbiAgICAgICAgY29uc3QgZmlsdGVyUmVzdWx0ID0gdGhpcy5maWx0ZXJDb252ZXJzYXRpb25zRm9yU2VsZWN0aW9uKFxuICAgICAgICAgICAgQXJyYXkuZnJvbShjb252ZXJzYXRpb25NYXAudmFsdWVzKCkpLFxuICAgICAgICAgICAgZXhpc3RpbmdDb252ZXJzYXRpb25zXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gU3RlcCA0OiBDb21wbGV0ZSBmaWxlIHN0YXRzIHdpdGggc2VsZWN0ZWQvbmV3L3VwZGF0ZWQvc2tpcHBlZCBjb3VudHNcbiAgICAgICAgZm9yIChjb25zdCBjb252ZXJzYXRpb24gb2YgZmlsdGVyUmVzdWx0LmNvbnZlcnNhdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gY29udmVyc2F0aW9uLnNvdXJjZUZpbGU7XG4gICAgICAgICAgICBpZiAoZmlsZU5hbWUgJiYgZmlsZVN0YXRzTWFwLmhhcyhmaWxlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IGZpbGVTdGF0c01hcC5nZXQoZmlsZU5hbWUpITtcbiAgICAgICAgICAgICAgICBzdGF0cy5zZWxlY3RlZEZvckltcG9ydCsrO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvbnZlcnNhdGlvbi5leGlzdGVuY2VTdGF0dXMgPT09ICduZXcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRzLm5ld0NvbnZlcnNhdGlvbnMrKztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnZlcnNhdGlvbi5leGlzdGVuY2VTdGF0dXMgPT09ICd1cGRhdGVkJykge1xuICAgICAgICAgICAgICAgICAgICBzdGF0cy51cGRhdGVkQ29udmVyc2F0aW9ucysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvdW50IHNraXBwZWQgY29udmVyc2F0aW9ucyBwZXIgZmlsZVxuICAgICAgICBmb3IgKGNvbnN0IGNvbnZlcnNhdGlvbiBvZiBmaWx0ZXJSZXN1bHQuaWdub3JlZENvbnZlcnNhdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gY29udmVyc2F0aW9uLnNvdXJjZUZpbGU7XG4gICAgICAgICAgICBpZiAoZmlsZU5hbWUgJiYgZmlsZVN0YXRzTWFwLmhhcyhmaWxlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IGZpbGVTdGF0c01hcC5nZXQoZmlsZU5hbWUpITtcbiAgICAgICAgICAgICAgICBzdGF0cy5za2lwcGVkQ29udmVyc2F0aW9ucysrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RlcCA1OiBCdWlsZCBhbmFseXNpcyBpbmZvIHdpdGggZGV0YWlsZWQgYnJlYWtkb3duXG4gICAgICAgIGNvbnN0IGFuYWx5c2lzSW5mbzogQW5hbHlzaXNJbmZvID0ge1xuICAgICAgICAgICAgdG90YWxDb252ZXJzYXRpb25zRm91bmQ6IGFsbENvbnZlcnNhdGlvbnNGb3VuZC5sZW5ndGgsXG4gICAgICAgICAgICB1bmlxdWVDb252ZXJzYXRpb25zS2VwdDogY29udmVyc2F0aW9uTWFwLnNpemUsXG4gICAgICAgICAgICBkdXBsaWNhdGVzUmVtb3ZlZDogYWxsQ29udmVyc2F0aW9uc0ZvdW5kLmxlbmd0aCAtIGNvbnZlcnNhdGlvbk1hcC5zaXplLFxuICAgICAgICAgICAgaGFzTXVsdGlwbGVGaWxlczogZmlsZXMubGVuZ3RoID4gMSxcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbnNOZXc6IGZpbHRlclJlc3VsdC5uZXdDb3VudCxcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbnNVcGRhdGVkOiBmaWx0ZXJSZXN1bHQudXBkYXRlZENvdW50LFxuICAgICAgICAgICAgY29udmVyc2F0aW9uc0lnbm9yZWQ6IGZpbHRlclJlc3VsdC5pZ25vcmVkQ291bnRcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udmVyc2F0aW9uczogZmlsdGVyUmVzdWx0LmNvbnZlcnNhdGlvbnMsXG4gICAgICAgICAgICBhbmFseXNpc0luZm86IGFuYWx5c2lzSW5mbyxcbiAgICAgICAgICAgIGZpbGVTdGF0czogZmlsZVN0YXRzTWFwXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgLSBPbGQgZGVkdXBsaWNhdGlvbiBtZXRob2RzLCByZXBsYWNlZCBieSBuZXcgY2hyb25vbG9naWNhbCBhcHByb2FjaFxuICAgICAqIEtlcHQgZm9yIGNvbXBhdGliaWxpdHkgYnV0IG5vIGxvbmdlciB1c2VkIGluIHRoZSBtYWluIGZsb3dcbiAgICAgKi9cbiAgICBwcml2YXRlIGRlZHVwbGljYXRlQ29udmVyc2F0aW9ucyhjb252ZXJzYXRpb25zOiBDb252ZXJzYXRpb25NZXRhZGF0YVtdKTogQ29udmVyc2F0aW9uTWV0YWRhdGFbXSB7XG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIGlzIG5vIGxvbmdlciB1c2VkIGluIHRoZSBuZXcgbG9naWNcbiAgICAgICAgcmV0dXJuIGNvbnZlcnNhdGlvbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlsdGVyIGNvbnZlcnNhdGlvbnMgZm9yIHNlbGVjdGlvbiBkaWFsb2cgKHNhbWUgbG9naWMgYXMgd29ya2luZyBpbXBvcnQgcHJvY2VzcylcbiAgICAgKiBPbmx5IHJldHVybnMgTkVXIGFuZCBVUERBVEVEIGNvbnZlcnNhdGlvbnMgLSBmaWx0ZXJzIG91dCBVTkNIQU5HRUQgY29tcGxldGVseVxuICAgICAqL1xuICAgIHByaXZhdGUgZmlsdGVyQ29udmVyc2F0aW9uc0ZvclNlbGVjdGlvbihcbiAgICAgICAgYmVzdFZlcnNpb25zOiBDb252ZXJzYXRpb25NZXRhZGF0YVtdLFxuICAgICAgICBleGlzdGluZ0NvbnZlcnNhdGlvbnM/OiBNYXA8c3RyaW5nLCBhbnk+XG4gICAgKToge1xuICAgICAgICBjb252ZXJzYXRpb25zOiBDb252ZXJzYXRpb25NZXRhZGF0YVtdLFxuICAgICAgICBpZ25vcmVkQ29udmVyc2F0aW9uczogQ29udmVyc2F0aW9uTWV0YWRhdGFbXSxcbiAgICAgICAgbmV3Q291bnQ6IG51bWJlcixcbiAgICAgICAgdXBkYXRlZENvdW50OiBudW1iZXIsXG4gICAgICAgIGlnbm9yZWRDb3VudDogbnVtYmVyXG4gICAgfSB7XG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnNGb3JTZWxlY3Rpb246IENvbnZlcnNhdGlvbk1ldGFkYXRhW10gPSBbXTtcbiAgICAgICAgY29uc3QgaWdub3JlZENvbnZlcnNhdGlvbnM6IENvbnZlcnNhdGlvbk1ldGFkYXRhW10gPSBbXTtcbiAgICAgICAgbGV0IG5ld0NvdW50ID0gMDtcbiAgICAgICAgbGV0IHVwZGF0ZWRDb3VudCA9IDA7XG4gICAgICAgIGxldCBpZ25vcmVkQ291bnQgPSAwO1xuXG4gICAgICAgIGZvciAoY29uc3QgY29udmVyc2F0aW9uIG9mIGJlc3RWZXJzaW9ucykge1xuICAgICAgICAgICAgaWYgKCFleGlzdGluZ0NvbnZlcnNhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAvLyBObyB2YXVsdCBkYXRhIC0gbWFyayBhbGwgYXMgbmV3XG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uLmV4aXN0ZW5jZVN0YXR1cyA9ICduZXcnO1xuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbi5oYXNOZXdlckNvbnRlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbnNGb3JTZWxlY3Rpb24ucHVzaChjb252ZXJzYXRpb24pO1xuICAgICAgICAgICAgICAgIG5ld0NvdW50Kys7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHZhdWx0Q29udmVyc2F0aW9uID0gZXhpc3RpbmdDb252ZXJzYXRpb25zLmdldChjb252ZXJzYXRpb24uaWQpO1xuXG4gICAgICAgICAgICBpZiAoIXZhdWx0Q29udmVyc2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgYWJzZW50ZSBkdSB2YXVsdCBcdTIxOTIgTkVXICh0b3Vqb3VycyBwcm9wb3NlcilcbiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb24uZXhpc3RlbmNlU3RhdHVzID0gJ25ldyc7XG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uLmhhc05ld2VyQ29udGVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uc0ZvclNlbGVjdGlvbi5wdXNoKGNvbnZlcnNhdGlvbik7XG4gICAgICAgICAgICAgICAgbmV3Q291bnQrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgcHJcdTAwRTlzZW50ZSBkYW5zIGxlIHZhdWx0IFx1MjE5MiBjb21wYXJlciB1cGRhdGVUaW1lXG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uLmV4aXN0aW5nVXBkYXRlVGltZSA9IHZhdWx0Q29udmVyc2F0aW9uLnVwZGF0ZVRpbWU7XG5cbiAgICAgICAgICAgICAgICAvLyBOb3JtYWxpemUgWklQIHRpbWVzdGFtcCB0byBtYXRjaCB2YXVsdCBmb3JtYXQgKElTTyA4NjAxIFx1MjE5MiB1bml4IHdpdGhvdXQgbWlsbGlzZWNvbmRzKVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBjb21wYXJlIGFwcGxlcyB0byBhcHBsZXM6XG4gICAgICAgICAgICAgICAgLy8gMS4gWklQIGhhcyBmbG9hdCB3aXRoIG1pbGxpc2Vjb25kczogMTc0Mjc2MTA1OC4zODU0MDZcbiAgICAgICAgICAgICAgICAvLyAyLiBDb252ZXJ0IHRvIElTTyA4NjAxOiBcIjIwMjUtMTAtMDRUMjI6MzA6NDUuMzg1WlwiXG4gICAgICAgICAgICAgICAgLy8gMy4gUGFyc2UgYmFjayB0byB1bml4IChsb3NlcyBtaWxsaXNlY29uZHMpOiAxNzQyNzYxMDU4XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgU0FNRSBwcm9jZXNzIHVzZWQgd2hlbiB3cml0aW5nIGZyb250bWF0dGVyLCBzbyBjb21wYXJpc29uIGlzIGNvbnNpc3RlbnRcbiAgICAgICAgICAgICAgICBjb25zdCB7IG1vbWVudCB9ID0gcmVxdWlyZShcIm9ic2lkaWFuXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHppcFVwZGF0ZVRpbWVJU08gPSBuZXcgRGF0ZShjb252ZXJzYXRpb24udXBkYXRlVGltZSAqIDEwMDApLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZFppcFVwZGF0ZVRpbWUgPSBtb21lbnQoemlwVXBkYXRlVGltZUlTTywgbW9tZW50LklTT184NjAxLCB0cnVlKS51bml4KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBDb21wYXJlIHRpbWVzdGFtcHMgaWdub3Jpbmcgc2Vjb25kcyAodjEuMi4wIFx1MjE5MiB2MS4zLjAgY29tcGF0aWJpbGl0eSlcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wYXJpc29uID0gY29tcGFyZVRpbWVzdGFtcHNJZ25vcmluZ1NlY29uZHMobm9ybWFsaXplZFppcFVwZGF0ZVRpbWUsIHZhdWx0Q29udmVyc2F0aW9uLnVwZGF0ZVRpbWUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmlzb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFpJUCBwbHVzIHJcdTAwRTljZW50IHF1ZSB2YXVsdCBcdTIxOTIgVVBEQVRFRCAocHJvcG9zZXIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbi5leGlzdGVuY2VTdGF0dXMgPSAndXBkYXRlZCc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbi5oYXNOZXdlckNvbnRlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25zRm9yU2VsZWN0aW9uLnB1c2goY29udmVyc2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZENvdW50Kys7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gWklQIGlkZW50aXF1ZSBvdSBwbHVzIGFuY2llbiBxdWUgdmF1bHQgXHUyMTkyIFVOQ0hBTkdFRCAoSUdOT1JFUilcbiAgICAgICAgICAgICAgICAgICAgLy8gTmUgcGFzIGFqb3V0ZXIgXHUwMEUwIGNvbnZlcnNhdGlvbnNGb3JTZWxlY3Rpb24gbWFpcyB0cmFja2VyIHBvdXIgc3RhdHNcbiAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uLmV4aXN0ZW5jZVN0YXR1cyA9ICd1bmNoYW5nZWQnO1xuICAgICAgICAgICAgICAgICAgICBpZ25vcmVkQ29udmVyc2F0aW9ucy5wdXNoKGNvbnZlcnNhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlnbm9yZWRDb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb252ZXJzYXRpb25zOiBjb252ZXJzYXRpb25zRm9yU2VsZWN0aW9uLFxuICAgICAgICAgICAgaWdub3JlZENvbnZlcnNhdGlvbnMsXG4gICAgICAgICAgICBuZXdDb3VudCxcbiAgICAgICAgICAgIHVwZGF0ZWRDb3VudCxcbiAgICAgICAgICAgIGlnbm9yZWRDb3VudFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIC0gT2xkIGRlZHVwbGljYXRpb24gbG9naWMsIHJlcGxhY2VkIGJ5IG5ldyBjaHJvbm9sb2dpY2FsIGFwcHJvYWNoXG4gICAgICovXG4gICAgcHJpdmF0ZSBlbnN1cmVDb3JyZWN0RXhpc3RlbmNlU3RhdHVzKFxuICAgICAgICBrZXB0Q29udmVyc2F0aW9uOiBDb252ZXJzYXRpb25NZXRhZGF0YSxcbiAgICAgICAgY3VycmVudENvbnZlcnNhdGlvbjogQ29udmVyc2F0aW9uTWV0YWRhdGEsXG4gICAgICAgIGV4aXN0aW5nQ29udmVyc2F0aW9uOiBDb252ZXJzYXRpb25NZXRhZGF0YVxuICAgICk6IENvbnZlcnNhdGlvbk1ldGFkYXRhIHtcbiAgICAgICAgLy8gVGhpcyBtZXRob2QgaXMgbm8gbG9uZ2VyIHVzZWQgaW4gdGhlIG5ldyBsb2dpY1xuICAgICAgICByZXR1cm4ga2VwdENvbnZlcnNhdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdG90YWwgY29udmVyc2F0aW9uIGNvdW50IGZyb20gWklQIHdpdGhvdXQgZXh0cmFjdGluZyBhbGwgbWV0YWRhdGFcbiAgICAgKi9cbiAgICBhc3luYyBnZXRDb252ZXJzYXRpb25Db3VudCh6aXA6IEpTWmlwKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJhd0NvbnZlcnNhdGlvbnMgPSBhd2FpdCB0aGlzLmV4dHJhY3RSYXdDb252ZXJzYXRpb25zRnJvbVppcCh6aXApO1xuICAgICAgICAgICAgcmV0dXJuIHJhd0NvbnZlcnNhdGlvbnMubGVuZ3RoO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLyoqXG4gKiBOZXh1cyBBSSBDaGF0IEltcG9ydGVyIC0gT2JzaWRpYW4gUGx1Z2luXG4gKiBDb3B5cmlnaHQgKEMpIDIwMjQgQWtpbSBTaXNzYW91aVxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICogXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICogXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLy8gc3JjL2RpYWxvZ3MvaW1wb3J0LWNvbXBsZXRpb24tZGlhbG9nLnRzXG5pbXBvcnQgeyBBcHAsIE1vZGFsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBjcmVhdGVLb2ZpU3VwcG9ydEJveCB9IGZyb20gXCIuLi91aS9jb21wb25lbnRzL2tvZmktc3VwcG9ydC1ib3hcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJbXBvcnRDb21wbGV0aW9uU3RhdHMge1xuICAgIHRvdGFsRmlsZXM6IG51bWJlcjtcbiAgICB0b3RhbENvbnZlcnNhdGlvbnM6IG51bWJlcjtcbiAgICBkdXBsaWNhdGVzOiBudW1iZXI7XG4gICAgY3JlYXRlZDogbnVtYmVyO1xuICAgIHVwZGF0ZWQ6IG51bWJlcjtcbiAgICBza2lwcGVkOiBudW1iZXI7XG4gICAgZmFpbGVkOiBudW1iZXI7XG4gICAgYXR0YWNobWVudHNGb3VuZDogbnVtYmVyO1xuICAgIGF0dGFjaG1lbnRzVG90YWw6IG51bWJlcjtcbiAgICBhdHRhY2htZW50c01pc3Npbmc6IG51bWJlcjtcbiAgICBhdHRhY2htZW50c0ZhaWxlZDogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgSW1wb3J0Q29tcGxldGlvbkRpYWxvZyBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIHJlcG9ydEZpbGVQYXRoOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBzdGF0czogSW1wb3J0Q29tcGxldGlvblN0YXRzO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGFwcDogQXBwLFxuICAgICAgICBzdGF0czogSW1wb3J0Q29tcGxldGlvblN0YXRzLFxuICAgICAgICByZXBvcnRGaWxlUGF0aDogc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMuc3RhdHMgPSBzdGF0cztcbiAgICAgICAgdGhpcy5yZXBvcnRGaWxlUGF0aCA9IHJlcG9ydEZpbGVQYXRoO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwsIG1vZGFsRWwsIHRpdGxlRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIC8vIEFkZCBjbGFzcyB0byBtb2RhbFxuICAgICAgICBtb2RhbEVsLmFkZENsYXNzKCduZXh1cy1pbXBvcnQtY29tcGxldGlvbi1kaWFsb2cnKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCduZXh1cy1pbXBvcnQtY29tcGxldGlvbi1kaWFsb2cnKTtcblxuICAgICAgICAvLyBTZXQgdGl0bGVcbiAgICAgICAgdGl0bGVFbC5zZXRUZXh0KFwiSW1wb3J0IENvbXBsZXRlZFwiKTtcblxuICAgICAgICAvLyBTdWNjZXNzIG1lc3NhZ2VcbiAgICAgICAgY29uc3Qgc3VjY2Vzc01zZyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ3N1Y2Nlc3MtbWVzc2FnZScpO1xuICAgICAgICBzdWNjZXNzTXNnLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgICAgIHN1Y2Nlc3NNc2cuc3R5bGUubWFyZ2luQm90dG9tID0gXCIyMHB4XCI7XG4gICAgICAgIHN1Y2Nlc3NNc2cuc3R5bGUuZm9udFNpemUgPSBcIjEuMWVtXCI7XG4gICAgICAgIHN1Y2Nlc3NNc2cuc3R5bGUuY29sb3IgPSBcInZhcigtLWNvbG9yLWdyZWVuKVwiO1xuICAgICAgICBzdWNjZXNzTXNnLmlubmVySFRNTCA9IFwiXHUyNzA1IFN1Y2Nlc3NmdWxseSBpbXBvcnRlZCBjb252ZXJzYXRpb25zXCI7XG5cbiAgICAgICAgLy8gU3RhdGlzdGljcyBzZWN0aW9uIHdpdGggY2FydG91Y2hlc1xuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRzU2VjdGlvbihjb250ZW50RWwpO1xuXG4gICAgICAgIC8vIEF0dGFjaG1lbnRzIHN1bW1hcnkgKGlmIGFueSlcbiAgICAgICAgaWYgKHRoaXMuc3RhdHMuYXR0YWNobWVudHNUb3RhbCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQXR0YWNobWVudHNTZWN0aW9uKGNvbnRlbnRFbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXBvcnQgbGluayBzZWN0aW9uXG4gICAgICAgIHRoaXMuY3JlYXRlUmVwb3J0U2VjdGlvbihjb250ZW50RWwpO1xuXG4gICAgICAgIC8vIEtvLWZpIHN1cHBvcnQgc2VjdGlvbiAodXNpbmcgcmV1c2FibGUgY29tcG9uZW50KVxuICAgICAgICBjcmVhdGVLb2ZpU3VwcG9ydEJveChjb250ZW50RWwpO1xuXG4gICAgICAgIC8vIEFjdGlvbiBidXR0b25zXG4gICAgICAgIHRoaXMuY3JlYXRlQWN0aW9uQnV0dG9ucyhjb250ZW50RWwpO1xuXG4gICAgICAgIC8vIEFkZCBjdXN0b20gc3R5bGVzXG4gICAgICAgIHRoaXMuYWRkQ3VzdG9tU3R5bGVzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTdGF0c1NlY3Rpb24oY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdignc3RhdHMtc2VjdGlvbicpO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMjBweFwiO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSBcImdyaWRcIjtcbiAgICAgICAgc2VjdGlvbi5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gXCJyZXBlYXQoMywgMWZyKVwiO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLmdhcCA9IFwiMTJweFwiO1xuXG4gICAgICAgIC8vIEZpbGVzIGNhcnRvdWNoZVxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRDYXJ0b3VjaGUoc2VjdGlvbiwgXCJcdUQ4M0RcdURDQzFcIiwgdGhpcy5zdGF0cy50b3RhbEZpbGVzLnRvU3RyaW5nKCksIFwiWklQIEZpbGVzIFByb2Nlc3NlZFwiKTtcblxuICAgICAgICAvLyBUb3RhbCBjb252ZXJzYXRpb25zIGNhcnRvdWNoZSAodW5pcXVlIFVVSURzIGluIFpJUHMpXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdENhcnRvdWNoZShzZWN0aW9uLCBcIlx1RDgzRFx1RENBQ1wiLCB0aGlzLnN0YXRzLnRvdGFsQ29udmVyc2F0aW9ucy50b1N0cmluZygpLCBcIlVuaXF1ZSBDb252ZXJzYXRpb25zXCIpO1xuXG4gICAgICAgIC8vIER1cGxpY2F0ZXMgY2FydG91Y2hlIChhbHdheXMgc2hvd24gdG8gZXhwbGFpbiBkaWZmZXJlbmNlIGJldHdlZW4gdG90YWwgYW5kIGNyZWF0ZWQpXG4gICAgICAgIHRoaXMuY3JlYXRlU3RhdENhcnRvdWNoZShzZWN0aW9uLCBcIlx1RDgzRFx1REQwMVwiLCB0aGlzLnN0YXRzLmR1cGxpY2F0ZXMudG9TdHJpbmcoKSwgXCJEdXBsaWNhdGVzXCIsIFwidmFyKC0tdGV4dC1tdXRlZClcIik7XG5cbiAgICAgICAgLy8gQ3JlYXRlZCBjYXJ0b3VjaGVcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0Q2FydG91Y2hlKHNlY3Rpb24sIFwiXHUyNzI4XCIsIHRoaXMuc3RhdHMuY3JlYXRlZC50b1N0cmluZygpLCBcIk5ld1wiLCBcInZhcigtLWNvbG9yLWdyZWVuKVwiKTtcblxuICAgICAgICAvLyBVcGRhdGVkIGNhcnRvdWNoZVxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXRDYXJ0b3VjaGUoc2VjdGlvbiwgXCJcdUQ4M0RcdUREMDRcIiwgdGhpcy5zdGF0cy51cGRhdGVkLnRvU3RyaW5nKCksIFwiVXBkYXRlZFwiLCBcInZhcigtLWNvbG9yLW9yYW5nZSlcIik7XG5cbiAgICAgICAgLy8gU2tpcHBlZCBjYXJ0b3VjaGVcbiAgICAgICAgdGhpcy5jcmVhdGVTdGF0Q2FydG91Y2hlKHNlY3Rpb24sIFwiXHUyM0VEXHVGRTBGXCIsIHRoaXMuc3RhdHMuc2tpcHBlZC50b1N0cmluZygpLCBcIlNraXBwZWRcIiwgXCJ2YXIoLS10ZXh0LW11dGVkKVwiKTtcblxuICAgICAgICAvLyBGYWlsZWQgY2FydG91Y2hlIChvbmx5IGlmID4gMClcbiAgICAgICAgaWYgKHRoaXMuc3RhdHMuZmFpbGVkID4gMCkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVTdGF0Q2FydG91Y2hlKHNlY3Rpb24sIFwiXHUyNzRDXCIsIHRoaXMuc3RhdHMuZmFpbGVkLnRvU3RyaW5nKCksIFwiRmFpbGVkXCIsIFwidmFyKC0tY29sb3ItcmVkKVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlU3RhdENhcnRvdWNoZShcbiAgICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICAgICAgaWNvbjogc3RyaW5nLFxuICAgICAgICB2YWx1ZTogc3RyaW5nLFxuICAgICAgICBsYWJlbDogc3RyaW5nLFxuICAgICAgICBjb2xvcj86IHN0cmluZ1xuICAgICkge1xuICAgICAgICBjb25zdCBjYXJ0b3VjaGUgPSBjb250YWluZXIuY3JlYXRlRGl2KCdzdGF0LWNhcnRvdWNoZScpO1xuICAgICAgICBjYXJ0b3VjaGUuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgY2FydG91Y2hlLnN0eWxlLnBhZGRpbmcgPSBcIjEycHhcIjtcbiAgICAgICAgY2FydG91Y2hlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KVwiO1xuICAgICAgICBjYXJ0b3VjaGUuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI4cHhcIjtcbiAgICAgICAgY2FydG91Y2hlLnN0eWxlLmJveFNoYWRvdyA9IFwiMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKVwiO1xuXG4gICAgICAgIGNvbnN0IGljb25FbCA9IGNhcnRvdWNoZS5jcmVhdGVEaXYoKTtcbiAgICAgICAgaWNvbkVsLnRleHRDb250ZW50ID0gaWNvbjtcbiAgICAgICAgaWNvbkVsLnN0eWxlLmZvbnRTaXplID0gXCIxLjVlbVwiO1xuICAgICAgICBpY29uRWwuc3R5bGUubWFyZ2luQm90dG9tID0gXCI0cHhcIjtcblxuICAgICAgICBjb25zdCB2YWx1ZUVsID0gY2FydG91Y2hlLmNyZWF0ZURpdigpO1xuICAgICAgICB2YWx1ZUVsLnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgICAgIHZhbHVlRWwuc3R5bGUuZm9udFdlaWdodCA9IFwiNjAwXCI7XG4gICAgICAgIHZhbHVlRWwuc3R5bGUuZm9udFNpemUgPSBcIjEuNGVtXCI7XG4gICAgICAgIHZhbHVlRWwuc3R5bGUuY29sb3IgPSBjb2xvciB8fCBcInZhcigtLXRleHQtYWNjZW50KVwiO1xuICAgICAgICB2YWx1ZUVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiNHB4XCI7XG5cbiAgICAgICAgY29uc3QgbGFiZWxFbCA9IGNhcnRvdWNoZS5jcmVhdGVEaXYoKTtcbiAgICAgICAgbGFiZWxFbC50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgICAgICBsYWJlbEVsLnN0eWxlLmZvbnRTaXplID0gXCIwLjg1ZW1cIjtcbiAgICAgICAgbGFiZWxFbC5zdHlsZS5jb2xvciA9IFwidmFyKC0tdGV4dC1tdXRlZClcIjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUF0dGFjaG1lbnRzU2VjdGlvbihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KCdhdHRhY2htZW50cy1zZWN0aW9uJyk7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUubWFyZ2luQm90dG9tID0gXCIyMHB4XCI7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUucGFkZGluZyA9IFwiMTJweFwiO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpXCI7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI2cHhcIjtcbiAgICAgICAgc2VjdGlvbi5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuXG4gICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBNYXRoLnJvdW5kKCh0aGlzLnN0YXRzLmF0dGFjaG1lbnRzRm91bmQgLyB0aGlzLnN0YXRzLmF0dGFjaG1lbnRzVG90YWwpICogMTAwKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGljb24gPSBwZXJjZW50YWdlID09PSAxMDAgPyBcIlx1MjcwNVwiIDogcGVyY2VudGFnZSA+IDUwID8gXCJcdTI2QTBcdUZFMEZcIiA6IFwiXHUyNzRDXCI7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gcGVyY2VudGFnZSA9PT0gMTAwID8gXCJ2YXIoLS1jb2xvci1ncmVlbilcIiA6IHBlcmNlbnRhZ2UgPiA1MCA/IFwidmFyKC0tY29sb3Itb3JhbmdlKVwiIDogXCJ2YXIoLS1jb2xvci1yZWQpXCI7XG5cbiAgICAgICAgY29uc3QgYXR0YWNobWVudFRleHQgPSBzZWN0aW9uLmNyZWF0ZURpdigpO1xuICAgICAgICBhdHRhY2htZW50VGV4dC5pbm5lckhUTUwgPSBgJHtpY29ufSA8c3Ryb25nPkF0dGFjaG1lbnRzOjwvc3Ryb25nPiAke3RoaXMuc3RhdHMuYXR0YWNobWVudHNGb3VuZH0vJHt0aGlzLnN0YXRzLmF0dGFjaG1lbnRzVG90YWx9IGV4dHJhY3RlZCAoJHtwZXJjZW50YWdlfSUpYDtcbiAgICAgICAgYXR0YWNobWVudFRleHQuc3R5bGUuY29sb3IgPSBjb2xvcjtcblxuICAgICAgICBpZiAodGhpcy5zdGF0cy5hdHRhY2htZW50c01pc3NpbmcgPiAwIHx8IHRoaXMuc3RhdHMuYXR0YWNobWVudHNGYWlsZWQgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBkZXRhaWxzID0gc2VjdGlvbi5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIGRldGFpbHMuc3R5bGUuZm9udFNpemUgPSBcIjAuODVlbVwiO1xuICAgICAgICAgICAgZGV0YWlscy5zdHlsZS5jb2xvciA9IFwidmFyKC0tdGV4dC1tdXRlZClcIjtcbiAgICAgICAgICAgIGRldGFpbHMuc3R5bGUubWFyZ2luVG9wID0gXCI0cHhcIjtcbiAgICAgICAgICAgIGRldGFpbHMudGV4dENvbnRlbnQgPSBgJHt0aGlzLnN0YXRzLmF0dGFjaG1lbnRzTWlzc2luZ30gbWlzc2luZywgJHt0aGlzLnN0YXRzLmF0dGFjaG1lbnRzRmFpbGVkfSBmYWlsZWRgO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVSZXBvcnRTZWN0aW9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3JlcG9ydC1zZWN0aW9uJyk7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUubWFyZ2luQm90dG9tID0gXCIyMHB4XCI7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUucGFkZGluZyA9IFwiMTJweFwiO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpXCI7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI2cHhcIjtcblxuICAgICAgICBjb25zdCBsYWJlbCA9IHNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gXCJcdUQ4M0RcdURDQzQgRGV0YWlsZWQgcmVwb3J0OlwiO1xuICAgICAgICBsYWJlbC5zdHlsZS5mb250U2l6ZSA9IFwiMC45ZW1cIjtcbiAgICAgICAgbGFiZWwuc3R5bGUuY29sb3IgPSBcInZhcigtLXRleHQtbXV0ZWQpXCI7XG4gICAgICAgIGxhYmVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiNnB4XCI7XG5cbiAgICAgICAgY29uc3QgbGluayA9IHNlY3Rpb24uY3JlYXRlRWwoXCJhXCIpO1xuICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gdGhpcy5yZXBvcnRGaWxlUGF0aDtcbiAgICAgICAgbGluay5zdHlsZS5jb2xvciA9IFwidmFyKC0tdGV4dC1hY2NlbnQpXCI7XG4gICAgICAgIGxpbmsuc3R5bGUudGV4dERlY29yYXRpb24gPSBcIm5vbmVcIjtcbiAgICAgICAgbGluay5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLm9wZW5SZXBvcnQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgIGxpbmsuc3R5bGUudGV4dERlY29yYXRpb24gPSBcInVuZGVybGluZVwiO1xuICAgICAgICB9KTtcbiAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgbGluay5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IFwibm9uZVwiO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgcHJpdmF0ZSBjcmVhdGVBY3Rpb25CdXR0b25zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdignYWN0aW9uLWJ1dHRvbnMnKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LWVuZFwiO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gXCIxMHB4XCI7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSBcIjIwcHhcIjtcblxuICAgICAgICAvLyBWaWV3IFJlcG9ydCBidXR0b25cbiAgICAgICAgY29uc3Qgdmlld1JlcG9ydEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiVmlldyBSZXBvcnRcIiB9KTtcbiAgICAgICAgdmlld1JlcG9ydEJ0bi5zdHlsZS5wYWRkaW5nID0gXCI4cHggMTZweFwiO1xuICAgICAgICB2aWV3UmVwb3J0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vcGVuUmVwb3J0KCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE9LIGJ1dHRvblxuICAgICAgICBjb25zdCBva0J0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiT0tcIiB9KTtcbiAgICAgICAgb2tCdG4uY2xhc3NMaXN0LmFkZCgnbW9kLWN0YScpO1xuICAgICAgICBva0J0bi5zdHlsZS5wYWRkaW5nID0gXCI4cHggMTZweFwiO1xuICAgICAgICBva0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvcGVuUmVwb3J0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnJlcG9ydEZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpLm9wZW5GaWxlKGZpbGUgYXMgYW55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBvcGVuIHJlcG9ydDpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRDdXN0b21TdHlsZXMoKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBgXG4gICAgICAgICAgICAvKiBNb2RhbCBzaXppbmcgKi9cbiAgICAgICAgICAgIC5tb2RhbC5uZXh1cy1pbXBvcnQtY29tcGxldGlvbi1kaWFsb2cge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogbWluKDcwMHB4LCA5MHZ3KSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIHdpZHRoOiBtaW4oNzAwcHgsIDkwdncpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIE1vZGFsIHRpdGxlIHNwYWNpbmcgKi9cbiAgICAgICAgICAgIC5tb2RhbC5uZXh1cy1pbXBvcnQtY29tcGxldGlvbi1kaWFsb2cgLm1vZGFsLXRpdGxlIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNnB4IDI0cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLm1vZGFsLm5leHVzLWltcG9ydC1jb21wbGV0aW9uLWRpYWxvZyAubW9kYWwtY29udGVudCB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMjBweCAyNHB4IDI0cHggMjRweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogU3RhdCBjYXJ0b3VjaGVzIGhvdmVyIGVmZmVjdCAqL1xuICAgICAgICAgICAgLm5leHVzLWltcG9ydC1jb21wbGV0aW9uLWRpYWxvZyAuc3RhdC1jYXJ0b3VjaGUge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzLCBib3gtc2hhZG93IDAuMnM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1pbXBvcnQtY29tcGxldGlvbi1kaWFsb2cgLnN0YXQtY2FydG91Y2hlOmhvdmVyIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIEJ1dHRvbiBob3ZlciBlZmZlY3RzICovXG4gICAgICAgICAgICAubmV4dXMtaW1wb3J0LWNvbXBsZXRpb24tZGlhbG9nIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5uZXh1cy1pbXBvcnQtY29tcGxldGlvbi1kaWFsb2cgYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFzQmEsa0JBZ0NBLFFBUUE7QUE5RGI7QUFBQTtBQUFBO0FBc0JPLElBQU0sbUJBQW1DO0FBQUE7QUFBQTtBQUFBO0FBQUEsTUFJNUMsb0JBQW9CO0FBQUEsTUFDcEIsY0FBYztBQUFBLE1BQ2Qsa0JBQWtCO0FBQUE7QUFBQTtBQUFBO0FBQUEsTUFLbEIsZUFBZTtBQUFBLE1BQ2YsWUFBWTtBQUFBO0FBQUEsTUFHWixpQ0FBaUM7QUFBQSxNQUNqQyx3QkFBd0I7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQUt4QiwwQkFBMEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQUsxQix1QkFBdUI7QUFBQSxNQUN2QixxQkFBcUI7QUFBQSxNQUNyQixnQkFBZ0I7QUFBQSxNQUNoQixpQkFBaUI7QUFBQSxJQUNyQjtB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UUFBTyxJQUFFQSxHQUFFLE1BQUssSUFBRUEsR0FBRSxNQUFLLElBQUVBLEdBQUUsU0FBUSxJQUFFQSxHQUFFLFVBQVMsS0FBRyxLQUFHQSxHQUFFLFdBQVMsR0FBRSxLQUFHLEtBQUdBLEdBQUUsWUFBVTtBQUFFO0FBQUUsZUFBRTtBQUFDLGtCQUFFLE9BQUssS0FBRyxFQUFFLEdBQUcsS0FBRyxHQUFFLEtBQUcsR0FBRSxLQUFHLEVBQUUsR0FBRyxLQUFHLEdBQUUsS0FBRyxJQUFHLElBQUUsRUFBRSxJQUFFLENBQUM7QUFBRTtBQUFFLDJCQUFPO0FBQUMsc0JBQUcsT0FBSyxJQUFFLE1BQUksSUFBRyxLQUFHLEdBQUUsT0FBSyxJQUFFLE1BQUksS0FBRztBQUFLLHNCQUFFLEdBQUcsSUFBRSxRQUFNO0FBQUEsdUJBQU07QUFBQyx3QkFBRyxFQUFFLEtBQUcsSUFBRztBQUFDLDBCQUFHLE1BQUksS0FBRyxJQUFHO0FBQUMsNEJBQUUsR0FBRyxRQUFNLE1BQUksS0FBRyxLQUFHLEtBQUcsRUFBRTtBQUFFLGlDQUFTO0FBQUEsc0JBQUM7QUFBQywwQkFBRyxLQUFHLEdBQUU7QUFBQyx3QkFBQUEsR0FBRSxPQUFLO0FBQUcsOEJBQU07QUFBQSxzQkFBQztBQUFDLHNCQUFBRixHQUFFLE1BQUksK0JBQThCRSxHQUFFLE9BQUs7QUFBRyw0QkFBTTtBQUFBLG9CQUFDO0FBQUMsd0JBQUUsUUFBTSxJQUFHLEtBQUcsUUFBTSxJQUFFLE1BQUksS0FBRyxFQUFFLEdBQUcsS0FBRyxHQUFFLEtBQUcsSUFBRyxLQUFHLEtBQUcsS0FBRyxLQUFHLEdBQUUsT0FBSyxHQUFFLEtBQUcsSUFBRyxJQUFFLE9BQUssS0FBRyxFQUFFLEdBQUcsS0FBRyxHQUFFLEtBQUcsR0FBRSxLQUFHLEVBQUUsR0FBRyxLQUFHLEdBQUUsS0FBRyxJQUFHLElBQUUsRUFBRSxJQUFFLENBQUM7QUFBRTtBQUFFLGlDQUFPO0FBQUMsNEJBQUcsT0FBSyxJQUFFLE1BQUksSUFBRyxLQUFHLEdBQUUsRUFBRSxNQUFJLElBQUUsTUFBSSxLQUFH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RSxHQUFFLE9BQUssR0FBRUEsR0FBRSxPQUFLO0FBQUEsUUFBQztBQUFBLE1BQUMsR0FBRSxDQUFDLENBQUMsR0FBRSxJQUFHLENBQUMsU0FBUyxHQUFFLEdBQUUsR0FBRTtBQUFDO0FBQWEsWUFBSSxJQUFFLEVBQUUsaUJBQWlCLEdBQUUsSUFBRSxFQUFFLFdBQVcsR0FBRSxJQUFFLEVBQUUsU0FBUyxHQUFFLElBQUUsRUFBRSxXQUFXLEdBQUUsSUFBRSxFQUFFLFlBQVksR0FBRSxJQUFFLEdBQUUsSUFBRSxHQUFFLElBQUUsR0FBRSxJQUFFLElBQUcsSUFBRSxHQUFFLElBQUUsS0FBSSxJQUFFO0FBQUksaUJBQVMsRUFBRUYsSUFBRTtBQUFDLGtCQUFPQSxPQUFJLEtBQUcsUUFBTUEsT0FBSSxJQUFFLFdBQVMsUUFBTUEsT0FBSSxPQUFLLE1BQUlBLE9BQUk7QUFBQSxRQUFHO0FBQWxFO0FBQW1FLGlCQUFTLElBQUc7QUFBQyxlQUFLLE9BQUssR0FBRSxLQUFLLE9BQUssT0FBRyxLQUFLLE9BQUssR0FBRSxLQUFLLFdBQVMsT0FBRyxLQUFLLFFBQU0sR0FBRSxLQUFLLE9BQUssR0FBRSxLQUFLLFFBQU0sR0FBRSxLQUFLLFFBQU0sR0FBRSxLQUFLLE9BQUssTUFBSyxLQUFLLFFBQU0sR0FBRSxLQUFLLFFBQU0sR0FBRSxLQUFLLFFBQU0sR0FBRSxLQUFLLFFBQU0sR0FBRSxLQUFLLFNBQU8sTUFBSyxLQUFLLE9BQUssR0FBRSxLQUFLLE9BQUssR0FBRSxLQUFLLFNBQU8sR0FBRSxLQUFLLFNBQU8sR0FBRSxLQUFLLFFBQU0sR0FBRSxLQUFLLFVBQVEsTUFBSyxLQUFLLFdBQVMsTUFBSyxLQUFLLFVBQVEsR0FBRSxLQUFLLFdBQVMsR0FBRSxLQUFLLFFBQU0sR0FBRSxLQUFLLE9BQUssR0FBRSxLQUFLLFFBQU0sR0FBRSxLQUFLLE9BQUssR0FBRSxLQUFLLE9BQUssTUFBSyxLQUFLLE9BQUssSUFBSSxFQUFFLE1BQU0sR0FBRyxHQUFFLEtBQUssT0FBSyxJQUFJLEVBQUUsTUFBTSxHQUFHLEdBQUUs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LElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxFQUFFLEdBQUUsSUFBRSxDQUFDLEdBQUUsR0FBRSxHQUFFLEdBQUUsR0FBRSxHQUFFLEdBQUUsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxLQUFJLEtBQUksS0FBSSxLQUFJLEtBQUksS0FBSSxNQUFLLE1BQUssTUFBSyxNQUFLLE1BQUssTUFBSyxNQUFLLE9BQU0sT0FBTSxPQUFNLEdBQUUsQ0FBQyxHQUFFLElBQUUsQ0FBQyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLElBQUcsSUFBRyxJQUFHLEVBQUU7QUFBRSxVQUFFLFVBQVEsU0FBU0YsSUFBRUMsSUFBRUMsSUFBRSxHQUFFLEdBQUUsR0FBRSxHQUFFLEdBQUU7QUFBQyxjQUFJLEdBQUUsR0FBRSxHQUFFLEdBQUUsR0FBRSxHQUFFLEdBQUUsR0FBRSxHQUFFLElBQUUsRUFBRSxNQUFLLElBQUUsR0FBRSxJQUFFLEdBQUUsSUFBRSxHQUFFLElBQUUsR0FBRSxJQUFFLEdBQUUsSUFBRSxHQUFFLElBQUUsR0FBRSxJQUFFLEdBQUUsSUFBRSxHQUFFLElBQUUsR0FBRSxJQUFFLE1BQUssSUFBRSxHQUFFLElBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxHQUFFLElBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxHQUFFLElBQUUsTUFBSyxJQUFFO0FBQUUsZUFBSSxJQUFFLEdBQUUsS0FBRyxJQUFHO0FBQUksY0FBRSxDQUFDLElBQUU7QUFBRSxlQUFJLElBQUUsR0FBRSxJQUFFLEdBQUU7QUFBSSxjQUFFRCxHQUFFQyxLQUFFLENBQUMsQ0FBQztBQUFJLGVBQUksSUFBRSxHQUFFLElBQUUsSUFBRyxLQUFHLEtBQUcsTUFBSSxFQUFFLENBQUMsR0FBRTtBQUFJO0FBQUMsY0FBRyxJQUFFLE1BQUksSUFBRSxJQUFHLE1BQUk7QUFBRSxtQkFBTyxFQUFFLEdBQUcsSUFBRSxVQUFTLEVBQUUsR0FBRyxJQUFFLFVBQVMsRUFBRSxPQUFLLEdBQUU7QUFBRSxlQUFJLElBQUUsR0FBRSxJQUFFLEtBQUcsTUFBSSxFQUFFLENBQUMsR0FBRTtBQUFJO0FBQUMsZUFBSSxJQUFFLE1BQUksSUFBRSxJQUFHLElBQUUsSUFBRSxHQUFFLEtBQUcsSUFBRztBQUFJLGdCQUFHLE1BQUksSUFBRyxLQUFHLEVBQUUsQ0FBQyxLQUFHO0FBQUUscUJBQU07QUFBRyxjQUFHLElBQUUsTUFBSSxNQUFJRixNQUFHLE1BQUk7QUFBRyxtQkFBTTtBQUFHLGVBQUksRUFBRSxDQUFDLElBQUUsR0FBRSxJQUFFLEdBQUUsSUFBRSxJQUFHO0FBQUksY0FBRSxJQUFFLENBQUMsSUFBRSxFQUFFLENBQUMsSUFBRSxFQUFFLENBQUM7QUFBRSxlQUFJLElBQUUsR0FBRSxJQUFFLEdBQUU7QUFBSSxrQkFBSUMsR0FBRUMsS0FBRSxDQUFDLE1BQUksRUFBRSxFQUFFRCxHQUFFQyxLQUFFLENBQUMsQ0FBQyxHQUFHLElBQUU7QUFBRyxjQUFHLElBQUUsTUFBSUYsTUFBRyxJQUFFLElBQUUsR0FBRSxNQUFJLE1BQUlBLE1BQUcsSUFBRSxHQUFFLEtBQUcsS0FBSSxJQUFFLEdBQUUsS0FBRyxLQUFJLFFBQU0sSUFBRSxHQUFFLElBQUUsR0FBRSxLQUFJLElBQUUsR0FBRSxJQUFFLEdBQUUsSUFBRSxJQUFFLElBQUUsR0FBRSxJQUFFLElBQUcsS0FBRyxJQUFFLE1BQUksSUFBRSxNQUFJLEdBQUUsTUFBSUEsTUFBRyxNQUFJLEtBQUcsTUFBSUEsTUFBRyxNQUFJO0FBQUUsbUJBQU87QUFBRSxxQkFBTztBQUFDLGlCQUFJLElBQUUsSUFBRSxHQUFFLElBQUUsRUFBRSxDQUFDLElB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QUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTROcEIsYUFBUyxLQUFLLFlBQVksS0FBSztBQUFBLEVBQ25DO0FBQUEsRUFFQSxVQUFVO0FBQ04sVUFBTSxFQUFFLFVBQVUsSUFBSTtBQUN0QixjQUFVLE1BQU07QUFBQSxFQUNwQjtBQUNKO0FBOTFCYTs7O0FDOUJiLElBQUFDLG9CQUEyQjtBQUMzQjtBQUtPLElBQU0sNEJBQU4sY0FBd0Msd0JBQU07QUFBQSxFQUdqRCxZQUFZLEtBQVUsU0FBaUI7QUFDbkMsVUFBTSxHQUFHO0FBQ1QsU0FBSyxVQUFVO0FBQUEsRUFDbkI7QUFBQSxFQUVBLFNBQVM7QUFDTCxVQUFNLEVBQUUsV0FBVyxTQUFTLFFBQVEsSUFBSTtBQUN4QyxjQUFVLE1BQU07QUFHaEIsWUFBUSxTQUFTLG1DQUFtQztBQUNwRCxjQUFVLFNBQVMsbUNBQW1DO0FBR3RELFlBQVEsTUFBTSxRQUFRO0FBQ3RCLFlBQVEsTUFBTSxXQUFXO0FBR3pCLFlBQVEsUUFBUSwwQkFBMEIsS0FBSyxTQUFTO0FBR3hELFVBQU0saUJBQWlCLFVBQVUsVUFBVSxpQkFBaUI7QUFDNUQsbUJBQWUsTUFBTSxVQUFVO0FBQUE7QUFBQTtBQUFBO0FBSy9CLFVBQU0sY0FBYyxlQUFlLFVBQVU7QUFDN0MsZ0JBQVksWUFBWTtBQUN4QixnQkFBWSxNQUFNLFVBQVU7QUFBQTtBQUFBO0FBQUE7QUFLNUIsVUFBTSxlQUFlLGVBQWUsU0FBUyxJQUFJO0FBQ2pELGlCQUFhLGNBQWM7QUFDM0IsaUJBQWEsTUFBTSxVQUFVO0FBQUE7QUFBQTtBQUFBO0FBSzdCLFVBQU0sY0FBYyxlQUFlLFVBQVU7QUFDN0MsZ0JBQVksY0FBYztBQUMxQixnQkFBWSxNQUFNLFVBQVU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU81Qix5QkFBcUIsU0FBUztBQUc5QixVQUFNLG1CQUFtQixVQUFVLFVBQVUsbUJBQW1CO0FBQ2hFLHFCQUFpQixNQUFNLFVBQVU7QUFBQTtBQUFBO0FBSWpDLFVBQU0saUJBQWlCLGlCQUFpQixTQUFTLElBQUk7QUFDckQsbUJBQWUsY0FBYztBQUM3QixtQkFBZSxNQUFNLFVBQVU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU8vQixVQUFNLGdCQUFnQixpQkFBaUIsVUFBVSxnQkFBZ0I7QUFDakUsa0JBQWMsTUFBTSxVQUFVO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVE5QixVQUFNLFlBQVk7QUFBQSxNQUNkO0FBQUEsUUFDSSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxhQUFhO0FBQUEsUUFDYixLQUFLO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNJLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLGFBQWE7QUFBQSxRQUNiLEtBQUs7QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0ksTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsYUFBYTtBQUFBLFFBQ2IsS0FBSztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDSSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxhQUFhO0FBQUEsUUFDYixLQUFLO0FBQUEsTUFDVDtBQUFBLElBQ0o7QUFFQSxjQUFVLFFBQVEsY0FBWTtBQUMxQixZQUFNLE9BQU8sS0FBSyxtQkFBbUIsZUFBZSxRQUFRO0FBQzVELG9CQUFjLFlBQVksSUFBSTtBQUFBLElBQ2xDLENBQUM7QUFHRCxVQUFNLGtCQUFrQixVQUFVLFVBQVUsa0JBQWtCO0FBQzlELG9CQUFnQixNQUFNLFVBQVU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1oQyxVQUFNLGNBQWMsZ0JBQWdCLFNBQVMsVUFBVTtBQUFBLE1BQ25ELE1BQU07QUFBQSxJQUNWLENBQUM7QUFDRCxnQkFBWSxTQUFTLFNBQVM7QUFDOUIsZ0JBQVksTUFBTSxVQUFVO0FBQUE7QUFBQTtBQUFBO0FBSzVCLGdCQUFZLGlCQUFpQixTQUFTLE1BQU07QUFDeEMsV0FBSyxNQUFNO0FBQUEsSUFDZixDQUFDO0FBQUEsRUFDTDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsbUJBQW1CLFdBQXdCLFVBS25DO0FBQ1osVUFBTSxPQUFPLFVBQVUsU0FBUyxLQUFLO0FBQUEsTUFDakMsTUFBTSxTQUFTO0FBQUEsSUFDbkIsQ0FBQztBQUNELFNBQUssTUFBTSxVQUFVO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBWXJCLFNBQUssaUJBQWlCLGNBQWMsTUFBTTtBQUN0QyxXQUFLLE1BQU0sY0FBYztBQUN6QixXQUFLLE1BQU0sWUFBWTtBQUN2QixXQUFLLE1BQU0sWUFBWTtBQUFBLElBQzNCLENBQUM7QUFFRCxTQUFLLGlCQUFpQixjQUFjLE1BQU07QUFDdEMsV0FBSyxNQUFNLGNBQWM7QUFDekIsV0FBSyxNQUFNLFlBQVk7QUFDdkIsV0FBSyxNQUFNLFlBQVk7QUFBQSxJQUMzQixDQUFDO0FBR0QsVUFBTSxPQUFPLEtBQUssVUFBVTtBQUM1QixTQUFLLFlBQVksU0FBUztBQUMxQixTQUFLLE1BQU0sVUFBVTtBQUFBO0FBQUE7QUFBQTtBQU1yQixVQUFNLFFBQVEsS0FBSyxVQUFVO0FBQzdCLFVBQU0sY0FBYyxTQUFTO0FBQzdCLFVBQU0sTUFBTSxVQUFVO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFPdEIsVUFBTSxjQUFjLEtBQUssVUFBVTtBQUNuQyxnQkFBWSxjQUFjLFNBQVM7QUFDbkMsZ0JBQVksTUFBTSxVQUFVO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFPNUIsU0FBSyxpQkFBaUIsU0FBUyxDQUFDLE1BQU07QUFDbEMsUUFBRSxlQUFlO0FBQ2pCLGFBQU8sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLElBQ3RDLENBQUM7QUFFRCxXQUFPO0FBQUEsRUFDWDtBQUFBLEVBRUEsVUFBVTtBQUNOLFVBQU0sRUFBRSxVQUFVLElBQUk7QUFDdEIsY0FBVSxNQUFNO0FBQUEsRUFDcEI7QUFDSjtBQWhOYTs7O0FDa0JiO0FBeUVPLElBQU0sZ0NBQU4sTUFBb0M7QUFBQSxFQUN2QyxZQUNZLGtCQUNBLFFBQ1Y7QUFGVTtBQUNBO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0gsTUFBTSx1QkFDRixLQUNBLGdCQUNBLGdCQUNBLGlCQUNBLHVCQUMrQjtBQUMvQixRQUFJO0FBRUEsWUFBTSxtQkFBbUIsTUFBTSxLQUFLLCtCQUErQixHQUFHO0FBRXRFLFVBQUksaUJBQWlCLFdBQVcsR0FBRztBQUMvQixlQUFPLENBQUM7QUFBQSxNQUNaO0FBR0EsWUFBTSxXQUFXLGtCQUFrQixLQUFLLGlCQUFpQixlQUFlLGdCQUFnQjtBQUV4RixVQUFJLGFBQWEsV0FBVztBQUN4QixjQUFNLElBQUksTUFBTSw0REFBNEQ7QUFBQSxNQUNoRjtBQUdBLFlBQU0sV0FBVyxLQUFLLDBCQUEwQixrQkFBa0IsUUFBUTtBQUcxRSxhQUFPLFNBQVMsSUFBSSxVQUFRO0FBQ3hCLGNBQU0sV0FBaUM7QUFBQSxVQUNuQyxHQUFHO0FBQUEsVUFDSCxZQUFZO0FBQUEsVUFDWjtBQUFBLFFBQ0o7QUFHQSxZQUFJLHVCQUF1QjtBQUN2QixnQkFBTSxXQUFXLHNCQUFzQixJQUFJLEtBQUssRUFBRTtBQUNsRCxjQUFJLFVBQVU7QUFDVixxQkFBUyxxQkFBcUIsU0FBUztBQUV2QyxrQkFBTSxhQUFhLGlDQUFpQyxLQUFLLFlBQVksU0FBUyxVQUFVO0FBQ3hGLGdCQUFJLGFBQWEsR0FBRztBQUNoQix1QkFBUyxrQkFBa0I7QUFDM0IsdUJBQVMsa0JBQWtCO0FBQUEsWUFDL0IsT0FBTztBQUNILHVCQUFTLGtCQUFrQjtBQUMzQix1QkFBUyxrQkFBa0I7QUFBQSxZQUMvQjtBQUFBLFVBQ0osT0FBTztBQUNILHFCQUFTLGtCQUFrQjtBQUMzQixxQkFBUyxrQkFBa0I7QUFBQSxVQUMvQjtBQUFBLFFBQ0osT0FBTztBQUNILG1CQUFTLGtCQUFrQjtBQUFBLFFBQy9CO0FBRUEsZUFBTztBQUFBLE1BQ1gsQ0FBQztBQUFBLElBQ0wsU0FBUyxPQUFQO0FBQ0UsWUFBTSxJQUFJLE1BQU0sNENBQTRDLGlCQUFpQixRQUFRLE1BQU0sVUFBVSxPQUFPLEtBQUssR0FBRztBQUFBLElBQ3hIO0FBQUEsRUFDSjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBYywrQkFBK0IsS0FBNEI7QUFDckUsVUFBTSxvQkFBb0IsSUFBSSxLQUFLLG9CQUFvQjtBQUN2RCxRQUFJLENBQUMsbUJBQW1CO0FBQ3BCLFlBQU0sSUFBSSxNQUFNLGdEQUFnRDtBQUFBLElBQ3BFO0FBRUEsVUFBTSxvQkFBb0IsTUFBTSxrQkFBa0IsTUFBTSxRQUFRO0FBQ2hFLFVBQU0sYUFBYSxLQUFLLE1BQU0saUJBQWlCO0FBRy9DLFFBQUksTUFBTSxRQUFRLFVBQVUsR0FBRztBQUUzQixhQUFPO0FBQUEsSUFDWCxXQUFXLFdBQVcsaUJBQWlCLE1BQU0sUUFBUSxXQUFXLGFBQWEsR0FBRztBQUU1RSxhQUFPLFdBQVc7QUFBQSxJQUN0QixPQUFPO0FBQ0gsWUFBTSxJQUFJLE1BQU0sc0NBQXNDO0FBQUEsSUFDMUQ7QUFBQSxFQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSwwQkFBMEIsa0JBQXlCLFVBQTBDO0FBQ2pHLFlBQVEsVUFBVTtBQUFBLE1BQ2QsS0FBSztBQUNELGVBQU8sS0FBSyx1QkFBdUIsZ0JBQWdCO0FBQUEsTUFDdkQsS0FBSztBQUNELGVBQU8sS0FBSyxzQkFBc0IsZ0JBQWdCO0FBQUEsTUFDdEQ7QUFDSSxjQUFNLElBQUksTUFBTSx5QkFBeUIsVUFBVTtBQUFBLElBQzNEO0FBQUEsRUFDSjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsdUJBQXVCLGVBQStDO0FBQzFFLFdBQU8sY0FDRixPQUFPLFVBQVE7QUFFWixVQUFJLENBQUMsS0FBSyxNQUFNLEtBQUssR0FBRyxLQUFLLE1BQU0sSUFBSTtBQUNuQyxlQUFPLEtBQUssa0RBQWtELEtBQUssU0FBUyxVQUFVO0FBQ3RGLGVBQU87QUFBQSxNQUNYO0FBQ0EsVUFBSSxDQUFDLEtBQUssZUFBZSxDQUFDLEtBQUssYUFBYTtBQUN4QyxlQUFPLEtBQUssMERBQTBELEtBQUssSUFBSSxLQUFLLFNBQVMsVUFBVTtBQUN2RyxlQUFPO0FBQUEsTUFDWDtBQUNBLGFBQU87QUFBQSxJQUNYLENBQUMsRUFDQSxJQUFJLFdBQVM7QUFBQSxNQUNWLElBQUksS0FBSztBQUFBLE1BQ1QsT0FBTyxLQUFLLFNBQVM7QUFBQSxNQUNyQixZQUFZLEtBQUs7QUFBQSxNQUNqQixZQUFZLEtBQUs7QUFBQSxNQUNqQixjQUFjLEtBQUsscUJBQXFCLElBQUk7QUFBQSxNQUM1QyxVQUFVO0FBQUEsTUFDVixXQUFXLEtBQUssY0FBYztBQUFBLE1BQzlCLFlBQVksS0FBSyxlQUFlO0FBQUEsSUFDcEMsRUFBRSxFQUNELE9BQU8sY0FBWTtBQUVoQixVQUFJLFNBQVMsaUJBQWlCLEdBQUc7QUFDN0IsZUFBTztBQUFBLE1BQ1g7QUFDQSxhQUFPO0FBQUEsSUFDWCxDQUFDO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1Esc0JBQXNCLGVBQTZEO0FBQ3ZGLFdBQU8sY0FDRixPQUFPLFVBQVE7QUFFWixVQUFJLENBQUMsS0FBSyxRQUFRLEtBQUssS0FBSyxLQUFLLE1BQU0sSUFBSTtBQUN2QyxlQUFPLEtBQUssbURBQW1ELEtBQUssUUFBUSxVQUFVO0FBQ3RGLGVBQU87QUFBQSxNQUNYO0FBQ0EsVUFBSSxDQUFDLEtBQUssY0FBYyxDQUFDLEtBQUssWUFBWTtBQUN0QyxlQUFPLEtBQUsseURBQXlELEtBQUssTUFBTSxLQUFLLFFBQVEsVUFBVTtBQUN2RyxlQUFPO0FBQUEsTUFDWDtBQUNBLGFBQU87QUFBQSxJQUNYLENBQUMsRUFDQSxJQUFJLFdBQVM7QUFBQSxNQUNWLElBQUksS0FBSztBQUFBLE1BQ1QsT0FBTyxLQUFLLFFBQVE7QUFBQSxNQUNwQixZQUFZLEtBQUssTUFBTSxJQUFJLEtBQUssS0FBSyxVQUFVLEVBQUUsUUFBUSxJQUFJLEdBQUk7QUFBQSxNQUNqRSxZQUFZLEtBQUssTUFBTSxJQUFJLEtBQUssS0FBSyxVQUFVLEVBQUUsUUFBUSxJQUFJLEdBQUk7QUFBQSxNQUNqRSxjQUFjLEtBQUssb0JBQW9CLElBQUk7QUFBQSxNQUMzQyxVQUFVO0FBQUEsTUFDVixXQUFXLEtBQUssY0FBYztBQUFBLE1BQzlCLFlBQVk7QUFBQTtBQUFBLElBQ2hCLEVBQUUsRUFDRCxPQUFPLGNBQVk7QUFFaEIsVUFBSSxTQUFTLGlCQUFpQixHQUFHO0FBQzdCLGVBQU87QUFBQSxNQUNYO0FBQ0EsYUFBTztBQUFBLElBQ1gsQ0FBQztBQUFBLEVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLHFCQUFxQixNQUFvQjtBQUM3QyxRQUFJLENBQUMsS0FBSyxTQUFTO0FBQ2YsYUFBTztBQUFBLElBQ1g7QUFFQSxRQUFJLFFBQVE7QUFDWixlQUFXLGNBQWMsT0FBTyxPQUFPLEtBQUssT0FBTyxHQUFHO0FBQ2xELFlBQU0sVUFBVSx5Q0FBWTtBQUM1QixVQUFJLENBQUM7QUFBUztBQUdkLFVBQUksS0FBSyw0QkFBNEIsT0FBTyxHQUFHO0FBQzNDO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFFQSxXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1Esb0JBQW9CLE1BQWtDO0FBQzFELFFBQUksQ0FBQyxLQUFLLGlCQUFpQixDQUFDLE1BQU0sUUFBUSxLQUFLLGFBQWEsR0FBRztBQUMzRCxhQUFPO0FBQUEsSUFDWDtBQUVBLFFBQUksUUFBUTtBQUNaLGVBQVcsV0FBVyxLQUFLLGVBQWU7QUFDdEMsVUFBSSxLQUFLLDJCQUEyQixPQUFPLEdBQUc7QUFDMUM7QUFBQSxNQUNKO0FBQUEsSUFDSjtBQUVBLFdBQU87QUFBQSxFQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSw0QkFBNEIsU0FBdUI7QUFqVS9EO0FBa1VRLFFBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxRQUFRO0FBQzdCLGFBQU87QUFBQSxJQUNYO0FBR0EsUUFBSSxRQUFRLE9BQU8sU0FBUyxZQUFZLFFBQVEsT0FBTyxTQUFTLFFBQVE7QUFDcEUsYUFBTztBQUFBLElBQ1g7QUFHQSxVQUFJLGFBQVEsYUFBUixtQkFBa0IsMENBQXlDLE1BQU07QUFDakUsYUFBTztBQUFBLElBQ1g7QUFHQSxXQUFPLGVBQWUsT0FBTztBQUFBLEVBQ2pDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSwyQkFBMkIsU0FBdUI7QUFDdEQsUUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLFFBQVEsQ0FBQyxRQUFRLFFBQVE7QUFDOUMsYUFBTztBQUFBLElBQ1g7QUFHQSxXQUFPLFFBQVEsV0FBVyxXQUFXLFFBQVEsV0FBVztBQUFBLEVBQzVEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBVUEsTUFBTSxnQ0FDRixPQUNBLGdCQUNBLHVCQUNpQztBQUVqQyxVQUFNLGtCQUFrQixvQkFBSSxJQUFrQztBQUM5RCxVQUFNLHdCQUFnRCxDQUFDO0FBQ3ZELFVBQU0sZUFBZSxvQkFBSSxJQUErQjtBQUd4RCxVQUFNLHdCQUF3QixvQkFBSSxJQUFvQjtBQUV0RCxhQUFTLElBQUksR0FBRyxJQUFJLE1BQU0sUUFBUSxLQUFLO0FBQ25DLFlBQU0sT0FBTyxNQUFNLENBQUM7QUFDcEIsVUFBSTtBQUVBLGNBQU1DLFVBQVMsTUFBTSw0REFBaUI7QUFDdEMsY0FBTSxNQUFNLElBQUlBLE9BQU07QUFDdEIsY0FBTSxhQUFhLE1BQU0sSUFBSSxVQUFVLElBQUk7QUFHM0MsY0FBTSxXQUFXLE1BQU0sS0FBSztBQUFBLFVBQ3hCO0FBQUEsVUFDQTtBQUFBLFVBQ0EsS0FBSztBQUFBLFVBQ0w7QUFBQSxVQUNBO0FBQUE7QUFBQSxRQUNKO0FBR0EsOEJBQXNCLEtBQUssR0FBRyxRQUFRO0FBR3RDLGNBQU0sY0FBYyxTQUFTO0FBQzdCLFlBQUksbUJBQW1CO0FBQ3ZCLFlBQUksaUJBQWlCO0FBR3JCLG1CQUFXLGdCQUFnQixVQUFVO0FBQ2pDLGdCQUFNLFdBQVcsZ0JBQWdCLElBQUksYUFBYSxFQUFFO0FBRXBELGNBQUksQ0FBQyxVQUFVO0FBRVg7QUFDQSw0QkFBZ0IsSUFBSSxhQUFhLElBQUksWUFBWTtBQUNqRCxrQ0FBc0IsSUFBSSxhQUFhLElBQUksS0FBSyxJQUFJO0FBQUEsVUFDeEQsT0FBTztBQUVILGdCQUFJLGdCQUFnQjtBQUdwQixrQkFBTSxhQUFhLGlDQUFpQyxhQUFhLFlBQVksU0FBUyxVQUFVO0FBRWhHLGdCQUFJLGFBQWEsR0FBRztBQUVoQiw4QkFBZ0I7QUFBQSxZQUNwQixXQUFXLGVBQWUsR0FBRztBQUV6QixvQkFBTSxtQkFBbUIsYUFBYSxtQkFBbUI7QUFDekQsb0JBQU0sb0JBQW9CLFNBQVMsbUJBQW1CO0FBRXRELGtCQUFJLG1CQUFtQixtQkFBbUI7QUFDdEMsZ0NBQWdCO0FBQUEsY0FDcEI7QUFBQSxZQUNKO0FBRUEsZ0JBQUksZUFBZTtBQUlmLG9CQUFNLGNBQWMsc0JBQXNCLElBQUksYUFBYSxFQUFFO0FBQzdELG9CQUFNLGVBQWUsYUFBYSxJQUFJLFdBQVc7QUFDakQsa0JBQUksY0FBYztBQUNkLDZCQUFhO0FBQ2IsNkJBQWE7QUFBQSxjQUNqQjtBQUdBO0FBR0EsOEJBQWdCLElBQUksYUFBYSxJQUFJLFlBQVk7QUFDakQsb0NBQXNCLElBQUksYUFBYSxJQUFJLEtBQUssSUFBSTtBQUFBLFlBQ3hELE9BQU87QUFFSDtBQUFBLFlBQ0o7QUFBQSxVQUNKO0FBQUEsUUFDSjtBQUdBLHFCQUFhLElBQUksS0FBSyxNQUFNO0FBQUEsVUFDeEIsVUFBVSxLQUFLO0FBQUEsVUFDZixvQkFBb0I7QUFBQSxVQUNwQixZQUFZO0FBQUEsVUFDWixtQkFBbUI7QUFBQSxVQUNuQixtQkFBbUI7QUFBQSxVQUNuQixrQkFBa0I7QUFBQSxVQUNsQixzQkFBc0I7QUFBQSxVQUN0QixzQkFBc0I7QUFBQSxRQUMxQixDQUFDO0FBQUEsTUFDTCxTQUFTLE9BQVA7QUFDRSxlQUFPLE1BQU0sa0NBQWtDLEtBQUssU0FBUyxLQUFLO0FBQUEsTUFFdEU7QUFBQSxJQUNKO0FBR0EsVUFBTSxlQUFlLEtBQUs7QUFBQSxNQUN0QixNQUFNLEtBQUssZ0JBQWdCLE9BQU8sQ0FBQztBQUFBLE1BQ25DO0FBQUEsSUFDSjtBQUdBLGVBQVcsZ0JBQWdCLGFBQWEsZUFBZTtBQUNuRCxZQUFNLFdBQVcsYUFBYTtBQUM5QixVQUFJLFlBQVksYUFBYSxJQUFJLFFBQVEsR0FBRztBQUN4QyxjQUFNLFFBQVEsYUFBYSxJQUFJLFFBQVE7QUFDdkMsY0FBTTtBQUVOLFlBQUksYUFBYSxvQkFBb0IsT0FBTztBQUN4QyxnQkFBTTtBQUFBLFFBQ1YsV0FBVyxhQUFhLG9CQUFvQixXQUFXO0FBQ25ELGdCQUFNO0FBQUEsUUFDVjtBQUFBLE1BQ0o7QUFBQSxJQUNKO0FBR0EsZUFBVyxnQkFBZ0IsYUFBYSxzQkFBc0I7QUFDMUQsWUFBTSxXQUFXLGFBQWE7QUFDOUIsVUFBSSxZQUFZLGFBQWEsSUFBSSxRQUFRLEdBQUc7QUFDeEMsY0FBTSxRQUFRLGFBQWEsSUFBSSxRQUFRO0FBQ3ZDLGNBQU07QUFBQSxNQUNWO0FBQUEsSUFDSjtBQUdBLFVBQU0sZUFBNkI7QUFBQSxNQUMvQix5QkFBeUIsc0JBQXNCO0FBQUEsTUFDL0MseUJBQXlCLGdCQUFnQjtBQUFBLE1BQ3pDLG1CQUFtQixzQkFBc0IsU0FBUyxnQkFBZ0I7QUFBQSxNQUNsRSxrQkFBa0IsTUFBTSxTQUFTO0FBQUEsTUFDakMsa0JBQWtCLGFBQWE7QUFBQSxNQUMvQixzQkFBc0IsYUFBYTtBQUFBLE1BQ25DLHNCQUFzQixhQUFhO0FBQUEsSUFDdkM7QUFFQSxXQUFPO0FBQUEsTUFDSCxlQUFlLGFBQWE7QUFBQSxNQUM1QjtBQUFBLE1BQ0EsV0FBVztBQUFBLElBQ2Y7QUFBQSxFQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1RLHlCQUF5QixlQUErRDtBQUU1RixXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNUSxnQ0FDSixjQUNBLHVCQU9GO0FBQ0UsVUFBTSw0QkFBb0QsQ0FBQztBQUMzRCxVQUFNLHVCQUErQyxDQUFDO0FBQ3RELFFBQUksV0FBVztBQUNmLFFBQUksZUFBZTtBQUNuQixRQUFJLGVBQWU7QUFFbkIsZUFBVyxnQkFBZ0IsY0FBYztBQUNyQyxVQUFJLENBQUMsdUJBQXVCO0FBRXhCLHFCQUFhLGtCQUFrQjtBQUMvQixxQkFBYSxrQkFBa0I7QUFDL0Isa0NBQTBCLEtBQUssWUFBWTtBQUMzQztBQUNBO0FBQUEsTUFDSjtBQUVBLFlBQU0sb0JBQW9CLHNCQUFzQixJQUFJLGFBQWEsRUFBRTtBQUVuRSxVQUFJLENBQUMsbUJBQW1CO0FBRXBCLHFCQUFhLGtCQUFrQjtBQUMvQixxQkFBYSxrQkFBa0I7QUFDL0Isa0NBQTBCLEtBQUssWUFBWTtBQUMzQztBQUFBLE1BQ0osT0FBTztBQUVILHFCQUFhLHFCQUFxQixrQkFBa0I7QUFRcEQsY0FBTSxFQUFFLFFBQUFDLFFBQU8sSUFBSSxRQUFRLFVBQVU7QUFDckMsY0FBTSxtQkFBbUIsSUFBSSxLQUFLLGFBQWEsYUFBYSxHQUFJLEVBQUUsWUFBWTtBQUM5RSxjQUFNLDBCQUEwQkEsUUFBTyxrQkFBa0JBLFFBQU8sVUFBVSxJQUFJLEVBQUUsS0FBSztBQUdyRixjQUFNLGFBQWEsaUNBQWlDLHlCQUF5QixrQkFBa0IsVUFBVTtBQUV6RyxZQUFJLGFBQWEsR0FBRztBQUVoQix1QkFBYSxrQkFBa0I7QUFDL0IsdUJBQWEsa0JBQWtCO0FBQy9CLG9DQUEwQixLQUFLLFlBQVk7QUFDM0M7QUFBQSxRQUNKLE9BQU87QUFHSCx1QkFBYSxrQkFBa0I7QUFDL0IsK0JBQXFCLEtBQUssWUFBWTtBQUN0QztBQUFBLFFBQ0o7QUFBQSxNQUNKO0FBQUEsSUFDSjtBQUVBLFdBQU87QUFBQSxNQUNILGVBQWU7QUFBQSxNQUNmO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLDZCQUNKLGtCQUNBLHFCQUNBLHNCQUNvQjtBQUVwQixXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxxQkFBcUIsS0FBNkI7QUFDcEQsUUFBSTtBQUNBLFlBQU0sbUJBQW1CLE1BQU0sS0FBSywrQkFBK0IsR0FBRztBQUN0RSxhQUFPLGlCQUFpQjtBQUFBLElBQzVCLFNBQVMsT0FBUDtBQUNFLGFBQU87QUFBQSxJQUNYO0FBQUEsRUFDSjtBQUNKO0FBbmhCYTs7O0FDN0ViLElBQUFDLG9CQUEyQjtBQUMzQjtBQWdCTyxJQUFNLHlCQUFOLGNBQXFDLHdCQUFNO0FBQUEsRUFJOUMsWUFDSSxLQUNBLE9BQ0EsZ0JBQ0Y7QUFDRSxVQUFNLEdBQUc7QUFDVCxTQUFLLFFBQVE7QUFDYixTQUFLLGlCQUFpQjtBQUFBLEVBQzFCO0FBQUEsRUFFQSxTQUFTO0FBQ0wsVUFBTSxFQUFFLFdBQVcsU0FBUyxRQUFRLElBQUk7QUFDeEMsY0FBVSxNQUFNO0FBR2hCLFlBQVEsU0FBUyxnQ0FBZ0M7QUFDakQsY0FBVSxTQUFTLGdDQUFnQztBQUduRCxZQUFRLFFBQVEsa0JBQWtCO0FBR2xDLFVBQU0sYUFBYSxVQUFVLFVBQVUsaUJBQWlCO0FBQ3hELGVBQVcsTUFBTSxZQUFZO0FBQzdCLGVBQVcsTUFBTSxlQUFlO0FBQ2hDLGVBQVcsTUFBTSxXQUFXO0FBQzVCLGVBQVcsTUFBTSxRQUFRO0FBQ3pCLGVBQVcsWUFBWTtBQUd2QixTQUFLLG1CQUFtQixTQUFTO0FBR2pDLFFBQUksS0FBSyxNQUFNLG1CQUFtQixHQUFHO0FBQ2pDLFdBQUsseUJBQXlCLFNBQVM7QUFBQSxJQUMzQztBQUdBLFNBQUssb0JBQW9CLFNBQVM7QUFHbEMseUJBQXFCLFNBQVM7QUFHOUIsU0FBSyxvQkFBb0IsU0FBUztBQUdsQyxTQUFLLGdCQUFnQjtBQUFBLEVBQ3pCO0FBQUEsRUFFUSxtQkFBbUIsV0FBd0I7QUFDL0MsVUFBTSxVQUFVLFVBQVUsVUFBVSxlQUFlO0FBQ25ELFlBQVEsTUFBTSxlQUFlO0FBQzdCLFlBQVEsTUFBTSxVQUFVO0FBQ3hCLFlBQVEsTUFBTSxzQkFBc0I7QUFDcEMsWUFBUSxNQUFNLE1BQU07QUFHcEIsU0FBSyxvQkFBb0IsU0FBUyxhQUFNLEtBQUssTUFBTSxXQUFXLFNBQVMsR0FBRyxxQkFBcUI7QUFHL0YsU0FBSyxvQkFBb0IsU0FBUyxhQUFNLEtBQUssTUFBTSxtQkFBbUIsU0FBUyxHQUFHLHNCQUFzQjtBQUd4RyxTQUFLLG9CQUFvQixTQUFTLGFBQU0sS0FBSyxNQUFNLFdBQVcsU0FBUyxHQUFHLGNBQWMsbUJBQW1CO0FBRzNHLFNBQUssb0JBQW9CLFNBQVMsVUFBSyxLQUFLLE1BQU0sUUFBUSxTQUFTLEdBQUcsT0FBTyxvQkFBb0I7QUFHakcsU0FBSyxvQkFBb0IsU0FBUyxhQUFNLEtBQUssTUFBTSxRQUFRLFNBQVMsR0FBRyxXQUFXLHFCQUFxQjtBQUd2RyxTQUFLLG9CQUFvQixTQUFTLGdCQUFNLEtBQUssTUFBTSxRQUFRLFNBQVMsR0FBRyxXQUFXLG1CQUFtQjtBQUdyRyxRQUFJLEtBQUssTUFBTSxTQUFTLEdBQUc7QUFDdkIsV0FBSyxvQkFBb0IsU0FBUyxVQUFLLEtBQUssTUFBTSxPQUFPLFNBQVMsR0FBRyxVQUFVLGtCQUFrQjtBQUFBLElBQ3JHO0FBQUEsRUFDSjtBQUFBLEVBRVEsb0JBQ0osV0FDQSxNQUNBLE9BQ0EsT0FDQSxPQUNGO0FBQ0UsVUFBTSxZQUFZLFVBQVUsVUFBVSxnQkFBZ0I7QUFDdEQsY0FBVSxNQUFNLFlBQVk7QUFDNUIsY0FBVSxNQUFNLFVBQVU7QUFDMUIsY0FBVSxNQUFNLGtCQUFrQjtBQUNsQyxjQUFVLE1BQU0sZUFBZTtBQUMvQixjQUFVLE1BQU0sWUFBWTtBQUU1QixVQUFNLFNBQVMsVUFBVSxVQUFVO0FBQ25DLFdBQU8sY0FBYztBQUNyQixXQUFPLE1BQU0sV0FBVztBQUN4QixXQUFPLE1BQU0sZUFBZTtBQUU1QixVQUFNLFVBQVUsVUFBVSxVQUFVO0FBQ3BDLFlBQVEsY0FBYztBQUN0QixZQUFRLE1BQU0sYUFBYTtBQUMzQixZQUFRLE1BQU0sV0FBVztBQUN6QixZQUFRLE1BQU0sUUFBUSxTQUFTO0FBQy9CLFlBQVEsTUFBTSxlQUFlO0FBRTdCLFVBQU0sVUFBVSxVQUFVLFVBQVU7QUFDcEMsWUFBUSxjQUFjO0FBQ3RCLFlBQVEsTUFBTSxXQUFXO0FBQ3pCLFlBQVEsTUFBTSxRQUFRO0FBQUEsRUFDMUI7QUFBQSxFQUVRLHlCQUF5QixXQUF3QjtBQUNyRCxVQUFNLFVBQVUsVUFBVSxVQUFVLHFCQUFxQjtBQUN6RCxZQUFRLE1BQU0sZUFBZTtBQUM3QixZQUFRLE1BQU0sVUFBVTtBQUN4QixZQUFRLE1BQU0sa0JBQWtCO0FBQ2hDLFlBQVEsTUFBTSxlQUFlO0FBQzdCLFlBQVEsTUFBTSxZQUFZO0FBRTFCLFVBQU0sYUFBYSxLQUFLLE1BQU8sS0FBSyxNQUFNLG1CQUFtQixLQUFLLE1BQU0sbUJBQW9CLEdBQUc7QUFFL0YsVUFBTSxPQUFPLGVBQWUsTUFBTSxXQUFNLGFBQWEsS0FBSyxpQkFBTztBQUNqRSxVQUFNLFFBQVEsZUFBZSxNQUFNLHVCQUF1QixhQUFhLEtBQUssd0JBQXdCO0FBRXBHLFVBQU0saUJBQWlCLFFBQVEsVUFBVTtBQUN6QyxtQkFBZSxZQUFZLEdBQUcsc0NBQXNDLEtBQUssTUFBTSxvQkFBb0IsS0FBSyxNQUFNLCtCQUErQjtBQUM3SSxtQkFBZSxNQUFNLFFBQVE7QUFFN0IsUUFBSSxLQUFLLE1BQU0scUJBQXFCLEtBQUssS0FBSyxNQUFNLG9CQUFvQixHQUFHO0FBQ3ZFLFlBQU0sVUFBVSxRQUFRLFVBQVU7QUFDbEMsY0FBUSxNQUFNLFdBQVc7QUFDekIsY0FBUSxNQUFNLFFBQVE7QUFDdEIsY0FBUSxNQUFNLFlBQVk7QUFDMUIsY0FBUSxjQUFjLEdBQUcsS0FBSyxNQUFNLCtCQUErQixLQUFLLE1BQU07QUFBQSxJQUNsRjtBQUFBLEVBQ0o7QUFBQSxFQUVRLG9CQUFvQixXQUF3QjtBQUNoRCxVQUFNLFVBQVUsVUFBVSxVQUFVLGdCQUFnQjtBQUNwRCxZQUFRLE1BQU0sZUFBZTtBQUM3QixZQUFRLE1BQU0sVUFBVTtBQUN4QixZQUFRLE1BQU0sa0JBQWtCO0FBQ2hDLFlBQVEsTUFBTSxlQUFlO0FBRTdCLFVBQU0sUUFBUSxRQUFRLFVBQVU7QUFDaEMsVUFBTSxjQUFjO0FBQ3BCLFVBQU0sTUFBTSxXQUFXO0FBQ3ZCLFVBQU0sTUFBTSxRQUFRO0FBQ3BCLFVBQU0sTUFBTSxlQUFlO0FBRTNCLFVBQU0sT0FBTyxRQUFRLFNBQVMsR0FBRztBQUNqQyxTQUFLLGNBQWMsS0FBSztBQUN4QixTQUFLLE1BQU0sUUFBUTtBQUNuQixTQUFLLE1BQU0saUJBQWlCO0FBQzVCLFNBQUssTUFBTSxTQUFTO0FBQ3BCLFNBQUssaUJBQWlCLFNBQVMsQ0FBQyxNQUFNO0FBQ2xDLFFBQUUsZUFBZTtBQUNqQixXQUFLLFdBQVc7QUFBQSxJQUNwQixDQUFDO0FBQ0QsU0FBSyxpQkFBaUIsY0FBYyxNQUFNO0FBQ3RDLFdBQUssTUFBTSxpQkFBaUI7QUFBQSxJQUNoQyxDQUFDO0FBQ0QsU0FBSyxpQkFBaUIsY0FBYyxNQUFNO0FBQ3RDLFdBQUssTUFBTSxpQkFBaUI7QUFBQSxJQUNoQyxDQUFDO0FBQUEsRUFDTDtBQUFBLEVBSVEsb0JBQW9CLFdBQXdCO0FBQ2hELFVBQU0sa0JBQWtCLFVBQVUsVUFBVSxnQkFBZ0I7QUFDNUQsb0JBQWdCLE1BQU0sVUFBVTtBQUNoQyxvQkFBZ0IsTUFBTSxpQkFBaUI7QUFDdkMsb0JBQWdCLE1BQU0sTUFBTTtBQUM1QixvQkFBZ0IsTUFBTSxZQUFZO0FBR2xDLFVBQU0sZ0JBQWdCLGdCQUFnQixTQUFTLFVBQVUsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUNoRixrQkFBYyxNQUFNLFVBQVU7QUFDOUIsa0JBQWMsaUJBQWlCLFNBQVMsTUFBTTtBQUMxQyxXQUFLLFdBQVc7QUFDaEIsV0FBSyxNQUFNO0FBQUEsSUFDZixDQUFDO0FBR0QsVUFBTSxRQUFRLGdCQUFnQixTQUFTLFVBQVUsRUFBRSxNQUFNLEtBQUssQ0FBQztBQUMvRCxVQUFNLFVBQVUsSUFBSSxTQUFTO0FBQzdCLFVBQU0sTUFBTSxVQUFVO0FBQ3RCLFVBQU0saUJBQWlCLFNBQVMsTUFBTSxLQUFLLE1BQU0sQ0FBQztBQUFBLEVBQ3REO0FBQUEsRUFFQSxNQUFjLGFBQWE7QUFDdkIsUUFBSTtBQUNBLFlBQU0sT0FBTyxLQUFLLElBQUksTUFBTSxzQkFBc0IsS0FBSyxjQUFjO0FBQ3JFLFVBQUksTUFBTTtBQUNOLGNBQU0sS0FBSyxJQUFJLFVBQVUsUUFBUSxLQUFLLEVBQUUsU0FBUyxJQUFXO0FBQUEsTUFDaEU7QUFBQSxJQUNKLFNBQVMsT0FBUDtBQUNFLGFBQU8sTUFBTSwwQkFBMEIsS0FBSztBQUFBLElBQ2hEO0FBQUEsRUFDSjtBQUFBLEVBRVEsa0JBQWtCO0FBQ3RCLFVBQU0sUUFBUSxTQUFTLGNBQWMsT0FBTztBQUM1QyxVQUFNLGNBQWM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXNDcEIsYUFBUyxLQUFLLFlBQVksS0FBSztBQUFBLEVBQ25DO0FBQUEsRUFFQSxVQUFVO0FBQ04sVUFBTSxFQUFFLFVBQVUsSUFBSTtBQUN0QixjQUFVLE1BQU07QUFBQSxFQUNwQjtBQUNKO0FBL1BhOzs7QXhDRWI7QUFFQSxJQUFxQiw0QkFBckIsY0FBdUQseUJBQU87QUFBQSxFQVcxRCxZQUFZLEtBQVUsVUFBMEI7QUFDNUMsVUFBTSxLQUFLLFFBQVE7QUFWdkIsa0JBQWlCLElBQUksT0FBTztBQVl4QixTQUFLLGlCQUFpQixJQUFJLGVBQWUsSUFBSTtBQUM3QyxTQUFLLGdCQUFnQixJQUFJLGNBQWMsSUFBSTtBQUMzQyxTQUFLLGNBQWMsSUFBSSxZQUFZLElBQUk7QUFDdkMsU0FBSyxrQkFBa0IsSUFBSSxnQkFBZ0IsSUFBSTtBQUMvQyxTQUFLLGdCQUFnQixJQUFJLGNBQWMsSUFBSTtBQUMzQyxTQUFLLGlCQUFpQixJQUFJLDBCQUEwQixJQUFJO0FBQUEsRUFDNUQ7QUFBQSxFQUVBLE1BQU0sU0FBUztBQUNYLFFBQUk7QUFDQSxZQUFNLEtBQUssYUFBYTtBQUV4QixXQUFLLGNBQWMsSUFBSSxvQ0FBb0MsS0FBSyxLQUFLLElBQUksQ0FBQztBQUMxRSxXQUFLLGdCQUFnQixpQkFBaUI7QUFDdEMsV0FBSyxjQUFjLGVBQWU7QUFFbEMsWUFBTSxlQUFlLEtBQUs7QUFBQSxRQUN0QjtBQUFBLFFBQ0E7QUFBQSxRQUNBLE1BQU0sS0FBSyw0QkFBNEI7QUFBQSxNQUMzQztBQUNBLG1CQUFhLFNBQVMsc0JBQXNCO0FBRzVDLFlBQU0sZ0JBQWdCLE1BQU0sS0FBSyxlQUFlLHVCQUF1QjtBQUd2RSxVQUFJLCtDQUFlLGdCQUFnQjtBQUMvQixZQUFJLDBCQUEwQixLQUFLLEtBQUssS0FBSyxTQUFTLE9BQU8sRUFBRSxLQUFLO0FBQUEsTUFDeEU7QUFBQSxJQUNKLFNBQVMsT0FBUDtBQUNFLFdBQUssT0FBTyxNQUFNLDBCQUEwQixLQUFLO0FBQ2pELFlBQU07QUFBQSxJQUNWO0FBQUEsRUFDSjtBQUFBLEVBRUEsTUFBTSxXQUFXO0FBQ2IsUUFBSTtBQUNBLFdBQUssY0FBYyxRQUFRO0FBQzNCLFlBQU0sS0FBSyxhQUFhO0FBQUEsSUFDNUIsU0FBUyxPQUFQO0FBQ0UsV0FBSyxPQUFPLE1BQU0sNEJBQTRCLEtBQUs7QUFBQSxJQUN2RDtBQUFBLEVBQ0o7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixRQUFJO0FBQ0EsWUFBTSxPQUFPLE1BQU0sS0FBSyxTQUFTO0FBQ2pDLFdBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLG1CQUFrQiw2QkFBTSxhQUFZLENBQUMsQ0FBQztBQU14RSxZQUFNLGlCQUFpQixLQUFLLFNBQVM7QUFDckMsWUFBTSx1QkFBdUIsS0FBSyxTQUFTO0FBRTNDLFVBQUksQ0FBQyx3QkFBd0IseUJBQXlCLFNBQVM7QUFFM0QsY0FBTSwyQkFBMkIsTUFBTSxLQUFLLDhCQUE4QjtBQUUxRSxZQUFJLDBCQUEwQjtBQUUxQixlQUFLLFNBQVMsa0JBQWtCO0FBQ2hDLGVBQUssU0FBUyxpQkFBaUI7QUFBQSxRQUNuQyxPQUFPO0FBRUgsZUFBSyxTQUFTLGtCQUFrQjtBQUNoQyxlQUFLLFNBQVMsaUJBQWlCO0FBQUEsUUFDbkM7QUFFQSxjQUFNLEtBQUssYUFBYTtBQUFBLE1BRTVCLFdBQVcseUJBQXlCLGdCQUFnQjtBQUVoRCxhQUFLLFNBQVMsa0JBQWtCO0FBQ2hDLGFBQUssU0FBUyxpQkFBaUI7QUFDL0IsY0FBTSxLQUFLLGFBQWE7QUFBQSxNQUM1QjtBQUdBLFlBQU0sS0FBSyxlQUFlLFNBQVM7QUFBQSxJQUV2QyxTQUFTLE9BQVA7QUFDRSxXQUFLLE9BQU8sTUFBTSx3QkFBd0IsS0FBSztBQUMvQyxZQUFNO0FBQUEsSUFDVjtBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQWMsZ0NBQWtEO0FBQzVELFFBQUk7QUFDQSxZQUFNLFFBQVEsS0FBSyxJQUFJLE1BQU0saUJBQWlCO0FBQzlDLGFBQU8sTUFBTSxLQUFLLFVBQVE7QUF0SnRDO0FBdUpnQixjQUFNLGVBQWMsVUFBSyxJQUFJLGNBQWMsYUFBYSxJQUFJLE1BQXhDLG1CQUEyQztBQUMvRCxnQkFBTywyQ0FBYSxXQUFVLEtBQUssU0FBUztBQUFBLE1BQ2hELENBQUM7QUFBQSxJQUNMLFNBQVMsT0FBUDtBQUNFLFdBQUssT0FBTyxLQUFLLDhDQUE4QyxLQUFLO0FBQ3BFLGFBQU87QUFBQSxJQUNYO0FBQUEsRUFDSjtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ2pCLFFBQUk7QUFFQSxZQUFNLGVBQWUsTUFBTSxLQUFLLFNBQVMsS0FBSyxDQUFDO0FBRy9DLFVBQUksd0JBQXdCLEtBQUssZUFBZSxvQkFBb0I7QUFFcEUsVUFBSSxhQUFhLG9CQUFvQixPQUFPLEtBQUssYUFBYSxnQkFBZ0IsRUFBRSxTQUFTLEdBQUc7QUFFeEYsY0FBTSxtQkFBbUIsYUFBYTtBQUN0QyxjQUFNLGtCQUFrQixLQUFLLGVBQWUsb0JBQW9CO0FBR2hFLGdDQUF3QjtBQUFBLFVBQ3BCLEdBQUc7QUFBQSxVQUNILEdBQUc7QUFBQSxRQUNQO0FBQUEsTUFDSjtBQUdBLFlBQU0sYUFBYTtBQUFBLFFBQ2YsR0FBRztBQUFBLFFBQ0gsVUFBVSxLQUFLO0FBQUEsUUFDZixrQkFBa0I7QUFBQSxRQUNsQixnQkFBZ0IsYUFBYSxrQkFBa0I7QUFBQSxVQUMzQyxtQkFBbUIsQ0FBQztBQUFBLFVBQ3BCLHFCQUFxQixDQUFDO0FBQUEsUUFDMUI7QUFBQSxNQUNKO0FBRUEsWUFBTSxLQUFLLGVBQWUsU0FBUyxVQUFVO0FBQUEsSUFDakQsU0FBUyxPQUFQO0FBQ0UsV0FBSyxPQUFPLE1BQU0sd0JBQXdCLEtBQUs7QUFBQSxJQUNuRDtBQUFBLEVBQ0o7QUFBQSxFQUVBLE1BQU0sZ0JBQWdCO0FBQ2xCLFFBQUk7QUFDQSxZQUFNLEtBQUssZUFBZSxjQUFjO0FBQ3hDLFlBQU0sS0FBSyxhQUFhO0FBQUEsSUFDNUIsU0FBUyxPQUFQO0FBQ0UsV0FBSyxPQUFPLE1BQU0seUJBQXlCLEtBQUs7QUFBQSxJQUNwRDtBQUFBLEVBQ0o7QUFBQSxFQUVBLG9CQUFvQztBQUNoQyxXQUFPLEtBQUs7QUFBQSxFQUNoQjtBQUFBLEVBRUEsbUJBQWtDO0FBQzlCLFdBQU8sS0FBSztBQUFBLEVBQ2hCO0FBQUEsRUFFQSxpQkFBOEI7QUFDMUIsV0FBTyxLQUFLO0FBQUEsRUFDaEI7QUFBQSxFQUVBLG9CQUErQztBQUMzQyxXQUFPLEtBQUs7QUFBQSxFQUNoQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxNQUFNLDhCQUE2QztBQUUvQyxVQUFNLGdCQUFnQixNQUFNLEtBQUssZUFBZSx1QkFBdUI7QUFHdkUsUUFBSSxrQkFBa0IsUUFBUSxDQUFDLGNBQWMsU0FBUztBQUVsRDtBQUFBLElBQ0o7QUFLQSxVQUFNLG1CQUFtQix1QkFBdUIsSUFBSTtBQUVwRCxRQUFJO0FBQUEsTUFDQSxLQUFLO0FBQUEsTUFDTDtBQUFBLE1BQ0EsQ0FBQyxxQkFBNkI7QUFDMUIsYUFBSyxnQ0FBZ0MsZ0JBQWdCO0FBQUEsTUFDekQ7QUFBQSxJQUNKLEVBQUUsS0FBSztBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGdDQUFnQyxVQUF3QjtBQUM1RCxRQUFJO0FBQUEsTUFDQSxLQUFLO0FBQUEsTUFDTDtBQUFBLE1BQ0EsQ0FBQyxXQUFnQztBQUM3QixhQUFLLDBCQUEwQixNQUFNO0FBQUEsTUFDekM7QUFBQSxNQUNBO0FBQUEsSUFDSixFQUFFLEtBQUs7QUFBQSxFQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLDBCQUEwQixRQUE0QztBQUNoRixVQUFNLEVBQUUsT0FBTyxNQUFNLFNBQVMsSUFBSTtBQUVsQyxRQUFJLE1BQU0sV0FBVyxHQUFHO0FBQ3BCO0FBQUEsSUFDSjtBQUdBLFVBQU0sY0FBYyxLQUFLLHFCQUFxQixLQUFLO0FBRW5ELFFBQUksU0FBUyxPQUFPO0FBRWhCLFlBQU0sS0FBSyxnQkFBZ0IsYUFBYSxRQUFRO0FBQUEsSUFDcEQsT0FBTztBQUVILFlBQU0sS0FBSyxzQkFBc0IsYUFBYSxRQUFRO0FBQUEsSUFDMUQ7QUFBQSxFQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLGdCQUFnQixPQUFlLFVBQWlDO0FBalNsRjtBQWtTUSxRQUFJO0FBQ0EsVUFBSSx5QkFBTyxnQ0FBZ0MsTUFBTSxtQkFBbUI7QUFHcEUsWUFBTSxtQkFBbUIsdUJBQXVCLElBQUk7QUFDcEQsWUFBTSxvQkFBb0IsSUFBSSw4QkFBOEIsa0JBQWtCLElBQUk7QUFHbEYsWUFBTSxVQUFVLEtBQUssa0JBQWtCO0FBQ3ZDLFlBQU0sd0JBQXdCLE1BQU0sUUFBUSwwQkFBMEI7QUFHdEUsWUFBTSxtQkFBbUIsTUFBTSxrQkFBa0I7QUFBQSxRQUM3QztBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsTUFDSjtBQUdBLFlBQU0sa0JBQWtCLElBQUksYUFBYTtBQUd6QyxVQUFJLEtBQUssU0FBUyxpQ0FBaUM7QUFDL0Msd0JBQWdCLHlCQUF5QixLQUFLLFNBQVMsc0JBQXNCO0FBQUEsTUFDakY7QUFFQSxVQUFJLGlCQUFpQixjQUFjLFdBQVcsR0FBRztBQUU3QyxZQUFJLHlCQUFPLGtGQUFrRjtBQUc3RixjQUFNQyxjQUFhLE1BQU0sS0FBSyx3QkFBd0IsaUJBQWlCLFVBQVUsT0FBTyxpQkFBaUIsY0FBYyxpQkFBaUIsV0FBVyxLQUFLO0FBR3hKLFlBQUlBLGFBQVk7QUFDWixlQUFLLDJCQUEyQixpQkFBaUJBLFdBQVU7QUFBQSxRQUMvRDtBQUNBO0FBQUEsTUFDSjtBQUdBLFlBQU0sU0FBUyxpQkFBaUIsY0FBYyxJQUFJLE9BQUssRUFBRSxFQUFFO0FBRTNELFlBQU0sWUFBVyw0QkFBaUIsaUJBQWpCLG1CQUErQixxQkFBL0IsWUFBbUQ7QUFDcEUsWUFBTSxnQkFBZSw0QkFBaUIsaUJBQWpCLG1CQUErQix5QkFBL0IsWUFBdUQ7QUFDNUUsVUFBSSx5QkFBTyxhQUFhLE9BQU8seUJBQXlCLGlCQUFpQiwwQkFBMEI7QUFHbkcsWUFBTSxzQkFBc0Isb0JBQUksSUFBc0I7QUFDdEQsdUJBQWlCLGNBQWMsUUFBUSxVQUFRO0FBQzNDLFlBQUksS0FBSyxZQUFZO0FBQ2pCLGNBQUksQ0FBQyxvQkFBb0IsSUFBSSxLQUFLLFVBQVUsR0FBRztBQUMzQyxnQ0FBb0IsSUFBSSxLQUFLLFlBQVksQ0FBQyxDQUFDO0FBQUEsVUFDL0M7QUFDQSw4QkFBb0IsSUFBSSxLQUFLLFVBQVUsRUFBRyxLQUFLLEtBQUssRUFBRTtBQUFBLFFBQzFEO0FBQUEsTUFDSixDQUFDO0FBR0QsVUFBSSxhQUFhLGFBQWEsTUFBTSxTQUFTLEdBQUc7QUFDNUMsY0FBTSxLQUFLLGNBQWMsOEJBQThCLEtBQUs7QUFBQSxNQUNoRTtBQUdBLGlCQUFXLFFBQVEsT0FBTztBQUN0QixjQUFNLHVCQUF1QixvQkFBb0IsSUFBSSxLQUFLLElBQUk7QUFDOUQsWUFBSSx3QkFBd0IscUJBQXFCLFNBQVMsR0FBRztBQUN6RCxjQUFJO0FBQ0Esa0JBQU0sS0FBSyxjQUFjLGNBQWMsTUFBTSxVQUFVLHNCQUFzQixlQUFlO0FBQUEsVUFDaEcsU0FBUyxPQUFQO0FBQ0UsaUJBQUssT0FBTyxNQUFNLHlCQUF5QixLQUFLLFNBQVMsS0FBSztBQUFBLFVBRWxFO0FBQUEsUUFDSjtBQUFBLE1BQ0o7QUFHQSxVQUFJLGFBQWEsYUFBYSxNQUFNLFNBQVMsR0FBRztBQUM1QyxhQUFLLGNBQWMsbUJBQW1CO0FBQUEsTUFDMUM7QUFHQSxZQUFNLGFBQWEsTUFBTSxLQUFLLHdCQUF3QixpQkFBaUIsVUFBVSxPQUFPLGlCQUFpQixjQUFjLGlCQUFpQixXQUFXLEtBQUs7QUFHeEosVUFBSSxZQUFZO0FBQ1osYUFBSywyQkFBMkIsaUJBQWlCLFVBQVU7QUFBQSxNQUMvRCxPQUFPO0FBRUgsWUFBSSx5QkFBTyxxQkFBcUIsZ0JBQWdCLGdCQUFnQixjQUFjLGdCQUFnQixnQkFBZ0IsWUFBWTtBQUFBLE1BQzlIO0FBQUEsSUFFSixTQUFTLE9BQVA7QUFDRSxXQUFLLE9BQU8sTUFBTSxxQ0FBcUMsS0FBSztBQUM1RCxVQUFJLGlCQUFpQixPQUFPO0FBQ3hCLGFBQUssT0FBTyxNQUFNLCtCQUErQixNQUFNLE9BQU87QUFDOUQsYUFBSyxPQUFPLE1BQU0sNEJBQTRCLE1BQU0sSUFBSTtBQUN4RCxhQUFLLE9BQU8sTUFBTSw2QkFBNkIsTUFBTSxLQUFLO0FBQUEsTUFDOUQsT0FBTztBQUNILGFBQUssT0FBTyxNQUFNLDRDQUE0QyxPQUFPLEtBQUssQ0FBQztBQUFBLE1BQy9FO0FBQ0EsVUFBSSx5QkFBTyx3QkFBd0IsaUJBQWlCLFFBQVEsTUFBTSxVQUFVLE9BQU8sS0FBSyxHQUFHO0FBQUEsSUFDL0Y7QUFBQSxFQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLHNCQUFzQixPQUFlLFVBQWlDO0FBQ2hGLFFBQUk7QUFDQSxVQUFJLHlCQUFPLGdDQUFnQyxNQUFNLG1CQUFtQjtBQUdwRSxZQUFNLG1CQUFtQix1QkFBdUIsSUFBSTtBQUNwRCxZQUFNLG9CQUFvQixJQUFJLDhCQUE4QixrQkFBa0IsSUFBSTtBQUdsRixZQUFNLFVBQVUsS0FBSyxrQkFBa0I7QUFDdkMsWUFBTSx3QkFBd0IsTUFBTSxRQUFRLDBCQUEwQjtBQUd0RSxZQUFNLG1CQUFtQixNQUFNLGtCQUFrQjtBQUFBLFFBQzdDO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNKO0FBRUEsVUFBSSxpQkFBaUIsY0FBYyxXQUFXLEdBQUc7QUFDN0MsWUFBSSx5QkFBTywrQ0FBK0M7QUFDMUQ7QUFBQSxNQUNKO0FBR0EsVUFBSTtBQUFBLFFBQ0EsS0FBSztBQUFBLFFBQ0wsaUJBQWlCO0FBQUEsUUFDakIsQ0FBQyxXQUF3QztBQUNyQyxlQUFLLGtDQUFrQyxRQUFRLE9BQU8sVUFBVSxpQkFBaUIsY0FBYyxpQkFBaUIsU0FBUztBQUFBLFFBQzdIO0FBQUEsUUFDQTtBQUFBLFFBQ0EsaUJBQWlCO0FBQUEsTUFDckIsRUFBRSxLQUFLO0FBQUEsSUFFWCxTQUFTLE9BQVA7QUFDRSxXQUFLLE9BQU8sTUFBTSxpREFBaUQsS0FBSztBQUN4RSxXQUFLLE9BQU8sTUFBTSwwQ0FBMEMsS0FBSztBQUNqRSxVQUFJLGlCQUFpQixPQUFPO0FBQ3hCLGFBQUssT0FBTyxNQUFNLG1DQUFtQyxNQUFNLEtBQUs7QUFBQSxNQUNwRTtBQUNBLFVBQUkseUJBQU8sa0NBQWtDLGlCQUFpQixRQUFRLE1BQU0sVUFBVSxPQUFPLEtBQUssR0FBRztBQUFBLElBQ3pHO0FBQUEsRUFDSjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBYyxrQ0FDVixRQUNBLE9BQ0EsVUFDQSxjQUNBLFdBQ2E7QUFFYixVQUFNLGtCQUFrQixJQUFJLGFBQWE7QUFHekMsUUFBSSxLQUFLLFNBQVMsaUNBQWlDO0FBQy9DLHNCQUFnQix5QkFBeUIsS0FBSyxTQUFTLHNCQUFzQjtBQUFBLElBQ2pGO0FBRUEsUUFBSSxPQUFPLFlBQVksV0FBVyxHQUFHO0FBQ2pDLFVBQUkseUJBQU8sdUNBQXVDO0FBR2xELFlBQU1BLGNBQWEsTUFBTSxLQUFLLHdCQUF3QixpQkFBaUIsVUFBVSxPQUFPLGNBQWMsV0FBVyxJQUFJO0FBQ3JILFVBQUlBLGFBQVk7QUFDWixhQUFLLDJCQUEyQixpQkFBaUJBLFdBQVU7QUFBQSxNQUMvRDtBQUNBO0FBQUEsSUFDSjtBQUVBLFFBQUkseUJBQU8sYUFBYSxPQUFPLFlBQVksc0NBQXNDLE1BQU0sbUJBQW1CO0FBRzFHLFVBQU0sc0JBQXNCLE1BQU0sS0FBSyx5QkFBeUIsUUFBUSxLQUFLO0FBRzdFLFFBQUksYUFBYSxhQUFhLE1BQU0sU0FBUyxHQUFHO0FBQzVDLFVBQUk7QUFDQSxjQUFNLEtBQUssY0FBYyw4QkFBOEIsS0FBSztBQUFBLE1BQ2hFLFNBQVMsT0FBUDtBQUNFLGFBQUssT0FBTyxNQUFNLG1DQUFtQyxLQUFLO0FBQzFELFlBQUkseUJBQU8sNERBQTREO0FBQUEsTUFDM0U7QUFBQSxJQUNKO0FBR0EsZUFBVyxRQUFRLE9BQU87QUFDdEIsWUFBTSx1QkFBdUIsb0JBQW9CLElBQUksS0FBSyxJQUFJO0FBQzlELFVBQUksd0JBQXdCLHFCQUFxQixTQUFTLEdBQUc7QUFDekQsWUFBSTtBQUNBLGdCQUFNLEtBQUssY0FBYyxjQUFjLE1BQU0sVUFBVSxzQkFBc0IsZUFBZTtBQUFBLFFBQ2hHLFNBQVMsT0FBUDtBQUNFLGVBQUssT0FBTyxNQUFNLHlCQUF5QixLQUFLLFNBQVMsS0FBSztBQUM5RCxjQUFJLHlCQUFPLG9CQUFvQixLQUFLLGtDQUFrQztBQUFBLFFBQzFFO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFHQSxRQUFJLGFBQWEsYUFBYSxNQUFNLFNBQVMsR0FBRztBQUM1QyxXQUFLLGNBQWMsbUJBQW1CO0FBQUEsSUFDMUM7QUFHQSxVQUFNLGFBQWEsTUFBTSxLQUFLLHdCQUF3QixpQkFBaUIsVUFBVSxPQUFPLGNBQWMsV0FBVyxJQUFJO0FBR3JILFFBQUksWUFBWTtBQUNaLFdBQUssMkJBQTJCLGlCQUFpQixVQUFVO0FBQUEsSUFDL0QsT0FBTztBQUVILFVBQUkseUJBQU8scUJBQXFCLGdCQUFnQixnQkFBZ0IsY0FBYyxnQkFBZ0IsZ0JBQWdCLFlBQVk7QUFBQSxJQUM5SDtBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQWMsd0JBQ1YsUUFDQSxVQUNBLE9BQ0EsY0FDQSxXQUNBLG1CQUNlO0FBRWYsVUFBTSxlQUFlLEtBQUssU0FBUztBQUVuQyxVQUFNLG1CQUFtQix1QkFBdUIsSUFBSTtBQUNwRCxVQUFNLFVBQVUsaUJBQWlCLFdBQVcsUUFBUTtBQUVwRCxRQUFJLGVBQWU7QUFDbkIsUUFBSSxTQUFTO0FBQ1QsWUFBTSxXQUFXLFFBQVEsd0JBQXdCO0FBQ2pELHFCQUFlLFNBQVMsZ0JBQWdCO0FBQ3hDLFlBQU0sYUFBYSxTQUFTLDBCQUEwQjtBQUN0RCxhQUFPLGdDQUFnQyxXQUFXLE1BQU07QUFBQSxJQUM1RDtBQUVBLFVBQU0sYUFBYSxHQUFHLGdCQUFnQjtBQUd0QyxVQUFNLGVBQWUsTUFBTSxtQkFBbUIsWUFBWSxLQUFLLElBQUksS0FBSztBQUN4RSxRQUFJLENBQUMsYUFBYSxTQUFTO0FBQ3ZCLFdBQUssT0FBTyxNQUFNLDBDQUEwQyxjQUFjLGFBQWEsS0FBSztBQUM1RixVQUFJLHlCQUFPLHVEQUF1RDtBQUNsRSxhQUFPO0FBQUEsSUFDWDtBQUdBLFVBQU0sTUFBTSxLQUFLLElBQUksSUFBSTtBQUN6QixVQUFNLGFBQWEsZ0JBQWdCLEtBQUssUUFBUTtBQUNoRCxVQUFNLFVBQVUsZ0JBQWdCLEtBQUssTUFBTSxFQUFFLFFBQVEsTUFBTSxFQUFFLEVBQUUsUUFBUSxNQUFNLEVBQUU7QUFDL0UsUUFBSSxjQUFjLEdBQUcsY0FBYyxjQUFjO0FBR2pELFFBQUksVUFBVTtBQUNkLFdBQU8sTUFBTSxLQUFLLElBQUksTUFBTSxRQUFRLE9BQU8sV0FBVyxHQUFHO0FBQ3JELG9CQUFjLEdBQUcsY0FBYyxjQUFjLFdBQVc7QUFDeEQ7QUFBQSxJQUNKO0FBR0EsVUFBTSxjQUFjLElBQUksS0FBSyxFQUFFLFlBQVk7QUFHM0MsUUFBSSxXQUFXO0FBQ1gsYUFBTyxhQUFhLFNBQVM7QUFBQSxJQUNqQztBQUdBLFFBQUksY0FBYztBQUNkLGFBQU8sZ0JBQWdCLFlBQVk7QUFBQSxJQUN2QztBQUVBLFVBQU0sUUFBUSxPQUFPLG1CQUFtQjtBQUd4QyxVQUFNLGlCQUEyQixDQUFDO0FBQ2xDLFVBQU0sZUFBeUIsQ0FBQztBQUVoQyxRQUFJLE1BQU0sYUFBYSxHQUFHO0FBRXRCLGFBQU8sc0JBQXNCLEVBQUUsUUFBUSxVQUFRLGVBQWUsS0FBSyxJQUFJLENBQUM7QUFBQSxJQUM1RTtBQUdBLFVBQU0sUUFBUSxVQUFRO0FBQ2xCLFVBQUksQ0FBQyxlQUFlLFNBQVMsS0FBSyxJQUFJLEdBQUc7QUFDckMscUJBQWEsS0FBSyxLQUFLLElBQUk7QUFBQSxNQUMvQjtBQUFBLElBQ0osQ0FBQztBQUVELFVBQU0sYUFBYTtBQUFBLGNBQ2I7QUFBQSxZQUNGO0FBQUEsc0JBQ1UsTUFBTTtBQUFBLHVCQUNMLGVBQWU7QUFBQSxxQkFDakIsYUFBYTtBQUFBLHNCQUNaLE1BQU07QUFBQSxnQkFDWixNQUFNO0FBQUEsZ0JBQ04sTUFBTTtBQUFBLGdCQUNOLE1BQU07QUFBQSxlQUNQLE1BQU07QUFBQTtBQUFBO0FBQUEsRUFHbkIsT0FBTyxzQkFBc0IsT0FBTyxnQkFBZ0IsY0FBYyxjQUFjLFdBQVcsaUJBQWlCO0FBQUE7QUFHdEcsUUFBSTtBQUNBLFlBQU0sS0FBSyxJQUFJLE1BQU0sT0FBTyxhQUFhLFVBQVU7QUFDbkQsYUFBTztBQUFBLElBQ1gsU0FBUyxPQUFQO0FBQ0UsV0FBSyxPQUFPLE1BQU0saUNBQWlDLGdCQUFnQixLQUFLO0FBQ3hFLFdBQUssT0FBTyxNQUFNLGVBQWUsS0FBSztBQUN0QyxXQUFLLE9BQU8sTUFBTSx1QkFBdUIsV0FBVyxNQUFNO0FBQzFELFVBQUkseUJBQU8sdURBQXVEO0FBQ2xFLGFBQU87QUFBQSxJQUNYO0FBQUEsRUFDSjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsMkJBQTJCLFFBQXNCLFlBQTBCO0FBQy9FLFVBQU0sUUFBUSxPQUFPLG1CQUFtQjtBQUV4QyxRQUFJO0FBQUEsTUFDQSxLQUFLO0FBQUEsTUFDTDtBQUFBLE1BQ0E7QUFBQSxJQUNKLEVBQUUsS0FBSztBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQWMseUJBQ1YsUUFDQSxPQUM4QjtBQUM5QixVQUFNLHNCQUFzQixvQkFBSSxJQUFzQjtBQUl0RCxRQUFJO0FBQ0EsWUFBTSxtQkFBbUIsdUJBQXVCLElBQUk7QUFFcEQsWUFBTSxvQkFBb0IsSUFBSSw4QkFBOEIsa0JBQWtCLElBQUk7QUFDbEYsWUFBTSxVQUFVLEtBQUssa0JBQWtCO0FBQ3ZDLFlBQU0sd0JBQXdCLE1BQU0sUUFBUSwwQkFBMEI7QUFHdEUsWUFBTSxtQkFBbUIsTUFBTSxrQkFBa0I7QUFBQSxRQUM3QztBQUFBLFFBQ0E7QUFBQTtBQUFBLFFBQ0E7QUFBQSxNQUNKO0FBR0EsWUFBTSxpQkFBaUIsSUFBSSxJQUFJLE9BQU8sV0FBVztBQUNqRCxpQkFBVyxnQkFBZ0IsaUJBQWlCLGVBQWU7QUFDdkQsWUFBSSxlQUFlLElBQUksYUFBYSxFQUFFLEtBQUssYUFBYSxZQUFZO0FBQ2hFLGdCQUFNLG9CQUFvQixvQkFBb0IsSUFBSSxhQUFhLFVBQVUsS0FBSyxDQUFDO0FBQy9FLDRCQUFrQixLQUFLLGFBQWEsRUFBRTtBQUN0Qyw4QkFBb0IsSUFBSSxhQUFhLFlBQVksaUJBQWlCO0FBQUEsUUFDdEU7QUFBQSxNQUNKO0FBQUEsSUFDSixTQUFTLE9BQVA7QUFDRSxXQUFLLE9BQU8sTUFBTSx5Q0FBeUMsS0FBSztBQUVoRSwwQkFBb0IsSUFBSSxNQUFNLENBQUMsRUFBRSxNQUFNLE9BQU8sV0FBVztBQUFBLElBQzdEO0FBRUEsV0FBTztBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLHFCQUFxQixPQUF1QjtBQUNoRCxXQUFPLE1BQU0sS0FBSyxDQUFDLEdBQUcsTUFBTTtBQUN4QixZQUFNLGlCQUFpQjtBQUN2QixZQUFNLGVBQWUsd0JBQUMsYUFBcUI7QUFDdkMsY0FBTSxRQUFRLFNBQVMsTUFBTSxjQUFjO0FBQzNDLFlBQUksQ0FBQyxPQUFPO0FBQ1IsZUFBSyxPQUFPLEtBQUssbUNBQW1DLFVBQVU7QUFDOUQsaUJBQU87QUFBQSxRQUNYO0FBQ0EsZUFBTyxNQUFNLENBQUM7QUFBQSxNQUNsQixHQVBxQjtBQVFyQixhQUFPLGFBQWEsRUFBRSxJQUFJLEVBQUUsY0FBYyxhQUFhLEVBQUUsSUFBSSxDQUFDO0FBQUEsSUFDbEUsQ0FBQztBQUFBLEVBQ0w7QUFDSjtBQWhwQnFCOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAibG9nZ2VyIiwgIkxvZ0xldmVsIiwgImxvZ2dlciIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJMaW5rVXBkYXRlU2VydmljZSIsICJVcGdyYWRlUHJvZ3Jlc3NNb2RhbCIsICJtb3ZlQW5kTWVyZ2VGb2xkZXJzIiwgIm1vZHVsZSIsICJlIiwgInQiLCAiciIsICJjIiwgIm4iLCAiaSIsICJzIiwgImEiLCAibyIsICJoIiwgInUiLCAibCIsICJmIiwgImQiLCAicCIsICJtIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAibG9nZ2VyIiwgImxvZ2dlciIsICJpbXBvcnRfb2JzaWRpYW4iLCAibG9nZ2VyIiwgImNvbnRlbnQiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJmbSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJFbmhhbmNlZEZvbGRlck1pZ3JhdGlvbkRpYWxvZyIsICJMaW5rVXBkYXRlU2VydmljZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInN0YXRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJsb2dnZXIiLCAibG9nZ2VyIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJsb2dnZXIiLCAiemlwRmlsZSIsICJfYSIsICJlbnN1cmVGb2xkZXJFeGlzdHMiLCAiZ2VuZXJhdGVDb252ZXJzYXRpb25GaWxlTmFtZSIsICJsb2dnZXIiLCAiZW5zdXJlRm9sZGVyRXhpc3RzIiwgImltcG9ydF9vYnNpZGlhbiIsICJsb2dnZXIiLCAiSlNaaXAiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJsb2dnZXIiLCAiVXBncmFkZTExMCIsICJVcGdyYWRlMTIwIiwgIlVwZ3JhZGUxMzAiLCAiX2EiLCAiX2IiLCAiVXBncmFkZUNvbXBsZXRlTW9kYWwiLCAiTmV4dXNVcGdyYWRlTW9kYWwxMzAiLCAiTmV4dXNVcGdyYWRlTW9kYWwiLCAicmVxdWVzdFVybCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiSlNaaXAiLCAibW9tZW50IiwgImltcG9ydF9vYnNpZGlhbiIsICJyZXBvcnRQYXRoIl0KfQo=
